function NI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M0={exports:{}},Zh={},V0={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),DI=Symbol.for("react.portal"),MI=Symbol.for("react.fragment"),VI=Symbol.for("react.strict_mode"),FI=Symbol.for("react.profiler"),zI=Symbol.for("react.provider"),jI=Symbol.for("react.context"),BI=Symbol.for("react.forward_ref"),UI=Symbol.for("react.suspense"),HI=Symbol.for("react.memo"),WI=Symbol.for("react.lazy"),M_=Symbol.iterator;function $I(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var F0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z0=Object.assign,j0={};function fa(t,e,n){this.props=t,this.context=e,this.refs=j0,this.updater=n||F0}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B0(){}B0.prototype=fa.prototype;function fm(t,e,n){this.props=t,this.context=e,this.refs=j0,this.updater=n||F0}var pm=fm.prototype=new B0;pm.constructor=fm;z0(pm,fa.prototype);pm.isPureReactComponent=!0;var V_=Array.isArray,U0=Object.prototype.hasOwnProperty,mm={current:null},H0={key:!0,ref:!0,__self:!0,__source:!0};function W0(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)U0.call(e,r)&&!H0.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:fu,type:t,key:o,ref:l,props:i,_owner:mm.current}}function qI(t,e){return{$$typeof:fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===fu}function GI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GI(""+t.key):e.toString(36)}function Dc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case fu:case DI:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Xd(l,0):r,V_(i)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),Dc(i,e,n,"",function(p){return p})):i!=null&&(gm(i)&&(i=qI(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(F_,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",V_(t))for(var h=0;h<t.length;h++){o=t[h];var d=r+Xd(o,h);l+=Dc(o,e,n,d,i)}else if(d=$I(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=r+Xd(o,h++),l+=Dc(o,e,n,d,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function cc(t,e,n){if(t==null)return t;var r=[],i=0;return Dc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function ZI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},Mc={transition:null},KI={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Mc,ReactCurrentOwner:mm};function $0(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:cc,forEach:function(t,e,n){cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=fa;Ie.Fragment=MI;Ie.Profiler=FI;Ie.PureComponent=fm;Ie.StrictMode=VI;Ie.Suspense=UI;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KI;Ie.act=$0;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=z0({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=mm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)U0.call(e,d)&&!H0.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:fu,type:t.type,key:i,ref:o,props:r,_owner:l}};Ie.createContext=function(t){return t={$$typeof:jI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zI,_context:t},t.Consumer=t};Ie.createElement=W0;Ie.createFactory=function(t){var e=W0.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:BI,render:t}};Ie.isValidElement=gm;Ie.lazy=function(t){return{$$typeof:WI,_payload:{_status:-1,_result:t},_init:ZI}};Ie.memo=function(t,e){return{$$typeof:HI,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Mc.transition;Mc.transition={};try{t()}finally{Mc.transition=e}};Ie.unstable_act=$0;Ie.useCallback=function(t,e){return Kt.current.useCallback(t,e)};Ie.useContext=function(t){return Kt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Kt.current.useEffect(t,e)};Ie.useId=function(){return Kt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Kt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Kt.current.useRef(t)};Ie.useState=function(t){return Kt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Kt.current.useTransition()};Ie.version="18.3.1";V0.exports=Ie;var q=V0.exports;const Ml=D0(q),QI=NI({__proto__:null,default:Ml},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YI=q,XI=Symbol.for("react.element"),JI=Symbol.for("react.fragment"),eS=Object.prototype.hasOwnProperty,tS=YI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nS={key:!0,ref:!0,__self:!0,__source:!0};function q0(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)eS.call(e,r)&&!nS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XI,type:t,key:o,ref:l,props:i,_owner:tS.current}}Zh.Fragment=JI;Zh.jsx=q0;Zh.jsxs=q0;M0.exports=Zh;var w=M0.exports,Uf={},G0={exports:{}},_n={},Z0={exports:{}},K0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var X=$.length;$.push(le);e:for(;0<X;){var he=X-1>>>1,ve=$[he];if(0<i(ve,le))$[he]=le,$[X]=ve,X=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var le=$[0],X=$.pop();if(X!==le){$[0]=X;e:for(var he=0,ve=$.length,Ze=ve>>>1;he<Ze;){var Se=2*(he+1)-1,we=$[Se],ce=Se+1,ct=$[ce];if(0>i(we,X))ce<ve&&0>i(ct,we)?($[he]=ct,$[ce]=X,he=ce):($[he]=we,$[Se]=X,he=Se);else if(ce<ve&&0>i(ct,X))$[he]=ct,$[ce]=X,he=ce;else break e}}return le}function i($,le){var X=$.sortIndex-le.sortIndex;return X!==0?X:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,v=null,E=3,A=!1,V=!1,F=!1,z=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=$)r(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(p)}}function j($){if(F=!1,k($),!V)if(n(d)!==null)V=!0,De(G);else{var le=n(p);le!==null&&We(j,le.startTime-$)}}function G($,le){V=!1,F&&(F=!1,N(C),C=-1),A=!0;var X=E;try{for(k(le),v=n(d);v!==null&&(!(v.expirationTime>le)||$&&!D());){var he=v.callback;if(typeof he=="function"){v.callback=null,E=v.priorityLevel;var ve=he(v.expirationTime<=le);le=t.unstable_now(),typeof ve=="function"?v.callback=ve:v===n(d)&&r(d),k(le)}else r(d);v=n(d)}if(v!==null)var Ze=!0;else{var Se=n(p);Se!==null&&We(j,Se.startTime-le),Ze=!1}return Ze}finally{v=null,E=X,A=!1}}var J=!1,b=null,C=-1,I=5,O=-1;function D(){return!(t.unstable_now()-O<I)}function P(){if(b!==null){var $=t.unstable_now();O=$;var le=!0;try{le=b(!0,$)}finally{le?R():(J=!1,b=null)}}else J=!1}var R;if(typeof T=="function")R=function(){T(P)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Te=ee.port2;ee.port1.onmessage=P,R=function(){Te.postMessage(null)}}else R=function(){z(P,0)};function De($){b=$,J||(J=!0,R())}function We($,le){C=z(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){V||A||(V=!0,De(G))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var X=E;E=le;try{return $()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=E;E=$;try{return le()}finally{E=X}},t.unstable_scheduleCallback=function($,le,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,$){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,$={id:_++,callback:le,priorityLevel:$,startTime:X,expirationTime:ve,sortIndex:-1},X>he?($.sortIndex=X,e(p,$),n(d)===null&&$===n(p)&&(F?(N(C),C=-1):F=!0,We(j,X-he))):($.sortIndex=ve,e(d,$),V||A||(V=!0,De(G))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var le=E;return function(){var X=E;E=le;try{return $.apply(this,arguments)}finally{E=X}}}})(K0);Z0.exports=K0;var rS=Z0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS=q,gn=rS;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q0=new Set,Vl={};function js(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(Vl[t]=e,t=0;t<e.length;t++)Q0.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=Object.prototype.hasOwnProperty,sS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z_={},j_={};function oS(t){return Hf.call(j_,t)?!0:Hf.call(z_,t)?!1:sS.test(t)?j_[t]=!0:(z_[t]=!0,!1)}function aS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lS(t,e,n,r){if(e===null||typeof e>"u"||aS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function ym(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_m,ym);Lt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_m,ym);Lt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_m,ym);Lt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vm(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lS(e,n,i,r)&&(n=null),r||i===null?oS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=iS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),Em=Symbol.for("react.forward_ref"),$f=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),xm=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),J0=Symbol.for("react.offscreen"),B_=Symbol.iterator;function tl(t){return t===null||typeof t!="object"?null:(t=B_&&t[B_]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Jd;function cl(t){if(Jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jd=e&&e[1]||""}return`
`+Jd+t}var ef=!1;function tf(t,e){if(!t||ef)return"";ef=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,h=o.length-1;1<=l&&0<=h&&i[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(i[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||i[l]!==o[h]){var d=`
`+i[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{ef=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function uS(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=tf(t.type,!1),t;case 11:return t=tf(t.type.render,!1),t;case 1:return t=tf(t.type,!0),t;default:return""}}function Gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ro:return"Fragment";case Ao:return"Portal";case Wf:return"Profiler";case wm:return"StrictMode";case $f:return"Suspense";case qf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X0:return(t.displayName||"Context")+".Consumer";case Y0:return(t._context.displayName||"Context")+".Provider";case Em:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xm:return e=t.displayName||null,e!==null?e:Gf(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Gf(t(e))}catch{}}return null}function cS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gf(e);case 8:return e===wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ew(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hS(t){var e=ew(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dc(t){t._valueTracker||(t._valueTracker=hS(t))}function tw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ew(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nw(t,e){e=e.checked,e!=null&&vm(t,"checked",e,!1)}function Kf(t,e){nw(t,e);var n=zi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qf(t,e.type,zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qf(t,e,n){(e!=="number"||sh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hl=Array.isArray;function Uo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(hl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zi(n)}}function rw(t,e){var n=zi(e.value),r=zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fc,sw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fc=fc||document.createElement("div"),fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dS=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){dS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function ow(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function aw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ow(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fS=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jf(t,e){if(e){if(fS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function ep(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=null;function Tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var np=null,Ho=null,Wo=null;function q_(t){if(t=gu(t)){if(typeof np!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Jh(e),np(t.stateNode,t.type,e))}}function lw(t){Ho?Wo?Wo.push(t):Wo=[t]:Ho=t}function uw(){if(Ho){var t=Ho,e=Wo;if(Wo=Ho=null,q_(t),e)for(t=0;t<e.length;t++)q_(e[t])}}function cw(t,e){return t(e)}function hw(){}var nf=!1;function dw(t,e,n){if(nf)return t(e,n);nf=!0;try{return cw(t,e,n)}finally{nf=!1,(Ho!==null||Wo!==null)&&(hw(),uw())}}function zl(t,e){var n=t.stateNode;if(n===null)return null;var r=Jh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var rp=!1;if($r)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){rp=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{rp=!1}function pS(t,e,n,r,i,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var El=!1,oh=null,ah=!1,ip=null,mS={onError:function(t){El=!0,oh=t}};function gS(t,e,n,r,i,o,l,h,d){El=!1,oh=null,pS.apply(mS,arguments)}function _S(t,e,n,r,i,o,l,h,d){if(gS.apply(this,arguments),El){if(El){var p=oh;El=!1,oh=null}else throw Error(Y(198));ah||(ah=!0,ip=p)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G_(t){if(Bs(t)!==t)throw Error(Y(188))}function yS(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return G_(i),t;if(o===r)return G_(i),e;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,h=i.child;h;){if(h===n){l=!0,n=i,r=o;break}if(h===r){l=!0,r=i,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=i;break}if(h===r){l=!0,r=o,n=i;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function pw(t){return t=yS(t),t!==null?mw(t):null}function mw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mw(t);if(e!==null)return e;t=t.sibling}return null}var gw=gn.unstable_scheduleCallback,Z_=gn.unstable_cancelCallback,vS=gn.unstable_shouldYield,wS=gn.unstable_requestPaint,lt=gn.unstable_now,ES=gn.unstable_getCurrentPriorityLevel,Im=gn.unstable_ImmediatePriority,_w=gn.unstable_UserBlockingPriority,lh=gn.unstable_NormalPriority,xS=gn.unstable_LowPriority,yw=gn.unstable_IdlePriority,Kh=null,fr=null;function TS(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Kh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:CS,IS=Math.log,SS=Math.LN2;function CS(t){return t>>>=0,t===0?32:31-(IS(t)/SS|0)|0}var pc=64,mc=4194304;function dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~i;h!==0?r=dl(h):(o&=l,o!==0&&(r=dl(o)))}else l=n&~i,l!==0?r=dl(l):o!==0&&(r=dl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),i=1<<n,r|=t[n],e&=~i;return r}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-qn(o),h=1<<l,d=i[l];d===-1?(!(h&n)||h&r)&&(i[l]=PS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function sp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vw(){var t=pc;return pc<<=1,!(pc&4194240)&&(pc=64),t}function rf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function AS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ew,Cm,xw,Tw,Iw,op=!1,gc=[],Ci=null,Pi=null,ki=null,jl=new Map,Bl=new Map,mi=[],RS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(e.pointerId)}}function rl(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=gu(e),e!==null&&Cm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bS(t,e,n,r,i){switch(e){case"focusin":return Ci=rl(Ci,t,e,n,r,i),!0;case"dragenter":return Pi=rl(Pi,t,e,n,r,i),!0;case"mouseover":return ki=rl(ki,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return jl.set(o,rl(jl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Bl.set(o,rl(Bl.get(o)||null,t,e,n,r,i)),!0}return!1}function Sw(t){var e=ws(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=fw(n),e!==null){t.blockedOn=e,Iw(t.priority,function(){xw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ap(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tp=r,n.target.dispatchEvent(r),tp=null}else return e=gu(n),e!==null&&Cm(e),t.blockedOn=n,!1;e.shift()}return!0}function Q_(t,e,n){Vc(t)&&n.delete(e)}function LS(){op=!1,Ci!==null&&Vc(Ci)&&(Ci=null),Pi!==null&&Vc(Pi)&&(Pi=null),ki!==null&&Vc(ki)&&(ki=null),jl.forEach(Q_),Bl.forEach(Q_)}function il(t,e){t.blockedOn===e&&(t.blockedOn=null,op||(op=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,LS)))}function Ul(t){function e(i){return il(i,t)}if(0<gc.length){il(gc[0],t);for(var n=1;n<gc.length;n++){var r=gc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ci!==null&&il(Ci,t),Pi!==null&&il(Pi,t),ki!==null&&il(ki,t),jl.forEach(e),Bl.forEach(e),n=0;n<mi.length;n++)r=mi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mi.length&&(n=mi[0],n.blockedOn===null);)Sw(n),n.blockedOn===null&&mi.shift()}var $o=Jr.ReactCurrentBatchConfig,ch=!0;function NS(t,e,n,r){var i=je,o=$o.transition;$o.transition=null;try{je=1,Pm(t,e,n,r)}finally{je=i,$o.transition=o}}function OS(t,e,n,r){var i=je,o=$o.transition;$o.transition=null;try{je=4,Pm(t,e,n,r)}finally{je=i,$o.transition=o}}function Pm(t,e,n,r){if(ch){var i=ap(t,e,n,r);if(i===null)pf(t,e,r,hh,n),K_(t,r);else if(bS(i,t,e,n,r))r.stopPropagation();else if(K_(t,r),e&4&&-1<RS.indexOf(t)){for(;i!==null;){var o=gu(i);if(o!==null&&Ew(o),o=ap(t,e,n,r),o===null&&pf(t,e,r,hh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else pf(t,e,r,null,n)}}var hh=null;function ap(t,e,n,r){if(hh=null,t=Tm(r),t=ws(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hh=t,null}function Cw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ES()){case Im:return 1;case _w:return 4;case lh:case xS:return 16;case yw:return 536870912;default:return 16}default:return 16}}var xi=null,km=null,Fc=null;function Pw(){if(Fc)return Fc;var t,e=km,n=e.length,r,i="value"in xi?xi.value:xi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return Fc=i.slice(t,1<r?1-r:void 0)}function zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _c(){return!0}function Y_(){return!1}function yn(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_c:Y_,this.isPropagationStopped=Y_,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),e}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Am=yn(pa),mu=Xe({},pa,{view:0,detail:0}),DS=yn(mu),sf,of,sl,Qh=Xe({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sl&&(sl&&t.type==="mousemove"?(sf=t.screenX-sl.screenX,of=t.screenY-sl.screenY):of=sf=0,sl=t),sf)},movementY:function(t){return"movementY"in t?t.movementY:of}}),X_=yn(Qh),MS=Xe({},Qh,{dataTransfer:0}),VS=yn(MS),FS=Xe({},mu,{relatedTarget:0}),af=yn(FS),zS=Xe({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),jS=yn(zS),BS=Xe({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),US=yn(BS),HS=Xe({},pa,{data:0}),J_=yn(HS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qS[t])?!!e[t]:!1}function Rm(){return GS}var ZS=Xe({},mu,{key:function(t){if(t.key){var e=WS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$S[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rm,charCode:function(t){return t.type==="keypress"?zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KS=yn(ZS),QS=Xe({},Qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ey=yn(QS),YS=Xe({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rm}),XS=yn(YS),JS=Xe({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),eC=yn(JS),tC=Xe({},Qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nC=yn(tC),rC=[9,13,27,32],bm=$r&&"CompositionEvent"in window,xl=null;$r&&"documentMode"in document&&(xl=document.documentMode);var iC=$r&&"TextEvent"in window&&!xl,kw=$r&&(!bm||xl&&8<xl&&11>=xl),ty=" ",ny=!1;function Aw(t,e){switch(t){case"keyup":return rC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bo=!1;function sC(t,e){switch(t){case"compositionend":return Rw(e);case"keypress":return e.which!==32?null:(ny=!0,ty);case"textInput":return t=e.data,t===ty&&ny?null:t;default:return null}}function oC(t,e){if(bo)return t==="compositionend"||!bm&&Aw(t,e)?(t=Pw(),Fc=km=xi=null,bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kw&&e.locale!=="ko"?null:e.data;default:return null}}var aC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aC[t.type]:e==="textarea"}function bw(t,e,n,r){lw(r),e=dh(e,"onChange"),0<e.length&&(n=new Am("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tl=null,Hl=null;function lC(t){Uw(t,0)}function Yh(t){var e=Oo(t);if(tw(e))return t}function uC(t,e){if(t==="change")return e}var Lw=!1;if($r){var lf;if($r){var uf="oninput"in document;if(!uf){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),uf=typeof iy.oninput=="function"}lf=uf}else lf=!1;Lw=lf&&(!document.documentMode||9<document.documentMode)}function sy(){Tl&&(Tl.detachEvent("onpropertychange",Nw),Hl=Tl=null)}function Nw(t){if(t.propertyName==="value"&&Yh(Hl)){var e=[];bw(e,Hl,t,Tm(t)),dw(lC,e)}}function cC(t,e,n){t==="focusin"?(sy(),Tl=e,Hl=n,Tl.attachEvent("onpropertychange",Nw)):t==="focusout"&&sy()}function hC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yh(Hl)}function dC(t,e){if(t==="click")return Yh(e)}function fC(t,e){if(t==="input"||t==="change")return Yh(e)}function pC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:pC;function Wl(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hf.call(e,i)||!Kn(t[i],e[i]))return!1}return!0}function oy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ay(t,e){var n=oy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oy(n)}}function Ow(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ow(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dw(){for(var t=window,e=sh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sh(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mC(t){var e=Dw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ow(n.ownerDocument.documentElement,n)){if(r!==null&&Lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ay(n,o);var l=ay(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gC=$r&&"documentMode"in document&&11>=document.documentMode,Lo=null,lp=null,Il=null,up=!1;function ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;up||Lo==null||Lo!==sh(r)||(r=Lo,"selectionStart"in r&&Lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&Wl(Il,r)||(Il=r,r=dh(lp,"onSelect"),0<r.length&&(e=new Am("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lo)))}function yc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var No={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionend:yc("Transition","TransitionEnd")},cf={},Mw={};$r&&(Mw=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Xh(t){if(cf[t])return cf[t];if(!No[t])return t;var e=No[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mw)return cf[t]=e[n];return t}var Vw=Xh("animationend"),Fw=Xh("animationiteration"),zw=Xh("animationstart"),jw=Xh("transitionend"),Bw=new Map,uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(t,e){Bw.set(t,e),js(e,[t])}for(var hf=0;hf<uy.length;hf++){var df=uy[hf],_C=df.toLowerCase(),yC=df[0].toUpperCase()+df.slice(1);Zi(_C,"on"+yC)}Zi(Vw,"onAnimationEnd");Zi(Fw,"onAnimationIteration");Zi(zw,"onAnimationStart");Zi("dblclick","onDoubleClick");Zi("focusin","onFocus");Zi("focusout","onBlur");Zi(jw,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vC=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_S(r,e,void 0,t),t.currentTarget=null}function Uw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&i.isPropagationStopped())break e;cy(i,h,p),o=d}else for(l=0;l<r.length;l++){if(h=r[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&i.isPropagationStopped())break e;cy(i,h,p),o=d}}}if(ah)throw t=ip,ah=!1,ip=null,t}function $e(t,e){var n=e[pp];n===void 0&&(n=e[pp]=new Set);var r=t+"__bubble";n.has(r)||(Hw(e,t,2,!1),n.add(r))}function ff(t,e,n){var r=0;e&&(r|=4),Hw(n,t,r,e)}var vc="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[vc]){t[vc]=!0,Q0.forEach(function(n){n!=="selectionchange"&&(vC.has(n)||ff(n,!1,t),ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vc]||(e[vc]=!0,ff("selectionchange",!1,e))}}function Hw(t,e,n,r){switch(Cw(e)){case 1:var i=NS;break;case 4:i=OS;break;default:i=Pm}n=i.bind(null,e,n,t),i=void 0,!rp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;h!==null;){if(l=ws(h),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}h=h.parentNode}}r=r.return}dw(function(){var p=o,_=Tm(n),v=[];e:{var E=Bw.get(t);if(E!==void 0){var A=Am,V=t;switch(t){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":A=KS;break;case"focusin":V="focus",A=af;break;case"focusout":V="blur",A=af;break;case"beforeblur":case"afterblur":A=af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=VS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=XS;break;case Vw:case Fw:case zw:A=jS;break;case jw:A=eC;break;case"scroll":A=DS;break;case"wheel":A=nC;break;case"copy":case"cut":case"paste":A=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=ey}var F=(e&4)!==0,z=!F&&t==="scroll",N=F?E!==null?E+"Capture":null:E;F=[];for(var T=p,k;T!==null;){k=T;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,N!==null&&(j=zl(T,N),j!=null&&F.push(ql(T,j,k)))),z)break;T=T.return}0<F.length&&(E=new A(E,V,null,n,_),v.push({event:E,listeners:F}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",E&&n!==tp&&(V=n.relatedTarget||n.fromElement)&&(ws(V)||V[qr]))break e;if((A||E)&&(E=_.window===_?_:(E=_.ownerDocument)?E.defaultView||E.parentWindow:window,A?(V=n.relatedTarget||n.toElement,A=p,V=V?ws(V):null,V!==null&&(z=Bs(V),V!==z||V.tag!==5&&V.tag!==6)&&(V=null)):(A=null,V=p),A!==V)){if(F=X_,j="onMouseLeave",N="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(F=ey,j="onPointerLeave",N="onPointerEnter",T="pointer"),z=A==null?E:Oo(A),k=V==null?E:Oo(V),E=new F(j,T+"leave",A,n,_),E.target=z,E.relatedTarget=k,j=null,ws(_)===p&&(F=new F(N,T+"enter",V,n,_),F.target=k,F.relatedTarget=z,j=F),z=j,A&&V)t:{for(F=A,N=V,T=0,k=F;k;k=To(k))T++;for(k=0,j=N;j;j=To(j))k++;for(;0<T-k;)F=To(F),T--;for(;0<k-T;)N=To(N),k--;for(;T--;){if(F===N||N!==null&&F===N.alternate)break t;F=To(F),N=To(N)}F=null}else F=null;A!==null&&hy(v,E,A,F,!1),V!==null&&z!==null&&hy(v,z,V,F,!0)}}e:{if(E=p?Oo(p):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var G=uC;else if(ry(E))if(Lw)G=fC;else{G=hC;var J=cC}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(G=dC);if(G&&(G=G(t,p))){bw(v,G,n,_);break e}J&&J(t,E,p),t==="focusout"&&(J=E._wrapperState)&&J.controlled&&E.type==="number"&&Qf(E,"number",E.value)}switch(J=p?Oo(p):window,t){case"focusin":(ry(J)||J.contentEditable==="true")&&(Lo=J,lp=p,Il=null);break;case"focusout":Il=lp=Lo=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,ly(v,n,_);break;case"selectionchange":if(gC)break;case"keydown":case"keyup":ly(v,n,_)}var b;if(bm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else bo?Aw(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(kw&&n.locale!=="ko"&&(bo||C!=="onCompositionStart"?C==="onCompositionEnd"&&bo&&(b=Pw()):(xi=_,km="value"in xi?xi.value:xi.textContent,bo=!0)),J=dh(p,C),0<J.length&&(C=new J_(C,t,null,n,_),v.push({event:C,listeners:J}),b?C.data=b:(b=Rw(n),b!==null&&(C.data=b)))),(b=iC?sC(t,n):oC(t,n))&&(p=dh(p,"onBeforeInput"),0<p.length&&(_=new J_("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:p}),_.data=b))}Uw(v,e)})}function ql(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=zl(t,n),o!=null&&r.unshift(ql(t,o,i)),o=zl(t,e),o!=null&&r.push(ql(t,o,i))),t=t.return}return r}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hy(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===r)break;h.tag===5&&p!==null&&(h=p,i?(d=zl(n,o),d!=null&&l.unshift(ql(n,d,h))):i||(d=zl(n,o),d!=null&&l.push(ql(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var wC=/\r\n?/g,EC=/\u0000|\uFFFD/g;function dy(t){return(typeof t=="string"?t:""+t).replace(wC,`
`).replace(EC,"")}function wc(t,e,n){if(e=dy(e),dy(t)!==e&&n)throw Error(Y(425))}function fh(){}var cp=null,hp=null;function dp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fp=typeof setTimeout=="function"?setTimeout:void 0,xC=typeof clearTimeout=="function"?clearTimeout:void 0,fy=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof fy<"u"?function(t){return fy.resolve(null).then(t).catch(IC)}:fp;function IC(t){setTimeout(function(){throw t})}function mf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ul(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ul(e)}function Ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),ur="__reactFiber$"+ma,Gl="__reactProps$"+ma,qr="__reactContainer$"+ma,pp="__reactEvents$"+ma,SC="__reactListeners$"+ma,CC="__reactHandles$"+ma;function ws(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=py(t);t!==null;){if(n=t[ur])return n;t=py(t)}return e}t=n,n=t.parentNode}return null}function gu(t){return t=t[ur]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Jh(t){return t[Gl]||null}var mp=[],Do=-1;function Ki(t){return{current:t}}function Ge(t){0>Do||(t.current=mp[Do],mp[Do]=null,Do--)}function He(t,e){Do++,mp[Do]=t.current,t.current=e}var ji={},Bt=Ki(ji),on=Ki(!1),As=ji;function ea(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function ph(){Ge(on),Ge(Bt)}function my(t,e,n){if(Bt.current!==ji)throw Error(Y(168));He(Bt,e),He(on,n)}function Ww(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,cS(t)||"Unknown",i));return Xe({},n,r)}function mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,As=Bt.current,He(Bt,t),He(on,on.current),!0}function gy(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Ww(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,Ge(on),Ge(Bt),He(Bt,t)):Ge(on),He(on,n)}var Fr=null,ed=!1,gf=!1;function $w(t){Fr===null?Fr=[t]:Fr.push(t)}function PC(t){ed=!0,$w(t)}function Qi(){if(!gf&&Fr!==null){gf=!0;var t=0,e=je;try{var n=Fr;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fr=null,ed=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(t+1)),gw(Im,Qi),i}finally{je=e,gf=!1}}return null}var Mo=[],Vo=0,gh=null,_h=0,Pn=[],kn=0,Rs=null,zr=1,jr="";function _s(t,e){Mo[Vo++]=_h,Mo[Vo++]=gh,gh=t,_h=e}function qw(t,e,n){Pn[kn++]=zr,Pn[kn++]=jr,Pn[kn++]=Rs,Rs=t;var r=zr;t=jr;var i=32-qn(r)-1;r&=~(1<<i),n+=1;var o=32-qn(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,zr=1<<32-qn(e)+i|n<<i|r,jr=o+t}else zr=1<<o|n<<i|r,jr=t}function Nm(t){t.return!==null&&(_s(t,1),qw(t,1,0))}function Om(t){for(;t===gh;)gh=Mo[--Vo],Mo[Vo]=null,_h=Mo[--Vo],Mo[Vo]=null;for(;t===Rs;)Rs=Pn[--kn],Pn[kn]=null,jr=Pn[--kn],Pn[kn]=null,zr=Pn[--kn],Pn[kn]=null}var mn=null,dn=null,Ke=!1,Wn=null;function Gw(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _y(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,dn=Ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:zr,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,dn=null,!0):!1;default:return!1}}function gp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _p(t){if(Ke){var e=dn;if(e){var n=e;if(!_y(t,e)){if(gp(t))throw Error(Y(418));e=Ai(n.nextSibling);var r=mn;e&&_y(t,e)?Gw(r,n):(t.flags=t.flags&-4097|2,Ke=!1,mn=t)}}else{if(gp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ke=!1,mn=t}}}function yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function Ec(t){if(t!==mn)return!1;if(!Ke)return yy(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dp(t.type,t.memoizedProps)),e&&(e=dn)){if(gp(t))throw Zw(),Error(Y(418));for(;e;)Gw(t,e),e=Ai(e.nextSibling)}if(yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=Ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=mn?Ai(t.stateNode.nextSibling):null;return!0}function Zw(){for(var t=dn;t;)t=Ai(t.nextSibling)}function ta(){dn=mn=null,Ke=!1}function Dm(t){Wn===null?Wn=[t]:Wn.push(t)}var kC=Jr.ReactCurrentBatchConfig;function ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=i.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function xc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function Kw(t){function e(N,T){if(t){var k=N.deletions;k===null?(N.deletions=[T],N.flags|=16):k.push(T)}}function n(N,T){if(!t)return null;for(;T!==null;)e(N,T),T=T.sibling;return null}function r(N,T){for(N=new Map;T!==null;)T.key!==null?N.set(T.key,T):N.set(T.index,T),T=T.sibling;return N}function i(N,T){return N=Ni(N,T),N.index=0,N.sibling=null,N}function o(N,T,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<T?(N.flags|=2,T):k):(N.flags|=2,T)):(N.flags|=1048576,T)}function l(N){return t&&N.alternate===null&&(N.flags|=2),N}function h(N,T,k,j){return T===null||T.tag!==6?(T=Tf(k,N.mode,j),T.return=N,T):(T=i(T,k),T.return=N,T)}function d(N,T,k,j){var G=k.type;return G===Ro?_(N,T,k.props.children,j,k.key):T!==null&&(T.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fi&&vy(G)===T.type)?(j=i(T,k.props),j.ref=ol(N,T,k),j.return=N,j):(j=qc(k.type,k.key,k.props,null,N.mode,j),j.ref=ol(N,T,k),j.return=N,j)}function p(N,T,k,j){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=If(k,N.mode,j),T.return=N,T):(T=i(T,k.children||[]),T.return=N,T)}function _(N,T,k,j,G){return T===null||T.tag!==7?(T=Ss(k,N.mode,j,G),T.return=N,T):(T=i(T,k),T.return=N,T)}function v(N,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Tf(""+T,N.mode,k),T.return=N,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hc:return k=qc(T.type,T.key,T.props,null,N.mode,k),k.ref=ol(N,null,T),k.return=N,k;case Ao:return T=If(T,N.mode,k),T.return=N,T;case fi:var j=T._init;return v(N,j(T._payload),k)}if(hl(T)||tl(T))return T=Ss(T,N.mode,k,null),T.return=N,T;xc(N,T)}return null}function E(N,T,k,j){var G=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return G!==null?null:h(N,T,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case hc:return k.key===G?d(N,T,k,j):null;case Ao:return k.key===G?p(N,T,k,j):null;case fi:return G=k._init,E(N,T,G(k._payload),j)}if(hl(k)||tl(k))return G!==null?null:_(N,T,k,j,null);xc(N,k)}return null}function A(N,T,k,j,G){if(typeof j=="string"&&j!==""||typeof j=="number")return N=N.get(k)||null,h(T,N,""+j,G);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case hc:return N=N.get(j.key===null?k:j.key)||null,d(T,N,j,G);case Ao:return N=N.get(j.key===null?k:j.key)||null,p(T,N,j,G);case fi:var J=j._init;return A(N,T,k,J(j._payload),G)}if(hl(j)||tl(j))return N=N.get(k)||null,_(T,N,j,G,null);xc(T,j)}return null}function V(N,T,k,j){for(var G=null,J=null,b=T,C=T=0,I=null;b!==null&&C<k.length;C++){b.index>C?(I=b,b=null):I=b.sibling;var O=E(N,b,k[C],j);if(O===null){b===null&&(b=I);break}t&&b&&O.alternate===null&&e(N,b),T=o(O,T,C),J===null?G=O:J.sibling=O,J=O,b=I}if(C===k.length)return n(N,b),Ke&&_s(N,C),G;if(b===null){for(;C<k.length;C++)b=v(N,k[C],j),b!==null&&(T=o(b,T,C),J===null?G=b:J.sibling=b,J=b);return Ke&&_s(N,C),G}for(b=r(N,b);C<k.length;C++)I=A(b,N,C,k[C],j),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?C:I.key),T=o(I,T,C),J===null?G=I:J.sibling=I,J=I);return t&&b.forEach(function(D){return e(N,D)}),Ke&&_s(N,C),G}function F(N,T,k,j){var G=tl(k);if(typeof G!="function")throw Error(Y(150));if(k=G.call(k),k==null)throw Error(Y(151));for(var J=G=null,b=T,C=T=0,I=null,O=k.next();b!==null&&!O.done;C++,O=k.next()){b.index>C?(I=b,b=null):I=b.sibling;var D=E(N,b,O.value,j);if(D===null){b===null&&(b=I);break}t&&b&&D.alternate===null&&e(N,b),T=o(D,T,C),J===null?G=D:J.sibling=D,J=D,b=I}if(O.done)return n(N,b),Ke&&_s(N,C),G;if(b===null){for(;!O.done;C++,O=k.next())O=v(N,O.value,j),O!==null&&(T=o(O,T,C),J===null?G=O:J.sibling=O,J=O);return Ke&&_s(N,C),G}for(b=r(N,b);!O.done;C++,O=k.next())O=A(b,N,C,O.value,j),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?C:O.key),T=o(O,T,C),J===null?G=O:J.sibling=O,J=O);return t&&b.forEach(function(P){return e(N,P)}),Ke&&_s(N,C),G}function z(N,T,k,j){if(typeof k=="object"&&k!==null&&k.type===Ro&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case hc:e:{for(var G=k.key,J=T;J!==null;){if(J.key===G){if(G=k.type,G===Ro){if(J.tag===7){n(N,J.sibling),T=i(J,k.props.children),T.return=N,N=T;break e}}else if(J.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fi&&vy(G)===J.type){n(N,J.sibling),T=i(J,k.props),T.ref=ol(N,J,k),T.return=N,N=T;break e}n(N,J);break}else e(N,J);J=J.sibling}k.type===Ro?(T=Ss(k.props.children,N.mode,j,k.key),T.return=N,N=T):(j=qc(k.type,k.key,k.props,null,N.mode,j),j.ref=ol(N,T,k),j.return=N,N=j)}return l(N);case Ao:e:{for(J=k.key;T!==null;){if(T.key===J)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(N,T.sibling),T=i(T,k.children||[]),T.return=N,N=T;break e}else{n(N,T);break}else e(N,T);T=T.sibling}T=If(k,N.mode,j),T.return=N,N=T}return l(N);case fi:return J=k._init,z(N,T,J(k._payload),j)}if(hl(k))return V(N,T,k,j);if(tl(k))return F(N,T,k,j);xc(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(N,T.sibling),T=i(T,k),T.return=N,N=T):(n(N,T),T=Tf(k,N.mode,j),T.return=N,N=T),l(N)):n(N,T)}return z}var na=Kw(!0),Qw=Kw(!1),yh=Ki(null),vh=null,Fo=null,Mm=null;function Vm(){Mm=Fo=vh=null}function Fm(t){var e=yh.current;Ge(yh),t._currentValue=e}function yp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){vh=t,Mm=Fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(Mm!==t)if(t={context:t,memoizedValue:e,next:null},Fo===null){if(vh===null)throw Error(Y(308));Fo=t,vh.dependencies={lanes:0,firstContext:t}}else Fo=Fo.next=t;return e}var Es=null;function zm(t){Es===null?Es=[t]:Es.push(t)}function Yw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,zm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gr(t,n)}return i=r.interleaved,i===null?(e.next=e,zm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gr(t,n)}function jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}function wy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wh(t,e,n,r){var i=t.updateQueue;pi=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var v=i.baseState;l=0,_=p=d=null,h=o;do{var E=h.lane,A=h.eventTime;if((r&E)===E){_!==null&&(_=_.next={eventTime:A,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var V=t,F=h;switch(E=e,A=n,F.tag){case 1:if(V=F.payload,typeof V=="function"){v=V.call(A,v,E);break e}v=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=F.payload,E=typeof V=="function"?V.call(A,v,E):V,E==null)break e;v=Xe({},v,E);break e;case 2:pi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=i.effects,E===null?i.effects=[h]:E.push(h))}else A={eventTime:A,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=A,d=v):_=_.next=A,l|=E;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;E=h,h=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(!0);if(_===null&&(d=v),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ls|=l,t.lanes=l,t.memoizedState=v}}function Ey(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var _u={},pr=Ki(_u),Zl=Ki(_u),Kl=Ki(_u);function xs(t){if(t===_u)throw Error(Y(174));return t}function Bm(t,e){switch(He(Kl,e),He(Zl,t),He(pr,_u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xf(e,t)}Ge(pr),He(pr,e)}function ra(){Ge(pr),Ge(Zl),Ge(Kl)}function Jw(t){xs(Kl.current);var e=xs(pr.current),n=Xf(e,t.type);e!==n&&(He(Zl,t),He(pr,n))}function Um(t){Zl.current===t&&(Ge(pr),Ge(Zl))}var Qe=Ki(0);function Eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _f=[];function Hm(){for(var t=0;t<_f.length;t++)_f[t]._workInProgressVersionPrimary=null;_f.length=0}var Bc=Jr.ReactCurrentDispatcher,yf=Jr.ReactCurrentBatchConfig,bs=0,Ye=null,_t=null,Ct=null,xh=!1,Sl=!1,Ql=0,AC=0;function Dt(){throw Error(Y(321))}function Wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function $m(t,e,n,r,i,o){if(bs=o,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bc.current=t===null||t.memoizedState===null?NC:OC,t=n(r,i),Sl){o=0;do{if(Sl=!1,Ql=0,25<=o)throw Error(Y(301));o+=1,Ct=_t=null,e.updateQueue=null,Bc.current=DC,t=n(r,i)}while(Sl)}if(Bc.current=Th,e=_t!==null&&_t.next!==null,bs=0,Ct=_t=Ye=null,xh=!1,e)throw Error(Y(300));return t}function qm(){var t=Ql!==0;return Ql=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ye.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Dn(){if(_t===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Ct===null?Ye.memoizedState:Ct.next;if(e!==null)Ct=e,_t=t;else{if(t===null)throw Error(Y(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ct===null?Ye.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Yl(t,e){return typeof e=="function"?e(t):e}function vf(t){var e=Dn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((bs&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var v={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=r):d=d.next=v,Ye.lanes|=_,Ls|=_}p=p.next}while(p!==null&&p!==o);d===null?l=r:d.next=h,Kn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ye.lanes|=o,Ls|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wf(t){var e=Dn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Kn(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function eE(){}function tE(t,e){var n=Ye,r=Dn(),i=e(),o=!Kn(r.memoizedState,i);if(o&&(r.memoizedState=i,sn=!0),r=r.queue,Gm(iE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Xl(9,rE.bind(null,n,r,i,e),void 0,null),Pt===null)throw Error(Y(349));bs&30||nE(n,e,i)}return i}function nE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rE(t,e,n,r){e.value=n,e.getSnapshot=r,sE(e)&&oE(t)}function iE(t,e,n){return n(function(){sE(e)&&oE(t)})}function sE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function oE(t){var e=Gr(t,1);e!==null&&Gn(e,t,1,-1)}function xy(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:t},e.queue=t,t=t.dispatch=LC.bind(null,Ye,t),[e.memoizedState,t]}function Xl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aE(){return Dn().memoizedState}function Uc(t,e,n,r){var i=ar();Ye.flags|=t,i.memoizedState=Xl(1|e,n,void 0,r===void 0?null:r)}function td(t,e,n,r){var i=Dn();r=r===void 0?null:r;var o=void 0;if(_t!==null){var l=_t.memoizedState;if(o=l.destroy,r!==null&&Wm(r,l.deps)){i.memoizedState=Xl(e,n,o,r);return}}Ye.flags|=t,i.memoizedState=Xl(1|e,n,o,r)}function Ty(t,e){return Uc(8390656,8,t,e)}function Gm(t,e){return td(2048,8,t,e)}function lE(t,e){return td(4,2,t,e)}function uE(t,e){return td(4,4,t,e)}function cE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hE(t,e,n){return n=n!=null?n.concat([t]):null,td(4,4,cE.bind(null,e,t),n)}function Zm(){}function dE(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fE(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pE(t,e,n){return bs&21?(Kn(n,e)||(n=vw(),Ye.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function RC(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=yf.transition;yf.transition={};try{t(!1),e()}finally{je=n,yf.transition=r}}function mE(){return Dn().memoizedState}function bC(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gE(t))_E(e,n);else if(n=Yw(t,e,n,r),n!==null){var i=Zt();Gn(n,t,r,i),yE(n,e,r)}}function LC(t,e,n){var r=Li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gE(t))_E(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(i.hasEagerState=!0,i.eagerState=h,Kn(h,l)){var d=e.interleaved;d===null?(i.next=i,zm(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=Yw(t,e,i,r),n!==null&&(i=Zt(),Gn(n,t,r,i),yE(n,e,r))}}function gE(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function _E(t,e){Sl=xh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}var Th={readContext:On,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},NC={readContext:On,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:Ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,cE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bC.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:xy,useDebugValue:Zm,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=xy(!1),e=t[0];return t=RC.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=ar();if(Ke){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Pt===null)throw Error(Y(349));bs&30||nE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Ty(iE.bind(null,r,o,t),[t]),r.flags|=2048,Xl(9,rE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ar(),e=Pt.identifierPrefix;if(Ke){var n=jr,r=zr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ql++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OC={readContext:On,useCallback:dE,useContext:On,useEffect:Gm,useImperativeHandle:hE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:vf,useRef:aE,useState:function(){return vf(Yl)},useDebugValue:Zm,useDeferredValue:function(t){var e=Dn();return pE(e,_t.memoizedState,t)},useTransition:function(){var t=vf(Yl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1},DC={readContext:On,useCallback:dE,useContext:On,useEffect:Gm,useImperativeHandle:hE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:wf,useRef:aE,useState:function(){return wf(Yl)},useDebugValue:Zm,useDeferredValue:function(t){var e=Dn();return _t===null?e.memoizedState=t:pE(e,_t.memoizedState,t)},useTransition:function(){var t=wf(Yl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nd={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=Li(t),o=Hr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ri(t,o,i),e!==null&&(Gn(e,t,i,r),jc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=Li(t),o=Hr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ri(t,o,i),e!==null&&(Gn(e,t,i,r),jc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Li(t),i=Hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ri(t,i,r),e!==null&&(Gn(e,t,r,n),jc(e,t,r))}};function Iy(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Wl(n,r)||!Wl(i,o):!0}function vE(t,e,n){var r=!1,i=ji,o=e.contextType;return typeof o=="object"&&o!==null?o=On(o):(i=an(e)?As:Bt.current,r=e.contextTypes,o=(r=r!=null)?ea(t,i):ji),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Sy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nd.enqueueReplaceState(e,e.state,null)}function wp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jm(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=On(o):(o=an(e)?As:Bt.current,i.context=ea(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(vp(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nd.enqueueReplaceState(i,i.state,null),wh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ia(t,e){try{var n="",r=e;do n+=uS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ef(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MC=typeof WeakMap=="function"?WeakMap:Map;function wE(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sh||(Sh=!0,bp=r),Ep(t,e)},n}function EE(t,e,n){n=Hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ep(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ep(t,e),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=QC.bind(null,t,e,n),e.then(t,t))}function Py(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var VC=Jr.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?Qw(e,null,n,r):na(e,t.child,n,r)}function Ay(t,e,n,r,i){n=n.render;var o=e.ref;return qo(e,i),r=$m(t,e,n,r,o,i),n=qm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ke&&n&&Nm(e),e.flags|=1,Gt(t,e,r,i),e.child)}function Ry(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!ng(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,xE(t,e,o,r,i)):(t=qc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Wl,n(l,r)&&t.ref===e.ref)return Zr(t,e,i)}return e.flags|=1,t=Ni(o,r),t.ref=e.ref,t.return=e,e.child=t}function xE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Wl(o,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Zr(t,e,i)}return xp(t,e,n,r,i)}function TE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(jo,hn),hn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(jo,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,He(jo,hn),hn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,He(jo,hn),hn|=r;return Gt(t,e,i,n),e.child}function IE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xp(t,e,n,r,i){var o=an(n)?As:Bt.current;return o=ea(e,o),qo(e,i),n=$m(t,e,n,r,o,i),r=qm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ke&&r&&Nm(e),e.flags|=1,Gt(t,e,n,i),e.child)}function by(t,e,n,r,i){if(an(n)){var o=!0;mh(e)}else o=!1;if(qo(e,i),e.stateNode===null)Hc(t,e),vE(e,n,r),wp(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=On(p):(p=an(n)?As:Bt.current,p=ea(e,p));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||d!==p)&&Sy(e,l,r,p),pi=!1;var E=e.memoizedState;l.state=E,wh(e,r,l,i),d=e.memoizedState,h!==r||E!==d||on.current||pi?(typeof _=="function"&&(vp(e,n,_,r),d=e.memoizedState),(h=pi||Iy(e,n,h,r,E,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Xw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Un(e.type,h),l.props=p,v=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=On(d):(d=an(n)?As:Bt.current,d=ea(e,d));var A=n.getDerivedStateFromProps;(_=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||E!==d)&&Sy(e,l,r,d),pi=!1,E=e.memoizedState,l.state=E,wh(e,r,l,i);var V=e.memoizedState;h!==v||E!==V||on.current||pi?(typeof A=="function"&&(vp(e,n,A,r),V=e.memoizedState),(p=pi||Iy(e,n,p,r,E,V,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,V,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,V,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),l.props=r,l.state=V,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return Tp(t,e,n,r,o,i)}function Tp(t,e,n,r,i,o){IE(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&gy(e,n,!1),Zr(t,e,o);r=e.stateNode,VC.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=na(e,t.child,null,o),e.child=na(e,null,h,o)):Gt(t,e,h,o),e.memoizedState=r.state,i&&gy(e,n,!0),e.child}function SE(t){var e=t.stateNode;e.pendingContext?my(t,e.pendingContext,e.pendingContext!==e.context):e.context&&my(t,e.context,!1),Bm(t,e.containerInfo)}function Ly(t,e,n,r,i){return ta(),Dm(i),e.flags|=256,Gt(t,e,n,r),e.child}var Ip={dehydrated:null,treeContext:null,retryLane:0};function Sp(t){return{baseLanes:t,cachePool:null,transitions:null}}function CE(t,e,n){var r=e.pendingProps,i=Qe.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(Qe,i&1),t===null)return _p(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=sd(l,r,0,null),t=Ss(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Sp(n),e.memoizedState=Ip,t):Km(e,l));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return FC(t,e,l,r,h,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,h=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ni(i,d),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Ni(h,o):(o=Ss(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?Sp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Ip,r}return o=t.child,t=o.sibling,r=Ni(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Km(t,e){return e=sd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tc(t,e,n,r){return r!==null&&Dm(r),na(e,t.child,null,n),t=Km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FC(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=Ef(Error(Y(422))),Tc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=sd({mode:"visible",children:r.children},i,0,null),o=Ss(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&na(e,t.child,null,l),e.child.memoizedState=Sp(l),e.memoizedState=Ip,o);if(!(e.mode&1))return Tc(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(Y(419)),r=Ef(o,r,void 0),Tc(t,e,l,r)}if(h=(l&t.childLanes)!==0,sn||h){if(r=Pt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gr(t,i),Gn(r,t,i,-1))}return tg(),r=Ef(Error(Y(421))),Tc(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=YC.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,dn=Ai(i.nextSibling),mn=e,Ke=!0,Wn=null,t!==null&&(Pn[kn++]=zr,Pn[kn++]=jr,Pn[kn++]=Rs,zr=t.id,jr=t.overflow,Rs=e),e=Km(e,r.children),e.flags|=4096,e)}function Ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yp(t.return,e,n)}function xf(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function PE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Gt(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,n,e);else if(t.tag===19)Ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Eh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xf(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Eh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xf(e,!0,n,null,o);break;case"together":xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zC(t,e,n){switch(e.tag){case 3:SE(e),ta();break;case 5:Jw(e);break;case 1:an(e.type)&&mh(e);break;case 4:Bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(yh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?CE(t,e,n):(He(Qe,Qe.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);He(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,TE(t,e,n)}return Zr(t,e,n)}var kE,Cp,AE,RE;kE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cp=function(){};AE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xs(pr.current);var o=null;switch(n){case"input":i=Zf(t,i),r=Zf(t,r),o=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),o=[];break;case"textarea":i=Yf(t,i),r=Yf(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fh)}Jf(n,r);var l;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var h=i[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Vl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var d=r[p];if(h=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Vl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&$e("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};RE=function(t,e,n,r){n!==r&&(e.flags|=4)};function al(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jC(t,e,n){var r=e.pendingProps;switch(Om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return an(e.type)&&ph(),Mt(e),null;case 3:return r=e.stateNode,ra(),Ge(on),Ge(Bt),Hm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Op(Wn),Wn=null))),Cp(t,e),Mt(e),null;case 5:Um(e);var i=xs(Kl.current);if(n=e.type,t!==null&&e.stateNode!=null)AE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Mt(e),null}if(t=xs(pr.current),Ec(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ur]=e,r[Gl]=o,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<fl.length;i++)$e(fl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":U_(r,o),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},$e("invalid",r);break;case"textarea":W_(r,o),$e("invalid",r)}Jf(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,h,t),i=["children",""+h]):Vl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&$e("scroll",r)}switch(n){case"input":dc(r),H_(r,o,!0);break;case"textarea":dc(r),$_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=fh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ur]=e,t[Gl]=r,kE(t,e,!1,!1),e.stateNode=t;e:{switch(l=ep(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<fl.length;i++)$e(fl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":U_(t,r),i=Zf(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":W_(t,r),i=Yf(t,r),$e("invalid",t);break;default:i=r}Jf(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?aw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&sw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Fl(t,d):typeof d=="number"&&Fl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&$e("scroll",t):d!=null&&vm(t,o,d,l))}switch(n){case"input":dc(t),H_(t,r,!1);break;case"textarea":dc(t),$_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Uo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Uo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)RE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=xs(Kl.current),xs(pr.current),Ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(o=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:wc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ge(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&dn!==null&&e.mode&1&&!(e.flags&128))Zw(),ta(),e.flags|=98560,o=!1;else if(o=Ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[ur]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),o=!1}else Wn!==null&&(Op(Wn),Wn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?yt===0&&(yt=3):tg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return ra(),Cp(t,e),t===null&&$l(e.stateNode.containerInfo),Mt(e),null;case 10:return Fm(e.type._context),Mt(e),null;case 17:return an(e.type)&&ph(),Mt(e),null;case 19:if(Ge(Qe),o=e.memoizedState,o===null)return Mt(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)al(o,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Eh(t),l!==null){for(e.flags|=128,al(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),e.child}t=t.sibling}o.tail!==null&&lt()>sa&&(e.flags|=128,r=!0,al(o,!1),e.lanes=4194304)}else{if(!r)if(t=Eh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ke)return Mt(e),null}else 2*lt()-o.renderingStartTime>sa&&n!==1073741824&&(e.flags|=128,r=!0,al(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=lt(),e.sibling=null,n=Qe.current,He(Qe,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return eg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function BC(t,e){switch(Om(e),e.tag){case 1:return an(e.type)&&ph(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Ge(on),Ge(Bt),Hm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Um(e),null;case 13:if(Ge(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Qe),null;case 4:return ra(),null;case 10:return Fm(e.type._context),null;case 22:case 23:return eg(),null;case 24:return null;default:return null}}var Ic=!1,zt=!1,UC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function Pp(t,e,n){try{n()}catch(r){nt(t,e,r)}}var Oy=!1;function HC(t,e){if(cp=ch,t=Dw(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,v=t,E=null;t:for(;;){for(var A;v!==n||i!==0&&v.nodeType!==3||(h=l+i),v!==o||r!==0&&v.nodeType!==3||(d=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(A=v.firstChild)!==null;)E=v,v=A;for(;;){if(v===t)break t;if(E===n&&++p===i&&(h=l),E===o&&++_===r&&(d=l),(A=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=A}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(hp={focusedElem:t,selectionRange:n},ch=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var F=V.memoizedProps,z=V.memoizedState,N=e.stateNode,T=N.getSnapshotBeforeUpdate(e.elementType===e.type?F:Un(e.type,F),z);N.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){nt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return V=Oy,Oy=!1,V}function Cl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Pp(e,n,o)}i=i.next}while(i!==r)}}function rd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Gl],delete e[pp],delete e[SC],delete e[CC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LE(t){return t.tag===5||t.tag===3||t.tag===4}function Dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fh));else if(r!==4&&(t=t.child,t!==null))for(Ap(t,e,n),t=t.sibling;t!==null;)Ap(t,e,n),t=t.sibling}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}var kt=null,Hn=!1;function hi(t,e,n){for(n=n.child;n!==null;)NE(t,e,n),n=n.sibling}function NE(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Kh,n)}catch{}switch(n.tag){case 5:zt||zo(n,e);case 6:var r=kt,i=Hn;kt=null,hi(t,e,n),kt=r,Hn=i,kt!==null&&(Hn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Hn?(t=kt,n=n.stateNode,t.nodeType===8?mf(t.parentNode,n):t.nodeType===1&&mf(t,n),Ul(t)):mf(kt,n.stateNode));break;case 4:r=kt,i=Hn,kt=n.stateNode.containerInfo,Hn=!0,hi(t,e,n),kt=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Pp(n,e,l),i=i.next}while(i!==r)}hi(t,e,n);break;case 1:if(!zt&&(zo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){nt(n,e,h)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,hi(t,e,n),zt=r):hi(t,e,n);break;default:hi(t,e,n)}}function My(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UC),e.forEach(function(r){var i=XC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:kt=h.stateNode,Hn=!1;break e;case 3:kt=h.stateNode.containerInfo,Hn=!0;break e;case 4:kt=h.stateNode.containerInfo,Hn=!0;break e}h=h.return}if(kt===null)throw Error(Y(160));NE(o,l,i),kt=null,Hn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){nt(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OE(e,t),e=e.sibling}function OE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),or(t),r&4){try{Cl(3,t,t.return),rd(3,t)}catch(F){nt(t,t.return,F)}try{Cl(5,t,t.return)}catch(F){nt(t,t.return,F)}}break;case 1:Bn(e,t),or(t),r&512&&n!==null&&zo(n,n.return);break;case 5:if(Bn(e,t),or(t),r&512&&n!==null&&zo(n,n.return),t.flags&32){var i=t.stateNode;try{Fl(i,"")}catch(F){nt(t,t.return,F)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&nw(i,o),ep(h,l);var p=ep(h,o);for(l=0;l<d.length;l+=2){var _=d[l],v=d[l+1];_==="style"?aw(i,v):_==="dangerouslySetInnerHTML"?sw(i,v):_==="children"?Fl(i,v):vm(i,_,v,p)}switch(h){case"input":Kf(i,o);break;case"textarea":rw(i,o);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?Uo(i,!!o.multiple,A,!1):E!==!!o.multiple&&(o.defaultValue!=null?Uo(i,!!o.multiple,o.defaultValue,!0):Uo(i,!!o.multiple,o.multiple?[]:"",!1))}i[Gl]=o}catch(F){nt(t,t.return,F)}}break;case 6:if(Bn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(F){nt(t,t.return,F)}}break;case 3:if(Bn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ul(e.containerInfo)}catch(F){nt(t,t.return,F)}break;case 4:Bn(e,t),or(t);break;case 13:Bn(e,t),or(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Xm=lt())),r&4&&My(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(p=zt)||_,Bn(e,t),zt=p):Bn(e,t),or(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(oe=t,_=t.child;_!==null;){for(v=oe=_;oe!==null;){switch(E=oe,A=E.child,E.tag){case 0:case 11:case 14:case 15:Cl(4,E,E.return);break;case 1:zo(E,E.return);var V=E.stateNode;if(typeof V.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(F){nt(r,n,F)}}break;case 5:zo(E,E.return);break;case 22:if(E.memoizedState!==null){Fy(v);continue}}A!==null?(A.return=E,oe=A):Fy(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{i=v.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=ow("display",l))}catch(F){nt(t,t.return,F)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(F){nt(t,t.return,F)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Bn(e,t),or(t),r&4&&My(t);break;case 21:break;default:Bn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LE(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fl(i,""),r.flags&=-33);var o=Dy(t);Rp(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,h=Dy(t);Ap(t,h,l);break;default:throw Error(Y(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WC(t,e,n){oe=t,DE(t)}function DE(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Ic;if(!l){var h=i.alternate,d=h!==null&&h.memoizedState!==null||zt;h=Ic;var p=zt;if(Ic=l,(zt=d)&&!p)for(oe=i;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?zy(i):d!==null?(d.return=l,oe=d):zy(i);for(;o!==null;)oe=o,DE(o),o=o.sibling;oe=i,Ic=h,zt=p}Vy(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,oe=o):Vy(t)}}function Vy(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||rd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Ey(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ey(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&Ul(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}zt||e.flags&512&&kp(e)}catch(E){nt(e,e.return,E)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Fy(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function zy(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rd(4,e)}catch(d){nt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){nt(e,i,d)}}var o=e.return;try{kp(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{kp(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var $C=Math.ceil,Ih=Jr.ReactCurrentDispatcher,Qm=Jr.ReactCurrentOwner,Nn=Jr.ReactCurrentBatchConfig,Le=0,Pt=null,pt=null,bt=0,hn=0,jo=Ki(0),yt=0,Jl=null,Ls=0,id=0,Ym=0,Pl=null,nn=null,Xm=0,sa=1/0,Vr=null,Sh=!1,bp=null,bi=null,Sc=!1,Ti=null,Ch=0,kl=0,Lp=null,Wc=-1,$c=0;function Zt(){return Le&6?lt():Wc!==-1?Wc:Wc=lt()}function Li(t){return t.mode&1?Le&2&&bt!==0?bt&-bt:kC.transition!==null?($c===0&&($c=vw()),$c):(t=je,t!==0||(t=window.event,t=t===void 0?16:Cw(t.type)),t):1}function Gn(t,e,n,r){if(50<kl)throw kl=0,Lp=null,Error(Y(185));pu(t,n,r),(!(Le&2)||t!==Pt)&&(t===Pt&&(!(Le&2)&&(id|=n),yt===4&&gi(t,bt)),ln(t,r),n===1&&Le===0&&!(e.mode&1)&&(sa=lt()+500,ed&&Qi()))}function ln(t,e){var n=t.callbackNode;kS(t,e);var r=uh(t,t===Pt?bt:0);if(r===0)n!==null&&Z_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Z_(n),e===1)t.tag===0?PC(jy.bind(null,t)):$w(jy.bind(null,t)),TC(function(){!(Le&6)&&Qi()}),n=null;else{switch(ww(r)){case 1:n=Im;break;case 4:n=_w;break;case 16:n=lh;break;case 536870912:n=yw;break;default:n=lh}n=HE(n,ME.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ME(t,e){if(Wc=-1,$c=0,Le&6)throw Error(Y(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var r=uh(t,t===Pt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ph(t,r);else{e=r;var i=Le;Le|=2;var o=FE();(Pt!==t||bt!==e)&&(Vr=null,sa=lt()+500,Is(t,e));do try{ZC();break}catch(h){VE(t,h)}while(!0);Vm(),Ih.current=o,Le=i,pt!==null?e=0:(Pt=null,bt=0,e=yt)}if(e!==0){if(e===2&&(i=sp(t),i!==0&&(r=i,e=Np(t,i))),e===1)throw n=Jl,Is(t,0),gi(t,r),ln(t,lt()),n;if(e===6)gi(t,r);else{if(i=t.current.alternate,!(r&30)&&!qC(i)&&(e=Ph(t,r),e===2&&(o=sp(t),o!==0&&(r=o,e=Np(t,o))),e===1))throw n=Jl,Is(t,0),gi(t,r),ln(t,lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:ys(t,nn,Vr);break;case 3:if(gi(t,r),(r&130023424)===r&&(e=Xm+500-lt(),10<e)){if(uh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fp(ys.bind(null,t,nn,Vr),e);break}ys(t,nn,Vr);break;case 4:if(gi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-qn(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$C(r/1960))-r,10<r){t.timeoutHandle=fp(ys.bind(null,t,nn,Vr),r);break}ys(t,nn,Vr);break;case 5:ys(t,nn,Vr);break;default:throw Error(Y(329))}}}return ln(t,lt()),t.callbackNode===n?ME.bind(null,t):null}function Np(t,e){var n=Pl;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),t=Ph(t,e),t!==2&&(e=nn,nn=n,e!==null&&Op(e)),t}function Op(t){nn===null?nn=t:nn.push.apply(nn,t)}function qC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Kn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gi(t,e){for(e&=~Ym,e&=~id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function jy(t){if(Le&6)throw Error(Y(327));Go();var e=uh(t,0);if(!(e&1))return ln(t,lt()),null;var n=Ph(t,e);if(t.tag!==0&&n===2){var r=sp(t);r!==0&&(e=r,n=Np(t,r))}if(n===1)throw n=Jl,Is(t,0),gi(t,e),ln(t,lt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,nn,Vr),ln(t,lt()),null}function Jm(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(sa=lt()+500,ed&&Qi())}}function Ns(t){Ti!==null&&Ti.tag===0&&!(Le&6)&&Go();var e=Le;Le|=1;var n=Nn.transition,r=je;try{if(Nn.transition=null,je=1,t)return t()}finally{je=r,Nn.transition=n,Le=e,!(Le&6)&&Qi()}}function eg(){hn=jo.current,Ge(jo)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xC(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(Om(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ph();break;case 3:ra(),Ge(on),Ge(Bt),Hm();break;case 5:Um(r);break;case 4:ra();break;case 13:Ge(Qe);break;case 19:Ge(Qe);break;case 10:Fm(r.type._context);break;case 22:case 23:eg()}n=n.return}if(Pt=t,pt=t=Ni(t.current,null),bt=hn=e,yt=0,Jl=null,Ym=id=Ls=0,nn=Pl=null,Es!==null){for(e=0;e<Es.length;e++)if(n=Es[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Es=null}return t}function VE(t,e){do{var n=pt;try{if(Vm(),Bc.current=Th,xh){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xh=!1}if(bs=0,Ct=_t=Ye=null,Sl=!1,Ql=0,Qm.current=null,n===null||n.return===null){yt=1,Jl=e,pt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=bt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var E=_.alternate;E?(_.updateQueue=E.updateQueue,_.memoizedState=E.memoizedState,_.lanes=E.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=Py(l);if(A!==null){A.flags&=-257,ky(A,l,h,o,e),A.mode&1&&Cy(o,p,e),e=A,d=p;var V=e.updateQueue;if(V===null){var F=new Set;F.add(d),e.updateQueue=F}else V.add(d);break e}else{if(!(e&1)){Cy(o,p,e),tg();break e}d=Error(Y(426))}}else if(Ke&&h.mode&1){var z=Py(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),ky(z,l,h,o,e),Dm(ia(d,h));break e}}o=d=ia(d,h),yt!==4&&(yt=2),Pl===null?Pl=[o]:Pl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=wE(o,d,e);wy(o,N);break e;case 1:h=d;var T=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(bi===null||!bi.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var j=EE(o,h,e);wy(o,j);break e}}o=o.return}while(o!==null)}jE(n)}catch(G){e=G,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function FE(){var t=Ih.current;return Ih.current=Th,t===null?Th:t}function tg(){(yt===0||yt===3||yt===2)&&(yt=4),Pt===null||!(Ls&268435455)&&!(id&268435455)||gi(Pt,bt)}function Ph(t,e){var n=Le;Le|=2;var r=FE();(Pt!==t||bt!==e)&&(Vr=null,Is(t,e));do try{GC();break}catch(i){VE(t,i)}while(!0);if(Vm(),Le=n,Ih.current=r,pt!==null)throw Error(Y(261));return Pt=null,bt=0,yt}function GC(){for(;pt!==null;)zE(pt)}function ZC(){for(;pt!==null&&!vS();)zE(pt)}function zE(t){var e=UE(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?jE(t):pt=e,Qm.current=null}function jE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BC(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,pt=null;return}}else if(n=jC(n,e,hn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);yt===0&&(yt=5)}function ys(t,e,n){var r=je,i=Nn.transition;try{Nn.transition=null,je=1,KC(t,e,n,r)}finally{Nn.transition=i,je=r}return null}function KC(t,e,n,r){do Go();while(Ti!==null);if(Le&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(AS(t,o),t===Pt&&(pt=Pt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,HE(lh,function(){return Go(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Nn.transition,Nn.transition=null;var l=je;je=1;var h=Le;Le|=4,Qm.current=null,HC(t,n),OE(n,t),mC(hp),ch=!!cp,hp=cp=null,t.current=n,WC(n),wS(),Le=h,je=l,Nn.transition=o}else t.current=n;if(Sc&&(Sc=!1,Ti=t,Ch=i),o=t.pendingLanes,o===0&&(bi=null),TS(n.stateNode),ln(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sh)throw Sh=!1,t=bp,bp=null,t;return Ch&1&&t.tag!==0&&Go(),o=t.pendingLanes,o&1?t===Lp?kl++:(kl=0,Lp=t):kl=0,Qi(),null}function Go(){if(Ti!==null){var t=ww(Ch),e=Nn.transition,n=je;try{if(Nn.transition=null,je=16>t?16:t,Ti===null)var r=!1;else{if(t=Ti,Ti=null,Ch=0,Le&6)throw Error(Y(331));var i=Le;for(Le|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var _=oe;switch(_.tag){case 0:case 11:case 15:Cl(8,_,o)}var v=_.child;if(v!==null)v.return=_,oe=v;else for(;oe!==null;){_=oe;var E=_.sibling,A=_.return;if(bE(_),_===p){oe=null;break}if(E!==null){E.return=A,oe=E;break}oe=A}}}var V=o.alternate;if(V!==null){var F=V.child;if(F!==null){V.child=null;do{var z=F.sibling;F.sibling=null,F=z}while(F!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Cl(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,oe=N;break e}oe=o.return}}var T=t.current;for(oe=T;oe!==null;){l=oe;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,oe=k;else e:for(l=T;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:rd(9,h)}}catch(G){nt(h,h.return,G)}if(h===l){oe=null;break e}var j=h.sibling;if(j!==null){j.return=h.return,oe=j;break e}oe=h.return}}if(Le=i,Qi(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Kh,t)}catch{}r=!0}return r}finally{je=n,Nn.transition=e}}return!1}function By(t,e,n){e=ia(n,e),e=wE(t,e,1),t=Ri(t,e,1),e=Zt(),t!==null&&(pu(t,1,e),ln(t,e))}function nt(t,e,n){if(t.tag===3)By(t,t,n);else for(;e!==null;){if(e.tag===3){By(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bi===null||!bi.has(r))){t=ia(n,t),t=EE(e,t,1),e=Ri(e,t,1),t=Zt(),e!==null&&(pu(e,1,t),ln(e,t));break}}e=e.return}}function QC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(bt&n)===n&&(yt===4||yt===3&&(bt&130023424)===bt&&500>lt()-Xm?Is(t,0):Ym|=n),ln(t,e)}function BE(t,e){e===0&&(t.mode&1?(e=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):e=1);var n=Zt();t=Gr(t,e),t!==null&&(pu(t,e,n),ln(t,n))}function YC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BE(t,n)}function XC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),BE(t,n)}var UE;UE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,zC(t,e,n);sn=!!(t.flags&131072)}else sn=!1,Ke&&e.flags&1048576&&qw(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hc(t,e),t=e.pendingProps;var i=ea(e,Bt.current);qo(e,n),i=$m(null,e,r,t,i,n);var o=qm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(o=!0,mh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jm(e),i.updater=nd,e.stateNode=i,i._reactInternals=e,wp(e,r,t,n),e=Tp(null,e,r,!0,o,n)):(e.tag=0,Ke&&o&&Nm(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eP(r),t=Un(r,t),i){case 0:e=xp(null,e,r,t,n);break e;case 1:e=by(null,e,r,t,n);break e;case 11:e=Ay(null,e,r,t,n);break e;case 14:e=Ry(null,e,r,Un(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),xp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),by(t,e,r,i,n);case 3:e:{if(SE(e),t===null)throw Error(Y(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Xw(t,e),wh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ia(Error(Y(423)),e),e=Ly(t,e,r,n,i);break e}else if(r!==i){i=ia(Error(Y(424)),e),e=Ly(t,e,r,n,i);break e}else for(dn=Ai(e.stateNode.containerInfo.firstChild),mn=e,Ke=!0,Wn=null,n=Qw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===i){e=Zr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return Jw(e),t===null&&_p(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,dp(r,i)?l=null:o!==null&&dp(r,o)&&(e.flags|=32),IE(t,e),Gt(t,e,l,n),e.child;case 6:return t===null&&_p(e),null;case 13:return CE(t,e,n);case 4:return Bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=na(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Ay(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,He(yh,r._currentValue),r._currentValue=l,o!==null)if(Kn(o.value,l)){if(o.children===i.children&&!on.current){e=Zr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Hr(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),yp(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),yp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qo(e,n),i=On(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Un(r,e.pendingProps),i=Un(r.type,i),Ry(t,e,r,i,n);case 15:return xE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Hc(t,e),e.tag=1,an(r)?(t=!0,mh(e)):t=!1,qo(e,n),vE(e,r,i),wp(e,r,i,n),Tp(null,e,r,!0,t,n);case 19:return PE(t,e,n);case 22:return TE(t,e,n)}throw Error(Y(156,e.tag))};function HE(t,e){return gw(t,e)}function JC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new JC(t,e,n,r)}function ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eP(t){if(typeof t=="function")return ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Em)return 11;if(t===xm)return 14}return 2}function Ni(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qc(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")ng(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ro:return Ss(n.children,i,o,e);case wm:l=8,i|=8;break;case Wf:return t=Ln(12,n,e,i|2),t.elementType=Wf,t.lanes=o,t;case $f:return t=Ln(13,n,e,i),t.elementType=$f,t.lanes=o,t;case qf:return t=Ln(19,n,e,i),t.elementType=qf,t.lanes=o,t;case J0:return sd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y0:l=10;break e;case X0:l=9;break e;case Em:l=11;break e;case xm:l=14;break e;case fi:l=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Ln(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ss(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function sd(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=J0,t.lanes=n,t.stateNode={isHidden:!1},t}function Tf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function If(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rf(0),this.expirationTimes=rf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rg(t,e,n,r,i,o,l,h,d){return t=new tP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ln(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jm(o),t}function nP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WE(t){if(!t)return ji;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(an(n))return Ww(t,n,e)}return e}function $E(t,e,n,r,i,o,l,h,d){return t=rg(n,r,!0,t,i,o,l,h,d),t.context=WE(null),n=t.current,r=Zt(),i=Li(n),o=Hr(r,i),o.callback=e??null,Ri(n,o,i),t.current.lanes=i,pu(t,i,r),ln(t,r),t}function od(t,e,n,r){var i=e.current,o=Zt(),l=Li(i);return n=WE(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ri(i,e,l),t!==null&&(Gn(t,i,l,o),jc(t,i,l)),l}function kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ig(t,e){Uy(t,e),(t=t.alternate)&&Uy(t,e)}function rP(){return null}var qE=typeof reportError=="function"?reportError:function(t){console.error(t)};function sg(t){this._internalRoot=t}ad.prototype.render=sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));od(t,e,null,null)};ad.prototype.unmount=sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){od(null,t,null,null)}),e[qr]=null}};function ad(t){this._internalRoot=t}ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mi.length&&e!==0&&e<mi[n].priority;n++);mi.splice(n,0,t),n===0&&Sw(t)}};function og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ld(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function iP(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=kh(l);o.call(p)}}var l=$E(e,r,t,0,null,!1,!1,"",Hy);return t._reactRootContainer=l,t[qr]=l.current,$l(t.nodeType===8?t.parentNode:t),Ns(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var p=kh(d);h.call(p)}}var d=rg(t,0,!1,null,null,!1,!1,"",Hy);return t._reactRootContainer=d,t[qr]=d.current,$l(t.nodeType===8?t.parentNode:t),Ns(function(){od(e,d,n,r)}),d}function ud(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var h=i;i=function(){var d=kh(l);h.call(d)}}od(e,l,t,i)}else l=iP(n,e,t,i,r);return kh(l)}Ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dl(e.pendingLanes);n!==0&&(Sm(e,n|1),ln(e,lt()),!(Le&6)&&(sa=lt()+500,Qi()))}break;case 13:Ns(function(){var r=Gr(t,1);if(r!==null){var i=Zt();Gn(r,t,1,i)}}),ig(t,1)}};Cm=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=Zt();Gn(e,t,134217728,n)}ig(t,134217728)}};xw=function(t){if(t.tag===13){var e=Li(t),n=Gr(t,e);if(n!==null){var r=Zt();Gn(n,t,e,r)}ig(t,e)}};Tw=function(){return je};Iw=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};np=function(t,e,n){switch(e){case"input":if(Kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jh(r);if(!i)throw Error(Y(90));tw(r),Kf(r,i)}}}break;case"textarea":rw(t,n);break;case"select":e=n.value,e!=null&&Uo(t,!!n.multiple,e,!1)}};cw=Jm;hw=Ns;var sP={usingClientEntryPoint:!1,Events:[gu,Oo,Jh,lw,uw,Jm]},ll={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pw(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{Kh=Cc.inject(oP),fr=Cc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sP;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(e))throw Error(Y(200));return nP(t,e,null,n)};_n.createRoot=function(t,e){if(!og(t))throw Error(Y(299));var n=!1,r="",i=qE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rg(t,1,!1,null,null,n,!1,r,i),t[qr]=e.current,$l(t.nodeType===8?t.parentNode:t),new sg(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=pw(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Ns(t)};_n.hydrate=function(t,e,n){if(!ld(e))throw Error(Y(200));return ud(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!og(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=qE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=$E(e,null,t,1,n??null,i,!1,o,l),t[qr]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ad(e)};_n.render=function(t,e,n){if(!ld(e))throw Error(Y(200));return ud(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!ld(t))throw Error(Y(40));return t._reactRootContainer?(Ns(function(){ud(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};_n.unstable_batchedUpdates=Jm;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ld(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return ud(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function GE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GE)}catch(t){console.error(t)}}GE(),G0.exports=_n;var ZE=G0.exports,Wy=ZE;Uf.createRoot=Wy.createRoot,Uf.hydrateRoot=Wy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eu(){return eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eu.apply(this,arguments)}var Ii;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ii||(Ii={}));const $y="popstate";function aP(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:l,hash:h}=r.location;return Dp("",{pathname:o,search:l,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:QE(i)}return uP(e,n,null,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function KE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lP(){return Math.random().toString(36).substr(2,8)}function qy(t,e){return{usr:t.state,key:t.key,idx:e}}function Dp(t,e,n,r){return n===void 0&&(n=null),eu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ga(e):e,{state:n,key:e&&e.key||r||lP()})}function QE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,h=Ii.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(eu({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function v(){h=Ii.Pop;let z=_(),N=z==null?null:z-p;p=z,d&&d({action:h,location:F.location,delta:N})}function E(z,N){h=Ii.Push;let T=Dp(F.location,z,N);p=_()+1;let k=qy(T,p),j=F.createHref(T);try{l.pushState(k,"",j)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(j)}o&&d&&d({action:h,location:F.location,delta:1})}function A(z,N){h=Ii.Replace;let T=Dp(F.location,z,N);p=_();let k=qy(T,p),j=F.createHref(T);l.replaceState(k,"",j),o&&d&&d({action:h,location:F.location,delta:0})}function V(z){let N=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof z=="string"?z:QE(z);return T=T.replace(/ $/,"%20"),vt(N,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,N)}let F={get action(){return h},get location(){return t(i,l)},listen(z){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener($y,v),d=z,()=>{i.removeEventListener($y,v),d=null}},createHref(z){return e(i,z)},createURL:V,encodeLocation(z){let N=V(z);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:E,replace:A,go(z){return l.go(z)}};return F}var Gy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gy||(Gy={}));function cP(t,e,n){return n===void 0&&(n="/"),hP(t,e,n)}function hP(t,e,n,r){let i=typeof e=="string"?ga(e):e,o=JE(i.pathname||"/",n);if(o==null)return null;let l=YE(t);dP(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=IP(o);h=EP(l[d],p)}return h}function YE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(vt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=Cs([r,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(vt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),YE(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:vP(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,l);else for(let d of XE(o.path))i(o,l,d)}),e}function XE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=XE(r.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function dP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fP=/^:[\w-]+$/,pP=3,mP=2,gP=1,_P=10,yP=-2,Zy=t=>t==="*";function vP(t,e){let n=t.split("/"),r=n.length;return n.some(Zy)&&(r+=yP),e&&(r+=mP),n.filter(i=>!Zy(i)).reduce((i,o)=>i+(fP.test(o)?pP:o===""?gP:_P),r)}function wP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function EP(t,e,n){let{routesMeta:r}=t,i={},o="/",l=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=xP({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),E=d.route;if(!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:Cs([o,v.pathname]),pathnameBase:RP(Cs([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Cs([o,v.pathnameBase]))}return l}function xP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=TP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((p,_,v)=>{let{paramName:E,isOptional:A}=_;if(E==="*"){let F=h[v]||"";l=o.slice(0,o.length-F.length).replace(/(.)\/+$/,"$1")}const V=h[v];return A&&!V?p[E]=void 0:p[E]=(V||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function TP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),KE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return KE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function JE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ga(t):t;return{pathname:n?n.startsWith("/")?n:CP(n,e):e,search:bP(r),hash:LP(i)}}function CP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kP(t,e){let n=PP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ga(t):(i=eu({},t),vt(!i.pathname||!i.pathname.includes("?"),Sf("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Sf("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Sf("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;i.pathname=E.join("/")}h=v>=0?e[v]:"/"}let d=SP(i,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const Cs=t=>t.join("/").replace(/\/\/+/g,"/"),RP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ex=["post","put","patch","delete"];new Set(ex);const OP=["get",...ex];new Set(OP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tu(){return tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tu.apply(this,arguments)}const ag=q.createContext(null),DP=q.createContext(null),cd=q.createContext(null),hd=q.createContext(null),Us=q.createContext({outlet:null,matches:[],isDataRoute:!1}),tx=q.createContext(null);function dd(){return q.useContext(hd)!=null}function nx(){return dd()||vt(!1),q.useContext(hd).location}function rx(t){q.useContext(cd).static||q.useLayoutEffect(t)}function yu(){let{isDataRoute:t}=q.useContext(Us);return t?ZP():MP()}function MP(){dd()||vt(!1);let t=q.useContext(ag),{basename:e,future:n,navigator:r}=q.useContext(cd),{matches:i}=q.useContext(Us),{pathname:o}=nx(),l=JSON.stringify(kP(i,n.v7_relativeSplatPath)),h=q.useRef(!1);return rx(()=>{h.current=!0}),q.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let v=AP(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Cs([e,v.pathname])),(_.replace?r.replace:r.push)(v,_.state,_)},[e,r,l,o,t])}function lg(){let{matches:t}=q.useContext(Us),e=t[t.length-1];return e?e.params:{}}function VP(t,e){return FP(t,e)}function FP(t,e,n,r){dd()||vt(!1);let{navigator:i}=q.useContext(cd),{matches:o}=q.useContext(Us),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=nx(),_;if(e){var v;let z=typeof e=="string"?ga(e):e;d==="/"||(v=z.pathname)!=null&&v.startsWith(d)||vt(!1),_=z}else _=p;let E=_.pathname||"/",A=E;if(d!=="/"){let z=d.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(z.length).join("/")}let V=cP(t,{pathname:A}),F=HP(V&&V.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Cs([d,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?d:Cs([d,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,n,r);return e&&F?q.createElement(hd.Provider,{value:{location:tu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ii.Pop}},F):F}function zP(){let t=GP(),e=NP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,null)}const jP=q.createElement(zP,null);class BP extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Us.Provider,{value:this.props.routeContext},q.createElement(tx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UP(t){let{routeContext:e,match:n,children:r}=t,i=q.useContext(ag);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Us.Provider,{value:e},r)}function HP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let _=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);_>=0||vt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let _=0;_<l.length;_++){let v=l[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=_),v.route.id){let{loaderData:E,errors:A}=n,V=v.route.loader&&E[v.route.id]===void 0&&(!A||A[v.route.id]===void 0);if(v.route.lazy||V){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,v,E)=>{let A,V=!1,F=null,z=null;n&&(A=h&&v.route.id?h[v.route.id]:void 0,F=v.route.errorElement||jP,d&&(p<0&&E===0?(KP("route-fallback"),V=!0,z=null):p===E&&(V=!0,z=v.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,E+1)),T=()=>{let k;return A?k=F:V?k=z:v.route.Component?k=q.createElement(v.route.Component,null):v.route.element?k=v.route.element:k=_,q.createElement(UP,{match:v,routeContext:{outlet:_,matches:N,isDataRoute:n!=null},children:k})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(BP,{location:n.location,revalidation:n.revalidation,component:F,error:A,children:T(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):T()},null)}var ix=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ix||{}),sx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sx||{});function WP(t){let e=q.useContext(ag);return e||vt(!1),e}function $P(t){let e=q.useContext(DP);return e||vt(!1),e}function qP(t){let e=q.useContext(Us);return e||vt(!1),e}function ox(t){let e=qP(),n=e.matches[e.matches.length-1];return n.route.id||vt(!1),n.route.id}function GP(){var t;let e=q.useContext(tx),n=$P(),r=ox();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ZP(){let{router:t}=WP(ix.UseNavigateStable),e=ox(sx.UseNavigateStable),n=q.useRef(!1);return rx(()=>{n.current=!0}),q.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,tu({fromRouteId:e},o)))},[t,e])}const Ky={};function KP(t,e,n){Ky[t]||(Ky[t]=!0)}function QP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Io(t){vt(!1)}function YP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ii.Pop,navigator:o,static:l=!1,future:h}=t;dd()&&vt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:tu({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof r=="string"&&(r=ga(r));let{pathname:_="/",search:v="",hash:E="",state:A=null,key:V="default"}=r,F=q.useMemo(()=>{let z=JE(_,d);return z==null?null:{location:{pathname:z,search:v,hash:E,state:A,key:V},navigationType:i}},[d,_,v,E,A,V,i]);return F==null?null:q.createElement(cd.Provider,{value:p},q.createElement(hd.Provider,{children:n,value:F}))}function XP(t){let{children:e,location:n}=t;return VP(Mp(e),n)}new Promise(()=>{});function Mp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(r,i)=>{if(!q.isValidElement(r))return;let o=[...e,i];if(r.type===q.Fragment){n.push.apply(n,Mp(r.props.children,o));return}r.type!==Io&&vt(!1),!r.props.index||!r.props.children||vt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Mp(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const JP="6";try{window.__reactRouterVersion=JP}catch{}const ek="startTransition",Qy=QI[ek];function tk(t){let{basename:e,children:n,future:r,window:i}=t,o=q.useRef();o.current==null&&(o.current=aP({window:i,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},_=q.useCallback(v=>{p&&Qy?Qy(()=>d(v)):d(v)},[d,p]);return q.useLayoutEffect(()=>l.listen(_),[l,_]),q.useEffect(()=>QP(r),[r]),q.createElement(YP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}var Yy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yy||(Yy={}));var Xy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xy||(Xy={}));const nk=()=>{};var Jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],h=t[n++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,h=l?t[i+1]:0,d=i+2<t.length,p=d?t[i+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;d||(A=64,l||(E=64)),r.push(n[_],n[v],n[E],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ax(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||p==null||v==null)throw new ik;const E=o<<2|h>>4;if(r.push(E),p!==64){const A=h<<4&240|p>>2;if(r.push(A),v!==64){const V=p<<6&192|v;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ik extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sk=function(t){const e=ax(t);return lx.encodeByteArray(e,!0)},Ah=function(t){return sk(t).replace(/\./g,"")},ux=function(t){try{return lx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=()=>ok().__FIREBASE_DEFAULTS__,lk=()=>{if(typeof process>"u"||typeof Jy>"u")return;const t=Jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ux(t[1]);return e&&JSON.parse(e)},fd=()=>{try{return nk()||ak()||lk()||uk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cx=t=>{var e,n;return(n=(e=fd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},hx=t=>{const e=cx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dx=()=>{var t;return(t=fd())==null?void 0:t.config},fx=t=>{var e;return(e=fd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ug(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ah(JSON.stringify(n)),Ah(JSON.stringify(l)),""].join(".")}const Al={};function hk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Al))Al[e]?t.emulator.push(e):t.prod.push(e);return t}function dk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ev=!1;function cg(t,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||Al[t]===e||Al[t]||ev)return;Al[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=hk().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ev=!0,l()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=dk(r),A=n("text"),V=document.getElementById(A)||document.createElement("span"),F=n("learnmore"),z=document.getElementById(F)||document.createElement("a"),N=n("preprendIcon"),T=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const k=E.element;h(k),_(z,F);const j=p();d(T,N),k.append(T,V,z,j),document.body.appendChild(k)}o?(V.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function pk(){var e;const t=(e=fd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _k(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yk(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vk(){return!pk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ek(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="FirebaseError";class Ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xk,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?Tk(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Ir(i,h,r)}}function Tk(t,e){return t.replace(Ik,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ik=/\{\$([^}]+)}/g;function Sk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(tv(o)&&tv(l)){if(!Os(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ck(t,e){const n=new Pk(t,e);return n.subscribe.bind(n)}class Pk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cf),i.error===void 0&&(i.error=Cf),i.complete===void 0&&(i.complete=Cf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ck;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bk(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rk(t){return t===vs?void 0:t}function bk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ak(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const Nk={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Ok=Ce.INFO,Dk={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},Mk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Dk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=Ok,this._logHandler=Mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const Vk=(t,e)=>e.some(n=>t instanceof n);let nv,rv;function Fk(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zk(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mx=new WeakMap,Vp=new WeakMap,gx=new WeakMap,Pf=new WeakMap,dg=new WeakMap;function jk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Oi(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&mx.set(n,t)}).catch(()=>{}),dg.set(e,t),e}function Bk(t){if(Vp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Vp.set(t,e)}let Fp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Uk(t){Fp=t(Fp)}function Hk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kf(this),e,...n);return gx.set(r,e.sort?e.sort():[e]),Oi(r)}:zk().includes(t)?function(...e){return t.apply(kf(this),e),Oi(mx.get(this))}:function(...e){return Oi(t.apply(kf(this),e))}}function Wk(t){return typeof t=="function"?Hk(t):(t instanceof IDBTransaction&&Bk(t),Vk(t,Fk())?new Proxy(t,Fp):t)}function Oi(t){if(t instanceof IDBRequest)return jk(t);if(Pf.has(t))return Pf.get(t);const e=Wk(t);return e!==t&&(Pf.set(t,e),dg.set(e,t)),e}const kf=t=>dg.get(t);function $k(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),h=Oi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Oi(l.result),d.oldVersion,d.newVersion,Oi(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const qk=["get","getKey","getAll","getAllKeys","count"],Gk=["put","add","delete","clear"],Af=new Map;function iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Gk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qk.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),i&&d.done]))[0]};return Af.set(e,o),o}Uk(t=>({...t,get:(e,n,r)=>iv(e,n)||t.get(e,n,r),has:(e,n)=>!!iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",sv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new hg("@firebase/app"),Qk="@firebase/app-compat",Yk="@firebase/analytics-compat",Xk="@firebase/analytics",Jk="@firebase/app-check-compat",eA="@firebase/app-check",tA="@firebase/auth",nA="@firebase/auth-compat",rA="@firebase/database",iA="@firebase/data-connect",sA="@firebase/database-compat",oA="@firebase/functions",aA="@firebase/functions-compat",lA="@firebase/installations",uA="@firebase/installations-compat",cA="@firebase/messaging",hA="@firebase/messaging-compat",dA="@firebase/performance",fA="@firebase/performance-compat",pA="@firebase/remote-config",mA="@firebase/remote-config-compat",gA="@firebase/storage",_A="@firebase/storage-compat",yA="@firebase/firestore",vA="@firebase/ai",wA="@firebase/firestore-compat",EA="firebase",xA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]",TA={[zp]:"fire-core",[Qk]:"fire-core-compat",[Xk]:"fire-analytics",[Yk]:"fire-analytics-compat",[eA]:"fire-app-check",[Jk]:"fire-app-check-compat",[tA]:"fire-auth",[nA]:"fire-auth-compat",[rA]:"fire-rtdb",[iA]:"fire-data-connect",[sA]:"fire-rtdb-compat",[oA]:"fire-fn",[aA]:"fire-fn-compat",[lA]:"fire-iid",[uA]:"fire-iid-compat",[cA]:"fire-fcm",[hA]:"fire-fcm-compat",[dA]:"fire-perf",[fA]:"fire-perf-compat",[pA]:"fire-rc",[mA]:"fire-rc-compat",[gA]:"fire-gcs",[_A]:"fire-gcs-compat",[yA]:"fire-fst",[wA]:"fire-fst-compat",[vA]:"fire-vertex","fire-js":"fire-js",[EA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,IA=new Map,Bp=new Map;function ov(t,e){try{t.container.addComponent(e)}catch(n){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Bp.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,t);for(const n of Rh.values())ov(n,t);for(const n of IA.values())ov(n,t);return!0}function pd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function An(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new vu("app","Firebase",SA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=xA;function _x(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:jp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(n||(n=dx()),!n)throw Di.create("no-options");const o=Rh.get(i);if(o){if(Os(n,o.options)&&Os(r,o.config))return o;throw Di.create("duplicate-app",{appName:i})}const l=new Lk(i);for(const d of Bp.values())l.addComponent(d);const h=new CA(n,r,l);return Rh.set(i,h),h}function fg(t=jp){const e=Rh.get(t);if(!e&&t===jp&&dx())return _x();if(!e)throw Di.create("no-app",{appName:t});return e}function mr(t,e,n){let r=TA[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(l.join(" "));return}Ds(new Bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebase-heartbeat-database",kA=1,nu="firebase-heartbeat-store";let Rf=null;function yx(){return Rf||(Rf=$k(PA,kA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Di.create("idb-open",{originalErrorMessage:t.message})})),Rf}async function AA(t){try{const n=(await yx()).transaction(nu),r=await n.objectStore(nu).get(vx(t));return await n.done,r}catch(e){if(e instanceof Ir)Kr.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(n.message)}}}async function av(t,e){try{const r=(await yx()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,vx(t)),await r.done}catch(n){if(n instanceof Ir)Kr.warn(n.message);else{const r=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kr.warn(r.message)}}}function vx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=1024,bA=30;class LA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>bA){const l=DA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lv(),{heartbeatsToSend:r,unsentEntries:i}=NA(this._heartbeatsCache.heartbeats),o=Ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Kr.warn(n),""}}}function lv(){return new Date().toISOString().substring(0,10)}function NA(t,e=RA){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),uv(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wk()?Ek().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function uv(t){return Ah(JSON.stringify({version:2,heartbeats:t})).length}function DA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){Ds(new Bi("platform-logger",e=>new Zk(e),"PRIVATE")),Ds(new Bi("heartbeat",e=>new LA(e),"PRIVATE")),mr(zp,sv,t),mr(zp,sv,"esm2020"),mr("fire-js","")}MA("");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,wx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function I(){}I.prototype=C.prototype,b.F=C.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(O,D,P){for(var R=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)R[ee-2]=arguments[ee];return C.prototype[D].apply(O,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,C,I){I||(I=0);const O=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)O[D]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(D=0;D<16;++D)O[D]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=b.g[0],I=b.g[1],D=b.g[2];let P=b.g[3],R;R=C+(P^I&(D^P))+O[0]+3614090360&4294967295,C=I+(R<<7&4294967295|R>>>25),R=P+(D^C&(I^D))+O[1]+3905402710&4294967295,P=C+(R<<12&4294967295|R>>>20),R=D+(I^P&(C^I))+O[2]+606105819&4294967295,D=P+(R<<17&4294967295|R>>>15),R=I+(C^D&(P^C))+O[3]+3250441966&4294967295,I=D+(R<<22&4294967295|R>>>10),R=C+(P^I&(D^P))+O[4]+4118548399&4294967295,C=I+(R<<7&4294967295|R>>>25),R=P+(D^C&(I^D))+O[5]+1200080426&4294967295,P=C+(R<<12&4294967295|R>>>20),R=D+(I^P&(C^I))+O[6]+2821735955&4294967295,D=P+(R<<17&4294967295|R>>>15),R=I+(C^D&(P^C))+O[7]+4249261313&4294967295,I=D+(R<<22&4294967295|R>>>10),R=C+(P^I&(D^P))+O[8]+1770035416&4294967295,C=I+(R<<7&4294967295|R>>>25),R=P+(D^C&(I^D))+O[9]+2336552879&4294967295,P=C+(R<<12&4294967295|R>>>20),R=D+(I^P&(C^I))+O[10]+4294925233&4294967295,D=P+(R<<17&4294967295|R>>>15),R=I+(C^D&(P^C))+O[11]+2304563134&4294967295,I=D+(R<<22&4294967295|R>>>10),R=C+(P^I&(D^P))+O[12]+1804603682&4294967295,C=I+(R<<7&4294967295|R>>>25),R=P+(D^C&(I^D))+O[13]+4254626195&4294967295,P=C+(R<<12&4294967295|R>>>20),R=D+(I^P&(C^I))+O[14]+2792965006&4294967295,D=P+(R<<17&4294967295|R>>>15),R=I+(C^D&(P^C))+O[15]+1236535329&4294967295,I=D+(R<<22&4294967295|R>>>10),R=C+(D^P&(I^D))+O[1]+4129170786&4294967295,C=I+(R<<5&4294967295|R>>>27),R=P+(I^D&(C^I))+O[6]+3225465664&4294967295,P=C+(R<<9&4294967295|R>>>23),R=D+(C^I&(P^C))+O[11]+643717713&4294967295,D=P+(R<<14&4294967295|R>>>18),R=I+(P^C&(D^P))+O[0]+3921069994&4294967295,I=D+(R<<20&4294967295|R>>>12),R=C+(D^P&(I^D))+O[5]+3593408605&4294967295,C=I+(R<<5&4294967295|R>>>27),R=P+(I^D&(C^I))+O[10]+38016083&4294967295,P=C+(R<<9&4294967295|R>>>23),R=D+(C^I&(P^C))+O[15]+3634488961&4294967295,D=P+(R<<14&4294967295|R>>>18),R=I+(P^C&(D^P))+O[4]+3889429448&4294967295,I=D+(R<<20&4294967295|R>>>12),R=C+(D^P&(I^D))+O[9]+568446438&4294967295,C=I+(R<<5&4294967295|R>>>27),R=P+(I^D&(C^I))+O[14]+3275163606&4294967295,P=C+(R<<9&4294967295|R>>>23),R=D+(C^I&(P^C))+O[3]+4107603335&4294967295,D=P+(R<<14&4294967295|R>>>18),R=I+(P^C&(D^P))+O[8]+1163531501&4294967295,I=D+(R<<20&4294967295|R>>>12),R=C+(D^P&(I^D))+O[13]+2850285829&4294967295,C=I+(R<<5&4294967295|R>>>27),R=P+(I^D&(C^I))+O[2]+4243563512&4294967295,P=C+(R<<9&4294967295|R>>>23),R=D+(C^I&(P^C))+O[7]+1735328473&4294967295,D=P+(R<<14&4294967295|R>>>18),R=I+(P^C&(D^P))+O[12]+2368359562&4294967295,I=D+(R<<20&4294967295|R>>>12),R=C+(I^D^P)+O[5]+4294588738&4294967295,C=I+(R<<4&4294967295|R>>>28),R=P+(C^I^D)+O[8]+2272392833&4294967295,P=C+(R<<11&4294967295|R>>>21),R=D+(P^C^I)+O[11]+1839030562&4294967295,D=P+(R<<16&4294967295|R>>>16),R=I+(D^P^C)+O[14]+4259657740&4294967295,I=D+(R<<23&4294967295|R>>>9),R=C+(I^D^P)+O[1]+2763975236&4294967295,C=I+(R<<4&4294967295|R>>>28),R=P+(C^I^D)+O[4]+1272893353&4294967295,P=C+(R<<11&4294967295|R>>>21),R=D+(P^C^I)+O[7]+4139469664&4294967295,D=P+(R<<16&4294967295|R>>>16),R=I+(D^P^C)+O[10]+3200236656&4294967295,I=D+(R<<23&4294967295|R>>>9),R=C+(I^D^P)+O[13]+681279174&4294967295,C=I+(R<<4&4294967295|R>>>28),R=P+(C^I^D)+O[0]+3936430074&4294967295,P=C+(R<<11&4294967295|R>>>21),R=D+(P^C^I)+O[3]+3572445317&4294967295,D=P+(R<<16&4294967295|R>>>16),R=I+(D^P^C)+O[6]+76029189&4294967295,I=D+(R<<23&4294967295|R>>>9),R=C+(I^D^P)+O[9]+3654602809&4294967295,C=I+(R<<4&4294967295|R>>>28),R=P+(C^I^D)+O[12]+3873151461&4294967295,P=C+(R<<11&4294967295|R>>>21),R=D+(P^C^I)+O[15]+530742520&4294967295,D=P+(R<<16&4294967295|R>>>16),R=I+(D^P^C)+O[2]+3299628645&4294967295,I=D+(R<<23&4294967295|R>>>9),R=C+(D^(I|~P))+O[0]+4096336452&4294967295,C=I+(R<<6&4294967295|R>>>26),R=P+(I^(C|~D))+O[7]+1126891415&4294967295,P=C+(R<<10&4294967295|R>>>22),R=D+(C^(P|~I))+O[14]+2878612391&4294967295,D=P+(R<<15&4294967295|R>>>17),R=I+(P^(D|~C))+O[5]+4237533241&4294967295,I=D+(R<<21&4294967295|R>>>11),R=C+(D^(I|~P))+O[12]+1700485571&4294967295,C=I+(R<<6&4294967295|R>>>26),R=P+(I^(C|~D))+O[3]+2399980690&4294967295,P=C+(R<<10&4294967295|R>>>22),R=D+(C^(P|~I))+O[10]+4293915773&4294967295,D=P+(R<<15&4294967295|R>>>17),R=I+(P^(D|~C))+O[1]+2240044497&4294967295,I=D+(R<<21&4294967295|R>>>11),R=C+(D^(I|~P))+O[8]+1873313359&4294967295,C=I+(R<<6&4294967295|R>>>26),R=P+(I^(C|~D))+O[15]+4264355552&4294967295,P=C+(R<<10&4294967295|R>>>22),R=D+(C^(P|~I))+O[6]+2734768916&4294967295,D=P+(R<<15&4294967295|R>>>17),R=I+(P^(D|~C))+O[13]+1309151649&4294967295,I=D+(R<<21&4294967295|R>>>11),R=C+(D^(I|~P))+O[4]+4149444226&4294967295,C=I+(R<<6&4294967295|R>>>26),R=P+(I^(C|~D))+O[11]+3174756917&4294967295,P=C+(R<<10&4294967295|R>>>22),R=D+(C^(P|~I))+O[2]+718787259&4294967295,D=P+(R<<15&4294967295|R>>>17),R=I+(P^(D|~C))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.v=function(b,C){C===void 0&&(C=b.length);const I=C-this.blockSize,O=this.C;let D=this.h,P=0;for(;P<C;){if(D==0)for(;P<=I;)i(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<C;)if(O[D++]=b.charCodeAt(P++),D==this.blockSize){i(this,O),D=0;break}}else for(;P<C;)if(O[D++]=b[P++],D==this.blockSize){i(this,O),D=0;break}}this.h=D,this.o+=C},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;C=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=C&255,C/=256;for(this.v(b),b=Array(16),C=0,I=0;I<4;++I)for(let O=0;O<32;O+=8)b[C++]=this.g[I]>>>O&255;return b};function o(b,C){var I=h;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=C(b)}function l(b,C){this.h=C;const I=[];let O=!0;for(let D=b.length-1;D>=0;D--){const P=b[D]|0;O&&P==C||(I[D]=P,O=!1)}this.g=I}var h={};function d(b){return-128<=b&&b<128?o(b,function(C){return new l([C|0],C<0?-1:0)}):new l([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return v;if(b<0)return z(p(-b));const C=[];let I=1;for(let O=0;b>=I;O++)C[O]=b/I|0,I*=4294967296;return new l(C,0)}function _(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return z(_(b.substring(1),C));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(C,8));let O=v;for(let P=0;P<b.length;P+=8){var D=Math.min(8,b.length-P);const R=parseInt(b.substring(P,P+D),C);D<8?(D=p(Math.pow(C,D)),O=O.j(D).add(p(R))):(O=O.j(I),O=O.add(p(R)))}return O}var v=d(0),E=d(1),A=d(16777216);t=l.prototype,t.m=function(){if(F(this))return-z(this).m();let b=0,C=1;for(let I=0;I<this.g.length;I++){const O=this.i(I);b+=(O>=0?O:4294967296+O)*C,C*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(V(this))return"0";if(F(this))return"-"+z(this).toString(b);const C=p(Math.pow(b,6));var I=this;let O="";for(;;){const D=j(I,C).g;I=N(I,D.j(C));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=D,V(I))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function V(b){if(b.h!=0)return!1;for(let C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function F(b){return b.h==-1}t.l=function(b){return b=N(this,b),F(b)?-1:V(b)?0:1};function z(b){const C=b.g.length,I=[];for(let O=0;O<C;O++)I[O]=~b.g[O];return new l(I,~b.h).add(E)}t.abs=function(){return F(this)?z(this):this},t.add=function(b){const C=Math.max(this.g.length,b.g.length),I=[];let O=0;for(let D=0;D<=C;D++){let P=O+(this.i(D)&65535)+(b.i(D)&65535),R=(P>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);O=R>>>16,P&=65535,R&=65535,I[D]=R<<16|P}return new l(I,I[I.length-1]&-2147483648?-1:0)};function N(b,C){return b.add(z(C))}t.j=function(b){if(V(this)||V(b))return v;if(F(this))return F(b)?z(this).j(z(b)):z(z(this).j(b));if(F(b))return z(this.j(z(b)));if(this.l(A)<0&&b.l(A)<0)return p(this.m()*b.m());const C=this.g.length+b.g.length,I=[];for(var O=0;O<2*C;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<b.g.length;D++){const P=this.i(O)>>>16,R=this.i(O)&65535,ee=b.i(D)>>>16,Te=b.i(D)&65535;I[2*O+2*D]+=R*Te,T(I,2*O+2*D),I[2*O+2*D+1]+=P*Te,T(I,2*O+2*D+1),I[2*O+2*D+1]+=R*ee,T(I,2*O+2*D+1),I[2*O+2*D+2]+=P*ee,T(I,2*O+2*D+2)}for(b=0;b<C;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=C;b<2*C;b++)I[b]=0;return new l(I,0)};function T(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function k(b,C){this.g=b,this.h=C}function j(b,C){if(V(C))throw Error("division by zero");if(V(b))return new k(v,v);if(F(b))return C=j(z(b),C),new k(z(C.g),z(C.h));if(F(C))return C=j(b,z(C)),new k(z(C.g),C.h);if(b.g.length>30){if(F(b)||F(C))throw Error("slowDivide_ only works with positive integers.");for(var I=E,O=C;O.l(b)<=0;)I=G(I),O=G(O);var D=J(I,1),P=J(O,1);for(O=J(O,2),I=J(I,2);!V(O);){var R=P.add(O);R.l(b)<=0&&(D=D.add(I),P=R),O=J(O,1),I=J(I,1)}return C=N(b,D.j(C)),new k(D,C)}for(D=v;b.l(C)>=0;){for(I=Math.max(1,Math.floor(b.m()/C.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=p(I),R=P.j(C);F(R)||R.l(b)>0;)I-=O,P=p(I),R=P.j(C);V(P)&&(P=E),D=D.add(P),b=N(b,R)}return new k(D,b)}t.B=function(b){return j(this,b).h},t.and=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let O=0;O<C;O++)I[O]=this.i(O)&b.i(O);return new l(I,this.h&b.h)},t.or=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let O=0;O<C;O++)I[O]=this.i(O)|b.i(O);return new l(I,this.h|b.h)},t.xor=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let O=0;O<C;O++)I[O]=this.i(O)^b.i(O);return new l(I,this.h^b.h)};function G(b){const C=b.g.length+1,I=[];for(let O=0;O<C;O++)I[O]=b.i(O)<<1|b.i(O-1)>>>31;return new l(I,b.h)}function J(b,C){const I=C>>5;C%=32;const O=b.g.length-I,D=[];for(let P=0;P<O;P++)D[P]=C>0?b.i(P+I)>>>C|b.i(P+I+1)<<32-C:b.i(P+I);return new l(D,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Mi=l}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ex,gl,xx,Gc,Up,Tx,Ix,Sx;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var y=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in y))break e;y=y[B]}u=u[u.length-1],S=y[u],m=m(S),m!=S&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(m){var y=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&y.push([S,m[S]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){return p=d,p.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function v(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(S,B,H){for(var te=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)te[ge-2]=arguments[ge];return m.prototype[B].apply(S,te)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function A(u){const m=u.length;if(m>0){const y=Array(m);for(let S=0;S<m;S++)y[S]=u[S];return y}return[]}function V(u,m){for(let S=1;S<arguments.length;S++){const B=arguments[S];var y=typeof B;if(y=y!="object"?y:B?Array.isArray(B)?"array":y:"null",y=="array"||y=="object"&&typeof B.length=="number"){y=u.length||0;const H=B.length||0;u.length=y+H;for(let te=0;te<H;te++)u[y+te]=B[te]}else u.push(B)}}class F{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function z(u){l.setTimeout(()=>{throw u},0)}function N(){var u=b;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class T{constructor(){this.h=this.g=null}add(m,y){const S=k.get();S.set(m,y),this.h?this.h.next=S:this.g=S,this.h=S}}var k=new F(()=>new j,u=>u.reset());class j{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let G,J=!1,b=new T,C=()=>{const u=Promise.resolve(void 0);G=()=>{u.then(I)}};function I(){for(var u;u=N();){try{u.h.call(u.g)}catch(y){z(y)}var m=k;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function ee(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(ee,D),ee.prototype.init=function(u,m){const y=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),De=0;function We(u,m,y,S,B){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!S,this.ha=B,this.key=++De,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,m,y){for(const S in u)m.call(y,u[S],S,u)}function X(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function he(u){const m={};for(const y in u)m[y]=u[y];return m}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(u,m){let y,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(y in S)u[y]=S[y];for(let H=0;H<ve.length;H++)y=ve[H],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,m,y,S,B){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const te=ce(u,m,S,B);return te>-1?(m=u[te],y||(m.fa=!1)):(m=new We(m,this.src,H,!!S,B),m.fa=y,u.push(m)),m};function we(u,m){const y=m.type;if(y in u.g){var S=u.g[y],B=Array.prototype.indexOf.call(S,m,void 0),H;(H=B>=0)&&Array.prototype.splice.call(S,B,1),H&&($(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function ce(u,m,y,S){for(let B=0;B<u.length;++B){const H=u[B];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==S)return B}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),vn={};function Ca(u,m,y,S,B){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Ca(u,m[H],y,S,B);return null}return y=rs(y),u&&u[Te]?u.J(m,y,h(S)?!!S.capture:!1,B):Pa(u,m,y,!1,S,B)}function Pa(u,m,y,S,B,H){if(!m)throw Error("Invalid event type");const te=h(B)?!!B.capture:!!B;let ge=Zs(u);if(ge||(u[ct]=ge=new Se(u)),y=ge.add(m,y,S,te,H),y.proxy)return y;if(S=ka(),y.proxy=S,S.src=u,S.listener=y,u.addEventListener)P||(B=te),B===void 0&&(B=!1),u.addEventListener(m.toString(),S,B);else if(u.attachEvent)u.attachEvent(Ru(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ka(){function u(y){return m.call(u.src,u.listener,y)}const m=bu;return u}function ei(u,m,y,S,B){if(Array.isArray(m))for(var H=0;H<m.length;H++)ei(u,m[H],y,S,B);else S=h(S)?!!S.capture:!!S,y=rs(y),u&&u[Te]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],y=ce(m,y,S,B),y>-1&&($(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ce(m,y,S,B)),(y=u>-1?m[u]:null)&&ts(y))}function ts(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Te])we(m.i,u);else{var y=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(y,S,u.capture):m.detachEvent?m.detachEvent(Ru(y),S):m.addListener&&m.removeListener&&m.removeListener(S),(y=Zs(m))?(we(y,u),y.h==0&&(y.src=null,m[ct]=null)):$(u)}}}function Ru(u){return u in vn?vn[u]:vn[u]="on"+u}function bu(u,m){if(u.da)u=!0;else{m=new ee(m,this);const y=u.listener,S=u.ha||u.src;u.fa&&ts(u),u=y.call(S,m)}return u}function Zs(u){return u=u[ct],u instanceof Se?u:null}var ns="__closure_events_fn_"+(Math.random()*1e9>>>0);function rs(u){return typeof u=="function"?u:(u[ns]||(u[ns]=function(m){return u.handleEvent(m)}),u[ns])}function Et(){O.call(this),this.i=new Se(this),this.M=this,this.G=null}v(Et,O),Et.prototype[Te]=!0,Et.prototype.removeEventListener=function(u,m,y,S){ei(this,u,m,y,S)};function xt(u,m){var y,S=u.G;if(S)for(y=[];S;S=S.G)y.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var B=m;m=new D(S,u),Ze(m,B)}B=!0;let H,te;if(y)for(te=y.length-1;te>=0;te--)H=m.g=y[te],B=ti(H,S,!0,m)&&B;if(H=m.g=u,B=ti(H,S,!0,m)&&B,B=ti(H,S,!1,m)&&B,y)for(te=0;te<y.length;te++)H=m.g=y[te],B=ti(H,S,!1,m)&&B}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let S=0;S<y.length;S++)$(y[S]);delete u.g[m],u.h--}}this.G=null},Et.prototype.J=function(u,m,y,S){return this.i.add(String(u),m,!1,y,S)},Et.prototype.K=function(u,m,y,S){return this.i.add(String(u),m,!0,y,S)};function ti(u,m,y,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let B=!0;for(let H=0;H<m.length;++H){const te=m[H];if(te&&!te.da&&te.capture==y){const ge=te.listener,Oe=te.ha||te.src;te.fa&&we(u.i,te),B=ge.call(Oe,S)!==!1&&B}}return B&&!S.defaultPrevented}function Lu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function Aa(u){u.g=Lu(()=>{u.g=null,u.i&&(u.i=!1,Aa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class zd extends O{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Aa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){O.call(this),this.h=u,this.g={}}v(is,O);var Ks=[];function Ra(u){le(u.g,function(m,y){this.g.hasOwnProperty(y)&&ts(m)},u),u.g={}}is.prototype.N=function(){is.Z.N.call(this),Ra(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=l.JSON.stringify,jd=l.JSON.parse,Nu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function ba(){}function Ou(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ss(){D.call(this,"d")}v(ss,D);function Ys(){D.call(this,"c")}v(Ys,D);var Sr={},ri=null;function Xs(){return ri=ri||new Et}Sr.Ia="serverreachability";function Du(u){D.call(this,Sr.Ia,u)}v(Du,D);function ii(u){const m=Xs();xt(m,new Du(m))}Sr.STAT_EVENT="statevent";function La(u,m){D.call(this,Sr.STAT_EVENT,u),this.stat=m}v(La,D);function Tt(u){const m=Xs();xt(m,new La(m,u))}Sr.Ja="timingevent";function Mu(u,m){D.call(this,Sr.Ja,u),this.size=m}v(Mu,D);function os(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function as(){this.g=!0}as.prototype.ua=function(){this.g=!1};function Bd(u,m,y,S,B,H){u.info(function(){if(u.g)if(H){var te="",ge=H.split("&");for(let Ve=0;Ve<ge.length;Ve++){var Oe=ge[Ve].split("=");if(Oe.length>1){const ot=Oe[0];Oe=Oe[1];const In=ot.split("_");te=In.length>=2&&In[1]=="type"?te+(ot+"="+Oe+"&"):te+(ot+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+m+`
`+y+`
`+te})}function Ud(u,m,y,S,B,H,te){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+m+`
`+y+`
`+H+" "+te})}function si(u,m,y,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Hd(u,y)+(S?" "+S:"")})}function Na(u,m){u.info(function(){return"TIMEOUT: "+m})}as.prototype.info=function(){};function Hd(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var y=H[u];if(!(y.length<2)){var S=y[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let te=1;te<S.length;te++)S[te]=""}}}}return Qs(H)}catch{return m}}var Js={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fu;function Yt(){}v(Yt,ba),Yt.prototype.g=function(){return new XMLHttpRequest},Fu=new Yt;function ae(u){return encodeURIComponent(String(u))}function zu(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Mn(u,m,y,S){this.j=u,this.i=m,this.l=y,this.S=S||1,this.V=new is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oa}function Oa(){this.i=null,this.g="",this.h=!1}var Da={},ls={};function eo(u,m,y){u.M=1,u.A=Be(Ht(m)),u.u=y,u.R=!0,Cr(u,null)}function Cr(u,m){u.F=Date.now(),to(u),u.B=Ht(u.A);var y=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),oo(y.i,"t",S),u.C=0,y=u.j.L,u.h=new Oa,u.g=Ka(u.j,y?m:null,!u.u),u.P>0&&(u.O=new zd(p(u.Y,u,u.g),u.P)),m=u.V,y=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ks[0]=B.toString()),B=Ks);for(let H=0;H<B.length;H++){const te=Ca(y,B[H],S||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?he(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),ii(),Bd(u.i,u.v,u.B,u.l,u.S,u.u)}Mn.prototype.ba=function(u){u=u.target;const m=this.O;m&&tr(u)==3?m.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const ge=tr(this.g),Oe=this.g.ya(),Ve=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Ua(this.g)))){this.K||ge!=4||Oe==7||(Oe==8||Ve<=0?ii(3):ii(2)),no(this);var m=this.g.ca();this.X=m;var y=ju(this);if(this.o=m==200,Ud(this.i,this.v,this.B,this.l,this.S,ge,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var H=S;break t}}H=null}if(u=H)si(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ma(this,u);else{this.o=!1,this.m=3,Tt(12),wn(this),us(this);break e}}if(this.R){u=!0;let ot;for(;!this.K&&this.C<y.length;)if(ot=Wd(this,y),ot==ls){ge==4&&(this.m=4,Tt(14),u=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(ot==Da){this.m=4,Tt(15),si(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else si(this.i,this.l,ot,null),Ma(this,ot);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||y.length!=0||this.h.h||(this.m=1,Tt(16),u=!1),this.o=this.o&&u,!u)si(this.i,this.l,y,"[Invalid Chunked Response]"),wn(this),us(this);else if(y.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Ga(te),te.P=!0,Tt(11))}}else si(this.i,this.l,y,null),Ma(this,y);ge==4&&wn(this),this.o&&!this.K&&(ge==4?cn(this.j,this):(this.o=!1,to(this)))}else Ha(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),wn(this),us(this)}}}catch{}finally{}};function ju(u){if(!Bu(u))return u.g.la();const m=Ua(u.g);if(m==="")return"";let y="";const S=m.length,B=tr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return wn(u),us(u),"";u.h.i=new l.TextDecoder}for(let H=0;H<S;H++)u.h.h=!0,y+=u.h.i.decode(m[H],{stream:!(B&&H==S-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function Bu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Wd(u,m){var y=u.C,S=m.indexOf(`
`,y);return S==-1?ls:(y=Number(m.substring(y,S)),isNaN(y)?Da:(S+=1,S+y>m.length?ls:(m=m.slice(S,S+y),u.C=S+y,m)))}Mn.prototype.cancel=function(){this.K=!0,wn(this)};function to(u){u.T=Date.now()+u.H,Uu(u,u.H)}function Uu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=os(p(u.aa,u),m)}function no(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Na(this.i,this.B),this.M!=2&&(ii(),Tt(17)),wn(this),this.m=2,us(this)):Uu(this,this.T-u)};function us(u){u.j.I==0||u.K||cn(u.j,u)}function wn(u){no(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ra(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ma(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||cs(y.h,u))){if(!u.L&&cs(y.h,u)&&y.I==3){try{var S=y.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)ho(y),uo(y);else break e;qa(y),Tt(18)}}else y.xa=B[1],0<y.xa-y.K&&B[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=os(p(y.Va,y),6e3));$u(y.h)<=1&&y.ta&&(y.ta=void 0)}else rr(y,11)}else if((u.L||y.g==u)&&ho(y),!R(m))for(B=y.Ba.g.parse(m),m=0;m<B.length;m++){let Ve=B[m];const ot=Ve[0];if(!(ot<=y.K))if(y.K=ot,Ve=Ve[1],y.I==2)if(Ve[0]=="c"){y.M=Ve[1],y.ba=Ve[2];const In=Ve[3];In!=null&&(y.ka=In,y.j.info("VER="+y.ka));const zn=Ve[4];zn!=null&&(y.za=zn,y.j.info("SVER="+y.za));const Sn=Ve[5];Sn!=null&&typeof Sn=="number"&&Sn>0&&(S=1.5*Sn,y.O=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const ir=u.g;if(ir){const mo=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var H=S.h;H.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Pr(H,H.h),H.h=null))}if(S.G){const go=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;go&&(S.wa=go,se(S.J,S.G,go))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),S=y;var te=u;if(S.na=Za(S,S.L?S.ba:null,S.W),te.L){Va(S.h,te);var ge=te,Oe=S.O;Oe&&(ge.H=Oe),ge.D&&(no(ge),to(ge)),S.g=te}else $a(S);y.i.length>0&&nr(y)}else Ve[0]!="stop"&&Ve[0]!="close"||rr(y,7);else y.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?rr(y,7):Ee(y):Ve[0]!="noop"&&y.l&&y.l.qa(Ve),y.A=0)}}ii(4)}catch{}}var $d=class{constructor(u,m){this.g=u,this.map=m}};function Hu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $u(u){return u.h?1:u.g?u.g.size:0}function cs(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Pr(u,m){u.g?u.g.add(m):u.h=m}function Va(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Hu.prototype.cancel=function(){if(this.i=Fa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Fa(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return A(u.i)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ae(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const S=u[y].indexOf("=");let B,H=null;S>=0?(B=u[y].substring(0,S),H=u[y].substring(S+1)):B=u[y],m(B,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ne(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Ne?(this.l=u.l,En(this,u.j),this.o=u.o,this.g=u.g,xn(this,u.u),this.h=u.h,hs(this,ds(u.i)),this.m=u.m):u&&(m=String(u).match(oi))?(this.l=!1,En(this,m[1]||"",!0),this.o=kr(m[2]||""),this.g=kr(m[3]||"",!0),xn(this,m[4]),this.h=kr(m[5]||"",!0),hs(this,m[6]||"",!0),this.m=kr(m[7]||"")):(this.l=!1,this.i=new Vn(null,this.l))}Ne.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Xn(m,qu,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Xn(m,qu,!0),"@"),u.push(ae(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Xn(y,y.charAt(0)=="/"?Ar:ro,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Xn(y,Rr)),u.join("")},Ne.prototype.resolve=function(u){const m=Ht(this);let y=!!u.j;y?En(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var S=u.h;if(y)xn(m,u.u);else if(y=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=m.h.lastIndexOf("/");B!=-1&&(S=m.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const H=[];for(let te=0;te<B.length;){const ge=B[te++];ge=="."?S&&te==B.length&&H.push(""):ge==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&te==B.length&&H.push("")):(H.push(ge),S=!0)}S=H.join("/")}else S=B}return y?m.h=S:y=u.i.toString()!=="",y?hs(m,ds(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Ht(u){return new Ne(u)}function En(u,m,y){u.j=y?kr(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function xn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function hs(u,m,y){m instanceof Vn?(u.i=m,za(u.i,u.l)):(y||(m=Xn(m,et)),u.i=new Vn(m,u.l))}function se(u,m,y){u.i.set(m,y)}function Be(u){return se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function kr(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Xt),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qu=/[#\/\?@]/g,ro=/[#\?:]/g,Ar=/[#\?]/g,et=/[#\?@]/g,Rr=/#/g;function Vn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function un(u){u.g||(u.g=new Map,u.h=0,u.i&&Ae(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Vn.prototype,t.add=function(u,m){un(this),this.i=null,u=Jn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function io(u,m){un(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ai(u,m){return un(u),m=Jn(u,m),u.g.has(m)}t.forEach=function(u,m){un(this),this.g.forEach(function(y,S){y.forEach(function(B){u.call(m,B,S,this)},this)},this)};function so(u,m){un(u);let y=[];if(typeof m=="string")ai(u,m)&&(y=y.concat(u.g.get(Jn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return un(this),this.i=null,u=Jn(this,u),ai(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=so(this,u),u.length>0?String(u[0]):m):m};function oo(u,m,y){io(u,m),y.length>0&&(u.i=null,u.g.set(Jn(u,m),A(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var y=m[S];const B=ae(y);y=so(this,y);for(let H=0;H<y.length;H++){let te=B;y[H]!==""&&(te+="="+ae(y[H])),u.push(te)}}return this.i=u.join("&")};function ds(u){const m=new Vn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function za(u,m){m&&!u.j&&(un(u),u.i=null,u.g.forEach(function(y,S){const B=S.toLowerCase();S!=B&&(io(this,S),oo(this,B,y))},u)),u.j=m}function ao(u,m){const y=new as;if(l.Image){const S=new Image;S.onload=_(Tn,y,"TestLoadImage: loaded",!0,m,S),S.onerror=_(Tn,y,"TestLoadImage: error",!1,m,S),S.onabort=_(Tn,y,"TestLoadImage: abort",!1,m,S),S.ontimeout=_(Tn,y,"TestLoadImage: timeout",!1,m,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Gu(u,m){const y=new as,S=new AbortController,B=setTimeout(()=>{S.abort(),Tn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(H=>{clearTimeout(B),H.ok?Tn(y,"TestPingServer: ok",!0,m):Tn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Tn(y,"TestPingServer: error",!1,m)})}function Tn(u,m,y,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(y)}catch{}}function qd(){this.g=new Nu}function me(u){this.i=u.Sb||null,this.h=u.ab||!1}v(me,ba),me.prototype.g=function(){return new Wt(this.i,this.h)};function Wt(u,m){Et.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Wt,Et),t=Wt.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,br(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ze(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ze(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?li(this):br(this),this.readyState==3&&ze(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,li(this))},t.Na=function(u){this.g&&(this.response=u,li(this))},t.ga=function(){this.g&&li(this)};function li(u){u.readyState=4,u.l=null,u.j=null,u.B=null,br(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function br(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lo(u){let m="";return le(u,function(y,S){m+=S,m+=":",m+=y,m+=`\r
`}),m}function fs(u,m,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=lo(y),typeof u=="string"?y!=null&&ae(y):se(u,m,y))}function Me(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Me,Et);var ja=/^https?$/i,ps=["POST","PUT"];t=Me.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fu.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){ht(this,H);return}if(u=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)y.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())y.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),B=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(ps,m,void 0)>=0)||S||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of y)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ht(this,H)}};function ht(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,er(u),ms(u)}function er(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,xt(this,"complete"),xt(this,"abort"),ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},t.Xa=function(){Ba(this)};function Ba(u){if(u.h&&typeof o<"u"){if(u.v&&tr(u)==4)setTimeout(u.Ca.bind(u),0);else if(xt(u,"readystatechange"),tr(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var S;if(S=H===0){let te=String(u.D).match(oi)[1]||null;!te&&l.self&&l.self.location&&(te=l.self.location.protocol.slice(0,-1)),S=!ja.test(te?te.toLowerCase():"")}y=S}if(y)xt(u,"complete"),xt(u,"success");else{u.o=6;try{var B=tr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",er(u)}}finally{ms(u)}}}}function ms(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||xt(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return tr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),jd(m)}};function Ua(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(u){const m={};u=(u.g&&tr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(R(u[S]))continue;var y=zu(u[S]);const B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[B]||[];m[B]=H,H.push(y)}X(m,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Wa(u){this.za=0,this.i=[],this.j=new as,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,u),this.Za=gs("retryDelaySeedMs",1e4,u),this.Ta=gs("forwardChannelMaxRetries",2,u),this.va=gs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Hu(u&&u.concurrentRequestLimit),this.Ba=new qd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Wa.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,S){Tt(0),this.W=u,this.H=m||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.J=Za(this,null,this.W),nr(this)};function Ee(u){if(Jt(u),u.I==3){var m=u.V++,y=Ht(u.J);if(se(y,"SID",u.M),se(y,"RID",m),se(y,"TYPE","terminate"),Lr(u,y),m=new Mn(u,u.j,m),m.M=2,m.A=Be(Ht(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.A,y=!0),y||(m.g=Ka(m.j,null),m.g.ea(m.A)),m.F=Date.now(),to(m)}Fn(u)}function uo(u){u.g&&(Ga(u),u.g.cancel(),u.g=null)}function Jt(u){uo(u),u.v&&(l.clearTimeout(u.v),u.v=null),ho(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function nr(u){if(!Wu(u.h)&&!u.m){u.m=!0;var m=u.Ea;G||C(),J||(G(),J=!0),b.add(m,u),u.D=0}}function Zu(u,m){return $u(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=os(p(u.Ea,u,m),Yu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Mn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=he(H),Ze(H,this.U)):H=this.U),this.u!==null||this.R||(B.J=H,H=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Qu(this,B,m),y=Ht(this.J),se(y,"RID",u),se(y,"CVER",22),this.G&&se(y,"X-HTTP-Session-Id",this.G),Lr(this,y),H&&(this.R?m="headers="+ae(lo(H))+"&"+m:this.u&&fs(y,this.u,H)),Pr(this.h,B),this.Ra&&se(y,"TYPE","init"),this.S?(se(y,"$req",m),se(y,"SID","null"),B.U=!0,eo(B,y,null)):eo(B,y,m),this.I=2}}else this.I==3&&(u?Ku(this,u):this.i.length==0||Wu(this.h)||Ku(this))};function Ku(u,m){var y;m?y=m.l:y=u.V++;const S=Ht(u.J);se(S,"SID",u.M),se(S,"RID",y),se(S,"AID",u.K),Lr(u,S),u.u&&u.o&&fs(S,u.u,u.o),y=new Mn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Qu(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Pr(u.h,y),eo(y,S,m)}function Lr(u,m){u.H&&le(u.H,function(y,S){se(m,S,y)}),u.l&&le({},function(y,S){se(m,S,y)})}function Qu(u,m,y){y=Math.min(u.i.length,y);const S=u.l?p(u.l.Ka,u.l,u):null;e:{var B=u.i;let ge=-1;for(;;){const Oe=["count="+y];ge==-1?y>0?(ge=B[0].g,Oe.push("ofs="+ge)):ge=0:Oe.push("ofs="+ge);let Ve=!0;for(let ot=0;ot<y;ot++){var H=B[ot].g;const In=B[ot].map;if(H-=ge,H<0)ge=Math.max(0,B[ot].g-100),Ve=!1;else try{H="req"+H+"_"||"";try{var te=In instanceof Map?In:Object.entries(In);for(const[zn,Sn]of te){let ir=Sn;h(Sn)&&(ir=Qs(Sn)),Oe.push(H+zn+"="+encodeURIComponent(ir))}}catch(zn){throw Oe.push(H+"type="+encodeURIComponent("_badmap")),zn}}catch{S&&S(In)}}if(Ve){te=Oe.join("&");break e}}te=void 0}return u=u.i.splice(0,y),m.G=u,te}function $a(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;G||C(),J||(G(),J=!0),b.add(m,u),u.A=0}}function qa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=os(p(u.Da,u),Yu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,co(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=os(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),uo(this),co(this))};function Ga(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function co(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ht(u.na);se(m,"RID","rpc"),se(m,"SID",u.M),se(m,"AID",u.K),se(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&se(m,"TO",u.ia),se(m,"TYPE","xmlhttp"),Lr(u,m),u.u&&u.o&&fs(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Be(Ht(m)),y.u=null,y.R=!0,Cr(y,u)}t.Va=function(){this.C!=null&&(this.C=null,uo(this),qa(this),Tt(19))};function ho(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function cn(u,m){var y=null;if(u.g==m){ho(u),Ga(u),u.g=null;var S=2}else if(cs(u.h,m))y=m.G,Va(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var B=u.D;S=Xs(),xt(S,new Mu(S,y)),nr(u)}else $a(u);else if(B=m.m,B==3||B==0&&m.X>0||!(S==1&&Zu(u,m)||S==2&&qa(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),B){case 1:rr(u,5);break;case 4:rr(u,10);break;case 3:rr(u,6);break;default:rr(u,2)}}}function Yu(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function rr(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.bb,u),S=u.Ua;const B=!S;S=new Ne(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||En(S,"https"),Be(S),B?ao(S.toString(),y):Gu(S.toString(),y)}else Tt(2);u.I=0,u.l&&u.l.pa(m),Fn(u),Jt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Fn(u){if(u.I=0,u.ja=[],u.l){const m=Fa(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ja,m),V(u.ja,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.oa()}}function Za(u,m,y){var S=y instanceof Ne?Ht(y):new Ne(y);if(S.g!="")m&&(S.g=m+"."+S.g),xn(S,S.u);else{var B=l.location;S=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;const H=new Ne(null);S&&En(H,S),m&&(H.g=m),B&&xn(H,B),y&&(H.h=y),S=H}return y=u.G,m=u.wa,y&&m&&se(S,y,m),se(S,"VER",u.ka),Lr(u,S),S}function Ka(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Me(new me({ab:y})):new Me(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fo(){}t=fo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function po(){}po.prototype.g=function(u,m){return new Ot(u,m)};function Ot(u,m){Et.call(this),this.g=new Wa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ui(this)}v(Ot,Et),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Ee(this.g)},Ot.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=Qs(u),u=y);m.i.push(new $d(m.Ya++,u)),m.I==3&&nr(m)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Ee(this.g),delete this.g,Ot.Z.N.call(this)};function Qa(u){ss.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Qa,ss);function Xu(){Ys.call(this),this.status=1}v(Xu,Ys);function ui(u){this.g=u}v(ui,fo),ui.prototype.ra=function(){xt(this.g,"a")},ui.prototype.qa=function(u){xt(this.g,new Qa(u))},ui.prototype.pa=function(u){xt(this.g,new Xu)},ui.prototype.oa=function(){xt(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,Sx=function(){return new po},Ix=function(){return Xs()},Tx=Sr,Up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Js.NO_ERROR=0,Js.TIMEOUT=8,Js.HTTP_ERROR=6,Gc=Js,Vu.COMPLETE="complete",xx=Vu,Ou.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Et.prototype.listen=Et.prototype.J,gl=Ou,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,Ex=Me}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore",dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new hg("@firebase/firestore");function So(){return Ms.logLevel}function ie(t,...e){if(Ms.logLevel<=Ce.DEBUG){const n=e.map(pg);Ms.debug(`Firestore (${_a}): ${t}`,...n)}}function Qr(t,...e){if(Ms.logLevel<=Ce.ERROR){const n=e.map(pg);Ms.error(`Firestore (${_a}): ${t}`,...n)}}function oa(t,...e){if(Ms.logLevel<=Ce.WARN){const n=e.map(pg);Ms.warn(`Firestore (${_a}): ${t}`,...n)}}function pg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Cx(t,r,n)}function Cx(t,e,n){let r=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qr(r),new Error(r)}function Fe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Cx(e,i,r)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class FA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zA{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wr,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new Px(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class jA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=HA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function Hp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return bf(i)===bf(o)?Pe(i,o):bf(i)?1:-1}return Pe(t.length,e.length)}const WA=55296,$A=57343;function bf(t){const e=t.charCodeAt(0);return e>=WA&&e<=$A}function aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=lr.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Pe(e.length,n.length)}static compareSegments(e,n){const r=lr.isNumericId(e),i=lr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?lr.extractNumericId(e).compare(lr.extractNumericId(n)):Hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mi.fromString(e.substring(4,e.length-2))}}class Ue extends lr{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const qA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends lr{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return qA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new Rt([pv])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ne(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ne(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new ne(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Ue.fromString(e))}static fromName(e){return new ue(Ue.fromString(e).popFirst(5))}static empty(){return new ue(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e,n){if(!n)throw new ne(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GA(t,e,n,r){if(e===!0&&r===!0)throw new ne(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mv(t){if(!ue.isDocumentKey(t))throw new ne(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gv(t){if(ue.isDocumentKey(t))throw new ne(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ax(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=md(t);throw new ne(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Eu(t,e){if(!Ax(t))throw new ne(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ne(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,yv=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*yv);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_v)throw new ne(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:gt("string",qe._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new qe(0,0))}static max(){return new _e(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function ZA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Ui(i,ue.empty(),e)}function KA(t){return new Ui(t.readTime,t.key,ru)}class Ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ui(_e.min(),ue.empty(),ru)}static max(){return new Ui(_e.max(),ue.empty(),ru)}}function QA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==YA)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&n()},d=>r(d))}),l=!0,o===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&r(l)},_=>i(_))}})}static doWhile(e,n){return new K((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function JA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=-1;function _d(t){return t==null}function bh(t){return t===0&&1/t==-1/0}function eR(t){return typeof t=="number"&&Number.isInteger(t)&&!bh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="";function tR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vv(e)),e=nR(t.get(n),e);return vv(e)}function nR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Rx:n+="";break;default:n+=o}}return n}function vv(t){return t+Rx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}}class kc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=o??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new At(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new fn([])}unionWith(e){let n=new wt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Lx("Invalid base64 string: "+o):o}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const rR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=rR.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="server_timestamp",Ox="__type__",Dx="__previous_value__",Mx="__local_write_time__";function _g(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ox])==null?void 0:r.stringValue)===Nx}function yd(t){const e=t.mapValue.fields[Dx];return _g(e)?yd(e):e}function iu(t){const e=Hi(t.mapValue.fields[Mx].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,i,o,l,h,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const Lh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="__type__",sR="__max__",Ac={mapValue:{}},Fx="__vector__",Nh="value";function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:aR(t)?9007199254740991:oR(t)?10:11:pe(28295,{value:t})}function Tr(t,e){if(t===e)return!0;const n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return iu(t).isEqual(iu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Hi(i.timestampValue),h=Hi(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Wi(i.bytesValue).isEqual(Wi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return at(i.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return at(i.integerValue)===at(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=at(i.doubleValue),h=at(o.doubleValue);return l===h?bh(l)===bh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},h=o.mapValue.fields||{};if(wv(l)!==wv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Tr(l[d],h[d])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function ou(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function la(t,e){if(t===e)return 0;const n=$i(t),r=$i(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=at(o.integerValue||o.doubleValue),d=at(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return xv(t.timestampValue,e.timestampValue);case 4:return xv(iu(t),iu(e));case 5:return Hp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Wi(o),d=Wi(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Pe(h[p],d[p]);if(_!==0)return _}return Pe(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Pe(at(o.latitude),at(l.latitude));return h!==0?h:Pe(at(o.longitude),at(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,A,V,F;const h=o.fields||{},d=l.fields||{},p=(E=h[Nh])==null?void 0:E.arrayValue,_=(A=d[Nh])==null?void 0:A.arrayValue,v=Pe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return v!==0?v:Tv(p,_)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Ac.mapValue&&l===Ac.mapValue)return 0;if(o===Ac.mapValue)return 1;if(l===Ac.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const E=Hp(d[v],_[v]);if(E!==0)return E;const A=la(h[d[v]],p[_[v]]);if(A!==0)return A}return Pe(d.length,_.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Hi(t),r=Hi(e),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function Tv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=la(n[i],r[i]);if(o)return o}return Pe(n.length,r.length)}function ua(t){return Wp(t)}function Wp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Wp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Wp(n.fields[l])}`;return i+"}"}(t.mapValue):pe(61005,{value:t})}function Zc(t){switch($i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yd(t);return e?16+Zc(e):16;case 5:return 2*t.stringValue.length;case 6:return Wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Zc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Xi(r.fields,(o,l)=>{i+=o.length+Zc(l)}),i}(t.mapValue);default:throw pe(13486,{value:t})}}function Iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $p(t){return!!t&&"integerValue"in t}function yg(t){return!!t&&"arrayValue"in t}function Sv(t){return!!t&&"nullValue"in t}function Cv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kc(t){return!!t&&"mapValue"in t}function oR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Vx])==null?void 0:r.stringValue)===Fx}function Rl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Rl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rl(t.arrayValue.values[n]);return e}return{...t}}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=Rl(l):i.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new rn(Rl(this.value))}}function zx(t){const e=[];return Xi(t.fields,(n,r)=>{const i=new Rt([n]);if(Kc(r)){const o=zx(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new jt(e,0,_e.min(),_e.min(),_e.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new jt(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new jt(e,2,n,_e.min(),_e.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,_e.min(),_e.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(l.referenceValue),n.key):r=la(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{}class mt extends jx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cR(e,n,r):n==="array-contains"?new fR(e,r):n==="in"?new pR(e,r):n==="not-in"?new mR(e,r):n==="array-contains-any"?new gR(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hR(e,r):new dR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(la(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends jx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qn(e,n)}matches(e){return Bx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bx(t){return t.op==="and"}function Ux(t){return uR(t)&&Bx(t)}function uR(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function qp(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+ua(t.value);if(Ux(t))return t.filters.map(e=>qp(e)).join(",");{const e=t.filters.map(n=>qp(n)).join(",");return`${t.op}(${e})`}}function Hx(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(t,e):t instanceof Qn?function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,h)=>o&&Hx(l,i.filters[h]),!0):!1}(t,e):void pe(19439)}function Wx(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ua(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Wx).join(" ,")+"}"}(t):"Filter"}class cR extends mt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class hR extends mt{constructor(e,n){super(e,"in",n),this.keys=$x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dR extends mt{constructor(e,n){super(e,"not-in",n),this.keys=$x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $x(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class fR extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yg(n)&&ou(n.arrayValue,this.value)}}class pR extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class mR extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class gR extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function Av(t,e=null,n=[],r=[],i=null,o=null,l=null){return new _R(t,e,n,r,i,o,l)}function vg(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ua(r)).join(",")),e.Te=n}return e.Te}function wg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kv(t.startAt,e.startAt)&&kv(t.endAt,e.endAt)}function Gp(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,r=[],i=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yR(t,e,n,r,i,o,l,h){return new wa(t,e,n,r,i,o,l,h)}function Eg(t){return new wa(t)}function Rv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qx(t){return t.collectionGroup!==null}function bl(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new wt(Rt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new au(o,r))}),n.has(Rt.keyField().canonicalString())||e.Ie.push(new au(Rt.keyField(),r))}return e.Ie}function gr(t){const e=ye(t);return e.Ee||(e.Ee=vR(e,bl(t))),e.Ee}function vR(t,e){if(t.limitType==="F")return Av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new au(i.field,o)});const n=t.endAt?new Oh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oh(t.startAt.position,t.startAt.inclusive):null;return Av(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zp(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kp(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vd(t,e){return wg(gr(t),gr(e))&&t.limitType===e.limitType}function Gx(t){return`${vg(gr(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wx(i)).join(", ")}]`),_d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ua(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ua(i)).join(",")),`Target(${r})`}(gr(t))}; limitType=${t.limitType})`}function wd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of bl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,h,d){const p=Pv(l,h,d);return l.inclusive?p<=0:p<0}(r.startAt,bl(r),i)||r.endAt&&!function(l,h,d){const p=Pv(l,h,d);return l.inclusive?p>=0:p>0}(r.endAt,bl(r),i))}(t,e)}function wR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Zx(t){return(e,n)=>{let r=!1;for(const i of bl(t)){const o=ER(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ER(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?la(d,p):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return bx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new Je(ue.comparator);function Yr(){return xR}const Kx=new Je(ue.comparator);function _l(...t){let e=Kx;for(const n of t)e=e.insert(n.key,n);return e}function Qx(t){let e=Kx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return Ll()}function Yx(){return Ll()}function Ll(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const TR=new Je(ue.comparator),IR=new wt(ue.comparator);function ke(...t){let e=IR;for(const n of t)e=e.add(n);return e}const SR=new wt(Pe);function CR(){return SR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function Xx(t){return{integerValue:""+t}}function PR(t,e){return eR(e)?Xx(e):xg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function kR(t,e,n){return t instanceof Dh?function(i,o){const l={fields:{[Ox]:{stringValue:Nx},[Mx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_g(o)&&(o=yd(o)),o&&(l.fields[Dx]=o),{mapValue:l}}(n,e):t instanceof lu?eT(t,e):t instanceof uu?tT(t,e):function(i,o){const l=Jx(i,o),h=bv(l)+bv(i.Ae);return $p(l)&&$p(i.Ae)?Xx(h):xg(i.serializer,h)}(t,e)}function AR(t,e,n){return t instanceof lu?eT(t,e):t instanceof uu?tT(t,e):n}function Jx(t,e){return t instanceof Mh?function(r){return $p(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Dh extends Ed{}class lu extends Ed{constructor(e){super(),this.elements=e}}function eT(t,e){const n=nT(e);for(const r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class uu extends Ed{constructor(e){super(),this.elements=e}}function tT(t,e){let n=nT(e);for(const r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}class Mh extends Ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(t){return at(t.integerValue||t.doubleValue)}function nT(t){return yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lu&&i instanceof lu||r instanceof uu&&i instanceof uu?aa(r.elements,i.elements,Tr):r instanceof Mh&&i instanceof Mh?Tr(r.Ae,i.Ae):r instanceof Dh&&i instanceof Dh}(t.transform,e.transform)}class bR{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xd{}function rT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tg(t.key,Zn.none()):new xu(t.key,t.data,Zn.none());{const n=t.data,r=rn.empty();let i=new wt(Rt.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Ji(t.key,r,new fn(i.toArray()),Zn.none())}}function LR(t,e,n){t instanceof xu?function(i,o,l){const h=i.value.clone(),d=Nv(i.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Ji?function(i,o,l){if(!Qc(i.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Nv(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(iT(i)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,r){return t instanceof xu?function(o,l,h,d){if(!Qc(o.precondition,l))return h;const p=o.value.clone(),_=Ov(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ji?function(o,l,h,d){if(!Qc(o.precondition,l))return h;const p=Ov(o.fieldTransforms,d,l),_=l.data;return _.setAll(iT(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,h){return Qc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function NR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Jx(r.transform,i||null);o!=null&&(n===null&&(n=rn.empty()),n.set(r.field,o))}return n||null}function Lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(o,l)=>RR(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends xd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ji extends xd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nv(t,e,n){const r=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,AR(l,h,n[i]))}return r}function Ov(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,kR(o,l,e))}return r}class Tg extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OR extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&LR(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yx();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(i.key)?null:h;const d=rT(l,h);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(n,r)=>Lv(n,r))&&aa(this.baseMutations,e.baseMutations,(n,r)=>Lv(n,r))}}class Ig{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return TR}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Ig(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Re;function FR(t){switch(t){case Z.OK:return pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function sT(t){if(t===void 0)return Qr("GRPC error has no .code"),Z.UNKNOWN;switch(t){case ft.OK:return Z.OK;case ft.CANCELLED:return Z.CANCELLED;case ft.UNKNOWN:return Z.UNKNOWN;case ft.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ft.INTERNAL:return Z.INTERNAL;case ft.UNAVAILABLE:return Z.UNAVAILABLE;case ft.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ft.NOT_FOUND:return Z.NOT_FOUND;case ft.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ft.ABORTED:return Z.ABORTED;case ft.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ft.DATA_LOSS:return Z.DATA_LOSS;default:return pe(39323,{code:t})}}(Re=ft||(ft={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new Mi([4294967295,4294967295],0);function Dv(t){const e=zR().encode(t),n=new wx;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mi([n,r],0),new Mi([i,o],0)]}class Sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(r<0)throw new yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Mi.fromNumber(r)));return i.compare(jR)===1&&(i=new Mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dv(e),[r,i]=Mv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Sg(o,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=Dv(e),[r,i]=Mv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Td(_e.min(),i,new Je(Pe),Yr(),ke())}}class Tu{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tu(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class oT{constructor(e,n){this.targetId=e,this.Ce=n}}class aT{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vv{constructor(){this.ve=0,this.Fe=Fv(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),r=ke();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:o})}}),new Tu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Fv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yr(),this.Je=Rc(),this.He=Rc(),this.Ye=new Je(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Gp(o))if(r===0){const l=new ue(o.path);this.et(n,l,jt.newNoDocument(l,_e.min()))}else Fe(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,h;try{l=Wi(r).toUint8Array()}catch(d){if(d instanceof Lx)return oa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Sg(l,i,o)}catch(d){return oa(d instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Gp(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,jt.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=ke();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Td(e,n,this.Ye,this.je,r);return this.je=Yr(),this.Je=Rc(),this.He=Rc(),this.Ye=new Je(Pe),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wt(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wt(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rc(){return new Je(ue.comparator)}function Fv(){return new Je(ue.comparator)}const UR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WR={and:"AND",or:"OR"};class $R{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qp(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qR(t,e){return Vh(t,e.toTimestamp())}function _r(t){return Fe(!!t,49232),_e.fromTimestamp(function(n){const r=Hi(n);return new qe(r.seconds,r.nanos)}(t))}function Cg(t,e){return Yp(t,e).canonicalString()}function Yp(t,e){const n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uT(t){const e=Ue.fromString(t);return Fe(pT(e),10190,{key:e.toString()}),e}function Xp(t,e){return Cg(t.databaseId,e.path)}function Lf(t,e){const n=uT(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(hT(n))}function cT(t,e){return Cg(t.databaseId,e)}function GR(t){const e=uT(t);return e.length===4?Ue.emptyPath():hT(e)}function Jp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hT(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zv(t,e,n){return{name:Xp(t,e),fields:n.value.mapValue.fields}}function ZR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(Fe(_===void 0||typeof _=="string",58123),Nt.fromBase64String(_||"")):(Fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Nt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?Z.UNKNOWN:sT(p.code);return new ne(_,p.message||"")}(l);n=new aT(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lf(t,r.document.name),o=_r(r.document.updateTime),l=r.document.createTime?_r(r.document.createTime):_e.min(),h=new rn({mapValue:{fields:r.document.fields}}),d=jt.newFoundDocument(i,o,l,h),p=r.targetIds||[],_=r.removedTargetIds||[];n=new Yc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lf(t,r.document),o=r.readTime?_r(r.readTime):_e.min(),l=jt.newNoDocument(i,o),h=r.removedTargetIds||[];n=new Yc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lf(t,r.document),o=r.removedTargetIds||[];n=new Yc([],o,i,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new VR(i,o),h=r.targetId;n=new oT(h,l)}}return n}function KR(t,e){let n;if(e instanceof xu)n={update:zv(t,e.key,e.value)};else if(e instanceof Tg)n={delete:Xp(t,e.key)};else if(e instanceof Ji)n={update:zv(t,e.key,e.data),updateMask:ib(e.fieldMask)};else{if(!(e instanceof OR))return pe(16599,{Vt:e.type});n={verify:Xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof lu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof uu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Mh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw pe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(t,e.precondition)),n}function QR(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(i,o){let l=i.updateTime?_r(i.updateTime):_r(o);return l.isEqual(_e.min())&&(l=_r(o)),new bR(l,i.transformResults||[])}(n,e))):[]}function YR(t,e){return{documents:[cT(t,e.path)]}}function XR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cT(t,i);const o=function(p){if(p.length!==0)return fT(Qn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(E){return{field:Po(E.field),direction:tb(E.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Qp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:i}}function JR(t){let e=GR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fe(r===1,65062);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const E=dT(v);return E instanceof Qn&&Ux(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(E=>function(V){return new au(ko(V.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,_d(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(v){const E=!!v.before,A=v.values||[];return new Oh(A,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,A=v.values||[];return new Oh(A,E)}(n.endAt)),yR(e,i,l,o,h,"F",d,p)}function eb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ko(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ko(n.unaryFilter.field);return mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ko(n.unaryFilter.field);return mt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ko(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>dT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function tb(t){return UR[t]}function nb(t){return HR[t]}function rb(t){return WR[t]}function Po(t){return{fieldPath:t.canonicalString()}}function ko(t){return Rt.fromServerFormat(t.fieldPath)}function fT(t){return t instanceof mt?function(n){if(n.op==="=="){if(Cv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(n.field),op:nb(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const r=n.getFilters().map(i=>fT(i));return r.length===1?r[0]:{compositeFilter:{op:rb(n.op),filters:r}}}(t):pe(54877,{filter:t})}function ib(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r,i,o=_e.min(),l=_e.min(),h=Nt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.yt=e}}function ob(t){const e=JR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.Cn=new lb}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ui.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class lb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wt(Ue.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mT=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(mT,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ca(0)}static cr(){return new ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="LruGarbageCollector",ub=1048576;function Uv([t,e],[n,r]){const i=Pe(t,n);return i===0?Pe(e,r):i}class cb{constructor(e){this.Ir=e,this.buffer=new wt(Uv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Uv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(Bv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){va(n)?ie(Bv,"Ignoring IndexedDB error during garbage collection: ",n):await ya(n)}await this.Vr(3e5)})}}class db{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(gd.ce);const r=new cb(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(jv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,l,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),So()<=Ce.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}}function fb(t,e){return new db(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nl(r.mutation,i,fn.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=Ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=_l();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let o=Yr();const l=Ll(),h=function(){return Ll()}();return n.forEach((d,p)=>{const _=r.get(p.key);i.has(p.key)&&(_===void 0||_.mutation instanceof Ji)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Nl(_.mutation,p,_.mutation.getFieldMask(),qe.now())):l.set(p.key,fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>h.set(p,new mb(_,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Ll();let i=new Je((l,h)=>l-h),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=r.get(d)||fn.empty();_=h.applyToLocalView(p,_),r.set(d,_);const v=(i.get(h.batchId)||ke()).add(d);i=i.insert(h.batchId,v)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,v=Yx();_.forEach(E=>{if(!o.has(E)){const A=rT(n.get(E),r.get(E));A!==null&&v.set(E,A),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return K.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return ue.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):K.resolve(Ts());let h=ru,d=o;return l.next(p=>K.forEach(p,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?K.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{d=d.insert(_,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,ke())).next(_=>({batchId:h,changes:Qx(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=_l();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=_l();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(v,E){return new wa(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(_=>{_.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,jt.newInvalidDocument(_)))});let h=_l();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Nl(_.mutation,p,fn.empty(),qe.now()),wd(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_r(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ob(i.bundledQuery),readTime:_r(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.overlays=new Je(ue.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return K.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Ts(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Je((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let _=o.get(p.largestBatchId);_===null&&(_=Ts(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Ts(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=i)););return K.resolve(h)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new MR(n,r));let o=this.qr.get(n);o===void 0&&(o=ke(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Qr=new wt(St.$r),this.Ur=new wt(St.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new St(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new St(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new Ue([])),r=new St(n,e),i=new St(n,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new Ue([])),r=new St(n,e),i=new St(n,e+1);let o=ke();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new St(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class St{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wt(St.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new DR(o,n,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new St(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?gg:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new St(n,0),i=new St(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const h=this.Xr(l.Yr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(Pe);return n.forEach(i=>{const o=new St(i,0),l=new St(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ue.isDocumentKey(o)||(o=o.child(""));const l=new St(new ue(o),0);let h=new wt(Pe);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(h=h.add(d.Yr)),!0)},l),K.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,i=>{const o=new St(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new St(n,0),i=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.ri=e,this.docs=function(){return new Je(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Yr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Yr();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||QA(KA(_),r)<=0||(i.has(_.key)||wd(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,r,i){pe(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xb(this)}getSize(e){return K.resolve(this.size)}}class xb extends pb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.persistence=e,this.si=new Ws(n=>vg(n),wg),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=ca.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.ui={},this.overlays={},this.ci=new gd(0),this.li=!1,this.li=!0,this.hi=new vb,this.referenceDelegate=e(this),this.Pi=new Tb(this),this.indexManager=new ab,this.remoteDocumentCache=function(i){return new Eb(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new sb(n),this.Ii=new _b(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new wb(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new Ib(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Ib extends XA{constructor(e){super(),this.currentSequenceNumber=e}}class kg{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new kg(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const i=ue.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fh{constructor(e,n){this.persistence=e,this.pi=new Ws(r=>tR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=fb(this,n)}static mi(e,n){return new Fh(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?K.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zc(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ke(),i=ke();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ag(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vk()?8:JA(Ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Sb;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(So()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(So()<=Ce.DEBUG&&ie("QueryEngine","Query:",Co(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(So()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):K.resolve())}ys(e,n){if(Rv(n))return K.resolve(null);let r=gr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kp(n,null,"F"),r=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ke(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Kp(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,r,i){return Rv(n)||i.isEqual(_e.min())?K.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,i)?K.resolve(null):(So()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(n)),this.vs(e,l,n,ZA(i,ru)).next(h=>h))})}Ds(e,n){let r=new wt(Zx(e));return n.forEach((i,o)=>{wd(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return So()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Co(n)),this.ps.getDocumentsMatchingQuery(e,n,Ui.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="LocalStore",Pb=3e8;class kb{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Je(Pe),this.xs=new Ws(o=>vg(o),wg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ab(t,e,n,r){return new kb(t,e,n,r)}async function _T(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let d=ke();for(const p of i){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(r,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function Rb(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const v=p.batch,E=v.keys();let A=K.resolve();return E.forEach(V=>{A=A.next(()=>_.getEntry(d,V)).next(F=>{const z=p.docVersions.get(V);Fe(z!==null,48541),F.version.compareTo(z)<0&&(v.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=ke();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yT(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function bb(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach((_,v)=>{const E=i.get(v);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,_.addedDocuments,v)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(Nt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),i=i.insert(v,A),function(F,z,N){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=Pb?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(E,A,_)&&h.push(n.Pi.updateTargetData(o,A))});let d=Yr(),p=ke();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(Lb(o,l,e.documentUpdates).next(_=>{d=_.ks,p=_.qs})),!r.isEqual(_e.min())){const _=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=i,o))}function Lb(t,e,n){let r=ke(),i=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Yr();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(h)),d.isNoDocument()&&d.version.isEqual(_e.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie(Rg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:i}})}function Nb(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ob(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):n.Pi.allocateTargetId(r).next(l=>(i=new Si(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function em(t,e,n){const r=ye(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!va(l))throw l;ie(Rg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Hv(t,e,n){const r=ye(t);let i=_e.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const v=ye(d),E=v.xs.get(_);return E!==void 0?K.resolve(v.Ms.get(E)):v.Pi.getTargetData(p,_)}(r,l,gr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?i:_e.min(),n?o:ke())).next(h=>(Db(r,wR(e),h),{documents:h,Qs:o})))}function Db(t,e,n){let r=t.Os.get(e)||_e.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Wv{constructor(){this.activeTargetIds=CR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mb{constructor(){this.Mo=new Wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="ConnectivityMonitor";class qv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie($v,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie($v,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function tm(){return bc===null?bc=function(){return 268435456+Math.round(2147483648*Math.random())}():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="RestConnection",Fb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Lh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const l=tm(),h=this.zo(e,n.toUriEncodedString());ie(Nf,`Sending RPC '${e}' ${l}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,o);const{host:p}=new URL(h),_=Yi(p);return this.Jo(e,h,d,r,_).then(v=>(ie(Nf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw oa(Nf,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}Ho(e,n,r,i,o,l){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_a}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=Fb[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class Bb extends zb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const l=tm();return new Promise((h,d)=>{const p=new Ex;p.setWithCredentials(!0),p.listenOnce(xx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Gc.NO_ERROR:const v=p.getResponseJson();ie(Vt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Gc.TIMEOUT:ie(Vt,`RPC '${e}' ${l} timed out`),d(new ne(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const E=p.getStatus();if(ie(Vt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const F=function(N){const T=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(T)>=0?T:Z.UNKNOWN}(V.status);d(new ne(F,V.message))}else d(new ne(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ne(Z.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ie(Vt,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(i);ie(Vt,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",_,r,15)})}T_(e,n,r){const i=tm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Sx(),h=Ix(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const _=o.join("");ie(Vt,`Creating RPC '${e}' stream ${i}: ${_}`,d);const v=l.createWebChannel(_,d);this.I_(v);let E=!1,A=!1;const V=new jb({Yo:z=>{A?ie(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(E||(ie(Vt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),E=!0),ie(Vt,`RPC '${e}' stream ${i} sending:`,z),v.send(z))},Zo:()=>v.close()}),F=(z,N,T)=>{z.listen(N,k=>{try{T(k)}catch(j){setTimeout(()=>{throw j},0)}})};return F(v,gl.EventType.OPEN,()=>{A||(ie(Vt,`RPC '${e}' stream ${i} transport opened.`),V.o_())}),F(v,gl.EventType.CLOSE,()=>{A||(A=!0,ie(Vt,`RPC '${e}' stream ${i} transport closed`),V.a_(),this.E_(v))}),F(v,gl.EventType.ERROR,z=>{A||(A=!0,oa(Vt,`RPC '${e}' stream ${i} transport errored. Name:`,z.name,"Message:",z.message),V.a_(new ne(Z.UNAVAILABLE,"The operation could not be completed")))}),F(v,gl.EventType.MESSAGE,z=>{var N;if(!A){const T=z.data[0];Fe(!!T,16349);const k=T,j=(k==null?void 0:k.error)||((N=k[0])==null?void 0:N.error);if(j){ie(Vt,`RPC '${e}' stream ${i} received error:`,j);const G=j.status;let J=function(I){const O=ft[I];if(O!==void 0)return sT(O)}(G),b=j.message;J===void 0&&(J=Z.INTERNAL,b="Unknown error status: "+G+" with message "+j.message),A=!0,V.a_(new ne(J,b)),v.close()}else ie(Vt,`RPC '${e}' stream ${i} received:`,T),V.u_(T)}}),F(h,Tx.STAT_EVENT,z=>{z.stat===Up.PROXY?ie(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):z.stat===Up.NOPROXY&&ie(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.__()},0),V}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return new $R(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class wT{constructor(e,n,r,i,o,l,h,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ne(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(Gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ub extends wT{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZR(this.serializer,e),r=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?_r(l.readTime):_e.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Jp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Gp(d)?{documents:YR(o,d)}:{query:XR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=lT(o,l.resumeToken);const p=Qp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(_e.min())>0){h.readTime=Vh(o,l.snapshotVersion.toTimestamp());const p=Qp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=eb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Jp(this.serializer),n.removeTarget=e,this.q_(n)}}class Hb extends wT{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QR(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{}class $b extends Wb{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ne(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Yp(n,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(Z.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Yp(n,r),i,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(Z.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class Gb{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{$s(this)&&(ie(Vs,"Restarting streams for network reachability change."),await async function(d){const p=ye(d);p.Ea.add(4),await Iu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Sd(p)}(this))})}),this.Ra=new qb(r,i)}}async function Sd(t){if($s(t))for(const e of t.da)await e(!0)}async function Iu(t){for(const e of t.da)await e(!1)}function ET(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Og(n)?Ng(n):Ea(n).O_()&&Lg(n,e))}function bg(t,e){const n=ye(t),r=Ea(n);n.Ia.delete(e),r.O_()&&xT(n,e),n.Ia.size===0&&(r.O_()?r.L_():$s(n)&&n.Ra.set("Unknown"))}function Lg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).Y_(e)}function xT(t,e){t.Va.Ue(e),Ea(t).Z_(e)}function Ng(t){t.Va=new BR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.Ra.ua()}function Og(t){return $s(t)&&!Ea(t).x_()&&t.Ia.size>0}function $s(t){return ye(t).Ea.size===0}function TT(t){t.Va=void 0}async function Zb(t){t.Ra.set("Online")}async function Kb(t){t.Ia.forEach((e,n)=>{Lg(t,e)})}async function Qb(t,e){TT(t),Og(t)?(t.Ra.ha(e),Ng(t)):t.Ra.set("Unknown")}async function Yb(t,e,n){if(t.Ra.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))}(t,e)}catch(r){ie(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zh(t,r)}else if(e instanceof Yc?t.Va.Ze(e):e instanceof oT?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const r=await yT(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(Nt.EMPTY_BYTE_STRING,_.snapshotVersion)),xT(o,d);const v=new Si(_.target,d,p,_.sequenceNumber);Lg(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ie(Vs,"Failed to raise snapshot:",r),await zh(t,r)}}async function zh(t,e,n){if(!va(e))throw e;t.Ea.add(1),await Iu(t),t.Ra.set("Offline"),n||(n=()=>yT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Vs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Sd(t)})}function IT(t,e){return e().catch(n=>zh(t,n,e))}async function Cd(t){const e=ye(t),n=qi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gg;for(;Xb(e);)try{const i=await Nb(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Jb(e,i)}catch(i){await zh(e,i)}ST(e)&&CT(e)}function Xb(t){return $s(t)&&t.Ta.length<10}function Jb(t,e){t.Ta.push(e);const n=qi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ST(t){return $s(t)&&!qi(t).x_()&&t.Ta.length>0}function CT(t){qi(t).start()}async function e2(t){qi(t).ra()}async function t2(t){const e=qi(t);for(const n of t.Ta)e.ea(n.mutations)}async function n2(t,e,n){const r=t.Ta.shift(),i=Ig.from(r,e,n);await IT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cd(t)}async function r2(t,e){e&&qi(t).X_&&await async function(r,i){if(function(l){return FR(l)&&l!==Z.ABORTED}(i.code)){const o=r.Ta.shift();qi(r).B_(),await IT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Cd(r)}}(t,e),ST(t)&&CT(t)}async function Zv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(Vs,"RemoteStore received new credentials");const r=$s(n);n.Ea.add(3),await Iu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sd(n)}async function i2(t,e){const n=ye(t);e?(n.Ea.delete(2),await Sd(n)):e||(n.Ea.add(2),await Iu(n),n.Ra.set("Unknown"))}function Ea(t){return t.ma||(t.ma=function(n,r,i){const o=ye(n);return o.sa(),new Ub(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Zb.bind(null,t),t_:Kb.bind(null,t),r_:Qb.bind(null,t),H_:Yb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Og(t)?Ng(t):t.Ra.set("Unknown")):(await t.ma.stop(),TT(t))})),t.ma}function qi(t){return t.fa||(t.fa=function(n,r,i){const o=ye(n);return o.sa(),new Hb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:e2.bind(null,t),r_:r2.bind(null,t),ta:t2.bind(null,t),na:n2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Cd(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(Vs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,h=new Dg(e,n,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mg(t,e){if(Qr("AsyncQueue",`${e}: ${t}`),va(t))return new ne(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=_l(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.ga=new Je(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ha{constructor(e,n,r,i,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ha(e,n,Zo.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class o2{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ye(n),o=i.queries;i.queries=Qv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(r)})})(this,new ne(Z.ABORTED,"Firestore shutting down"))}}function Qv(){return new Ws(t=>Gx(t),vd)}async function PT(t,e){const n=ye(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new s2,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const h=Mg(l,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Vg(n)}async function kT(t,e){const n=ye(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a2(t,e){const n=ye(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&Vg(n)}function l2(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function Vg(t){t.Ca.forEach(e=>{e.next()})}var nm,Yv;(Yv=nm||(nm={})).Ma="default",Yv.Cache="cache";class AT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.key=e}}class bT{constructor(e){this.key=e}}class u2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=Zx(e),this.tu=new Zo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Kv,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,v)=>{const E=i.get(_),A=wd(this.query,v)?v:null,V=!!E&&this.mutatedKeys.has(E.key),F=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let z=!1;E&&A?E.data.isEqual(A.data)?V!==F&&(r.track({type:3,doc:A}),z=!0):this.su(E,A)||(r.track({type:2,doc:A}),z=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!E&&A?(r.track({type:0,doc:A}),z=!0):E&&!A&&(r.track({type:1,doc:E}),z=!0,(d||p)&&(h=!0)),z&&(A?(l=l.add(A),o=F?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((_,v)=>function(A,V){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:z})}};return F(A)-F(V)}(_.type,v.type)||this.eu(_.doc,v.doc)),this.ou(r),i=i??!1;const h=n&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new ha(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new bT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new RT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ha.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fg="SyncEngine";class c2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h2{constructor(e){this.key=e,this.hu=!1}}class d2{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ws(h=>Gx(h),vd),this.Iu=new Map,this.Eu=new Set,this.du=new Je(ue.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function f2(t,e,n=!0){const r=VT(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await LT(r,e,n,!0),i}async function p2(t,e){const n=VT(t);await LT(n,e,!0,!1)}async function LT(t,e,n,r){const i=await Ob(t.localStore,gr(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await m2(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&ET(t.remoteStore,i),h}async function m2(t,e,n,r,i){t.pu=(v,E,A)=>async function(F,z,N,T){let k=z.view.ru(N);k.Cs&&(k=await Hv(F.localStore,z.query,!1).then(({documents:b})=>z.view.ru(b,k)));const j=T&&T.targetChanges.get(z.targetId),G=T&&T.targetMismatches.get(z.targetId)!=null,J=z.view.applyChanges(k,F.isPrimaryClient,j,G);return Jv(F,z.targetId,J.au),J.snapshot}(t,v,E,A);const o=await Hv(t.localStore,e,!0),l=new u2(e,o.Qs),h=l.ru(o.documents),d=Tu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(h,t.isPrimaryClient,d);Jv(t,n,p.au);const _=new c2(e,n,l);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function g2(t,e,n){const r=ye(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!vd(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await em(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bg(r.remoteStore,i.targetId),rm(r,i.targetId)}).catch(ya)):(rm(r,i.targetId),await em(r.localStore,i.targetId,!0))}async function _2(t,e){const n=ye(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bg(n.remoteStore,r.targetId))}async function y2(t,e,n){const r=S2(t);try{const i=await function(l,h){const d=ye(l),p=qe.now(),_=h.reduce((A,V)=>A.add(V.key),ke());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let V=Yr(),F=ke();return d.Ns.getEntries(A,_).next(z=>{V=z,V.forEach((N,T)=>{T.isValidDocument()||(F=F.add(N))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,V)).next(z=>{v=z;const N=[];for(const T of h){const k=NR(T,v.get(T.key).overlayedDocument);k!=null&&N.push(new Ji(T.key,k,zx(k.value.mapValue),Zn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,N,h)}).next(z=>{E=z;const N=z.applyToLocalDocumentSet(v,F);return d.documentOverlayCache.saveOverlays(A,z.batchId,N)})}).then(()=>({batchId:E.batchId,changes:Qx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Je(Pe)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(r,i.batchId,n),await Su(r,i.changes),await Cd(r.remoteStore)}catch(i){const o=Mg(i,"Failed to persist write");n.reject(o)}}async function NT(t,e){const n=ye(t);try{const r=await bb(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Au.get(o);l&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Fe(l.hu,14607):i.removedDocuments.size>0&&(Fe(l.hu,42227),l.hu=!1))}),await Su(n,r,e)}catch(r){await ya(r)}}function Xv(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(l,h){const d=ye(l);d.onlineState=h;let p=!1;d.queries.forEach((_,v)=>{for(const E of v.Sa)E.va(h)&&(p=!0)}),p&&Vg(d)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function v2(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new Je(ue.comparator);l=l.insert(o,jt.newNoDocument(o,_e.min()));const h=ke().add(o),d=new Td(_e.min(),new Map,new Je(Pe),l,h);await NT(r,d),r.du=r.du.remove(o),r.Au.delete(e),zg(r)}else await em(r.localStore,e,!1).then(()=>rm(r,e,n)).catch(ya)}async function w2(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await Rb(n.localStore,e);DT(n,r,null),OT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Su(n,i)}catch(i){await ya(i)}}async function E2(t,e,n){const r=ye(t);try{const i=await function(l,h){const d=ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Fe(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(r.localStore,e);DT(r,e,n),OT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Su(r,i)}catch(i){await ya(i)}}function OT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function DT(t,e,n){const r=ye(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function rm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||MT(t,r)})}function MT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zg(t))}function Jv(t,e,n){for(const r of n)r instanceof RT?(t.Ru.addReference(r.key,e),x2(t,r)):r instanceof bT?(ie(Fg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||MT(t,r.key)):pe(19791,{wu:r})}function x2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(Fg,"New document in limbo: "+n),t.Eu.add(r),zg(t))}function zg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(Ue.fromString(e)),r=t.fu.next();t.Au.set(r,new h2(n)),t.du=t.du.insert(n,r),ET(t.remoteStore,new Si(gr(Eg(n.path)),r,"TargetPurposeLimboResolution",gd.ce))}}async function Su(t,e,n){const r=ye(t),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,d)=>{l.push(r.pu(d,e,n).then(p=>{var _;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){i.push(p);const v=Ag.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(d,p){const _=ye(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>K.forEach(p,E=>K.forEach(E.Es,A=>_.persistence.referenceDelegate.addReference(v,E.targetId,A)).next(()=>K.forEach(E.ds,A=>_.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))}catch(v){if(!va(v))throw v;ie(Rg,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const A=_.Ms.get(E),V=A.snapshotVersion,F=A.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(E,F)}}}(r.localStore,o))}async function T2(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(Fg,"User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne(Z.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(n,r.Ls)}}function I2(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let i=ke();const o=n.Iu.get(e);if(!o)return i;for(const l of o){const h=n.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}function VT(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v2.bind(null,e),e.Pu.H_=a2.bind(null,e.eventManager),e.Pu.yu=l2.bind(null,e.eventManager),e}function S2(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E2.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ab(this.persistence,new Cb,e.initialUser,this.serializer)}Cu(e){return new gT(kg.mi,this.serializer)}Du(e){return new Mb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class C2 extends jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof Fh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new gT(r=>Fh.mi(r,n),this.serializer)}}class im{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T2.bind(null,this.syncEngine),await i2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o2}()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),r=function(o){return new Bb(o)}(e.databaseInfo);return function(o,l,h,d){return new $b(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,l,h){return new Gb(r,i,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return qv.v()?new qv:new Vb}())}createSyncEngine(e,n){return function(i,o,l,h,d,p,_){const v=new d2(i,o,l,h,d,p);return _&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ye(i);ie(Vs,"RemoteStore shutting down."),o.Ea.add(5),await Iu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}im.provider={build:()=>new im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="FirestoreClient";class P2{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ie(Gi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ie(Gi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Df(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Gi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _T(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await k2(t);ie(Gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Zv(e.remoteStore,i)),t._onlineComponents=e}async function k2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Gi,"Using user provided OfflineComponentProvider");try{await Df(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await Df(t,new jh)}}else ie(Gi,"Using default OfflineComponentProvider"),await Df(t,new C2(void 0));return t._offlineComponents}async function zT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Gi,"Using user provided OnlineComponentProvider"),await e0(t,t._uninitializedComponentsProvider._online)):(ie(Gi,"Using default OnlineComponentProvider"),await e0(t,new im))),t._onlineComponents}function A2(t){return zT(t).then(e=>e.syncEngine)}async function jT(t){const e=await zT(t),n=e.eventManager;return n.onListen=f2.bind(null,e.syncEngine),n.onUnlisten=g2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=p2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_2.bind(null,e.syncEngine),n}function R2(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new FT({next:E=>{_.Nu(),l.enqueueAndForget(()=>kT(o,v));const A=E.docs.has(h);!A&&E.fromCache?p.reject(new ne(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new ne(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new AT(Eg(h.path),_,{includeMetadataChanges:!0,qa:!0});return PT(o,v)}(await jT(t),t.asyncQueue,e,n,r)),r.promise}function b2(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new FT({next:E=>{_.Nu(),l.enqueueAndForget(()=>kT(o,v)),E.fromCache&&d.source==="server"?p.reject(new ne(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new AT(h,_,{includeMetadataChanges:!0,qa:!0});return PT(o,v)}(await jT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firestore.googleapis.com",n0=!0;class r0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=n0}else this.host=e.host,this.ssl=e.ssl??n0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ub)throw new ne(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VA;switch(r.type){case"firstParty":return new BA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t0.get(n);r&&(ie("ComponentProvider","Removing Datastore"),t0.delete(n),r.terminate())}(this),Promise.resolve()}}function L2(t,e,n,r={}){var p;t=xr(t,Pd);const i=Yi(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(ug(`https://${h}`),cg("Firestore",!0)),o.host!==UT&&o.host!==h&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:i,emulatorOptions:r};if(!Os(d,l)&&(t._setSettings(d),r.mockUserToken)){let _,v;if(typeof r.mockUserToken=="string")_=r.mockUserToken,v=Ft.MOCK_USER;else{_=px(r.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ne(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ft(E)}t._authCredentials=new FA(new Px(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Eu(n,ut._jsonSchema))return new ut(e,r||null,new ue(Ue.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:gt("string",ut._jsonSchemaVersion),referencePath:gt("string")};class Vi extends qs{constructor(e,n,r){super(e,n,Eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new ue(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function cr(t,e,...n){if(t=rt(t),kx("collection","path",e),t instanceof Pd){const r=Ue.fromString(e,...n);return gv(r),new Vi(t,null,r)}{if(!(t instanceof ut||t instanceof Vi))throw new ne(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return gv(r),new Vi(t.firestore,null,r)}}function Rn(t,e,...n){if(t=rt(t),arguments.length===1&&(e=mg.newId()),kx("doc","path",e),t instanceof Pd){const r=Ue.fromString(e,...n);return mv(r),new ut(t,null,new ue(r))}{if(!(t instanceof ut||t instanceof Vi))throw new ne(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return mv(r),new ut(t.firestore,t instanceof Vi?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="AsyncQueue";class s0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vT(this,"async_queue_retry"),this._c=()=>{const r=Of();r&&ie(i0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ie(i0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qr("INTERNAL UNHANDLED ERROR: ",o0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Dg.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&pe(47125,{Pc:o0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function o0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class xa extends Pd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new s0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function N2(t,e){const n=typeof t=="object"?t:fg(),r=typeof t=="string"?t:Lh,i=pd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=hx("firestore");o&&L2(i,...o)}return i}function jg(t){if(t._terminated)throw new ne(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O2(t),t._firestoreClient}function O2(t){var r,i,o;const e=t._freezeSettings(),n=function(h,d,p,_){return new iR(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,BT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new P2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Nt.fromBase64String(e))}catch(n){throw new ne(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:gt("string",bn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:gt("string",yr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vr(e.vectorValues);throw new ne(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:gt("string",vr._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class M2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class HT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class Ug{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WT(this.Ac)&&D2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Id(e)}Cc(e,n,r,i=!1){return new Ug({Ac:e,methodName:n,Dc:r,path:Rt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hg(t){const e=t._freezeSettings(),n=Id(t._databaseId);return new V2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function F2(t,e,n,r,i,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Wg("Data must be an object, but it was:",l,r);const h=$T(r,l);let d,p;if(o.merge)d=new fn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const E=sm(e,v,n);if(!l.contains(E))throw new ne(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);GT(_,E)||_.push(E)}d=new fn(_),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new M2(new rn(h),d,p)}class Ad extends Bg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function z2(t,e,n,r){const i=t.Cc(1,e,n);Wg("Data must be an object, but it was:",i,r);const o=[],l=rn.empty();Xi(r,(d,p)=>{const _=$g(e,d,n);p=rt(p);const v=i.yc(_);if(p instanceof Ad)o.push(_);else{const E=Cu(p,v);E!=null&&(o.push(_),l.set(_,E))}});const h=new fn(o);return new HT(l,h,i.fieldTransforms)}function j2(t,e,n,r,i,o){const l=t.Cc(1,e,n),h=[sm(e,r,n)],d=[i];if(o.length%2!=0)throw new ne(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(sm(e,o[E])),d.push(o[E+1]);const p=[],_=rn.empty();for(let E=h.length-1;E>=0;--E)if(!GT(p,h[E])){const A=h[E];let V=d[E];V=rt(V);const F=l.yc(A);if(V instanceof Ad)p.push(A);else{const z=Cu(V,F);z!=null&&(p.push(A),_.set(A,z))}}const v=new fn(p);return new HT(_,v,l.fieldTransforms)}function B2(t,e,n,r=!1){return Cu(n,t.Cc(r?4:3,e))}function Cu(t,e){if(qT(t=rt(t)))return Wg("Unsupported field value:",e,t),$T(t,e);if(t instanceof Bg)return function(r,i){if(!WT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const h of r){let d=Cu(h,i.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=qe.fromDate(r);return{timestampValue:Vh(i.serializer,o)}}if(r instanceof qe){const o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vh(i.serializer,o)}}if(r instanceof yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bn)return{bytesValue:lT(i.serializer,r._byteString)};if(r instanceof ut){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vr)return function(l,h){return{mapValue:{fields:{[Vx]:{stringValue:Fx},[Nh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return xg(h.serializer,p)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${md(r)}`)}(t,e)}function $T(t,e){const n={};return bx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(r,i)=>{const o=Cu(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function qT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof yr||t instanceof bn||t instanceof ut||t instanceof Bg||t instanceof vr)}function Wg(t,e,n){if(!qT(n)||!Ax(n)){const r=md(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function sm(t,e,n){if((e=rt(e))instanceof kd)return e._internalPath;if(typeof e=="string")return $g(t,e);throw Bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const U2=new RegExp("[~\\*/\\[\\]]");function $g(t,e,n){if(e.search(U2)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kd(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bh(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new ne(Z.INVALID_ARGUMENT,h+t+d)}function GT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H2 extends ZT{data(){return super.data()}}function Rd(t,e){return typeof e=="string"?$g(t,e):e instanceof kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class KT extends qg{}function Xc(t,e,...n){let r=[];e instanceof qg&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof Gg).length,h=o.filter(d=>d instanceof bd).length;if(l>1||l>0&&h>0)throw new ne(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bd extends KT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bd(e,n,r)}_apply(e){const n=this._parse(e);return QT(e._query,n),new qs(e.firestore,e.converter,Zp(e._query,n))}_parse(e){const n=Hg(e.firestore);return function(o,l,h,d,p,_,v){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){l0(v,_);const V=[];for(const F of v)V.push(a0(d,o,F));E={arrayValue:{values:V}}}else E=a0(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||l0(v,_),E=B2(h,l,v,_==="in"||_==="not-in");return mt.create(p,_,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jc(t,e,n){const r=e,i=Rd("where",t);return bd._create(i,r,n)}class Gg extends qg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const h=o.getFlattenedFilters();for(const d of h)QT(l,d),l=Zp(l,d)}(e._query,n),new qs(e.firestore,e.converter,Zp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zg extends KT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zg(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new ne(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(o,l)}(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new wa(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function $2(t,e="asc"){const n=e,r=Rd("orderBy",t);return Zg._create(r,n)}function a0(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new ne(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qx(e)&&n.indexOf("/")!==-1)throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!ue.isDocumentKey(r))throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iv(t,new ue(r))}if(n instanceof ut)return Iv(t,n._key);throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(n)}.`)}function l0(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(t,e){const n=function(i,o){for(const l of i)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class q2{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Nh].arrayValue)==null?void 0:i.values)==null?void 0:o.map(l=>at(l.doubleValue));return new vr(n)}convertGeoPoint(e){return new yr(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Fe(pT(r),9688,{name:e});const i=new su(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return i.isEqual(n)||Qr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends ZT{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:gt("string",Ps._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class eh extends Ps{data(e={}){return super.data(e)}}class Ko{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new eh(this._firestore,this._userDataWriter,r.key,r,new vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(h=>{const d=new eh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new vl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new eh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new vl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:Z2(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){t=xr(t,ut);const e=xr(t.firestore,xa);return R2(jg(e),t._key).then(n=>K2(e,t,n))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:gt("string",Ko._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class YT extends q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function hr(t){t=xr(t,qs);const e=xr(t.firestore,xa),n=jg(e),r=new YT(e);return W2(t._query),b2(n,t._query).then(i=>new Ko(e,r,t,i))}function Qg(t,e,n){t=xr(t,ut);const r=xr(t.firestore,xa),i=G2(t.converter,e);return Yg(r,[F2(Hg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function cu(t,e,n,...r){t=xr(t,ut);const i=xr(t.firestore,xa),o=Hg(i);let l;return l=typeof(e=rt(e))=="string"||e instanceof kd?j2(o,"updateDoc",t._key,e,n,r):z2(o,"updateDoc",t._key,e),Yg(i,[l.toMutation(t._key,Zn.exists(!0))])}function Mf(t){return Yg(xr(t.firestore,xa),[new Tg(t._key,Zn.none())])}function Yg(t,e){return function(r,i){const o=new Wr;return r.asyncQueue.enqueueAndForget(async()=>y2(await A2(r),i,o)),o.promise}(jg(t),e)}function K2(t,e,n){const r=n.docs.get(e._key),i=new YT(t);return new Ps(t,i,e._key,r,new vl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){_a=i})(Hs),Ds(new Bi("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new xa(new zA(r.getProvider("auth-internal")),new UA(l,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(p.options.projectId,_)}(l,i),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),mr(hv,dv,e),mr(hv,dv,"esm2020")})();function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q2=XT,JT=new vu("auth","Firebase",XT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new hg("@firebase/auth");function Y2(t,...e){Uh.logLevel<=Ce.WARN&&Uh.warn(`Auth (${Hs}): ${t}`,...e)}function th(t,...e){Uh.logLevel<=Ce.ERROR&&Uh.error(`Auth (${Hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Xg(t,...e)}function wr(t,...e){return Xg(t,...e)}function e1(t,e,n){const r={...Q2(),[e]:n};return new vu("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return e1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JT.create(t,...e)}function fe(t,e,...n){if(!t)throw Xg(e,...n)}function Br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Xr(t,e){t||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function X2(){return u0()==="http:"||u0()==="https:"}function u0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X2()||gk()||"connection"in navigator)?navigator.onLine:!0}function eL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xr(n>e,"Short delay should be less than long delay!"),this.isMobile=fk()||_k()}get(){return J2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e){Xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rL=new Pu(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function es(t,e,n,r,i={}){return n1(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=wu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return mk()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(p.credentials="include"),t1.fetch()(await r1(t,t.config.apiHost,n,h),p)})}async function n1(t,e,n){t._canInitEmulator=!1;const r={...tL,...e};try{const i=new sL(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Lc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Lc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Lc(t,"user-disabled",l);const _=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw e1(t,_,p);Yn(t,_)}}catch(i){if(i instanceof Ir)throw i;Yn(t,"network-request-failed",{message:String(i)})}}async function Ld(t,e,n,r,i={}){const o=await es(t,e,n,r,i);return"mfaPendingCredential"in o&&Yn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function r1(t,e,n,r){const i=`${e}${n}?${r}`,o=t,l=o.config.emulator?Jg(t.config,i):`${t.config.apiScheme}://${i}`;return nL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function iL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wr(this.auth,"network-request-failed")),rL.get())})}}function Lc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wr(t,e,r);return i.customData._tokenResponse=n,i}function c0(t){return t!==void 0&&t.enterprise!==void 0}class oL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aL(t,e){return es(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e){return es(t,"POST","/v1/accounts:delete",e)}async function Hh(t,e){return es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uL(t,e=!1){const n=rt(t),r=await n.getIdToken(e),i=e_(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ol(Vf(i.auth_time)),issuedAtTime:Ol(Vf(i.iat)),expirationTime:Ol(Vf(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vf(t){return Number(t)*1e3}function e_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const i=ux(n);return i?JSON.parse(i):(th("Failed to decode base64 JWT payload"),null)}catch(i){return th("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function h0(t){const e=e_(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ir&&cL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var v;const e=t.auth,n=await t.getIdToken(),r=await hu(t,Hh(e,{idToken:n}));fe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(v=i.providerUserInfo)!=null&&v.length?i1(i.providerUserInfo):[],l=fL(t.providerData,o),h=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new am(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function dL(t){const e=rt(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function i1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e){const n=await n1(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await r1(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(d.credentials="include"),t1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mL(t,e){return es(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await pL(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new Qo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new hL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new am(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uL(this,e)}reload(){return dL(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await hu(this,lL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:A,providerData:V,stsTokenManager:F}=n;fe(v&&F,e,"internal-error");const z=Qo.fromJSON(this.name,F);fe(typeof v=="string",e,"internal-error"),di(r,e.name),di(i,e.name),fe(typeof E=="boolean",e,"internal-error"),fe(typeof A=="boolean",e,"internal-error"),di(o,e.name),di(l,e.name),di(h,e.name),di(d,e.name),di(p,e.name),di(_,e.name);const N=new $n({uid:v,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:A,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:_});return V&&Array.isArray(V)&&(N.providerData=V.map(T=>({...T}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qo;i.updateFromServerResponse(n);const o=new $n({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];fe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?i1(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new Qo;h.updateFromIdToken(r);const d=new $n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new am(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map;function Ur(t){Xr(t instanceof Function,"Expected a class definition");let e=d0.get(t);return e?(Xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}s1.type="NONE";const f0=s1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e,n){return`firebase:${t}:${e}:${n}`}class Yo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=nh(this.userKey,i.apiKey,o),this.fullPersistenceKey=nh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?$n._fromGetAccountInfoResponse(this.auth,n,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yo(Ur(f0),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ur(f0);const l=nh(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let v;if(typeof _=="string"){const E=await Hh(e,{idToken:_}).catch(()=>{});if(!E)break;v=await $n._fromGetAccountInfoResponse(e,E,_)}else v=$n._fromJSON(e,_);p!==o&&(h=v),o=p;break}}catch{}const d=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Yo(o,e,r):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Yo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h1(e))return"Blackberry";if(d1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||l1(e))&&!e.includes("edge/"))return"Chrome";if(c1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function o1(t=Ut()){return/firefox\//i.test(t)}function a1(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l1(t=Ut()){return/crios\//i.test(t)}function u1(t=Ut()){return/iemobile/i.test(t)}function c1(t=Ut()){return/android/i.test(t)}function h1(t=Ut()){return/blackberry/i.test(t)}function d1(t=Ut()){return/webos/i.test(t)}function t_(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gL(t=Ut()){var e;return t_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function _L(){return yk()&&document.documentMode===10}function f1(t=Ut()){return t_(t)||c1(t)||d1(t)||h1(t)||/windows phone/i.test(t)||u1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e=[]){let n;switch(t){case"Browser":n=p0(Ut());break;case"Worker":n=`${p0(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e={}){return es(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=6;class EL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m0(this),this.idTokenSubscription=new m0(this),this.beforeStateQueue=new yL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),r=await $n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(An(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Fi(this));const n=e?rt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vL(this),n=new EL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Y2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ta(t){return rt(t)}class m0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ck(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TL(t){Nd=t}function m1(t){return Nd.loadJS(t)}function IL(){return Nd.recaptchaEnterpriseScript}function SL(){return Nd.gapiScript}function CL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class PL{constructor(){this.enterprise=new kL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AL="recaptcha-enterprise",g1="NO_RECAPTCHA";class RL{constructor(e){this.type=AL,this.auth=Ta(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{aL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new oL(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function i(o,l,h){const d=window.grecaptcha;c0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(g1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PL().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&c0(window.grecaptcha))i(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=IL();d.length!==0&&(d+=h),m1(d).then(()=>{i(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function g0(t,e,n,r=!1,i=!1){const o=new RL(t);let l;if(i)l=g1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function _0(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await g0(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await g0(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t,e){const n=pd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Os(o,e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}function LL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NL(t,e,n){const r=Ta(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=_1(e),{host:l,port:h}=OL(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},_=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Os(p,r.config.emulator)&&Os(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Yi(l)?(ug(`${o}//${l}${d}`),cg("Auth",!0)):DL()}function _1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OL(t){const e=_1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:y0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:y0(l)}}}function y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,n){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}async function ML(t,e){return es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){return Ld(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function zL(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends n_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,n,"signInWithPassword",VL);case"emailLink":return FL(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,r,"signUpPassword",ML);case"emailLink":return zL(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e){return Ld(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="http://localhost";class Fs extends n_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const l=new Fs(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){const e={requestUri:jL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UL(t){const e=pl(ml(t)).link,n=e?pl(ml(e)).deep_link_id:null,r=pl(ml(t)).deep_link_id;return(r?pl(ml(r)).link:null)||r||n||e||t}class r_{constructor(e){const n=pl(ml(e)),r=n.apiKey??null,i=n.oobCode??null,o=BL(n.mode??null);fe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UL(e);try{return new r_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,n){return du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=r_.parseLink(n);return fe(r,"argument-error"),du._fromEmailAndCode(e,r.code,r.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends y1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends ku{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yi.credential(n,r)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends ku{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends ku{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wi.credential(n,r)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await $n._fromIdTokenResponse(e,r,i),l=v0(r);return new da({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=v0(r);return new da({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function v0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Ir{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $h(e,n,r,i)}}function v1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(t,o,e,r):o})}async function HL(t,e,n=!1){const r=await hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return da._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e,n=!1){const{auth:r}=t;if(An(r.app))return Promise.reject(Fi(r));const i="reauthenticate";try{const o=await hu(t,v1(r,i,e,t),n);fe(o.idToken,r,"internal-error");const l=e_(o.idToken);fe(l,r,"internal-error");const{sub:h}=l;return fe(t.uid===h,r,"user-mismatch"),da._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Yn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e,n=!1){if(An(t.app))return Promise.reject(Fi(t));const r="signIn",i=await v1(t,r,e),o=await da._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function $L(t,e){return w1(Ta(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(t){const e=Ta(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function GL(t,e,n){return An(t.app)?Promise.reject(Fi(t)):$L(rt(t),Ia.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qL(t),r})}function ZL(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function KL(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function QL(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function YL(t){return rt(t).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1e3,JL=10;class x1 extends E1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);_L()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}x1.type="LOCAL";const eN=x1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends E1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T1.type="SESSION";const I1=T1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await tN(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=i_("",20);i.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function rN(t){Er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function iN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function oN(){return S1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebaseLocalStorageDb",aN=1,Gh="firebaseLocalStorage",P1="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dd(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function lN(){const t=indexedDB.deleteDatabase(C1);return new Au(t).toPromise()}function lm(){const t=indexedDB.open(C1,aN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:P1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await lN(),e(await lm()))})})}async function w0(t,e,n){const r=Dd(t,!0).put({[P1]:e,value:n});return new Au(r).toPromise()}async function uN(t,e){const n=Dd(t,!1).get(e),r=await new Au(n).toPromise();return r===void 0?null:r.value}function E0(t,e){const n=Dd(t,!0).delete(e);return new Au(n).toPromise()}const cN=800,hN=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(oN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iN(),!this.activeServiceWorker)return;this.sender=new nN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lm();return await w0(e,qh,"1"),await E0(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Dd(i,!1).getAll();return new Au(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const dN=k1;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){return e?Ur(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_ extends n_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pN(t){return w1(t.auth,new s_(t),t.bypassAuthState)}function mN(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),WL(n,new s_(t),t.bypassAuthState)}async function gN(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),HL(n,new s_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pN;case"linkViaPopup":case"linkViaRedirect":return gN;case"reauthViaPopup":case"reauthViaRedirect":return mN;default:Yn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new Pu(2e3,1e4);class Bo extends A1{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=i_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_N.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="pendingRedirect",rh=new Map;class vN extends A1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const r=await wN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wN(t,e){const n=TN(e),r=xN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EN(t,e){rh.set(t._key(),e)}function xN(t){return Ur(t._redirectPersistence)}function TN(t){return nh(yN,t.config.apiKey,t.name)}async function IN(t,e,n=!1){if(An(t.app))return Promise.reject(Fi(t));const r=Ta(t),i=fN(r,e),l=await new vN(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=10*60*1e3;class CN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R1(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(wr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SN&&this.cachedEventUids.clear(),this.cachedEventUids.has(x0(e))}saveEventToCache(e){this.cachedEventUids.add(x0(e)),this.lastProcessedEventTime=Date.now()}}function x0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e={}){return es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RN=/^https?/;async function bN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kN(t);for(const n of e)try{if(LN(n))return}catch{}Yn(t,"unauthorized-domain")}function LN(t){const e=om(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!RN.test(n))return!1;if(AN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Pu(3e4,6e4);function T0(){const t=Er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ON(t){return new Promise((e,n)=>{var i,o,l;function r(){T0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T0(),n(wr(t,"network-request-failed"))},timeout:NN.get()})}if((o=(i=Er().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=Er().gapi)!=null&&l.load)r();else{const h=CL("iframefcb");return Er()[h]=()=>{gapi.load?r():n(wr(t,"network-request-failed"))},m1(`${SL()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw ih=null,e})}let ih=null;function DN(t){return ih=ih||ON(t),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Pu(5e3,15e3),VN="__/auth/iframe",FN="emulator/auth/iframe",zN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BN(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jg(e,FN):`https://${t.config.authDomain}/${VN}`,r={apiKey:e.apiKey,appName:t.name,v:Hs},i=jN.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${wu(r).slice(1)}`}async function UN(t){const e=await DN(t),n=Er().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:BN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zN,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=wr(t,"network-request-failed"),h=Er().setTimeout(()=>{o(l)},MN.get());function d(){Er().clearTimeout(h),i(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WN=500,$N=600,qN="_blank",GN="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZN(t,e,n,r=WN,i=$N){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...HN,width:r.toString(),height:i.toString(),top:o,left:l},p=Ut().toLowerCase();n&&(h=l1(p)?qN:n),o1(p)&&(e=e||GN,d.scrollbars="yes");const _=Object.entries(d).reduce((E,[A,V])=>`${E}${A}=${V},`,"");if(gL(p)&&h!=="_self")return KN(e||"",h),new I0(null);const v=window.open(e||"",h,_);fe(v,t,"popup-blocked");try{v.focus()}catch{}return new I0(v)}function KN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="__/auth/handler",YN="emulator/auth/handler",XN=encodeURIComponent("fac");async function S0(t,e,n,r,i,o){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hs,eventId:i};if(e instanceof y1){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Sk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))l[_]=v}if(e instanceof ku){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${XN}=${encodeURIComponent(d)}`:"";return`${JN(t)}?${wu(h).slice(1)}${p}`}function JN({config:t}){return t.emulator?Jg(t,YN):`https://${t.authDomain}/${QN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class eO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I1,this._completeRedirectFn=IN,this._overrideRedirectResult=EN}async _openPopup(e,n,r,i){var l;Xr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await S0(e,n,r,om(),i);return ZN(e,o,i_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await S0(e,n,r,om(),i);return rN(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Xr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UN(e),r=new CN(e);return n.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[Ff];o!==void 0&&n(!!o),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f1()||a1()||t_()}}const tO=eO;var C0="@firebase/auth",P0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iO(t){Ds(new Bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p1(t)},p=new xL(r,i,o,d);return LL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ds(new Bi("auth-internal",e=>{const n=Ta(e.getProvider("auth").getImmediate());return(r=>new nO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(C0,P0,rO(t)),mr(C0,P0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=5*60,oO=fx("authIdTokenMaxAge")||sO;let k0=null;const aO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oO)return;const i=n==null?void 0:n.token;k0!==i&&(k0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lO(t=fg()){const e=pd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bL(t,{popupRedirectResolver:tO,persistence:[dN,eN,I1]}),r=fx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=aO(o.toString());KL(n,l,()=>l(n.currentUser)),ZL(n,h=>l(h))}}const i=cx("auth");return i&&NL(n,`http://${i}`),n}function uO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}TL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=wr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",uO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iO("Browser");var cO="firebase",hO="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(cO,hO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebasestorage.googleapis.com",L1="storageBucket",dO=2*60*1e3,fO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends Ir{constructor(e,n,r=0){super(zf(e),`Firebase Storage: ${n} (${zf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function zf(t){return"storage/"+t}function o_(){const t="An unknown error occurred, please check the error payload for server response.";return new st(it.UNKNOWN,t)}function pO(t){return new st(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mO(t){return new st(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(it.UNAUTHENTICATED,t)}function _O(){return new st(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yO(t){return new st(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vO(){return new st(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wO(){return new st(it.CANCELED,"User canceled the upload/download.")}function EO(t){return new st(it.INVALID_URL,"Invalid URL '"+t+"'.")}function xO(t){return new st(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function TO(){return new st(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L1+"' property when initializing the app?")}function IO(){return new st(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SO(){return new st(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CO(t){return new st(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function um(t){return new st(it.INVALID_ARGUMENT,t)}function N1(){return new st(it.APP_DELETED,"The Firebase app was deleted.")}function PO(t){return new st(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dl(t,e){return new st(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ul(t){throw new st(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=pn.makeFromUrl(e,n)}catch{return new pn(e,"")}if(r.path==="")return r;throw xO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function p(j){j.path_=decodeURIComponent(j.path)}const _="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${v}/${_}/b/${i}/o${E}`,"i"),V={bucket:1,path:3},F=n===b1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",N=new RegExp(`^https?://${F}/${i}/${z}`,"i"),k=[{regex:h,indices:d,postModify:o},{regex:A,indices:V,postModify:p},{regex:N,indices:{bucket:1,path:2},postModify:p}];for(let j=0;j<k.length;j++){const G=k[j],J=G.regex.exec(e);if(J){const b=J[G.indices.bucket];let C=J[G.indices.path];C||(C=""),r=new pn(b,C),G.postModify(r);break}}if(r==null)throw EO(e);return r}}class kO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e,n){let r=1,i=null,o=null,l=!1,h=0;function d(){return h===2}let p=!1;function _(...z){p||(p=!0,e.apply(null,z))}function v(z){i=setTimeout(()=>{i=null,t(A,d())},z)}function E(){o&&clearTimeout(o)}function A(z,...N){if(p){E();return}if(z){E(),_.call(null,z,...N);return}if(d()||l){E(),_.call(null,z,...N);return}r<64&&(r*=2);let k;h===1?(h=2,k=0):k=(r+Math.random())*1e3,v(k)}let V=!1;function F(z){V||(V=!0,E(),!p&&(i!==null?(z||(h=2),clearTimeout(i),v(0)):z||(h=1)))}return v(0),o=setTimeout(()=>{l=!0,F(!0)},n),F}function RO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t){return t!==void 0}function LO(t){return typeof t=="object"&&!Array.isArray(t)}function a_(t){return typeof t=="string"||t instanceof String}function A0(t){return l_()&&t instanceof Blob}function l_(){return typeof Blob<"u"}function R0(t,e,n,r){if(r<e)throw um(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw um(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ks||(ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n,r,i,o,l,h,d,p,_,v,E=!0,A=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=v,this.retry=E,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,F)=>{this.resolve_=V,this.reject_=F,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Nc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const d=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===ks.NO_ERROR,d=o.getStatus();if(!h||NO(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===ks.ABORT;r(!1,new Nc(!1,null,_));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new Nc(p,o))})},n=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());bO(d)?o(d):o()}catch(d){l(d)}else if(h!==null){const d=o_();d.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,d)):l(d)}else if(i.canceled){const d=this.appDelete_?N1():wO();l(d)}else{const d=vO();l(d)}};this.canceled_?n(!1,new Nc(!1,null,!0)):this.backoffId_=AO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zO(t,e,n,r,i,o,l=!0,h=!1){const d=O1(t.urlParams),p=t.url+d,_=Object.assign({},t.headers);return VO(_,e),DO(_,n),MO(_,o),FO(_,r),new OO(p,t.method,_,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BO(...t){const e=jO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(l_())return new Blob(t);throw new st(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(typeof atob>"u")throw CO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jf{constructor(e,n){this.data=e,this.contentType=n||null}}function WO(t,e){switch(t){case dr.RAW:return new jf(D1(e));case dr.BASE64:case dr.BASE64URL:return new jf(M1(t,e));case dr.DATA_URL:return new jf(qO(e),GO(e))}throw o_()}function D1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $O(t){let e;try{e=decodeURIComponent(t)}catch{throw Dl(dr.DATA_URL,"Malformed data URL.")}return D1(e)}function M1(t,e){switch(t){case dr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Dl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Dl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HO(e)}catch(i){throw i.message.includes("polyfill")?i:Dl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class V1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Dl(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ZO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function qO(t){const e=new V1(t);return e.base64?M1(dr.BASE64,e.rest):$O(e.rest)}function GO(t){return new V1(t).contentType}function ZO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){let r=0,i="";A0(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(A0(this.data_)){const r=this.data_,i=UO(r,e,n);return i===null?null:new Ei(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(r,!0)}}static getBlob(...e){if(l_()){const n=e.map(r=>r instanceof Ei?r.data_:r);return new Ei(BO.apply(null,n))}else{const n=e.map(l=>a_(l)?WO(dr.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new Ei(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){let e;try{e=JSON.parse(t)}catch{return null}return LO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function z1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){return e}class qt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||YO}}let Oc=null;function XO(t){return!a_(t)||t.length<2?t:z1(t)}function j1(){if(Oc)return Oc;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(o,l){return XO(l)}const n=new qt("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const i=new qt("size");return i.xform=r,t.push(i),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Oc=t,Oc}function JO(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new pn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function eD(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return JO(r,t),r}function B1(t,e,n){const r=F1(e);return r===null?null:eD(t,r,n)}function tD(t,e,n,r){const i=F1(e);if(i===null||!a_(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const _=t.bucket,v=t.fullPath,E="/b/"+l(_)+"/o/"+l(v),A=u_(E,n,r),V=O1({alt:"media",token:p});return A+V})[0]}function nD(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class U1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){if(!t)throw o_()}function rD(t,e){function n(r,i){const o=B1(t,i,e);return H1(o!==null),o}return n}function iD(t,e){function n(r,i){const o=B1(t,i,e);return H1(o!==null),tD(o,i,t.host,t._protocol)}return n}function W1(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=_O():i=gO():n.getStatus()===402?i=mO(t.bucket):n.getStatus()===403?i=yO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function sD(t){const e=W1(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=pO(t.path)),o.serverResponse=i.serverResponse,o}return n}function oD(t,e,n){const r=e.fullServerUrl(),i=u_(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,h=new U1(i,o,iD(t,n),l);return h.errorHandler=sD(e),h}function aD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=aD(null,e)),r}function uD(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let k="";for(let j=0;j<2;j++)k=k+Math.random().toString().slice(2);return k}const d=h();l["Content-Type"]="multipart/related; boundary="+d;const p=lD(e,r,i),_=nD(p,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+d+"--",A=Ei.getBlob(v,r,E);if(A===null)throw IO();const V={name:p.fullPath},F=u_(o,t.host,t._protocol),z="POST",N=t.maxUploadRetryTime,T=new U1(F,z,rD(t,n),N);return T.urlParams=V,T.headers=l,T.body=A.uploadData(),T.errorHandler=W1(e),T}class cD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw ul("cannot .send() more than once");if(Yi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ul("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ul("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ul("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ul("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hD extends cD{initXhr(){this.xhr_.responseType="text"}}function $1(){return new hD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this._service=e,n instanceof pn?this._location=n:this._location=pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zs(e,n)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z1(this._location.path)}get storage(){return this._service}get parent(){const e=KO(this._location.path);if(e===null)return null;const n=new pn(this._location.bucket,e);return new zs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PO(e)}}function dD(t,e,n){t._throwIfRoot("uploadBytes");const r=uD(t.storage,t._location,j1(),new Ei(e,!0),n);return t.storage.makeRequestWithTokens(r,$1).then(i=>({metadata:i,ref:t}))}function fD(t){t._throwIfRoot("getDownloadURL");const e=oD(t.storage,t._location,j1());return t.storage.makeRequestWithTokens(e,$1).then(n=>{if(n===null)throw SO();return n})}function pD(t,e){const n=QO(t._location.path,e),r=new pn(t._location.bucket,n);return new zs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){return/^[A-Za-z]+:\/\//.test(t)}function gD(t,e){return new zs(t,e)}function q1(t,e){if(t instanceof c_){const n=t;if(n._bucket==null)throw TO();const r=new zs(n,n._bucket);return e!=null?q1(r,e):r}else return e!==void 0?pD(t,e):t}function _D(t,e){if(e&&mD(e)){if(t instanceof c_)return gD(t,e);throw um("To use ref(service, url), the first argument must be a Storage instance.")}else return q1(t,e)}function b0(t,e){const n=e==null?void 0:e[L1];return n==null?null:pn.makeFromBucketSpec(n,t)}function yD(t,e,n,r={}){t.host=`${e}:${n}`;const i=Yi(e);i&&(ug(`https://${t.host}/b`),cg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:px(o,t.app.options.projectId))}class c_{constructor(e,n,r,i,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=b1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dO,this._maxUploadRetryTime=fO,this._requests=new Set,i!=null?this._bucket=pn.makeFromBucketSpec(i,this._host):this._bucket=b0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=b0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zs(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new kO(N1());{const l=zO(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const L0="@firebase/storage",N0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="storage";function vD(t,e,n){return t=rt(t),dD(t,e,n)}function wD(t){return t=rt(t),fD(t)}function ED(t,e){return t=rt(t),_D(t,e)}function xD(t=fg(),e){t=rt(t);const r=pd(t,G1).getImmediate({identifier:e}),i=hx("storage");return i&&TD(r,...i),r}function TD(t,e,n,r={}){yD(t,e,n,r)}function ID(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new c_(n,r,i,e,Hs)}function SD(){Ds(new Bi(G1,ID,"PUBLIC").setMultipleInstances(!0)),mr(L0,N0,""),mr(L0,N0,"esm2020")}SD();const CD={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},h_=_x(CD),be=N2(h_),Bf=lO(h_),PD=xD(h_),tt={FACILITIES:"facilities",HITS:"hits"},kD=()=>{var D;const[t,e]=q.useState(!1),[n,r]=q.useState(""),[i,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[_,v]=q.useState([]),[E,A]=q.useState(!1),[V,F]=q.useState(null),[z,N]=q.useState(null),[T,k]=q.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),j=yu();q.useEffect(()=>{const P=QL(Bf,R=>{R?(e(!0),h(null)):e(!1)});return()=>P()},[]),q.useEffect(()=>{t&&G()},[t]);const G=async()=>{A(!0),F(null);try{if(!be)throw new Error("Firebase not initialized");const P=await hr(cr(be,tt.FACILITIES)),R=await Promise.all(P.docs.map(async ee=>{var Se,we;const Te=Xc(cr(be,tt.HITS),Jc("facilityId","==",parseInt(ee.id))),We=(await hr(Te)).docs.map(ce=>({id:parseInt(ce.id),...ce.data()})),$=ee.data(),le=((Se=$.location)==null?void 0:Se.latitude)??$.latitude,X=((we=$.location)==null?void 0:we.longitude)??$.longitude,ve=We.filter(ce=>!ce.draft).reduce((ce,ct)=>ce+(ct.damagePercentage||0),0),Ze=Math.max(0,$.capacity*(1-ve/100));return{id:parseInt(ee.id),name:$.name,type:$.type,capacity:$.capacity,gasCapacity:$.gasCapacity,currentProduction:Ze,latitude:le,longitude:X,status:$.status,hit:$.hit,draft:$.draft??!1,hits:We}}));v(R)}catch(P){console.error("Error fetching facilities:",P),F("Failed to load facilities from Firebase.")}finally{A(!1)}},J=async P=>{P.preventDefault(),h(null),A(!0);try{await GL(Bf,n,i)}catch(R){console.error("Login error:",R),R.code==="auth/invalid-credential"?h("Invalid email or password"):R.code==="auth/user-not-found"?h("No account found with this email"):R.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{A(!1)}},b=async()=>{try{await YL(Bf),j("/")}catch(P){console.error("Logout error:",P)}},C=async P=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!be)throw new Error("Firebase not initialized");const R=Xc(cr(be,tt.HITS),Jc("facilityId","==",P)),ee=await hr(R);for(const Te of ee.docs)await Mf(Te.ref);await Mf(Rn(be,tt.FACILITIES,P.toString())),G()}catch(R){console.error("Error deleting facility:",R),alert("Failed to delete facility")}},I=async(P,R)=>{var ee;R.preventDefault();try{if(!be)throw new Error("Firebase not initialized");const We=(await hr(cr(be,tt.HITS))).docs.reduce((X,he)=>{const ve=parseInt(he.id);return ve>X?ve:X},0)+1,$={id:We,facilityId:P,date:T.date,severity:T.severity,damagePercentage:T.damagePercentage||0,mediaLinks:(ee=T.mediaLinks)==null?void 0:ee.filter(X=>X.trim()!==""),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!0};await Qg(Rn(be,tt.HITS,We.toString()),$);const le=Rn(be,tt.FACILITIES,P.toString());await cu(le,{hit:!0}),N(null),k({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),G()}catch(Te){console.error("Error adding hit:",Te),alert("Failed to add hit record")}},O=async(P,R)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!be)throw new Error("Firebase not initialized");await Mf(Rn(be,tt.HITS,R.toString()));const ee=Xc(cr(be,tt.HITS),Jc("facilityId","==",P));if((await hr(ee)).empty){const De=Rn(be,tt.FACILITIES,P.toString());await cu(De,{hit:!1})}G()}catch(ee){console.error("Error deleting hit:",ee),alert("Failed to delete hit record")}};return t?w.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[w.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),w.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),w.jsx("button",{onClick:b,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),w.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[w.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:"🏭"}),w.jsx("span",{children:"Facilities"})]}),w.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:"💥"}),w.jsx("span",{children:"Hit Records"})]})]}),w.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:w.jsx("button",{onClick:()=>j("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"🗺️ View Map"})})]}),w.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),w.jsxs("p",{style:{color:"#999"},children:["Total: ",_.length," facilities"]})]}),w.jsx("button",{onClick:()=>j("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),E&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),V&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:V}),!E&&!V&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[w.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[w.jsx("thead",{children:w.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Normal Production"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Current Production"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),w.jsx("tbody",{children:_.map(P=>{var R,ee;return w.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[w.jsx("td",{style:{padding:"15px"},children:P.id}),w.jsx("td",{style:{padding:"15px"},children:P.name}),w.jsx("td",{style:{padding:"15px"},children:P.type}),w.jsxs("td",{style:{padding:"15px"},children:[((R=P.capacity)==null?void 0:R.toLocaleString())||0," bbl/day"]}),w.jsx("td",{style:{padding:"15px"},children:w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsxs("span",{style:{color:P.currentProduction===P.capacity?"#4CAF50":"#FF9800"},children:[((ee=P.currentProduction)==null?void 0:ee.toLocaleString())||0," bbl/day"]}),P.currentProduction!==P.capacity&&w.jsxs("span",{style:{fontSize:"11px",color:"#f44336",backgroundColor:"#331111",padding:"2px 6px",borderRadius:"3px"},children:["-",((1-(P.currentProduction||0)/P.capacity)*100).toFixed(0),"%"]})]})}),w.jsx("td",{style:{padding:"15px"},children:P.gasCapacity?P.gasCapacity.toLocaleString()+" million m³/year":"-"}),w.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:P.latitude!=null&&P.longitude!=null?`${P.latitude.toFixed(4)}, ${P.longitude.toFixed(4)}`:"N/A"}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:P.hit?"#f44336":"#4CAF50",color:"#fff"},children:P.status})}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:P.draft?"#ff9800":"#4CAF50",color:"#fff"},children:P.draft?"DRAFT":"Published"})}),w.jsxs("td",{style:{padding:"15px"},children:[w.jsx("button",{onClick:()=>j(`/admin/facility/${P.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>C(P.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},P.id)})})]}),_.length===0&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),w.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),w.jsx("button",{onClick:()=>j("/admin/hit/new"),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"+ Add New Hit"})]}),z===-1&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[w.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),w.jsxs("form",{onSubmit:P=>{P.preventDefault();const R=parseInt(P.target.facilityId.value);I(R,P)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),w.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[w.jsx("option",{value:"",children:"-- Choose a facility --"}),_.map(P=>w.jsxs("option",{value:P.id,children:[P.name," (",P.type,") ",P.hits&&P.hits.length>0?`- ${P.hits.length} existing hit${P.hits.length>1?"s":""}`:""]},P.id))]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:T.date,onChange:P=>k({...T,date:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:T.severity,onChange:P=>k({...T,severity:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),w.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:P=>{const R=Number(P.target.value);k({...T,damagePercentage:Math.min(100,Math.max(0,R))})},placeholder:"0-100",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),w.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:P=>k({...T,expectedRepairTime:Number(P.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(D=T.mediaLinks)==null?void 0:D.map((P,R)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:P,onChange:ee=>{const Te=[...T.mediaLinks||[]];Te[R]=ee.target.value,k({...T,mediaLinks:Te})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),R>0&&w.jsx("button",{type:"button",onClick:()=>{var Te;const ee=(Te=T.mediaLinks)==null?void 0:Te.filter((De,We)=>We!==R);k({...T,mediaLinks:ee})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},R)),w.jsx("button",{type:"button",onClick:()=>k({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:T.notes,onChange:P=>k({...T,notes:P.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"💥 Add Hit Record"})})]})]}),E&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),V&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:V}),!E&&!V&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{display:"grid",gap:"20px"},children:_.filter(P=>P.hits&&P.hits.length>0).map(P=>{var R;return w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[w.jsxs("div",{children:[w.jsx("h2",{style:{margin:0,color:"#dc2626"},children:P.name}),w.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[P.type," • ",P.hits.length," hit record",P.hits.length!==1?"s":""]})]}),w.jsx("button",{onClick:()=>N(z===P.id?null:P.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:z===P.id?"Cancel":"+ Add Hit"})]}),z===P.id&&w.jsxs("form",{onSubmit:ee=>I(P.id,ee),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:T.date,onChange:ee=>k({...T,date:ee.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:T.severity,onChange:ee=>k({...T,severity:ee.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),w.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:ee=>{const Te=Number(ee.target.value);k({...T,damagePercentage:Math.min(100,Math.max(0,Te))})},placeholder:"0-100",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),w.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:ee=>k({...T,expectedRepairTime:Number(ee.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(R=T.mediaLinks)==null?void 0:R.map((ee,Te)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:ee,onChange:De=>{const We=[...T.mediaLinks||[]];We[Te]=De.target.value,k({...T,mediaLinks:We})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),Te>0&&w.jsx("button",{type:"button",onClick:()=>{var We;const De=(We=T.mediaLinks)==null?void 0:We.filter(($,le)=>le!==Te);k({...T,mediaLinks:De})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},Te)),w.jsx("button",{type:"button",onClick:()=>k({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:T.notes,onChange:ee=>k({...T,notes:ee.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:"💥 Save Hit Record"})})]}),P.hits&&P.hits.length>0&&w.jsx("div",{style:{display:"grid",gap:"10px"},children:P.hits.map(ee=>w.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[w.jsxs("div",{style:{flex:1},children:[w.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),w.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",ee.id]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),w.jsx("div",{style:{color:"#fff"},children:new Date(ee.date).toLocaleDateString()})]}),ee.severity&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),w.jsx("div",{style:{color:"#fff",backgroundColor:ee.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:ee.severity})]}),ee.damagePercentage!=null&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Production Impact"}),w.jsxs("div",{style:{color:"#f44336",fontWeight:"bold",fontSize:"14px"},children:["-",ee.damagePercentage,"%"]})]}),ee.expectedRepairTime&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),w.jsxs("div",{style:{color:"#FF9800"},children:[ee.expectedRepairTime," days"]})]}),ee.draft&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Status"}),w.jsx("div",{style:{color:"#000",backgroundColor:"#ff9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:"DRAFT"})]})]}),ee.mediaLinks&&ee.mediaLinks.length>0&&w.jsxs("div",{style:{marginTop:"10px"},children:[w.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),w.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:ee.mediaLinks.map((Te,De)=>w.jsxs("a",{href:Te,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[Te.includes("youtube")||Te.includes("youtu.be")||Te.includes("video")?"📹":"📷"," Media ",De+1]},De))})]}),!ee.mediaLinks&&ee.videoLink&&w.jsx("div",{style:{marginTop:"10px"},children:w.jsx("a",{href:ee.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:"🎥 View Video"})}),ee.notes&&w.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[w.jsx("strong",{children:"Notes:"})," ",ee.notes]})]}),w.jsxs("div",{style:{display:"flex",gap:"5px"},children:[w.jsx("button",{onClick:()=>j(`/admin/hit/${ee.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>O(P.id,ee.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},ee.id))})]},P.id)})}),_.filter(P=>P.hits&&P.hits.length>0).length===0&&w.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[w.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"💥"}),w.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),w.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[w.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&w.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),w.jsxs("form",{onSubmit:J,children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),w.jsx("input",{type:"email",value:n,onChange:P=>r(P.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{marginBottom:"30px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),w.jsx("input",{type:"password",value:i,onChange:P=>o(P.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),w.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},AD=()=>{const{id:t}=lg(),e=yu(),[n,r]=q.useState(!1),[i,o]=q.useState(null),[l,h]=q.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});q.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var _,v;r(!0);try{if(!be)throw new Error("Firebase not initialized");const E=Rn(be,tt.FACILITIES,t),A=await Kg(E);if(A.exists()){const V=A.data(),F=((_=V.location)==null?void 0:_.latitude)??V.latitude,z=((v=V.location)==null?void 0:v.longitude)??V.longitude;h({id:parseInt(A.id),name:V.name,type:V.type,capacity:V.capacity,gasCapacity:V.gasCapacity,latitude:F,longitude:z,status:V.status,hit:V.hit,description:V.description||"",draft:V.draft??!1})}else o("Facility not found")}catch(E){console.error("Error fetching facility:",E),o("Failed to load facility")}finally{r(!1)}},p=async(_=!1)=>{r(!0),o(null);try{if(!be)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),r(!1);return}let v=t;(!t||t==="new")&&(v=((await hr(cr(be,tt.FACILITIES))).docs.reduce((z,N)=>{const T=parseInt(N.id);return T>z?T:z},0)+1).toString());const E={id:parseInt(v),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},status:l.status,hit:l.hit??!1,draft:_?!1:l.draft??!0};l.gasCapacity&&(E.gasCapacity=l.gasCapacity),l.description&&(E.description=l.description);const A=Rn(be,tt.FACILITIES,v);t&&t!=="new"?await cu(A,E):await Qg(A,E),alert(_?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(v){console.error("Error saving facility:",v),o("Failed to save facility")}finally{r(!1)}};return n&&t&&t!=="new"?w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:w.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[w.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),i&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:i}),l.draft&&w.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:"⚠️ This facility is in DRAFT mode and is not visible on the public map"}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),w.jsx("input",{type:"text",value:l.name,onChange:_=>h({...l,name:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),w.jsxs("select",{value:l.type,onChange:_=>h({...l,type:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"refinery",children:"Refinery"}),w.jsx("option",{value:"extraction",children:"Extraction"}),w.jsx("option",{value:"storage",children:"Storage"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),w.jsxs("select",{value:l.status,onChange:_=>h({...l,status:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"operational",children:"Operational"}),w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"offline",children:"Offline"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),w.jsx("input",{type:"number",value:l.capacity,onChange:_=>h({...l,capacity:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m³/year)"}),w.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:_=>h({...l,gasCapacity:_.target.value?Number(_.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:_=>h({...l,latitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:_=>h({...l,longitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),w.jsx("textarea",{value:l.description,onChange:_=>h({...l,description:_.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),w.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[w.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),w.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})},RD=()=>{var N;const{id:t}=lg(),e=yu(),[n,r]=q.useState(!1),[i,o]=q.useState(!1),[l,h]=q.useState([]),[d,p]=q.useState({id:0,facilityId:0,date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0});q.useEffect(()=>{_(),t&&t!=="new"&&v(parseInt(t))},[t]);const _=async()=>{try{if(!be)throw new Error("Firebase not initialized");const k=(await hr(cr(be,tt.FACILITIES))).docs.map(j=>({id:parseInt(j.id),name:j.data().name,type:j.data().type}));h(k)}catch(T){console.error("Error fetching facilities:",T),alert("Failed to load facilities")}},v=async T=>{r(!0);try{if(!be)throw new Error("Firebase not initialized");const k=Rn(be,tt.HITS,T.toString()),j=await Kg(k);if(j.exists()){const G=j.data();p({id:T,facilityId:G.facilityId,date:G.date,severity:G.severity||"damaged",damagePercentage:G.damagePercentage||0,mediaLinks:G.mediaLinks||(G.videoLink?[G.videoLink]:[""]),expectedRepairTime:G.expectedRepairTime,notes:G.notes,draft:G.draft??!1})}else alert("Hit record not found"),e("/admin")}catch(k){console.error("Error fetching hit:",k),alert("Failed to load hit record")}finally{r(!1)}},E=async(T=!1)=>{var k;if(!d.facilityId){alert("Please select a facility");return}if(!d.date){alert("Please enter a date");return}r(!0);try{if(!be)throw new Error("Firebase not initialized");const j={facilityId:d.facilityId,date:d.date,severity:d.severity,damagePercentage:d.damagePercentage||0,mediaLinks:(k=d.mediaLinks)==null?void 0:k.filter(G=>G.trim()!==""),expectedRepairTime:d.expectedRepairTime,notes:d.notes,draft:T?!1:d.draft};if(t==="new"){const b=(await hr(cr(be,tt.HITS))).docs.reduce((I,O)=>{const D=parseInt(O.id);return D>I?D:I},0)+1;await Qg(Rn(be,tt.HITS,b.toString()),{...j,id:b});const C=Rn(be,tt.FACILITIES,d.facilityId.toString());await cu(C,{hit:!0}),alert("Hit record created successfully!")}else{const G=Rn(be,tt.HITS,t);await cu(G,j),alert("Hit record updated successfully!")}e("/admin")}catch(j){console.error("Error saving hit:",j),alert("Failed to save hit record")}finally{r(!1)}},A=()=>{p({...d,mediaLinks:[...d.mediaLinks||[],""]})},V=T=>{var k;p({...d,mediaLinks:(k=d.mediaLinks)==null?void 0:k.filter((j,G)=>G!==T)})},F=(T,k)=>{const j=[...d.mediaLinks||[]];j[T]=k,p({...d,mediaLinks:j})},z=async T=>{var j;const k=T.target.files;if(!(!k||k.length===0)){o(!0);try{const G=[];for(let b=0;b<k.length;b++){const C=k[b],O=`hits/${Date.now()}_${C.name}`,D=ED(PD,O);await vD(D,C);const P=await wD(D);G.push(P)}const J=((j=d.mediaLinks)==null?void 0:j.filter(b=>b.trim()!==""))||[];p({...d,mediaLinks:[...J,...G]}),alert(`Successfully uploaded ${G.length} file(s)!`)}catch(G){console.error("Error uploading files:",G),alert("Failed to upload files. Please try again.")}finally{o(!1)}}};return w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",padding:"20px"},children:w.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{margin:0,marginBottom:"5px"},children:t==="new"?"💥 Add New Hit Record":"✏️ Edit Hit Record"}),w.jsx("p",{style:{margin:0,color:"#999"},children:t==="new"?"Record a new strike on a facility":`Editing Hit #${t}`})]}),w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"← Back to Admin"})]}),n&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading..."}),!n&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Facility *"}),w.jsxs("select",{value:d.facilityId,onChange:T=>p({...d,facilityId:parseInt(T.target.value)}),disabled:t!=="new",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:t!=="new"?"not-allowed":"pointer"},children:[w.jsx("option",{value:0,children:"-- Select a facility --"}),l.map(T=>w.jsxs("option",{value:T.id,children:[T.name," (",T.type,")"]},T.id))]}),t!=="new"&&w.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"12px"},children:"Facility cannot be changed after creation"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Date *"}),w.jsx("input",{type:"date",value:d.date,onChange:T=>p({...d,date:T.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Severity *"}),w.jsxs("select",{value:d.severity,onChange:T=>p({...d,severity:T.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Damage to Production (%) *"}),w.jsx("input",{type:"number",min:"0",max:"100",value:d.damagePercentage||0,onChange:T=>{const k=Number(T.target.value);p({...d,damagePercentage:Math.min(100,Math.max(0,k))})},placeholder:"0-100",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),w.jsx("p",{style:{margin:"6px 0 0 0",color:"#666",fontSize:"12px"},children:"Percentage of facility capacity affected by this hit"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Expected Repair Time (days)"}),w.jsx("input",{type:"number",value:d.expectedRepairTime||"",onChange:T=>p({...d,expectedRepairTime:T.target.value?Number(T.target.value):void 0}),placeholder:"e.g., 30",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Media Links (Videos/Photos)"}),(N=d.mediaLinks)==null?void 0:N.map((T,k)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:T,onChange:j=>F(k,j.target.value),placeholder:"https://...",style:{flex:1,padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),k>0&&w.jsx("button",{type:"button",onClick:()=>V(k),style:{padding:"12px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Remove"})]},k)),w.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[w.jsx("button",{type:"button",onClick:A,style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"+ Add Another Link"}),w.jsxs("label",{style:{padding:"10px 20px",backgroundColor:"#2563eb",color:"#fff",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer",fontSize:"14px",opacity:i?.6:1},children:[i?"⏳ Uploading...":"📁 Upload Photos/Videos",w.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:z,disabled:i,style:{display:"none"}})]})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Notes"}),w.jsx("textarea",{value:d.notes,onChange:T=>p({...d,notes:T.target.value}),rows:5,placeholder:"Describe the damage, impact, and any other relevant details...",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]})]}),d.draft&&w.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ff9800",color:"#000",borderRadius:"4px",fontWeight:"600",textAlign:"center"},children:"⚠️ This hit record is in DRAFT mode and will not affect production calculations"}),w.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"15px",justifyContent:"flex-end"},children:[w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"12px 24px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),w.jsx("button",{onClick:()=>E(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#ff9800",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":"📝 Save as Draft"}),w.jsx("button",{onClick:()=>E(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":t==="new"?"💥 Publish Hit Record":"✓ Publish"})]})]})]})})};function Z1(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bD=1;function LD(t){return Object.freeze({__version:bD,map:t})}function K1(t,e){return Object.freeze({...t,...e})}const Q1=q.createContext(null),Y1=Q1.Provider;function d_(){const t=q.useContext(Q1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function X1(t){function e(n,r){const{instance:i,context:o}=t(n).current;return q.useImperativeHandle(r,()=>i),n.children==null?null:Ml.createElement(Y1,{value:o},n.children)}return q.forwardRef(e)}function ND(t){function e(n,r){const[i,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(r,()=>l),q.useEffect(function(){i&&l.update()},[l,i,n.children]);const h=l._contentNode;return h?ZE.createPortal(n.children,h):null}return q.forwardRef(e)}function OD(t){function e(n,r){const{instance:i}=t(n).current;return q.useImperativeHandle(r,()=>i),null}return q.forwardRef(e)}function f_(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Md(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function DD(t,e){return function(r,i){const o=d_(),l=t(Md(r,o),o);return Z1(o.map,r.attribution),f_(l.current,r.eventHandlers),e(l.current,o,r,i),l}}var cm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(OI,function(n){var r="1.9.4";function i(s){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)s[a]=g[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var f=c.call(arguments,2);return function(){return s.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,c){var f,g,x,M;return M=function(){f=!1,g&&(x.apply(c,g),g=!1)},x=function(){f?g=arguments:(s.apply(c,arguments),setTimeout(M,a),f=!0)},x}function _(s,a,c){var f=a[1],g=a[0],x=f-g;return s===f&&c?s:((s-g)%x+x)%x+g}function v(){return!1}function E(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function A(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function V(s){return A(s).split(/\s+/)}function F(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function z(s,a,c){var f=[];for(var g in s)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function T(s,a){return s.replace(N,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var k=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function j(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var b=0;function C(s){var a=+new Date,c=Math.max(0,16-(a-b));return b=a+c,window.setTimeout(s,c)}var I=window.requestAnimationFrame||J("RequestAnimationFrame")||C,O=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,a,c){if(c&&I===C)s.call(a);else return I.call(window,l(s,a))}function P(s){s&&O.call(window,s)}var R={__proto__:null,extend:i,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:v,formatNum:E,trim:A,splitWords:V,setOptions:F,getParamString:z,template:T,isArray:k,indexOf:j,emptyImageUrl:G,requestFn:I,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:P};function ee(){}ee.extend=function(s){var a=function(){F(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return s.statics&&i(a,s.statics),s.includes&&(Te(s.includes),i.apply(null,[f].concat(s.includes))),i(f,s),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},i(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,M=f._initHooks.length;x<M;x++)f._initHooks[x].call(this)}},a},ee.include=function(s){var a=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},ee.mergeOptions=function(s){return i(this.prototype.options,s),this},ee.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Te(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=k(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var De={on:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a);else{s=V(s);for(var g=0,x=s.length;g<x;g++)this._on(s[g],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],a);else{s=V(s);for(var g=arguments.length===1,x=0,M=s.length;x<M;x++)g?this._off(s[x]):this._off(s[x],a,c)}return this},_on:function(s,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,a,c){var f,g,x;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,x=f.length;g<x;g++)f[g].fn=v;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var M=this._listens(s,a,c);if(M!==!1){var U=f[M];this._firingCount&&(U.fn=v,this._events[s]=f=f.slice()),f.splice(M,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var f=i({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var x=0,M=g.length;x<M;x++){var U=g[x],W=U.fn;U.once&&this.off(s,W,U.ctx),W.call(U.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(s,a,c,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var x=this._events&&this._events[s];if(x&&x.length&&this._listens(s,g,c)!==!1)return!0;if(f){for(var M in this._eventParents)if(this._eventParents[M].listens(s,a,c,f))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var f=this._events[s]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,x=f.length;g<x;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(s,a,c){if(typeof s=="object")for(var f in s)this._on(f,s[f],a,!0);else{s=V(s);for(var g=0,x=s.length;g<x;g++)this._on(s[g],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};De.addEventListener=De.on,De.removeEventListener=De.clearAllEventListeners=De.off,De.addOneTimeEventListener=De.once,De.fireEvent=De.fire,De.hasEventListeners=De.listens;var We=ee.extend(De);function $(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var le=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new $(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new $(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(s,a,c){return s instanceof $?s:k(s)?new $(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new $(s.x,s.y):new $(s,a,c)}function he(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}he.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof $||typeof s[0]=="number"||"x"in s)a=c=X(s);else if(s=ve(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof $?s=X(s):s=ve(s),s instanceof he?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ve(s);var a=this.min,c=this.max,f=s.min,g=s.max,x=g.x>=a.x&&f.x<=c.x,M=g.y>=a.y&&f.y<=c.y;return x&&M},overlaps:function(s){s=ve(s);var a=this.min,c=this.max,f=s.min,g=s.max,x=g.x>a.x&&f.x<c.x,M=g.y>a.y&&f.y<c.y;return x&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*s,g=Math.abs(a.y-c.y)*s;return ve(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(s){return s?(s=ve(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ve(s,a){return!s||s instanceof he?s:new he(s,a)}function Ze(s,a){if(s)for(var c=a?[s,a]:s,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ze.prototype={extend:function(s){var a=this._southWest,c=this._northEast,f,g;if(s instanceof we)f=s,g=s;else if(s instanceof Ze){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(ce(s)||Se(s)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*s,g=Math.abs(a.lng-c.lng)*s;return new Ze(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=ce(s):s=Se(s);var a=this._southWest,c=this._northEast,f,g;return s instanceof Ze?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(s){s=Se(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),x=g.lat>=a.lat&&f.lat<=c.lat,M=g.lng>=a.lng&&f.lng<=c.lng;return x&&M},overlaps:function(s){s=Se(s);var a=this._southWest,c=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),x=g.lat>a.lat&&f.lat<c.lat,M=g.lng>a.lng&&f.lng<c.lng;return x&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=Se(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(s,a){return s instanceof Ze?s:new Ze(s,a)}function we(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(s,a){if(!s)return!1;s=ce(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+E(this.lat,s)+", "+E(this.lng,s)+")"},distanceTo:function(s){return vn.distance(this,ce(s))},wrap:function(){return vn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Se([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function ce(s,a,c){return s instanceof we?s:k(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,c)}var ct={latLngToPoint:function(s,a){var c=this.projection.project(s),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(s,a){var c=this.scale(a),f=this.transformation.untransform(s,c);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new he(f,g)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new we(c,a,f)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return s;var x=s.getSouthWest(),M=s.getNorthEast(),U=new we(x.lat-f,x.lng-g),W=new we(M.lat-f,M.lng-g);return new Ze(U,W)}},vn=i({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,f=s.lat*c,g=a.lat*c,x=Math.sin((a.lat-s.lat)*c/2),M=Math.sin((a.lng-s.lng)*c/2),U=x*x+Math.cos(f)*Math.cos(g)*M*M,W=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*W}}),Ca=6378137,Pa={R:Ca,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,s.lat),-c),g=Math.sin(f*a);return new $(this.R*s.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Ca*Math.PI;return new he([-s,-s],[s,s])}()};function ka(s,a,c,f){if(k(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=f}ka.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new $((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function ei(s,a,c,f){return new ka(s,a,c,f)}var ts=i({},vn,{code:"EPSG:3857",projection:Pa,transformation:function(){var s=.5/(Math.PI*Pa.R);return ei(s,.5,-s,.5)}()}),Ru=i({},ts,{code:"EPSG:900913"});function bu(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Zs(s,a){var c="",f,g,x,M,U,W;for(f=0,x=s.length;f<x;f++){for(U=s[f],g=0,M=U.length;g<M;g++)W=U[g],c+=(g?"L":"M")+W.x+" "+W.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var ns=document.documentElement.style,rs="ActiveXObject"in window,Et=rs&&!document.addEventListener,xt="msLaunchUri"in navigator&&!("documentMode"in document),ti=Yt("webkit"),Lu=Yt("android"),Aa=Yt("android 2")||Yt("android 3"),zd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),is=Lu&&Yt("Google")&&zd<537&&!("AudioNode"in window),Ks=!!window.opera,Ra=!xt&&Yt("chrome"),Qs=Yt("gecko")&&!ti&&!Ks&&!rs,jd=!Ra&&Yt("safari"),Nu=Yt("phantom"),ba="OTransition"in ns,Ou=navigator.platform.indexOf("Win")===0,ni=rs&&"transition"in ns,ss="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Aa,Ys="MozPerspective"in ns,Sr=!window.L_DISABLE_3D&&(ni||ss||Ys)&&!ba&&!Nu,ri=typeof orientation<"u"||Yt("mobile"),Xs=ri&&ti,Du=ri&&ss,ii=!window.PointerEvent&&window.MSPointerEvent,La=!!(window.PointerEvent||ii),Tt="ontouchstart"in window||!!window.TouchEvent,Mu=!window.L_NO_TOUCH&&(Tt||La),os=ri&&Ks,as=ri&&Qs,Bd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ud=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return s}(),si=function(){return!!document.createElement("canvas").getContext}(),Na=!!(document.createElementNS&&bu("svg").createSVGRect),Hd=!!Na&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Js=!Na&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Vu=navigator.platform.indexOf("Mac")===0,Fu=navigator.platform.indexOf("Linux")===0;function Yt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:rs,ielt9:Et,edge:xt,webkit:ti,android:Lu,android23:Aa,androidStock:is,opera:Ks,chrome:Ra,gecko:Qs,safari:jd,phantom:Nu,opera12:ba,win:Ou,ie3d:ni,webkit3d:ss,gecko3d:Ys,any3d:Sr,mobile:ri,mobileWebkit:Xs,mobileWebkit3d:Du,msPointer:ii,pointer:La,touch:Mu,touchNative:Tt,mobileOpera:os,mobileGecko:as,retina:Bd,passiveEvents:Ud,canvas:si,svg:Na,vml:Js,inlineSvg:Hd,mac:Vu,linux:Fu},zu=ae.msPointer?"MSPointerDown":"pointerdown",Mn=ae.msPointer?"MSPointerMove":"pointermove",Oa=ae.msPointer?"MSPointerUp":"pointerup",Da=ae.msPointer?"MSPointerCancel":"pointercancel",ls={touchstart:zu,touchmove:Mn,touchend:Oa,touchcancel:Da},eo={touchstart:Ma,touchmove:wn,touchend:wn,touchcancel:wn},Cr={},ju=!1;function Bu(s,a,c){return a==="touchstart"&&us(),eo[a]?(c=eo[a].bind(this,c),s.addEventListener(ls[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function Wd(s,a,c){if(!ls[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(ls[a],c,!1)}function to(s){Cr[s.pointerId]=s}function Uu(s){Cr[s.pointerId]&&(Cr[s.pointerId]=s)}function no(s){delete Cr[s.pointerId]}function us(){ju||(document.addEventListener(zu,to,!0),document.addEventListener(Mn,Uu,!0),document.addEventListener(Oa,no,!0),document.addEventListener(Da,no,!0),ju=!0)}function wn(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Cr)a.touches.push(Cr[c]);a.changedTouches=[a],s(a)}}function Ma(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ht(a),wn(s,a)}function $d(s){var a={},c,f;for(f in s)c=s[f],a[f]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Hu=200;function Wu(s,a){s.addEventListener("dblclick",a);var c=0,f;function g(x){if(x.detail!==1){f=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var M=Ba(x);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var U=Date.now();U-c<=Hu?(f++,f===2&&a($d(x))):f=1,c=U}}}return s.addEventListener("click",g),{dblclick:a,simDblclick:g}}function $u(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var cs=ro(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=ro(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Va=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function Fa(s){return typeof s=="string"?document.getElementById(s):s}function oi(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);c=f?f[a]:null}return c==="auto"?null:c}function Ae(s,a,c){var f=document.createElement(s);return f.className=a||"",c&&c.appendChild(f),f}function Ne(s){var a=s.parentNode;a&&a.removeChild(s)}function Ht(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function En(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function xn(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function hs(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=Xn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function se(s,a){if(s.classList!==void 0)for(var c=V(a),f=0,g=c.length;f<g;f++)s.classList.add(c[f]);else if(!hs(s,a)){var x=Xn(s);kr(s,(x?x+" ":"")+a)}}function Be(s,a){s.classList!==void 0?s.classList.remove(a):kr(s,A((" "+Xn(s)+" ").replace(" "+a+" "," ")))}function kr(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function Xn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Xt(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&qu(s,a)}function qu(s,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+f+"(opacity="+a+")"}function ro(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Ar(s,a,c){var f=a||new $(0,0);s.style[cs]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function et(s,a){s._leaflet_pos=a,ae.any3d?Ar(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function Rr(s){return s._leaflet_pos||new $(0,0)}var Vn,un,io;if("onselectstart"in document)Vn=function(){me(window,"selectstart",ht)},un=function(){ze(window,"selectstart",ht)};else{var ai=ro(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vn=function(){if(ai){var s=document.documentElement.style;io=s[ai],s[ai]="none"}},un=function(){ai&&(document.documentElement.style[ai]=io,io=void 0)}}function so(){me(window,"dragstart",ht)}function oo(){ze(window,"dragstart",ht)}var ds,Jn;function za(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ao(),ds=s,Jn=s.style.outlineStyle,s.style.outlineStyle="none",me(window,"keydown",ao))}function ao(){ds&&(ds.style.outlineStyle=Jn,ds=void 0,Jn=void 0,ze(window,"keydown",ao))}function Gu(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Tn(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var qd={__proto__:null,TRANSFORM:cs,TRANSITION:Pr,TRANSITION_END:Va,get:Fa,getStyle:oi,create:Ae,remove:Ne,empty:Ht,toFront:En,toBack:xn,hasClass:hs,addClass:se,removeClass:Be,setClass:kr,getClass:Xn,setOpacity:Xt,testProp:ro,setTransform:Ar,setPosition:et,getPosition:Rr,get disableTextSelection(){return Vn},get enableTextSelection(){return un},disableImageDrag:so,enableImageDrag:oo,preventOutline:za,restoreOutline:ao,getSizedParentNode:Gu,getScale:Tn};function me(s,a,c,f){if(a&&typeof a=="object")for(var g in a)lo(s,g,a[g],c);else{a=V(a);for(var x=0,M=a.length;x<M;x++)lo(s,a[x],c,f)}return this}var Wt="_leaflet_events";function ze(s,a,c,f){if(arguments.length===1)li(s),delete s[Wt];else if(a&&typeof a=="object")for(var g in a)fs(s,g,a[g],c);else if(a=V(a),arguments.length===2)li(s,function(U){return j(a,U)!==-1});else for(var x=0,M=a.length;x<M;x++)fs(s,a[x],c,f);return this}function li(s,a){for(var c in s[Wt]){var f=c.split(/\d/)[0];(!a||a(f))&&fs(s,f,null,null,c)}}var br={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lo(s,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(s[Wt]&&s[Wt][g])return this;var x=function(U){return c.call(f||s,U||window.event)},M=x;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?x=Bu(s,a,x):ae.touch&&a==="dblclick"?x=Wu(s,x):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(br[a]||a,x,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(x=function(U){U=U||window.event,Ha(s,U)&&M(U)},s.addEventListener(br[a],x,!1)):s.addEventListener(a,M,!1):s.attachEvent("on"+a,x),s[Wt]=s[Wt]||{},s[Wt][g]=x}function fs(s,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var x=s[Wt]&&s[Wt][g];if(!x)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?Wd(s,a,x):ae.touch&&a==="dblclick"?$u(s,x):"removeEventListener"in s?s.removeEventListener(br[a]||a,x,!1):s.detachEvent("on"+a,x),s[Wt][g]=null}function Me(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ja(s){return lo(s,"wheel",Me),this}function ps(s){return me(s,"mousedown touchstart dblclick contextmenu",Me),s._leaflet_disable_click=!0,this}function ht(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function er(s){return ht(s),Me(s),this}function Ba(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function ms(s,a){if(!a)return new $(s.clientX,s.clientY);var c=Tn(a),f=c.boundingClientRect;return new $((s.clientX-f.left)/c.x-a.clientLeft,(s.clientY-f.top)/c.y-a.clientTop)}var tr=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ua(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/tr:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ha(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var gs={__proto__:null,on:me,off:ze,stopPropagation:Me,disableScrollPropagation:ja,disableClickPropagation:ps,preventDefault:ht,stop:er,getPropagationPath:Ba,getMousePosition:ms,getWheelDelta:Ua,isExternalTarget:Ha,addListener:me,removeListener:ze},Wa=We.extend({run:function(s,a,c,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Rr(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),et(this._el,c),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ee=We.extend({options:{crs:ts,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=F(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Va,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ce(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=i({animate:c.animate},c.zoom),c.pan=i({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),x=s instanceof $?s:this.latLngToContainerPoint(s),M=x.subtract(g).multiplyBy(1-1/f),U=this.containerPointToLatLng(g.add(M));return this.setView(U,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():Se(s);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(s,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var x=f.subtract(c).divideBy(2),M=this.project(s.getSouthWest(),g),U=this.project(s.getNorthEast(),g),W=this.unproject(M.add(U).divideBy(2).add(x),g);return{center:W,zoom:g}},fitBounds:function(s,a){if(s=Se(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Wa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(s,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(s),x=this.getSize(),M=this._zoom;s=ce(s),a=a===void 0?M:a;var U=Math.max(x.x,x.y),W=U*this.getZoomScale(M,a),Q=g.distanceTo(f)||1,re=1.42,de=re*re;function xe(dt){var uc=dt?-1:1,AI=dt?W:U,RI=W*W-U*U+uc*de*de*Q*Q,bI=2*AI*de*Q,Yd=RI/bI,D_=Math.sqrt(Yd*Yd+1)-Yd,LI=D_<1e-9?-18:Math.log(D_);return LI}function $t(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function It(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function Cn(dt){return $t(dt)/It(dt)}var en=xe(0);function xo(dt){return U*(It(en)/It(en+re*dt))}function SI(dt){return U*(It(en)*Cn(en+re*dt)-$t(en))/de}function CI(dt){return 1-Math.pow(1-dt,1.5)}var PI=Date.now(),N_=(xe(1)-en)/re,kI=c.duration?1e3*c.duration:1e3*N_*.8;function O_(){var dt=(Date.now()-PI)/kI,uc=CI(dt)*N_;dt<=1?(this._flyToFrame=D(O_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(SI(uc)/Q)),M),this.getScaleZoom(U/xo(uc),M),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),O_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=Se(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Se(s));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),x=this.project(s),M=this.getPixelBounds(),U=ve([M.min.add(c),M.max.subtract(f)]),W=U.getSize();if(!U.contains(x)){this._enforcingBounds=!0;var Q=x.subtract(U.getCenter()),re=U.extend(x).getSize().subtract(W);g.x+=Q.x<0?-re.x:re.x,g.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),x=f.subtract(g);return!x.x&&!x.y?this:(s.animate&&s.pan?this.panBy(x):(s.pan&&this._rawPanBy(x),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,f=new we(a,c),g=f.toBounds(s.coords.accuracy*2),x=this._locateOptions;if(x.setView){var M=this.getBoundsZoom(g);this.setView(f,x.maxZoom?Math.min(M,x.maxZoom):M)}var U={latlng:f,bounds:g,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&(U[W]=s.coords[W]);this.fire("locationfound",U)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ne(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Ae("div",c,a||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Ze(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=Se(s),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),x=this.getMaxZoom(),M=s.getNorthWest(),U=s.getSouthEast(),W=this.getSize().subtract(c),Q=ve(this.project(U,f),this.project(M,f)).getSize(),re=ae.any3d?this.options.zoomSnap:1,de=W.x/Q.x,xe=W.y/Q.y,$t=a?Math.max(de,xe):Math.min(de,xe);return f=this.getScaleZoom($t,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(g,Math.min(x,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(s*c.scale(a));return isNaN(f)?1/0:f},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ce(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ce(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Se(s))},distance:function(s,a){return this.options.crs.distance(ce(s),ce(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return ms(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Fa(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=oi(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){et(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(s,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){et(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?ze:me;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",x=s.target||s.srcElement,M=!1;x;){if(f=this._targets[d(x)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){M=!0;break}if(f&&f.listens(a,!0)&&(g&&!Ha(x,s)||(c.push(f),g))||x===this._container)break;x=x.parentNode}return!c.length&&!M&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&za(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var f=i({},s);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(s,a);if(c){for(var x=[],M=0;M<c.length;M++)c[M].listens(a,!0)&&x.push(c[M]);g=x.concat(g)}if(g.length){a==="contextmenu"&&ht(s);var U=g[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=U.getLatLng&&(!U._radius||U._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?U.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<g.length;M++)if(g[M].fire(a,W,!0),W.originalEvent._stopped||g[M].options.bubblingMouseEvents===!1&&j(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return Rr(this._mapPane)||new $(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(s.getSouthWest(),a)._subtract(f),this.project(s.getNorthWest(),a)._subtract(f),this.project(s.getSouthEast(),a)._subtract(f),this.project(s.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var f=this.project(s,a),g=this.getSize().divideBy(2),x=new he(f.subtract(g),f.add(g)),M=this._getBoundsOffset(x,c,a);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?s:this.unproject(f.add(M),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),f=new he(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(s,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(s.min),x=f.max.subtract(s.max),M=this._rebound(g.x,-x.x),U=this._rebound(g.y,-x.y);return new $(M,U)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=cs,f=this._proxy.style[c];Ar(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Ar(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(s)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(D(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function uo(s,a){return new Ee(s,a)}var Jt=ee.extend({options:{position:"topright"},initialize:function(s){F(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),f=s._controlCorners[c];return se(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),nr=function(s){return new Jt(s)};Ee.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ae("div",a+"control-container",this._container);function f(g,x){var M=a+g+" "+a+x;s[g+x]=Ae("div",M,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ne(this._controlCorners[s]);Ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zu=Jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(s,a,c){F(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Jt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Ae("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ps(a),ja(a);var f=this._section=Ae("section",s+"-list");c&&(this._map.on("click",this.collapse,this),me(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ae("a",s+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),me(g,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){ht(x),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ae("div",s+"-base",f),this._separator=Ae("div",s+"-separator",f),this._overlaysList=Ae("div",s+"-overlays",f),a.appendChild(f)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ht(this._baseLayersList),Ht(this._overlaysList),this._layerControlInputs=[];var s,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(s.layer),me(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var x=document.createElement("span");a.appendChild(x),x.appendChild(f),x.appendChild(g);var M=s.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var x=s.length-1;x>=0;x--)a=s[x],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])&&this._map.removeLayer(g[x]);for(x=0;x<f.length;x++)this._map.hasLayer(f[x])||this._map.addLayer(f[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,f=this._map.getZoom(),g=s.length-1;g>=0;g--)a=s[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,me(s,"click",ht),this.expand();var a=this;setTimeout(function(){ze(s,"click",ht),a._preventClick=!1})}}),Ku=function(s,a,c){return new Zu(s,a,c)},Lr=Jt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Ae("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,f,g){var x=Ae("a",c,f);return x.innerHTML=s,x.href="#",x.title=a,x.setAttribute("role","button"),x.setAttribute("aria-label",a),ps(x),me(x,"click",er),me(x,"click",g,this),me(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Be(this._zoomInButton,a),Be(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Lr,this.addControl(this.zoomControl))});var Qu=function(s){return new Lr(s)},$a=Jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Ae("div",a),f=this.options;return this._addScales(f,a+"-line",c),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Ae("div",a,c)),s.imperial&&(this._iScale=Ae("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),qa=function(s){return new $a(s)},Ga='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',co=Jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Ga+" ":"")+"Leaflet</a>"},initialize:function(s){F(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),ps(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new co().addTo(this)});var ho=function(s){return new co(s)};Jt.Layers=Zu,Jt.Zoom=Lr,Jt.Scale=$a,Jt.Attribution=co,nr.layers=Ku,nr.zoom=Qu,nr.scale=qa,nr.attribution=ho;var cn=ee.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(s,a){return s.addHandler(a,this),this};var Yu={Events:De},rr=ae.touch?"touchstart mousedown":"mousedown",Fn=We.extend({options:{clickTolerance:3},initialize:function(s,a,c,f){F(this,f),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(me(this._dragStartTarget,rr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fn._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,rr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!hs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Fn._dragging===this&&this.finishDrag();return}if(!(Fn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Fn._dragging=this,this._preventOutline&&za(this._element),so(),Vn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=Gu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=Rr(this._element),this._parentScale=Tn(c);var f=s.type==="mousedown";me(document,f?"mousemove":"touchmove",this._onMove,this),me(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,ht(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),et(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),oo(),un();var a=this._moved&&this._moving;this._moving=!1,Fn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Za(s,a,c){var f,g=[1,4,2,8],x,M,U,W,Q,re,de,xe;for(x=0,re=s.length;x<re;x++)s[x]._code=H(s[x],a);for(U=0;U<4;U++){for(de=g[U],f=[],x=0,re=s.length,M=re-1;x<re;M=x++)W=s[x],Q=s[M],W._code&de?Q._code&de||(xe=B(Q,W,de,a,c),xe._code=H(xe,a),f.push(xe)):(Q._code&de&&(xe=B(Q,W,de,a,c),xe._code=H(xe,a),f.push(xe)),f.push(W));s=f}return s}function Ka(s,a){var c,f,g,x,M,U,W,Q,re;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var de=ce([0,0]),xe=Se(s),$t=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());$t<1700&&(de=fo(s));var It=s.length,Cn=[];for(c=0;c<It;c++){var en=ce(s[c]);Cn.push(a.project(ce([en.lat-de.lat,en.lng-de.lng])))}for(U=W=Q=0,c=0,f=It-1;c<It;f=c++)g=Cn[c],x=Cn[f],M=g.y*x.x-x.y*g.x,W+=(g.x+x.x)*M,Q+=(g.y+x.y)*M,U+=M*3;U===0?re=Cn[0]:re=[W/U,Q/U];var xo=a.unproject(X(re));return ce([xo.lat+de.lat,xo.lng+de.lng])}function fo(s){for(var a=0,c=0,f=0,g=0;g<s.length;g++){var x=ce(s[g]);a+=x.lat,c+=x.lng,f++}return ce([a/f,c/f])}var po={__proto__:null,clipPolygon:Za,polygonCenter:Ka,centroid:fo};function Ot(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=m(s,c),s=ui(s,c),s}function Qa(s,a,c){return Math.sqrt(ge(s,a,c,!0))}function Xu(s,a,c){return ge(s,a,c)}function ui(s,a){var c=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(s,g,a,0,c-1);var x,M=[];for(x=0;x<c;x++)g[x]&&M.push(s[x]);return M}function u(s,a,c,f,g){var x=0,M,U,W;for(U=f+1;U<=g-1;U++)W=ge(s[U],s[f],s[g],!0),W>x&&(M=U,x=W);x>c&&(a[M]=1,u(s,a,c,f,M),u(s,a,c,M,g))}function m(s,a){for(var c=[s[0]],f=1,g=0,x=s.length;f<x;f++)te(s[f],s[g])>a&&(c.push(s[f]),g=f);return g<x-1&&c.push(s[x-1]),c}var y;function S(s,a,c,f,g){var x=f?y:H(s,c),M=H(a,c),U,W,Q;for(y=M;;){if(!(x|M))return[s,a];if(x&M)return!1;U=x||M,W=B(s,a,U,c,g),Q=H(W,c),U===x?(s=W,x=Q):(a=W,M=Q)}}function B(s,a,c,f,g){var x=a.x-s.x,M=a.y-s.y,U=f.min,W=f.max,Q,re;return c&8?(Q=s.x+x*(W.y-s.y)/M,re=W.y):c&4?(Q=s.x+x*(U.y-s.y)/M,re=U.y):c&2?(Q=W.x,re=s.y+M*(W.x-s.x)/x):c&1&&(Q=U.x,re=s.y+M*(U.x-s.x)/x),new $(Q,re,g)}function H(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function te(s,a){var c=a.x-s.x,f=a.y-s.y;return c*c+f*f}function ge(s,a,c,f){var g=a.x,x=a.y,M=c.x-g,U=c.y-x,W=M*M+U*U,Q;return W>0&&(Q=((s.x-g)*M+(s.y-x)*U)/W,Q>1?(g=c.x,x=c.y):Q>0&&(g+=M*Q,x+=U*Q)),M=s.x-g,U=s.y-x,f?M*M+U*U:new $(g,x)}function Oe(s){return!k(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ve(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oe(s)}function ot(s,a){var c,f,g,x,M,U,W,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Oe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=ce([0,0]),de=Se(s),xe=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());xe<1700&&(re=fo(s));var $t=s.length,It=[];for(c=0;c<$t;c++){var Cn=ce(s[c]);It.push(a.project(ce([Cn.lat-re.lat,Cn.lng-re.lng])))}for(c=0,f=0;c<$t-1;c++)f+=It[c].distanceTo(It[c+1])/2;if(f===0)Q=It[0];else for(c=0,x=0;c<$t-1;c++)if(M=It[c],U=It[c+1],g=M.distanceTo(U),x+=g,x>f){W=(x-f)/g,Q=[U.x-W*(U.x-M.x),U.y-W*(U.y-M.y)];break}var en=a.unproject(X(Q));return ce([en.lat+re.lat,en.lng+re.lng])}var In={__proto__:null,simplify:Ot,pointToSegmentDistance:Qa,closestPointOnSegment:Xu,clipSegment:S,_getEdgeIntersection:B,_getBitCode:H,_sqClosestPointOnSegment:ge,isFlat:Oe,_flat:Ve,polylineCenter:ot},zn={project:function(s){return new $(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new he([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,f=s.lat*a,g=this.R_MINOR/c,x=Math.sqrt(1-g*g),M=x*Math.sin(f),U=Math.tan(Math.PI/4-f/2)/Math.pow((1-M)/(1+M),x/2);return f=-c*Math.log(Math.max(U,1e-10)),new $(s.lng*a*c,f)},unproject:function(s){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),x=Math.exp(-s.y/c),M=Math.PI/2-2*Math.atan(x),U=0,W=.1,Q;U<15&&Math.abs(W)>1e-7;U++)Q=g*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),g/2),W=Math.PI/2-2*Math.atan(x*Q)-M,M+=W;return new we(M*a,s.x*a/c)}},ir={__proto__:null,LonLat:zn,Mercator:Sn,SphericalMercator:Pa},mo=i({},vn,{code:"EPSG:3395",projection:Sn,transformation:function(){var s=.5/(Math.PI*Sn.R);return ei(s,.5,-s,.5)}()}),go=i({},vn,{code:"EPSG:4326",projection:zn,transformation:ei(1/180,1,-1/180,.5)}),rI=i({},ct,{projection:zn,transformation:ei(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,f=a.lat-s.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ct.Earth=vn,ct.EPSG3395=mo,ct.EPSG3857=ts,ct.EPSG900913=Ru,ct.EPSG4326=go,ct.Simple=rI;var jn=We.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?k(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _o=jn.extend({initialize:function(s,a){F(this,a),this._layers={};var c,f;if(s)for(c=0,f=s.length;c<f;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[s]&&f[s].apply(f,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),iI=function(s,a){return new _o(s,a)},Nr=_o.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),_o.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),_o.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ze;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),sI=function(s,a){return new Nr(s,a)},yo=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){F(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),x=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),x&&(s.style.marginLeft=-x.x+"px",s.style.marginTop=-x.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function oI(s){return new yo(s)}var Ya=yo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ya.imagePath!="string"&&(Ya.imagePath=this._detectIconPath()),(this.options.imagePath||Ya.imagePath)+yo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,f,g){var x=f.exec(c);return x&&x[g]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ae("div","leaflet-default-icon-path",document.body),a=oi(s,"background-image")||oi(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),p_=cn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Fn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,x=Rr(a._icon),M=c.getPixelBounds(),U=c.getPixelOrigin(),W=ve(M.min._subtract(U).add(g),M.max._subtract(U).subtract(g));if(!W.contains(x)){var Q=X((Math.max(W.max.x,x.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,x.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,x.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,x.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(f);c.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),et(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,f=Rr(a._icon),g=a._map.layerPointToLatLng(f);c&&et(c,f),a._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ju=jn.extend({options:{icon:new Ya,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){F(this,a),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),se(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(c,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),x=!1;g!==this._shadow&&(this._removeShadow(),x=!0),g&&(se(g,a),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&x&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),Ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ne(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&et(this._icon,s),this._shadow&&et(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),p_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new p_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Xt(this._icon,s),this._shadow&&Xt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function aI(s,a){return new Ju(s,a)}var ci=jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return F(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ec=ci.extend({options:{fill:!0,radius:10},initialize:function(s,a){F(this,a),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return ci.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),f=[s+c,a+c];this._pxBounds=new he(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lI(s,a){return new ec(s,a)}var Gd=ec.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=i({},c,{radius:a})),F(this,a),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ze(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ci.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===vn.distance){var g=Math.PI/180,x=this._mRadius/vn.R/g,M=c.project([a+x,s]),U=c.project([a-x,s]),W=M.add(U).divideBy(2),Q=c.unproject(W).lat,re=Math.acos((Math.cos(x*g)-Math.sin(a*g)*Math.sin(Q*g))/(Math.cos(a*g)*Math.cos(Q*g)))/g;(isNaN(re)||re===0)&&(re=x/Math.cos(Math.PI/180*a)),this._point=W.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:W.x-c.project([Q,s-re]).x,this._radiusY=W.y-M.y}else{var de=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(de).x}this._updateBounds()}});function uI(s,a,c){return new Gd(s,a,c)}var Or=ci.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){F(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,f=ge,g,x,M=0,U=this._parts.length;M<U;M++)for(var W=this._parts[M],Q=1,re=W.length;Q<re;Q++){g=W[Q-1],x=W[Q];var de=f(s,g,x,!0);de<a&&(a=de,c=f(s,g,x))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ot(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ce(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ze,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Oe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=Oe(s),f=0,g=s.length;f<g;f++)c?(a[f]=ce(s[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(s[f]);return a},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new $(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var f=s[0]instanceof we,g=s.length,x,M;if(f){for(M=[],x=0;x<g;x++)M[x]=this._map.latLngToLayerPoint(s[x]),c.extend(M[x]);a.push(M)}else for(x=0;x<g;x++)this._projectLatlngs(s[x],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,x,M,U,W;for(c=0,g=0,x=this._rings.length;c<x;c++)for(W=this._rings[c],f=0,M=W.length;f<M-1;f++)U=S(W[f],W[f+1],s,f,!0),U&&(a[g]=a[g]||[],a[g].push(U[0]),(U[1]!==W[f+1]||f===M-2)&&(a[g].push(U[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,f=s.length;c<f;c++)s[c]=Ot(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,f,g,x,M,U,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,x=this._parts.length;c<x;c++)for(U=this._parts[c],f=0,M=U.length,g=M-1;f<M;g=f++)if(!(!a&&f===0)&&Qa(s,U[g],U[f])<=W)return!0;return!1}});function cI(s,a){return new Or(s,a)}Or._flat=Ve;var vo=Or.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ka(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Or.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){Or.prototype._setLatLngs.call(this,s),Oe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(s=new he(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,x;f<g;f++)x=Za(this._rings[f],s,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,f,g,x,M,U,W,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(x=0,W=this._parts.length;x<W;x++)for(c=this._parts[x],M=0,Q=c.length,U=Q-1;M<Q;U=M++)f=c[M],g=c[U],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Or.prototype._containsPoint.call(this,s,!0)}});function hI(s,a){return new vo(s,a)}var Dr=Nr.extend({initialize:function(s,a){F(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=k(s)?s:s.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var x=this.options;if(x.filter&&!x.filter(s))return this;var M=tc(s,x);return M?(M.feature=ic(s),M.defaultOptions=M.options,this.resetStyle(M),x.onEachFeature&&x.onEachFeature(s,M),this.addLayer(M)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function tc(s,a){var c=s.type==="Feature"?s.geometry:s,f=c?c.coordinates:null,g=[],x=a&&a.pointToLayer,M=a&&a.coordsToLatLng||Zd,U,W,Q,re;if(!f&&!c)return null;switch(c.type){case"Point":return U=M(f),m_(x,s,U,a);case"MultiPoint":for(Q=0,re=f.length;Q<re;Q++)U=M(f[Q]),g.push(m_(x,s,U,a));return new Nr(g);case"LineString":case"MultiLineString":return W=nc(f,c.type==="LineString"?0:1,M),new Or(W,a);case"Polygon":case"MultiPolygon":return W=nc(f,c.type==="Polygon"?1:2,M),new vo(W,a);case"GeometryCollection":for(Q=0,re=c.geometries.length;Q<re;Q++){var de=tc({geometry:c.geometries[Q],type:"Feature",properties:s.properties},a);de&&g.push(de)}return new Nr(g);case"FeatureCollection":for(Q=0,re=c.features.length;Q<re;Q++){var xe=tc(c.features[Q],a);xe&&g.push(xe)}return new Nr(g);default:throw new Error("Invalid GeoJSON object.")}}function m_(s,a,c,f){return s?s(a,c):new Ju(c,f&&f.markersInheritOptions&&f)}function Zd(s){return new we(s[1],s[0],s[2])}function nc(s,a,c){for(var f=[],g=0,x=s.length,M;g<x;g++)M=a?nc(s[g],a-1,c):(c||Zd)(s[g]),f.push(M);return f}function Kd(s,a){return s=ce(s),s.alt!==void 0?[E(s.lng,a),E(s.lat,a),E(s.alt,a)]:[E(s.lng,a),E(s.lat,a)]}function rc(s,a,c,f){for(var g=[],x=0,M=s.length;x<M;x++)g.push(a?rc(s[x],Oe(s[x])?0:a-1,c,f):Kd(s[x],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function wo(s,a){return s.feature?i({},s.feature,{geometry:a}):ic(a)}function ic(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Qd={toGeoJSON:function(s){return wo(this,{type:"Point",coordinates:Kd(this.getLatLng(),s)})}};Ju.include(Qd),Gd.include(Qd),ec.include(Qd),Or.include({toGeoJSON:function(s){var a=!Oe(this._latlngs),c=rc(this._latlngs,a?1:0,!1,s);return wo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),vo.include({toGeoJSON:function(s){var a=!Oe(this._latlngs),c=a&&!Oe(this._latlngs[0]),f=rc(this._latlngs,c?2:a?1:0,!0,s);return a||(f=[f]),wo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),_o.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),wo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var x=g.toGeoJSON(s);if(c)f.push(x.geometry);else{var M=ic(x);M.type==="FeatureCollection"?f.push.apply(f,M.features):f.push(M)}}}),c?wo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function g_(s,a){return new Dr(s,a)}var dI=g_,sc=jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=Se(a),F(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&En(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Se(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Ae("img");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ar(this._image,c,a)},_reset:function(){var s=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();et(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),fI=function(s,a,c){return new sc(s,a,c)},__=sc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Ae("video");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var M=Ae("source");M.src=this._url[x],a.appendChild(M)}}});function pI(s,a,c){return new __(s,a,c)}var y_=sc.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function mI(s,a,c){return new y_(s,a,c)}var sr=jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||k(s))?(this._latlng=ce(s),F(this,a)):(F(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Xt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Xt(this._container,0),this._removeTimeout=setTimeout(l(Ne,void 0,this._container),200)):Ne(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&En(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof Nr){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?et(this._container,s.add(c)):a=a.add(s).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(s,a,c,f){var g=a;return g instanceof s||(g=new s(f).setContent(a)),c&&g.setLatLng(c),g}}),jn.include({_initOverlay:function(s,a,c,f){var g=c;return g instanceof s?(F(g,f),g._source=this):(g=a&&!f?a:new s(f,this),g.setContent(c)),g}});var oc=sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,sr.prototype.openOn.call(this,s)},onAdd:function(s){sr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ci||this._source.on("preclick",Me))},onRemove:function(s){sr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ci||this._source.off("preclick",Me))},getEvents:function(){var s=sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Ae("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ae("div",s+"-content-wrapper",a);if(this._contentNode=Ae("div",s+"-content",c),ps(a),ja(this._contentNode),me(a,"contextmenu",Me),this._tipContainer=Ae("div",s+"-tip-container",a),this._tip=Ae("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ae("a",s+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',me(f,"click",function(g){ht(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=s.offsetHeight,g=this.options.maxHeight,x="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",se(s,x)):Be(s,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();et(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(oi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(Rr(this._container));var x=s.layerPointToContainerPoint(g),M=X(this.options.autoPanPadding),U=X(this.options.autoPanPaddingTopLeft||M),W=X(this.options.autoPanPaddingBottomRight||M),Q=s.getSize(),re=0,de=0;x.x+f+W.x>Q.x&&(re=x.x+f-Q.x+W.x),x.x-re-U.x<0&&(re=x.x-U.x),x.y+c+W.y>Q.y&&(de=x.y+c-Q.y+W.y),x.y-de-U.y<0&&(de=x.y-U.y),(re||de)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,de]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),gI=function(s,a){return new oc(s,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(s,a,c){return this._initOverlay(oc,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),jn.include({bindPopup:function(s,a){return this._popup=this._initOverlay(oc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Nr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){er(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof ci)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ac=sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){sr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){sr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=sr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,f=this._map,g=this._container,x=f.latLngToContainerPoint(f.getCenter()),M=f.layerPointToContainerPoint(s),U=this.options.direction,W=g.offsetWidth,Q=g.offsetHeight,re=X(this.options.offset),de=this._getAnchor();U==="top"?(a=W/2,c=Q):U==="bottom"?(a=W/2,c=0):U==="center"?(a=W/2,c=Q/2):U==="right"?(a=0,c=Q/2):U==="left"?(a=W,c=Q/2):M.x<x.x?(U="right",a=0,c=Q/2):(U="left",a=W+(re.x+de.x)*2,c=Q/2),s=s.subtract(X(a,c,!0)).add(re).add(de),Be(g,"leaflet-tooltip-right"),Be(g,"leaflet-tooltip-left"),Be(g,"leaflet-tooltip-top"),Be(g,"leaflet-tooltip-bottom"),se(g,"leaflet-tooltip-"+U),et(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Xt(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_I=function(s,a){return new ac(s,a)};Ee.include({openTooltip:function(s,a,c){return this._initOverlay(ac,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),jn.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ac,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Nr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(me(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),me(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,f;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var v_=yo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Ht(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function yI(s){return new v_(s)}yo.Default=Ya;var Xa=jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){F(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ne(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(En(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof $?s:new $(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),f=0,g=a.length,x;f<g;f++)x=a[f].style.zIndex,a[f]!==this._container&&x&&(c=s(c,+x));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Xt(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var x=Math.min(1,(s-g.loaded)/200);Xt(g.el,x),x<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(Ne(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ne(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,f){var g=Math.floor(s/2),x=Math.floor(a/2),M=c-1,U=new $(+g,+x);U.z=+M;var W=this._tileCoordsToKey(U),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>f?this._retainParent(g,x,M,f):!1)},_retainChildren:function(s,a,c,f){for(var g=2*s;g<2*s+2;g++)for(var x=2*a;x<2*a+2;x++){var M=new $(g,x);M.z=c+1;var U=this._tileCoordsToKey(M),W=this._tiles[U];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);c+1<f&&this._retainChildren(g,x,c+1,f)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var x=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||x)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var f=this._map.getZoomScale(c,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Ar(s.el,g,f):et(s.el,g)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(s,this._tileZoom).floor(),x=a.getSize().divideBy(f*2);return new he(g.subtract(x),g.add(x))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),x=g.getCenter(),M=[],U=this.options.keepBuffer,W=new he(g.getBottomLeft().subtract([U,-U]),g.getTopRight().add([U,-U]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!W.contains(new $(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var de=g.min.y;de<=g.max.y;de++)for(var xe=g.min.x;xe<=g.max.x;xe++){var $t=new $(xe,de);if($t.z=this._tileZoom,!!this._isValidTile($t)){var It=this._tiles[this._tileCoordsToKey($t)];It?It.current=!0:M.push($t)}}if(M.sort(function(en,xo){return en.distanceTo(x)-xo.distanceTo(x)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cn=document.createDocumentFragment();for(xe=0;xe<M.length;xe++)this._addTile(M[xe],Cn);this._level.el.appendChild(Cn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return Se(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),f=s.scaleBy(c),g=f.add(c),x=a.unproject(f,s.z),M=a.unproject(g,s.z);return[x,M]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Ze(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(Ne(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=v,s.onmousemove=v,ae.ielt9&&this.options.opacity<1&&Xt(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&D(l(this._tileReady,this,s,null,g)),et(g,c),this._tiles[f]={el:g,coords:s,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var f=this._tileCoordsToKey(s);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Xt(c.el,0),P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(se(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new $(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new he(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function vI(s){return new Xa(s)}var Eo=Xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=F(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return me(c,"load",l(this._tileOnLoad,this,a,c)),me(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return T(this._url,i(a,this.options))},_tileOnLoad:function(s,a){ae.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(s=a-s),s+f},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=v,a.onerror=v,!a.complete)){a.src=G;var c=this._tiles[s].coords;Ne(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",G),Xa.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===G))return Xa.prototype._tileReady.call(this,s,a,c)}});function w_(s,a){return new Eo(s,a)}var E_=Eo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=i({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=F(this,a);var g=a.detectRetina&&ae.retina?2:1,x=this.getTileSize();c.width=x.x*g,c.height=x.y*g,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Eo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,x=f.max,M=(this._wmsVersion>=1.3&&this._crs===go?[g.y,g.x,x.y,x.x]:[g.x,g.y,x.x,x.y]).join(","),U=Eo.prototype.getTileUrl.call(this,s);return U+z(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(s,a){return i(this.wmsParams,s),a||this.redraw(),this}});function wI(s,a){return new E_(s,a)}Eo.WMS=E_,w_.wms=wI;var Mr=jn.extend({options:{padding:.1},initialize:function(s){F(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),x=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(s,a));ae.any3d?Ar(this._container,x,c):et(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),x_=Mr.extend({options:{tolerance:0},getEvents:function(){var s=Mr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Mr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");me(s,"mousemove",this._onMouseMove,this),me(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,Ne(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mr.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),f=ae.retina?2:1;et(a,s.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Mr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,f,g,x,M=s._parts,U=M.length,W=this._ctx;if(U){for(W.beginPath(),c=0;c<U;c++){for(f=0,g=M[c].length;f<g;f++)x=M[c][f],W[f?"lineTo":"moveTo"](x.x,x.y);a&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Be(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(se(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function T_(s){return ae.canvas?new x_(s):null}var Ja=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),EI={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Mr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Ja("shape");se(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Ja("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Ne(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=s._stroke=Ja("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=k(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),s._stroke=null),f.fill?(c||(c=s._fill=Ja("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),f=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){En(s._container)},_bringToBack:function(s){xn(s._container)}},lc=ae.vml?Ja:bu,el=Mr.extend({_initContainer:function(){this._container=lc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ne(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mr.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),et(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=lc("path");s.options.className&&se(a,s.options.className),s.options.interactive&&se(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ne(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,Zs(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",x=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(s,x)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){En(s._path)},_bringToBack:function(s){xn(s._path)}});ae.vml&&el.include(EI);function I_(s){return ae.svg||ae.vml?new el(s):null}Ee.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&T_(s)||I_(s)}});var S_=vo.extend({initialize:function(s,a){vo.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Se(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function xI(s,a){return new S_(s,a)}el.create=lc,el.pointsToPath=Zs,Dr.geometryToLayer=tc,Dr.coordsToLatLng=Zd,Dr.coordsToLatLngs=nc,Dr.latLngToCoords=Kd,Dr.latLngsToCoords=rc,Dr.getFeature=wo,Dr.asFeature=ic,Ee.mergeOptions({boxZoom:!0});var C_=cn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vn(),so(),this._startPoint=this._map.mouseEventToContainerPoint(s),me(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new he(this._point,this._startPoint),c=a.getSize();et(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ne(this._box),Be(this._container,"leaflet-crosshair")),un(),oo(),ze(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",C_),Ee.mergeOptions({doubleClickZoom:!0});var P_=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=s.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(s.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",P_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var k_=cn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Fn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Se(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%s+a-c,x=(f+a+c)%s-a-c,M=Math.abs(g+c)<Math.abs(x+c)?g:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(s){var a=this._map,c=a.options,f=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,M=c.easeLinearity,U=g.multiplyBy(M/x),W=U.distanceTo([0,0]),Q=Math.min(c.inertiaMaxSpeed,W),re=U.multiplyBy(Q/W),de=Q/(c.inertiaDeceleration*M),xe=re.multiplyBy(-de/2).round();!xe.x&&!xe.y?a.fire("moveend"):(xe=a._limitOffset(xe,a.options.maxBounds),D(function(){a.panBy(xe,{duration:de,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",k_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var A_=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),me(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,f=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*s,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[s,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,s];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=s;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-s},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],s.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;er(s)}}});Ee.addInitHook("addHandler","keyboard",A_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var R_=cn.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=Ua(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),er(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,x=c?Math.ceil(g/c)*c:g,M=s._limitZoom(a+(this._delta>0?x:-x))-a;this._delta=0,this._startTime=null,M&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+M):s.setZoomAround(this._lastMousePos,a+M))}});Ee.addInitHook("addHandler","scrollWheelZoom",R_);var TI=600;Ee.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var b_=cn.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",ht),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),TI),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",ht),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",b_),Ee.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var L_=cn.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),ht(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),f=a.mouseEventToContainerPoint(s.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var x=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&x.x===0&&x.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var M=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(M,this,!0),ht(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",L_),Ee.BoxZoom=C_,Ee.DoubleClickZoom=P_,Ee.Drag=k_,Ee.Keyboard=A_,Ee.ScrollWheelZoom=R_,Ee.TapHold=b_,Ee.TouchZoom=L_,n.Bounds=he,n.Browser=ae,n.CRS=ct,n.Canvas=x_,n.Circle=Gd,n.CircleMarker=ec,n.Class=ee,n.Control=Jt,n.DivIcon=v_,n.DivOverlay=sr,n.DomEvent=gs,n.DomUtil=qd,n.Draggable=Fn,n.Evented=We,n.FeatureGroup=Nr,n.GeoJSON=Dr,n.GridLayer=Xa,n.Handler=cn,n.Icon=yo,n.ImageOverlay=sc,n.LatLng=we,n.LatLngBounds=Ze,n.Layer=jn,n.LayerGroup=_o,n.LineUtil=In,n.Map=Ee,n.Marker=Ju,n.Mixin=Yu,n.Path=ci,n.Point=$,n.PolyUtil=po,n.Polygon=vo,n.Polyline=Or,n.Popup=oc,n.PosAnimation=Wa,n.Projection=ir,n.Rectangle=S_,n.Renderer=Mr,n.SVG=el,n.SVGOverlay=y_,n.TileLayer=Eo,n.Tooltip=ac,n.Transformation=ka,n.Util=R,n.VideoOverlay=__,n.bind=l,n.bounds=ve,n.canvas=T_,n.circle=uI,n.circleMarker=lI,n.control=nr,n.divIcon=yI,n.extend=i,n.featureGroup=sI,n.geoJSON=g_,n.geoJson=dI,n.gridLayer=vI,n.icon=oI,n.imageOverlay=fI,n.latLng=ce,n.latLngBounds=Se,n.layerGroup=iI,n.map=uo,n.marker=aI,n.point=X,n.polygon=hI,n.polyline=cI,n.popup=gI,n.rectangle=xI,n.setOptions=F,n.stamp=d,n.svg=I_,n.svgOverlay=mI,n.tileLayer=w_,n.tooltip=_I,n.transformation=ei,n.version=r,n.videoOverlay=pI;var II=window.L;n.noConflict=function(){return window.L=II,this},window.L=n})})(cm,cm.exports);var Sa=cm.exports;const hm=D0(Sa);function Vd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Fd(t,e){return e==null?function(r,i){const o=q.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=q.useRef();o.current||(o.current=t(r,i));const l=q.useRef(r),{instance:h}=o.current;return q.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,i]),o}}function J1(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function eI(t){return function(n){const r=d_(),i=t(Md(n,r),r);return Z1(r.map,n.attribution),f_(i.current,n.eventHandlers),J1(i.current,r),i}}function MD(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function VD(t){return function(n){const r=d_(),i=t(Md(n,r),r);return f_(i.current,n.eventHandlers),J1(i.current,r),MD(i.current,n),i}}function FD(t,e){const n=Fd(t,e),r=eI(n);return X1(r)}function zD(t,e){const n=Fd(t),r=DD(n,e);return ND(r)}function jD(t,e){const n=Fd(t,e),r=VD(n);return X1(r)}function BD(t,e){const n=Fd(t,e),r=eI(n);return OD(r)}function UD(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function dm(){return dm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}function HD({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},v){const[E]=q.useState({className:i,id:o,style:h}),[A,V]=q.useState(null);q.useImperativeHandle(v,()=>(A==null?void 0:A.map)??null,[A]);const F=q.useCallback(N=>{if(N!==null&&A===null){const T=new Sa.Map(N,_);n!=null&&p!=null?T.setView(n,p):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),V(LD(T))}},[]);q.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const z=A?Ml.createElement(Y1,{value:A},r):l??null;return Ml.createElement("div",dm({},E,{ref:F}),z)}const WD=q.forwardRef(HD),tI=FD(function({position:e,...n},r){const i=new Sa.Marker(e,n);return Vd(i,K1(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),$D=jD(function({positions:e,...n},r){const i=new Sa.Polygon(e,n);return Vd(i,K1(r,{overlayContainer:i}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),nI=zD(function(e,n){const r=new Sa.Popup(e,n.overlayContainer);return Vd(r,n)},function(e,n,{position:r},i){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),i(!0))}function d(p){p.popup===l&&i(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,i,r])}),qD=BD(function({url:e,...n},r){const i=new Sa.TileLayer(e,Md(n,r));return Vd(i,r)},function(e,n,r){UD(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),GD=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],ZD=(t,e=3)=>{const n=[];for(let r=0;r<t.length-1;r++){const i=t[r],o=t[r+1];for(let l=0;l<e;l++){const h=l/e;n.push([i[0]+(o[0]-i[0])*h,i[1]+(o[1]-i[1])*h])}}return n},KD=(t,e)=>{const n=ZD(t,5),r=1/111,i=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],_=p[0]-o,v=p[1]-l,E=Math.sqrt(_*_+v*v);if(E===0)continue;const A=_/E,V=v/E,F=Math.atan2(v,_)*(180/Math.PI);let z=0;if(F>=45&&F<=135){const T=1-Math.abs((F-90)/45);z+=100*T}if(Math.abs(F)>=135){const T=Math.abs(F),k=1-Math.abs((T-180)/45);z+=100*k}const N=Math.max(0,e-z);h.push([p[0]+A*N*r,p[1]+V*N*i])}return h},QD=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],YD=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],O0=(t,e)=>{const n=e?"red":"white";return hm.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},XD=({facility:t,onViewDetails:e})=>{var l,h;const n=q.useRef(null);q.useEffect(()=>{if(n.current){const d=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(O0(d,t.hit))}},[t.hit,t.type]);const r=d=>{switch(d){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}},i=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,o=((h=t.location)==null?void 0:h.longitude)??t.longitude??0;return w.jsx(tI,{ref:n,position:[i,o],icon:O0(r(t.type),t.hit),children:w.jsx(nI,{children:w.jsxs("div",{style:{color:"#000",minWidth:"200px"},children:[w.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),w.jsx("div",{style:{marginBottom:"8px"},children:w.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Type:"})," ",w.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),w.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[i.toFixed(4),", ",o.toFixed(4)]}),w.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#2563eb",onMouseOut:d=>d.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details →"})]})})})},JD=()=>{const t=yu(),[e,n]=q.useState([]),[r,i]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,_]=q.useState(0),[v,E]=q.useState(!0),[A,V]=q.useState(!0),[F,z]=q.useState(!0),[N,T]=q.useState(!0),[k,j]=q.useState(!0),[G,J]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!be){console.error("Firebase not initialized");return}const D=(await hr(cr(be,tt.FACILITIES))).docs.map(P=>({id:parseInt(P.id),...P.data()})).filter(P=>!P.draft);n(D)}catch(O){console.error("Error fetching facilities:",O)}})()},[]);const b=I=>{t(`/facility/${I}`)},C=e.filter(I=>!(r!=="all"&&I.type!==r||I.type==="refinery"&&!v||I.type==="extraction"&&!A||I.type==="storage"&&!F||o==="hit"&&!I.hit||o==="operational"&&I.hit||I.capacity<p||h&&!I.name.toLowerCase().includes(h.toLowerCase())));return w.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"320px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[w.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),w.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[C.length," of ",e.length," facilities"]})]}),w.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),w.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:I=>d(I.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:I=>I.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:I=>I.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:I=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:I=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Min. Capacity"}),w.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px",marginBottom:"8px",fontWeight:"600"},children:[p.toLocaleString()," barrels/day"]}),w.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:I=>_(Number(I.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"5px"}})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Facility Types"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:v,onChange:I=>E(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#FF5733",fontSize:"16px",lineHeight:"1"},children:"●"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:A,onChange:I=>V(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#33FF57",fontSize:"16px",lineHeight:"1"},children:"●"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:F,onChange:I=>z(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#3357FF",fontSize:"16px",lineHeight:"1"},children:"●"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Weapon Ranges"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#10B981",fontSize:"16px"},children:"■"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"500km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#F97316",fontSize:"16px"},children:"■"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1000km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#EF4444",fontSize:"16px"},children:"■"}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1500km Range"})]})]})]})]})]}),w.jsx("div",{style:{flex:1,position:"relative"},children:w.jsxs(WD,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[w.jsx(qD,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),QD.map(I=>{if(I.range===500&&!N||I.range===1e3&&!k||I.range===1500&&!G)return null;const O=KD(GD,I.range);return w.jsx($D,{positions:O,pathOptions:{color:I.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}},I.range)}),YD.map(I=>{let O;return I.name==="Moscow"?O=hm.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${I.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):I.name==="Kyiv"&&I.colors&&(O=hm.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${I.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${I.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),w.jsx(tI,{position:[I.lat,I.lon],icon:O,children:w.jsx(nI,{children:w.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:I.name})})},I.name)}),C.map(I=>w.jsx(XD,{facility:I,onViewDetails:b},I.id))]})})]})},eM=()=>{var v,E;const{id:t}=lg(),e=yu(),[n,r]=q.useState(null),[i,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!be){console.error("Firebase not initialized"),h(!1);return}const V=Rn(be,tt.FACILITIES,t),F=await Kg(V);if(F.exists()){r({id:parseInt(F.id),...F.data()});const z=cr(be,tt.HITS),N=Xc(z,Jc("facilityId","==",parseInt(t)),$2("date","desc")),k=(await hr(N)).docs.map(j=>({id:j.data().id,...j.data()})).filter(j=>!j.draft);o(k)}else console.error("Facility not found");h(!1)}catch(V){console.error("Error fetching facility:",V),h(!1)}})()},[t]),l)return w.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[w.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),w.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((v=n.location)==null?void 0:v.latitude)??n.latitude??0,p=((E=n.location)==null?void 0:E.longitude)??n.longitude??0,_=A=>{switch(A){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[w.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:"← Back to Map"}),w.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),w.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),w.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:w.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),w.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("span",{style:{color:_(n.type),fontSize:"28px"},children:"●"}),w.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),w.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),w.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),w.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),"°"]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),"°"]})]})]}),w.jsx("div",{style:{marginTop:"20px"},children:w.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps →"})})]}),i.length>0&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),w.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[i.length," ",i.length===1?"HIT":"HITS"]})]}),w.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:i.map((A,V)=>w.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[w.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:i.length-V}),w.jsxs("div",{children:[w.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(A.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),w.jsxs("div",{style:{fontSize:"13px",color:"#888",display:"flex",gap:"12px",flexWrap:"wrap"},children:[A.severity&&w.jsxs("span",{children:["Severity: ",w.jsx("span",{style:{color:A.severity==="destroyed"?"#f44336":"#FF9800",fontWeight:"600",textTransform:"uppercase"},children:A.severity})]}),A.damagePercentage!=null&&w.jsxs("span",{children:["Impact: ",w.jsxs("span",{style:{color:"#f44336",fontWeight:"600"},children:["-",A.damagePercentage,"%"]})]}),A.expectedRepairTime&&w.jsxs("span",{children:["Repair: ",w.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[A.expectedRepairTime," days"]})]})]})]})]})}),(A.mediaLinks&&A.mediaLinks.length>0||A.videoLink)&&w.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:A.mediaLinks&&A.mediaLinks.length>0?A.mediaLinks.map((F,z)=>w.jsxs("a",{href:F,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",display:"inline-block"},children:[F.includes("youtube")||F.includes("youtu.be")||F.includes("video")?"📹":"📷"," Media ",z+1]},z)):A.videoLink&&w.jsx("a",{href:A.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"📹 Video"})}),A.notes&&w.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:A.notes})]},A.id))})]})]})})]})},tM=()=>w.jsx(tk,{children:w.jsxs(XP,{children:[w.jsx(Io,{path:"/",element:w.jsx(JD,{})}),w.jsx(Io,{path:"/facility/:id",element:w.jsx(eM,{})}),w.jsx(Io,{path:"/admin",element:w.jsx(kD,{})}),w.jsx(Io,{path:"/admin/facility/:id",element:w.jsx(AD,{})}),w.jsx(Io,{path:"/admin/hit/:id",element:w.jsx(RD,{})})]})}),nM=Uf.createRoot(document.getElementById("root"));nM.render(w.jsx(Ml.StrictMode,{children:w.jsx(tM,{})}));
