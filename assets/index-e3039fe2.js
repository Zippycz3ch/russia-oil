function HI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var WI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u0={exports:{}},Vh={},c0={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ru=Symbol.for("react.element"),$I=Symbol.for("react.portal"),qI=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),ZI=Symbol.for("react.profiler"),KI=Symbol.for("react.provider"),QI=Symbol.for("react.context"),YI=Symbol.for("react.forward_ref"),XI=Symbol.for("react.suspense"),JI=Symbol.for("react.memo"),eS=Symbol.for("react.lazy"),p_=Symbol.iterator;function tS(t){return t===null||typeof t!="object"?null:(t=p_&&t[p_]||t["@@iterator"],typeof t=="function"?t:null)}var h0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d0=Object.assign,f0={};function ra(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||h0}ra.prototype.isReactComponent={};ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p0(){}p0.prototype=ra.prototype;function em(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||h0}var tm=em.prototype=new p0;tm.constructor=em;d0(tm,ra.prototype);tm.isPureReactComponent=!0;var m_=Array.isArray,m0=Object.prototype.hasOwnProperty,nm={current:null},g0={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)m0.call(e,i)&&!g0.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:ru,type:t,key:o,ref:l,props:s,_owner:nm.current}}function nS(t,e){return{$$typeof:ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function im(t){return typeof t=="object"&&t!==null&&t.$$typeof===ru}function iS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g_=/\/+/g;function Hd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iS(""+t.key):e.toString(36)}function Tc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ru:case $I:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Hd(l,0):i,m_(s)?(n="",t!=null&&(n=t.replace(g_,"$&/")+"/"),Tc(s,e,n,"",function(p){return p})):s!=null&&(im(s)&&(s=nS(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(g_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",m_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Hd(o,h);l+=Tc(o,e,n,d,s)}else if(d=tS(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Hd(o,h++),l+=Tc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Yu(t,e,n){if(t==null)return t;var i=[],s=0;return Tc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Ic={transition:null},sS={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:nm};function y0(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=ra;xe.Fragment=qI;xe.Profiler=ZI;xe.PureComponent=em;xe.StrictMode=GI;xe.Suspense=XI;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sS;xe.act=y0;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=d0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=nm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)m0.call(e,d)&&!g0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:ru,type:t.type,key:s,ref:o,props:i,_owner:l}};xe.createContext=function(t){return t={$$typeof:QI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KI,_context:t},t.Consumer=t};xe.createElement=_0;xe.createFactory=function(t){var e=_0.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:YI,render:t}};xe.isValidElement=im;xe.lazy=function(t){return{$$typeof:eS,_payload:{_status:-1,_result:t},_init:rS}};xe.memo=function(t,e){return{$$typeof:JI,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ic.transition;Ic.transition={};try{t()}finally{Ic.transition=e}};xe.unstable_act=y0;xe.useCallback=function(t,e){return Qt.current.useCallback(t,e)};xe.useContext=function(t){return Qt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Qt.current.useEffect(t,e)};xe.useId=function(){return Qt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Qt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};xe.useRef=function(t){return Qt.current.useRef(t)};xe.useState=function(t){return Qt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Qt.current.useTransition()};xe.version="18.3.1";c0.exports=xe;var $=c0.exports;const xs=l0($),oS=HI({__proto__:null,default:xs},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=$,lS=Symbol.for("react.element"),uS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,hS=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dS={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)cS.call(e,i)&&!dS.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lS,type:t,key:o,ref:l,props:s,_owner:hS.current}}Vh.Fragment=uS;Vh.jsx=v0;Vh.jsxs=v0;u0.exports=Vh;var rm=u0.exports;const Xu=rm.Fragment,V=rm.jsx,Z=rm.jsxs;var Lf={},w0={exports:{}},En={},E0={exports:{}},T0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,fe){var te=G.length;G.push(fe);e:for(;0<te;){var pe=te-1>>>1,Ie=G[pe];if(0<s(Ie,fe))G[pe]=fe,G[te]=Ie,te=pe;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var fe=G[0],te=G.pop();if(te!==fe){G[0]=te;e:for(var pe=0,Ie=G.length,Q=Ie>>>1;pe<Q;){var ie=2*(pe+1)-1,le=G[ie],ce=ie+1,Fe=G[ce];if(0>s(le,te))ce<Ie&&0>s(Fe,le)?(G[pe]=Fe,G[ce]=te,pe=ce):(G[pe]=le,G[ie]=te,pe=ie);else if(ce<Ie&&0>s(Fe,te))G[pe]=Fe,G[ce]=te,pe=ce;else break e}}return fe}function s(G,fe){var te=G.sortIndex-fe.sortIndex;return te!==0?te:G.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],y=1,v=null,E=3,A=!1,M=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var fe=n(p);fe!==null;){if(fe.callback===null)i(p);else if(fe.startTime<=G)i(p),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=n(p)}}function W(G){if(D=!1,b(G),!M)if(n(d)!==null)M=!0,tt(X);else{var fe=n(p);fe!==null&&dn(W,fe.startTime-G)}}function X(G,fe){M=!1,D&&(D=!1,k(I),I=-1),A=!0;var te=E;try{for(b(fe),v=n(d);v!==null&&(!(v.expirationTime>fe)||G&&!N());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,E=v.priorityLevel;var Ie=pe(v.expirationTime<=fe);fe=t.unstable_now(),typeof Ie=="function"?v.callback=Ie:v===n(d)&&i(d),b(fe)}else i(d);v=n(d)}if(v!==null)var Q=!0;else{var ie=n(p);ie!==null&&dn(W,ie.startTime-fe),Q=!1}return Q}finally{v=null,E=te,A=!1}}var ee=!1,x=null,I=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function F(){if(x!==null){var G=t.unstable_now();C=G;var fe=!0;try{fe=x(!0,G)}finally{fe?R():(ee=!1,x=null)}}else ee=!1}var R;if(typeof P=="function")R=function(){P(F)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Xt=Me.port2;Me.port1.onmessage=F,R=function(){Xt.postMessage(null)}}else R=function(){U(F,0)};function tt(G){x=G,ee||(ee=!0,R())}function dn(G,fe){I=U(function(){G(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){M||A||(M=!0,tt(X))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var te=E;E=fe;try{return G()}finally{E=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,fe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=E;E=G;try{return fe()}finally{E=te}},t.unstable_scheduleCallback=function(G,fe,te){var pe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?pe+te:pe):te=pe,G){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=te+Ie,G={id:y++,callback:fe,priorityLevel:G,startTime:te,expirationTime:Ie,sortIndex:-1},te>pe?(G.sortIndex=te,e(p,G),n(d)===null&&G===n(p)&&(D?(k(I),I=-1):D=!0,dn(W,te-pe))):(G.sortIndex=Ie,e(d,G),M||A||(M=!0,tt(X))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var fe=E;return function(){var te=E;E=fe;try{return G.apply(this,arguments)}finally{E=te}}}})(T0);E0.exports=T0;var fS=E0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=$,wn=fS;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I0=new Set,Rl={};function Vs(t,e){Ho(t,e),Ho(t+"Capture",e)}function Ho(t,e){for(Rl[t]=e,t=0;t<e.length;t++)I0.add(e[t])}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=Object.prototype.hasOwnProperty,mS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,__={},y_={};function gS(t){return bf.call(y_,t)?!0:bf.call(__,t)?!1:mS.test(t)?y_[t]=!0:(__[t]=!0,!1)}function _S(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yS(t,e,n,i){if(e===null||typeof e>"u"||_S(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sm,om);Nt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sm,om);Nt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sm,om);Nt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,i){var s=Nt.hasOwnProperty(e)?Nt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yS(e,n,s,i)&&(n=null),i||s===null?gS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var er=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),vo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),S0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),x0=Symbol.for("react.offscreen"),v_=Symbol.iterator;function Ka(t){return t===null||typeof t!="object"?null:(t=v_&&t[v_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Wd;function rl(t){if(Wd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wd=e&&e[1]||""}return`
`+Wd+t}var $d=!1;function qd(t,e){if(!t||$d)return"";$d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{$d=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function vS(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=qd(t.type,!1),t;case 11:return t=qd(t.type.render,!1),t;case 1:return t=qd(t.type,!0),t;default:return""}}function Mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case vo:return"Portal";case Nf:return"Profiler";case lm:return"StrictMode";case Of:return"Suspense";case Df:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P0:return(t.displayName||"Context")+".Consumer";case S0:return(t._context.displayName||"Context")+".Provider";case um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cm:return e=t.displayName||null,e!==null?e:Mf(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Mf(t(e))}catch{}}return null}function wS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mf(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ES(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=ES(t))}function A0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=C0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R0(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function Ff(t,e){R0(t,e);var n=jr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&zf(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function E_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zf(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function bo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(sl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function k0(t,e){var n=jr(e.value),i=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function I_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,b0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TS=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){TS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function N0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function O0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=N0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var IS=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(IS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=null;function hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $f=null,No=null,Oo=null;function S_(t){if(t=au(t)){if(typeof $f!="function")throw Error(J(280));var e=t.stateNode;e&&(e=jh(e),$f(t.stateNode,t.type,e))}}function D0(t){No?Oo?Oo.push(t):Oo=[t]:No=t}function M0(){if(No){var t=No,e=Oo;if(Oo=No=null,S_(t),e)for(t=0;t<e.length;t++)S_(e[t])}}function V0(t,e){return t(e)}function F0(){}var Gd=!1;function z0(t,e,n){if(Gd)return t(e,n);Gd=!0;try{return V0(t,e,n)}finally{Gd=!1,(No!==null||Oo!==null)&&(F0(),M0())}}function Ll(t,e){var n=t.stateNode;if(n===null)return null;var i=jh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var qf=!1;if(qi)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){qf=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{qf=!1}function SS(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var ml=!1,Zc=null,Kc=!1,Gf=null,PS={onError:function(t){ml=!0,Zc=t}};function xS(t,e,n,i,s,o,l,h,d){ml=!1,Zc=null,SS.apply(PS,arguments)}function CS(t,e,n,i,s,o,l,h,d){if(xS.apply(this,arguments),ml){if(ml){var p=Zc;ml=!1,Zc=null}else throw Error(J(198));Kc||(Kc=!0,Gf=p)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P_(t){if(Fs(t)!==t)throw Error(J(188))}function AS(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return P_(s),t;if(o===i)return P_(s),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function U0(t){return t=AS(t),t!==null?j0(t):null}function j0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j0(t);if(e!==null)return e;t=t.sibling}return null}var H0=wn.unstable_scheduleCallback,x_=wn.unstable_cancelCallback,RS=wn.unstable_shouldYield,kS=wn.unstable_requestPaint,it=wn.unstable_now,LS=wn.unstable_getCurrentPriorityLevel,dm=wn.unstable_ImmediatePriority,W0=wn.unstable_UserBlockingPriority,Qc=wn.unstable_NormalPriority,bS=wn.unstable_LowPriority,$0=wn.unstable_IdlePriority,Fh=null,di=null;function NS(t){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Fh,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:MS,OS=Math.log,DS=Math.LN2;function MS(t){return t>>>=0,t===0?32:31-(OS(t)/DS|0)|0}var nc=64,ic=4194304;function ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=ol(h):(o&=l,o!==0&&(i=ol(o)))}else l=n&~s,l!==0?i=ol(l):o!==0&&(i=ol(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-$n(e),s=1<<n,i|=t[n],e&=~s;return i}function VS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-$n(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=VS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q0(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function Zd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function zS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$n(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-$n(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Ve=0;function G0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z0,pm,K0,Q0,Y0,Kf=!1,rc=[],Ar=null,Rr=null,kr=null,bl=new Map,Nl=new Map,yr=[],BS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(e.pointerId)}}function Ya(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function US(t,e,n,i,s){switch(e){case"focusin":return Ar=Ya(Ar,t,e,n,i,s),!0;case"dragenter":return Rr=Ya(Rr,t,e,n,i,s),!0;case"mouseover":return kr=Ya(kr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return bl.set(o,Ya(bl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Nl.set(o,Ya(Nl.get(o)||null,t,e,n,i,s)),!0}return!1}function X0(t){var e=ys(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=B0(n),e!==null){t.blockedOn=e,Y0(t.priority,function(){K0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Wf=i,n.target.dispatchEvent(i),Wf=null}else return e=au(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function A_(t,e,n){Sc(t)&&n.delete(e)}function jS(){Kf=!1,Ar!==null&&Sc(Ar)&&(Ar=null),Rr!==null&&Sc(Rr)&&(Rr=null),kr!==null&&Sc(kr)&&(kr=null),bl.forEach(A_),Nl.forEach(A_)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Kf||(Kf=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,jS)))}function Ol(t){function e(s){return Xa(s,t)}if(0<rc.length){Xa(rc[0],t);for(var n=1;n<rc.length;n++){var i=rc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ar!==null&&Xa(Ar,t),Rr!==null&&Xa(Rr,t),kr!==null&&Xa(kr,t),bl.forEach(e),Nl.forEach(e),n=0;n<yr.length;n++)i=yr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)X0(n),n.blockedOn===null&&yr.shift()}var Do=er.ReactCurrentBatchConfig,Xc=!0;function HS(t,e,n,i){var s=Ve,o=Do.transition;Do.transition=null;try{Ve=1,mm(t,e,n,i)}finally{Ve=s,Do.transition=o}}function WS(t,e,n,i){var s=Ve,o=Do.transition;Do.transition=null;try{Ve=4,mm(t,e,n,i)}finally{Ve=s,Do.transition=o}}function mm(t,e,n,i){if(Xc){var s=Qf(t,e,n,i);if(s===null)sf(t,e,i,Jc,n),C_(t,i);else if(US(s,t,e,n,i))i.stopPropagation();else if(C_(t,i),e&4&&-1<BS.indexOf(t)){for(;s!==null;){var o=au(s);if(o!==null&&Z0(o),o=Qf(t,e,n,i),o===null&&sf(t,e,i,Jc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else sf(t,e,i,null,n)}}var Jc=null;function Qf(t,e,n,i){if(Jc=null,t=hm(i),t=ys(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function J0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LS()){case dm:return 1;case W0:return 4;case Qc:case bS:return 16;case $0:return 536870912;default:return 16}default:return 16}}var Sr=null,gm=null,Pc=null;function ew(){if(Pc)return Pc;var t,e=gm,n=e.length,i,s="value"in Sr?Sr.value:Sr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Pc=s.slice(t,1<i?1-i:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function R_(){return!1}function Tn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sc:R_,this.isPropagationStopped=R_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_m=Tn(sa),ou=Qe({},sa,{view:0,detail:0}),$S=Tn(ou),Kd,Qd,Ja,zh=Qe({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(Kd=t.screenX-Ja.screenX,Qd=t.screenY-Ja.screenY):Qd=Kd=0,Ja=t),Kd)},movementY:function(t){return"movementY"in t?t.movementY:Qd}}),k_=Tn(zh),qS=Qe({},zh,{dataTransfer:0}),GS=Tn(qS),ZS=Qe({},ou,{relatedTarget:0}),Yd=Tn(ZS),KS=Qe({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Tn(KS),YS=Qe({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XS=Tn(YS),JS=Qe({},sa,{data:0}),L_=Tn(JS),eP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nP[t])?!!e[t]:!1}function ym(){return iP}var rP=Qe({},ou,{key:function(t){if(t.key){var e=eP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sP=Tn(rP),oP=Qe({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b_=Tn(oP),aP=Qe({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),lP=Tn(aP),uP=Qe({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),cP=Tn(uP),hP=Qe({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dP=Tn(hP),fP=[9,13,27,32],vm=qi&&"CompositionEvent"in window,gl=null;qi&&"documentMode"in document&&(gl=document.documentMode);var pP=qi&&"TextEvent"in window&&!gl,tw=qi&&(!vm||gl&&8<gl&&11>=gl),N_=String.fromCharCode(32),O_=!1;function nw(t,e){switch(t){case"keyup":return fP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function mP(t,e){switch(t){case"compositionend":return iw(e);case"keypress":return e.which!==32?null:(O_=!0,N_);case"textInput":return t=e.data,t===N_&&O_?null:t;default:return null}}function gP(t,e){if(Eo)return t==="compositionend"||!vm&&nw(t,e)?(t=ew(),Pc=gm=Sr=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tw&&e.locale!=="ko"?null:e.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_P[t.type]:e==="textarea"}function rw(t,e,n,i){D0(i),e=eh(e,"onChange"),0<e.length&&(n=new _m("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var _l=null,Dl=null;function yP(t){mw(t,0)}function Bh(t){var e=So(t);if(A0(e))return t}function vP(t,e){if(t==="change")return e}var sw=!1;if(qi){var Xd;if(qi){var Jd="oninput"in document;if(!Jd){var M_=document.createElement("div");M_.setAttribute("oninput","return;"),Jd=typeof M_.oninput=="function"}Xd=Jd}else Xd=!1;sw=Xd&&(!document.documentMode||9<document.documentMode)}function V_(){_l&&(_l.detachEvent("onpropertychange",ow),Dl=_l=null)}function ow(t){if(t.propertyName==="value"&&Bh(Dl)){var e=[];rw(e,Dl,t,hm(t)),z0(yP,e)}}function wP(t,e,n){t==="focusin"?(V_(),_l=e,Dl=n,_l.attachEvent("onpropertychange",ow)):t==="focusout"&&V_()}function EP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(Dl)}function TP(t,e){if(t==="click")return Bh(e)}function IP(t,e){if(t==="input"||t==="change")return Bh(e)}function SP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:SP;function Ml(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!bf.call(e,s)||!Zn(t[s],e[s]))return!1}return!0}function F_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=F_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=F_(n)}}function aw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lw(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PP(t){var e=lw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aw(n.ownerDocument.documentElement,n)){if(i!==null&&wm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=z_(n,o);var l=z_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xP=qi&&"documentMode"in document&&11>=document.documentMode,To=null,Yf=null,yl=null,Xf=!1;function B_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||To==null||To!==Gc(i)||(i=To,"selectionStart"in i&&wm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),yl&&Ml(yl,i)||(yl=i,i=eh(Yf,"onSelect"),0<i.length&&(e=new _m("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=To)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Io={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},ef={},uw={};qi&&(uw=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Uh(t){if(ef[t])return ef[t];if(!Io[t])return t;var e=Io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uw)return ef[t]=e[n];return t}var cw=Uh("animationend"),hw=Uh("animationiteration"),dw=Uh("animationstart"),fw=Uh("transitionend"),pw=new Map,U_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){pw.set(t,e),Vs(e,[t])}for(var tf=0;tf<U_.length;tf++){var nf=U_[tf],CP=nf.toLowerCase(),AP=nf[0].toUpperCase()+nf.slice(1);Qr(CP,"on"+AP)}Qr(cw,"onAnimationEnd");Qr(hw,"onAnimationIteration");Qr(dw,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(fw,"onTransitionEnd");Ho("onMouseEnter",["mouseout","mouseover"]);Ho("onMouseLeave",["mouseout","mouseover"]);Ho("onPointerEnter",["pointerout","pointerover"]);Ho("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RP=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function j_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,CS(i,e,void 0,t),t.currentTarget=null}function mw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;j_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;j_(s,h,p),o=d}}}if(Kc)throw t=Gf,Kc=!1,Gf=null,t}function We(t,e){var n=e[ip];n===void 0&&(n=e[ip]=new Set);var i=t+"__bubble";n.has(i)||(gw(e,t,2,!1),n.add(i))}function rf(t,e,n){var i=0;e&&(i|=4),gw(n,t,i,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Vl(t){if(!t[ac]){t[ac]=!0,I0.forEach(function(n){n!=="selectionchange"&&(RP.has(n)||rf(n,!1,t),rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,rf("selectionchange",!1,e))}}function gw(t,e,n,i){switch(J0(e)){case 1:var s=HS;break;case 4:s=WS;break;default:s=mm}n=s.bind(null,e,n,t),s=void 0,!qf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sf(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ys(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}z0(function(){var p=o,y=hm(n),v=[];e:{var E=pw.get(t);if(E!==void 0){var A=_m,M=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":A=sP;break;case"focusin":M="focus",A=Yd;break;case"focusout":M="blur",A=Yd;break;case"beforeblur":case"afterblur":A=Yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=k_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=GS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=lP;break;case cw:case hw:case dw:A=QS;break;case fw:A=cP;break;case"scroll":A=$S;break;case"wheel":A=dP;break;case"copy":case"cut":case"paste":A=XS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=b_}var D=(e&4)!==0,U=!D&&t==="scroll",k=D?E!==null?E+"Capture":null:E;D=[];for(var P=p,b;P!==null;){b=P;var W=b.stateNode;if(b.tag===5&&W!==null&&(b=W,k!==null&&(W=Ll(P,k),W!=null&&D.push(Fl(P,W,b)))),U)break;P=P.return}0<D.length&&(E=new A(E,M,null,n,y),v.push({event:E,listeners:D}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",E&&n!==Wf&&(M=n.relatedTarget||n.fromElement)&&(ys(M)||M[Gi]))break e;if((A||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,A?(M=n.relatedTarget||n.toElement,A=p,M=M?ys(M):null,M!==null&&(U=Fs(M),M!==U||M.tag!==5&&M.tag!==6)&&(M=null)):(A=null,M=p),A!==M)){if(D=k_,W="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(D=b_,W="onPointerLeave",k="onPointerEnter",P="pointer"),U=A==null?E:So(A),b=M==null?E:So(M),E=new D(W,P+"leave",A,n,y),E.target=U,E.relatedTarget=b,W=null,ys(y)===p&&(D=new D(k,P+"enter",M,n,y),D.target=b,D.relatedTarget=U,W=D),U=W,A&&M)t:{for(D=A,k=M,P=0,b=D;b;b=po(b))P++;for(b=0,W=k;W;W=po(W))b++;for(;0<P-b;)D=po(D),P--;for(;0<b-P;)k=po(k),b--;for(;P--;){if(D===k||k!==null&&D===k.alternate)break t;D=po(D),k=po(k)}D=null}else D=null;A!==null&&H_(v,E,A,D,!1),M!==null&&U!==null&&H_(v,U,M,D,!0)}}e:{if(E=p?So(p):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var X=vP;else if(D_(E))if(sw)X=IP;else{X=EP;var ee=wP}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(X=TP);if(X&&(X=X(t,p))){rw(v,X,n,y);break e}ee&&ee(t,E,p),t==="focusout"&&(ee=E._wrapperState)&&ee.controlled&&E.type==="number"&&zf(E,"number",E.value)}switch(ee=p?So(p):window,t){case"focusin":(D_(ee)||ee.contentEditable==="true")&&(To=ee,Yf=p,yl=null);break;case"focusout":yl=Yf=To=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,B_(v,n,y);break;case"selectionchange":if(xP)break;case"keydown":case"keyup":B_(v,n,y)}var x;if(vm)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Eo?nw(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(tw&&n.locale!=="ko"&&(Eo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Eo&&(x=ew()):(Sr=y,gm="value"in Sr?Sr.value:Sr.textContent,Eo=!0)),ee=eh(p,I),0<ee.length&&(I=new L_(I,t,null,n,y),v.push({event:I,listeners:ee}),x?I.data=x:(x=iw(n),x!==null&&(I.data=x)))),(x=pP?mP(t,n):gP(t,n))&&(p=eh(p,"onBeforeInput"),0<p.length&&(y=new L_("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:p}),y.data=x))}mw(v,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eh(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ll(t,n),o!=null&&i.unshift(Fl(t,o,s)),o=Ll(t,e),o!=null&&i.push(Fl(t,o,s))),t=t.return}return i}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=Ll(n,o),d!=null&&l.unshift(Fl(n,d,h))):s||(d=Ll(n,o),d!=null&&l.push(Fl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var kP=/\r\n?/g,LP=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(kP,`
`).replace(LP,"")}function lc(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(J(425))}function th(){}var Jf=null,ep=null;function tp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,bP=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,NP=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(t){return $_.resolve(null).then(t).catch(OP)}:np;function OP(t){setTimeout(function(){throw t})}function of(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ol(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ol(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function q_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oa=Math.random().toString(36).slice(2),hi="__reactFiber$"+oa,zl="__reactProps$"+oa,Gi="__reactContainer$"+oa,ip="__reactEvents$"+oa,DP="__reactListeners$"+oa,MP="__reactHandles$"+oa;function ys(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gi]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=q_(t);t!==null;){if(n=t[hi])return n;t=q_(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[hi]||t[Gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function So(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function jh(t){return t[zl]||null}var rp=[],Po=-1;function Yr(t){return{current:t}}function qe(t){0>Po||(t.current=rp[Po],rp[Po]=null,Po--)}function je(t,e){Po++,rp[Po]=t.current,t.current=e}var Hr={},Wt=Yr(Hr),un=Yr(!1),Cs=Hr;function Wo(t,e){var n=t.type.contextTypes;if(!n)return Hr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function nh(){qe(un),qe(Wt)}function G_(t,e,n){if(Wt.current!==Hr)throw Error(J(168));je(Wt,e),je(un,n)}function _w(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(J(108,wS(t)||"Unknown",s));return Qe({},n,i)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,Cs=Wt.current,je(Wt,t),je(un,un.current),!0}function Z_(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=_w(t,e,Cs),i.__reactInternalMemoizedMergedChildContext=t,qe(un),qe(Wt),je(Wt,t)):qe(un),je(un,n)}var zi=null,Hh=!1,af=!1;function yw(t){zi===null?zi=[t]:zi.push(t)}function VP(t){Hh=!0,yw(t)}function Xr(){if(!af&&zi!==null){af=!0;var t=0,e=Ve;try{var n=zi;for(Ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zi=null,Hh=!1}catch(s){throw zi!==null&&(zi=zi.slice(t+1)),H0(dm,Xr),s}finally{Ve=e,af=!1}}return null}var xo=[],Co=0,rh=null,sh=0,Pn=[],xn=0,As=null,Bi=1,Ui="";function ms(t,e){xo[Co++]=sh,xo[Co++]=rh,rh=t,sh=e}function vw(t,e,n){Pn[xn++]=Bi,Pn[xn++]=Ui,Pn[xn++]=As,As=t;var i=Bi;t=Ui;var s=32-$n(i)-1;i&=~(1<<s),n+=1;var o=32-$n(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Bi=1<<32-$n(e)+s|n<<s|i,Ui=o+t}else Bi=1<<o|n<<s|i,Ui=t}function Em(t){t.return!==null&&(ms(t,1),vw(t,1,0))}function Tm(t){for(;t===rh;)rh=xo[--Co],xo[Co]=null,sh=xo[--Co],xo[Co]=null;for(;t===As;)As=Pn[--xn],Pn[xn]=null,Ui=Pn[--xn],Pn[xn]=null,Bi=Pn[--xn],Pn[xn]=null}var vn=null,_n=null,Ge=!1,jn=null;function ww(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function K_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,_n=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Bi,overflow:Ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,_n=null,!0):!1;default:return!1}}function sp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function op(t){if(Ge){var e=_n;if(e){var n=e;if(!K_(t,e)){if(sp(t))throw Error(J(418));e=Lr(n.nextSibling);var i=vn;e&&K_(t,e)?ww(i,n):(t.flags=t.flags&-4097|2,Ge=!1,vn=t)}}else{if(sp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ge=!1,vn=t}}}function Q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function uc(t){if(t!==vn)return!1;if(!Ge)return Q_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tp(t.type,t.memoizedProps)),e&&(e=_n)){if(sp(t))throw Ew(),Error(J(418));for(;e;)ww(t,e),e=Lr(e.nextSibling)}if(Q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=vn?Lr(t.stateNode.nextSibling):null;return!0}function Ew(){for(var t=_n;t;)t=Lr(t.nextSibling)}function $o(){_n=vn=null,Ge=!1}function Im(t){jn===null?jn=[t]:jn.push(t)}var FP=er.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y_(t){var e=t._init;return e(t._payload)}function Tw(t){function e(k,P){if(t){var b=k.deletions;b===null?(k.deletions=[P],k.flags|=16):b.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function s(k,P){return k=Dr(k,P),k.index=0,k.sibling=null,k}function o(k,P,b){return k.index=b,t?(b=k.alternate,b!==null?(b=b.index,b<P?(k.flags|=2,P):b):(k.flags|=2,P)):(k.flags|=1048576,P)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,P,b,W){return P===null||P.tag!==6?(P=pf(b,k.mode,W),P.return=k,P):(P=s(P,b),P.return=k,P)}function d(k,P,b,W){var X=b.type;return X===wo?y(k,P,b.props.children,W,b.key):P!==null&&(P.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===pr&&Y_(X)===P.type)?(W=s(P,b.props),W.ref=el(k,P,b),W.return=k,W):(W=Nc(b.type,b.key,b.props,null,k.mode,W),W.ref=el(k,P,b),W.return=k,W)}function p(k,P,b,W){return P===null||P.tag!==4||P.stateNode.containerInfo!==b.containerInfo||P.stateNode.implementation!==b.implementation?(P=mf(b,k.mode,W),P.return=k,P):(P=s(P,b.children||[]),P.return=k,P)}function y(k,P,b,W,X){return P===null||P.tag!==7?(P=Is(b,k.mode,W,X),P.return=k,P):(P=s(P,b),P.return=k,P)}function v(k,P,b){if(typeof P=="string"&&P!==""||typeof P=="number")return P=pf(""+P,k.mode,b),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ju:return b=Nc(P.type,P.key,P.props,null,k.mode,b),b.ref=el(k,null,P),b.return=k,b;case vo:return P=mf(P,k.mode,b),P.return=k,P;case pr:var W=P._init;return v(k,W(P._payload),b)}if(sl(P)||Ka(P))return P=Is(P,k.mode,b,null),P.return=k,P;cc(k,P)}return null}function E(k,P,b,W){var X=P!==null?P.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return X!==null?null:h(k,P,""+b,W);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ju:return b.key===X?d(k,P,b,W):null;case vo:return b.key===X?p(k,P,b,W):null;case pr:return X=b._init,E(k,P,X(b._payload),W)}if(sl(b)||Ka(b))return X!==null?null:y(k,P,b,W,null);cc(k,b)}return null}function A(k,P,b,W,X){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(b)||null,h(P,k,""+W,X);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Ju:return k=k.get(W.key===null?b:W.key)||null,d(P,k,W,X);case vo:return k=k.get(W.key===null?b:W.key)||null,p(P,k,W,X);case pr:var ee=W._init;return A(k,P,b,ee(W._payload),X)}if(sl(W)||Ka(W))return k=k.get(b)||null,y(P,k,W,X,null);cc(P,W)}return null}function M(k,P,b,W){for(var X=null,ee=null,x=P,I=P=0,S=null;x!==null&&I<b.length;I++){x.index>I?(S=x,x=null):S=x.sibling;var C=E(k,x,b[I],W);if(C===null){x===null&&(x=S);break}t&&x&&C.alternate===null&&e(k,x),P=o(C,P,I),ee===null?X=C:ee.sibling=C,ee=C,x=S}if(I===b.length)return n(k,x),Ge&&ms(k,I),X;if(x===null){for(;I<b.length;I++)x=v(k,b[I],W),x!==null&&(P=o(x,P,I),ee===null?X=x:ee.sibling=x,ee=x);return Ge&&ms(k,I),X}for(x=i(k,x);I<b.length;I++)S=A(x,k,I,b[I],W),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?I:S.key),P=o(S,P,I),ee===null?X=S:ee.sibling=S,ee=S);return t&&x.forEach(function(N){return e(k,N)}),Ge&&ms(k,I),X}function D(k,P,b,W){var X=Ka(b);if(typeof X!="function")throw Error(J(150));if(b=X.call(b),b==null)throw Error(J(151));for(var ee=X=null,x=P,I=P=0,S=null,C=b.next();x!==null&&!C.done;I++,C=b.next()){x.index>I?(S=x,x=null):S=x.sibling;var N=E(k,x,C.value,W);if(N===null){x===null&&(x=S);break}t&&x&&N.alternate===null&&e(k,x),P=o(N,P,I),ee===null?X=N:ee.sibling=N,ee=N,x=S}if(C.done)return n(k,x),Ge&&ms(k,I),X;if(x===null){for(;!C.done;I++,C=b.next())C=v(k,C.value,W),C!==null&&(P=o(C,P,I),ee===null?X=C:ee.sibling=C,ee=C);return Ge&&ms(k,I),X}for(x=i(k,x);!C.done;I++,C=b.next())C=A(x,k,I,C.value,W),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?I:C.key),P=o(C,P,I),ee===null?X=C:ee.sibling=C,ee=C);return t&&x.forEach(function(F){return e(k,F)}),Ge&&ms(k,I),X}function U(k,P,b,W){if(typeof b=="object"&&b!==null&&b.type===wo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ju:e:{for(var X=b.key,ee=P;ee!==null;){if(ee.key===X){if(X=b.type,X===wo){if(ee.tag===7){n(k,ee.sibling),P=s(ee,b.props.children),P.return=k,k=P;break e}}else if(ee.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===pr&&Y_(X)===ee.type){n(k,ee.sibling),P=s(ee,b.props),P.ref=el(k,ee,b),P.return=k,k=P;break e}n(k,ee);break}else e(k,ee);ee=ee.sibling}b.type===wo?(P=Is(b.props.children,k.mode,W,b.key),P.return=k,k=P):(W=Nc(b.type,b.key,b.props,null,k.mode,W),W.ref=el(k,P,b),W.return=k,k=W)}return l(k);case vo:e:{for(ee=b.key;P!==null;){if(P.key===ee)if(P.tag===4&&P.stateNode.containerInfo===b.containerInfo&&P.stateNode.implementation===b.implementation){n(k,P.sibling),P=s(P,b.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=mf(b,k.mode,W),P.return=k,k=P}return l(k);case pr:return ee=b._init,U(k,P,ee(b._payload),W)}if(sl(b))return M(k,P,b,W);if(Ka(b))return D(k,P,b,W);cc(k,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,P!==null&&P.tag===6?(n(k,P.sibling),P=s(P,b),P.return=k,k=P):(n(k,P),P=pf(b,k.mode,W),P.return=k,k=P),l(k)):n(k,P)}return U}var qo=Tw(!0),Iw=Tw(!1),oh=Yr(null),ah=null,Ao=null,Sm=null;function Pm(){Sm=Ao=ah=null}function xm(t){var e=oh.current;qe(oh),t._currentValue=e}function ap(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){ah=t,Sm=Ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(Sm!==t)if(t={context:t,memoizedValue:e,next:null},Ao===null){if(ah===null)throw Error(J(308));Ao=t,ah.dependencies={lanes:0,firstContext:t}}else Ao=Ao.next=t;return e}var vs=null;function Cm(t){vs===null?vs=[t]:vs.push(t)}function Sw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Cm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zi(t,i)}function Zi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Am(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Zi(t,n)}return s=i.interleaved,s===null?(e.next=e,Cm(i)):(e.next=s.next,s.next=e),i.interleaved=e,Zi(t,n)}function Cc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fm(t,n)}}function X_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lh(t,e,n,i){var s=t.updateQueue;mr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,y=p=d=null,h=o;do{var E=h.lane,A=h.eventTime;if((i&E)===E){y!==null&&(y=y.next={eventTime:A,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,D=h;switch(E=e,A=n,D.tag){case 1:if(M=D.payload,typeof M=="function"){v=M.call(A,v,E);break e}v=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=D.payload,E=typeof M=="function"?M.call(A,v,E):M,E==null)break e;v=Qe({},v,E);break e;case 2:mr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else A={eventTime:A,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=A,d=v):y=y.next=A,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(1);if(y===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);ks|=l,t.lanes=l,t.memoizedState=v}}function J_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(J(191,s));s.call(i)}}}var lu={},fi=Yr(lu),Bl=Yr(lu),Ul=Yr(lu);function ws(t){if(t===lu)throw Error(J(174));return t}function Rm(t,e){switch(je(Ul,e),je(Bl,t),je(fi,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uf(e,t)}qe(fi),je(fi,e)}function Go(){qe(fi),qe(Bl),qe(Ul)}function xw(t){ws(Ul.current);var e=ws(fi.current),n=Uf(e,t.type);e!==n&&(je(Bl,t),je(fi,n))}function km(t){Bl.current===t&&(qe(fi),qe(Bl))}var Ze=Yr(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lf=[];function Lm(){for(var t=0;t<lf.length;t++)lf[t]._workInProgressVersionPrimary=null;lf.length=0}var Ac=er.ReactCurrentDispatcher,uf=er.ReactCurrentBatchConfig,Rs=0,Ke=null,gt=null,It=null,ch=!1,vl=!1,jl=0,zP=0;function Ft(){throw Error(J(321))}function bm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function Nm(t,e,n,i,s,o){if(Rs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ac.current=t===null||t.memoizedState===null?HP:WP,t=n(i,s),vl){o=0;do{if(vl=!1,jl=0,25<=o)throw Error(J(301));o+=1,It=gt=null,e.updateQueue=null,Ac.current=$P,t=n(i,s)}while(vl)}if(Ac.current=hh,e=gt!==null&&gt.next!==null,Rs=0,It=gt=Ke=null,ch=!1,e)throw Error(J(300));return t}function Om(){var t=jl!==0;return jl=0,t}function ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ke.memoizedState=It=t:It=It.next=t,It}function Ln(){if(gt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=It===null?Ke.memoizedState:It.next;if(e!==null)It=e,gt=t;else{if(t===null)throw Error(J(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},It===null?Ke.memoizedState=It=t:It=It.next=t}return It}function Hl(t,e){return typeof e=="function"?e(t):e}function cf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=gt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var y=p.lane;if((Rs&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var v={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=i):d=d.next=v,Ke.lanes|=y,ks|=y}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Zn(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,ks|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Zn(o,e.memoizedState)||(ln=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Cw(){}function Aw(t,e){var n=Ke,i=Ln(),s=e(),o=!Zn(i.memoizedState,s);if(o&&(i.memoizedState=s,ln=!0),i=i.queue,Dm(Lw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Wl(9,kw.bind(null,n,i,s,e),void 0,null),St===null)throw Error(J(349));Rs&30||Rw(n,e,s)}return s}function Rw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,i){e.value=n,e.getSnapshot=i,bw(e)&&Nw(t)}function Lw(t,e,n){return n(function(){bw(e)&&Nw(t)})}function bw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function Nw(t){var e=Zi(t,1);e!==null&&qn(e,t,1,-1)}function ey(t){var e=ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=jP.bind(null,Ke,t),[e.memoizedState,t]}function Wl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ow(){return Ln().memoizedState}function Rc(t,e,n,i){var s=ui();Ke.flags|=t,s.memoizedState=Wl(1|e,n,void 0,i===void 0?null:i)}function Wh(t,e,n,i){var s=Ln();i=i===void 0?null:i;var o=void 0;if(gt!==null){var l=gt.memoizedState;if(o=l.destroy,i!==null&&bm(i,l.deps)){s.memoizedState=Wl(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Wl(1|e,n,o,i)}function ty(t,e){return Rc(8390656,8,t,e)}function Dm(t,e){return Wh(2048,8,t,e)}function Dw(t,e){return Wh(4,2,t,e)}function Mw(t,e){return Wh(4,4,t,e)}function Vw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fw(t,e,n){return n=n!=null?n.concat([t]):null,Wh(4,4,Vw.bind(null,e,t),n)}function Mm(){}function zw(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Bw(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Uw(t,e,n){return Rs&21?(Zn(n,e)||(n=q0(),Ke.lanes|=n,ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function BP(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var i=uf.transition;uf.transition={};try{t(!1),e()}finally{Ve=n,uf.transition=i}}function jw(){return Ln().memoizedState}function UP(t,e,n){var i=Or(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Hw(t))Ww(e,n);else if(n=Sw(t,e,n,i),n!==null){var s=Kt();qn(n,t,i,s),$w(n,e,i)}}function jP(t,e,n){var i=Or(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hw(t))Ww(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Zn(h,l)){var d=e.interleaved;d===null?(s.next=s,Cm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Sw(t,e,s,i),n!==null&&(s=Kt(),qn(n,t,i,s),$w(n,e,i))}}function Hw(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function Ww(t,e){vl=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $w(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fm(t,n)}}var hh={readContext:kn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},HP={readContext:kn,useCallback:function(t,e){return ui().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4194308,4,Vw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rc(4,2,t,e)},useMemo:function(t,e){var n=ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ui();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=UP.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=ui();return t={current:t},e.memoizedState=t},useState:ey,useDebugValue:Mm,useDeferredValue:function(t){return ui().memoizedState=t},useTransition:function(){var t=ey(!1),e=t[0];return t=BP.bind(null,t[1]),ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=ui();if(Ge){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),St===null)throw Error(J(349));Rs&30||Rw(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,ty(Lw.bind(null,i,o,t),[t]),i.flags|=2048,Wl(9,kw.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ui(),e=St.identifierPrefix;if(Ge){var n=Ui,i=Bi;n=(i&~(1<<32-$n(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WP={readContext:kn,useCallback:zw,useContext:kn,useEffect:Dm,useImperativeHandle:Fw,useInsertionEffect:Dw,useLayoutEffect:Mw,useMemo:Bw,useReducer:cf,useRef:Ow,useState:function(){return cf(Hl)},useDebugValue:Mm,useDeferredValue:function(t){var e=Ln();return Uw(e,gt.memoizedState,t)},useTransition:function(){var t=cf(Hl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Aw,useId:jw,unstable_isNewReconciler:!1},$P={readContext:kn,useCallback:zw,useContext:kn,useEffect:Dm,useImperativeHandle:Fw,useInsertionEffect:Dw,useLayoutEffect:Mw,useMemo:Bw,useReducer:hf,useRef:Ow,useState:function(){return hf(Hl)},useDebugValue:Mm,useDeferredValue:function(t){var e=Ln();return gt===null?e.memoizedState=t:Uw(e,gt.memoizedState,t)},useTransition:function(){var t=hf(Hl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Aw,useId:jw,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Kt(),s=Or(t),o=Wi(i,s);o.payload=e,n!=null&&(o.callback=n),e=br(t,o,s),e!==null&&(qn(e,t,s,i),Cc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Kt(),s=Or(t),o=Wi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=br(t,o,s),e!==null&&(qn(e,t,s,i),Cc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),i=Or(t),s=Wi(n,i);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,i),e!==null&&(qn(e,t,i,n),Cc(e,t,i))}};function ny(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,i)||!Ml(s,o):!0}function qw(t,e,n){var i=!1,s=Hr,o=e.contextType;return typeof o=="object"&&o!==null?o=kn(o):(s=cn(e)?Cs:Wt.current,i=e.contextTypes,o=(i=i!=null)?Wo(t,s):Hr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function iy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function up(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Am(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=kn(o):(o=cn(e)?Cs:Wt.current,s.context=Wo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$h.enqueueReplaceState(s,s.state,null),lh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",i=e;do n+=vS(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function df(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qP=typeof WeakMap=="function"?WeakMap:Map;function Gw(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fh||(fh=!0,wp=i),cp(t,e)},n}function Zw(t,e,n){n=Wi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){cp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){cp(t,e),typeof i!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ry(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ox.bind(null,t,e,n),e.then(t,t))}function sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oy(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var GP=er.ReactCurrentOwner,ln=!1;function Zt(t,e,n,i){e.child=t===null?Iw(e,null,n,i):qo(e,t.child,n,i)}function ay(t,e,n,i,s){n=n.render;var o=e.ref;return Mo(e,s),i=Nm(t,e,n,i,o,s),n=Om(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(Ge&&n&&Em(e),e.flags|=1,Zt(t,e,i,s),e.child)}function ly(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Wm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kw(t,e,o,i,s)):(t=Nc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(l,i)&&t.ref===e.ref)return Ki(t,e,s)}return e.flags|=1,t=Dr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Kw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ml(o,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Ki(t,e,s)}return hp(t,e,n,i,s)}function Qw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ko,gn),gn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(ko,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(ko,gn),gn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(ko,gn),gn|=i;return Zt(t,e,s,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hp(t,e,n,i,s){var o=cn(n)?Cs:Wt.current;return o=Wo(e,o),Mo(e,s),n=Nm(t,e,n,i,o,s),i=Om(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(Ge&&i&&Em(e),e.flags|=1,Zt(t,e,n,s),e.child)}function uy(t,e,n,i,s){if(cn(n)){var o=!0;ih(e)}else o=!1;if(Mo(e,s),e.stateNode===null)kc(t,e),qw(e,n,i),up(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=kn(p):(p=cn(n)?Cs:Wt.current,p=Wo(e,p));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&iy(e,l,i,p),mr=!1;var E=e.memoizedState;l.state=E,lh(e,i,l,s),d=e.memoizedState,h!==i||E!==d||un.current||mr?(typeof y=="function"&&(lp(e,n,y,i),d=e.memoizedState),(h=mr||ny(e,n,h,i,E,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Pw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Bn(e.type,h),l.props=p,v=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=kn(d):(d=cn(n)?Cs:Wt.current,d=Wo(e,d));var A=n.getDerivedStateFromProps;(y=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||E!==d)&&iy(e,l,i,d),mr=!1,E=e.memoizedState,l.state=E,lh(e,i,l,s);var M=e.memoizedState;h!==v||E!==M||un.current||mr?(typeof A=="function"&&(lp(e,n,A,i),M=e.memoizedState),(p=mr||ny(e,n,p,i,E,M,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,M,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,M,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),l.props=i,l.state=M,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return dp(t,e,n,i,o,s)}function dp(t,e,n,i,s,o){Yw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&Z_(e,n,!1),Ki(t,e,o);i=e.stateNode,GP.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=qo(e,t.child,null,o),e.child=qo(e,null,h,o)):Zt(t,e,h,o),e.memoizedState=i.state,s&&Z_(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?G_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&G_(t,e.context,!1),Rm(t,e.containerInfo)}function cy(t,e,n,i,s){return $o(),Im(s),e.flags|=256,Zt(t,e,n,i),e.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function pp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jw(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(Ze,s&1),t===null)return op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Zh(l,i,0,null),t=Is(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=pp(n),e.memoizedState=fp,t):Vm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return ZP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Dr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Dr(h,o):(o=Is(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?pp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=fp,i}return o=t.child,t=o.sibling,i=Dr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Vm(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hc(t,e,n,i){return i!==null&&Im(i),qo(e,t.child,null,n),t=Vm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=df(Error(J(422))),hc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Zh({mode:"visible",children:i.children},s,0,null),o=Is(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&qo(e,t.child,null,l),e.child.memoizedState=pp(l),e.memoizedState=fp,o);if(!(e.mode&1))return hc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(J(419)),i=df(o,i,void 0),hc(t,e,l,i)}if(h=(l&t.childLanes)!==0,ln||h){if(i=St,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Zi(t,s),qn(i,t,s,-1))}return Hm(),i=df(Error(J(421))),hc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ax.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,_n=Lr(s.nextSibling),vn=e,Ge=!0,jn=null,t!==null&&(Pn[xn++]=Bi,Pn[xn++]=Ui,Pn[xn++]=As,Bi=t.id,Ui=t.overflow,As=e),e=Vm(e,i.children),e.flags|=4096,e)}function hy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ap(t.return,e,n)}function ff(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function eE(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Zt(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hy(t,n,e);else if(t.tag===19)hy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ff(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ff(e,!0,n,null,o);break;case"together":ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KP(t,e,n){switch(e.tag){case 3:Xw(e),$o();break;case 5:xw(e);break;case 1:cn(e.type)&&ih(e);break;case 4:Rm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;je(oh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?Jw(t,e,n):(je(Ze,Ze.current&1),t=Ki(t,e,n),t!==null?t.sibling:null);je(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return eE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return Ki(t,e,n)}var tE,mp,nE,iE;tE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mp=function(){};nE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ws(fi.current);var o=null;switch(n){case"input":s=Vf(t,s),i=Vf(t,i),o=[];break;case"select":s=Qe({},s,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":s=Bf(t,s),i=Bf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=th)}jf(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Rl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&We("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};iE=function(t,e,n,i){n!==i&&(e.flags|=4)};function tl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function QP(t,e,n){var i=e.pendingProps;switch(Tm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return cn(e.type)&&nh(),zt(e),null;case 3:return i=e.stateNode,Go(),qe(un),qe(Wt),Lm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Ip(jn),jn=null))),mp(t,e),zt(e),null;case 5:km(e);var s=ws(Ul.current);if(n=e.type,t!==null&&e.stateNode!=null)nE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return zt(e),null}if(t=ws(fi.current),uc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[hi]=e,i[zl]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(s=0;s<al.length;s++)We(al[s],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":w_(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":T_(i,o),We("invalid",i)}jf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",""+h]):Rl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&We("scroll",i)}switch(n){case"input":ec(i),E_(i,o,!0);break;case"textarea":ec(i),I_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=th)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[hi]=e,t[zl]=i,tE(t,e,!1,!1),e.stateNode=t;e:{switch(l=Hf(n,i),n){case"dialog":We("cancel",t),We("close",t),s=i;break;case"iframe":case"object":case"embed":We("load",t),s=i;break;case"video":case"audio":for(s=0;s<al.length;s++)We(al[s],t);s=i;break;case"source":We("error",t),s=i;break;case"img":case"image":case"link":We("error",t),We("load",t),s=i;break;case"details":We("toggle",t),s=i;break;case"input":w_(t,i),s=Vf(t,i),We("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Qe({},i,{value:void 0}),We("invalid",t);break;case"textarea":T_(t,i),s=Bf(t,i),We("invalid",t);break;default:s=i}jf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?O0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&b0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&kl(t,d):typeof d=="number"&&kl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Rl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&We("scroll",t):d!=null&&am(t,o,d,l))}switch(n){case"input":ec(t),E_(t,i,!1);break;case"textarea":ec(t),I_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+jr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?bo(t,!!i.multiple,o,!1):i.defaultValue!=null&&bo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)iE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=ws(Ul.current),ws(fi.current),uc(e)){if(i=e.stateNode,n=e.memoizedProps,i[hi]=e,(o=i.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:lc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[hi]=e,e.stateNode=i}return zt(e),null;case 13:if(qe(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&_n!==null&&e.mode&1&&!(e.flags&128))Ew(),$o(),e.flags|=98560,o=!1;else if(o=uc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[hi]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),o=!1}else jn!==null&&(Ip(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?_t===0&&(_t=3):Hm())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return Go(),mp(t,e),t===null&&Vl(e.stateNode.containerInfo),zt(e),null;case 10:return xm(e.type._context),zt(e),null;case 17:return cn(e.type)&&nh(),zt(e),null;case 19:if(qe(Ze),o=e.memoizedState,o===null)return zt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)tl(o,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=uh(t),l!==null){for(e.flags|=128,tl(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Ko&&(e.flags|=128,i=!0,tl(o,!1),e.lanes=4194304)}else{if(!i)if(t=uh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ge)return zt(e),null}else 2*it()-o.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,i=!0,tl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ze.current,je(Ze,i?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return jm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gn&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function YP(t,e){switch(Tm(e),e.tag){case 1:return cn(e.type)&&nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),qe(un),qe(Wt),Lm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return km(e),null;case 13:if(qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));$o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ze),null;case 4:return Go(),null;case 10:return xm(e.type._context),null;case 22:case 23:return jm(),null;case 24:return null;default:return null}}var dc=!1,jt=!1,XP=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ro(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function gp(t,e,n){try{n()}catch(i){et(t,e,i)}}var dy=!1;function JP(t,e){if(Jf=Xc,t=lw(),wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,y=0,v=t,E=null;t:for(;;){for(var A;v!==n||s!==0&&v.nodeType!==3||(h=l+s),v!==o||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(A=v.firstChild)!==null;)E=v,v=A;for(;;){if(v===t)break t;if(E===n&&++p===s&&(h=l),E===o&&++y===i&&(d=l),(A=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=A}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ep={focusedElem:t,selectionRange:n},Xc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var D=M.memoizedProps,U=M.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?D:Bn(e.type,D),U);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(W){et(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return M=dy,dy=!1,M}function wl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&gp(e,n,o)}s=s.next}while(s!==i)}}function qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function _p(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rE(t){var e=t.alternate;e!==null&&(t.alternate=null,rE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[zl],delete e[ip],delete e[DP],delete e[MP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sE(t){return t.tag===5||t.tag===3||t.tag===4}function fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=th));else if(i!==4&&(t=t.child,t!==null))for(yp(t,e,n),t=t.sibling;t!==null;)yp(t,e,n),t=t.sibling}function vp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(vp(t,e,n),t=t.sibling;t!==null;)vp(t,e,n),t=t.sibling}var Rt=null,Un=!1;function dr(t,e,n){for(n=n.child;n!==null;)oE(t,e,n),n=n.sibling}function oE(t,e,n){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Fh,n)}catch{}switch(n.tag){case 5:jt||Ro(n,e);case 6:var i=Rt,s=Un;Rt=null,dr(t,e,n),Rt=i,Un=s,Rt!==null&&(Un?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Un?(t=Rt,n=n.stateNode,t.nodeType===8?of(t.parentNode,n):t.nodeType===1&&of(t,n),Ol(t)):of(Rt,n.stateNode));break;case 4:i=Rt,s=Un,Rt=n.stateNode.containerInfo,Un=!0,dr(t,e,n),Rt=i,Un=s;break;case 0:case 11:case 14:case 15:if(!jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&gp(n,e,l),s=s.next}while(s!==i)}dr(t,e,n);break;case 1:if(!jt&&(Ro(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(jt=(i=jt)||n.memoizedState!==null,dr(t,e,n),jt=i):dr(t,e,n);break;default:dr(t,e,n)}}function py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XP),e.forEach(function(i){var s=lx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Rt=h.stateNode,Un=!1;break e;case 3:Rt=h.stateNode.containerInfo,Un=!0;break e;case 4:Rt=h.stateNode.containerInfo,Un=!0;break e}h=h.return}if(Rt===null)throw Error(J(160));oE(o,l,s),Rt=null,Un=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){et(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aE(e,t),e=e.sibling}function aE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),li(t),i&4){try{wl(3,t,t.return),qh(3,t)}catch(D){et(t,t.return,D)}try{wl(5,t,t.return)}catch(D){et(t,t.return,D)}}break;case 1:zn(e,t),li(t),i&512&&n!==null&&Ro(n,n.return);break;case 5:if(zn(e,t),li(t),i&512&&n!==null&&Ro(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(D){et(t,t.return,D)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&R0(s,o),Hf(h,l);var p=Hf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],v=d[l+1];y==="style"?O0(s,v):y==="dangerouslySetInnerHTML"?b0(s,v):y==="children"?kl(s,v):am(s,y,v,p)}switch(h){case"input":Ff(s,o);break;case"textarea":k0(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?bo(s,!!o.multiple,A,!1):E!==!!o.multiple&&(o.defaultValue!=null?bo(s,!!o.multiple,o.defaultValue,!0):bo(s,!!o.multiple,o.multiple?[]:"",!1))}s[zl]=o}catch(D){et(t,t.return,D)}}break;case 6:if(zn(e,t),li(t),i&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(D){et(t,t.return,D)}}break;case 3:if(zn(e,t),li(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(D){et(t,t.return,D)}break;case 4:zn(e,t),li(t);break;case 13:zn(e,t),li(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Bm=it())),i&4&&py(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(p=jt)||y,zn(e,t),jt=p):zn(e,t),li(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(ae=t,y=t.child;y!==null;){for(v=ae=y;ae!==null;){switch(E=ae,A=E.child,E.tag){case 0:case 11:case 14:case 15:wl(4,E,E.return);break;case 1:Ro(E,E.return);var M=E.stateNode;if(typeof M.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(D){et(i,n,D)}}break;case 5:Ro(E,E.return);break;case 22:if(E.memoizedState!==null){gy(v);continue}}A!==null?(A.return=E,ae=A):gy(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=N0("display",l))}catch(D){et(t,t.return,D)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(D){et(t,t.return,D)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:zn(e,t),li(t),i&4&&py(t);break;case 21:break;default:zn(e,t),li(t)}}function li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sE(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(kl(s,""),i.flags&=-33);var o=fy(t);vp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=fy(t);yp(t,h,l);break;default:throw Error(J(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ex(t,e,n){ae=t,lE(t)}function lE(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||dc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||jt;h=dc;var p=jt;if(dc=l,(jt=d)&&!p)for(ae=s;ae!==null;)l=ae,d=l.child,l.tag===22&&l.memoizedState!==null?_y(s):d!==null?(d.return=l,ae=d):_y(s);for(;o!==null;)ae=o,lE(o),o=o.sibling;ae=s,dc=h,jt=p}my(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):my(t)}}function my(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||qh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!jt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&J_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Ol(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}jt||e.flags&512&&_p(e)}catch(E){et(e,e.return,E)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function gy(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function _y(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){et(e,s,d)}}var o=e.return;try{_p(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{_p(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ae=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ae=h;break}ae=e.return}}var tx=Math.ceil,dh=er.ReactCurrentDispatcher,Fm=er.ReactCurrentOwner,Rn=er.ReactCurrentBatchConfig,be=0,St=null,lt=null,bt=0,gn=0,ko=Yr(0),_t=0,$l=null,ks=0,Gh=0,zm=0,El=null,on=null,Bm=0,Ko=1/0,Fi=null,fh=!1,wp=null,Nr=null,fc=!1,Pr=null,ph=0,Tl=0,Ep=null,Lc=-1,bc=0;function Kt(){return be&6?it():Lc!==-1?Lc:Lc=it()}function Or(t){return t.mode&1?be&2&&bt!==0?bt&-bt:FP.transition!==null?(bc===0&&(bc=q0()),bc):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:J0(t.type)),t):1}function qn(t,e,n,i){if(50<Tl)throw Tl=0,Ep=null,Error(J(185));su(t,n,i),(!(be&2)||t!==St)&&(t===St&&(!(be&2)&&(Gh|=n),_t===4&&vr(t,bt)),hn(t,i),n===1&&be===0&&!(e.mode&1)&&(Ko=it()+500,Hh&&Xr()))}function hn(t,e){var n=t.callbackNode;FS(t,e);var i=Yc(t,t===St?bt:0);if(i===0)n!==null&&x_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&x_(n),e===1)t.tag===0?VP(yy.bind(null,t)):yw(yy.bind(null,t)),NP(function(){!(be&6)&&Xr()}),n=null;else{switch(G0(i)){case 1:n=dm;break;case 4:n=W0;break;case 16:n=Qc;break;case 536870912:n=$0;break;default:n=Qc}n=gE(n,uE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uE(t,e){if(Lc=-1,bc=0,be&6)throw Error(J(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var i=Yc(t,t===St?bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=mh(t,i);else{e=i;var s=be;be|=2;var o=hE();(St!==t||bt!==e)&&(Fi=null,Ko=it()+500,Ts(t,e));do try{rx();break}catch(h){cE(t,h)}while(1);Pm(),dh.current=o,be=s,lt!==null?e=0:(St=null,bt=0,e=_t)}if(e!==0){if(e===2&&(s=Zf(t),s!==0&&(i=s,e=Tp(t,s))),e===1)throw n=$l,Ts(t,0),vr(t,i),hn(t,it()),n;if(e===6)vr(t,i);else{if(s=t.current.alternate,!(i&30)&&!nx(s)&&(e=mh(t,i),e===2&&(o=Zf(t),o!==0&&(i=o,e=Tp(t,o))),e===1))throw n=$l,Ts(t,0),vr(t,i),hn(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:gs(t,on,Fi);break;case 3:if(vr(t,i),(i&130023424)===i&&(e=Bm+500-it(),10<e)){if(Yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=np(gs.bind(null,t,on,Fi),e);break}gs(t,on,Fi);break;case 4:if(vr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-$n(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tx(i/1960))-i,10<i){t.timeoutHandle=np(gs.bind(null,t,on,Fi),i);break}gs(t,on,Fi);break;case 5:gs(t,on,Fi);break;default:throw Error(J(329))}}}return hn(t,it()),t.callbackNode===n?uE.bind(null,t):null}function Tp(t,e){var n=El;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=mh(t,e),t!==2&&(e=on,on=n,e!==null&&Ip(e)),t}function Ip(t){on===null?on=t:on.push.apply(on,t)}function nx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Zn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~zm,e&=~Gh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),i=1<<n;t[n]=-1,e&=~i}}function yy(t){if(be&6)throw Error(J(327));Vo();var e=Yc(t,0);if(!(e&1))return hn(t,it()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var i=Zf(t);i!==0&&(e=i,n=Tp(t,i))}if(n===1)throw n=$l,Ts(t,0),vr(t,e),hn(t,it()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,on,Fi),hn(t,it()),null}function Um(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Ko=it()+500,Hh&&Xr())}}function Ls(t){Pr!==null&&Pr.tag===0&&!(be&6)&&Vo();var e=be;be|=1;var n=Rn.transition,i=Ve;try{if(Rn.transition=null,Ve=1,t)return t()}finally{Ve=i,Rn.transition=n,be=e,!(be&6)&&Xr()}}function jm(){gn=ko.current,qe(ko)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bP(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(Tm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nh();break;case 3:Go(),qe(un),qe(Wt),Lm();break;case 5:km(i);break;case 4:Go();break;case 13:qe(Ze);break;case 19:qe(Ze);break;case 10:xm(i.type._context);break;case 22:case 23:jm()}n=n.return}if(St=t,lt=t=Dr(t.current,null),bt=gn=e,_t=0,$l=null,zm=Gh=ks=0,on=El=null,vs!==null){for(e=0;e<vs.length;e++)if(n=vs[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}vs=null}return t}function cE(t,e){do{var n=lt;try{if(Pm(),Ac.current=hh,ch){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ch=!1}if(Rs=0,It=gt=Ke=null,vl=!1,jl=0,Fm.current=null,n===null||n.return===null){_t=1,$l=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=bt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=h,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var A=sy(l);if(A!==null){A.flags&=-257,oy(A,l,h,o,e),A.mode&1&&ry(o,p,e),e=A,d=p;var M=e.updateQueue;if(M===null){var D=new Set;D.add(d),e.updateQueue=D}else M.add(d);break e}else{if(!(e&1)){ry(o,p,e),Hm();break e}d=Error(J(426))}}else if(Ge&&h.mode&1){var U=sy(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),oy(U,l,h,o,e),Im(Zo(d,h));break e}}o=d=Zo(d,h),_t!==4&&(_t=2),El===null?El=[o]:El.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=Gw(o,d,e);X_(o,k);break e;case 1:h=d;var P=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Nr===null||!Nr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=Zw(o,h,e);X_(o,W);break e}}o=o.return}while(o!==null)}fE(n)}catch(X){e=X,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(1)}function hE(){var t=dh.current;return dh.current=hh,t===null?hh:t}function Hm(){(_t===0||_t===3||_t===2)&&(_t=4),St===null||!(ks&268435455)&&!(Gh&268435455)||vr(St,bt)}function mh(t,e){var n=be;be|=2;var i=hE();(St!==t||bt!==e)&&(Fi=null,Ts(t,e));do try{ix();break}catch(s){cE(t,s)}while(1);if(Pm(),be=n,dh.current=i,lt!==null)throw Error(J(261));return St=null,bt=0,_t}function ix(){for(;lt!==null;)dE(lt)}function rx(){for(;lt!==null&&!RS();)dE(lt)}function dE(t){var e=mE(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?fE(t):lt=e,Fm.current=null}function fE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YP(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,lt=null;return}}else if(n=QP(n,e,gn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);_t===0&&(_t=5)}function gs(t,e,n){var i=Ve,s=Rn.transition;try{Rn.transition=null,Ve=1,sx(t,e,n,i)}finally{Rn.transition=s,Ve=i}return null}function sx(t,e,n,i){do Vo();while(Pr!==null);if(be&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zS(t,o),t===St&&(lt=St=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,gE(Qc,function(){return Vo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rn.transition,Rn.transition=null;var l=Ve;Ve=1;var h=be;be|=4,Fm.current=null,JP(t,n),aE(n,t),PP(ep),Xc=!!Jf,ep=Jf=null,t.current=n,ex(n),kS(),be=h,Ve=l,Rn.transition=o}else t.current=n;if(fc&&(fc=!1,Pr=t,ph=s),o=t.pendingLanes,o===0&&(Nr=null),NS(n.stateNode),hn(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(fh)throw fh=!1,t=wp,wp=null,t;return ph&1&&t.tag!==0&&Vo(),o=t.pendingLanes,o&1?t===Ep?Tl++:(Tl=0,Ep=t):Tl=0,Xr(),null}function Vo(){if(Pr!==null){var t=G0(ph),e=Rn.transition,n=Ve;try{if(Rn.transition=null,Ve=16>t?16:t,Pr===null)var i=!1;else{if(t=Pr,Pr=null,ph=0,be&6)throw Error(J(331));var s=be;for(be|=4,ae=t.current;ae!==null;){var o=ae,l=o.child;if(ae.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ae=p;ae!==null;){var y=ae;switch(y.tag){case 0:case 11:case 15:wl(8,y,o)}var v=y.child;if(v!==null)v.return=y,ae=v;else for(;ae!==null;){y=ae;var E=y.sibling,A=y.return;if(rE(y),y===p){ae=null;break}if(E!==null){E.return=A,ae=E;break}ae=A}}}var M=o.alternate;if(M!==null){var D=M.child;if(D!==null){M.child=null;do{var U=D.sibling;D.sibling=null,D=U}while(D!==null)}}ae=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ae=l;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wl(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ae=k;break e}ae=o.return}}var P=t.current;for(ae=P;ae!==null;){l=ae;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,ae=b;else e:for(l=P;ae!==null;){if(h=ae,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:qh(9,h)}}catch(X){et(h,h.return,X)}if(h===l){ae=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,ae=W;break e}ae=h.return}}if(be=s,Xr(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Fh,t)}catch{}i=!0}return i}finally{Ve=n,Rn.transition=e}}return!1}function vy(t,e,n){e=Zo(n,e),e=Gw(t,e,1),t=br(t,e,1),e=Kt(),t!==null&&(su(t,1,e),hn(t,e))}function et(t,e,n){if(t.tag===3)vy(t,t,n);else for(;e!==null;){if(e.tag===3){vy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Nr===null||!Nr.has(i))){t=Zo(n,t),t=Zw(e,t,1),e=br(e,t,1),t=Kt(),e!==null&&(su(e,1,t),hn(e,t));break}}e=e.return}}function ox(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(bt&n)===n&&(_t===4||_t===3&&(bt&130023424)===bt&&500>it()-Bm?Ts(t,0):zm|=n),hn(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=Kt();t=Zi(t,e),t!==null&&(su(t,e,n),hn(t,n))}function ax(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pE(t,n)}function lx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),pE(t,n)}var mE;mE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,KP(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ge&&e.flags&1048576&&vw(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kc(t,e),t=e.pendingProps;var s=Wo(e,Wt.current);Mo(e,n),s=Nm(null,e,i,t,s,n);var o=Om();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(i)?(o=!0,ih(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Am(e),s.updater=$h,e.stateNode=s,s._reactInternals=e,up(e,i,t,n),e=dp(null,e,i,!0,o,n)):(e.tag=0,Ge&&o&&Em(e),Zt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=cx(i),t=Bn(i,t),s){case 0:e=hp(null,e,i,t,n);break e;case 1:e=uy(null,e,i,t,n);break e;case 11:e=ay(null,e,i,t,n);break e;case 14:e=ly(null,e,i,Bn(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Bn(i,s),hp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Bn(i,s),uy(t,e,i,s,n);case 3:e:{if(Xw(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Pw(t,e),lh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Zo(Error(J(423)),e),e=cy(t,e,i,n,s);break e}else if(i!==s){s=Zo(Error(J(424)),e),e=cy(t,e,i,n,s);break e}else for(_n=Lr(e.stateNode.containerInfo.firstChild),vn=e,Ge=!0,jn=null,n=Iw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),i===s){e=Ki(t,e,n);break e}Zt(t,e,i,n)}e=e.child}return e;case 5:return xw(e),t===null&&op(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,tp(i,s)?l=null:o!==null&&tp(i,o)&&(e.flags|=32),Yw(t,e),Zt(t,e,l,n),e.child;case 6:return t===null&&op(e),null;case 13:return Jw(t,e,n);case 4:return Rm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=qo(e,null,i,n):Zt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Bn(i,s),ay(t,e,i,s,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,je(oh,i._currentValue),i._currentValue=l,o!==null)if(Zn(o.value,l)){if(o.children===s.children&&!un.current){e=Ki(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Wi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ap(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(J(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ap(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Mo(e,n),s=kn(s),i=i(s),e.flags|=1,Zt(t,e,i,n),e.child;case 14:return i=e.type,s=Bn(i,e.pendingProps),s=Bn(i.type,s),ly(t,e,i,s,n);case 15:return Kw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Bn(i,s),kc(t,e),e.tag=1,cn(i)?(t=!0,ih(e)):t=!1,Mo(e,n),qw(e,i,s),up(e,i,s,n),dp(null,e,i,!0,t,n);case 19:return eE(t,e,n);case 22:return Qw(t,e,n)}throw Error(J(156,e.tag))};function gE(t,e){return H0(t,e)}function ux(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,i){return new ux(t,e,n,i)}function Wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cx(t){if(typeof t=="function")return Wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===um)return 11;if(t===cm)return 14}return 2}function Dr(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Wm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case wo:return Is(n.children,s,o,e);case lm:l=8,s|=8;break;case Nf:return t=An(12,n,e,s|2),t.elementType=Nf,t.lanes=o,t;case Of:return t=An(13,n,e,s),t.elementType=Of,t.lanes=o,t;case Df:return t=An(19,n,e,s),t.elementType=Df,t.lanes=o,t;case x0:return Zh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S0:l=10;break e;case P0:l=9;break e;case um:l=11;break e;case cm:l=14;break e;case pr:l=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=An(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Is(t,e,n,i){return t=An(7,t,i,e),t.lanes=n,t}function Zh(t,e,n,i){return t=An(22,t,i,e),t.elementType=x0,t.lanes=n,t.stateNode={isHidden:!1},t}function pf(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function mf(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hx(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zd(0),this.expirationTimes=Zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $m(t,e,n,i,s,o,l,h,d){return t=new hx(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=An(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Am(o),t}function dx(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function _E(t){if(!t)return Hr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(cn(n))return _w(t,n,e)}return e}function yE(t,e,n,i,s,o,l,h,d){return t=$m(n,i,!0,t,s,o,l,h,d),t.context=_E(null),n=t.current,i=Kt(),s=Or(n),o=Wi(i,s),o.callback=e??null,br(n,o,s),t.current.lanes=s,su(t,s,i),hn(t,i),t}function Kh(t,e,n,i){var s=e.current,o=Kt(),l=Or(s);return n=_E(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=br(s,e,l),t!==null&&(qn(t,s,l,o),Cc(t,s,l)),l}function gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qm(t,e){wy(t,e),(t=t.alternate)&&wy(t,e)}function fx(){return null}var vE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gm(t){this._internalRoot=t}Qh.prototype.render=Gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Kh(t,e,null,null)};Qh.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){Kh(null,t,null,null)}),e[Gi]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&X0(t)}};function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function px(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=gh(l);o.call(p)}}var l=yE(e,i,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=l,t[Gi]=l.current,Vl(t.nodeType===8?t.parentNode:t),Ls(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=gh(d);h.call(p)}}var d=$m(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=d,t[Gi]=d.current,Vl(t.nodeType===8?t.parentNode:t),Ls(function(){Kh(e,d,n,i)}),d}function Xh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=gh(l);h.call(d)}}Kh(e,l,t,s)}else l=px(n,e,t,s,i);return gh(l)}Z0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ol(e.pendingLanes);n!==0&&(fm(e,n|1),hn(e,it()),!(be&6)&&(Ko=it()+500,Xr()))}break;case 13:Ls(function(){var i=Zi(t,1);if(i!==null){var s=Kt();qn(i,t,1,s)}}),qm(t,1)}};pm=function(t){if(t.tag===13){var e=Zi(t,134217728);if(e!==null){var n=Kt();qn(e,t,134217728,n)}qm(t,134217728)}};K0=function(t){if(t.tag===13){var e=Or(t),n=Zi(t,e);if(n!==null){var i=Kt();qn(n,t,e,i)}qm(t,e)}};Q0=function(){return Ve};Y0=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};$f=function(t,e,n){switch(e){case"input":if(Ff(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=jh(i);if(!s)throw Error(J(90));A0(i),Ff(i,s)}}}break;case"textarea":k0(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};V0=Um;F0=Ls;var mx={usingClientEntryPoint:!1,Events:[au,So,jh,D0,M0,Um]},nl={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U0(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Fh=pc.inject(gx),di=pc}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zm(e))throw Error(J(200));return dx(t,e,null,n)};En.createRoot=function(t,e){if(!Zm(t))throw Error(J(299));var n=!1,i="",s=vE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$m(t,1,!1,null,null,n,!1,i,s),t[Gi]=e.current,Vl(t.nodeType===8?t.parentNode:t),new Gm(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=U0(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return Ls(t)};En.hydrate=function(t,e,n){if(!Yh(e))throw Error(J(200));return Xh(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!Zm(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=vE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=yE(e,null,t,1,n??null,s,!1,o,l),t[Gi]=e.current,Vl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qh(e)};En.render=function(t,e,n){if(!Yh(e))throw Error(J(200));return Xh(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Yh(t))throw Error(J(40));return t._reactRootContainer?(Ls(function(){Xh(null,null,t,!1,function(){t._reactRootContainer=null,t[Gi]=null})}),!0):!1};En.unstable_batchedUpdates=Um;En.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Yh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Xh(t,e,n,!1,i)};En.version="18.3.1-next-f1338f8080-20240426";function wE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wE)}catch(t){console.error(t)}}wE(),w0.exports=En;var EE=w0.exports,Ty=EE;Lf.createRoot=Ty.createRoot,Lf.hydrateRoot=Ty.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ql.apply(this,arguments)}var xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xr||(xr={}));const Iy="popstate";function _x(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return Sp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:IE(s)}return vx(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function Sy(t,e){return{usr:t.state,key:t.key,idx:e}}function Sp(t,e,n,i){return n===void 0&&(n=null),ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?aa(e):e,{state:n,key:e&&e.key||i||yx()})}function IE(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function aa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function vx(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=xr.Pop,d=null,p=y();p==null&&(p=0,l.replaceState(ql({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function v(){h=xr.Pop;let U=y(),k=U==null?null:U-p;p=U,d&&d({action:h,location:D.location,delta:k})}function E(U,k){h=xr.Push;let P=Sp(D.location,U,k);n&&n(P,U),p=y()+1;let b=Sy(P,p),W=D.createHref(P);try{l.pushState(b,"",W)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(W)}o&&d&&d({action:h,location:D.location,delta:1})}function A(U,k){h=xr.Replace;let P=Sp(D.location,U,k);n&&n(P,U),p=y();let b=Sy(P,p),W=D.createHref(P);l.replaceState(b,"",W),o&&d&&d({action:h,location:D.location,delta:0})}function M(U){let k=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof U=="string"?U:IE(U);return P=P.replace(/ $/,"%20"),yt(k,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,k)}let D={get action(){return h},get location(){return t(s,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Iy,v),d=U,()=>{s.removeEventListener(Iy,v),d=null}},createHref(U){return e(s,U)},createURL:M,encodeLocation(U){let k=M(U);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:E,replace:A,go(U){return l.go(U)}};return D}var Py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Py||(Py={}));function wx(t,e,n){return n===void 0&&(n="/"),Ex(t,e,n,!1)}function Ex(t,e,n,i){let s=typeof e=="string"?aa(e):e,o=xE(s.pathname||"/",n);if(o==null)return null;let l=SE(t);Tx(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=Nx(o);h=Lx(l[d],p,i)}return h}function SE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(yt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Ss([i,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),SE(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:Rx(p,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of PE(o.path))s(o,l,d)}),e}function PE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=PE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function Tx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Ix=/^:[\w-]+$/,Sx=3,Px=2,xx=1,Cx=10,Ax=-2,xy=t=>t==="*";function Rx(t,e){let n=t.split("/"),i=n.length;return n.some(xy)&&(i+=Ax),e&&(i+=Px),n.filter(s=>!xy(s)).reduce((s,o)=>s+(Ix.test(o)?Sx:o===""?xx:Cx),i)}function kx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Lx(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=Cy({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!v&&p&&n&&!i[i.length-1].route.index&&(v=Cy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Ss([o,v.pathname]),pathnameBase:zx(Ss([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Ss([o,v.pathnameBase]))}return l}function Cy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=bx(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,y,v)=>{let{paramName:E,isOptional:A}=y;if(E==="*"){let D=h[v]||"";l=o.slice(0,o.length-D.length).replace(/(.)\/+$/,"$1")}const M=h[v];return A&&!M?p[E]=void 0:p[E]=(M||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function bx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Nx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Ox(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?aa(t):t;return{pathname:n?n.startsWith("/")?n:Dx(n,e):e,search:Bx(i),hash:Ux(s)}}function Dx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vx(t,e){let n=Mx(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Fx(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=aa(t):(s=ql({},t),yt(!s.pathname||!s.pathname.includes("?"),gf("?","pathname","search",s)),yt(!s.pathname||!s.pathname.includes("#"),gf("#","pathname","hash",s)),yt(!s.search||!s.search.includes("#"),gf("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}h=v>=0?e[v]:"/"}let d=Ox(s,h),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}const Ss=t=>t.join("/").replace(/\/\/+/g,"/"),zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ux=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CE=["post","put","patch","delete"];new Set(CE);const Hx=["get",...CE];new Set(Hx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gl.apply(this,arguments)}const Km=$.createContext(null),Wx=$.createContext(null),Jh=$.createContext(null),ed=$.createContext(null),zs=$.createContext({outlet:null,matches:[],isDataRoute:!1}),AE=$.createContext(null);function td(){return $.useContext(ed)!=null}function RE(){return td()||yt(!1),$.useContext(ed).location}function kE(t){$.useContext(Jh).static||$.useLayoutEffect(t)}function Qm(){let{isDataRoute:t}=$.useContext(zs);return t?rC():$x()}function $x(){td()||yt(!1);let t=$.useContext(Km),{basename:e,future:n,navigator:i}=$.useContext(Jh),{matches:s}=$.useContext(zs),{pathname:o}=RE(),l=JSON.stringify(Vx(s,n.v7_relativeSplatPath)),h=$.useRef(!1);return kE(()=>{h.current=!0}),$.useCallback(function(p,y){if(y===void 0&&(y={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let v=Fx(p,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ss([e,v.pathname])),(y.replace?i.replace:i.push)(v,y.state,y)},[e,i,l,o,t])}function qx(){let{matches:t}=$.useContext(zs),e=t[t.length-1];return e?e.params:{}}function Gx(t,e){return Zx(t,e)}function Zx(t,e,n,i){td()||yt(!1);let{navigator:s}=$.useContext(Jh),{matches:o}=$.useContext(zs),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=RE(),y;if(e){var v;let U=typeof e=="string"?aa(e):e;d==="/"||(v=U.pathname)!=null&&v.startsWith(d)||yt(!1),y=U}else y=p;let E=y.pathname||"/",A=E;if(d!=="/"){let U=d.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let M=wx(t,{pathname:A}),D=Jx(M&&M.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Ss([d,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:Ss([d,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&D?$.createElement(ed.Provider,{value:{location:Gl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:xr.Pop}},D):D}function Kx(){let t=iC(),e=jx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:s},n):null,o)}const Qx=$.createElement(Kx,null);class Yx extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(zs.Provider,{value:this.props.routeContext},$.createElement(AE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xx(t){let{routeContext:e,match:n,children:i}=t,s=$.useContext(Km);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(zs.Provider,{value:e},i)}function Jx(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);y>=0||yt(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:E,errors:A}=n,M=v.route.loader&&E[v.route.id]===void 0&&(!A||A[v.route.id]===void 0);if(v.route.lazy||M){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let A,M=!1,D=null,U=null;n&&(A=h&&v.route.id?h[v.route.id]:void 0,D=v.route.errorElement||Qx,d&&(p<0&&E===0?(sC("route-fallback",!1),M=!0,U=null):p===E&&(M=!0,U=v.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,E+1)),P=()=>{let b;return A?b=D:M?b=U:v.route.Component?b=$.createElement(v.route.Component,null):v.route.element?b=v.route.element:b=y,$.createElement(Xx,{match:v,routeContext:{outlet:y,matches:k,isDataRoute:n!=null},children:b})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?$.createElement(Yx,{location:n.location,revalidation:n.revalidation,component:D,error:A,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}var LE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LE||{}),_h=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_h||{});function eC(t){let e=$.useContext(Km);return e||yt(!1),e}function tC(t){let e=$.useContext(Wx);return e||yt(!1),e}function nC(t){let e=$.useContext(zs);return e||yt(!1),e}function bE(t){let e=nC(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function iC(){var t;let e=$.useContext(AE),n=tC(_h.UseRouteError),i=bE(_h.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function rC(){let{router:t}=eC(LE.UseNavigateStable),e=bE(_h.UseNavigateStable),n=$.useRef(!1);return kE(()=>{n.current=!0}),$.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Gl({fromRouteId:e},o)))},[t,e])}const Ay={};function sC(t,e,n){!e&&!Ay[t]&&(Ay[t]=!0)}function oC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Oc(t){yt(!1)}function aC(t){let{basename:e="/",children:n=null,location:i,navigationType:s=xr.Pop,navigator:o,static:l=!1,future:h}=t;td()&&yt(!1);let d=e.replace(/^\/*/,"/"),p=$.useMemo(()=>({basename:d,navigator:o,static:l,future:Gl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=aa(i));let{pathname:y="/",search:v="",hash:E="",state:A=null,key:M="default"}=i,D=$.useMemo(()=>{let U=xE(y,d);return U==null?null:{location:{pathname:U,search:v,hash:E,state:A,key:M},navigationType:s}},[d,y,v,E,A,M,s]);return D==null?null:$.createElement(Jh.Provider,{value:p},$.createElement(ed.Provider,{children:n,value:D}))}function lC(t){let{children:e,location:n}=t;return Gx(Pp(e),n)}new Promise(()=>{});function Pp(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(i,s)=>{if(!$.isValidElement(i))return;let o=[...e,s];if(i.type===$.Fragment){n.push.apply(n,Pp(i.props.children,o));return}i.type!==Oc&&yt(!1),!i.props.index||!i.props.children||yt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Pp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uC="6";try{window.__reactRouterVersion=uC}catch{}const cC="startTransition",Ry=oS[cC];function hC(t){let{basename:e,children:n,future:i,window:s}=t,o=$.useRef();o.current==null&&(o.current=_x({window:s,v5Compat:!0}));let l=o.current,[h,d]=$.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},y=$.useCallback(v=>{p&&Ry?Ry(()=>d(v)):d(v)},[d,p]);return $.useLayoutEffect(()=>l.listen(y),[l,y]),$.useEffect(()=>oC(i),[i]),$.createElement(aC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ky||(ky={}));var Ly;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ly||(Ly={}));const dC=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;d||(A=64,l||(E=64)),i.push(n[y],n[v],n[E],n[A])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new pC;const E=o<<2|h>>4;if(i.push(E),p!==64){const A=h<<4&240|p>>2;if(i.push(A),v!==64){const M=p<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mC=function(t){const e=NE(t);return OE.encodeByteArray(e,!0)},yh=function(t){return mC(t).replace(/\./g,"")},DE=function(t){try{return OE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=()=>gC().__FIREBASE_DEFAULTS__,yC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DE(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return dC()||_C()||yC()||vC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ME=t=>{var e,n;return(n=(e=nd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wC=t=>{const e=ME(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},VE=()=>{var t;return(t=nd())==null?void 0:t.config},FE=t=>{var e;return(e=nd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t},h="";return[yh(JSON.stringify(n)),yh(JSON.stringify(l)),h].join(".")}const Il={};function IC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?t.emulator.push(e):t.prod.push(e);return t}function SC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let by=!1;function BE(t,e){if(typeof window>"u"||typeof document>"u"||!la(window.location.host)||Il[t]===e||Il[t]||by)return;Il[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=IC().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{by=!0,l()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=SC(i),A=n("text"),M=document.getElementById(A)||document.createElement("span"),D=n("learnmore"),U=document.getElementById(D)||document.createElement("a"),k=n("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const b=E.element;h(b),y(U,D);const W=p();d(P,k),b.append(P,M,U,W),document.body.appendChild(b)}o?(M.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function xC(){var e;const t=(e=nd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kC(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bC(){try{return typeof indexedDB=="object"}catch{return!1}}function NC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="FirebaseError";class tr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=OC,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?DC(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new tr(s,h,i)}}function DC(t,e){return t.replace(MC,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const MC=/\{\$([^}]+)}/g;function VC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Ny(o)&&Ny(l)){if(!bs(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ny(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ll(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FC(t,e){const n=new zC(t,e);return n.subscribe.bind(n)}class zC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=_f),s.error===void 0&&(s.error=_f),s.complete===void 0&&(s.complete=_f);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _f(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Ns{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new EC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HC(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jC(t){return t===_s?void 0:t}function HC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const $C={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},qC=Ce.INFO,GC={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},ZC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=GC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ym{constructor(e){this.name=e,this._logLevel=qC,this._logHandler=ZC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const KC=(t,e)=>e.some(n=>t instanceof n);let Oy,Dy;function QC(){return Oy||(Oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UE=new WeakMap,xp=new WeakMap,jE=new WeakMap,yf=new WeakMap,Xm=new WeakMap;function XC(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Mr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&UE.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function JC(t){if(xp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});xp.set(t,e)}let Cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){Cp=t(Cp)}function tA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(vf(this),e,...n);return jE.set(i,e.sort?e.sort():[e]),Mr(i)}:YC().includes(t)?function(...e){return t.apply(vf(this),e),Mr(UE.get(this))}:function(...e){return Mr(t.apply(vf(this),e))}}function nA(t){return typeof t=="function"?tA(t):(t instanceof IDBTransaction&&JC(t),KC(t,QC())?new Proxy(t,Cp):t)}function Mr(t){if(t instanceof IDBRequest)return XC(t);if(yf.has(t))return yf.get(t);const e=nA(t);return e!==t&&(yf.set(t,e),Xm.set(e,t)),e}const vf=t=>Xm.get(t);function iA(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Mr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Mr(l.result),d.oldVersion,d.newVersion,Mr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const rA=["get","getKey","getAll","getAllKeys","count"],sA=["put","add","delete","clear"],wf=new Map;function My(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wf.get(e))return wf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=sA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return wf.set(e,o),o}eA(t=>({...t,get:(e,n,i)=>My(e,n)||t.get(e,n,i),has:(e,n)=>!!My(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ap="@firebase/app",Vy="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Ym("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",hA="@firebase/app-check-compat",dA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",mA="@firebase/database",gA="@firebase/data-connect",_A="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",TA="@firebase/messaging",IA="@firebase/messaging-compat",SA="@firebase/performance",PA="@firebase/performance-compat",xA="@firebase/remote-config",CA="@firebase/remote-config-compat",AA="@firebase/storage",RA="@firebase/storage-compat",kA="@firebase/firestore",LA="@firebase/ai",bA="@firebase/firestore-compat",NA="firebase",OA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",DA={[Ap]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[dA]:"fire-app-check",[hA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[mA]:"fire-rtdb",[gA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[TA]:"fire-fcm",[IA]:"fire-fcm-compat",[SA]:"fire-perf",[PA]:"fire-perf-compat",[xA]:"fire-rc",[CA]:"fire-rc-compat",[AA]:"fire-gcs",[RA]:"fire-gcs-compat",[kA]:"fire-fst",[bA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,MA=new Map,kp=new Map;function Fy(t,e){try{t.container.addComponent(e)}catch(n){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qo(t){const e=t.name;if(kp.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,t);for(const n of vh.values())Fy(n,t);for(const n of MA.values())Fy(n,t);return!0}function Jm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new uu("app","Firebase",VA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=OA;function HE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Rp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=VE()),!n)throw Vr.create("no-options");const o=vh.get(s);if(o){if(bs(n,o.options)&&bs(i,o.config))return o;throw Vr.create("duplicate-app",{appName:s})}const l=new WC(s);for(const d of kp.values())l.addComponent(d);const h=new FA(n,i,l);return vh.set(s,h),h}function WE(t=Rp){const e=vh.get(t);if(!e&&t===Rp&&VE())return HE();if(!e)throw Vr.create("no-app",{appName:t});return e}function Fr(t,e,n){let i=DA[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(l.join(" "));return}Qo(new Ns(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",BA=1,Zl="firebase-heartbeat-store";let Ef=null;function $E(){return Ef||(Ef=iA(zA,BA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),Ef}async function UA(t){try{const n=(await $E()).transaction(Zl),i=await n.objectStore(Zl).get(qE(t));return await n.done,i}catch(e){if(e instanceof tr)Qi.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qi.warn(n.message)}}}async function zy(t,e){try{const i=(await $E()).transaction(Zl,"readwrite");await i.objectStore(Zl).put(e,qE(t)),await i.done}catch(n){if(n instanceof tr)Qi.warn(n.message);else{const i=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qi.warn(i.message)}}}function qE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1024,HA=30;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=By();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>HA){const l=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Qi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=By(),{heartbeatsToSend:i,unsentEntries:s}=$A(this._heartbeatsCache.heartbeats),o=yh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Qi.warn(n),""}}}function By(){return new Date().toISOString().substring(0,10)}function $A(t,e=jA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Uy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class qA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bC()?NC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uy(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}function GA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){Qo(new Ns("platform-logger",e=>new oA(e),"PRIVATE")),Qo(new Ns("heartbeat",e=>new WA(e),"PRIVATE")),Fr(Ap,Vy,t),Fr(Ap,Vy,"esm2020"),Fr("fire-js","")}ZA("");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,GE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function S(){}S.prototype=I.prototype,x.F=I.prototype,x.prototype=new S,x.prototype.constructor=x,x.D=function(C,N,F){for(var R=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)R[Me-2]=arguments[Me];return I.prototype[N].apply(C,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,I,S){S||(S=0);const C=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)C[N]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(N=0;N<16;++N)C[N]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=x.g[0],S=x.g[1],N=x.g[2];let F=x.g[3],R;R=I+(F^S&(N^F))+C[0]+3614090360&4294967295,I=S+(R<<7&4294967295|R>>>25),R=F+(N^I&(S^N))+C[1]+3905402710&4294967295,F=I+(R<<12&4294967295|R>>>20),R=N+(S^F&(I^S))+C[2]+606105819&4294967295,N=F+(R<<17&4294967295|R>>>15),R=S+(I^N&(F^I))+C[3]+3250441966&4294967295,S=N+(R<<22&4294967295|R>>>10),R=I+(F^S&(N^F))+C[4]+4118548399&4294967295,I=S+(R<<7&4294967295|R>>>25),R=F+(N^I&(S^N))+C[5]+1200080426&4294967295,F=I+(R<<12&4294967295|R>>>20),R=N+(S^F&(I^S))+C[6]+2821735955&4294967295,N=F+(R<<17&4294967295|R>>>15),R=S+(I^N&(F^I))+C[7]+4249261313&4294967295,S=N+(R<<22&4294967295|R>>>10),R=I+(F^S&(N^F))+C[8]+1770035416&4294967295,I=S+(R<<7&4294967295|R>>>25),R=F+(N^I&(S^N))+C[9]+2336552879&4294967295,F=I+(R<<12&4294967295|R>>>20),R=N+(S^F&(I^S))+C[10]+4294925233&4294967295,N=F+(R<<17&4294967295|R>>>15),R=S+(I^N&(F^I))+C[11]+2304563134&4294967295,S=N+(R<<22&4294967295|R>>>10),R=I+(F^S&(N^F))+C[12]+1804603682&4294967295,I=S+(R<<7&4294967295|R>>>25),R=F+(N^I&(S^N))+C[13]+4254626195&4294967295,F=I+(R<<12&4294967295|R>>>20),R=N+(S^F&(I^S))+C[14]+2792965006&4294967295,N=F+(R<<17&4294967295|R>>>15),R=S+(I^N&(F^I))+C[15]+1236535329&4294967295,S=N+(R<<22&4294967295|R>>>10),R=I+(N^F&(S^N))+C[1]+4129170786&4294967295,I=S+(R<<5&4294967295|R>>>27),R=F+(S^N&(I^S))+C[6]+3225465664&4294967295,F=I+(R<<9&4294967295|R>>>23),R=N+(I^S&(F^I))+C[11]+643717713&4294967295,N=F+(R<<14&4294967295|R>>>18),R=S+(F^I&(N^F))+C[0]+3921069994&4294967295,S=N+(R<<20&4294967295|R>>>12),R=I+(N^F&(S^N))+C[5]+3593408605&4294967295,I=S+(R<<5&4294967295|R>>>27),R=F+(S^N&(I^S))+C[10]+38016083&4294967295,F=I+(R<<9&4294967295|R>>>23),R=N+(I^S&(F^I))+C[15]+3634488961&4294967295,N=F+(R<<14&4294967295|R>>>18),R=S+(F^I&(N^F))+C[4]+3889429448&4294967295,S=N+(R<<20&4294967295|R>>>12),R=I+(N^F&(S^N))+C[9]+568446438&4294967295,I=S+(R<<5&4294967295|R>>>27),R=F+(S^N&(I^S))+C[14]+3275163606&4294967295,F=I+(R<<9&4294967295|R>>>23),R=N+(I^S&(F^I))+C[3]+4107603335&4294967295,N=F+(R<<14&4294967295|R>>>18),R=S+(F^I&(N^F))+C[8]+1163531501&4294967295,S=N+(R<<20&4294967295|R>>>12),R=I+(N^F&(S^N))+C[13]+2850285829&4294967295,I=S+(R<<5&4294967295|R>>>27),R=F+(S^N&(I^S))+C[2]+4243563512&4294967295,F=I+(R<<9&4294967295|R>>>23),R=N+(I^S&(F^I))+C[7]+1735328473&4294967295,N=F+(R<<14&4294967295|R>>>18),R=S+(F^I&(N^F))+C[12]+2368359562&4294967295,S=N+(R<<20&4294967295|R>>>12),R=I+(S^N^F)+C[5]+4294588738&4294967295,I=S+(R<<4&4294967295|R>>>28),R=F+(I^S^N)+C[8]+2272392833&4294967295,F=I+(R<<11&4294967295|R>>>21),R=N+(F^I^S)+C[11]+1839030562&4294967295,N=F+(R<<16&4294967295|R>>>16),R=S+(N^F^I)+C[14]+4259657740&4294967295,S=N+(R<<23&4294967295|R>>>9),R=I+(S^N^F)+C[1]+2763975236&4294967295,I=S+(R<<4&4294967295|R>>>28),R=F+(I^S^N)+C[4]+1272893353&4294967295,F=I+(R<<11&4294967295|R>>>21),R=N+(F^I^S)+C[7]+4139469664&4294967295,N=F+(R<<16&4294967295|R>>>16),R=S+(N^F^I)+C[10]+3200236656&4294967295,S=N+(R<<23&4294967295|R>>>9),R=I+(S^N^F)+C[13]+681279174&4294967295,I=S+(R<<4&4294967295|R>>>28),R=F+(I^S^N)+C[0]+3936430074&4294967295,F=I+(R<<11&4294967295|R>>>21),R=N+(F^I^S)+C[3]+3572445317&4294967295,N=F+(R<<16&4294967295|R>>>16),R=S+(N^F^I)+C[6]+76029189&4294967295,S=N+(R<<23&4294967295|R>>>9),R=I+(S^N^F)+C[9]+3654602809&4294967295,I=S+(R<<4&4294967295|R>>>28),R=F+(I^S^N)+C[12]+3873151461&4294967295,F=I+(R<<11&4294967295|R>>>21),R=N+(F^I^S)+C[15]+530742520&4294967295,N=F+(R<<16&4294967295|R>>>16),R=S+(N^F^I)+C[2]+3299628645&4294967295,S=N+(R<<23&4294967295|R>>>9),R=I+(N^(S|~F))+C[0]+4096336452&4294967295,I=S+(R<<6&4294967295|R>>>26),R=F+(S^(I|~N))+C[7]+1126891415&4294967295,F=I+(R<<10&4294967295|R>>>22),R=N+(I^(F|~S))+C[14]+2878612391&4294967295,N=F+(R<<15&4294967295|R>>>17),R=S+(F^(N|~I))+C[5]+4237533241&4294967295,S=N+(R<<21&4294967295|R>>>11),R=I+(N^(S|~F))+C[12]+1700485571&4294967295,I=S+(R<<6&4294967295|R>>>26),R=F+(S^(I|~N))+C[3]+2399980690&4294967295,F=I+(R<<10&4294967295|R>>>22),R=N+(I^(F|~S))+C[10]+4293915773&4294967295,N=F+(R<<15&4294967295|R>>>17),R=S+(F^(N|~I))+C[1]+2240044497&4294967295,S=N+(R<<21&4294967295|R>>>11),R=I+(N^(S|~F))+C[8]+1873313359&4294967295,I=S+(R<<6&4294967295|R>>>26),R=F+(S^(I|~N))+C[15]+4264355552&4294967295,F=I+(R<<10&4294967295|R>>>22),R=N+(I^(F|~S))+C[6]+2734768916&4294967295,N=F+(R<<15&4294967295|R>>>17),R=S+(F^(N|~I))+C[13]+1309151649&4294967295,S=N+(R<<21&4294967295|R>>>11),R=I+(N^(S|~F))+C[4]+4149444226&4294967295,I=S+(R<<6&4294967295|R>>>26),R=F+(S^(I|~N))+C[11]+3174756917&4294967295,F=I+(R<<10&4294967295|R>>>22),R=N+(I^(F|~S))+C[2]+718787259&4294967295,N=F+(R<<15&4294967295|R>>>17),R=S+(F^(N|~I))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+F&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const S=I-this.blockSize,C=this.C;let N=this.h,F=0;for(;F<I;){if(N==0)for(;F<=S;)s(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<I;)if(C[N++]=x.charCodeAt(F++),N==this.blockSize){s(this,C),N=0;break}}else for(;F<I;)if(C[N++]=x[F++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var S=x.length-8;S<x.length;++S)x[S]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,S=0;S<4;++S)for(let C=0;C<32;C+=8)x[I++]=this.g[S]>>>C&255;return x};function o(x,I){var S=h;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=I(x)}function l(x,I){this.h=I;const S=[];let C=!0;for(let N=x.length-1;N>=0;N--){const F=x[N]|0;C&&F==I||(S[N]=F,C=!1)}this.g=S}var h={};function d(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return U(p(-x));const I=[];let S=1;for(let C=0;x>=S;C++)I[C]=x/S|0,S*=4294967296;return new l(I,0)}function y(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return U(y(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=p(Math.pow(I,8));let C=v;for(let F=0;F<x.length;F+=8){var N=Math.min(8,x.length-F);const R=parseInt(x.substring(F,F+N),I);N<8?(N=p(Math.pow(I,N)),C=C.j(N).add(p(R))):(C=C.j(S),C=C.add(p(R)))}return C}var v=d(0),E=d(1),A=d(16777216);t=l.prototype,t.m=function(){if(D(this))return-U(this).m();let x=0,I=1;for(let S=0;S<this.g.length;S++){const C=this.i(S);x+=(C>=0?C:4294967296+C)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(D(this))return"-"+U(this).toString(x);const I=p(Math.pow(x,6));var S=this;let C="";for(;;){const N=W(S,I).g;S=k(S,N.j(I));let F=((S.g.length>0?S.g[0]:S.h)>>>0).toString(x);if(S=N,M(S))return F+C;for(;F.length<6;)F="0"+F;C=F+C}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function D(x){return x.h==-1}t.l=function(x){return x=k(this,x),D(x)?-1:M(x)?0:1};function U(x){const I=x.g.length,S=[];for(let C=0;C<I;C++)S[C]=~x.g[C];return new l(S,~x.h).add(E)}t.abs=function(){return D(this)?U(this):this},t.add=function(x){const I=Math.max(this.g.length,x.g.length),S=[];let C=0;for(let N=0;N<=I;N++){let F=C+(this.i(N)&65535)+(x.i(N)&65535),R=(F>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);C=R>>>16,F&=65535,R&=65535,S[N]=R<<16|F}return new l(S,S[S.length-1]&-2147483648?-1:0)};function k(x,I){return x.add(U(I))}t.j=function(x){if(M(this)||M(x))return v;if(D(this))return D(x)?U(this).j(U(x)):U(U(this).j(x));if(D(x))return U(this.j(U(x)));if(this.l(A)<0&&x.l(A)<0)return p(this.m()*x.m());const I=this.g.length+x.g.length,S=[];for(var C=0;C<2*I;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<x.g.length;N++){const F=this.i(C)>>>16,R=this.i(C)&65535,Me=x.i(N)>>>16,Xt=x.i(N)&65535;S[2*C+2*N]+=R*Xt,P(S,2*C+2*N),S[2*C+2*N+1]+=F*Xt,P(S,2*C+2*N+1),S[2*C+2*N+1]+=R*Me,P(S,2*C+2*N+1),S[2*C+2*N+2]+=F*Me,P(S,2*C+2*N+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new l(S,0)};function P(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function b(x,I){this.g=x,this.h=I}function W(x,I){if(M(I))throw Error("division by zero");if(M(x))return new b(v,v);if(D(x))return I=W(U(x),I),new b(U(I.g),U(I.h));if(D(I))return I=W(x,U(I)),new b(U(I.g),I.h);if(x.g.length>30){if(D(x)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var S=E,C=I;C.l(x)<=0;)S=X(S),C=X(C);var N=ee(S,1),F=ee(C,1);for(C=ee(C,2),S=ee(S,2);!M(C);){var R=F.add(C);R.l(x)<=0&&(N=N.add(S),F=R),C=ee(C,1),S=ee(S,1)}return I=k(x,N.j(I)),new b(N,I)}for(N=v;x.l(I)>=0;){for(S=Math.max(1,Math.floor(x.m()/I.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),F=p(S),R=F.j(I);D(R)||R.l(x)>0;)S-=C,F=p(S),R=F.j(I);M(F)&&(F=E),N=N.add(F),x=k(x,R)}return new b(N,x)}t.B=function(x){return W(this,x).h},t.and=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)&x.i(C);return new l(S,this.h&x.h)},t.or=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)|x.i(C);return new l(S,this.h|x.h)},t.xor=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)^x.i(C);return new l(S,this.h^x.h)};function X(x){const I=x.g.length+1,S=[];for(let C=0;C<I;C++)S[C]=x.i(C)<<1|x.i(C-1)>>>31;return new l(S,x.h)}function ee(x,I){const S=I>>5;I%=32;const C=x.g.length-S,N=[];for(let F=0;F<C;F++)N[F]=I>0?x.i(F+S)>>>I|x.i(F+S+1)<<32-I:x.i(F+S);return new l(N,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,GE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,zr=l}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,cl,KE,Dc,Lp,QE,YE,XE;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var z=u[T];if(!(z in _))break e;_=_[z]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,_){return u.call.apply(u.bind,arguments)}function p(u,m,_){return p=d,p.apply(null,arguments)}function y(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,z,j){for(var ne=Array(arguments.length-2),de=2;de<arguments.length;de++)ne[de-2]=arguments[de];return m.prototype[z].apply(T,ne)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function A(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function M(u,m){for(let T=1;T<arguments.length;T++){const z=arguments[T];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const j=z.length||0;u.length=_+j;for(let ne=0;ne<j;ne++)u[_+ne]=z[ne]}else u.push(z)}}class D{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){l.setTimeout(()=>{throw u},0)}function k(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class P{constructor(){this.h=this.g=null}add(m,_){const T=b.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var b=new D(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ee=!1,x=new P,I=()=>{const u=Promise.resolve(void 0);X=()=>{u.then(S)}};function S(){for(var u;u=k();){try{u.h.call(u.g)}catch(_){U(_)}var m=b;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ee=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,m),l.removeEventListener("test",_,m)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function Me(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(Me,N),Me.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xt="closure_listenable_"+(Math.random()*1e6|0),tt=0;function dn(u,m,_,T,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=z,this.key=++tt,this.da=this.fa=!1}function G(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function te(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function pe(u){const m={};for(const _ in u)m[_]=u[_];return m}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,m){let _,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(_ in T)u[_]=T[_];for(let j=0;j<Ie.length;j++)_=Ie[j],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function ie(u){this.src=u,this.g={},this.h=0}ie.prototype.add=function(u,m,_,T,z){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const ne=ce(u,m,T,z);return ne>-1?(m=u[ne],_||(m.fa=!1)):(m=new dn(m,this.src,j,!!T,z),m.fa=_,u.push(m)),m};function le(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],z=Array.prototype.indexOf.call(T,m,void 0),j;(j=z>=0)&&Array.prototype.splice.call(T,z,1),j&&(G(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ce(u,m,_,T){for(let z=0;z<u.length;++z){const j=u[z];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==T)return z}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),ht={};function dt(u,m,_,T,z){if(T&&T.once)return en(u,m,_,T,z);if(Array.isArray(m)){for(let j=0;j<m.length;j++)dt(u,m[j],_,T,z);return null}return _=wa(_),u&&u[Xt]?u.J(m,_,h(T)?!!T.capture:!!T,z):Jt(u,m,_,!1,T,z)}function Jt(u,m,_,T,z,j){if(!m)throw Error("Invalid event type");const ne=h(z)?!!z.capture:!!z;let de=ns(u);if(de||(u[Fe]=de=new ie(u)),_=de.add(m,_,T,ne,j),_.proxy)return _;if(T=Ti(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)F||(z=ne),z===void 0&&(z=!1),u.addEventListener(m.toString(),T,z);else if(u.attachEvent)u.attachEvent(va(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ti(){function u(_){return m.call(u.src,u.listener,_)}const m=wu;return u}function en(u,m,_,T,z){if(Array.isArray(m)){for(let j=0;j<m.length;j++)en(u,m[j],_,T,z);return null}return _=wa(_),u&&u[Xt]?u.K(m,_,h(T)?!!T.capture:!!T,z):Jt(u,m,_,!0,T,z)}function Ii(u,m,_,T,z){if(Array.isArray(m))for(var j=0;j<m.length;j++)Ii(u,m[j],_,T,z);else T=h(T)?!!T.capture:!!T,_=wa(_),u&&u[Xt]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],_=ce(m,_,T,z),_>-1&&(G(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ns(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ce(m,_,T,z)),(_=u>-1?m[u]:null)&&nr(_))}function nr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Xt])le(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(va(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=ns(m))?(le(_,u),_.h==0&&(_.src=null,m[Fe]=null)):G(u)}}}function va(u){return u in ht?ht[u]:ht[u]="on"+u}function wu(u,m){if(u.da)u=!0;else{m=new Me(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&nr(u),u=_.call(T,m)}return u}function ns(u){return u=u[Fe],u instanceof ie?u:null}var ir="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(u){return typeof u=="function"?u:(u[ir]||(u[ir]=function(m){return u.handleEvent(m)}),u[ir])}function ft(){C.call(this),this.i=new ie(this),this.M=this,this.G=null}v(ft,C),ft.prototype[Xt]=!0,ft.prototype.removeEventListener=function(u,m,_,T){Ii(this,u,m,_,T)};function pt(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var z=m;m=new N(T,u),Q(m,z)}z=!0;let j,ne;if(_)for(ne=_.length-1;ne>=0;ne--)j=m.g=_[ne],z=is(j,T,!0,m)&&z;if(j=m.g=u,z=is(j,T,!0,m)&&z,z=is(j,T,!1,m)&&z,_)for(ne=0;ne<_.length;ne++)j=m.g=_[ne],z=is(j,T,!1,m)&&z}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)G(_[T]);delete u.g[m],u.h--}}this.G=null},ft.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ft.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function is(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let j=0;j<m.length;++j){const ne=m[j];if(ne&&!ne.da&&ne.capture==_){const de=ne.listener,Je=ne.ha||ne.src;ne.fa&&le(u.i,ne),z=de.call(Je,T)!==!1&&z}}return z&&!T.defaultPrevented}function Eu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function Tu(u){u.g=Eu(()=>{u.g=null,u.i&&(u.i=!1,Tu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cd extends C{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(u){C.call(this),this.h=u,this.g={}}v(Si,C);var Ea=[];function Ta(u){fe(u.g,function(m,_){this.g.hasOwnProperty(_)&&nr(m)},u),u.g={}}Si.prototype.N=function(){Si.Z.N.call(this),Ta(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ia=l.JSON.stringify,Iu=l.JSON.parse,Su=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Pu(){}function Sa(){}var Pi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ws(){N.call(this,"d")}v(Ws,N);function Pa(){N.call(this,"c")}v(Pa,N);var fn={},xu=null;function $s(){return xu=xu||new ft}fn.Ia="serverreachability";function xa(u){N.call(this,fn.Ia,u)}v(xa,N);function rr(u){const m=$s();pt(m,new xa(m))}fn.STAT_EVENT="statevent";function Ca(u,m){N.call(this,fn.STAT_EVENT,u),this.stat=m}v(Ca,N);function xt(u){const m=$s();pt(m,new Ca(m,u))}fn.Ja="timingevent";function Cu(u,m){N.call(this,fn.Ja,u),this.size=m}v(Cu,N);function rs(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function ss(){this.g=!0}ss.prototype.ua=function(){this.g=!1};function Ad(u,m,_,T,z,j){u.info(function(){if(u.g)if(j){var ne="",de=j.split("&");for(let Oe=0;Oe<de.length;Oe++){var Je=de[Oe].split("=");if(Je.length>1){const st=Je[0];Je=Je[1];const nn=st.split("_");ne=nn.length>=2&&nn[1]=="type"?ne+(st+"="+Je+"&"):ne+(st+"=redacted&")}}}else ne=null;else ne=j;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+m+`
`+_+`
`+ne})}function Rd(u,m,_,T,z,j,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+m+`
`+_+`
`+j+" "+ne})}function Yn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ld(u,_)+(T?" "+T:"")})}function kd(u,m){u.info(function(){return"TIMEOUT: "+m})}ss.prototype.info=function(){};function Ld(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var _=j[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return Ia(j)}catch{return m}}var qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Au={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pn;function ue(){}v(ue,Pu),ue.prototype.g=function(){return new XMLHttpRequest},pn=new ue;function sr(u){return encodeURIComponent(String(u))}function Ru(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function bn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var Gs={},Zs={};function Xn(u,m,_){u.M=1,u.A=ar(Ct(m)),u.u=_,u.R=!0,Ra(u,null)}function Ra(u,m){u.F=Date.now(),Ks(u),u.B=Ct(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ls(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Aa,u.g=oo(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Cd(p(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Ea[0]=z.toString()),z=Ea);for(let j=0;j<z.length;j++){const ne=dt(_,z[j],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?pe(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),rr(),Ad(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Mn(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const de=Mn(this.g),Je=this.g.ya(),Oe=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||ro(this.g)))){this.K||de!=4||Je==7||(Je==8||Oe<=0?rr(3):rr(2)),La(this);var m=this.g.ca();this.X=m;var _=bd(this);if(this.o=m==200,Rd(this.i,this.v,this.B,this.l,this.S,de,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var j=T;break t}}j=null}if(u=j)Yn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ba(this,u);else{this.o=!1,this.m=3,xt(12),xi(this),Jn(this);break e}}if(this.R){u=!0;let st;for(;!this.K&&this.C<_.length;)if(st=Nd(this,_),st==Zs){de==4&&(this.m=4,xt(14),u=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(st==Gs){this.m=4,xt(15),Yn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Yn(this.i,this.l,st,null),ba(this,st);if(ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||_.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Yn(this.i,this.l,_,"[Invalid Chunked Response]"),xi(this),Jn(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ds(ne),ne.P=!0,xt(11))}}else Yn(this.i,this.l,_,null),ba(this,_);de==4&&xi(this),this.o&&!this.K&&(de==4?Mu(this.j,this):(this.o=!1,Ks(this)))}else Md(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),xi(this),Jn(this)}}}catch{}finally{}};function bd(u){if(!ku(u))return u.g.la();const m=ro(u.g);if(m==="")return"";let _="";const T=m.length,z=Mn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return xi(u),Jn(u),"";u.h.i=new l.TextDecoder}for(let j=0;j<T;j++)u.h.h=!0,_+=u.h.i.decode(m[j],{stream:!(z&&j==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function ku(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nd(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Zs:(_=Number(m.substring(_,T)),isNaN(_)?Gs:(T+=1,T+_>m.length?Zs:(m=m.slice(T,T+_),u.C=T+_,m)))}bn.prototype.cancel=function(){this.K=!0,xi(this)};function Ks(u){u.T=Date.now()+u.H,ka(u,u.H)}function ka(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=rs(p(u.aa,u),m)}function La(u){u.D&&(l.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kd(this.i,this.B),this.M!=2&&(rr(),xt(17)),xi(this),this.m=2,Jn(this)):ka(this,this.T-u)};function Jn(u){u.j.I==0||u.K||Mu(u.j,u)}function xi(u){La(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ta(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ba(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||Ci(_.h,u))){if(!u.L&&Ci(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)qt(_),Dt(_);else break e;Ba(_),xt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=rs(p(_.Va,_),6e3));Qs(_.h)<=1&&_.ta&&(_.ta=void 0)}else Mt(_,11)}else if((u.L||_.g==u)&&qt(_),!R(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Oe=z[m];const st=Oe[0];if(!(st<=_.K))if(_.K=st,Oe=Oe[1],_.I==2)if(Oe[0]=="c"){_.M=Oe[1],_.ba=Oe[2];const nn=Oe[3];nn!=null&&(_.ka=nn,_.j.info("VER="+_.ka));const Vn=Oe[4];Vn!=null&&(_.za=Vn,_.j.info("SVER="+_.za));const si=Oe[5];si!=null&&typeof si=="number"&&si>0&&(T=1.5*si,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const oi=u.g;if(oi){const ps=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ps){var j=T.h;j.g||ps.indexOf("spdy")==-1&&ps.indexOf("quic")==-1&&ps.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ys(j,j.h),j.h=null))}if(T.G){const Wa=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(T.wa=Wa,ye(T.J,T.G,Wa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ne=u;if(T.na=Ha(T,T.L?T.ba:null,T.W),ne.L){Na(T.h,ne);var de=ne,Je=T.O;Je&&(de.H=Je),de.D&&(La(de),Ks(de)),T.g=ne}else Ou(T);_.i.length>0&&cs(_)}else Oe[0]!="stop"&&Oe[0]!="close"||Mt(_,7);else _.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Mt(_,7):Fa(_):Oe[0]!="noop"&&_.l&&_.l.qa(Oe),_.A=0)}}rr(4)}catch{}}var Od=class{constructor(u,m){this.g=u,this.map=m}};function Lu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qs(u){return u.h?1:u.g?u.g.size:0}function Ci(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ys(u,m){u.g?u.g.add(m):u.h=m}function Na(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Lu.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function or(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return A(u.i)}var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function He(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let z,j=null;T>=0?(z=u[_].substring(0,T),j=u[_].substring(T+1)):z=u[_],m(z,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof mn?(this.l=u.l,In(this,u.j),this.o=u.o,this.g=u.g,Ai(this,u.u),this.h=u.h,we(this,eo(u.i)),this.m=u.m):u&&(m=String(u).match(ke))?(this.l=!1,In(this,m[1]||"",!0),this.o=ei(m[2]||""),this.g=ei(m[3]||"",!0),Ai(this,m[4]),this.h=ei(m[5]||"",!0),we(this,m[6]||"",!0),this.m=ei(m[7]||"")):(this.l=!1,this.i=new Nn(null,this.l))}mn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(wt(m,os,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(wt(m,os,!0),"@"),u.push(sr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(wt(_,_.charAt(0)=="/"?Xe:Ri,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",wt(_,as)),u.join("")},mn.prototype.resolve=function(u){const m=Ct(this);let _=!!u.j;_?In(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Ai(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=m.h.lastIndexOf("/");z!=-1&&(T=m.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const j=[];for(let ne=0;ne<z.length;){const de=z[ne++];de=="."?T&&ne==z.length&&j.push(""):de==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),T&&ne==z.length&&j.push("")):(j.push(de),T=!0)}T=j.join("/")}else T=z}return _?m.h=T:_=u.i.toString()!=="",_?we(m,eo(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Ct(u){return new mn(u)}function In(u,m,_){u.j=_?ei(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ai(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function we(u,m,_){m instanceof Nn?(u.i=m,to(u.i,u.l)):(_||(m=wt(m,ki)),u.i=new Nn(m,u.l))}function ye(u,m,_){u.i.set(m,_)}function ar(u){return ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ei(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function wt(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Dd),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dd(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var os=/[#\/\?@]/g,Ri=/[#\?:]/g,Xe=/[#\?]/g,ki=/[#\?@]/g,as=/#/g;function Nn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function On(u){u.g||(u.g=new Map,u.h=0,u.i&&He(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=Nn.prototype,t.add=function(u,m){On(this),this.i=null,u=ti(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function lr(u,m){On(u),m=ti(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Xs(u,m){return On(u),m=ti(u,m),u.g.has(m)}t.forEach=function(u,m){On(this),this.g.forEach(function(_,T){_.forEach(function(z){u.call(m,z,T,this)},this)},this)};function Js(u,m){On(u);let _=[];if(typeof m=="string")Xs(u,m)&&(_=_.concat(u.g.get(ti(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}t.set=function(u,m){return On(this),this.i=null,u=ti(this,u),Xs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Js(this,u),u.length>0?String(u[0]):m):m};function ls(u,m,_){lr(u,m),_.length>0&&(u.i=null,u.g.set(ti(u,m),A(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const z=sr(_);_=Js(this,_);for(let j=0;j<_.length;j++){let ne=z;_[j]!==""&&(ne+="="+sr(_[j])),u.push(ne)}}return this.i=u.join("&")};function eo(u){const m=new Nn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ti(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function to(u,m){m&&!u.j&&(On(u),u.i=null,u.g.forEach(function(_,T){const z=T.toLowerCase();T!=z&&(lr(this,T),ls(this,z,_))},u)),u.j=m}function Nu(u,m){const _=new ss;if(l.Image){const T=new Image;T.onload=y(ni,_,"TestLoadImage: loaded",!0,m,T),T.onerror=y(ni,_,"TestLoadImage: error",!1,m,T),T.onabort=y(ni,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=y(ni,_,"TestLoadImage: timeout",!1,m,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Oa(u,m){const _=new ss,T=new AbortController,z=setTimeout(()=>{T.abort(),ni(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(z),j.ok?ni(_,"TestPingServer: ok",!0,m):ni(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),ni(_,"TestPingServer: error",!1,m)})}function ni(u,m,_,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(_)}catch{}}function Ee(){this.g=new Su}function tn(u){this.i=u.Sb||null,this.h=u.ab||!1}v(tn,Pu),tn.prototype.g=function(){return new Ne(this.i,this.h)};function Ne(u,m){ft.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ne,ft),t=Ne.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,bi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Da(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Da(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Li(this):bi(this),this.readyState==3&&Da(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Li(this))},t.Na=function(u){this.g&&(this.response=u,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(u){u.readyState=4,u.l=null,u.j=null,u.B=null,bi(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function bi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ne.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function no(u){let m="";return fe(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Dn(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=no(_),typeof u=="string"?_!=null&&sr(_):ye(u,m,_))}function ze(u){ft.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ze,ft);var us=/^https?$/i,mt=["POST","PUT"];t=ze.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pn.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){ii(this,j);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)_.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())_.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(mt,m,void 0)>=0)||T||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ne]of _)this.g.setRequestHeader(j,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){ii(this,j)}};function ii(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Ma(u),io(u)}function Ma(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,pt(this,"complete"),pt(this,"abort"),io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),io(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Va(this):this.Xa())},t.Xa=function(){Va(this)};function Va(u){if(u.h&&typeof o<"u"){if(u.v&&Mn(u)==4)setTimeout(u.Ca.bind(u),0);else if(pt(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=j===0){let ne=String(u.D).match(ke)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),T=!us.test(ne?ne.toLowerCase():"")}_=T}if(_)pt(u,"complete"),pt(u,"success");else{u.o=6;try{var z=Mn(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",Ma(u)}}finally{io(u)}}}}function io(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||pt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Mn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Iu(m)}};function ro(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Md(u){const m={};u=(u.g&&Mn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var _=Ru(u[T]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[z]||[];m[z]=j,j.push(_)}te(m,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Pe(u){this.za=0,this.i=[],this.j=new ss,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,u),this.Za=ur("retryDelaySeedMs",1e4,u),this.Ta=ur("forwardChannelMaxRetries",2,u),this.va=ur("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Lu(u&&u.concurrentRequestLimit),this.Ba=new Ee,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pe.prototype,t.ka=8,t.I=1,t.connect=function(u,m,_,T){xt(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Ha(this,null,this.W),cs(this)};function Fa(u){if(cr(u),u.I==3){var m=u.V++,_=Ct(u.J);if(ye(_,"SID",u.M),ye(_,"RID",m),ye(_,"TYPE","terminate"),hs(u,_),m=new bn(u,u.j,m),m.M=2,m.A=ar(Ct(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=m.A,_=!0),_||(m.g=oo(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ks(m)}ja(u)}function Dt(u){u.g&&(ds(u),u.g.cancel(),u.g=null)}function cr(u){Dt(u),u.v&&(l.clearTimeout(u.v),u.v=null),qt(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function cs(u){if(!bu(u.h)&&!u.m){u.m=!0;var m=u.Ea;X||I(),ee||(X(),ee=!0),x.add(m,u),u.D=0}}function Vd(u,m){return Qs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=rs(p(u.Ea,u,m),Ua(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new bn(this,this.j,u);let j=this.o;if(this.U&&(j?(j=pe(j),Q(j,this.U)):j=this.U),this.u!==null||this.R||(z.J=j,j=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=za(this,z,m),_=Ct(this.J),ye(_,"RID",u),ye(_,"CVER",22),this.G&&ye(_,"X-HTTP-Session-Id",this.G),hs(this,_),j&&(this.R?m="headers="+sr(no(j))+"&"+m:this.u&&Dn(_,this.u,j)),Ys(this.h,z),this.Ra&&ye(_,"TYPE","init"),this.S?(ye(_,"$req",m),ye(_,"SID","null"),z.U=!0,Xn(z,_,null)):Xn(z,_,m),this.I=2}}else this.I==3&&(u?so(this,u):this.i.length==0||bu(this.h)||so(this))};function so(u,m){var _;m?_=m.l:_=u.V++;const T=Ct(u.J);ye(T,"SID",u.M),ye(T,"RID",_),ye(T,"AID",u.K),hs(u,T),u.u&&u.o&&Dn(T,u.u,u.o),_=new bn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=za(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ys(u.h,_),Xn(_,T,m)}function hs(u,m){u.H&&fe(u.H,function(_,T){ye(m,T,_)}),u.l&&fe({},function(_,T){ye(m,T,_)})}function za(u,m,_){_=Math.min(u.i.length,_);const T=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let de=-1;for(;;){const Je=["count="+_];de==-1?_>0?(de=z[0].g,Je.push("ofs="+de)):de=0:Je.push("ofs="+de);let Oe=!0;for(let st=0;st<_;st++){var j=z[st].g;const nn=z[st].map;if(j-=de,j<0)de=Math.max(0,z[st].g-100),Oe=!1;else try{j="req"+j+"_"||"";try{var ne=nn instanceof Map?nn:Object.entries(nn);for(const[Vn,si]of ne){let oi=si;h(si)&&(oi=Ia(si)),Je.push(j+Vn+"="+encodeURIComponent(oi))}}catch(Vn){throw Je.push(j+"type="+encodeURIComponent("_badmap")),Vn}}catch{T&&T(nn)}}if(Oe){ne=Je.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),m.G=u,ne}function Ou(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;X||I(),ee||(X(),ee=!0),x.add(m,u),u.A=0}}function Ba(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=rs(p(u.Da,u),Ua(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=rs(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Dt(this),Du(this))};function ds(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function Du(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ct(u.na);ye(m,"RID","rpc"),ye(m,"SID",u.M),ye(m,"AID",u.K),ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ye(m,"TO",u.ia),ye(m,"TYPE","xmlhttp"),hs(u,m),u.u&&u.o&&Dn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=ar(Ct(m)),_.u=null,_.R=!0,Ra(_,u)}t.Va=function(){this.C!=null&&(this.C=null,Dt(this),Ba(this),xt(19))};function qt(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Mu(u,m){var _=null;if(u.g==m){qt(u),ds(u),u.g=null;var T=2}else if(Ci(u.h,m))_=m.G,Na(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;T=$s(),pt(T,new Cu(T,_)),cs(u)}else Ou(u);else if(z=m.m,z==3||z==0&&m.X>0||!(T==1&&Vd(u,m)||T==2&&Ba(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:Mt(u,5);break;case 4:Mt(u,10);break;case 3:Mt(u,6);break;default:Mt(u,2)}}}function Ua(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Mt(u,m){if(u.j.info("Error code "+m),m==2){var _=p(u.bb,u),T=u.Ua;const z=!T;T=new mn(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||In(T,"https"),ar(T),z?Nu(T.toString(),_):Oa(T.toString(),_)}else xt(2);u.I=0,u.l&&u.l.pa(m),ja(u),cr(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ja(u){if(u.I=0,u.ja=[],u.l){const m=or(u.h);(m.length!=0||u.i.length!=0)&&(M(u.ja,m),M(u.ja,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.oa()}}function Ha(u,m,_){var T=_ instanceof mn?Ct(_):new mn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Ai(T,T.u);else{var z=l.location;T=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const j=new mn(null);T&&In(j,T),m&&(j.g=m),z&&Ai(j,z),_&&(j.h=_),T=j}return _=u.G,m=u.wa,_&&m&&ye(T,_,m),ye(T,"VER",u.ka),hs(u,T),T}function oo(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ze(new tn({ab:_})):new ze(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}t=Vu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function fs(){}fs.prototype.g=function(u,m){return new Vt(u,m)};function Vt(u,m){ft.call(this),this.g=new Pe(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}v(Vt,ft),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Fa(this.g)},Vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ia(u),u=_);m.i.push(new Od(m.Ya++,u)),m.I==3&&cs(m)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,Vt.Z.N.call(this)};function Fu(u){Ws.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Fu,Ws);function zu(){Pa.call(this),this.status=1}v(zu,Pa);function ri(u){this.g=u}v(ri,Vu),ri.prototype.ra=function(){pt(this.g,"a")},ri.prototype.qa=function(u){pt(this.g,new Fu(u))},ri.prototype.pa=function(u){pt(this.g,new zu)},ri.prototype.oa=function(){pt(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,XE=function(){return new fs},YE=function(){return $s()},QE=fn,Lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,Dc=qs,Au.COMPLETE="complete",KE=Au,Sa.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",ft.prototype.listen=ft.prototype.J,cl=Sa,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,ZE=ze}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const Hy="@firebase/firestore",Wy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Ym("@firebase/firestore");function mo(){return Os.logLevel}function oe(t,...e){if(Os.logLevel<=Ce.DEBUG){const n=e.map(eg);Os.debug(`Firestore (${ca}): ${t}`,...n)}}function Yi(t,...e){if(Os.logLevel<=Ce.ERROR){const n=e.map(eg);Os.error(`Firestore (${ca}): ${t}`,...n)}}function Yo(t,...e){if(Os.logLevel<=Ce.WARN){const n=e.map(eg);Os.warn(`Firestore (${ca}): ${t}`,...n)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,JE(t,i,n)}function JE(t,e,n){let i=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Yi(i),new Error(i)}function De(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||JE(e,s,i)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class QA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $i,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $i)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(De(typeof i.accessToken=="string",31837,{l:i}),new e1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class XA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $y{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $y(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $y(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tR(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ae(t,e){return t<e?-1:t>e?1:0}function bp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return Tf(s)===Tf(o)?Ae(s,o):Tf(s)?1:-1}return Ae(t.length,e.length)}const nR=55296,iR=57343;function Tf(t){const e=t.charCodeAt(0);return e>=nR&&e<=iR}function Xo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="__name__";class ci{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&_e(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=ci.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ae(e.length,n.length)}static compareSegments(e,n){const i=ci.isNumericId(e),s=ci.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ci.extractNumericId(e).compare(ci.extractNumericId(n)):bp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}}class Ue extends ci{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const rR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends ci{construct(e,n,i){return new Lt(e,n,i)}static isValidIdentifier(e){return rR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qy}static keyField(){return new Lt([qy])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new re(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new re(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new re(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ue.fromString(e))}static fromName(e){return new he(Ue.fromString(e).popFirst(5))}static empty(){return new he(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e,n){if(!n)throw new re(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sR(t,e,n,i){if(e===!0&&i===!0)throw new re(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gy(t){if(!he.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zy(t){if(he.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function n1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new re(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!n1(t))throw new re(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new re(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=-62135596800,Qy=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Qy);return new $e(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ky)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qy}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:ct("string",$e._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new $e(0,0))}static max(){return new ve(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function oR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(i===1e9?new $e(n+1,0):new $e(n,i));return new Wr(s,he.empty(),e)}function aR(t){return new Wr(t.readTime,t.key,Kl)}class Wr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Wr(ve.min(),he.empty(),Kl)}static max(){return new Wr(ve.max(),he.empty(),Kl)}}function lR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==uR)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(s=>s?K.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new K((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function hR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function da(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function sd(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function dR(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="";function fR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yy(e)),e=pR(t.get(n),e);return Yy(e)}function pR(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case i1:n+="";break;default:n+=o}}return n}function Yy(t){return t+i1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??kt.RED,this.left=s??kt.EMPTY,this.right=o??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new kt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jy(this.data.getIterator())}getIteratorFrom(e){return new Jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new vt(Lt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new s1("Invalid base64 string: "+o):o}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const mR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=mR.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="server_timestamp",a1="__type__",l1="__previous_value__",u1="__local_write_time__";function ig(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a1])==null?void 0:i.stringValue)===o1}function od(t){const e=t.mapValue.fields[l1];return ig(e)?od(e):e}function Ql(t){const e=$r(t.mapValue.fields[u1].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,i,s,o,l,h,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const Eh="(default)";class Yl{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new Yl("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="__type__",h1="__max__",_c={mapValue:{fields:{__type__:{stringValue:h1}}}},d1="__vector__",Th="value";function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ig(t)?4:yR(t)?9007199254740991:_R(t)?10:11:_e(28295,{value:t})}function Ei(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=$r(s.timestampValue),h=$r(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return qr(s.bytesValue).isEqual(qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return nt(s.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nt(s.integerValue)===nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=nt(s.doubleValue),h=nt(o.doubleValue);return l===h?wh(l)===wh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Xy(l)!==Xy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Ei(l[d],h[d])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function Xl(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Gr(t),i=Gr(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return ev(t.timestampValue,e.timestampValue);case 4:return ev(Ql(t),Ql(e));case 5:return bp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=qr(o),d=qr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Ae(h[p],d[p]);if(y!==0)return y}return Ae(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ae(nt(o.latitude),nt(l.latitude));return h!==0?h:Ae(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,A,M,D;const h=o.fields||{},d=l.fields||{},p=(E=h[Th])==null?void 0:E.arrayValue,y=(A=d[Th])==null?void 0:A.arrayValue,v=Ae(((M=p==null?void 0:p.values)==null?void 0:M.length)||0,((D=y==null?void 0:y.values)==null?void 0:D.length)||0);return v!==0?v:tv(p,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===_c.mapValue&&l===_c.mapValue)return 0;if(o===_c.mapValue)return 1;if(l===_c.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const E=bp(d[v],y[v]);if(E!==0)return E;const A=Jo(h[d[v]],p[y[v]]);if(A!==0)return A}return Ae(d.length,y.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=$r(t),i=$r(e),s=Ae(n.seconds,i.seconds);return s!==0?s:Ae(n.nanos,i.nanos)}function tv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Jo(n[s],i[s]);if(o)return o}return Ae(n.length,i.length)}function ea(t){return Np(t)}function Np(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=$r(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Np(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Np(n.fields[l])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function Mc(t){switch(Gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(t);return e?16+Mc(e):16;case 5:return 2*t.stringValue.length;case 6:return qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Mc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Jr(i.fields,(o,l)=>{s+=o.length+Mc(l)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Op(t){return!!t&&"integerValue"in t}function rg(t){return!!t&&"arrayValue"in t}function iv(t){return!!t&&"nullValue"in t}function rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function _R(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c1])==null?void 0:i.stringValue)===d1}function Sl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Sl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(t.arrayValue.values[n]);return e}return{...t}}function yR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===h1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=Lt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=Sl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Jr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new an(Sl(this.value))}}function f1(t){const e=[];return Jr(t.fields,(n,i)=>{const s=new Lt([n]);if(Vc(i)){const o=f1(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ht(e,0,ve.min(),ve.min(),ve.min(),an.empty(),0)}static newFoundDocument(e,n,i,s){return new Ht(e,1,n,ve.min(),i,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,ve.min(),ve.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ve.min(),ve.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function sv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=he.comparator(he.fromName(l.referenceValue),n.key):i=Jo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function vR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{}class ut extends p1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ER(e,n,i):n==="array-contains"?new SR(e,i):n==="in"?new PR(e,i):n==="not-in"?new xR(e,i):n==="array-contains-any"?new CR(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new TR(e,i):new IR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends p1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kn(e,n)}matches(e){return m1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m1(t){return t.op==="and"}function g1(t){return wR(t)&&m1(t)}function wR(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Dp(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(g1(t))return t.filters.map(e=>Dp(e)).join(",");{const e=t.filters.map(n=>Dp(n)).join(",");return`${t.op}(${e})`}}function _1(t,e){return t instanceof ut?function(i,s){return s instanceof ut&&i.op===s.op&&i.field.isEqual(s.field)&&Ei(i.value,s.value)}(t,e):t instanceof Kn?function(i,s){return s instanceof Kn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&_1(l,s.filters[h]),!0):!1}(t,e):void _e(19439)}function y1(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(y1).join(" ,")+"}"}(t):"Filter"}class ER extends ut{constructor(e,n,i){super(e,n,i),this.key=he.fromName(i.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class TR extends ut{constructor(e,n){super(e,"in",n),this.keys=v1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IR extends ut{constructor(e,n){super(e,"not-in",n),this.keys=v1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>he.fromName(i.referenceValue))}class SR extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&Xl(n.arrayValue,this.value)}}class PR extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class xR extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xl(this.value.arrayValue,n)}}class CR extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Xl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function av(t,e=null,n=[],i=[],s=null,o=null,l=null){return new AR(t,e,n,i,s,o,l)}function sg(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Dp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ea(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ea(i)).join(",")),e.Te=n}return e.Te}function og(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}function Mp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RR(t,e,n,i,s,o,l,h){return new fa(t,e,n,i,s,o,l,h)}function ag(t){return new fa(t)}function lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function w1(t){return t.collectionGroup!==null}function Pl(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new vt(Lt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Jl(o,i))}),n.has(Lt.keyField().canonicalString())||e.Ie.push(new Jl(Lt.keyField(),i))}return e.Ie}function pi(t){const e=Te(t);return e.Ee||(e.Ee=kR(e,Pl(t))),e.Ee}function kR(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Jl(s.field,o)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Vp(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fp(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return og(pi(t),pi(e))&&t.limitType===e.limitType}function E1(t){return`${sg(pi(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>y1(s)).join(", ")}]`),sd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${i})`}(pi(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):he.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Pl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=sv(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Pl(i),s)||i.endAt&&!function(l,h,d){const p=sv(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Pl(i),s))}(t,e)}function LR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T1(t){return(e,n)=>{let i=!1;for(const s of Pl(t)){const o=bR(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function bR(t,e,n){const i=t.field.isKeyField()?he.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Jo(d,p):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Ye(he.comparator);function Xi(){return NR}const I1=new Ye(he.comparator);function hl(...t){let e=I1;for(const n of t)e=e.insert(n.key,n);return e}function S1(t){let e=I1;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Es(){return xl()}function P1(){return xl()}function xl(){return new Bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const OR=new Ye(he.comparator),DR=new vt(he.comparator);function Re(...t){let e=DR;for(const n of t)e=e.add(n);return e}const MR=new vt(Ae);function VR(){return MR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function x1(t){return{integerValue:""+t}}function FR(t,e){return dR(e)?x1(e):lg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function zR(t,e,n){return t instanceof Sh?function(s,o){const l={fields:{[a1]:{stringValue:o1},[u1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ig(o)&&(o=od(o)),o&&(l.fields[l1]=o),{mapValue:l}}(n,e):t instanceof eu?A1(t,e):t instanceof tu?R1(t,e):function(s,o){const l=C1(s,o),h=uv(l)+uv(s.Ae);return Op(l)&&Op(s.Ae)?x1(h):lg(s.serializer,h)}(t,e)}function BR(t,e,n){return t instanceof eu?A1(t,e):t instanceof tu?R1(t,e):n}function C1(t,e){return t instanceof Ph?function(i){return Op(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Sh extends ud{}class eu extends ud{constructor(e){super(),this.elements=e}}function A1(t,e){const n=k1(e);for(const i of t.elements)n.some(s=>Ei(s,i))||n.push(i);return{arrayValue:{values:n}}}class tu extends ud{constructor(e){super(),this.elements=e}}function R1(t,e){let n=k1(e);for(const i of t.elements)n=n.filter(s=>!Ei(s,i));return{arrayValue:{values:n}}}class Ph extends ud{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uv(t){return nt(t.integerValue||t.doubleValue)}function k1(t){return rg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UR(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof eu&&s instanceof eu||i instanceof tu&&s instanceof tu?Xo(i.elements,s.elements,Ei):i instanceof Ph&&s instanceof Ph?Ei(i.Ae,s.Ae):i instanceof Sh&&s instanceof Sh}(t.transform,e.transform)}class jR{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function L1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ug(t.key,Gn.none()):new du(t.key,t.data,Gn.none());{const n=t.data,i=an.empty();let s=new vt(Lt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new es(t.key,i,new yn(s.toArray()),Gn.none())}}function HR(t,e,n){t instanceof du?function(s,o,l){const h=s.value.clone(),d=hv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof es?function(s,o,l){if(!Fc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=hv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(b1(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Cl(t,e,n,i){return t instanceof du?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=o.value.clone(),y=dv(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof es?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=dv(o.fieldTransforms,d,l),y=l.data;return y.setAll(b1(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,l,h){return Fc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function WR(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=C1(i.transform,s||null);o!=null&&(n===null&&(n=an.empty()),n.set(i.field,o))}return n||null}function cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Xo(i,s,(o,l)=>UR(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends cd{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class es extends cd{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function b1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function hv(t,e,n){const i=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,BR(l,h,n[s]))}return i}function dv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,zR(o,l,e))}return i}class ug extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $R extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&HR(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Cl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Cl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=P1();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=L1(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,i)=>cv(n,i))&&Xo(this.baseMutations,e.baseMutations,(n,i)=>cv(n,i))}}class cg{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){De(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return OR}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new cg(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Le;function KR(t){switch(t){case q.OK:return _e(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function N1(t){if(t===void 0)return Yi("GRPC error has no .code"),q.UNKNOWN;switch(t){case at.OK:return q.OK;case at.CANCELLED:return q.CANCELLED;case at.UNKNOWN:return q.UNKNOWN;case at.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case at.INTERNAL:return q.INTERNAL;case at.UNAVAILABLE:return q.UNAVAILABLE;case at.UNAUTHENTICATED:return q.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case at.NOT_FOUND:return q.NOT_FOUND;case at.ALREADY_EXISTS:return q.ALREADY_EXISTS;case at.PERMISSION_DENIED:return q.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case at.ABORTED:return q.ABORTED;case at.OUT_OF_RANGE:return q.OUT_OF_RANGE;case at.UNIMPLEMENTED:return q.UNIMPLEMENTED;case at.DATA_LOSS:return q.DATA_LOSS;default:return _e(39323,{code:t})}}(Le=at||(at={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new zr([4294967295,4294967295],0);function fv(t){const e=QR().encode(t),n=new GE;return n.update(e),new Uint8Array(n.digest())}function pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zr([n,i],0),new zr([s,o],0)]}class hg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(i<0)throw new dl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(zr.fromNumber(i)));return s.compare(YR)===1&&(s=new zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=fv(e),[i,s]=pv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new hg(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=fv(e),[i,s]=pv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hd(ve.min(),s,new Ye(Ae),Xi(),Re())}}class fu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fu(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class O1{constructor(e,n){this.targetId=e,this.Ce=n}}class D1{constructor(e,n,i=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class mv{constructor(){this.ve=0,this.Fe=gv(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),i=Re();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:_e(38017,{changeType:o})}}),new fu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=gv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xi(),this.Je=yc(),this.He=yc(),this.Ye=new Ye(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Mp(o))if(i===0){const l=new he(o.path);this.et(n,l,Ht.newNoDocument(l,ve.min()))}else De(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=qr(i).toUint8Array()}catch(d){if(d instanceof s1)return Yo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new hg(l,s,o)}catch(d){return Yo(d instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Mp(h.target)){const d=new he(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ht.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Re();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new hd(e,n,this.Ye,this.je,i);return this.je=Xi(),this.Je=yc(),this.He=yc(),this.Ye=new Ye(Ae),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yc(){return new Ye(he.comparator)}function gv(){return new Ye(he.comparator)}const JR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ek=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),tk=(()=>({and:"AND",or:"OR"}))();class nk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zp(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ik(t,e){return xh(t,e.toTimestamp())}function mi(t){return De(!!t,49232),ve.fromTimestamp(function(n){const i=$r(n);return new $e(i.seconds,i.nanos)}(t))}function dg(t,e){return Bp(t,e).canonicalString()}function Bp(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function V1(t){const e=Ue.fromString(t);return De(j1(e),10190,{key:e.toString()}),e}function Up(t,e){return dg(t.databaseId,e.path)}function If(t,e){const n=V1(e);if(n.get(1)!==t.databaseId.projectId)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(z1(n))}function F1(t,e){return dg(t.databaseId,e)}function rk(t){const e=V1(t);return e.length===4?Ue.emptyPath():z1(e)}function jp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z1(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _v(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function sk(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_e(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(De(y===void 0||typeof y=="string",58123),Ot.fromBase64String(y||"")):(De(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ot.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?q.UNKNOWN:N1(p.code);return new re(y,p.message||"")}(l);n=new D1(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=If(t,i.document.name),o=mi(i.document.updateTime),l=i.document.createTime?mi(i.document.createTime):ve.min(),h=new an({mapValue:{fields:i.document.fields}}),d=Ht.newFoundDocument(s,o,l,h),p=i.targetIds||[],y=i.removedTargetIds||[];n=new zc(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=If(t,i.document),o=i.readTime?mi(i.readTime):ve.min(),l=Ht.newNoDocument(s,o),h=i.removedTargetIds||[];n=new zc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=If(t,i.document),o=i.removedTargetIds||[];n=new zc([],o,s,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new ZR(s,o),h=i.targetId;n=new O1(h,l)}}return n}function ok(t,e){let n;if(e instanceof du)n={update:_v(t,e.key,e.value)};else if(e instanceof ug)n={delete:Up(t,e.key)};else if(e instanceof es)n={update:_v(t,e.key,e.data),updateMask:mk(e.fieldMask)};else{if(!(e instanceof $R))return _e(16599,{Vt:e.type});n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Sh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof tu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ph)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw _e(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:ik(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)}(t,e.precondition)),n}function ak(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?mi(s.updateTime):mi(o);return l.isEqual(ve.min())&&(l=mi(o)),new jR(l,s.transformResults||[])}(n,e))):[]}function lk(t,e){return{documents:[F1(t,e.path)]}}function uk(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=F1(t,s);const o=function(p){if(p.length!==0)return U1(Kn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:_o(E.field),direction:dk(E.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=zp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function ck(t){let e=rk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){De(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(v){const E=B1(v);return E instanceof Kn&&g1(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(E=>function(M){return new Jl(yo(M.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,sd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(v){const E=!!v.before,A=v.values||[];return new Ih(A,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,A=v.values||[];return new Ih(A,E)}(n.endAt)),RR(e,s,l,o,h,"F",d,p)}function hk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=yo(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yo(n.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=yo(n.unaryFilter.field);return ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return ut.create(yo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(i=>B1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function dk(t){return JR[t]}function fk(t){return ek[t]}function pk(t){return tk[t]}function _o(t){return{fieldPath:t.canonicalString()}}function yo(t){return Lt.fromServerFormat(t.fieldPath)}function U1(t){return t instanceof ut?function(n){if(n.op==="=="){if(rv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(iv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(iv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:fk(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const i=n.getFilters().map(s=>U1(s));return i.length===1?i[0]:{compositeFilter:{op:pk(n.op),filters:i}}}(t):_e(54877,{filter:t})}function mk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,i,s,o=ve.min(),l=ve.min(),h=Ot.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.yt=e}}function _k(t){const e=ck({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.Cn=new vk}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Wr.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class vk{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new vt(Ue.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new vt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H1=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(H1,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ta(0)}static cr(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="LruGarbageCollector",wk=1048576;function wv([t,e],[n,i]){const s=Ae(t,n);return s===0?Ae(e,i):s}class Ek{constructor(e){this.Ir=e,this.buffer=new vt(wv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();wv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Tk{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){da(n)?oe(vv,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}}class Ik{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(rd.ce);const i=new Ek(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(yv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),mo()<=Ce.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function Sk(t,e){return new Ik(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Cl(i.mutation,s,yn.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const s=Es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=hl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Xi();const l=xl(),h=function(){return xl()}();return n.forEach((d,p)=>{const y=i.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof es)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),Cl(y.mutation,p,y.mutation.getFieldMask(),$e.now())):l.set(p.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>h.set(p,new xk(y,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=xl();let s=new Ye((l,h)=>l-h),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=i.get(d)||yn.empty();y=h.applyToLocalView(p,y),i.set(d,y);const v=(s.get(h.batchId)||Re()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=P1();y.forEach(E=>{if(!o.has(E)){const A=L1(n.get(E),i.get(E));A!==null&&v.set(E,A),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return K.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return he.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):K.resolve(Es());let h=Kl,d=o;return l.next(p=>K.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{d=d.insert(y,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Re())).next(y=>({batchId:h,changes:S1(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(i=>{let s=hl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=hl();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(v,E){return new fa(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(y=>{y.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Ht.newInvalidDocument(y)))});let h=hl();return l.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Cl(y.mutation,p,yn.empty(),$e.now()),ld(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mi(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:_k(s.bundledQuery),readTime:mi(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.overlays=new Ye(he.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Es();return K.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const s=Es(),o=n.length+1,l=new he(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ye((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=Es(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Es(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return K.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new GR(n,i));let o=this.qr.get(n);o===void 0&&(o=Re(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Qr=new vt(Tt.$r),this.Ur=new vt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Tt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new he(new Ue([])),i=new Tt(n,e),s=new Tt(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Ue([])),i=new Tt(n,e),s=new Tt(n,e+1);let o=Re();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Tt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(Tt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qR(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Tt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new vt(Ae);return n.forEach(s=>{const o=new Tt(s,0),l=new Tt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;he.isDocumentKey(o)||(o=o.child(""));const l=new Tt(new he(o),0);let h=new vt(Ae);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),K.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,s=>{const o=new Tt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Tt(n,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.ri=e,this.docs=function(){return new Ye(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let i=Xi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ht.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Xi();const l=n.path,h=new he(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||lR(aR(y),i)<=0||(s.has(y.key)||ld(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,s){_e(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Nk(this)}getSize(e){return K.resolve(this.size)}}class Nk extends Pk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.persistence=e,this.si=new Bs(n=>sg(n),og),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new fg,this.targetCount=0,this.ai=ta.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ta(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.ui={},this.overlays={},this.ci=new rd(0),this.li=!1,this.li=!0,this.hi=new kk,this.referenceDelegate=e(this),this.Pi=new Ok(this),this.indexManager=new yk,this.remoteDocumentCache=function(s){return new bk(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new gk(n),this.Ii=new Ak(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new Lk(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const s=new Dk(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class Dk extends cR{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new fg,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const s=he.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.pi=new Bs(i=>fR(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=Sk(this,n)}static mi(e,n){return new Ch(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?K.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ve.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mc(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Re(),s=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new mg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return LC()?8:hR($t())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Mk;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(mo()<=Ce.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(mo()<=Ce.DEBUG&&oe("QueryEngine","Query:",go(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(mo()<=Ce.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(n))):K.resolve())}ys(e,n){if(lv(n))return K.resolve(null);let i=pi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fp(n,null,"F"),i=pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Re(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Fp(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,i,s){return lv(n)||s.isEqual(ve.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?K.resolve(null):(mo()<=Ce.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),go(n)),this.vs(e,l,n,oR(s,Kl)).next(h=>h))})}Ds(e,n){let i=new vt(T1(e));return n.forEach((s,o)=>{ld(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return mo()<=Ce.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,Wr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="LocalStore",Fk=3e8;class zk{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Ae),this.xs=new Bs(o=>sg(o),og),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ck(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Bk(t,e,n,i){return new zk(t,e,n,i)}async function $1(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Re();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function Uk(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,E=v.keys();let A=K.resolve();return E.forEach(M=>{A=A.next(()=>y.getEntry(d,M)).next(D=>{const U=p.docVersions.get(M);De(U!==null,48541),D.version.compareTo(U)<0&&(v.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),y.addEntry(D)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Re();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function q1(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jk(t,e){const n=Te(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((y,v)=>{const E=s.get(v);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,y.addedDocuments,v)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(Ot.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),s=s.insert(v,A),function(D,U,k){return D.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Fk?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(E,A,y)&&h.push(n.Pi.updateTargetData(o,A))});let d=Xi(),p=Re();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(Hk(o,l,e.documentUpdates).next(y=>{d=y.ks,p=y.qs})),!i.isEqual(ve.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function Hk(t,e,n){let i=Re(),s=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Xi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ve.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):oe(gg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function Wk(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ng),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function $k(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,K.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new Cr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Hp(t,e,n){const i=Te(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!da(l))throw l;oe(gg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Ev(t,e,n){const i=Te(t);let s=ve.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const v=Te(d),E=v.xs.get(y);return E!==void 0?K.resolve(v.Ms.get(E)):v.Pi.getTargetData(p,y)}(i,l,pi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:ve.min(),n?o:Re())).next(h=>(qk(i,LR(e),h),{documents:h,Qs:o})))}function qk(t,e,n){let i=t.Os.get(e)||ve.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Tv{constructor(){this.activeTargetIds=VR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gk{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="ConnectivityMonitor";class Sv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Iv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function Wp(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="RestConnection",Kk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Eh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=Wp(),h=this.zo(e,n.toUriEncodedString());oe(Sf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),y=la(p);return this.Jo(e,h,d,i,y).then(v=>(oe(Sf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Yo(Sf,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=Kk[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Xk extends Qk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=Wp();return new Promise((h,d)=>{const p=new ZE;p.setWithCredentials(!0),p.listenOnce(KE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Dc.NO_ERROR:const v=p.getResponseJson();oe(Bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Dc.TIMEOUT:oe(Bt,`RPC '${e}' ${l} timed out`),d(new re(q.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:const E=p.getStatus();if(oe(Bt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const M=A==null?void 0:A.error;if(M&&M.status&&M.message){const D=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(P)>=0?P:q.UNKNOWN}(M.status);d(new re(D,M.message))}else d(new re(q.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new re(q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{oe(Bt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);oe(Bt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",y,i,15)})}T_(e,n,i){const s=Wp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=XE(),h=YE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=o.join("");oe(Bt,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=l.createWebChannel(y,d);this.I_(v);let E=!1,A=!1;const M=new Yk({Yo:U=>{A?oe(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(E||(oe(Bt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),oe(Bt,`RPC '${e}' stream ${s} sending:`,U),v.send(U))},Zo:()=>v.close()}),D=(U,k,P)=>{U.listen(k,b=>{try{P(b)}catch(W){setTimeout(()=>{throw W},0)}})};return D(v,cl.EventType.OPEN,()=>{A||(oe(Bt,`RPC '${e}' stream ${s} transport opened.`),M.o_())}),D(v,cl.EventType.CLOSE,()=>{A||(A=!0,oe(Bt,`RPC '${e}' stream ${s} transport closed`),M.a_(),this.E_(v))}),D(v,cl.EventType.ERROR,U=>{A||(A=!0,Yo(Bt,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),M.a_(new re(q.UNAVAILABLE,"The operation could not be completed")))}),D(v,cl.EventType.MESSAGE,U=>{var k;if(!A){const P=U.data[0];De(!!P,16349);const b=P,W=(b==null?void 0:b.error)||((k=b[0])==null?void 0:k.error);if(W){oe(Bt,`RPC '${e}' stream ${s} received error:`,W);const X=W.status;let ee=function(S){const C=at[S];if(C!==void 0)return N1(C)}(X),x=W.message;ee===void 0&&(ee=q.INTERNAL,x="Unknown error status: "+X+" with message "+W.message),A=!0,M.a_(new re(ee,x)),v.close()}else oe(Bt,`RPC '${e}' stream ${s} received:`,P),M.u_(P)}}),D(h,QE.STAT_EVENT,U=>{U.stat===Lp.PROXY?oe(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Lp.NOPROXY&&oe(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new nk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class Z1{constructor(e,n,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new re(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(Pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jk extends Z1{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sk(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ve.min():l.readTime?mi(l.readTime):ve.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Mp(d)?{documents:lk(o,d)}:{query:uk(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=M1(o,l.resumeToken);const p=zp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ve.min())>0){h.readTime=xh(o,l.snapshotVersion.toTimestamp());const p=zp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=hk(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.q_(n)}}class e2 extends Z1{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ak(e.writeResults,e.commitTime),i=mi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>ok(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{}class n2 extends t2{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Bp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(q.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Bp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(q.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="RemoteStore";class r2{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Us(this)&&(oe(Ds,"Restarting streams for network reachability change."),await async function(d){const p=Te(d);p.Ea.add(4),await pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await fd(p)}(this))})}),this.Ra=new i2(i,s)}}async function fd(t){if(Us(t))for(const e of t.da)await e(!0)}async function pu(t){for(const e of t.da)await e(!1)}function K1(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wg(n)?vg(n):pa(n).O_()&&yg(n,e))}function _g(t,e){const n=Te(t),i=pa(n);n.Ia.delete(e),i.O_()&&Q1(n,e),n.Ia.size===0&&(i.O_()?i.L_():Us(n)&&n.Ra.set("Unknown"))}function yg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).Y_(e)}function Q1(t,e){t.Va.Ue(e),pa(t).Z_(e)}function vg(t){t.Va=new XR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Ra.ua()}function wg(t){return Us(t)&&!pa(t).x_()&&t.Ia.size>0}function Us(t){return Te(t).Ea.size===0}function Y1(t){t.Va=void 0}async function s2(t){t.Ra.set("Online")}async function o2(t){t.Ia.forEach((e,n)=>{yg(t,e)})}async function a2(t,e){Y1(t),wg(t)?(t.Ra.ha(e),vg(t)):t.Ra.set("Unknown")}async function l2(t,e,n){if(t.Ra.set("Online"),e instanceof D1&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){oe(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ah(t,i)}else if(e instanceof zc?t.Va.Ze(e):e instanceof O1?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const i=await q1(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(Ot.EMPTY_BYTE_STRING,y.snapshotVersion)),Q1(o,d);const v=new Cr(y.target,d,p,y.sequenceNumber);yg(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){oe(Ds,"Failed to raise snapshot:",i),await Ah(t,i)}}async function Ah(t,e,n){if(!da(e))throw e;t.Ea.add(1),await pu(t),t.Ra.set("Offline"),n||(n=()=>q1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fd(t)})}function X1(t,e){return e().catch(n=>Ah(t,n,e))}async function pd(t){const e=Te(t),n=Zr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ng;for(;u2(e);)try{const s=await Wk(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,c2(e,s)}catch(s){await Ah(e,s)}J1(e)&&eT(e)}function u2(t){return Us(t)&&t.Ta.length<10}function c2(t,e){t.Ta.push(e);const n=Zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function J1(t){return Us(t)&&!Zr(t).x_()&&t.Ta.length>0}function eT(t){Zr(t).start()}async function h2(t){Zr(t).ra()}async function d2(t){const e=Zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function f2(t,e,n){const i=t.Ta.shift(),s=cg.from(i,e,n);await X1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pd(t)}async function p2(t,e){e&&Zr(t).X_&&await async function(i,s){if(function(l){return KR(l)&&l!==q.ABORTED}(s.code)){const o=i.Ta.shift();Zr(i).B_(),await X1(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pd(i)}}(t,e),J1(t)&&eT(t)}async function xv(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),oe(Ds,"RemoteStore received new credentials");const i=Us(n);n.Ea.add(3),await pu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fd(n)}async function m2(t,e){const n=Te(t);e?(n.Ea.delete(2),await fd(n)):e||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function pa(t){return t.ma||(t.ma=function(n,i,s){const o=Te(n);return o.sa(),new Jk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:s2.bind(null,t),t_:o2.bind(null,t),r_:a2.bind(null,t),H_:l2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),wg(t)?vg(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y1(t))})),t.ma}function Zr(t){return t.fa||(t.fa=function(n,i,s){const o=Te(n);return o.sa(),new e2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h2.bind(null,t),r_:p2.bind(null,t),ta:d2.bind(null,t),na:f2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pd(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Eg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(Yi("AsyncQueue",`${e}: ${t}`),da(t))return new re(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||he.comparator(n.key,i.key):(n,i)=>he.comparator(n.key,i.key),this.keyedMap=hl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Fo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new Ye(he.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class na{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new na(e,n,Fo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _2{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Te(n),o=s.queries;s.queries=Av(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new re(q.ABORTED,"Firestore shutting down"))}}function Av(){return new Bs(t=>E1(t),ad)}async function tT(t,e){const n=Te(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new g2,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Tg(l,`Initialization of query '${go(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ig(n)}async function nT(t,e){const n=Te(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function y2(t,e){const n=Te(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&Ig(n)}function v2(t,e,n){const i=Te(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function Ig(t){t.Ca.forEach(e=>{e.next()})}var $p,Rv;(Rv=$p||($p={})).Ma="default",Rv.Cache="cache";class iT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.key=e}}class sT{constructor(e){this.key=e}}class w2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=T1(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Cv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const E=s.get(y),A=ld(this.query,v)?v:null,M=!!E&&this.mutatedKeys.has(E.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let U=!1;E&&A?E.data.isEqual(A.data)?M!==D&&(i.track({type:3,doc:A}),U=!0):this.su(E,A)||(i.track({type:2,doc:A}),U=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!E&&A?(i.track({type:0,doc:A}),U=!0):E&&!A&&(i.track({type:1,doc:E}),U=!0,(d||p)&&(h=!0)),U&&(A?(l=l.add(A),o=D?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,v)=>function(A,M){const D=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:U})}};return D(A)-D(M)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new na(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new sT(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new rT(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class E2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class T2{constructor(e){this.key=e,this.hu=!1}}class I2{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Bs(h=>E1(h),ad),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(he.comparator),this.Au=new Map,this.Ru=new fg,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(t,e,n=!0){const i=hT(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await oT(i,e,n,!0),s}async function P2(t,e){const n=hT(t);await oT(n,e,!0,!1)}async function oT(t,e,n,i){const s=await $k(t.localStore,pi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await x2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&K1(t.remoteStore,s),h}async function x2(t,e,n,i,s){t.pu=(v,E,A)=>async function(D,U,k,P){let b=U.view.ru(k);b.Cs&&(b=await Ev(D.localStore,U.query,!1).then(({documents:x})=>U.view.ru(x,b)));const W=P&&P.targetChanges.get(U.targetId),X=P&&P.targetMismatches.get(U.targetId)!=null,ee=U.view.applyChanges(b,D.isPrimaryClient,W,X);return Lv(D,U.targetId,ee.au),ee.snapshot}(t,v,E,A);const o=await Ev(t.localStore,e,!0),l=new w2(e,o.Qs),h=l.ru(o.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Lv(t,n,p.au);const y=new E2(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function C2(t,e,n){const i=Te(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!ad(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Hp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&_g(i.remoteStore,s.targetId),qp(i,s.targetId)}).catch(ha)):(qp(i,s.targetId),await Hp(i.localStore,s.targetId,!0))}async function A2(t,e){const n=Te(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),_g(n.remoteStore,i.targetId))}async function R2(t,e,n){const i=M2(t);try{const s=await function(l,h){const d=Te(l),p=$e.now(),y=h.reduce((A,M)=>A.add(M.key),Re());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let M=Xi(),D=Re();return d.Ns.getEntries(A,y).next(U=>{M=U,M.forEach((k,P)=>{P.isValidDocument()||(D=D.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,M)).next(U=>{v=U;const k=[];for(const P of h){const b=WR(P,v.get(P.key).overlayedDocument);b!=null&&k.push(new es(P.key,b,f1(b.value.mapValue),Gn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,k,h)}).next(U=>{E=U;const k=U.applyToLocalDocumentSet(v,D);return d.documentOverlayCache.saveOverlays(A,U.batchId,k)})}).then(()=>({batchId:E.batchId,changes:S1(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ye(Ae)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(i,s.batchId,n),await mu(i,s.changes),await pd(i.remoteStore)}catch(s){const o=Tg(s,"Failed to persist write");n.reject(o)}}async function aT(t,e){const n=Te(t);try{const i=await jk(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?De(l.hu,14607):s.removedDocuments.size>0&&(De(l.hu,42227),l.hu=!1))}),await mu(n,i,e)}catch(i){await ha(i)}}function kv(t,e,n){const i=Te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=Te(l);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const E of v.Sa)E.va(h)&&(p=!0)}),p&&Ig(d)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function k2(t,e,n){const i=Te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Ye(he.comparator);l=l.insert(o,Ht.newNoDocument(o,ve.min()));const h=Re().add(o),d=new hd(ve.min(),new Map,new Ye(Ae),l,h);await aT(i,d),i.du=i.du.remove(o),i.Au.delete(e),Pg(i)}else await Hp(i.localStore,e,!1).then(()=>qp(i,e,n)).catch(ha)}async function L2(t,e){const n=Te(t),i=e.batch.batchId;try{const s=await Uk(n.localStore,e);uT(n,i,null),lT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mu(n,s)}catch(s){await ha(s)}}async function b2(t,e,n){const i=Te(t);try{const s=await function(l,h){const d=Te(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(De(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,e);uT(i,e,n),lT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mu(i,s)}catch(s){await ha(s)}}function lT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uT(t,e,n){const i=Te(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||cT(t,i)})}function cT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_g(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Pg(t))}function Lv(t,e,n){for(const i of n)i instanceof rT?(t.Ru.addReference(i.key,e),N2(t,i)):i instanceof sT?(oe(Sg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||cT(t,i.key)):_e(19791,{wu:i})}function N2(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(oe(Sg,"New document in limbo: "+n),t.Eu.add(i),Pg(t))}function Pg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Ue.fromString(e)),i=t.fu.next();t.Au.set(i,new T2(n)),t.du=t.du.insert(n,i),K1(t.remoteStore,new Cr(pi(ag(n.path)),i,"TargetPurposeLimboResolution",rd.ce))}}async function mu(t,e,n){const i=Te(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=mg.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,p){const y=Te(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>K.forEach(p,E=>K.forEach(E.Es,A=>y.persistence.referenceDelegate.addReference(v,E.targetId,A)).next(()=>K.forEach(E.ds,A=>y.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))}catch(v){if(!da(v))throw v;oe(gg,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const A=y.Ms.get(E),M=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(M);y.Ms=y.Ms.insert(E,D)}}}(i.localStore,o))}async function O2(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){oe(Sg,"User change. New user:",e.toKey());const i=await $1(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new re(q.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mu(n,i.Ls)}}function D2(t,e){const n=Te(t),i=n.Au.get(e);if(i&&i.hu)return Re().add(i.key);{let s=Re();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function hT(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k2.bind(null,e),e.Pu.H_=y2.bind(null,e.eventManager),e.Pu.yu=v2.bind(null,e.eventManager),e}function M2(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b2.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Bk(this.persistence,new Vk,e.initialUser,this.serializer)}Cu(e){return new W1(pg.mi,this.serializer)}Du(e){return new Gk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class V2 extends Rh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Ch,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Tk(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new W1(i=>Ch.mi(i,n),this.serializer)}}class Gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O2.bind(null,this.syncEngine),await m2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _2}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(o){return new Xk(o)}(e.databaseInfo);return function(o,l,h,d){return new n2(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new r2(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>kv(this.syncEngine,n,0),function(){return Sv.v()?new Sv:new Zk}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,y){const v=new I2(s,o,l,h,d,p);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Te(s);oe(Ds,"RemoteStore shutting down."),o.Ea.add(5),await pu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class F2{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ut.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{oe(Kr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(oe(Kr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Tg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function xf(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await $1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z2(t);oe(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>xv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>xv(e.remoteStore,s)),t._onlineComponents=e}async function z2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Kr,"Using user provided OfflineComponentProvider");try{await xf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await xf(t,new Rh)}}else oe(Kr,"Using default OfflineComponentProvider"),await xf(t,new V2(void 0));return t._offlineComponents}async function fT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Kr,"Using user provided OnlineComponentProvider"),await bv(t,t._uninitializedComponentsProvider._online)):(oe(Kr,"Using default OnlineComponentProvider"),await bv(t,new Gp))),t._onlineComponents}function B2(t){return fT(t).then(e=>e.syncEngine)}async function pT(t){const e=await fT(t),n=e.eventManager;return n.onListen=S2.bind(null,e.syncEngine),n.onUnlisten=C2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A2.bind(null,e.syncEngine),n}function U2(t,e,n={}){const i=new $i;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new dT({next:E=>{y.Nu(),l.enqueueAndForget(()=>nT(o,v));const A=E.docs.has(h);!A&&E.fromCache?p.reject(new re(q.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new re(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new iT(ag(h.path),y,{includeMetadataChanges:!0,qa:!0});return tT(o,v)}(await pT(t),t.asyncQueue,e,n,i)),i.promise}function j2(t,e,n={}){const i=new $i;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new dT({next:E=>{y.Nu(),l.enqueueAndForget(()=>nT(o,v)),E.fromCache&&d.source==="server"?p.reject(new re(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new iT(h,y,{includeMetadataChanges:!0,qa:!0});return tT(o,v)}(await pT(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firestore.googleapis.com",Ov=!0;class Dv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gT,this.ssl=Ov}else this.host=e.host,this.ssl=e.ssl??Ov;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wk)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mT(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KA;switch(i.type){case"firstParty":return new JA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Nv.get(n);i&&(oe("ComponentProvider","Removing Datastore"),Nv.delete(n),i.terminate())}(this),Promise.resolve()}}function H2(t,e,n,i={}){var p;t=wi(t,md);const s=la(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(zE(`https://${h}`),BE("Firestore",!0)),o.host!==gT&&o.host!==h&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!bs(d,l)&&(t._setSettings(d),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Ut.MOCK_USER;else{y=TC(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new re(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ut(E)}t._authCredentials=new QA(new e1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class rt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(hu(n,rt._jsonSchema))return new rt(e,i||null,new he(Ue.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ct("string",rt._jsonSchemaVersion),referencePath:ct("string")};class Br extends js{constructor(e,n,i){super(e,n,ag(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new he(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function gr(t,e,...n){if(t=Pt(t),t1("collection","path",e),t instanceof md){const i=Ue.fromString(e,...n);return Zy(i),new Br(t,null,i)}{if(!(t instanceof rt||t instanceof Br))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Zy(i),new Br(t.firestore,null,i)}}function Vi(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=tg.newId()),t1("doc","path",e),t instanceof md){const i=Ue.fromString(e,...n);return Gy(i),new rt(t,null,new he(i))}{if(!(t instanceof rt||t instanceof Br))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Gy(i),new rt(t.firestore,t instanceof Br?t.converter:null,new he(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="AsyncQueue";class Vv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G1(this,"async_queue_retry"),this._c=()=>{const i=Pf();i&&oe(Mv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new $i;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;oe(Mv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",Fv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Eg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&_e(47125,{Pc:Fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Fv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ma extends md{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vv(e),this._firestoreClient=void 0,await e}}}function W2(t,e){const n=typeof t=="object"?t:WE(),i=typeof t=="string"?t:e||Eh,s=Jm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=wC("firestore");o&&H2(s,...o)}return s}function xg(t){if(t._terminated)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$2(t),t._firestoreClient}function $2(t){var i,s,o;const e=t._freezeSettings(),n=function(h,d,p,y){return new gR(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,mT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new F2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(Ot.fromBase64String(e))}catch(n){throw new re(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:ct("string",Cn._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(hu(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:ct("string",gi._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _i(e.vectorValues);throw new re(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:ct("string",_i._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=/^__.*__$/;class G2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class _T{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:t})}}class Ag{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yT(this.Ac)&&q2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Cc(e,n,i,s=!1){return new Ag({Ac:e,methodName:n,Dc:i,path:Lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rg(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new Z2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function K2(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);kg("Data must be an object, but it was:",l,i);const h=vT(i,l);let d,p;if(o.merge)d=new yn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=Zp(e,v,n);if(!l.contains(E))throw new re(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);ET(y,E)||y.push(E)}d=new yn(y),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new G2(new an(h),d,p)}class _d extends Cg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function Q2(t,e,n,i){const s=t.Cc(1,e,n);kg("Data must be an object, but it was:",s,i);const o=[],l=an.empty();Jr(i,(d,p)=>{const y=Lg(e,d,n);p=Pt(p);const v=s.yc(y);if(p instanceof _d)o.push(y);else{const E=gu(p,v);E!=null&&(o.push(y),l.set(y,E))}});const h=new yn(o);return new _T(l,h,s.fieldTransforms)}function Y2(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Zp(e,i,n)],d=[s];if(o.length%2!=0)throw new re(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Zp(e,o[E])),d.push(o[E+1]);const p=[],y=an.empty();for(let E=h.length-1;E>=0;--E)if(!ET(p,h[E])){const A=h[E];let M=d[E];M=Pt(M);const D=l.yc(A);if(M instanceof _d)p.push(A);else{const U=gu(M,D);U!=null&&(p.push(A),y.set(A,U))}}const v=new yn(p);return new _T(y,v,l.fieldTransforms)}function X2(t,e,n,i=!1){return gu(n,t.Cc(i?4:3,e))}function gu(t,e){if(wT(t=Pt(t)))return kg("Unsupported field value:",e,t),vT(t,e);if(t instanceof Cg)return function(i,s){if(!yT(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=gu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=$e.fromDate(i);return{timestampValue:xh(s.serializer,o)}}if(i instanceof $e){const o=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xh(s.serializer,o)}}if(i instanceof gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cn)return{bytesValue:M1(s.serializer,i._byteString)};if(i instanceof rt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof _i)return function(l,h){return{mapValue:{fields:{[c1]:{stringValue:d1},[Th]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return lg(h.serializer,p)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${id(i)}`)}(t,e)}function vT(t,e){const n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(i,s)=>{const o=gu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function wT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof gi||t instanceof Cn||t instanceof rt||t instanceof Cg||t instanceof _i)}function kg(t,e,n){if(!wT(n)||!n1(n)){const i=id(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Zp(t,e,n){if((e=Pt(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Lg(t,e);throw kh("Field path arguments must be of type string or ",t,!1,void 0,n)}const J2=new RegExp("[~\\*/\\[\\]]");function Lg(t,e,n){if(e.search(J2)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new re(q.INVALID_ARGUMENT,h+t+d)}function ET(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eL extends TT{data(){return super.data()}}function yd(t,e){return typeof e=="string"?Lg(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bg{}class IT extends bg{}function Bc(t,e,...n){let i=[];e instanceof bg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Ng).length,h=o.filter(d=>d instanceof vd).length;if(l>1||l>0&&h>0)throw new re(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class vd extends IT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new vd(e,n,i)}_apply(e){const n=this._parse(e);return ST(e._query,n),new js(e.firestore,e.converter,Vp(e._query,n))}_parse(e){const n=Rg(e.firestore);return function(o,l,h,d,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new re(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Bv(v,y);const M=[];for(const D of v)M.push(zv(d,o,D));E={arrayValue:{values:M}}}else E=zv(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Bv(v,y),E=X2(h,l,v,y==="in"||y==="not-in");return ut.create(p,y,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uc(t,e,n){const i=e,s=yd("where",t);return vd._create(s,i,n)}class Ng extends bg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ng(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)ST(l,d),l=Vp(l,d)}(e._query,n),new js(e.firestore,e.converter,Vp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends IT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Og(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(o,l)}(e._query,this._field,this._direction);return new js(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new fa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nL(t,e="asc"){const n=e,i=yd("orderBy",t);return Og._create(i,n)}function zv(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new re(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w1(e)&&n.indexOf("/")!==-1)throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!he.isDocumentKey(i))throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return nv(t,new he(i))}if(n instanceof rt)return nv(t,n._key);throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function Bv(t,e){if(!Array.isArray(t)||t.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ST(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iL{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[Th].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>nt(l.doubleValue));return new _i(n)}convertGeoPoint(e){return new gi(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=od(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=$r(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);De(j1(i),9688,{name:e});const s=new Yl(i.get(1),i.get(3)),o=new he(i.popFirst(5));return s.isEqual(n)||Yi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends TT{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(yd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:ct("string",Ps._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class jc extends Ps{data(e={}){return super.data(e)}}class zo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new jc(this._firestore,this._userDataWriter,i.key,i,new fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new fl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new fl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:sL(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){t=wi(t,rt);const e=wi(t.firestore,ma);return U2(xg(e),t._key).then(n=>oL(e,t,n))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:ct("string",zo._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class xT extends iL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function _r(t){t=wi(t,js);const e=wi(t.firestore,ma),n=xg(e),i=new xT(e);return tL(t._query),j2(n,t._query).then(s=>new zo(e,i,t,s))}function Uv(t,e,n){t=wi(t,rt);const i=wi(t.firestore,ma),s=rL(t.converter,e,n);return Dg(i,[K2(Rg(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gn.none())])}function wc(t,e,n,...i){t=wi(t,rt);const s=wi(t.firestore,ma),o=Rg(s);let l;return l=typeof(e=Pt(e))=="string"||e instanceof gd?Y2(o,"updateDoc",t._key,e,n,i):Q2(o,"updateDoc",t._key,e),Dg(s,[l.toMutation(t._key,Gn.exists(!0))])}function Cf(t){return Dg(wi(t.firestore,ma),[new ug(t._key,Gn.none())])}function Dg(t,e){return function(i,s){const o=new $i;return i.asyncQueue.enqueueAndForget(async()=>R2(await B2(i),s,o)),o.promise}(xg(t),e)}function oL(t,e,n){const i=n.docs.get(e._key),s=new xT(t);return new Ps(t,s,e._key,i,new fl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ca=s})(ua),Qo(new Ns("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ma(new YA(i.getProvider("auth-internal")),new eR(l,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(p.options.projectId,y)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Fr(Hy,Wy,e),Fr(Hy,Wy,"esm2020")})();function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aL=CT,AT=new uu("auth","Firebase",CT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Ym("@firebase/auth");function lL(t,...e){Lh.logLevel<=Ce.WARN&&Lh.warn(`Auth (${ua}): ${t}`,...e)}function Hc(t,...e){Lh.logLevel<=Ce.ERROR&&Lh.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,...e){throw Mg(t,...e)}function yi(t,...e){return Mg(t,...e)}function RT(t,e,n){const i={...aL(),[e]:n};return new uu("auth","Firebase",i).create(e,{appName:t.name})}function Ur(t){return RT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return AT.create(t,...e)}function ge(t,e,...n){if(!t)throw Mg(e,...n)}function ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function Ji(t,e){t||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uL(){return jv()==="http:"||jv()==="https:"}function jv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uL()||AC()||"connection"in navigator)?navigator.onLine:!0}function hL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ji(n>e,"Short delay should be less than long delay!"),this.isMobile=PC()||RC()}get(){return cL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t,e){Ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pL=new _u(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ts(t,e,n,i,s={}){return LT(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=cu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return CC()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&la(t.emulatorConfig.host)&&(p.credentials="include"),kT.fetch()(await bT(t,t.config.apiHost,n,h),p)})}async function LT(t,e,n){t._canInitEmulator=!1;const i={...dL,...e};try{const s=new gL(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ec(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Ec(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Ec(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw RT(t,y,p);Qn(t,y)}}catch(s){if(s instanceof tr)throw s;Qn(t,"network-request-failed",{message:String(s)})}}async function wd(t,e,n,i,s={}){const o=await ts(t,e,n,i,s);return"mfaPendingCredential"in o&&Qn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function bT(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Vg(t.config,s):`${t.config.apiScheme}://${s}`;return fL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function mL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(yi(this.auth,"network-request-failed")),pL.get())})}}function Ec(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=yi(t,e,i);return s.customData._tokenResponse=n,s}function Hv(t){return t!==void 0&&t.enterprise!==void 0}class _L{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yL(t,e){return ts(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e){return ts(t,"POST","/v1/accounts:delete",e)}async function bh(t,e){return ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wL(t,e=!1){const n=Pt(t),i=await n.getIdToken(e),s=Fg(i);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Al(Af(s.auth_time)),issuedAtTime:Al(Af(s.iat)),expirationTime:Al(Af(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Af(t){return Number(t)*1e3}function Fg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=DE(n);return s?JSON.parse(s):(Hc("Failed to decode base64 JWT payload"),null)}catch(s){return Hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Wv(t){const e=Fg(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof tr&&EL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function EL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(t){var v;const e=t.auth,n=await t.getIdToken(),i=await nu(t,bh(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?NT(s.providerUserInfo):[],l=SL(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Qp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function IL(t){const e=Pt(t);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function NT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){const n=await LT(t,{},async()=>{const i=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await bT(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&la(t.emulatorConfig.host)&&(d.credentials="include"),kT.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xL(t,e){return ts(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await PL(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Bo;return i&&(ge(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ge(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ge(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new TL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wL(this,e)}reload(){return IL(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await nu(this,vL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:A,providerData:M,stsTokenManager:D}=n;ge(v&&D,e,"internal-error");const U=Bo.fromJSON(this.name,D);ge(typeof v=="string",e,"internal-error"),fr(i,e.name),fr(s,e.name),ge(typeof E=="boolean",e,"internal-error"),ge(typeof A=="boolean",e,"internal-error"),fr(o,e.name),fr(l,e.name),fr(h,e.name),fr(d,e.name),fr(p,e.name),fr(y,e.name);const k=new Wn({uid:v,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:A,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:U,createdAt:p,lastLoginAt:y});return M&&Array.isArray(M)&&(k.providerData=M.map(P=>({...P}))),d&&(k._redirectEventId=d),k}static async _fromIdTokenResponse(e,n,i=!1){const s=new Bo;s.updateFromServerResponse(n);const o=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Nh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?NT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Bo;h.updateFromIdToken(i);const d=new Wn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function Hi(t){Ji(t instanceof Function,"Expected a class definition");let e=$v.get(t);return e?(Ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OT.type="NONE";const qv=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){return`firebase:${t}:${e}:${n}`}class Uo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Wc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Wc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bh(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Uo(Hi(qv),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Hi(qv);const l=Wc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(l);if(y){let v;if(typeof y=="string"){const E=await bh(e,{idToken:y}).catch(()=>{});if(!E)break;v=await Wn._fromGetAccountInfoResponse(e,E,y)}else v=Wn._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Uo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Uo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BT(e))return"Blackberry";if(UT(e))return"Webos";if(MT(e))return"Safari";if((e.includes("chrome/")||VT(e))&&!e.includes("edge/"))return"Chrome";if(zT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DT(t=$t()){return/firefox\//i.test(t)}function MT(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VT(t=$t()){return/crios\//i.test(t)}function FT(t=$t()){return/iemobile/i.test(t)}function zT(t=$t()){return/android/i.test(t)}function BT(t=$t()){return/blackberry/i.test(t)}function UT(t=$t()){return/webos/i.test(t)}function zg(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CL(t=$t()){var e;return zg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function AL(){return kC()&&document.documentMode===10}function jT(t=$t()){return zg(t)||zT(t)||UT(t)||BT(t)||/windows phone/i.test(t)||FT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e=[]){let n;switch(t){case"Browser":n=Gv($t());break;case"Worker":n=`${Gv($t())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e={}){return ts(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=6;class bL{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new RL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bh(this,{idToken:e}),i=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Hn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Ur(this));const n=e?Pt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kL(this),n=new bL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await xL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&lL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ga(t){return Pt(t)}class Zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FC(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OL(t){Ed=t}function WT(t){return Ed.loadJS(t)}function DL(){return Ed.recaptchaEnterpriseScript}function ML(){return Ed.gapiScript}function VL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FL{constructor(){this.enterprise=new zL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class zL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BL="recaptcha-enterprise",$T="NO_RECAPTCHA";class UL{constructor(e){this.type=BL,this.auth=ga(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{yL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new _L(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Hv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l($T)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FL().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Hv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=DL();d.length!==0&&(d+=h),WT(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function il(t,e,n,i=!1,s=!1){const o=new UL(t);let l;if(s)l=$T;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Kv(t,e,n,i,s){var o,l;if(s==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await il(t,e,n,n==="getOobCode");return i(t,h)}else return i(t,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await il(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(h)});else if(s==="PHONE_PROVIDER")if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("PHONE_PROVIDER")){const h=await il(t,e,n);return i(t,h).catch(async d=>{var p;if(((p=t._getRecaptchaConfig())==null?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const y=await il(t,e,n,!1,!0);return i(t,y)}return Promise.reject(d)})}else{const h=await il(t,e,n,!1,!0);return i(t,h)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e){const n=Jm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(bs(o,e??{}))return s;Qn(s,"already-initialized")}return n.initialize({options:e})}function HL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WL(t,e,n){const i=ga(t);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=qT(e),{host:l,port:h}=$L(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(bs(p,i.config.emulator)&&bs(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,la(l)?(zE(`${o}//${l}${d}`),BE("Auth",!0)):s||qL()}function qT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $L(t){const e=qT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Qv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Qv(l)}}}function Qv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,n){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}async function GL(t,e){return ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e){return wd(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function QL(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Bg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new iu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kv(e,n,"signInWithPassword",ZL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KL(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kv(e,i,"signUpPassword",GL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return QL(e,{idToken:n,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e){return wd(t,"POST","/v1/accounts:signInWithIdp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="http://localhost";class Ms extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new Ms(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return jo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,jo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jo(e,n)}buildRequest(){const e={requestUri:YL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JL(t){const e=ll(ul(t)).link,n=e?ll(ul(e)).deep_link_id:null,i=ll(ul(t)).deep_link_id;return(i?ll(ul(i)).link:null)||i||n||e||t}class Ug{constructor(e){const n=ll(ul(e)),i=n.apiKey??null,s=n.oobCode??null,o=XL(n.mode??null);ge(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JL(e);try{return new Ug(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ug.parseLink(n);return ge(i,"argument-error"),iu._fromEmailAndCode(e,i.code,i.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends GT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends yu{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Er.credential(n,i)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends yu{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends yu{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ir.credential(n,i)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Wn._fromIdTokenResponse(e,i,s),l=Yv(i);return new ia({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Yv(i);return new ia({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends tr{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Oh(e,n,i,s)}}function ZT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(t,o,e,i):o})}async function eb(t,e,n=!1){const i=await nu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ia._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(t,e,n=!1){const{auth:i}=t;if(Hn(i.app))return Promise.reject(Ur(i));const s="reauthenticate";try{const o=await nu(t,ZT(i,s,e,t),n);ge(o.idToken,i,"internal-error");const l=Fg(o.idToken);ge(l,i,"internal-error");const{sub:h}=l;return ge(t.uid===h,i,"user-mismatch"),ia._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(t,e,n=!1){if(Hn(t.app))return Promise.reject(Ur(t));const i="signIn",s=await ZT(t,i,e),o=await ia._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function nb(t,e){return KT(ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(t){const e=ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function rb(t,e,n){return Hn(t.app)?Promise.reject(Ur(t)):nb(Pt(t),_a.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ib(t),i})}function sb(t,e,n,i){return Pt(t).onIdTokenChanged(e,n,i)}function ob(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function ab(t,e,n,i){return Pt(t).onAuthStateChanged(e,n,i)}function lb(t){return Pt(t).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=1e3,cb=10;class YT extends QT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);AL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cb):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ub)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YT.type="LOCAL";const hb=YT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends QT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XT.type="SESSION";const JT=XT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await db(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=jg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function pb(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function mb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _b(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",yb=1,Mh="firebaseLocalStorage",nI="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function vb(){const t=indexedDB.deleteDatabase(tI);return new vu(t).toPromise()}function Yp(){const t=indexedDB.open(tI,yb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Mh,{keyPath:nI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Mh)?e(i):(i.close(),await vb(),e(await Yp()))})})}async function Xv(t,e,n){const i=Id(t,!0).put({[nI]:e,value:n});return new vu(i).toPromise()}async function wb(t,e){const n=Id(t,!1).get(e),i=await new vu(n).toPromise();return i===void 0?null:i.value}function Jv(t,e){const n=Id(t,!0).delete(e);return new vu(n).toPromise()}const Eb=800,Tb=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Tb)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(_b()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await mb(),!this.activeServiceWorker)return;this.sender=new fb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await Xv(e,Dh,"1"),await Jv(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>wb(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Id(s,!1).getAll();return new vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Eb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const Ib=iI;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e){return e?Hi(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Pb(t){return KT(t.auth,new Hg(t),t.bypassAuthState)}function xb(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),tb(n,new Hg(t),t.bypassAuthState)}async function Cb(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),eb(n,new Hg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pb;case"linkViaPopup":case"linkViaRedirect":return Cb;case"reauthViaPopup":case"reauthViaRedirect":return xb;default:Qn(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new _u(2e3,1e4);class Lo extends rI{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ab.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="pendingRedirect",$c=new Map;class kb extends rI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const i=await Lb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lb(t,e){const n=Ob(e),i=Nb(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function bb(t,e){$c.set(t._key(),e)}function Nb(t){return Hi(t._redirectPersistence)}function Ob(t){return Wc(Rb,t.config.apiKey,t.name)}async function Db(t,e,n=!1){if(Hn(t.app))return Promise.reject(Ur(t));const i=ga(t),s=Sb(i,e),l=await new kb(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=10*60*1e3;class Vb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!sI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(yi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mb&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Fb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t,e={}){return ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ub=/^https?/;async function jb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zb(t);for(const n of e)try{if(Hb(n))return}catch{}Qn(t,"unauthorized-domain")}function Hb(t){const e=Kp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Ub.test(n))return!1;if(Bb.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new _u(3e4,6e4);function t0(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $b(t){return new Promise((e,n)=>{var s,o,l;function i(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(yi(t,"network-request-failed"))},timeout:Wb.get()})}if((o=(s=vi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=vi().gapi)!=null&&l.load)i();else{const h=VL("iframefcb");return vi()[h]=()=>{gapi.load?i():n(yi(t,"network-request-failed"))},WT(`${ML()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw qc=null,e})}let qc=null;function qb(t){return qc=qc||$b(t),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new _u(5e3,15e3),Zb="__/auth/iframe",Kb="emulator/auth/iframe",Qb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xb(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vg(e,Kb):`https://${t.config.authDomain}/${Zb}`,i={apiKey:e.apiKey,appName:t.name,v:ua},s=Yb.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${cu(i).slice(1)}`}async function Jb(t){const e=await qb(t),n=vi().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:Xb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qb,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=yi(t,"network-request-failed"),h=vi().setTimeout(()=>{o(l)},Gb.get());function d(){vi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tN=500,nN=600,iN="_blank",rN="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sN(t,e,n,i=tN,s=nN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...eN,width:i.toString(),height:s.toString(),top:o,left:l},p=$t().toLowerCase();n&&(h=VT(p)?iN:n),DT(p)&&(e=e||rN,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,M])=>`${E}${A}=${M},`,"");if(CL(p)&&h!=="_self")return oN(e||"",h),new n0(null);const v=window.open(e||"",h,y);ge(v,t,"popup-blocked");try{v.focus()}catch{}return new n0(v)}function oN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="__/auth/handler",lN="emulator/auth/handler",uN=encodeURIComponent("fac");async function i0(t,e,n,i,s,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ua,eventId:s};if(e instanceof GT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",VC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(o||{}))l[y]=v}if(e instanceof yu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),p=d?`#${uN}=${encodeURIComponent(d)}`:"";return`${cN(t)}?${cu(h).slice(1)}${p}`}function cN({config:t}){return t.emulator?Vg(t,lN):`https://${t.authDomain}/${aN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="webStorageSupport";class hN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JT,this._completeRedirectFn=Db,this._overrideRedirectResult=bb}async _openPopup(e,n,i,s){var l;Ji((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await i0(e,n,i,Kp(),s);return sN(e,o,jg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await i0(e,n,i,Kp(),s);return pb(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ji(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Jb(e),i=new Vb(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rf,{type:Rf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Rf];o!==void 0&&n(!!o),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jT()||MT()||zg()}}const dN=hN;var r0="@firebase/auth",s0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mN(t){Qo(new Ns("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ge(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HT(t)},p=new NL(i,s,o,d);return HL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qo(new Ns("auth-internal",e=>{const n=ga(e.getProvider("auth").getImmediate());return(i=>new fN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(r0,s0,pN(t)),Fr(r0,s0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=5*60,_N=FE("authIdTokenMaxAge")||gN;let o0=null;const yN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_N)return;const s=n==null?void 0:n.token;o0!==s&&(o0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vN(t=WE()){const e=Jm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jL(t,{popupRedirectResolver:dN,persistence:[Ib,hb,JT]}),i=FE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=yN(o.toString());ob(n,l,()=>l(n.currentUser)),sb(n,h=>l(h))}}const s=ME("auth");return s&&WL(n,`http://${s}`),n}function wN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}OL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=yi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",wN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mN("Browser");var EN="firebase",TN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(EN,TN,"app");const IN={apiKey:{}.VITE_FIREBASE_API_KEY||"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:{}.VITE_FIREBASE_AUTH_DOMAIN||"russia-oil-tracker.firebaseapp.com",projectId:{}.VITE_FIREBASE_PROJECT_ID||"russia-oil-tracker",storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET||"russia-oil-tracker.firebasestorage.app",messagingSenderId:{}.VITE_FIREBASE_MESSAGING_SENDER_ID||"86599024625",appId:{}.VITE_FIREBASE_APP_ID||"1:86599024625:web:c833bd2f796bf999784e50"},oI=HE(IN),Be=W2(oI),kf=vN(oI),At={FACILITIES:"facilities",HITS:"hits"},SN=()=>{const[t,e]=$.useState(!1),[n,i]=$.useState(""),[s,o]=$.useState(""),[l,h]=$.useState(null),[d,p]=$.useState("facilities"),[y,v]=$.useState([]),[E,A]=$.useState(!1),[M,D]=$.useState(null),[U,k]=$.useState(null),[P,b]=$.useState({}),[W,X]=$.useState(!1),[ee,x]=$.useState(null);$.useState(null);const[I,S]=$.useState({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),[C,N]=$.useState({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),F=Qm();$.useEffect(()=>{const Q=ab(kf,ie=>{ie?(e(!0),h(null)):e(!1)});return()=>Q()},[]),$.useEffect(()=>{t&&R()},[t]);const R=async()=>{A(!0),D(null);try{if(!Be)throw new Error("Firebase not initialized");const Q=await _r(gr(Be,At.FACILITIES)),ie=await Promise.all(Q.docs.map(async le=>{var en,Ii;const ce=Bc(gr(Be,At.HITS),Uc("facilityId","==",parseInt(le.id))),ht=(await _r(ce)).docs.map(nr=>({id:parseInt(nr.id),...nr.data()})),dt=le.data(),Jt=((en=dt.location)==null?void 0:en.latitude)??dt.latitude,Ti=((Ii=dt.location)==null?void 0:Ii.longitude)??dt.longitude;return{id:parseInt(le.id),name:dt.name,type:dt.type,capacity:dt.capacity,latitude:Jt,longitude:Ti,status:dt.status,hit:dt.hit,hits:ht}}));v(ie)}catch(Q){console.error("Error fetching facilities:",Q),D("Failed to load facilities from Firebase.")}finally{A(!1)}},Me=async Q=>{Q.preventDefault(),h(null),A(!0);try{await rb(kf,n,s)}catch(ie){console.error("Login error:",ie),ie.code==="auth/invalid-credential"?h("Invalid email or password"):ie.code==="auth/user-not-found"?h("No account found with this email"):ie.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{A(!1)}},Xt=async()=>{try{await lb(kf),F("/")}catch(Q){console.error("Logout error:",Q)}},tt=async Q=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!Be)throw new Error("Firebase not initialized");const ie=Bc(gr(Be,At.HITS),Uc("facilityId","==",Q)),le=await _r(ie);for(const ce of le.docs)await Cf(ce.ref);await Cf(Vi(Be,At.FACILITIES,Q.toString())),R()}catch(ie){console.error("Error deleting facility:",ie),alert("Failed to delete facility")}},dn=async Q=>{try{if(!Be)throw new Error("Firebase not initialized");const ie=Vi(Be,At.FACILITIES,Q.toString()),le=await PT(ie);if(le.exists()){const ce=le.data();await wc(ie,{hit:!ce.hit}),R()}}catch(ie){console.error("Error toggling hit status:",ie),alert("Failed to toggle hit status")}},G=Q=>{k(Q.id),b(Q)},fe=async()=>{if(U)try{if(!Be)throw new Error("Firebase not initialized");const Q={name:P.name,type:P.type,capacity:P.capacity,status:P.status,hit:P.hit};P.latitude!==void 0&&P.longitude!==void 0&&(Q.location={latitude:P.latitude,longitude:P.longitude});const ie=Vi(Be,At.FACILITIES,U.toString());await wc(ie,Q),k(null),b({}),R()}catch(Q){console.error("Error updating facility:",Q),alert("Failed to update facility")}},te=async Q=>{Q.preventDefault();try{if(!Be)throw new Error("Firebase not initialized");const ce=(await _r(gr(Be,At.FACILITIES))).docs.reduce((ht,dt)=>{const Jt=parseInt(dt.id);return Jt>ht?Jt:ht},0)+1,Fe={id:ce,name:C.name,type:C.type,capacity:C.capacity,location:{latitude:C.latitude,longitude:C.longitude},status:C.status,hit:!1,hits:[]};await Uv(Vi(Be,At.FACILITIES,ce.toString()),Fe),X(!1),N({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),R()}catch(ie){console.error("Error adding facility:",ie),alert("Failed to add facility")}},pe=async(Q,ie)=>{ie.preventDefault();try{if(!Be)throw new Error("Firebase not initialized");const Fe=(await _r(gr(Be,At.HITS))).docs.reduce((Jt,Ti)=>{const en=parseInt(Ti.id);return en>Jt?en:Jt},0)+1,ht={...I,id:Fe,facilityId:Q};await Uv(Vi(Be,At.HITS,Fe.toString()),ht);const dt=Vi(Be,At.FACILITIES,Q.toString());await wc(dt,{hit:!0}),x(null),S({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),R()}catch(le){console.error("Error adding hit:",le),alert("Failed to add hit record")}},Ie=async(Q,ie)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!Be)throw new Error("Firebase not initialized");await Cf(Vi(Be,At.HITS,ie.toString()));const le=Bc(gr(Be,At.HITS),Uc("facilityId","==",Q));if((await _r(le)).empty){const Fe=Vi(Be,At.FACILITIES,Q.toString());await wc(Fe,{hit:!1})}R()}catch(le){console.error("Error deleting hit:",le),alert("Failed to delete hit record")}};return t?Z("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff"},children:[Z("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column"},children:[Z("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[V("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),V("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russia Oil Tracker"}),V("button",{onClick:Xt,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),Z("nav",{style:{flex:1,padding:"20px 0"},children:[Z("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[V("span",{style:{fontSize:"20px"},children:"🏭"}),V("span",{children:"Facilities"})]}),Z("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[V("span",{style:{fontSize:"20px"},children:"💥"}),V("span",{children:"Hit Records"})]})]}),Z("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:[V("button",{onClick:()=>F("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"10px",fontSize:"14px"},children:"🗺️ View Map"}),V("button",{onClick:()=>e(!1),style:{width:"100%",padding:"10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"🚪 Logout"})]})]}),Z("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&Z(Xu,{children:[Z("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[Z("div",{children:[V("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),Z("p",{style:{color:"#999"},children:["Total: ",y.length," facilities"]})]}),V("button",{onClick:()=>X(!W),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:W?"Cancel":"+ Add Facility"})]}),W&&Z("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #333"},children:[V("h2",{style:{marginBottom:"20px"},children:"Add New Facility"}),Z("form",{onSubmit:te,style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Name"}),V("input",{type:"text",required:!0,value:C.name,onChange:Q=>N({...C,name:Q.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Type"}),Z("select",{value:C.type,onChange:Q=>N({...C,type:Q.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"Refinery",children:"Refinery"}),V("option",{value:"Extraction",children:"Extraction"}),V("option",{value:"Storage",children:"Storage"})]})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Capacity (barrels/day)"}),V("input",{type:"number",required:!0,value:C.capacity,onChange:Q=>N({...C,capacity:Number(Q.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Status"}),Z("select",{value:C.status,onChange:Q=>N({...C,status:Q.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),V("option",{value:"HIT",children:"HIT"})]})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Latitude"}),V("input",{type:"number",step:"any",required:!0,value:C.latitude,onChange:Q=>N({...C,latitude:Number(Q.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Longitude"}),V("input",{type:"number",step:"any",required:!0,value:C.longitude,onChange:Q=>N({...C,longitude:Number(Q.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),V("div",{style:{gridColumn:"1 / -1"},children:V("button",{type:"submit",style:{padding:"10px 30px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Create Facility"})})]})]}),E&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),M&&V("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:M}),!E&&!M&&Z("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[Z("table",{style:{width:"100%",borderCollapse:"collapse"},children:[V("thead",{children:Z("tr",{style:{backgroundColor:"#0a0a0a"},children:[V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Capacity"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),V("tbody",{children:y.map(Q=>{var ie;return V(xs.Fragment,{children:V("tr",{style:{borderBottom:"1px solid #333"},children:U===Q.id?Z(Xu,{children:[V("td",{style:{padding:"15px"},children:Q.id}),V("td",{style:{padding:"15px"},children:V("input",{type:"text",value:P.name,onChange:le=>b({...P,name:le.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),V("td",{style:{padding:"15px"},children:Z("select",{value:P.type,onChange:le=>b({...P,type:le.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"Refinery",children:"Refinery"}),V("option",{value:"Extraction",children:"Extraction"}),V("option",{value:"Storage",children:"Storage"})]})}),V("td",{style:{padding:"15px"},children:V("input",{type:"number",value:P.capacity,onChange:le=>b({...P,capacity:Number(le.target.value)}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),V("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:Q.latitude!=null&&Q.longitude!=null?`${Q.latitude.toFixed(4)}, ${Q.longitude.toFixed(4)}`:"N/A"}),V("td",{style:{padding:"15px"},children:Z("select",{value:P.status,onChange:le=>b({...P,status:le.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),V("option",{value:"HIT",children:"HIT"})]})}),Z("td",{style:{padding:"15px"},children:[V("button",{onClick:fe,style:{padding:"5px 15px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px"},children:"Save"}),V("button",{onClick:()=>k(null),style:{padding:"5px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]})]}):Z(Xu,{children:[V("td",{style:{padding:"15px"},children:Q.id}),V("td",{style:{padding:"15px"},children:Q.name}),V("td",{style:{padding:"15px"},children:Q.type}),V("td",{style:{padding:"15px"},children:((ie=Q.capacity)==null?void 0:ie.toLocaleString())||0}),V("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:Q.latitude!=null&&Q.longitude!=null?`${Q.latitude.toFixed(4)}, ${Q.longitude.toFixed(4)}`:"N/A"}),V("td",{style:{padding:"15px"},children:V("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:Q.hit?"#f44336":"#4CAF50",color:"#fff"},children:Q.status})}),Z("td",{style:{padding:"15px"},children:[V("button",{onClick:()=>G(Q),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),V("button",{onClick:()=>dn(Q.id),style:{padding:"5px 10px",backgroundColor:Q.hit?"#4CAF50":"#FF9800",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:Q.hit?"Restore":"Mark Hit"}),V("button",{onClick:()=>tt(Q.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})})},Q.id)})})]}),y.length===0&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&Z(Xu,{children:[Z("div",{style:{marginBottom:"30px"},children:[V("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),V("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),E&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),M&&V("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:M}),!E&&!M&&Z("div",{style:{display:"grid",gap:"20px"},children:[y.map(Q=>Q.hits&&Q.hits.length>0&&Z("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[Z("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[Z("div",{children:[V("h2",{style:{margin:0,color:"#4CAF50"},children:Q.name}),Z("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[Q.type," • ",Q.hits.length," hit record",Q.hits.length!==1?"s":""]})]}),V("button",{onClick:()=>x(ee===Q.id?null:Q.id),style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:ee===Q.id?"Cancel":"+ Add Hit"})]}),ee===Q.id&&Z("form",{onSubmit:ie=>pe(Q.id,ie),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date"}),V("input",{type:"date",required:!0,value:I.date,onChange:ie=>S({...I,date:ie.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),V("input",{type:"number",value:I.expectedRepairTime,onChange:ie=>S({...I,expectedRepairTime:Number(ie.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{style:{gridColumn:"1 / -1"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Video Link"}),V("input",{type:"url",value:I.videoLink,onChange:ie=>S({...I,videoLink:ie.target.value}),placeholder:"https://...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{style:{gridColumn:"1 / -1"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),V("textarea",{value:I.notes,onChange:ie=>S({...I,notes:ie.target.value}),rows:3,style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical"}})]}),V("div",{style:{gridColumn:"1 / -1"},children:V("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save Hit Record"})})]}),V("div",{style:{display:"grid",gap:"10px"},children:Q.hits.map(ie=>V("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:Z("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[Z("div",{style:{flex:1},children:[Z("div",{style:{display:"flex",gap:"15px",marginBottom:"10px"},children:[Z("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),Z("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",ie.id]})]}),Z("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),V("div",{style:{color:"#fff"},children:new Date(ie.date).toLocaleDateString()})]}),ie.expectedRepairTime&&Z("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),Z("div",{style:{color:"#FF9800"},children:[ie.expectedRepairTime," days"]})]})]}),ie.videoLink&&V("div",{style:{marginTop:"10px"},children:V("a",{href:ie.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:"🎥 View Video"})}),ie.notes&&Z("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[V("strong",{children:"Notes:"})," ",ie.notes]})]}),V("button",{onClick:()=>Ie(Q.id,ie.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})},ie.id))})]},Q.id)),y.every(Q=>!Q.hits||Q.hits.length===0)&&Z("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[V("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"💥"}),V("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),V("p",{children:"Hit records will appear here when facilities are marked as hit."})]})]})]})]})]}):V("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:Z("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[V("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&V("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),Z("form",{onSubmit:Me,children:[Z("div",{style:{marginBottom:"20px"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),V("input",{type:"email",value:n,onChange:Q=>i(Q.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Z("div",{style:{marginBottom:"30px"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),V("input",{type:"password",value:s,onChange:Q=>o(Q.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),V("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),V("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})};function aI(t,e){const n=$.useRef(e);$.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const PN=1;function xN(t){return Object.freeze({__version:PN,map:t})}function lI(t,e){return Object.freeze({...t,...e})}const uI=$.createContext(null),cI=uI.Provider;function Wg(){const t=$.useContext(uI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function hI(t){function e(n,i){const{instance:s,context:o}=t(n).current;return $.useImperativeHandle(i,()=>s),n.children==null?null:xs.createElement(cI,{value:o},n.children)}return $.forwardRef(e)}function CN(t){function e(n,i){const[s,o]=$.useState(!1),{instance:l}=t(n,o).current;$.useImperativeHandle(i,()=>l),$.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?EE.createPortal(n.children,h):null}return $.forwardRef(e)}function AN(t){function e(n,i){const{instance:s}=t(n).current;return $.useImperativeHandle(i,()=>s),null}return $.forwardRef(e)}function $g(t,e){const n=$.useRef();$.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Sd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function RN(t,e){return function(i,s){const o=Wg(),l=t(Sd(i,o),o);return aI(o.map,i.attribution),$g(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Xp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(WI,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,w,O;return O=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(O,a),f=!0)},w}function y(r,a,c){var f=a[1],g=a[0],w=f-g;return r===f&&c?r:((r-g)%w+w)%w+g}function v(){return!1}function E(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function A(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function M(r){return A(r).split(/\s+/)}function D(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function U(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(k,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var b=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var x=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-x));return x=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||ee("RequestAnimationFrame")||I,C=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function N(r,a,c){if(c&&S===I)r.call(a);else return S.call(window,l(r,a))}function F(r){r&&C.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:y,falseFn:v,formatNum:E,trim:A,splitWords:M,setOptions:D,getParamString:U,template:P,isArray:b,indexOf:W,emptyImageUrl:X,requestFn:S,cancelFn:C,requestAnimFrame:N,cancelAnimFrame:F};function Me(){}Me.extend=function(r){var a=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Xt(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,O=f._initHooks.length;w<O;w++)f._initHooks[w].call(this)}},a},Me.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Me.mergeOptions=function(r){return s(this.prototype.options,r),this},Me.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Xt(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=b(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var tt={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=M(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=M(r);for(var g=arguments.length===1,w=0,O=r.length;w<O;w++)g?this._off(r[w]):this._off(r[w],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,w;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=v;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var O=this._listens(r,a,c);if(O!==!1){var B=f[O];this._firingCount&&(B.fn=v,this._events[r]=f=f.slice()),f.splice(O,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,O=g.length;w<O;w++){var B=g[w],H=B.fn;B.once&&this.off(r,H,B.ctx),H.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[r];if(w&&w.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var O in this._eventParents)if(this._eventParents[O].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=M(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};tt.addEventListener=tt.on,tt.removeEventListener=tt.clearAllEventListeners=tt.off,tt.addOneTimeEventListener=tt.once,tt.fireEvent=tt.fire,tt.hasEventListeners=tt.listens;var dn=Me.extend(tt);function G(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var fe=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(r){return this.clone()._add(te(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(te(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new G(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new G(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(r){r=te(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=te(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=te(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function te(r,a,c){return r instanceof G?r:b(r)?new G(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new G(r.x,r.y):new G(r,a,c)}function pe(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}pe.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof G||typeof r[0]=="number"||"x"in r)a=c=te(r);else if(r=Ie(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof G?r=te(r):r=Ie(r),r instanceof pe?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=Ie(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>=a.x&&f.x<=c.x,O=g.y>=a.y&&f.y<=c.y;return w&&O},overlaps:function(r){r=Ie(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>a.x&&f.x<c.x,O=g.y>a.y&&f.y<c.y;return w&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return Ie(te(a.x-f,a.y-g),te(c.x+f,c.y+g))},equals:function(r){return r?(r=Ie(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Ie(r,a){return!r||r instanceof pe?r:new pe(r,a)}function Q(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Q.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof le)f=r,g=r;else if(r instanceof Q){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(ce(r)||ie(r)):this;return!a&&!c?(this._southWest=new le(f.lat,f.lng),this._northEast=new le(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Q(new le(a.lat-f,a.lng-g),new le(c.lat+f,c.lng+g))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof le||"lat"in r?r=ce(r):r=ie(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Q?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=ie(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,O=g.lng>=a.lng&&f.lng<=c.lng;return w&&O},overlaps:function(r){r=ie(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,O=g.lng>a.lng&&f.lng<c.lng;return w&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=ie(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(r,a){return r instanceof Q?r:new Q(r,a)}function le(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}le.prototype={equals:function(r,a){if(!r)return!1;r=ce(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return ht.distance(this,ce(r))},wrap:function(){return ht.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return ie([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ce(r,a,c){return r instanceof le?r:b(r)&&typeof r[0]!="object"?r.length===3?new le(r[0],r[1],r[2]):r.length===2?new le(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new le(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new le(r,a,c)}var Fe={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new pe(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new le(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var w=r.getSouthWest(),O=r.getNorthEast(),B=new le(w.lat-f,w.lng-g),H=new le(O.lat-f,O.lng-g);return new Q(B,H)}},ht=s({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,w=Math.sin((a.lat-r.lat)*c/2),O=Math.sin((a.lng-r.lng)*c/2),B=w*w+Math.cos(f)*Math.cos(g)*O*O,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),dt=6378137,Jt={R:dt,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new G(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new le((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=dt*Math.PI;return new pe([-r,-r],[r,r])}()};function Ti(r,a,c,f){if(b(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Ti.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new G((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function en(r,a,c,f){return new Ti(r,a,c,f)}var Ii=s({},ht,{code:"EPSG:3857",projection:Jt,transformation:function(){var r=.5/(Math.PI*Jt.R);return en(r,.5,-r,.5)}()}),nr=s({},Ii,{code:"EPSG:900913"});function va(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function wu(r,a){var c="",f,g,w,O,B,H;for(f=0,w=r.length;f<w;f++){for(B=r[f],g=0,O=B.length;g<O;g++)H=B[g],c+=(g?"L":"M")+H.x+" "+H.y;c+=a?ue.svg?"z":"x":""}return c||"M0 0"}var ns=document.documentElement.style,ir="ActiveXObject"in window,wa=ir&&!document.addEventListener,ft="msLaunchUri"in navigator&&!("documentMode"in document),pt=pn("webkit"),is=pn("android"),Eu=pn("android 2")||pn("android 3"),Tu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Cd=is&&pn("Google")&&Tu<537&&!("AudioNode"in window),Si=!!window.opera,Ea=!ft&&pn("chrome"),Ta=pn("gecko")&&!pt&&!Si&&!ir,Ia=!Ea&&pn("safari"),Iu=pn("phantom"),Su="OTransition"in ns,Pu=navigator.platform.indexOf("Win")===0,Sa=ir&&"transition"in ns,Pi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Eu,Ws="MozPerspective"in ns,Pa=!window.L_DISABLE_3D&&(Sa||Pi||Ws)&&!Su&&!Iu,fn=typeof orientation<"u"||pn("mobile"),xu=fn&&pt,$s=fn&&Pi,xa=!window.PointerEvent&&window.MSPointerEvent,rr=!!(window.PointerEvent||xa),Ca="ontouchstart"in window||!!window.TouchEvent,xt=!window.L_NO_TOUCH&&(Ca||rr),Cu=fn&&Si,rs=fn&&Ta,ss=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ad=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return r}(),Rd=function(){return!!document.createElement("canvas").getContext}(),Yn=!!(document.createElementNS&&va("svg").createSVGRect),kd=!!Yn&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ld=!Yn&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),qs=navigator.platform.indexOf("Mac")===0,Au=navigator.platform.indexOf("Linux")===0;function pn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ue={ie:ir,ielt9:wa,edge:ft,webkit:pt,android:is,android23:Eu,androidStock:Cd,opera:Si,chrome:Ea,gecko:Ta,safari:Ia,phantom:Iu,opera12:Su,win:Pu,ie3d:Sa,webkit3d:Pi,gecko3d:Ws,any3d:Pa,mobile:fn,mobileWebkit:xu,mobileWebkit3d:$s,msPointer:xa,pointer:rr,touch:xt,touchNative:Ca,mobileOpera:Cu,mobileGecko:rs,retina:ss,passiveEvents:Ad,canvas:Rd,svg:Yn,vml:Ld,inlineSvg:kd,mac:qs,linux:Au},sr=ue.msPointer?"MSPointerDown":"pointerdown",Ru=ue.msPointer?"MSPointerMove":"pointermove",bn=ue.msPointer?"MSPointerUp":"pointerup",Aa=ue.msPointer?"MSPointerCancel":"pointercancel",Gs={touchstart:sr,touchmove:Ru,touchend:bn,touchcancel:Aa},Zs={touchstart:xi,touchmove:Jn,touchend:Jn,touchcancel:Jn},Xn={},Ra=!1;function bd(r,a,c){return a==="touchstart"&&La(),Zs[a]?(c=Zs[a].bind(this,c),r.addEventListener(Gs[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function ku(r,a,c){if(!Gs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Gs[a],c,!1)}function Nd(r){Xn[r.pointerId]=r}function Ks(r){Xn[r.pointerId]&&(Xn[r.pointerId]=r)}function ka(r){delete Xn[r.pointerId]}function La(){Ra||(document.addEventListener(sr,Nd,!0),document.addEventListener(Ru,Ks,!0),document.addEventListener(bn,ka,!0),document.addEventListener(Aa,ka,!0),Ra=!0)}function Jn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Xn)a.touches.push(Xn[c]);a.changedTouches=[a],r(a)}}function xi(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&mt(a),Jn(r,a)}function ba(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Od=200;function Lu(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var O=Ma(w);if(!(O.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!O.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Od?(f++,f===2&&a(ba(w))):f=1,c=B}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function bu(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Qs=os(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ci=os(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ys=Ci==="webkitTransition"||Ci==="OTransition"?Ci+"End":"transitionend";function Na(r){return typeof r=="string"?document.getElementById(r):r}function or(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function ke(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function He(r){var a=r.parentNode;a&&a.removeChild(r)}function mn(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ct(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function In(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Ai(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=ei(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function we(r,a){if(r.classList!==void 0)for(var c=M(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!Ai(r,a)){var w=ei(r);ar(r,(w?w+" ":"")+a)}}function ye(r,a){r.classList!==void 0?r.classList.remove(a):ar(r,A((" "+ei(r)+" ").replace(" "+a+" "," ")))}function ar(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function ei(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function wt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Dd(r,a)}function Dd(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function os(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Ri(r,a,c){var f=a||new G(0,0);r.style[Qs]=(ue.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(r,a){r._leaflet_pos=a,ue.any3d?Ri(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function ki(r){return r._leaflet_pos||new G(0,0)}var as,Nn,On;if("onselectstart"in document)as=function(){Ee(window,"selectstart",mt)},Nn=function(){Ne(window,"selectstart",mt)};else{var lr=os(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);as=function(){if(lr){var r=document.documentElement.style;On=r[lr],r[lr]="none"}},Nn=function(){lr&&(document.documentElement.style[lr]=On,On=void 0)}}function Xs(){Ee(window,"dragstart",mt)}function Js(){Ne(window,"dragstart",mt)}var ls,eo;function ti(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(to(),ls=r,eo=r.style.outlineStyle,r.style.outlineStyle="none",Ee(window,"keydown",to))}function to(){ls&&(ls.style.outlineStyle=eo,ls=void 0,eo=void 0,Ne(window,"keydown",to))}function Nu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Oa(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var ni={__proto__:null,TRANSFORM:Qs,TRANSITION:Ci,TRANSITION_END:Ys,get:Na,getStyle:or,create:ke,remove:He,empty:mn,toFront:Ct,toBack:In,hasClass:Ai,addClass:we,removeClass:ye,setClass:ar,getClass:ei,setOpacity:wt,testProp:os,setTransform:Ri,setPosition:Xe,getPosition:ki,get disableTextSelection(){return as},get enableTextSelection(){return Nn},disableImageDrag:Xs,enableImageDrag:Js,preventOutline:ti,restoreOutline:to,getSizedParentNode:Nu,getScale:Oa};function Ee(r,a,c,f){if(a&&typeof a=="object")for(var g in a)bi(r,g,a[g],c);else{a=M(a);for(var w=0,O=a.length;w<O;w++)bi(r,a[w],c,f)}return this}var tn="_leaflet_events";function Ne(r,a,c,f){if(arguments.length===1)Da(r),delete r[tn];else if(a&&typeof a=="object")for(var g in a)no(r,g,a[g],c);else if(a=M(a),arguments.length===2)Da(r,function(B){return W(a,B)!==-1});else for(var w=0,O=a.length;w<O;w++)no(r,a[w],c,f);return this}function Da(r,a){for(var c in r[tn]){var f=c.split(/\d/)[0];(!a||a(f))&&no(r,f,null,null,c)}}var Li={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bi(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[tn]&&r[tn][g])return this;var w=function(B){return c.call(f||r,B||window.event)},O=w;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?w=bd(r,a,w):ue.touch&&a==="dblclick"?w=Lu(r,w):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Li[a]||a,w,ue.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(B){B=B||window.event,ro(r,B)&&O(B)},r.addEventListener(Li[a],w,!1)):r.addEventListener(a,O,!1):r.attachEvent("on"+a,w),r[tn]=r[tn]||{},r[tn][g]=w}function no(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=r[tn]&&r[tn][g];if(!w)return this;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?ku(r,a,w):ue.touch&&a==="dblclick"?bu(r,w):"removeEventListener"in r?r.removeEventListener(Li[a]||a,w,!1):r.detachEvent("on"+a,w),r[tn][g]=null}function Dn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ze(r){return bi(r,"wheel",Dn),this}function us(r){return Ee(r,"mousedown touchstart dblclick contextmenu",Dn),r._leaflet_disable_click=!0,this}function mt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function ii(r){return mt(r),Dn(r),this}function Ma(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Va(r,a){if(!a)return new G(r.clientX,r.clientY);var c=Oa(a),f=c.boundingClientRect;return new G((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var io=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Mn(r){return ue.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/io:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ro(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Md={__proto__:null,on:Ee,off:Ne,stopPropagation:Dn,disableScrollPropagation:ze,disableClickPropagation:us,preventDefault:mt,stop:ii,getPropagationPath:Ma,getMousePosition:Va,getWheelDelta:Mn,isExternalTarget:ro,addListener:Ee,removeListener:Ne},ur=dn.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ki(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Pe=dn.extend({options:{crs:Ii,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=D(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ci&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Ys,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(ce(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=r instanceof G?r:this.latLngToContainerPoint(r),O=w.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(O));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():ie(r);var c=te(a.paddingTopLeft||a.padding||[0,0]),f=te(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),O=this.project(r.getSouthWest(),g),B=this.project(r.getNorthEast(),g),H=this.unproject(O.add(B).divideBy(2).add(w),g);return{center:H,zoom:g}},fitBounds:function(r,a){if(r=ie(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=te(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ur,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ue.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),w=this.getSize(),O=this._zoom;r=ce(r),a=a===void 0?O:a;var B=Math.max(w.x,w.y),H=B*this.getZoomScale(O,a),Y=g.distanceTo(f)||1,se=1.42,me=se*se;function Se(ot){var Qu=ot?-1:1,zI=ot?H:B,BI=H*H-B*B+Qu*me*me*Y*Y,UI=2*zI*me*Y,jd=BI/UI,f_=Math.sqrt(jd*jd+1)-jd,jI=f_<1e-9?-18:Math.log(f_);return jI}function Gt(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Et(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function Sn(ot){return Gt(ot)/Et(ot)}var rn=Se(0);function fo(ot){return B*(Et(rn)/Et(rn+se*ot))}function DI(ot){return B*(Et(rn)*Sn(rn+se*ot)-Gt(rn))/me}function MI(ot){return 1-Math.pow(1-ot,1.5)}var VI=Date.now(),h_=(Se(1)-rn)/se,FI=c.duration?1e3*c.duration:1e3*h_*.8;function d_(){var ot=(Date.now()-VI)/FI,Qu=MI(ot)*h_;ot<=1?(this._flyToFrame=N(d_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(DI(Qu)/Y)),O),this.getScaleZoom(B/fo(Qu),O),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),d_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=ie(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,ie(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=te(a.paddingTopLeft||a.padding||[0,0]),f=te(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(r),O=this.getPixelBounds(),B=Ie([O.min.add(c),O.max.subtract(f)]),H=B.getSize();if(!B.contains(w)){this._enforcingBounds=!0;var Y=w.subtract(B.getCenter()),se=B.extend(w).getSize().subtract(H);g.x+=Y.x<0?-se.x:se.x,g.y+=Y.y<0?-se.y:se.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(r.animate&&r.pan?this.panBy(w):(r.pan&&this._rawPanBy(w),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new le(a,c),g=f.toBounds(r.coords.accuracy*2),w=this._locateOptions;if(w.setView){var O=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(O,w.maxZoom):O)}var B={latlng:f,bounds:g,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(B[H]=r.coords[H]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),He(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)He(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=ke("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Q(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=ie(r),c=te(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),O=r.getNorthWest(),B=r.getSouthEast(),H=this.getSize().subtract(c),Y=Ie(this.project(B,f),this.project(O,f)).getSize(),se=ue.any3d?this.options.zoomSnap:1,me=H.x/Y.x,Se=H.y/Y.y,Gt=a?Math.max(me,Se):Math.min(me,Se);return f=this.getScaleZoom(Gt,f),se&&(f=Math.round(f/(se/100))*(se/100),f=a?Math.ceil(f/se)*se:Math.floor(f/se)*se),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new pe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ce(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(te(r),a)},layerPointToLatLng:function(r){var a=te(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(ce(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ce(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ie(r))},distance:function(r,a){return this.options.crs.distance(ce(r),ce(a))},containerPointToLayerPoint:function(r){return te(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return te(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(te(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(r)))},mouseEventToContainerPoint:function(r){return Va(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Na(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,we(r,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=or(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(r.markerPane,"leaflet-zoom-hide"),we(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Xe(this._mapPane,new G(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Ne:Ee;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=r.target||r.srcElement,O=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){O=!0;break}if(f&&f.listens(a,!0)&&(g&&!ro(w,r)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!O&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ti(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var w=[],O=0;O<c.length;O++)c[O].listens(a,!0)&&w.push(c[O]);g=w.concat(g)}if(g.length){a==="contextmenu"&&mt(r);var B=g[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Y=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=Y?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Y?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(O=0;O<g.length;O++)if(g[O].fire(a,H,!0),H.originalEvent._stopped||g[O].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return ki(this._mapPane)||new G(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return Ie([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),w=new pe(f.subtract(g),f.add(g)),O=this._getBoundsOffset(w,c,a);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?r:this.unproject(f.add(O),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new pe(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=Ie(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),w=f.max.subtract(r.max),O=this._rebound(g.x,-w.x),B=this._rebound(g.y,-w.y);return new G(O,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ue.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Qs,f=this._proxy.style[c];Ri(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){He(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Ri(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(N(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fa(r,a){return new Pe(r,a)}var Dt=Me.extend({options:{position:"topright"},initialize:function(r){D(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return we(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(He(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),cr=function(r){return new Dt(r)};Pe.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=ke("div",a+"control-container",this._container);function f(g,w){var O=a+g+" "+a+w;r[g+w]=ke("div",O,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)He(this._controlCorners[r]);He(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cs=Dt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){D(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Dt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=ke("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),us(a),ze(a);var f=this._section=ke("section",r+"-list");c&&(this._map.on("click",this.collapse,this),Ee(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=ke("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),Ee(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){mt(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=ke("div",r+"-base",f),this._separator=ke("div",r+"-separator",f),this._overlaysList=ke("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mn(this._baseLayersList),mn(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),Ee(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var O=r.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=r.length-1;w>=0;w--)a=r[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Ee(r,"click",mt),this.expand();var a=this;setTimeout(function(){Ne(r,"click",mt),a._preventClick=!1})}}),Vd=function(r,a,c){return new cs(r,a,c)},so=Dt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=ke("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var w=ke("a",c,f);return w.innerHTML=r,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),us(w),Ee(w,"click",ii),Ee(w,"click",g,this),Ee(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";ye(this._zoomInButton,a),ye(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(we(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(we(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new so,this.addControl(this.zoomControl))});var hs=function(r){return new so(r)},za=Dt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=ke("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=ke("div",a,c)),r.imperial&&(this._iScale=ke("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ou=function(r){return new za(r)},Ba='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ds=Dt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Ba+" ":"")+"Leaflet</a>"},initialize:function(r){D(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ke("div","leaflet-control-attribution"),us(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new ds().addTo(this)});var Du=function(r){return new ds(r)};Dt.Layers=cs,Dt.Zoom=so,Dt.Scale=za,Dt.Attribution=ds,cr.layers=Vd,cr.zoom=hs,cr.scale=Ou,cr.attribution=Du;var qt=Me.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});qt.addTo=function(r,a){return r.addHandler(a,this),this};var Mu={Events:tt},Ua=ue.touch?"touchstart mousedown":"mousedown",Mt=dn.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){D(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(Ee(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mt._dragging===this&&this.finishDrag(!0),Ne(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Ai(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Mt._dragging===this&&this.finishDrag();return}if(!(Mt._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Mt._dragging=this,this._preventOutline&&ti(this._element),Xs(),as(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Nu(this._element);this._startPoint=new G(a.clientX,a.clientY),this._startPos=ki(this._element),this._parentScale=Oa(c);var f=r.type==="mousedown";Ee(document,f?"mousemove":"touchmove",this._onMove,this),Ee(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new G(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,mt(r),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ne(document,"mousemove touchmove",this._onMove,this),Ne(document,"mouseup touchend touchcancel",this._onUp,this),Js(),Nn();var a=this._moved&&this._moving;this._moving=!1,Mt._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ja(r,a,c){var f,g=[1,4,2,8],w,O,B,H,Y,se,me,Se;for(w=0,se=r.length;w<se;w++)r[w]._code=z(r[w],a);for(B=0;B<4;B++){for(me=g[B],f=[],w=0,se=r.length,O=se-1;w<se;O=w++)H=r[w],Y=r[O],H._code&me?Y._code&me||(Se=T(Y,H,me,a,c),Se._code=z(Se,a),f.push(Se)):(Y._code&me&&(Se=T(Y,H,me,a,c),Se._code=z(Se,a),f.push(Se)),f.push(H));r=f}return r}function Ha(r,a){var c,f,g,w,O,B,H,Y,se;if(!r||r.length===0)throw new Error("latlngs not passed");de(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var me=ce([0,0]),Se=ie(r),Gt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Gt<1700&&(me=oo(r));var Et=r.length,Sn=[];for(c=0;c<Et;c++){var rn=ce(r[c]);Sn.push(a.project(ce([rn.lat-me.lat,rn.lng-me.lng])))}for(B=H=Y=0,c=0,f=Et-1;c<Et;f=c++)g=Sn[c],w=Sn[f],O=g.y*w.x-w.y*g.x,H+=(g.x+w.x)*O,Y+=(g.y+w.y)*O,B+=O*3;B===0?se=Sn[0]:se=[H/B,Y/B];var fo=a.unproject(te(se));return ce([fo.lat+me.lat,fo.lng+me.lng])}function oo(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var w=ce(r[g]);a+=w.lat,c+=w.lng,f++}return ce([a/f,c/f])}var Vu={__proto__:null,clipPolygon:ja,polygonCenter:Ha,centroid:oo};function fs(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=u(r,c),r=zu(r,c),r}function Vt(r,a,c){return Math.sqrt(ne(r,a,c,!0))}function Fu(r,a,c){return ne(r,a,c)}function zu(r,a){var c=r.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,ri(r,g,a,0,c-1);var w,O=[];for(w=0;w<c;w++)g[w]&&O.push(r[w]);return O}function ri(r,a,c,f,g){var w=0,O,B,H;for(B=f+1;B<=g-1;B++)H=ne(r[B],r[f],r[g],!0),H>w&&(O=B,w=H);w>c&&(a[O]=1,ri(r,a,c,f,O),ri(r,a,c,O,g))}function u(r,a){for(var c=[r[0]],f=1,g=0,w=r.length;f<w;f++)j(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<w-1&&c.push(r[w-1]),c}var m;function _(r,a,c,f,g){var w=f?m:z(r,c),O=z(a,c),B,H,Y;for(m=O;;){if(!(w|O))return[r,a];if(w&O)return!1;B=w||O,H=T(r,a,B,c,g),Y=z(H,c),B===w?(r=H,w=Y):(a=H,O=Y)}}function T(r,a,c,f,g){var w=a.x-r.x,O=a.y-r.y,B=f.min,H=f.max,Y,se;return c&8?(Y=r.x+w*(H.y-r.y)/O,se=H.y):c&4?(Y=r.x+w*(B.y-r.y)/O,se=B.y):c&2?(Y=H.x,se=r.y+O*(H.x-r.x)/w):c&1&&(Y=B.x,se=r.y+O*(B.x-r.x)/w),new G(Y,se,g)}function z(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function j(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function ne(r,a,c,f){var g=a.x,w=a.y,O=c.x-g,B=c.y-w,H=O*O+B*B,Y;return H>0&&(Y=((r.x-g)*O+(r.y-w)*B)/H,Y>1?(g=c.x,w=c.y):Y>0&&(g+=O*Y,w+=B*Y)),O=r.x-g,B=r.y-w,f?O*O+B*B:new G(g,w)}function de(r){return!b(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Je(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),de(r)}function Oe(r,a){var c,f,g,w,O,B,H,Y;if(!r||r.length===0)throw new Error("latlngs not passed");de(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var se=ce([0,0]),me=ie(r),Se=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Se<1700&&(se=oo(r));var Gt=r.length,Et=[];for(c=0;c<Gt;c++){var Sn=ce(r[c]);Et.push(a.project(ce([Sn.lat-se.lat,Sn.lng-se.lng])))}for(c=0,f=0;c<Gt-1;c++)f+=Et[c].distanceTo(Et[c+1])/2;if(f===0)Y=Et[0];else for(c=0,w=0;c<Gt-1;c++)if(O=Et[c],B=Et[c+1],g=O.distanceTo(B),w+=g,w>f){H=(w-f)/g,Y=[B.x-H*(B.x-O.x),B.y-H*(B.y-O.y)];break}var rn=a.unproject(te(Y));return ce([rn.lat+se.lat,rn.lng+se.lng])}var st={__proto__:null,simplify:fs,pointToSegmentDistance:Vt,closestPointOnSegment:Fu,clipSegment:_,_getEdgeIntersection:T,_getBitCode:z,_sqClosestPointOnSegment:ne,isFlat:de,_flat:Je,polylineCenter:Oe},nn={project:function(r){return new G(r.lng,r.lat)},unproject:function(r){return new le(r.y,r.x)},bounds:new pe([-180,-90],[180,90])},Vn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new pe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),O=w*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-O)/(1+O),w/2);return f=-c*Math.log(Math.max(B,1e-10)),new G(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-r.y/c),O=Math.PI/2-2*Math.atan(w),B=0,H=.1,Y;B<15&&Math.abs(H)>1e-7;B++)Y=g*Math.sin(O),Y=Math.pow((1-Y)/(1+Y),g/2),H=Math.PI/2-2*Math.atan(w*Y)-O,O+=H;return new le(O*a,r.x*a/c)}},si={__proto__:null,LonLat:nn,Mercator:Vn,SphericalMercator:Jt},oi=s({},ht,{code:"EPSG:3395",projection:Vn,transformation:function(){var r=.5/(Math.PI*Vn.R);return en(r,.5,-r,.5)}()}),ps=s({},ht,{code:"EPSG:4326",projection:nn,transformation:en(1/180,1,-1/180,.5)}),Wa=s({},Fe,{projection:nn,transformation:en(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});Fe.Earth=ht,Fe.EPSG3395=oi,Fe.EPSG3857=Ii,Fe.EPSG900913=nr,Fe.EPSG4326=ps,Fe.Simple=Wa;var Fn=dn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?b(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ao=Fn.extend({initialize:function(r,a){D(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),pI=function(r,a){return new ao(r,a)},Ni=ao.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),ao.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),ao.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Q;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),mI=function(r,a){return new Ni(r,a)},lo=Me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){D(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=te(f),w=te(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),w&&(r.style.marginLeft=-w.x+"px",r.style.marginTop=-w.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ue.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function gI(r){return new lo(r)}var $a=lo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof $a.imagePath!="string"&&($a.imagePath=this._detectIconPath()),(this.options.imagePath||$a.imagePath)+lo.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ke("div","leaflet-default-icon-path",document.body),a=or(r,"background-image")||or(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),qg=qt.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Mt(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=ki(a._icon),O=c.getPixelBounds(),B=c.getPixelOrigin(),H=Ie(O.min._subtract(B).add(g),O.max._subtract(B).subtract(g));if(!H.contains(w)){var Y=te((Math.max(H.max.x,w.x)-H.max.x)/(O.max.x-H.max.x)-(Math.min(H.min.x,w.x)-H.min.x)/(O.min.x-H.min.x),(Math.max(H.max.y,w.y)-H.max.y)/(O.max.y-H.max.y)-(Math.min(H.min.y,w.y)-H.min.y)/(O.min.y-H.min.y)).multiplyBy(f);c.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Xe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=N(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=ki(a._icon),g=a._map.layerPointToLatLng(f);c&&Xe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Bu=Fn.extend({options:{icon:new $a,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){D(this,a),this._latlng=ce(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=ce(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),we(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(we(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(this._icon,"focus",this._panOnFocus,this),He(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&He(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&wt(this._icon,r),this._shadow&&wt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?te(a.iconSize):te(0,0),f=a.iconAnchor?te(a.iconAnchor):te(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _I(r,a){return new Bu(r,a)}var hr=Fn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return D(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Uu=hr.extend({options:{fill:!0,radius:10},initialize:function(r,a){D(this,a),this._latlng=ce(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=ce(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return hr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new pe(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yI(r,a){return new Uu(r,a)}var Fd=Uu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),D(this,a),this._latlng=ce(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:hr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===ht.distance){var g=Math.PI/180,w=this._mRadius/ht.R/g,O=c.project([a+w,r]),B=c.project([a-w,r]),H=O.add(B).divideBy(2),Y=c.unproject(H).lat,se=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Y*g))/(Math.cos(a*g)*Math.cos(Y*g)))/g;(isNaN(se)||se===0)&&(se=w/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(se)?0:H.x-c.project([Y,r-se]).x,this._radiusY=H.y-O.y}else{var me=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(me).x}this._updateBounds()}});function vI(r,a,c){return new Fd(r,a,c)}var Oi=hr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){D(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=ne,g,w,O=0,B=this._parts.length;O<B;O++)for(var H=this._parts[O],Y=1,se=H.length;Y<se;Y++){g=H[Y-1],w=H[Y];var me=f(r,g,w,!0);me<a&&(a=me,c=f(r,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oe(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=ce(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Q,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return de(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=de(r),f=0,g=r.length;f<g;f++)c?(a[f]=ce(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new pe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new G(r,r);this._rawPxBounds&&(this._pxBounds=new pe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof le,g=r.length,w,O;if(f){for(O=[],w=0;w<g;w++)O[w]=this._map.latLngToLayerPoint(r[w]),c.extend(O[w]);a.push(O)}else for(w=0;w<g;w++)this._projectLatlngs(r[w],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,O,B,H;for(c=0,g=0,w=this._rings.length;c<w;c++)for(H=this._rings[c],f=0,O=H.length;f<O-1;f++)B=_(H[f],H[f+1],r,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==H[f+1]||f===O-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=fs(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,w,O,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,w=this._parts.length;c<w;c++)for(B=this._parts[c],f=0,O=B.length,g=O-1;f<O;g=f++)if(!(!a&&f===0)&&Vt(r,B[g],B[f])<=H)return!0;return!1}});function wI(r,a){return new Oi(r,a)}Oi._flat=Je;var uo=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ha(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Oi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof le&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Oi.prototype._setLatLngs.call(this,r),de(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return de(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new G(a,a);if(r=new pe(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=ja(this._rings[f],r,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,w,O,B,H,Y;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(w=0,H=this._parts.length;w<H;w++)for(c=this._parts[w],O=0,Y=c.length,B=Y-1;O<Y;B=O++)f=c[O],g=c[B],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Oi.prototype._containsPoint.call(this,r,!0)}});function EI(r,a){return new uo(r,a)}var Di=Ni.extend({initialize:function(r,a){D(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=b(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(r))return this;var O=ju(r,w);return O?(O.feature=$u(r),O.defaultOptions=O.options,this.resetStyle(O),w.onEachFeature&&w.onEachFeature(r,O),this.addLayer(O)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function ju(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,O=a&&a.coordsToLatLng||zd,B,H,Y,se;if(!f&&!c)return null;switch(c.type){case"Point":return B=O(f),Gg(w,r,B,a);case"MultiPoint":for(Y=0,se=f.length;Y<se;Y++)B=O(f[Y]),g.push(Gg(w,r,B,a));return new Ni(g);case"LineString":case"MultiLineString":return H=Hu(f,c.type==="LineString"?0:1,O),new Oi(H,a);case"Polygon":case"MultiPolygon":return H=Hu(f,c.type==="Polygon"?1:2,O),new uo(H,a);case"GeometryCollection":for(Y=0,se=c.geometries.length;Y<se;Y++){var me=ju({geometry:c.geometries[Y],type:"Feature",properties:r.properties},a);me&&g.push(me)}return new Ni(g);case"FeatureCollection":for(Y=0,se=c.features.length;Y<se;Y++){var Se=ju(c.features[Y],a);Se&&g.push(Se)}return new Ni(g);default:throw new Error("Invalid GeoJSON object.")}}function Gg(r,a,c,f){return r?r(a,c):new Bu(c,f&&f.markersInheritOptions&&f)}function zd(r){return new le(r[1],r[0],r[2])}function Hu(r,a,c){for(var f=[],g=0,w=r.length,O;g<w;g++)O=a?Hu(r[g],a-1,c):(c||zd)(r[g]),f.push(O);return f}function Bd(r,a){return r=ce(r),r.alt!==void 0?[E(r.lng,a),E(r.lat,a),E(r.alt,a)]:[E(r.lng,a),E(r.lat,a)]}function Wu(r,a,c,f){for(var g=[],w=0,O=r.length;w<O;w++)g.push(a?Wu(r[w],de(r[w])?0:a-1,c,f):Bd(r[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function co(r,a){return r.feature?s({},r.feature,{geometry:a}):$u(a)}function $u(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Ud={toGeoJSON:function(r){return co(this,{type:"Point",coordinates:Bd(this.getLatLng(),r)})}};Bu.include(Ud),Fd.include(Ud),Uu.include(Ud),Oi.include({toGeoJSON:function(r){var a=!de(this._latlngs),c=Wu(this._latlngs,a?1:0,!1,r);return co(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),uo.include({toGeoJSON:function(r){var a=!de(this._latlngs),c=a&&!de(this._latlngs[0]),f=Wu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),co(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),ao.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),co(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(r);if(c)f.push(w.geometry);else{var O=$u(w);O.type==="FeatureCollection"?f.push.apply(f,O.features):f.push(O)}}}),c?co(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Zg(r,a){return new Di(r,a)}var TI=Zg,qu=Fn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=ie(a),D(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){He(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ct(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ie(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:ke("img");if(we(a,"leaflet-image-layer"),this._zoomAnimated&&we(a,"leaflet-zoom-animated"),this.options.className&&we(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Ri(this._image,c,a)},_reset:function(){var r=this._image,a=new pe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),II=function(r,a,c){return new qu(r,a,c)},Kg=qu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:ke("video");if(we(a,"leaflet-image-layer"),this._zoomAnimated&&we(a,"leaflet-zoom-animated"),this.options.className&&we(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var O=ke("source");O.src=this._url[w],a.appendChild(O)}}});function SI(r,a,c){return new Kg(r,a,c)}var Qg=qu.extend({_initImage:function(){var r=this._image=this._url;we(r,"leaflet-image-layer"),this._zoomAnimated&&we(r,"leaflet-zoom-animated"),this.options.className&&we(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function PI(r,a,c){return new Qg(r,a,c)}var ai=Fn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof le||b(r))?(this._latlng=ce(r),D(this,a)):(D(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(l(He,void 0,this._container),200)):He(this._container),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ce(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ct(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ni){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=te(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Fn.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(D(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Gu=ai.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ai.prototype.openOn.call(this,r)},onAdd:function(r){ai.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hr||this._source.on("preclick",Dn))},onRemove:function(r){ai.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hr||this._source.off("preclick",Dn))},getEvents:function(){var r=ai.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=ke("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=ke("div",r+"-content-wrapper",a);if(this._contentNode=ke("div",r+"-content",c),us(a),ze(this._contentNode),Ee(a,"contextmenu",Dn),this._tipContainer=ke("div",r+"-tip-container",a),this._tip=ke("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=ke("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(f,"click",function(g){mt(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",we(r,w)):ye(r,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(or(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new G(this._containerLeft,-c-this._containerBottom);g._add(ki(this._container));var w=r.layerPointToContainerPoint(g),O=te(this.options.autoPanPadding),B=te(this.options.autoPanPaddingTopLeft||O),H=te(this.options.autoPanPaddingBottomRight||O),Y=r.getSize(),se=0,me=0;w.x+f+H.x>Y.x&&(se=w.x+f-Y.x+H.x),w.x-se-B.x<0&&(se=w.x-B.x),w.y+c+H.y>Y.y&&(me=w.y+c-Y.y+H.y),w.y-me-B.y<0&&(me=w.y-B.y),(se||me)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([se,me]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xI=function(r,a){return new Gu(r,a)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(r,a,c){return this._initOverlay(Gu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Fn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Gu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ni||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){ii(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof hr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Zu=ai.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ai.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ai.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ai.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ke("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),O=f.layerPointToContainerPoint(r),B=this.options.direction,H=g.offsetWidth,Y=g.offsetHeight,se=te(this.options.offset),me=this._getAnchor();B==="top"?(a=H/2,c=Y):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=Y/2):B==="right"?(a=0,c=Y/2):B==="left"?(a=H,c=Y/2):O.x<w.x?(B="right",a=0,c=Y/2):(B="left",a=H+(se.x+me.x)*2,c=Y/2),r=r.subtract(te(a,c,!0)).add(se).add(me),ye(g,"leaflet-tooltip-right"),ye(g,"leaflet-tooltip-left"),ye(g,"leaflet-tooltip-top"),ye(g,"leaflet-tooltip-bottom"),we(g,"leaflet-tooltip-"+B),Xe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&wt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),CI=function(r,a){return new Zu(r,a)};Pe.include({openTooltip:function(r,a,c){return this._initOverlay(Zu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Fn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ni||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(Ee(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Ee(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Yg=lo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(mn(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=te(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function AI(r){return new Yg(r)}lo.Default=$a;var qa=Fn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){D(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),He(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof G?r:new G(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=r(c,+w));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){wt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(r-g.loaded)/200);wt(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(He(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)He(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),w=Math.floor(a/2),O=c-1,B=new G(+g,+w);B.z=+O;var H=this._tileCoordsToKey(B),Y=this._tiles[H];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),O>f?this._retainParent(g,w,O,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var w=2*a;w<2*a+2;w++){var O=new G(g,w);O.z=c+1;var B=this._tileCoordsToKey(O),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ue.any3d?Ri(r.el,g,f):Xe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new pe(g.subtract(w),g.add(w))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),w=g.getCenter(),O=[],B=this.options.keepBuffer,H=new pe(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var se=this._tiles[Y].coords;(se.z!==this._tileZoom||!H.contains(new G(se.x,se.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var me=g.min.y;me<=g.max.y;me++)for(var Se=g.min.x;Se<=g.max.x;Se++){var Gt=new G(Se,me);if(Gt.z=this._tileZoom,!!this._isValidTile(Gt)){var Et=this._tiles[this._tileCoordsToKey(Gt)];Et?Et.current=!0:O.push(Gt)}}if(O.sort(function(rn,fo){return rn.distanceTo(w)-fo.distanceTo(w)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Sn=document.createDocumentFragment();for(Se=0;Se<O.length;Se++)this._addTile(O[Se],Sn);this._level.el.appendChild(Sn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return ie(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),w=a.unproject(f,r.z),O=a.unproject(g,r.z);return[w,O]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Q(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new G(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(He(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){we(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=v,r.onmousemove=v,ue.ielt9&&this.options.opacity<1&&wt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&N(l(this._tileReady,this,r,null,g)),Xe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(wt(c.el,0),F(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(we(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new G(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new pe(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function RI(r){return new qa(r)}var ho=qa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=D(this,a),a.detectRetina&&ue.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return Ee(c,"load",l(this._tileOnLoad,this,a,c)),Ee(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ue.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ue.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=v,a.onerror=v,!a.complete)){a.src=X;var c=this._tiles[r].coords;He(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",X),qa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return qa.prototype._tileReady.call(this,r,a,c)}});function Xg(r,a){return new ho(r,a)}var Jg=ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=D(this,a);var g=a.detectRetina&&ue.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ho.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=Ie(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,O=(this._wmsVersion>=1.3&&this._crs===ps?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),B=ho.prototype.getTileUrl.call(this,r);return B+U(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function kI(r,a){return new Jg(r,a)}ho.WMS=Jg,Xg.wms=kI;var Mi=Fn.extend({options:{padding:.1},initialize:function(r){D(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ue.any3d?Ri(this._container,w,c):Xe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new pe(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),e_=Mi.extend({options:{tolerance:0},getEvents:function(){var r=Mi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Ee(r,"mousemove",this._onMouseMove,this),Ee(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,He(this._container),Ne(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ue.retina?2:1;Xe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new pe,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,w,O=r._parts,B=O.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(f=0,g=O[c].length;f<g;f++)w=O[c][f],H[f?"lineTo":"moveTo"](w.x,w.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(ye(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(we(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function t_(r){return ue.canvas?new e_(r):null}var Ga=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),LI={_initContainer:function(){this._container=ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Mi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ga("shape");we(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ga("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;He(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Ga("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=b(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Ga("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Ct(r._container)},_bringToBack:function(r){In(r._container)}},Ku=ue.vml?Ga:va,Za=Mi.extend({_initContainer:function(){this._container=Ku("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ku("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){He(this._container),Ne(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Ku("path");r.options.className&&we(a,r.options.className),r.options.interactive&&we(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){He(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,wu(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,w)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Ct(r._path)},_bringToBack:function(r){In(r._path)}});ue.vml&&Za.include(LI);function n_(r){return ue.svg||ue.vml?new Za(r):null}Pe.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&t_(r)||n_(r)}});var i_=uo.extend({initialize:function(r,a){uo.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ie(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function bI(r,a){return new i_(r,a)}Za.create=Ku,Za.pointsToPath=wu,Di.geometryToLayer=ju,Di.coordsToLatLng=zd,Di.coordsToLatLngs=Hu,Di.latLngToCoords=Bd,Di.latLngsToCoords=Wu,Di.getFeature=co,Di.asFeature=$u,Pe.mergeOptions({boxZoom:!0});var r_=qt.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){He(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),as(),Xs(),this._startPoint=this._map.mouseEventToContainerPoint(r),Ee(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ke("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new pe(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(He(this._box),ye(this._container,"leaflet-crosshair")),Nn(),Js(),Ne(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",r_),Pe.mergeOptions({doubleClickZoom:!0});var s_=qt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Pe.addInitHook("addHandler","doubleClickZoom",s_),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var o_=qt.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Mt(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ie(this._map.options.maxBounds);this._offsetLimit=Ie(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,w=(f+a+c)%r-a-c,O=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,O=c.easeLinearity,B=g.multiplyBy(O/w),H=B.distanceTo([0,0]),Y=Math.min(c.inertiaMaxSpeed,H),se=B.multiplyBy(Y/H),me=Y/(c.inertiaDeceleration*O),Se=se.multiplyBy(-me/2).round();!Se.x&&!Se.y?a.fire("moveend"):(Se=a._limitOffset(Se,a.options.maxBounds),N(function(){a.panBy(Se,{duration:me,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",o_),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var a_=qt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Ee(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ne(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=te(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(te(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;ii(r)}}});Pe.addInitHook("addHandler","keyboard",a_),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var l_=qt.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Mn(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),ii(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,O=r._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,O&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+O):r.setZoomAround(this._lastMousePos,a+O))}});Pe.addInitHook("addHandler","scrollWheelZoom",l_);var NI=600;Pe.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var u_=qt.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new G(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",mt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),NI),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ne(document,"touchend",mt),Ne(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new G(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Pe.addInitHook("addHandler","tapHold",u_),Pe.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var c_=qt.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),mt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var O=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(O,this,!0),mt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",c_),Pe.BoxZoom=r_,Pe.DoubleClickZoom=s_,Pe.Drag=o_,Pe.Keyboard=a_,Pe.ScrollWheelZoom=l_,Pe.TapHold=u_,Pe.TouchZoom=c_,n.Bounds=pe,n.Browser=ue,n.CRS=Fe,n.Canvas=e_,n.Circle=Fd,n.CircleMarker=Uu,n.Class=Me,n.Control=Dt,n.DivIcon=Yg,n.DivOverlay=ai,n.DomEvent=Md,n.DomUtil=ni,n.Draggable=Mt,n.Evented=dn,n.FeatureGroup=Ni,n.GeoJSON=Di,n.GridLayer=qa,n.Handler=qt,n.Icon=lo,n.ImageOverlay=qu,n.LatLng=le,n.LatLngBounds=Q,n.Layer=Fn,n.LayerGroup=ao,n.LineUtil=st,n.Map=Pe,n.Marker=Bu,n.Mixin=Mu,n.Path=hr,n.Point=G,n.PolyUtil=Vu,n.Polygon=uo,n.Polyline=Oi,n.Popup=Gu,n.PosAnimation=ur,n.Projection=si,n.Rectangle=i_,n.Renderer=Mi,n.SVG=Za,n.SVGOverlay=Qg,n.TileLayer=ho,n.Tooltip=Zu,n.Transformation=Ti,n.Util=R,n.VideoOverlay=Kg,n.bind=l,n.bounds=Ie,n.canvas=t_,n.circle=vI,n.circleMarker=yI,n.control=cr,n.divIcon=AI,n.extend=s,n.featureGroup=mI,n.geoJSON=Zg,n.geoJson=TI,n.gridLayer=RI,n.icon=gI,n.imageOverlay=II,n.latLng=ce,n.latLngBounds=ie,n.layerGroup=pI,n.map=Fa,n.marker=_I,n.point=te,n.polygon=EI,n.polyline=wI,n.popup=xI,n.rectangle=bI,n.setOptions=D,n.stamp=d,n.svg=n_,n.svgOverlay=PI,n.tileLayer=Xg,n.tooltip=CI,n.transformation=en,n.version=i,n.videoOverlay=SI;var OI=window.L;n.noConflict=function(){return window.L=OI,this},window.L=n})})(Xp,Xp.exports);var ya=Xp.exports;const kN=l0(ya);function Pd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function xd(t,e){return e==null?function(i,s){const o=$.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=$.useRef();o.current||(o.current=t(i,s));const l=$.useRef(i),{instance:h}=o.current;return $.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function dI(t,e){$.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function fI(t){return function(n){const i=Wg(),s=t(Sd(n,i),i);return aI(i.map,n.attribution),$g(s.current,n.eventHandlers),dI(s.current,i),s}}function LN(t,e){const n=$.useRef();$.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function bN(t){return function(n){const i=Wg(),s=t(Sd(n,i),i);return $g(s.current,n.eventHandlers),dI(s.current,i),LN(s.current,n),s}}function NN(t,e){const n=xd(t,e),i=fI(n);return hI(i)}function ON(t,e){const n=xd(t),i=RN(n,e);return CN(i)}function DN(t,e){const n=xd(t,e),i=bN(n);return hI(i)}function MN(t,e){const n=xd(t,e),i=fI(n);return AN(i)}function VN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Jp(){return Jp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jp.apply(this,arguments)}function FN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...y},v){const[E]=$.useState({className:s,id:o,style:h}),[A,M]=$.useState(null);$.useImperativeHandle(v,()=>(A==null?void 0:A.map)??null,[A]);const D=$.useCallback(k=>{if(k!==null&&A===null){const P=new ya.Map(k,y);n!=null&&p!=null?P.setView(n,p):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),M(xN(P))}},[]);$.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const U=A?xs.createElement(cI,{value:A},i):l??null;return xs.createElement("div",Jp({},E,{ref:D}),U)}const zN=$.forwardRef(FN),BN=NN(function({position:e,...n},i){const s=new ya.Marker(e,n);return Pd(s,lI(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),UN=DN(function({positions:e,...n},i){const s=new ya.Polygon(e,n);return Pd(s,lI(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),jN=ON(function(e,n){const i=new ya.Popup(e,n.overlayContainer);return Pd(i,n)},function(e,n,{position:i},s){$.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),HN=MN(function({url:e,...n},i){const s=new ya.TileLayer(e,Sd(n,i));return Pd(s,i)},function(e,n,i){VN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});const WN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],$N=(t,e=3)=>{const n=[];for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},qN=(t,e)=>{const n=$N(t,5),i=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],y=p[0]-o,v=p[1]-l,E=Math.sqrt(y*y+v*v);if(E===0)continue;const A=y/E,M=v/E;h.push([p[0]+A*e*i,p[1]+M*e*s])}return h},GN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],a0=(t,e)=>{const n=e?"red":"white";return kN.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},ZN=({facility:t,onViewDetails:e})=>{var l,h;const n=$.useRef(null);$.useEffect(()=>{if(n.current){const d=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(a0(d,t.hit))}},[t.hit,t.type]);const i=d=>{switch(d){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}},s=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,o=((h=t.location)==null?void 0:h.longitude)??t.longitude??0;return V(BN,{ref:n,position:[s,o],icon:a0(i(t.type),t.hit),children:V(jN,{children:Z("div",{style:{color:"#000",minWidth:"200px"},children:[V("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),V("div",{style:{marginBottom:"8px"},children:V("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),Z("p",{style:{margin:"5px 0",fontSize:"13px"},children:[V("strong",{children:"Type:"})," ",V("span",{style:{textTransform:"capitalize"},children:t.type})]}),Z("p",{style:{margin:"5px 0",fontSize:"13px"},children:[V("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),Z("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[s.toFixed(4),", ",o.toFixed(4)]}),V("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#2563eb",onMouseOut:d=>d.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details →"})]})})})},KN=()=>{const t=Qm(),[e,n]=$.useState([]),[i,s]=$.useState("all"),[o,l]=$.useState("all"),[h,d]=$.useState(""),[p,y]=$.useState(0),[v,E]=$.useState(!0),[A,M]=$.useState(!0),[D,U]=$.useState(!0),[k,P]=$.useState(!0),[b,W]=$.useState(!0),[X,ee]=$.useState(!0);$.useEffect(()=>{(async()=>{try{if(!Be){console.error("Firebase not initialized");return}const N=(await _r(gr(Be,At.FACILITIES))).docs.map(F=>({id:parseInt(F.id),...F.data()}));n(N)}catch(C){console.error("Error fetching facilities:",C)}})()},[]);const x=S=>{t(`/facility/${S}`)},I=e.filter(S=>!(i!=="all"&&S.type!==i||S.type==="refinery"&&!v||S.type==="extraction"&&!A||S.type==="storage"&&!D||o==="hit"&&!S.hit||o==="operational"&&S.hit||S.capacity<p||h&&!S.name.toLowerCase().includes(h.toLowerCase())));return Z("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[Z("div",{style:{width:"320px",backgroundColor:"#1a1a1a",borderRight:"2px solid #333",display:"flex",flexDirection:"column",overflow:"hidden"},children:[Z("div",{style:{padding:"20px",borderBottom:"1px solid #333",backgroundColor:"#222"},children:[V("h2",{style:{margin:"0 0 5px 0",fontSize:"18px",fontWeight:"600",color:"white"},children:"Russian Oil Facilities"}),Z("p",{style:{margin:0,color:"#888",fontSize:"13px"},children:[I.length," of ",e.length," facilities"]})]}),Z("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:[Z("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Search"}),V("input",{type:"text",placeholder:"Search by name...",value:h,onChange:S=>d(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]}),Z("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Facility Type"}),Z("select",{value:i,onChange:S=>s(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[V("option",{value:"all",children:"All Types"}),V("option",{value:"refinery",children:"Refinery"}),V("option",{value:"extraction",children:"Extraction"}),V("option",{value:"storage",children:"Storage"})]})]}),Z("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),Z("select",{value:o,onChange:S=>l(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[V("option",{value:"all",children:"All Status"}),V("option",{value:"hit",children:"Hit"}),V("option",{value:"operational",children:"Operational"})]})]}),Z("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Min. Capacity"}),Z("div",{style:{color:"#666",fontSize:"12px",marginBottom:"8px"},children:[p.toLocaleString()," barrels/day"]}),V("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:S=>y(Number(S.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#3b82f6"}})]}),(i!=="all"||o!=="all"||h!==""||p>0)&&V("button",{onClick:()=>{s("all"),l("all"),d(""),y(0)},style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",marginBottom:"20px"},children:"Clear All Filters"}),Z("div",{style:{borderTop:"1px solid #333",paddingTop:"20px",marginTop:"20px"},children:[V("div",{style:{fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:"Facility Types"}),Z("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:v,onChange:S=>E(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#FF5733"}}),V("span",{style:{color:"#FF5733",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Refinery"})]}),Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:A,onChange:S=>M(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#33FF57"}}),V("span",{style:{color:"#33FF57",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Extraction"})]}),Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:D,onChange:S=>U(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#3357FF"}}),V("span",{style:{color:"#3357FF",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Storage"})]})]})]}),Z("div",{style:{borderTop:"1px solid #333",paddingTop:"20px",marginTop:"20px"},children:[V("div",{style:{fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:"Weapon Ranges"}),Z("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:k,onChange:S=>P(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#10B981"}}),V("span",{style:{color:"#10B981",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"500km Range"})]}),Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:b,onChange:S=>W(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#F97316"}}),V("span",{style:{color:"#F97316",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"1000km Range"})]}),Z("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:X,onChange:S=>ee(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#EF4444"}}),V("span",{style:{color:"#EF4444",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"1500km Range"})]})]})]})]})]}),V("div",{style:{flex:1,position:"relative"},children:Z(zN,{center:[55,50],zoom:4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[V(HN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),GN.map(S=>{if(S.range===500&&!k||S.range===1e3&&!b||S.range===1500&&!X)return null;const C=qN(WN,S.range);return V(xs.Fragment,{children:V(UN,{positions:C,pathOptions:{color:S.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}})},S.name)}),I.map(S=>V(ZN,{facility:S,onViewDetails:x},S.id))]})})]})},QN=()=>{var v,E;const{id:t}=qx(),e=Qm(),[n,i]=$.useState(null),[s,o]=$.useState([]),[l,h]=$.useState(!0);if($.useEffect(()=>{(async()=>{if(t)try{if(!Be){console.error("Firebase not initialized"),h(!1);return}const M=Vi(Be,At.FACILITIES,t),D=await PT(M);if(D.exists()){i({id:parseInt(D.id),...D.data()});const U=gr(Be,At.HITS),k=Bc(U,Uc("facilityId","==",parseInt(t)),nL("date","desc")),b=(await _r(k)).docs.map(W=>({id:W.data().id,...W.data()}));o(b)}else console.error("Facility not found");h(!1)}catch(M){console.error("Error fetching facility:",M),h(!1)}})()},[t]),l)return V("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return Z("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[V("div",{style:{fontSize:"18px"},children:"Facility not found"}),V("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((v=n.location)==null?void 0:v.latitude)??n.latitude??0,p=((E=n.location)==null?void 0:E.longitude)??n.longitude??0,y=A=>{switch(A){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return Z("div",{style:{width:"100%",minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white"},children:[Z("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px"},children:[V("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:"← Back to Map"}),V("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),V("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),Z("div",{style:{padding:"40px",maxWidth:"1200px"},children:[Z("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[Z("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),Z("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[V("span",{style:{color:y(n.type),fontSize:"28px"},children:"●"}),V("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),Z("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),V("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),V("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day"})]}),Z("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),Z("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),Z("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[V("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),Z("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[Z("div",{children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),Z("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),"°"]})]}),Z("div",{children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),Z("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),"°"]})]})]}),V("div",{style:{marginTop:"20px"},children:V("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps →"})})]}),s.length>0&&Z("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[Z("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[V("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),Z("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),V("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((A,M)=>Z("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[Z("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[Z("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[V("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-M}),Z("div",{children:[Z("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(A.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),Z("div",{style:{fontSize:"13px",color:"#888"},children:["Expected repair time: ",Z("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[A.expectedRepairTime," days"]})]})]})]}),A.videoLink&&V("a",{href:A.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"📹 Video"})]}),A.notes&&V("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:A.notes})]},A.id))})]})]})]})},YN=()=>V(hC,{basename:"/russia-oil",children:Z(lC,{children:[V(Oc,{path:"/",element:V(KN,{})}),V(Oc,{path:"/facility/:id",element:V(QN,{})}),V(Oc,{path:"/admin",element:V(SN,{})})]})}),XN=Lf.createRoot(document.getElementById("root"));XN.render(V(xs.StrictMode,{children:V(YN,{})}));
