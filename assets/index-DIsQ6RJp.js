function WT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a0={exports:{}},Dh={},l0={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),$T=Symbol.for("react.portal"),qT=Symbol.for("react.fragment"),GT=Symbol.for("react.strict_mode"),ZT=Symbol.for("react.profiler"),KT=Symbol.for("react.provider"),QT=Symbol.for("react.context"),YT=Symbol.for("react.forward_ref"),XT=Symbol.for("react.suspense"),JT=Symbol.for("react.memo"),eS=Symbol.for("react.lazy"),d_=Symbol.iterator;function tS(t){return t===null||typeof t!="object"?null:(t=d_&&t[d_]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,h0={};function ra(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}ra.prototype.isReactComponent={};ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=ra.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}var Jp=Xp.prototype=new d0;Jp.constructor=Xp;c0(Jp,ra.prototype);Jp.isPureReactComponent=!0;var f_=Array.isArray,f0=Object.prototype.hasOwnProperty,em={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,n){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)f0.call(e,r)&&!p0.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:iu,type:t,key:o,ref:l,props:s,_owner:em.current}}function nS(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tm(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function rS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p_=/\/+/g;function Fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rS(""+t.key):e.toString(36)}function Tc(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case iu:case $T:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Fd(l,0):r,f_(s)?(n="",t!=null&&(n=t.replace(p_,"$&/")+"/"),Tc(s,e,n,"",function(p){return p})):s!=null&&(tm(s)&&(s=nS(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(p_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",f_(t))for(var h=0;h<t.length;h++){o=t[h];var d=r+Fd(o,h);l+=Tc(o,e,n,d,s)}else if(d=tS(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=r+Fd(o,h++),l+=Tc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ec(t,e,n){if(t==null)return t;var r=[],s=0;return Tc(t,r,"","",function(o){return e.call(n,o,s++)}),r}function iS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Sc={transition:null},sS={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:em};function g0(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:ec,forEach:function(t,e,n){ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ec(t,function(){e++}),e},toArray:function(t){return ec(t,function(e){return e})||[]},only:function(t){if(!tm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ra;Ie.Fragment=qT;Ie.Profiler=ZT;Ie.PureComponent=Xp;Ie.StrictMode=GT;Ie.Suspense=XT;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sS;Ie.act=g0;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=em.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)f0.call(e,d)&&!p0.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:iu,type:t.type,key:s,ref:o,props:r,_owner:l}};Ie.createContext=function(t){return t={$$typeof:QT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KT,_context:t},t.Consumer=t};Ie.createElement=m0;Ie.createFactory=function(t){var e=m0.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:YT,render:t}};Ie.isValidElement=tm;Ie.lazy=function(t){return{$$typeof:eS,_payload:{_status:-1,_result:t},_init:iS}};Ie.memo=function(t,e){return{$$typeof:JT,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};Ie.unstable_act=g0;Ie.useCallback=function(t,e){return qt.current.useCallback(t,e)};Ie.useContext=function(t){return qt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return qt.current.useEffect(t,e)};Ie.useId=function(){return qt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return qt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Ie.useRef=function(t){return qt.current.useRef(t)};Ie.useState=function(t){return qt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return qt.current.useTransition()};Ie.version="18.3.1";l0.exports=Ie;var q=l0.exports;const Pl=o0(q),oS=WT({__proto__:null,default:Pl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=q,lS=Symbol.for("react.element"),uS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,hS=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dS={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)cS.call(e,r)&&!dS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lS,type:t,key:o,ref:l,props:s,_owner:hS.current}}Dh.Fragment=uS;Dh.jsx=_0;Dh.jsxs=_0;a0.exports=Dh;var g=a0.exports,kf={},y0={exports:{}},mn={},v0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var X=$.length;$.push(le);e:for(;0<X;){var he=X-1>>>1,ve=$[he];if(0<s(ve,le))$[he]=le,$[X]=ve,X=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var le=$[0],X=$.pop();if(X!==le){$[0]=X;e:for(var he=0,ve=$.length,Ke=ve>>>1;he<Ke;){var Ce=2*(he+1)-1,xe=$[Ce],ce=Ce+1,at=$[ce];if(0>s(xe,X))ce<ve&&0>s(at,xe)?($[he]=at,$[ce]=X,he=ce):($[he]=xe,$[Ce]=X,he=Ce);else if(ce<ve&&0>s(at,X))$[he]=at,$[ce]=X,he=ce;else break e}}return le}function s($,le){var X=$.sortIndex-le.sortIndex;return X!==0?X:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],y=1,w=null,x=3,k=!1,z=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O($){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=$)r(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(p)}}function H($){if(N=!1,O($),!z)if(n(d)!==null)z=!0,Ne(Q);else{var le=n(p);le!==null&&Be(H,le.startTime-$)}}function Q($,le){z=!1,N&&(N=!1,R(C),C=-1),k=!0;var X=x;try{for(O(le),w=n(d);w!==null&&(!(w.expirationTime>le)||$&&!V());){var he=w.callback;if(typeof he=="function"){w.callback=null,x=w.priorityLevel;var ve=he(w.expirationTime<=le);le=t.unstable_now(),typeof ve=="function"?w.callback=ve:w===n(d)&&r(d),O(le)}else r(d);w=n(d)}if(w!==null)var Ke=!0;else{var Ce=n(p);Ce!==null&&Be(H,Ce.startTime-le),Ke=!1}return Ke}finally{w=null,x=X,k=!1}}var J=!1,b=null,C=-1,I=5,M=-1;function V(){return!(t.unstable_now()-M<I)}function P(){if(b!==null){var $=t.unstable_now();M=$;var le=!0;try{le=b(!0,$)}finally{le?A():(J=!1,b=null)}}else J=!1}var A;if(typeof T=="function")A=function(){T(P)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,we=ee.port2;ee.port1.onmessage=P,A=function(){we.postMessage(null)}}else A=function(){j(P,0)};function Ne($){b=$,J||(J=!0,A())}function Be($,le){C=j(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){z||k||(z=!0,Ne(Q))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var X=x;x=le;try{return $()}finally{x=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=x;x=$;try{return le()}finally{x=X}},t.unstable_scheduleCallback=function($,le,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,$){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,$={id:y++,callback:le,priorityLevel:$,startTime:X,expirationTime:ve,sortIndex:-1},X>he?($.sortIndex=X,e(p,$),n(d)===null&&$===n(p)&&(N?(R(C),C=-1):N=!0,Be(H,X-he))):($.sortIndex=ve,e(d,$),z||k||(z=!0,Ne(Q))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var le=x;return function(){var X=x;x=le;try{return $.apply(this,arguments)}finally{x=X}}}})(w0);v0.exports=w0;var fS=v0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=q,pn=fS;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x0=new Set,kl={};function bs(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(kl[t]=e,t=0;t<e.length;t++)x0.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,mS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m_={},g_={};function gS(t){return Af.call(g_,t)?!0:Af.call(m_,t)?!1:mS.test(t)?g_[t]=!0:(m_[t]=!0,!1)}function _S(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yS(t,e,n,r){if(e===null||typeof e>"u"||_S(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nm=/[\-:]([a-z])/g;function rm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yS(e,n,s,r)&&(n=null),r||s===null?gS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),T0=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),am=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),__=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Bd;function nl(t){if(Bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bd=e&&e[1]||""}return`
`+Bd+t}var Ud=!1;function Wd(t,e){if(!t||Ud)return"";Ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nl(t):""}function vS(t){switch(t.tag){case 5:return nl(t.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return t=Wd(t.type,!1),t;case 11:return t=Wd(t.type.render,!1),t;case 1:return t=Wd(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case Rf:return"Profiler";case sm:return"StrictMode";case bf:return"Suspense";case Lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T0:return(t.displayName||"Context")+".Consumer";case E0:return(t._context.displayName||"Context")+".Provider";case om:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case am:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function wS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xS(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=xS(t))}function C0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Of(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function y_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P0(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Mf(t,e){P0(t,e);var n=Ni(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,Ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function bo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ni(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(rl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ni(n)}}function k0(t,e){var n=Ni(e.value),r=Ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function x_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,R0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ES=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(t){ES.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dl[e]=dl[t]})});function b0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dl.hasOwnProperty(t)&&dl[t]?(""+e).trim():e+"px"}function L0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=b0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var TS=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(TS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=null;function lm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uf=null,Lo=null,No=null;function E_(t){if(t=au(t)){if(typeof Uf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Bh(e),Uf(t.stateNode,t.type,e))}}function N0(t){Lo?No?No.push(t):No=[t]:Lo=t}function O0(){if(Lo){var t=Lo,e=No;if(No=Lo=null,E_(t),e)for(t=0;t<e.length;t++)E_(e[t])}}function M0(t,e){return t(e)}function D0(){}var Hd=!1;function V0(t,e,n){if(Hd)return t(e,n);Hd=!0;try{return M0(t,e,n)}finally{Hd=!1,(Lo!==null||No!==null)&&(D0(),O0())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=Bh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Wf=!1;if(zr)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Wf=!1}function SS(t,e,n,r,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var fl=!1,Zc=null,Kc=!1,Hf=null,IS={onError:function(t){fl=!0,Zc=t}};function CS(t,e,n,r,s,o,l,h,d){fl=!1,Zc=null,SS.apply(IS,arguments)}function PS(t,e,n,r,s,o,l,h,d){if(CS.apply(this,arguments),fl){if(fl){var p=Zc;fl=!1,Zc=null}else throw Error(Y(198));Kc||(Kc=!0,Hf=p)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function T_(t){if(Ls(t)!==t)throw Error(Y(188))}function kS(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return T_(s),t;if(o===r)return T_(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,r=o;break}if(h===r){l=!0,r=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=s;break}if(h===r){l=!0,r=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function j0(t){return t=kS(t),t!==null?F0(t):null}function F0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F0(t);if(e!==null)return e;t=t.sibling}return null}var B0=pn.unstable_scheduleCallback,S_=pn.unstable_cancelCallback,AS=pn.unstable_shouldYield,RS=pn.unstable_requestPaint,st=pn.unstable_now,bS=pn.unstable_getCurrentPriorityLevel,um=pn.unstable_ImmediatePriority,U0=pn.unstable_UserBlockingPriority,Qc=pn.unstable_NormalPriority,LS=pn.unstable_LowPriority,W0=pn.unstable_IdlePriority,Vh=null,lr=null;function NS(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:DS,OS=Math.log,MS=Math.LN2;function DS(t){return t>>>=0,t===0?32:31-(OS(t)/MS|0)|0}var ic=64,sc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?r=il(h):(o&=l,o!==0&&(r=il(o)))}else l=n&~s,l!==0?r=il(l):o!==0&&(r=il(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),s=1<<n,r|=t[n],e&=~s;return r}function VS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Hn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&r)&&(s[l]=VS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function $f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H0(){var t=ic;return ic<<=1,!(ic&4194240)&&(ic=64),t}function $d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function jS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Hn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function $0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q0,hm,G0,Z0,K0,qf=!1,oc=[],vi=null,wi=null,xi=null,bl=new Map,Ll=new Map,ui=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I_(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Qa(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&hm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BS(t,e,n,r,s){switch(e){case"focusin":return vi=Qa(vi,t,e,n,r,s),!0;case"dragenter":return wi=Qa(wi,t,e,n,r,s),!0;case"mouseover":return xi=Qa(xi,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return bl.set(o,Qa(bl.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ll.set(o,Qa(Ll.get(o)||null,t,e,n,r,s)),!0}return!1}function Q0(t){var e=fs(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=z0(n),e!==null){t.blockedOn=e,K0(t.priority,function(){G0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bf=r,n.target.dispatchEvent(r),Bf=null}else return e=au(n),e!==null&&hm(e),t.blockedOn=n,!1;e.shift()}return!0}function C_(t,e,n){Ic(t)&&n.delete(e)}function US(){qf=!1,vi!==null&&Ic(vi)&&(vi=null),wi!==null&&Ic(wi)&&(wi=null),xi!==null&&Ic(xi)&&(xi=null),bl.forEach(C_),Ll.forEach(C_)}function Ya(t,e){t.blockedOn===e&&(t.blockedOn=null,qf||(qf=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,US)))}function Nl(t){function e(s){return Ya(s,t)}if(0<oc.length){Ya(oc[0],t);for(var n=1;n<oc.length;n++){var r=oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&Ya(vi,t),wi!==null&&Ya(wi,t),xi!==null&&Ya(xi,t),bl.forEach(e),Ll.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)Q0(n),n.blockedOn===null&&ui.shift()}var Oo=qr.ReactCurrentBatchConfig,Xc=!0;function WS(t,e,n,r){var s=Fe,o=Oo.transition;Oo.transition=null;try{Fe=1,dm(t,e,n,r)}finally{Fe=s,Oo.transition=o}}function HS(t,e,n,r){var s=Fe,o=Oo.transition;Oo.transition=null;try{Fe=4,dm(t,e,n,r)}finally{Fe=s,Oo.transition=o}}function dm(t,e,n,r){if(Xc){var s=Gf(t,e,n,r);if(s===null)tf(t,e,r,Jc,n),I_(t,r);else if(BS(s,t,e,n,r))r.stopPropagation();else if(I_(t,r),e&4&&-1<FS.indexOf(t)){for(;s!==null;){var o=au(s);if(o!==null&&q0(o),o=Gf(t,e,n,r),o===null&&tf(t,e,r,Jc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else tf(t,e,r,null,n)}}var Jc=null;function Gf(t,e,n,r){if(Jc=null,t=lm(r),t=fs(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function Y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bS()){case um:return 1;case U0:return 4;case Qc:case LS:return 16;case W0:return 536870912;default:return 16}default:return 16}}var mi=null,fm=null,Cc=null;function X0(){if(Cc)return Cc;var t,e=fm,n=e.length,r,s="value"in mi?mi.value:mi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[o-r];r++);return Cc=s.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ac(){return!0}function P_(){return!1}function gn(t){function e(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ac:P_,this.isPropagationStopped=P_,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pm=gn(ia),ou=Je({},ia,{view:0,detail:0}),$S=gn(ou),qd,Gd,Xa,zh=Je({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xa&&(Xa&&t.type==="mousemove"?(qd=t.screenX-Xa.screenX,Gd=t.screenY-Xa.screenY):Gd=qd=0,Xa=t),qd)},movementY:function(t){return"movementY"in t?t.movementY:Gd}}),k_=gn(zh),qS=Je({},zh,{dataTransfer:0}),GS=gn(qS),ZS=Je({},ou,{relatedTarget:0}),Zd=gn(ZS),KS=Je({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=gn(KS),YS=Je({},ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XS=gn(YS),JS=Je({},ia,{data:0}),A_=gn(JS),eI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nI[t])?!!e[t]:!1}function mm(){return rI}var iI=Je({},ou,{key:function(t){if(t.key){var e=eI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sI=gn(iI),oI=Je({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R_=gn(oI),aI=Je({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),lI=gn(aI),uI=Je({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),cI=gn(uI),hI=Je({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dI=gn(hI),fI=[9,13,27,32],gm=zr&&"CompositionEvent"in window,pl=null;zr&&"documentMode"in document&&(pl=document.documentMode);var pI=zr&&"TextEvent"in window&&!pl,J0=zr&&(!gm||pl&&8<pl&&11>=pl),b_=" ",L_=!1;function ew(t,e){switch(t){case"keyup":return fI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function mI(t,e){switch(t){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(L_=!0,b_);case"textInput":return t=e.data,t===b_&&L_?null:t;default:return null}}function gI(t,e){if(wo)return t==="compositionend"||!gm&&ew(t,e)?(t=X0(),Cc=fm=mi=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J0&&e.locale!=="ko"?null:e.data;default:return null}}var _I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_I[t.type]:e==="textarea"}function nw(t,e,n,r){N0(r),e=eh(e,"onChange"),0<e.length&&(n=new pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ml=null,Ol=null;function yI(t){fw(t,0)}function jh(t){var e=To(t);if(C0(e))return t}function vI(t,e){if(t==="change")return e}var rw=!1;if(zr){var Kd;if(zr){var Qd="oninput"in document;if(!Qd){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),Qd=typeof O_.oninput=="function"}Kd=Qd}else Kd=!1;rw=Kd&&(!document.documentMode||9<document.documentMode)}function M_(){ml&&(ml.detachEvent("onpropertychange",iw),Ol=ml=null)}function iw(t){if(t.propertyName==="value"&&jh(Ol)){var e=[];nw(e,Ol,t,lm(t)),V0(yI,e)}}function wI(t,e,n){t==="focusin"?(M_(),ml=e,Ol=n,ml.attachEvent("onpropertychange",iw)):t==="focusout"&&M_()}function xI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jh(Ol)}function EI(t,e){if(t==="click")return jh(e)}function TI(t,e){if(t==="input"||t==="change")return jh(e)}function SI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:SI;function Ml(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Af.call(e,s)||!Gn(t[s],e[s]))return!1}return!0}function D_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V_(t,e){var n=D_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D_(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ow(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function II(t){var e=ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(r!==null&&_m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=V_(n,o);var l=V_(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CI=zr&&"documentMode"in document&&11>=document.documentMode,xo=null,Zf=null,gl=null,Kf=!1;function z_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||xo==null||xo!==Gc(r)||(r=xo,"selectionStart"in r&&_m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Ml(gl,r)||(gl=r,r=eh(Zf,"onSelect"),0<r.length&&(e=new pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xo)))}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Yd={},aw={};zr&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Fh(t){if(Yd[t])return Yd[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aw)return Yd[t]=e[n];return t}var lw=Fh("animationend"),uw=Fh("animationiteration"),cw=Fh("animationstart"),hw=Fh("transitionend"),dw=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(t,e){dw.set(t,e),bs(e,[t])}for(var Xd=0;Xd<j_.length;Xd++){var Jd=j_[Xd],PI=Jd.toLowerCase(),kI=Jd[0].toUpperCase()+Jd.slice(1);Bi(PI,"on"+kI)}Bi(lw,"onAnimationEnd");Bi(uw,"onAnimationIteration");Bi(cw,"onAnimationStart");Bi("dblclick","onDoubleClick");Bi("focusin","onFocus");Bi("focusout","onBlur");Bi(hw,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AI=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function F_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PS(r,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;F_(s,h,p),o=d}else for(l=0;l<r.length;l++){if(h=r[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;F_(s,h,p),o=d}}}if(Kc)throw t=Hf,Kc=!1,Hf=null,t}function $e(t,e){var n=e[ep];n===void 0&&(n=e[ep]=new Set);var r=t+"__bubble";n.has(r)||(pw(e,t,2,!1),n.add(r))}function ef(t,e,n){var r=0;e&&(r|=4),pw(n,t,r,e)}var uc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[uc]){t[uc]=!0,x0.forEach(function(n){n!=="selectionchange"&&(AI.has(n)||ef(n,!1,t),ef(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uc]||(e[uc]=!0,ef("selectionchange",!1,e))}}function pw(t,e,n,r){switch(Y0(e)){case 1:var s=WS;break;case 4:s=HS;break;default:s=dm}n=s.bind(null,e,n,t),s=void 0,!Wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tf(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=fs(h),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}h=h.parentNode}}r=r.return}V0(function(){var p=o,y=lm(n),w=[];e:{var x=dw.get(t);if(x!==void 0){var k=pm,z=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":k=sI;break;case"focusin":z="focus",k=Zd;break;case"focusout":z="blur",k=Zd;break;case"beforeblur":case"afterblur":k=Zd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=k_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=GS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=lI;break;case lw:case uw:case cw:k=QS;break;case hw:k=cI;break;case"scroll":k=$S;break;case"wheel":k=dI;break;case"copy":case"cut":case"paste":k=XS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=R_}var N=(e&4)!==0,j=!N&&t==="scroll",R=N?x!==null?x+"Capture":null:x;N=[];for(var T=p,O;T!==null;){O=T;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,R!==null&&(H=Rl(T,R),H!=null&&N.push(Vl(T,H,O)))),j)break;T=T.return}0<N.length&&(x=new k(x,z,null,n,y),w.push({event:x,listeners:N}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",x&&n!==Bf&&(z=n.relatedTarget||n.fromElement)&&(fs(z)||z[jr]))break e;if((k||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,k?(z=n.relatedTarget||n.toElement,k=p,z=z?fs(z):null,z!==null&&(j=Ls(z),z!==j||z.tag!==5&&z.tag!==6)&&(z=null)):(k=null,z=p),k!==z)){if(N=k_,H="onMouseLeave",R="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(N=R_,H="onPointerLeave",R="onPointerEnter",T="pointer"),j=k==null?x:To(k),O=z==null?x:To(z),x=new N(H,T+"leave",k,n,y),x.target=j,x.relatedTarget=O,H=null,fs(y)===p&&(N=new N(R,T+"enter",z,n,y),N.target=O,N.relatedTarget=j,H=N),j=H,k&&z)t:{for(N=k,R=z,T=0,O=N;O;O=fo(O))T++;for(O=0,H=R;H;H=fo(H))O++;for(;0<T-O;)N=fo(N),T--;for(;0<O-T;)R=fo(R),O--;for(;T--;){if(N===R||R!==null&&N===R.alternate)break t;N=fo(N),R=fo(R)}N=null}else N=null;k!==null&&B_(w,x,k,N,!1),z!==null&&j!==null&&B_(w,j,z,N,!0)}}e:{if(x=p?To(p):window,k=x.nodeName&&x.nodeName.toLowerCase(),k==="select"||k==="input"&&x.type==="file")var Q=vI;else if(N_(x))if(rw)Q=TI;else{Q=xI;var J=wI}else(k=x.nodeName)&&k.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(Q=EI);if(Q&&(Q=Q(t,p))){nw(w,Q,n,y);break e}J&&J(t,x,p),t==="focusout"&&(J=x._wrapperState)&&J.controlled&&x.type==="number"&&Df(x,"number",x.value)}switch(J=p?To(p):window,t){case"focusin":(N_(J)||J.contentEditable==="true")&&(xo=J,Zf=p,gl=null);break;case"focusout":gl=Zf=xo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,z_(w,n,y);break;case"selectionchange":if(CI)break;case"keydown":case"keyup":z_(w,n,y)}var b;if(gm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else wo?ew(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(J0&&n.locale!=="ko"&&(wo||C!=="onCompositionStart"?C==="onCompositionEnd"&&wo&&(b=X0()):(mi=y,fm="value"in mi?mi.value:mi.textContent,wo=!0)),J=eh(p,C),0<J.length&&(C=new A_(C,t,null,n,y),w.push({event:C,listeners:J}),b?C.data=b:(b=tw(n),b!==null&&(C.data=b)))),(b=pI?mI(t,n):gI(t,n))&&(p=eh(p,"onBeforeInput"),0<p.length&&(y=new A_("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:p}),y.data=b))}fw(w,e)})}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rl(t,n),o!=null&&r.unshift(Vl(t,o,s)),o=Rl(t,e),o!=null&&r.push(Vl(t,o,s))),t=t.return}return r}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B_(t,e,n,r,s){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===r)break;h.tag===5&&p!==null&&(h=p,s?(d=Rl(n,o),d!=null&&l.unshift(Vl(n,d,h))):s||(d=Rl(n,o),d!=null&&l.push(Vl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var RI=/\r\n?/g,bI=/\u0000|\uFFFD/g;function U_(t){return(typeof t=="string"?t:""+t).replace(RI,`
`).replace(bI,"")}function cc(t,e,n){if(e=U_(e),U_(t)!==e&&n)throw Error(Y(425))}function th(){}var Qf=null,Yf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,NI=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(t){return W_.resolve(null).then(t).catch(OI)}:Jf;function OI(t){setTimeout(function(){throw t})}function nf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nl(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function H_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),ar="__reactFiber$"+sa,zl="__reactProps$"+sa,jr="__reactContainer$"+sa,ep="__reactEvents$"+sa,MI="__reactListeners$"+sa,DI="__reactHandles$"+sa;function fs(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=H_(t);t!==null;){if(n=t[ar])return n;t=H_(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[ar]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Bh(t){return t[zl]||null}var tp=[],So=-1;function Ui(t){return{current:t}}function Ze(t){0>So||(t.current=tp[So],tp[So]=null,So--)}function He(t,e){So++,tp[So]=t.current,t.current=e}var Oi={},jt=Ui(Oi),nn=Ui(!1),xs=Oi;function Wo(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function nh(){Ze(nn),Ze(jt)}function $_(t,e,n){if(jt.current!==Oi)throw Error(Y(168));He(jt,e),He(nn,n)}function mw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,wS(t)||"Unknown",s));return Je({},n,r)}function rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,xs=jt.current,He(jt,t),He(nn,nn.current),!0}function q_(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=mw(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,Ze(nn),Ze(jt),He(jt,t)):Ze(nn),He(nn,n)}var br=null,Uh=!1,rf=!1;function gw(t){br===null?br=[t]:br.push(t)}function VI(t){Uh=!0,gw(t)}function Wi(){if(!rf&&br!==null){rf=!0;var t=0,e=Fe;try{var n=br;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Uh=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),B0(um,Wi),s}finally{Fe=e,rf=!1}}return null}var Io=[],Co=0,ih=null,sh=0,In=[],Cn=0,Es=null,Lr=1,Nr="";function us(t,e){Io[Co++]=sh,Io[Co++]=ih,ih=t,sh=e}function _w(t,e,n){In[Cn++]=Lr,In[Cn++]=Nr,In[Cn++]=Es,Es=t;var r=Lr;t=Nr;var s=32-Hn(r)-1;r&=~(1<<s),n+=1;var o=32-Hn(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Lr=1<<32-Hn(e)+s|n<<s|r,Nr=o+t}else Lr=1<<o|n<<s|r,Nr=t}function ym(t){t.return!==null&&(us(t,1),_w(t,1,0))}function vm(t){for(;t===ih;)ih=Io[--Co],Io[Co]=null,sh=Io[--Co],Io[Co]=null;for(;t===Es;)Es=In[--Cn],In[Cn]=null,Nr=In[--Cn],In[Cn]=null,Lr=In[--Cn],In[Cn]=null}var fn=null,hn=null,Qe=!1,Bn=null;function yw(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,hn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Lr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,hn=null,!0):!1;default:return!1}}function np(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rp(t){if(Qe){var e=hn;if(e){var n=e;if(!G_(t,e)){if(np(t))throw Error(Y(418));e=Ei(n.nextSibling);var r=fn;e&&G_(t,e)?yw(r,n):(t.flags=t.flags&-4097|2,Qe=!1,fn=t)}}else{if(np(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Qe=!1,fn=t}}}function Z_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function hc(t){if(t!==fn)return!1;if(!Qe)return Z_(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=hn)){if(np(t))throw vw(),Error(Y(418));for(;e;)yw(t,e),e=Ei(e.nextSibling)}if(Z_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=fn?Ei(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=hn;t;)t=Ei(t.nextSibling)}function Ho(){hn=fn=null,Qe=!1}function wm(t){Bn===null?Bn=[t]:Bn.push(t)}var zI=qr.ReactCurrentBatchConfig;function Ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function dc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K_(t){var e=t._init;return e(t._payload)}function ww(t){function e(R,T){if(t){var O=R.deletions;O===null?(R.deletions=[T],R.flags|=16):O.push(T)}}function n(R,T){if(!t)return null;for(;T!==null;)e(R,T),T=T.sibling;return null}function r(R,T){for(R=new Map;T!==null;)T.key!==null?R.set(T.key,T):R.set(T.index,T),T=T.sibling;return R}function s(R,T){return R=Ci(R,T),R.index=0,R.sibling=null,R}function o(R,T,O){return R.index=O,t?(O=R.alternate,O!==null?(O=O.index,O<T?(R.flags|=2,T):O):(R.flags|=2,T)):(R.flags|=1048576,T)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function h(R,T,O,H){return T===null||T.tag!==6?(T=hf(O,R.mode,H),T.return=R,T):(T=s(T,O),T.return=R,T)}function d(R,T,O,H){var Q=O.type;return Q===vo?y(R,T,O.props.children,H,O.key):T!==null&&(T.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ai&&K_(Q)===T.type)?(H=s(T,O.props),H.ref=Ja(R,T,O),H.return=R,H):(H=Oc(O.type,O.key,O.props,null,R.mode,H),H.ref=Ja(R,T,O),H.return=R,H)}function p(R,T,O,H){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=df(O,R.mode,H),T.return=R,T):(T=s(T,O.children||[]),T.return=R,T)}function y(R,T,O,H,Q){return T===null||T.tag!==7?(T=ys(O,R.mode,H,Q),T.return=R,T):(T=s(T,O),T.return=R,T)}function w(R,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return T=hf(""+T,R.mode,O),T.return=R,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case tc:return O=Oc(T.type,T.key,T.props,null,R.mode,O),O.ref=Ja(R,null,T),O.return=R,O;case yo:return T=df(T,R.mode,O),T.return=R,T;case ai:var H=T._init;return w(R,H(T._payload),O)}if(rl(T)||Za(T))return T=ys(T,R.mode,O,null),T.return=R,T;dc(R,T)}return null}function x(R,T,O,H){var Q=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Q!==null?null:h(R,T,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case tc:return O.key===Q?d(R,T,O,H):null;case yo:return O.key===Q?p(R,T,O,H):null;case ai:return Q=O._init,x(R,T,Q(O._payload),H)}if(rl(O)||Za(O))return Q!==null?null:y(R,T,O,H,null);dc(R,O)}return null}function k(R,T,O,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number")return R=R.get(O)||null,h(T,R,""+H,Q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case tc:return R=R.get(H.key===null?O:H.key)||null,d(T,R,H,Q);case yo:return R=R.get(H.key===null?O:H.key)||null,p(T,R,H,Q);case ai:var J=H._init;return k(R,T,O,J(H._payload),Q)}if(rl(H)||Za(H))return R=R.get(O)||null,y(T,R,H,Q,null);dc(T,H)}return null}function z(R,T,O,H){for(var Q=null,J=null,b=T,C=T=0,I=null;b!==null&&C<O.length;C++){b.index>C?(I=b,b=null):I=b.sibling;var M=x(R,b,O[C],H);if(M===null){b===null&&(b=I);break}t&&b&&M.alternate===null&&e(R,b),T=o(M,T,C),J===null?Q=M:J.sibling=M,J=M,b=I}if(C===O.length)return n(R,b),Qe&&us(R,C),Q;if(b===null){for(;C<O.length;C++)b=w(R,O[C],H),b!==null&&(T=o(b,T,C),J===null?Q=b:J.sibling=b,J=b);return Qe&&us(R,C),Q}for(b=r(R,b);C<O.length;C++)I=k(b,R,C,O[C],H),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?C:I.key),T=o(I,T,C),J===null?Q=I:J.sibling=I,J=I);return t&&b.forEach(function(V){return e(R,V)}),Qe&&us(R,C),Q}function N(R,T,O,H){var Q=Za(O);if(typeof Q!="function")throw Error(Y(150));if(O=Q.call(O),O==null)throw Error(Y(151));for(var J=Q=null,b=T,C=T=0,I=null,M=O.next();b!==null&&!M.done;C++,M=O.next()){b.index>C?(I=b,b=null):I=b.sibling;var V=x(R,b,M.value,H);if(V===null){b===null&&(b=I);break}t&&b&&V.alternate===null&&e(R,b),T=o(V,T,C),J===null?Q=V:J.sibling=V,J=V,b=I}if(M.done)return n(R,b),Qe&&us(R,C),Q;if(b===null){for(;!M.done;C++,M=O.next())M=w(R,M.value,H),M!==null&&(T=o(M,T,C),J===null?Q=M:J.sibling=M,J=M);return Qe&&us(R,C),Q}for(b=r(R,b);!M.done;C++,M=O.next())M=k(b,R,C,M.value,H),M!==null&&(t&&M.alternate!==null&&b.delete(M.key===null?C:M.key),T=o(M,T,C),J===null?Q=M:J.sibling=M,J=M);return t&&b.forEach(function(P){return e(R,P)}),Qe&&us(R,C),Q}function j(R,T,O,H){if(typeof O=="object"&&O!==null&&O.type===vo&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case tc:e:{for(var Q=O.key,J=T;J!==null;){if(J.key===Q){if(Q=O.type,Q===vo){if(J.tag===7){n(R,J.sibling),T=s(J,O.props.children),T.return=R,R=T;break e}}else if(J.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ai&&K_(Q)===J.type){n(R,J.sibling),T=s(J,O.props),T.ref=Ja(R,J,O),T.return=R,R=T;break e}n(R,J);break}else e(R,J);J=J.sibling}O.type===vo?(T=ys(O.props.children,R.mode,H,O.key),T.return=R,R=T):(H=Oc(O.type,O.key,O.props,null,R.mode,H),H.ref=Ja(R,T,O),H.return=R,R=H)}return l(R);case yo:e:{for(J=O.key;T!==null;){if(T.key===J)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){n(R,T.sibling),T=s(T,O.children||[]),T.return=R,R=T;break e}else{n(R,T);break}else e(R,T);T=T.sibling}T=df(O,R.mode,H),T.return=R,R=T}return l(R);case ai:return J=O._init,j(R,T,J(O._payload),H)}if(rl(O))return z(R,T,O,H);if(Za(O))return N(R,T,O,H);dc(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,T!==null&&T.tag===6?(n(R,T.sibling),T=s(T,O),T.return=R,R=T):(n(R,T),T=hf(O,R.mode,H),T.return=R,R=T),l(R)):n(R,T)}return j}var $o=ww(!0),xw=ww(!1),oh=Ui(null),ah=null,Po=null,xm=null;function Em(){xm=Po=ah=null}function Tm(t){var e=oh.current;Ze(oh),t._currentValue=e}function ip(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){ah=t,xm=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(xm!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(ah===null)throw Error(Y(308));Po=t,ah.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var ps=null;function Sm(t){ps===null?ps=[t]:ps.push(t)}function Ew(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fr(t,n)}return s=r.interleaved,s===null?(e.next=e,Sm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fr(t,n)}function kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cm(t,n)}}function Q_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lh(t,e,n,r){var s=t.updateQueue;li=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,y=p=d=null,h=o;do{var x=h.lane,k=h.eventTime;if((r&x)===x){y!==null&&(y=y.next={eventTime:k,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var z=t,N=h;switch(x=e,k=n,N.tag){case 1:if(z=N.payload,typeof z=="function"){w=z.call(k,w,x);break e}w=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=N.payload,x=typeof z=="function"?z.call(k,w,x):z,x==null)break e;w=Je({},w,x);break e;case 2:li=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[h]:x.push(h))}else k={eventTime:k,lane:x,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=k,d=w):y=y.next=k,l|=x;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;x=h,h=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(y===null&&(d=w),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ss|=l,t.lanes=l,t.memoizedState=w}}function Y_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var lu={},ur=Ui(lu),jl=Ui(lu),Fl=Ui(lu);function ms(t){if(t===lu)throw Error(Y(174));return t}function Cm(t,e){switch(He(Fl,e),He(jl,t),He(ur,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zf(e,t)}Ze(ur),He(ur,e)}function qo(){Ze(ur),Ze(jl),Ze(Fl)}function Sw(t){ms(Fl.current);var e=ms(ur.current),n=zf(e,t.type);e!==n&&(He(jl,t),He(ur,n))}function Pm(t){jl.current===t&&(Ze(ur),Ze(jl))}var Ye=Ui(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sf=[];function km(){for(var t=0;t<sf.length;t++)sf[t]._workInProgressVersionPrimary=null;sf.length=0}var Ac=qr.ReactCurrentDispatcher,of=qr.ReactCurrentBatchConfig,Ts=0,Xe=null,pt=null,Tt=null,ch=!1,_l=!1,Bl=0,jI=0;function Nt(){throw Error(Y(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function Rm(t,e,n,r,s,o){if(Ts=o,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ac.current=t===null||t.memoizedState===null?WI:HI,t=n(r,s),_l){o=0;do{if(_l=!1,Bl=0,25<=o)throw Error(Y(301));o+=1,Tt=pt=null,e.updateQueue=null,Ac.current=$I,t=n(r,s)}while(_l)}if(Ac.current=hh,e=pt!==null&&pt.next!==null,Ts=0,Tt=pt=Xe=null,ch=!1,e)throw Error(Y(300));return t}function bm(){var t=Bl!==0;return Bl=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Ln(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Tt===null?Xe.memoizedState:Tt.next;if(e!==null)Tt=e,pt=t;else{if(t===null)throw Error(Y(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Ul(t,e){return typeof e=="function"?e(t):e}function af(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var h=l=null,d=null,p=o;do{var y=p.lane;if((Ts&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var w={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=w,l=r):d=d.next=w,Xe.lanes|=y,Ss|=y}p=p.next}while(p!==null&&p!==o);d===null?l=r:d.next=h,Gn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Xe.lanes|=o,Ss|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Gn(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Iw(){}function Cw(t,e){var n=Xe,r=Ln(),s=e(),o=!Gn(r.memoizedState,s);if(o&&(r.memoizedState=s,tn=!0),r=r.queue,Lm(Aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,kw.bind(null,n,r,s,e),void 0,null),St===null)throw Error(Y(349));Ts&30||Pw(n,e,s)}return s}function Pw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,r){e.value=n,e.getSnapshot=r,Rw(e)&&bw(t)}function Aw(t,e,n){return n(function(){Rw(e)&&bw(t)})}function Rw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function bw(t){var e=Fr(t,1);e!==null&&$n(e,t,1,-1)}function X_(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=UI.bind(null,Xe,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lw(){return Ln().memoizedState}function Rc(t,e,n,r){var s=sr();Xe.flags|=t,s.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function Wh(t,e,n,r){var s=Ln();r=r===void 0?null:r;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,r!==null&&Am(r,l.deps)){s.memoizedState=Wl(e,n,o,r);return}}Xe.flags|=t,s.memoizedState=Wl(1|e,n,o,r)}function J_(t,e){return Rc(8390656,8,t,e)}function Lm(t,e){return Wh(2048,8,t,e)}function Nw(t,e){return Wh(4,2,t,e)}function Ow(t,e){return Wh(4,4,t,e)}function Mw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dw(t,e,n){return n=n!=null?n.concat([t]):null,Wh(4,4,Mw.bind(null,e,t),n)}function Nm(){}function Vw(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zw(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return Ts&21?(Gn(n,e)||(n=H0(),Xe.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function FI(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=of.transition;of.transition={};try{t(!1),e()}finally{Fe=n,of.transition=r}}function Fw(){return Ln().memoizedState}function BI(t,e,n){var r=Ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))Uw(e,n);else if(n=Ew(t,e,n,r),n!==null){var s=$t();$n(n,t,r,s),Ww(n,e,r)}}function UI(t,e,n){var r=Ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))Uw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Gn(h,l)){var d=e.interleaved;d===null?(s.next=s,Sm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Ew(t,e,s,r),n!==null&&(s=$t(),$n(n,t,r,s),Ww(n,e,r))}}function Bw(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Uw(t,e){_l=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ww(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cm(t,n)}}var hh={readContext:bn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},WI={readContext:bn,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:J_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4194308,4,Mw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rc(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BI.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:X_,useDebugValue:Nm,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=X_(!1),e=t[0];return t=FI.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,s=sr();if(Qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),St===null)throw Error(Y(349));Ts&30||Pw(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,J_(Aw.bind(null,r,o,t),[t]),r.flags|=2048,Wl(9,kw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sr(),e=St.identifierPrefix;if(Qe){var n=Nr,r=Lr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HI={readContext:bn,useCallback:Vw,useContext:bn,useEffect:Lm,useImperativeHandle:Dw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:zw,useReducer:af,useRef:Lw,useState:function(){return af(Ul)},useDebugValue:Nm,useDeferredValue:function(t){var e=Ln();return jw(e,pt.memoizedState,t)},useTransition:function(){var t=af(Ul)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Cw,useId:Fw,unstable_isNewReconciler:!1},$I={readContext:bn,useCallback:Vw,useContext:bn,useEffect:Lm,useImperativeHandle:Dw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:zw,useReducer:lf,useRef:Lw,useState:function(){return lf(Ul)},useDebugValue:Nm,useDeferredValue:function(t){var e=Ln();return pt===null?e.memoizedState=t:jw(e,pt.memoizedState,t)},useTransition:function(){var t=lf(Ul)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Cw,useId:Fw,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hh={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Ii(t),o=Dr(r,s);o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,s),e!==null&&($n(e,t,s,r),kc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Ii(t),o=Dr(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,s),e!==null&&($n(e,t,s,r),kc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Ii(t),s=Dr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ti(t,s,r),e!==null&&($n(e,t,r,n),kc(e,t,r))}};function ey(t,e,n,r,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,o):!0}function Hw(t,e,n){var r=!1,s=Oi,o=e.contextType;return typeof o=="object"&&o!==null?o=bn(o):(s=rn(e)?xs:jt.current,r=e.contextTypes,o=(r=r!=null)?Wo(t,s):Oi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ty(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hh.enqueueReplaceState(e,e.state,null)}function op(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Im(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=bn(o):(o=rn(e)?xs:jt.current,s.context=Wo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(sp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hh.enqueueReplaceState(s,s.state,null),lh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",r=e;do n+=vS(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function uf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ap(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qI=typeof WeakMap=="function"?WeakMap:Map;function $w(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fh||(fh=!0,_p=r),ap(t,e)},n}function qw(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ap(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ap(t,e),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ny(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=oC.bind(null,t,e,n),e.then(t,t))}function ry(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var GI=qr.ReactCurrentOwner,tn=!1;function Ht(t,e,n,r){e.child=t===null?xw(e,null,n,r):$o(e,t.child,n,r)}function sy(t,e,n,r,s){n=n.render;var o=e.ref;return Mo(e,s),r=Rm(t,e,n,r,o,s),n=bm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(Qe&&n&&ym(e),e.flags|=1,Ht(t,e,r,s),e.child)}function oy(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Bm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Gw(t,e,o,r,s)):(t=Oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(l,r)&&t.ref===e.ref)return Br(t,e,s)}return e.flags|=1,t=Ci(o,r),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ml(o,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Br(t,e,s)}return lp(t,e,n,r,s)}function Zw(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ao,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Ao,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,He(Ao,ln),ln|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,He(Ao,ln),ln|=r;return Ht(t,e,s,n),e.child}function Kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lp(t,e,n,r,s){var o=rn(n)?xs:jt.current;return o=Wo(e,o),Mo(e,s),n=Rm(t,e,n,r,o,s),r=bm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(Qe&&r&&ym(e),e.flags|=1,Ht(t,e,n,s),e.child)}function ay(t,e,n,r,s){if(rn(n)){var o=!0;rh(e)}else o=!1;if(Mo(e,s),e.stateNode===null)bc(t,e),Hw(e,n,r),op(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=bn(p):(p=rn(n)?xs:jt.current,p=Wo(e,p));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||d!==p)&&ty(e,l,r,p),li=!1;var x=e.memoizedState;l.state=x,lh(e,r,l,s),d=e.memoizedState,h!==r||x!==d||nn.current||li?(typeof y=="function"&&(sp(e,n,y,r),d=e.memoizedState),(h=li||ey(e,n,h,r,x,d,p))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Tw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:jn(e.type,h),l.props=p,w=e.pendingProps,x=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=bn(d):(d=rn(n)?xs:jt.current,d=Wo(e,d));var k=n.getDerivedStateFromProps;(y=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||x!==d)&&ty(e,l,r,d),li=!1,x=e.memoizedState,l.state=x,lh(e,r,l,s);var z=e.memoizedState;h!==w||x!==z||nn.current||li?(typeof k=="function"&&(sp(e,n,k,r),z=e.memoizedState),(p=li||ey(e,n,p,r,x,z,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,z,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,z,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=z),l.props=r,l.state=z,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return up(t,e,n,r,o,s)}function up(t,e,n,r,s,o){Kw(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&q_(e,n,!1),Br(t,e,o);r=e.stateNode,GI.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,h,o)):Ht(t,e,h,o),e.memoizedState=r.state,s&&q_(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?$_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$_(t,e.context,!1),Cm(t,e.containerInfo)}function ly(t,e,n,r,s){return Ho(),wm(s),e.flags|=256,Ht(t,e,n,r),e.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var r=e.pendingProps,s=Ye.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Ye,s&1),t===null)return rp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Gh(l,r,0,null),t=ys(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hp(n),e.memoizedState=cp,t):Om(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return ZI(t,e,l,r,h,s,n);if(o){o=r.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ci(s,d),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Ci(h,o):(o=ys(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?hp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=cp,r}return o=t.child,t=o.sibling,r=Ci(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Om(t,e){return e=Gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fc(t,e,n,r){return r!==null&&wm(r),$o(e,t.child,null,n),t=Om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZI(t,e,n,r,s,o,l){if(n)return e.flags&256?(e.flags&=-257,r=uf(Error(Y(422))),fc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Gh({mode:"visible",children:r.children},s,0,null),o=ys(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&$o(e,t.child,null,l),e.child.memoizedState=hp(l),e.memoizedState=cp,o);if(!(e.mode&1))return fc(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(Y(419)),r=uf(o,r,void 0),fc(t,e,l,r)}if(h=(l&t.childLanes)!==0,tn||h){if(r=St,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Fr(t,s),$n(r,t,s,-1))}return Fm(),r=uf(Error(Y(421))),fc(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aC.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,hn=Ei(s.nextSibling),fn=e,Qe=!0,Bn=null,t!==null&&(In[Cn++]=Lr,In[Cn++]=Nr,In[Cn++]=Es,Lr=t.id,Nr=t.overflow,Es=e),e=Om(e,r.children),e.flags|=4096,e)}function uy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ip(t.return,e,n)}function cf(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Xw(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Ht(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uy(t,n,e);else if(t.tag===19)uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cf(e,!0,n,null,o);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KI(t,e,n){switch(e.tag){case 3:Qw(e),Ho();break;case 5:Sw(e);break;case 1:rn(e.type)&&rh(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(oh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(He(Ye,Ye.current&1),t=Br(t,e,n),t!==null?t.sibling:null);He(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return Br(t,e,n)}var Jw,dp,ex,tx;Jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};ex=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ms(ur.current);var o=null;switch(n){case"input":s=Of(t,s),r=Of(t,r),o=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),o=[];break;case"textarea":s=Vf(t,s),r=Vf(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=th)}jf(n,r);var l;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(kl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var d=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(kl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&$e("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};tx=function(t,e,n,r){n!==r&&(e.flags|=4)};function el(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QI(t,e,n){var r=e.pendingProps;switch(vm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&nh(),Ot(e),null;case 3:return r=e.stateNode,qo(),Ze(nn),Ze(jt),km(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(wp(Bn),Bn=null))),dp(t,e),Ot(e),null;case 5:Pm(e);var s=ms(Fl.current);if(n=e.type,t!==null&&e.stateNode!=null)ex(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ot(e),null}if(t=ms(ur.current),hc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ar]=e,r[zl]=o,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(s=0;s<sl.length;s++)$e(sl[s],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":y_(r,o),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},$e("invalid",r);break;case"textarea":w_(r,o),$e("invalid",r)}jf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&cc(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&cc(r.textContent,h,t),s=["children",""+h]):kl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&$e("scroll",r)}switch(n){case"input":nc(r),v_(r,o,!0);break;case"textarea":nc(r),x_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=th)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ar]=e,t[zl]=r,Jw(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ff(n,r),n){case"dialog":$e("cancel",t),$e("close",t),s=r;break;case"iframe":case"object":case"embed":$e("load",t),s=r;break;case"video":case"audio":for(s=0;s<sl.length;s++)$e(sl[s],t);s=r;break;case"source":$e("error",t),s=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),s=r;break;case"details":$e("toggle",t),s=r;break;case"input":y_(t,r),s=Of(t,r),$e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),$e("invalid",t);break;case"textarea":w_(t,r),s=Vf(t,r),$e("invalid",t);break;default:s=r}jf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?L0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&R0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Al(t,d):typeof d=="number"&&Al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&$e("scroll",t):d!=null&&im(t,o,d,l))}switch(n){case"input":nc(t),v_(t,r,!1);break;case"textarea":nc(t),x_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ni(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?bo(t,!!r.multiple,o,!1):r.defaultValue!=null&&bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)tx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ms(Fl.current),ms(ur.current),hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(o=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:cc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Ot(e),null;case 13:if(Ze(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&hn!==null&&e.mode&1&&!(e.flags&128))vw(),Ho(),e.flags|=98560,o=!1;else if(o=hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[ar]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else Bn!==null&&(wp(Bn),Bn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?mt===0&&(mt=3):Fm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return qo(),dp(t,e),t===null&&Dl(e.stateNode.containerInfo),Ot(e),null;case 10:return Tm(e.type._context),Ot(e),null;case 17:return rn(e.type)&&nh(),Ot(e),null;case 19:if(Ze(Ye),o=e.memoizedState,o===null)return Ot(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)el(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=uh(t),l!==null){for(e.flags|=128,el(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>Zo&&(e.flags|=128,r=!0,el(o,!1),e.lanes=4194304)}else{if(!r)if(t=uh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),el(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Qe)return Ot(e),null}else 2*st()-o.renderingStartTime>Zo&&n!==1073741824&&(e.flags|=128,r=!0,el(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Ye.current,He(Ye,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return jm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function YI(t,e){switch(vm(e),e.tag){case 1:return rn(e.type)&&nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),Ze(nn),Ze(jt),km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pm(e),null;case 13:if(Ze(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(Ye),null;case 4:return qo(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return jm(),null;case 24:return null;default:return null}}var pc=!1,Vt=!1,XI=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function fp(t,e,n){try{n()}catch(r){nt(t,e,r)}}var cy=!1;function JI(t,e){if(Qf=Xc,t=ow(),_m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,y=0,w=t,x=null;t:for(;;){for(var k;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||r!==0&&w.nodeType!==3||(d=l+r),w.nodeType===3&&(l+=w.nodeValue.length),(k=w.firstChild)!==null;)x=w,w=k;for(;;){if(w===t)break t;if(x===n&&++p===s&&(h=l),x===o&&++y===r&&(d=l),(k=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=k}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yf={focusedElem:t,selectionRange:n},Xc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var N=z.memoizedProps,j=z.memoizedState,R=e.stateNode,T=R.getSnapshotBeforeUpdate(e.elementType===e.type?N:jn(e.type,N),j);R.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(H){nt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return z=cy,cy=!1,z}function yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&fp(e,n,o)}s=s.next}while(s!==r)}}function $h(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nx(t){var e=t.alternate;e!==null&&(t.alternate=null,nx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[zl],delete e[ep],delete e[MI],delete e[DI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rx(t){return t.tag===5||t.tag===3||t.tag===4}function hy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=th));else if(r!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}function gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gp(t,e,n),t=t.sibling;t!==null;)gp(t,e,n),t=t.sibling}var Ct=null,Fn=!1;function si(t,e,n){for(n=n.child;n!==null;)ix(t,e,n),n=n.sibling}function ix(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Vh,n)}catch{}switch(n.tag){case 5:Vt||ko(n,e);case 6:var r=Ct,s=Fn;Ct=null,si(t,e,n),Ct=r,Fn=s,Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?nf(t.parentNode,n):t.nodeType===1&&nf(t,n),Nl(t)):nf(Ct,n.stateNode));break;case 4:r=Ct,s=Fn,Ct=n.stateNode.containerInfo,Fn=!0,si(t,e,n),Ct=r,Fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&fp(n,e,l),s=s.next}while(s!==r)}si(t,e,n);break;case 1:if(!Vt&&(ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){nt(n,e,h)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,si(t,e,n),Vt=r):si(t,e,n);break;default:si(t,e,n)}}function dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XI),e.forEach(function(r){var s=lC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Ct=h.stateNode,Fn=!1;break e;case 3:Ct=h.stateNode.containerInfo,Fn=!0;break e;case 4:Ct=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Ct===null)throw Error(Y(160));ix(o,l,s),Ct=null,Fn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){nt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sx(e,t),e=e.sibling}function sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),ir(t),r&4){try{yl(3,t,t.return),$h(3,t)}catch(N){nt(t,t.return,N)}try{yl(5,t,t.return)}catch(N){nt(t,t.return,N)}}break;case 1:zn(e,t),ir(t),r&512&&n!==null&&ko(n,n.return);break;case 5:if(zn(e,t),ir(t),r&512&&n!==null&&ko(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(N){nt(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&P0(s,o),Ff(h,l);var p=Ff(h,o);for(l=0;l<d.length;l+=2){var y=d[l],w=d[l+1];y==="style"?L0(s,w):y==="dangerouslySetInnerHTML"?R0(s,w):y==="children"?Al(s,w):im(s,y,w,p)}switch(h){case"input":Mf(s,o);break;case"textarea":k0(s,o);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?bo(s,!!o.multiple,k,!1):x!==!!o.multiple&&(o.defaultValue!=null?bo(s,!!o.multiple,o.defaultValue,!0):bo(s,!!o.multiple,o.multiple?[]:"",!1))}s[zl]=o}catch(N){nt(t,t.return,N)}}break;case 6:if(zn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(N){nt(t,t.return,N)}}break;case 3:if(zn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(N){nt(t,t.return,N)}break;case 4:zn(e,t),ir(t);break;case 13:zn(e,t),ir(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Vm=st())),r&4&&dy(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(p=Vt)||y,zn(e,t),Vt=p):zn(e,t),ir(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(oe=t,y=t.child;y!==null;){for(w=oe=y;oe!==null;){switch(x=oe,k=x.child,x.tag){case 0:case 11:case 14:case 15:yl(4,x,x.return);break;case 1:ko(x,x.return);var z=x.stateNode;if(typeof z.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,z.props=e.memoizedProps,z.state=e.memoizedState,z.componentWillUnmount()}catch(N){nt(r,n,N)}}break;case 5:ko(x,x.return);break;case 22:if(x.memoizedState!==null){py(w);continue}}k!==null?(k.return=x,oe=k):py(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{s=w.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=b0("display",l))}catch(N){nt(t,t.return,N)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(N){nt(t,t.return,N)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:zn(e,t),ir(t),r&4&&dy(t);break;case 21:break;default:zn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rx(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Al(s,""),r.flags&=-33);var o=hy(t);gp(t,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,h=hy(t);mp(t,h,l);break;default:throw Error(Y(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eC(t,e,n){oe=t,ox(t)}function ox(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||pc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Vt;h=pc;var p=Vt;if(pc=l,(Vt=d)&&!p)for(oe=s;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?my(s):d!==null?(d.return=l,oe=d):my(s);for(;o!==null;)oe=o,ox(o),o=o.sibling;oe=s,pc=h,Vt=p}fy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):fy(t)}}function fy(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||$h(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Y_(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Y_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&Nl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Vt||e.flags&512&&pp(e)}catch(x){nt(e,e.return,x)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function py(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function my(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$h(4,e)}catch(d){nt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){nt(e,s,d)}}var o=e.return;try{pp(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{pp(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var tC=Math.ceil,dh=qr.ReactCurrentDispatcher,Mm=qr.ReactCurrentOwner,Rn=qr.ReactCurrentBatchConfig,Le=0,St=null,ht=null,At=0,ln=0,Ao=Ui(0),mt=0,Hl=null,Ss=0,qh=0,Dm=0,vl=null,Jt=null,Vm=0,Zo=1/0,Rr=null,fh=!1,_p=null,Si=null,mc=!1,gi=null,ph=0,wl=0,yp=null,Lc=-1,Nc=0;function $t(){return Le&6?st():Lc!==-1?Lc:Lc=st()}function Ii(t){return t.mode&1?Le&2&&At!==0?At&-At:zI.transition!==null?(Nc===0&&(Nc=H0()),Nc):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Y0(t.type)),t):1}function $n(t,e,n,r){if(50<wl)throw wl=0,yp=null,Error(Y(185));su(t,n,r),(!(Le&2)||t!==St)&&(t===St&&(!(Le&2)&&(qh|=n),mt===4&&ci(t,At)),sn(t,r),n===1&&Le===0&&!(e.mode&1)&&(Zo=st()+500,Uh&&Wi()))}function sn(t,e){var n=t.callbackNode;zS(t,e);var r=Yc(t,t===St?At:0);if(r===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?VI(gy.bind(null,t)):gw(gy.bind(null,t)),NI(function(){!(Le&6)&&Wi()}),n=null;else{switch($0(r)){case 1:n=um;break;case 4:n=U0;break;case 16:n=Qc;break;case 536870912:n=W0;break;default:n=Qc}n=px(n,ax.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ax(t,e){if(Lc=-1,Nc=0,Le&6)throw Error(Y(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var r=Yc(t,t===St?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mh(t,r);else{e=r;var s=Le;Le|=2;var o=ux();(St!==t||At!==e)&&(Rr=null,Zo=st()+500,_s(t,e));do try{iC();break}catch(h){lx(t,h)}while(!0);Em(),dh.current=o,Le=s,ht!==null?e=0:(St=null,At=0,e=mt)}if(e!==0){if(e===2&&(s=$f(t),s!==0&&(r=s,e=vp(t,s))),e===1)throw n=Hl,_s(t,0),ci(t,r),sn(t,st()),n;if(e===6)ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!nC(s)&&(e=mh(t,r),e===2&&(o=$f(t),o!==0&&(r=o,e=vp(t,o))),e===1))throw n=Hl,_s(t,0),ci(t,r),sn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:cs(t,Jt,Rr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=Vm+500-st(),10<e)){if(Yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jf(cs.bind(null,t,Jt,Rr),e);break}cs(t,Jt,Rr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-Hn(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tC(r/1960))-r,10<r){t.timeoutHandle=Jf(cs.bind(null,t,Jt,Rr),r);break}cs(t,Jt,Rr);break;case 5:cs(t,Jt,Rr);break;default:throw Error(Y(329))}}}return sn(t,st()),t.callbackNode===n?ax.bind(null,t):null}function vp(t,e){var n=vl;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=mh(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&wp(e)),t}function wp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function nC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Gn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~Dm,e&=~qh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function gy(t){if(Le&6)throw Error(Y(327));Do();var e=Yc(t,0);if(!(e&1))return sn(t,st()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var r=$f(t);r!==0&&(e=r,n=vp(t,r))}if(n===1)throw n=Hl,_s(t,0),ci(t,e),sn(t,st()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Jt,Rr),sn(t,st()),null}function zm(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Zo=st()+500,Uh&&Wi())}}function Is(t){gi!==null&&gi.tag===0&&!(Le&6)&&Do();var e=Le;Le|=1;var n=Rn.transition,r=Fe;try{if(Rn.transition=null,Fe=1,t)return t()}finally{Fe=r,Rn.transition=n,Le=e,!(Le&6)&&Wi()}}function jm(){ln=Ao.current,Ze(Ao)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LI(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(vm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nh();break;case 3:qo(),Ze(nn),Ze(jt),km();break;case 5:Pm(r);break;case 4:qo();break;case 13:Ze(Ye);break;case 19:Ze(Ye);break;case 10:Tm(r.type._context);break;case 22:case 23:jm()}n=n.return}if(St=t,ht=t=Ci(t.current,null),At=ln=e,mt=0,Hl=null,Dm=qh=Ss=0,Jt=vl=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}ps=null}return t}function lx(t,e){do{var n=ht;try{if(Em(),Ac.current=hh,ch){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ch=!1}if(Ts=0,Tt=pt=Xe=null,_l=!1,Bl=0,Mm.current=null,n===null||n.return===null){mt=1,Hl=e,ht=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=h,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var k=ry(l);if(k!==null){k.flags&=-257,iy(k,l,h,o,e),k.mode&1&&ny(o,p,e),e=k,d=p;var z=e.updateQueue;if(z===null){var N=new Set;N.add(d),e.updateQueue=N}else z.add(d);break e}else{if(!(e&1)){ny(o,p,e),Fm();break e}d=Error(Y(426))}}else if(Qe&&h.mode&1){var j=ry(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),iy(j,l,h,o,e),wm(Go(d,h));break e}}o=d=Go(d,h),mt!==4&&(mt=2),vl===null?vl=[o]:vl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=$w(o,d,e);Q_(o,R);break e;case 1:h=d;var T=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Si===null||!Si.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=qw(o,h,e);Q_(o,H);break e}}o=o.return}while(o!==null)}hx(n)}catch(Q){e=Q,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function ux(){var t=dh.current;return dh.current=hh,t===null?hh:t}function Fm(){(mt===0||mt===3||mt===2)&&(mt=4),St===null||!(Ss&268435455)&&!(qh&268435455)||ci(St,At)}function mh(t,e){var n=Le;Le|=2;var r=ux();(St!==t||At!==e)&&(Rr=null,_s(t,e));do try{rC();break}catch(s){lx(t,s)}while(!0);if(Em(),Le=n,dh.current=r,ht!==null)throw Error(Y(261));return St=null,At=0,mt}function rC(){for(;ht!==null;)cx(ht)}function iC(){for(;ht!==null&&!AS();)cx(ht)}function cx(t){var e=fx(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?hx(t):ht=e,Mm.current=null}function hx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YI(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=QI(n,e,ln),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function cs(t,e,n){var r=Fe,s=Rn.transition;try{Rn.transition=null,Fe=1,sC(t,e,n,r)}finally{Rn.transition=s,Fe=r}return null}function sC(t,e,n,r){do Do();while(gi!==null);if(Le&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(jS(t,o),t===St&&(ht=St=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,px(Qc,function(){return Do(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rn.transition,Rn.transition=null;var l=Fe;Fe=1;var h=Le;Le|=4,Mm.current=null,JI(t,n),sx(n,t),II(Yf),Xc=!!Qf,Yf=Qf=null,t.current=n,eC(n),RS(),Le=h,Fe=l,Rn.transition=o}else t.current=n;if(mc&&(mc=!1,gi=t,ph=s),o=t.pendingLanes,o===0&&(Si=null),NS(n.stateNode),sn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fh)throw fh=!1,t=_p,_p=null,t;return ph&1&&t.tag!==0&&Do(),o=t.pendingLanes,o&1?t===yp?wl++:(wl=0,yp=t):wl=0,Wi(),null}function Do(){if(gi!==null){var t=$0(ph),e=Rn.transition,n=Fe;try{if(Rn.transition=null,Fe=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,ph=0,Le&6)throw Error(Y(331));var s=Le;for(Le|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var y=oe;switch(y.tag){case 0:case 11:case 15:yl(8,y,o)}var w=y.child;if(w!==null)w.return=y,oe=w;else for(;oe!==null;){y=oe;var x=y.sibling,k=y.return;if(nx(y),y===p){oe=null;break}if(x!==null){x.return=k,oe=x;break}oe=k}}}var z=o.alternate;if(z!==null){var N=z.child;if(N!==null){z.child=null;do{var j=N.sibling;N.sibling=null,N=j}while(N!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yl(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,oe=R;break e}oe=o.return}}var T=t.current;for(oe=T;oe!==null;){l=oe;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,oe=O;else e:for(l=T;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:$h(9,h)}}catch(Q){nt(h,h.return,Q)}if(h===l){oe=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,oe=H;break e}oe=h.return}}if(Le=s,Wi(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Vh,t)}catch{}r=!0}return r}finally{Fe=n,Rn.transition=e}}return!1}function _y(t,e,n){e=Go(n,e),e=$w(t,e,1),t=Ti(t,e,1),e=$t(),t!==null&&(su(t,1,e),sn(t,e))}function nt(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){t=Go(n,t),t=qw(e,t,1),e=Ti(e,t,1),t=$t(),e!==null&&(su(e,1,t),sn(e,t));break}}e=e.return}}function oC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>st()-Vm?_s(t,0):Dm|=n),sn(t,e)}function dx(t,e){e===0&&(t.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var n=$t();t=Fr(t,e),t!==null&&(su(t,e,n),sn(t,n))}function aC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dx(t,n)}function lC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),dx(t,n)}var fx;fx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,KI(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Qe&&e.flags&1048576&&_w(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bc(t,e),t=e.pendingProps;var s=Wo(e,jt.current);Mo(e,n),s=Rm(null,e,r,t,s,n);var o=bm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(o=!0,rh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Im(e),s.updater=Hh,e.stateNode=s,s._reactInternals=e,op(e,r,t,n),e=up(null,e,r,!0,o,n)):(e.tag=0,Qe&&o&&ym(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cC(r),t=jn(r,t),s){case 0:e=lp(null,e,r,t,n);break e;case 1:e=ay(null,e,r,t,n);break e;case 11:e=sy(null,e,r,t,n);break e;case 14:e=oy(null,e,r,jn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jn(r,s),lp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jn(r,s),ay(t,e,r,s,n);case 3:e:{if(Qw(e),t===null)throw Error(Y(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Tw(t,e),lh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Go(Error(Y(423)),e),e=ly(t,e,r,n,s);break e}else if(r!==s){s=Go(Error(Y(424)),e),e=ly(t,e,r,n,s);break e}else for(hn=Ei(e.stateNode.containerInfo.firstChild),fn=e,Qe=!0,Bn=null,n=xw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ho(),r===s){e=Br(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&rp(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Xf(r,s)?l=null:o!==null&&Xf(r,o)&&(e.flags|=32),Kw(t,e),Ht(t,e,l,n),e.child;case 6:return t===null&&rp(e),null;case 13:return Yw(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jn(r,s),sy(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,He(oh,r._currentValue),r._currentValue=l,o!==null)if(Gn(o.value,l)){if(o.children===s.children&&!nn.current){e=Br(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Dr(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ip(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ip(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Mo(e,n),s=bn(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=jn(r,e.pendingProps),s=jn(r.type,s),oy(t,e,r,s,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jn(r,s),bc(t,e),e.tag=1,rn(r)?(t=!0,rh(e)):t=!1,Mo(e,n),Hw(e,r,s),op(e,r,s,n),up(null,e,r,!0,t,n);case 19:return Xw(t,e,n);case 22:return Zw(t,e,n)}throw Error(Y(156,e.tag))};function px(t,e){return B0(t,e)}function uC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new uC(t,e,n,r)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cC(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===om)return 11;if(t===am)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,r,s,o){var l=2;if(r=t,typeof t=="function")Bm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vo:return ys(n.children,s,o,e);case sm:l=8,s|=8;break;case Rf:return t=An(12,n,e,s|2),t.elementType=Rf,t.lanes=o,t;case bf:return t=An(13,n,e,s),t.elementType=bf,t.lanes=o,t;case Lf:return t=An(19,n,e,s),t.elementType=Lf,t.lanes=o,t;case S0:return Gh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E0:l=10;break e;case T0:l=9;break e;case om:l=11;break e;case am:l=14;break e;case ai:l=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=An(l,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function ys(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Gh(t,e,n,r){return t=An(22,t,r,e),t.elementType=S0,t.lanes=n,t.stateNode={isHidden:!1},t}function hf(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function df(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Um(t,e,n,r,s,o,l,h,d){return t=new hC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=An(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(o),t}function dC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mx(t){if(!t)return Oi;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(rn(n))return mw(t,n,e)}return e}function gx(t,e,n,r,s,o,l,h,d){return t=Um(n,r,!0,t,s,o,l,h,d),t.context=mx(null),n=t.current,r=$t(),s=Ii(n),o=Dr(r,s),o.callback=e??null,Ti(n,o,s),t.current.lanes=s,su(t,s,r),sn(t,r),t}function Zh(t,e,n,r){var s=e.current,o=$t(),l=Ii(s);return n=mx(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(s,e,l),t!==null&&($n(t,s,l,o),kc(t,s,l)),l}function gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wm(t,e){yy(t,e),(t=t.alternate)&&yy(t,e)}function fC(){return null}var _x=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hm(t){this._internalRoot=t}Kh.prototype.render=Hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Zh(t,e,null,null)};Kh.prototype.unmount=Hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Zh(null,t,null,null)}),e[jr]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&Q0(t)}};function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vy(){}function pC(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var p=gh(l);o.call(p)}}var l=gx(e,r,t,0,null,!1,!1,"",vy);return t._reactRootContainer=l,t[jr]=l.current,Dl(t.nodeType===8?t.parentNode:t),Is(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=gh(d);h.call(p)}}var d=Um(t,0,!1,null,null,!1,!1,"",vy);return t._reactRootContainer=d,t[jr]=d.current,Dl(t.nodeType===8?t.parentNode:t),Is(function(){Zh(e,d,n,r)}),d}function Yh(t,e,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=gh(l);h.call(d)}}Zh(e,l,t,s)}else l=pC(n,e,t,s,r);return gh(l)}q0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(cm(e,n|1),sn(e,st()),!(Le&6)&&(Zo=st()+500,Wi()))}break;case 13:Is(function(){var r=Fr(t,1);if(r!==null){var s=$t();$n(r,t,1,s)}}),Wm(t,1)}};hm=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=$t();$n(e,t,134217728,n)}Wm(t,134217728)}};G0=function(t){if(t.tag===13){var e=Ii(t),n=Fr(t,e);if(n!==null){var r=$t();$n(n,t,e,r)}Wm(t,e)}};Z0=function(){return Fe};K0=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Uf=function(t,e,n){switch(e){case"input":if(Mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bh(r);if(!s)throw Error(Y(90));C0(r),Mf(r,s)}}}break;case"textarea":k0(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};M0=zm;D0=Is;var mC={usingClientEntryPoint:!1,Events:[au,To,Bh,N0,O0,zm]},tl={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gC={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j0(t),t===null?null:t.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||fC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Vh=gc.inject(gC),lr=gc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(e))throw Error(Y(200));return dC(t,e,null,n)};mn.createRoot=function(t,e){if(!$m(t))throw Error(Y(299));var n=!1,r="",s=_x;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Um(t,1,!1,null,null,n,!1,r,s),t[jr]=e.current,Dl(t.nodeType===8?t.parentNode:t),new Hm(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=j0(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return Is(t)};mn.hydrate=function(t,e,n){if(!Qh(e))throw Error(Y(200));return Yh(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!$m(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=_x;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=gx(e,null,t,1,n??null,s,!1,o,l),t[jr]=e.current,Dl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kh(e)};mn.render=function(t,e,n){if(!Qh(e))throw Error(Y(200));return Yh(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!Qh(t))throw Error(Y(40));return t._reactRootContainer?(Is(function(){Yh(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};mn.unstable_batchedUpdates=zm;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Yh(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function yx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yx)}catch(t){console.error(t)}}yx(),y0.exports=mn;var vx=y0.exports,wy=vx;kf.createRoot=wy.createRoot,kf.hydrateRoot=wy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const xy="popstate";function _C(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:l,hash:h}=r.location;return xp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xx(s)}return vC(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yC(){return Math.random().toString(36).substr(2,8)}function Ey(t,e){return{usr:t.state,key:t.key,idx:e}}function xp(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oa(e):e,{state:n,key:e&&e.key||r||yC()})}function xx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,h=_i.Pop,d=null,p=y();p==null&&(p=0,l.replaceState($l({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function w(){h=_i.Pop;let j=y(),R=j==null?null:j-p;p=j,d&&d({action:h,location:N.location,delta:R})}function x(j,R){h=_i.Push;let T=xp(N.location,j,R);p=y()+1;let O=Ey(T,p),H=N.createHref(T);try{l.pushState(O,"",H)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(H)}o&&d&&d({action:h,location:N.location,delta:1})}function k(j,R){h=_i.Replace;let T=xp(N.location,j,R);p=y();let O=Ey(T,p),H=N.createHref(T);l.replaceState(O,"",H),o&&d&&d({action:h,location:N.location,delta:0})}function z(j){let R=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof j=="string"?j:xx(j);return T=T.replace(/ $/,"%20"),gt(R,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,R)}let N={get action(){return h},get location(){return t(s,l)},listen(j){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(xy,w),d=j,()=>{s.removeEventListener(xy,w),d=null}},createHref(j){return e(s,j)},createURL:z,encodeLocation(j){let R=z(j);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:x,replace:k,go(j){return l.go(j)}};return N}var Ty;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ty||(Ty={}));function wC(t,e,n){return n===void 0&&(n="/"),xC(t,e,n)}function xC(t,e,n,r){let s=typeof e=="string"?oa(e):e,o=Sx(s.pathname||"/",n);if(o==null)return null;let l=Ex(t);EC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=OC(o);h=bC(l[d],p)}return h}function Ex(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(gt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=vs([r,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Ex(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:AC(p,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of Tx(o.path))s(o,l,d)}),e}function Tx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Tx(r.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function EC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TC=/^:[\w-]+$/,SC=3,IC=2,CC=1,PC=10,kC=-2,Sy=t=>t==="*";function AC(t,e){let n=t.split("/"),r=n.length;return n.some(Sy)&&(r+=kC),e&&(r+=IC),n.filter(s=>!Sy(s)).reduce((s,o)=>s+(TC.test(o)?SC:o===""?CC:PC),r)}function RC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function bC(t,e,n){let{routesMeta:r}=t,s={},o="/",l=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",w=LC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),x=d.route;if(!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:vs([o,w.pathname]),pathnameBase:FC(vs([o,w.pathnameBase])),route:x}),w.pathnameBase!=="/"&&(o=vs([o,w.pathnameBase]))}return l}function LC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,y,w)=>{let{paramName:x,isOptional:k}=y;if(x==="*"){let N=h[w]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const z=h[w];return k&&!z?p[x]=void 0:p[x]=(z||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function NC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?oa(t):t;return{pathname:n?n.startsWith("/")?n:DC(n,e):e,search:BC(r),hash:UC(s)}}function DC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ff(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zC(t,e){let n=VC(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jC(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=oa(t):(s=$l({},t),gt(!s.pathname||!s.pathname.includes("?"),ff("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),ff("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),ff("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),w-=1;s.pathname=x.join("/")}h=w>=0?e[w]:"/"}let d=MC(s,h),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),FC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ix=["post","put","patch","delete"];new Set(Ix);const HC=["get",...Ix];new Set(HC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}const qm=q.createContext(null),$C=q.createContext(null),Xh=q.createContext(null),Jh=q.createContext(null),Ns=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Cx=q.createContext(null);function ed(){return q.useContext(Jh)!=null}function Px(){return ed()||gt(!1),q.useContext(Jh).location}function kx(t){q.useContext(Xh).static||q.useLayoutEffect(t)}function aa(){let{isDataRoute:t}=q.useContext(Ns);return t?iP():qC()}function qC(){ed()||gt(!1);let t=q.useContext(qm),{basename:e,future:n,navigator:r}=q.useContext(Xh),{matches:s}=q.useContext(Ns),{pathname:o}=Px(),l=JSON.stringify(zC(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return kx(()=>{h.current=!0}),q.useCallback(function(p,y){if(y===void 0&&(y={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let w=jC(p,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:vs([e,w.pathname])),(y.replace?r.replace:r.push)(w,y.state,y)},[e,r,l,o,t])}function td(){let{matches:t}=q.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function GC(t,e){return ZC(t,e)}function ZC(t,e,n,r){ed()||gt(!1);let{navigator:s}=q.useContext(Xh),{matches:o}=q.useContext(Ns),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=Px(),y;if(e){var w;let j=typeof e=="string"?oa(e):e;d==="/"||(w=j.pathname)!=null&&w.startsWith(d)||gt(!1),y=j}else y=p;let x=y.pathname||"/",k=x;if(d!=="/"){let j=d.replace(/^\//,"").split("/");k="/"+x.replace(/^\//,"").split("/").slice(j.length).join("/")}let z=wC(t,{pathname:k}),N=JC(z&&z.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:vs([d,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:vs([d,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return e&&N?q.createElement(Jh.Provider,{value:{location:ql({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:_i.Pop}},N):N}function KC(){let t=rP(),e=WC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,null)}const QC=q.createElement(KC,null);class YC extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Ns.Provider,{value:this.props.routeContext},q.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XC(t){let{routeContext:e,match:n,children:r}=t,s=q.useContext(qm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Ns.Provider,{value:e},r)}function JC(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=l.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);y>=0||gt(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<l.length;y++){let w=l[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=y),w.route.id){let{loaderData:x,errors:k}=n,z=w.route.loader&&x[w.route.id]===void 0&&(!k||k[w.route.id]===void 0);if(w.route.lazy||z){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,w,x)=>{let k,z=!1,N=null,j=null;n&&(k=h&&w.route.id?h[w.route.id]:void 0,N=w.route.errorElement||QC,d&&(p<0&&x===0?(sP("route-fallback"),z=!0,j=null):p===x&&(z=!0,j=w.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,x+1)),T=()=>{let O;return k?O=N:z?O=j:w.route.Component?O=q.createElement(w.route.Component,null):w.route.element?O=w.route.element:O=y,q.createElement(XC,{match:w,routeContext:{outlet:y,matches:R,isDataRoute:n!=null},children:O})};return n&&(w.route.ErrorBoundary||w.route.errorElement||x===0)?q.createElement(YC,{location:n.location,revalidation:n.revalidation,component:N,error:k,children:T(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):T()},null)}var Ax=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ax||{}),Rx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rx||{});function eP(t){let e=q.useContext(qm);return e||gt(!1),e}function tP(t){let e=q.useContext($C);return e||gt(!1),e}function nP(t){let e=q.useContext(Ns);return e||gt(!1),e}function bx(t){let e=nP(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function rP(){var t;let e=q.useContext(Cx),n=tP(),r=bx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iP(){let{router:t}=eP(Ax.UseNavigateStable),e=bx(Rx.UseNavigateStable),n=q.useRef(!1);return kx(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ql({fromRouteId:e},o)))},[t,e])}const Iy={};function sP(t,e,n){Iy[t]||(Iy[t]=!0)}function oP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hs(t){gt(!1)}function aP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_i.Pop,navigator:o,static:l=!1,future:h}=t;ed()&&gt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:ql({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof r=="string"&&(r=oa(r));let{pathname:y="/",search:w="",hash:x="",state:k=null,key:z="default"}=r,N=q.useMemo(()=>{let j=Sx(y,d);return j==null?null:{location:{pathname:j,search:w,hash:x,state:k,key:z},navigationType:s}},[d,y,w,x,k,z,s]);return N==null?null:q.createElement(Xh.Provider,{value:p},q.createElement(Jh.Provider,{children:n,value:N}))}function lP(t){let{children:e,location:n}=t;return GC(Ep(e),n)}new Promise(()=>{});function Ep(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(r,s)=>{if(!q.isValidElement(r))return;let o=[...e,s];if(r.type===q.Fragment){n.push.apply(n,Ep(r.props.children,o));return}r.type!==hs&&gt(!1),!r.props.index||!r.props.children||gt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ep(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uP="6";try{window.__reactRouterVersion=uP}catch{}const cP="startTransition",Cy=oS[cP];function hP(t){let{basename:e,children:n,future:r,window:s}=t,o=q.useRef();o.current==null&&(o.current=_C({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},y=q.useCallback(w=>{p&&Cy?Cy(()=>d(w)):d(w)},[d,p]);return q.useLayoutEffect(()=>l.listen(y),[l,y]),q.useEffect(()=>oP(r),[r]),q.createElement(aP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}var Py;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Py||(Py={}));var ky;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ky||(ky={}));const dP=()=>{};var Ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Nx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,y=o>>2,w=(o&3)<<4|h>>4;let x=(h&15)<<2|p>>6,k=p&63;d||(k=64,l||(x=64)),r.push(n[y],n[w],n[x],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||w==null)throw new pP;const x=o<<2|h>>4;if(r.push(x),p!==64){const k=h<<4&240|p>>2;if(r.push(k),w!==64){const z=p<<6&192|w;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mP=function(t){const e=Lx(t);return Nx.encodeByteArray(e,!0)},_h=function(t){return mP(t).replace(/\./g,"")},Ox=function(t){try{return Nx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=()=>gP().__FIREBASE_DEFAULTS__,yP=()=>{if(typeof process>"u"||typeof Ay>"u")return;const t=Ay.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ox(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return dP()||_P()||yP()||vP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mx=t=>{var e,n;return(n=(e=nd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wP=t=>{const e=Mx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dx=()=>{var t;return(t=nd())==null?void 0:t.config},Vx=t=>{var e;return(e=nd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_h(JSON.stringify(n)),_h(JSON.stringify(l)),""].join(".")}const xl={};function TP(){const t={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?t.emulator.push(e):t.prod.push(e);return t}function SP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ry=!1;function jx(t,e){if(typeof window>"u"||typeof document>"u"||!la(window.location.host)||xl[t]===e||xl[t]||Ry)return;xl[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=TP().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Ry=!0,l()},x}function y(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=SP(r),k=n("text"),z=document.getElementById(k)||document.createElement("span"),N=n("learnmore"),j=document.getElementById(N)||document.createElement("a"),R=n("preprendIcon"),T=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const O=x.element;h(O),y(j,N);const H=p();d(T,R),O.append(T,z,j,H),document.body.appendChild(O)}o?(z.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function CP(){var e;const t=(e=nd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RP(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bP(){return!CP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function NP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OP,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?MP(o,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Gr(s,h,r)}}function MP(t,e){return t.replace(DP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const DP=/\{\$([^}]+)}/g;function VP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(by(o)&&by(l)){if(!Cs(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function by(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function al(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zP(t,e){const n=new jP(t,e);return n.subscribe.bind(n)}class jP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pf),s.error===void 0&&(s.error=pf),s.complete===void 0&&(s.complete=pf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WP(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UP(t){return t===ds?void 0:t}function WP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const $P={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},qP=Pe.INFO,GP={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ZP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=qP,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const KP=(t,e)=>e.some(n=>t instanceof n);let Ly,Ny;function QP(){return Ly||(Ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YP(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,Tp=new WeakMap,Bx=new WeakMap,mf=new WeakMap,Zm=new WeakMap;function XP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Fx.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function JP(t){if(Tp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Tp.set(t,e)}let Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ek(t){Sp=t(Sp)}function tk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gf(this),e,...n);return Bx.set(r,e.sort?e.sort():[e]),Pi(r)}:YP().includes(t)?function(...e){return t.apply(gf(this),e),Pi(Fx.get(this))}:function(...e){return Pi(t.apply(gf(this),e))}}function nk(t){return typeof t=="function"?tk(t):(t instanceof IDBTransaction&&JP(t),KP(t,QP())?new Proxy(t,Sp):t)}function Pi(t){if(t instanceof IDBRequest)return XP(t);if(mf.has(t))return mf.get(t);const e=nk(t);return e!==t&&(mf.set(t,e),Zm.set(e,t)),e}const gf=t=>Zm.get(t);function rk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Pi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Pi(l.result),d.oldVersion,d.newVersion,Pi(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const ik=["get","getKey","getAll","getAllKeys","count"],sk=["put","add","delete","clear"],_f=new Map;function Oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ik.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return _f.set(e,o),o}ek(t=>({...t,get:(e,n,r)=>Oy(e,n)||t.get(e,n,r),has:(e,n)=>!!Oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ak(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ak(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",My="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Gm("@firebase/app"),lk="@firebase/app-compat",uk="@firebase/analytics-compat",ck="@firebase/analytics",hk="@firebase/app-check-compat",dk="@firebase/app-check",fk="@firebase/auth",pk="@firebase/auth-compat",mk="@firebase/database",gk="@firebase/data-connect",_k="@firebase/database-compat",yk="@firebase/functions",vk="@firebase/functions-compat",wk="@firebase/installations",xk="@firebase/installations-compat",Ek="@firebase/messaging",Tk="@firebase/messaging-compat",Sk="@firebase/performance",Ik="@firebase/performance-compat",Ck="@firebase/remote-config",Pk="@firebase/remote-config-compat",kk="@firebase/storage",Ak="@firebase/storage-compat",Rk="@firebase/firestore",bk="@firebase/ai",Lk="@firebase/firestore-compat",Nk="firebase",Ok="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="[DEFAULT]",Mk={[Ip]:"fire-core",[lk]:"fire-core-compat",[ck]:"fire-analytics",[uk]:"fire-analytics-compat",[dk]:"fire-app-check",[hk]:"fire-app-check-compat",[fk]:"fire-auth",[pk]:"fire-auth-compat",[mk]:"fire-rtdb",[gk]:"fire-data-connect",[_k]:"fire-rtdb-compat",[yk]:"fire-fn",[vk]:"fire-fn-compat",[wk]:"fire-iid",[xk]:"fire-iid-compat",[Ek]:"fire-fcm",[Tk]:"fire-fcm-compat",[Sk]:"fire-perf",[Ik]:"fire-perf-compat",[Ck]:"fire-rc",[Pk]:"fire-rc-compat",[kk]:"fire-gcs",[Ak]:"fire-gcs-compat",[Rk]:"fire-fst",[Lk]:"fire-fst-compat",[bk]:"fire-vertex","fire-js":"fire-js",[Nk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,Dk=new Map,Pp=new Map;function Dy(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ko(t){const e=t.name;if(Pp.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;Pp.set(e,t);for(const n of yh.values())Dy(n,t);for(const n of Dk.values())Dy(n,t);return!0}function Km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new uu("app","Firebase",Vk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=Ok;function Ux(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Cp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ki.create("bad-app-name",{appName:String(s)});if(n||(n=Dx()),!n)throw ki.create("no-options");const o=yh.get(s);if(o){if(Cs(n,o.options)&&Cs(r,o.config))return o;throw ki.create("duplicate-app",{appName:s})}const l=new HP(s);for(const d of Pp.values())l.addComponent(d);const h=new zk(n,r,l);return yh.set(s,h),h}function Wx(t=Cp){const e=yh.get(t);if(!e&&t===Cp&&Dx())return Ux();if(!e)throw ki.create("no-app",{appName:t});return e}function Ai(t,e,n){let r=Mk[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(l.join(" "));return}Ko(new Ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="firebase-heartbeat-database",Fk=1,Gl="firebase-heartbeat-store";let yf=null;function Hx(){return yf||(yf=rk(jk,Fk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),yf}async function Bk(t){try{const n=(await Hx()).transaction(Gl),r=await n.objectStore(Gl).get($x(t));return await n.done,r}catch(e){if(e instanceof Gr)Ur.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function Vy(t,e){try{const r=(await Hx()).transaction(Gl,"readwrite");await r.objectStore(Gl).put(e,$x(t)),await r.done}catch(n){if(n instanceof Gr)Ur.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(r.message)}}}function $x(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=1024,Wk=30;class Hk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Wk){const l=Gk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:s}=$k(this._heartbeatsCache.heartbeats),o=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ur.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function $k(t,e=Uk){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),jy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?NP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jy(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}function Gk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){Ko(new Ps("platform-logger",e=>new ok(e),"PRIVATE")),Ko(new Ps("heartbeat",e=>new Hk(e),"PRIVATE")),Ai(Ip,My,t),Ai(Ip,My,"esm2020"),Ai("fire-js","")}Zk("");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,qx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function I(){}I.prototype=C.prototype,b.F=C.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(M,V,P){for(var A=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)A[ee-2]=arguments[ee];return C.prototype[V].apply(M,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,C,I){I||(I=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(V=0;V<16;++V)M[V]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=b.g[0],I=b.g[1],V=b.g[2];let P=b.g[3],A;A=C+(P^I&(V^P))+M[0]+3614090360&4294967295,C=I+(A<<7&4294967295|A>>>25),A=P+(V^C&(I^V))+M[1]+3905402710&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(I^P&(C^I))+M[2]+606105819&4294967295,V=P+(A<<17&4294967295|A>>>15),A=I+(C^V&(P^C))+M[3]+3250441966&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(P^I&(V^P))+M[4]+4118548399&4294967295,C=I+(A<<7&4294967295|A>>>25),A=P+(V^C&(I^V))+M[5]+1200080426&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(I^P&(C^I))+M[6]+2821735955&4294967295,V=P+(A<<17&4294967295|A>>>15),A=I+(C^V&(P^C))+M[7]+4249261313&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(P^I&(V^P))+M[8]+1770035416&4294967295,C=I+(A<<7&4294967295|A>>>25),A=P+(V^C&(I^V))+M[9]+2336552879&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(I^P&(C^I))+M[10]+4294925233&4294967295,V=P+(A<<17&4294967295|A>>>15),A=I+(C^V&(P^C))+M[11]+2304563134&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(P^I&(V^P))+M[12]+1804603682&4294967295,C=I+(A<<7&4294967295|A>>>25),A=P+(V^C&(I^V))+M[13]+4254626195&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(I^P&(C^I))+M[14]+2792965006&4294967295,V=P+(A<<17&4294967295|A>>>15),A=I+(C^V&(P^C))+M[15]+1236535329&4294967295,I=V+(A<<22&4294967295|A>>>10),A=C+(V^P&(I^V))+M[1]+4129170786&4294967295,C=I+(A<<5&4294967295|A>>>27),A=P+(I^V&(C^I))+M[6]+3225465664&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(P^C))+M[11]+643717713&4294967295,V=P+(A<<14&4294967295|A>>>18),A=I+(P^C&(V^P))+M[0]+3921069994&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(I^V))+M[5]+3593408605&4294967295,C=I+(A<<5&4294967295|A>>>27),A=P+(I^V&(C^I))+M[10]+38016083&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(P^C))+M[15]+3634488961&4294967295,V=P+(A<<14&4294967295|A>>>18),A=I+(P^C&(V^P))+M[4]+3889429448&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(I^V))+M[9]+568446438&4294967295,C=I+(A<<5&4294967295|A>>>27),A=P+(I^V&(C^I))+M[14]+3275163606&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(P^C))+M[3]+4107603335&4294967295,V=P+(A<<14&4294967295|A>>>18),A=I+(P^C&(V^P))+M[8]+1163531501&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(I^V))+M[13]+2850285829&4294967295,C=I+(A<<5&4294967295|A>>>27),A=P+(I^V&(C^I))+M[2]+4243563512&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^I&(P^C))+M[7]+1735328473&4294967295,V=P+(A<<14&4294967295|A>>>18),A=I+(P^C&(V^P))+M[12]+2368359562&4294967295,I=V+(A<<20&4294967295|A>>>12),A=C+(I^V^P)+M[5]+4294588738&4294967295,C=I+(A<<4&4294967295|A>>>28),A=P+(C^I^V)+M[8]+2272392833&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^I)+M[11]+1839030562&4294967295,V=P+(A<<16&4294967295|A>>>16),A=I+(V^P^C)+M[14]+4259657740&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^P)+M[1]+2763975236&4294967295,C=I+(A<<4&4294967295|A>>>28),A=P+(C^I^V)+M[4]+1272893353&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^I)+M[7]+4139469664&4294967295,V=P+(A<<16&4294967295|A>>>16),A=I+(V^P^C)+M[10]+3200236656&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^P)+M[13]+681279174&4294967295,C=I+(A<<4&4294967295|A>>>28),A=P+(C^I^V)+M[0]+3936430074&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^I)+M[3]+3572445317&4294967295,V=P+(A<<16&4294967295|A>>>16),A=I+(V^P^C)+M[6]+76029189&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(I^V^P)+M[9]+3654602809&4294967295,C=I+(A<<4&4294967295|A>>>28),A=P+(C^I^V)+M[12]+3873151461&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^I)+M[15]+530742520&4294967295,V=P+(A<<16&4294967295|A>>>16),A=I+(V^P^C)+M[2]+3299628645&4294967295,I=V+(A<<23&4294967295|A>>>9),A=C+(V^(I|~P))+M[0]+4096336452&4294967295,C=I+(A<<6&4294967295|A>>>26),A=P+(I^(C|~V))+M[7]+1126891415&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~I))+M[14]+2878612391&4294967295,V=P+(A<<15&4294967295|A>>>17),A=I+(P^(V|~C))+M[5]+4237533241&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~P))+M[12]+1700485571&4294967295,C=I+(A<<6&4294967295|A>>>26),A=P+(I^(C|~V))+M[3]+2399980690&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~I))+M[10]+4293915773&4294967295,V=P+(A<<15&4294967295|A>>>17),A=I+(P^(V|~C))+M[1]+2240044497&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~P))+M[8]+1873313359&4294967295,C=I+(A<<6&4294967295|A>>>26),A=P+(I^(C|~V))+M[15]+4264355552&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~I))+M[6]+2734768916&4294967295,V=P+(A<<15&4294967295|A>>>17),A=I+(P^(V|~C))+M[13]+1309151649&4294967295,I=V+(A<<21&4294967295|A>>>11),A=C+(V^(I|~P))+M[4]+4149444226&4294967295,C=I+(A<<6&4294967295|A>>>26),A=P+(I^(C|~V))+M[11]+3174756917&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~I))+M[2]+718787259&4294967295,V=P+(A<<15&4294967295|A>>>17),A=I+(P^(V|~C))+M[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.v=function(b,C){C===void 0&&(C=b.length);const I=C-this.blockSize,M=this.C;let V=this.h,P=0;for(;P<C;){if(V==0)for(;P<=I;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<C;)if(M[V++]=b.charCodeAt(P++),V==this.blockSize){s(this,M),V=0;break}}else for(;P<C;)if(M[V++]=b[P++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;C=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=C&255,C/=256;for(this.v(b),b=Array(16),C=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)b[C++]=this.g[I]>>>M&255;return b};function o(b,C){var I=h;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=C(b)}function l(b,C){this.h=C;const I=[];let M=!0;for(let V=b.length-1;V>=0;V--){const P=b[V]|0;M&&P==C||(I[V]=P,M=!1)}this.g=I}var h={};function d(b){return-128<=b&&b<128?o(b,function(C){return new l([C|0],C<0?-1:0)}):new l([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return w;if(b<0)return j(p(-b));const C=[];let I=1;for(let M=0;b>=I;M++)C[M]=b/I|0,I*=4294967296;return new l(C,0)}function y(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return j(y(b.substring(1),C));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(C,8));let M=w;for(let P=0;P<b.length;P+=8){var V=Math.min(8,b.length-P);const A=parseInt(b.substring(P,P+V),C);V<8?(V=p(Math.pow(C,V)),M=M.j(V).add(p(A))):(M=M.j(I),M=M.add(p(A)))}return M}var w=d(0),x=d(1),k=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-j(this).m();let b=0,C=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);b+=(M>=0?M:4294967296+M)*C,C*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(z(this))return"0";if(N(this))return"-"+j(this).toString(b);const C=p(Math.pow(b,6));var I=this;let M="";for(;;){const V=H(I,C).g;I=R(I,V.j(C));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=V,z(I))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function z(b){if(b.h!=0)return!1;for(let C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=R(this,b),N(b)?-1:z(b)?0:1};function j(b){const C=b.g.length,I=[];for(let M=0;M<C;M++)I[M]=~b.g[M];return new l(I,~b.h).add(x)}t.abs=function(){return N(this)?j(this):this},t.add=function(b){const C=Math.max(this.g.length,b.g.length),I=[];let M=0;for(let V=0;V<=C;V++){let P=M+(this.i(V)&65535)+(b.i(V)&65535),A=(P>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);M=A>>>16,P&=65535,A&=65535,I[V]=A<<16|P}return new l(I,I[I.length-1]&-2147483648?-1:0)};function R(b,C){return b.add(j(C))}t.j=function(b){if(z(this)||z(b))return w;if(N(this))return N(b)?j(this).j(j(b)):j(j(this).j(b));if(N(b))return j(this.j(j(b)));if(this.l(k)<0&&b.l(k)<0)return p(this.m()*b.m());const C=this.g.length+b.g.length,I=[];for(var M=0;M<2*C;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<b.g.length;V++){const P=this.i(M)>>>16,A=this.i(M)&65535,ee=b.i(V)>>>16,we=b.i(V)&65535;I[2*M+2*V]+=A*we,T(I,2*M+2*V),I[2*M+2*V+1]+=P*we,T(I,2*M+2*V+1),I[2*M+2*V+1]+=A*ee,T(I,2*M+2*V+1),I[2*M+2*V+2]+=P*ee,T(I,2*M+2*V+2)}for(b=0;b<C;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=C;b<2*C;b++)I[b]=0;return new l(I,0)};function T(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function O(b,C){this.g=b,this.h=C}function H(b,C){if(z(C))throw Error("division by zero");if(z(b))return new O(w,w);if(N(b))return C=H(j(b),C),new O(j(C.g),j(C.h));if(N(C))return C=H(b,j(C)),new O(j(C.g),C.h);if(b.g.length>30){if(N(b)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var I=x,M=C;M.l(b)<=0;)I=Q(I),M=Q(M);var V=J(I,1),P=J(M,1);for(M=J(M,2),I=J(I,2);!z(M);){var A=P.add(M);A.l(b)<=0&&(V=V.add(I),P=A),M=J(M,1),I=J(I,1)}return C=R(b,V.j(C)),new O(V,C)}for(V=w;b.l(C)>=0;){for(I=Math.max(1,Math.floor(b.m()/C.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=p(I),A=P.j(C);N(A)||A.l(b)>0;)I-=M,P=p(I),A=P.j(C);z(P)&&(P=x),V=V.add(P),b=R(b,A)}return new O(V,b)}t.B=function(b){return H(this,b).h},t.and=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let M=0;M<C;M++)I[M]=this.i(M)&b.i(M);return new l(I,this.h&b.h)},t.or=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let M=0;M<C;M++)I[M]=this.i(M)|b.i(M);return new l(I,this.h|b.h)},t.xor=function(b){const C=Math.max(this.g.length,b.g.length),I=[];for(let M=0;M<C;M++)I[M]=this.i(M)^b.i(M);return new l(I,this.h^b.h)};function Q(b){const C=b.g.length+1,I=[];for(let M=0;M<C;M++)I[M]=b.i(M)<<1|b.i(M-1)>>>31;return new l(I,b.h)}function J(b,C){const I=C>>5;C%=32;const M=b.g.length-I,V=[];for(let P=0;P<M;P++)V[P]=C>0?b.i(P+I)>>>C|b.i(P+I+1)<<32-C:b.i(P+I);return new l(V,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Ri=l}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gx,ll,Zx,Mc,kp,Kx,Qx,Yx;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var v=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var F=u[S];if(!(F in v))break e;v=v[F]}u=u[u.length-1],S=v[u],m=m(S),m!=S&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,v){return u.call.apply(u.bind,arguments)}function p(u,m,v){return p=d,p.apply(null,arguments)}function y(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,F,U){for(var te=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)te[ge-2]=arguments[ge];return m.prototype[F].apply(S,te)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const m=u.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=u[S];return v}return[]}function z(u,m){for(let S=1;S<arguments.length;S++){const F=arguments[S];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const U=F.length||0;u.length=v+U;for(let te=0;te<U;te++)u[v+te]=F[te]}else u.push(F)}}class N{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function j(u){l.setTimeout(()=>{throw u},0)}function R(){var u=b;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class T{constructor(){this.h=this.g=null}add(m,v){const S=O.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var O=new N(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,b=new T,C=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(I)}};function I(){for(var u;u=R();){try{u.h.call(u.g)}catch(v){j(v)}var m=O;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};l.addEventListener("test",v,m),l.removeEventListener("test",v,m)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function ee(u,m){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(ee,V),ee.prototype.init=function(u,m){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Be(u,m,v,S,F){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=F,this.key=++Ne,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,m,v){for(const S in u)m.call(v,u[S],S,u)}function X(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function he(u){const m={};for(const v in u)m[v]=u[v];return m}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ke(u,m){let v,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(v in S)u[v]=S[v];for(let U=0;U<ve.length;U++)v=ve[U],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function Ce(u){this.src=u,this.g={},this.h=0}Ce.prototype.add=function(u,m,v,S,F){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const te=ce(u,m,S,F);return te>-1?(m=u[te],v||(m.fa=!1)):(m=new Be(m,this.src,U,!!S,F),m.fa=v,u.push(m)),m};function xe(u,m){const v=m.type;if(v in u.g){var S=u.g[v],F=Array.prototype.indexOf.call(S,m,void 0),U;(U=F>=0)&&Array.prototype.splice.call(S,F,1),U&&($(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ce(u,m,v,S){for(let F=0;F<u.length;++F){const U=u[F];if(!U.da&&U.listener==m&&U.capture==!!v&&U.ha==S)return F}return-1}var at="closure_lm_"+(Math.random()*1e6|0),_n={};function va(u,m,v,S,F){if(Array.isArray(m)){for(let U=0;U<m.length;U++)va(u,m[U],v,S,F);return null}return v=Ki(v),u&&u[we]?u.J(m,v,h(S)?!!S.capture:!1,F):wa(u,m,v,!1,S,F)}function wa(u,m,v,S,F,U){if(!m)throw Error("Invalid event type");const te=h(F)?!!F.capture:!!F;let ge=zs(u);if(ge||(u[at]=ge=new Ce(u)),v=ge.add(m,v,S,te,U),v.proxy)return v;if(S=xa(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)P||(F=te),F===void 0&&(F=!1),u.addEventListener(m.toString(),S,F);else if(u.attachEvent)u.attachEvent(wu(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xa(){function u(v){return m.call(u.src,u.listener,v)}const m=xu;return u}function Zr(u,m,v,S,F){if(Array.isArray(m))for(var U=0;U<m.length;U++)Zr(u,m[U],v,S,F);else S=h(S)?!!S.capture:!!S,v=Ki(v),u&&u[we]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],v=ce(m,v,S,F),v>-1&&($(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ce(m,v,S,F)),(v=u>-1?m[u]:null)&&Gi(v))}function Gi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[we])xe(m.i,u);else{var v=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(v,S,u.capture):m.detachEvent?m.detachEvent(wu(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=zs(m))?(xe(v,u),v.h==0&&(v.src=null,m[at]=null)):$(u)}}}function wu(u){return u in _n?_n[u]:_n[u]="on"+u}function xu(u,m){if(u.da)u=!0;else{m=new ee(m,this);const v=u.listener,S=u.ha||u.src;u.fa&&Gi(u),u=v.call(S,m)}return u}function zs(u){return u=u[at],u instanceof Ce?u:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ki(u){return typeof u=="function"?u:(u[Zi]||(u[Zi]=function(m){return u.handleEvent(m)}),u[Zi])}function yt(){M.call(this),this.i=new Ce(this),this.M=this,this.G=null}w(yt,M),yt.prototype[we]=!0,yt.prototype.removeEventListener=function(u,m,v,S){Zr(this,u,m,v,S)};function vt(u,m){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new V(m,u);else if(m instanceof V)m.target=m.target||u;else{var F=m;m=new V(S,u),Ke(m,F)}F=!0;let U,te;if(v)for(te=v.length-1;te>=0;te--)U=m.g=v[te],F=Kr(U,S,!0,m)&&F;if(U=m.g=u,F=Kr(U,S,!0,m)&&F,F=Kr(U,S,!1,m)&&F,v)for(te=0;te<v.length;te++)U=m.g=v[te],F=Kr(U,S,!1,m)&&F}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let S=0;S<v.length;S++)$(v[S]);delete u.g[m],u.h--}}this.G=null},yt.prototype.J=function(u,m,v,S){return this.i.add(String(u),m,!1,v,S)},yt.prototype.K=function(u,m,v,S){return this.i.add(String(u),m,!0,v,S)};function Kr(u,m,v,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let U=0;U<m.length;++U){const te=m[U];if(te&&!te.da&&te.capture==v){const ge=te.listener,Me=te.ha||te.src;te.fa&&xe(u.i,te),F=ge.call(Me,S)!==!1&&F}}return F&&!S.defaultPrevented}function Eu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function Ea(u){u.g=Eu(()=>{u.g=null,u.i&&(u.i=!1,Ea(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Pd extends M{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(u){M.call(this),this.h=u,this.g={}}w(Qi,M);var js=[];function Ta(u){le(u.g,function(m,v){this.g.hasOwnProperty(v)&&Gi(m)},u),u.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),Ta(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=l.JSON.stringify,kd=l.JSON.parse,Tu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Sa(){}function Su(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yi(){V.call(this,"d")}w(Yi,V);function Bs(){V.call(this,"c")}w(Bs,V);var yr={},Yr=null;function Us(){return Yr=Yr||new yt}yr.Ia="serverreachability";function Iu(u){V.call(this,yr.Ia,u)}w(Iu,V);function Xr(u){const m=Us();vt(m,new Iu(m))}yr.STAT_EVENT="statevent";function Ia(u,m){V.call(this,yr.STAT_EVENT,u),this.stat=m}w(Ia,V);function wt(u){const m=Us();vt(m,new Ia(m,u))}yr.Ja="timingevent";function Cu(u,m){V.call(this,yr.Ja,u),this.size=m}w(Cu,V);function Xi(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Ji(){this.g=!0}Ji.prototype.ua=function(){this.g=!1};function Ad(u,m,v,S,F,U){u.info(function(){if(u.g)if(U){var te="",ge=U.split("&");for(let Ve=0;Ve<ge.length;Ve++){var Me=ge[Ve].split("=");if(Me.length>1){const rt=Me[0];Me=Me[1];const En=rt.split("_");te=En.length>=2&&En[1]=="type"?te+(rt+"="+Me+"&"):te+(rt+"=redacted&")}}}else te=null;else te=U;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+m+`
`+v+`
`+te})}function Rd(u,m,v,S,F,U,te){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+m+`
`+v+`
`+U+" "+te})}function Jr(u,m,v,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+bd(u,v)+(S?" "+S:"")})}function Ca(u,m){u.info(function(){return"TIMEOUT: "+m})}Ji.prototype.info=function(){};function bd(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var v=U[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let te=1;te<S.length;te++)S[te]=""}}}}return Fs(U)}catch{return m}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ku;function Zt(){}w(Zt,Sa),Zt.prototype.g=function(){return new XMLHttpRequest},ku=new Zt;function ae(u){return encodeURIComponent(String(u))}function Au(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Nn(u,m,v,S){this.j=u,this.i=m,this.l=v,this.S=S||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pa}function Pa(){this.i=null,this.g="",this.h=!1}var ka={},es={};function Hs(u,m,v){u.M=1,u.A=Ue(Bt(m)),u.u=v,u.R=!0,vr(u,null)}function vr(u,m){u.F=Date.now(),$s(u),u.B=Bt(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Qs(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Pa,u.g=Ua(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Pd(p(u.Y,u,u.g),u.P)),m=u.V,v=u.g,S=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(js[0]=F.toString()),F=js);for(let U=0;U<F.length;U++){const te=va(v,F[U],S||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?he(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Xr(),Ad(u.i,u.v,u.B,u.l,u.S,u.u)}Nn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},Nn.prototype.Y=function(u){try{if(u==this.g)e:{const ge=Jn(this.g),Me=this.g.ya(),Ve=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Ma(this.g)))){this.K||ge!=4||Me==7||(Me==8||Ve<=0?Xr(3):Xr(2)),qs(this);var m=this.g.ca();this.X=m;var v=Ru(this);if(this.o=m==200,Rd(this.i,this.v,this.B,this.l,this.S,ge,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var U=S;break t}}U=null}if(u=U)Jr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Aa(this,u);else{this.o=!1,this.m=3,wt(12),yn(this),ts(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<v.length;)if(rt=Ld(this,v),rt==es){ge==4&&(this.m=4,wt(14),u=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==ka){this.m=4,wt(15),Jr(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Jr(this.i,this.l,rt,null),Aa(this,rt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||v.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)Jr(this.i,this.l,v,"[Invalid Chunked Response]"),yn(this),ts(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Fa(te),te.P=!0,wt(11))}}else Jr(this.i,this.l,v,null),Aa(this,v);ge==4&&yn(this),this.o&&!this.K&&(ge==4?an(this.j,this):(this.o=!1,$s(this)))}else Da(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),yn(this),ts(this)}}}catch{}finally{}};function Ru(u){if(!bu(u))return u.g.la();const m=Ma(u.g);if(m==="")return"";let v="";const S=m.length,F=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yn(u),ts(u),"";u.h.i=new l.TextDecoder}for(let U=0;U<S;U++)u.h.h=!0,v+=u.h.i.decode(m[U],{stream:!(F&&U==S-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function bu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ld(u,m){var v=u.C,S=m.indexOf(`
`,v);return S==-1?es:(v=Number(m.substring(v,S)),isNaN(v)?ka:(S+=1,S+v>m.length?es:(m=m.slice(S,S+v),u.C=S+v,m)))}Nn.prototype.cancel=function(){this.K=!0,yn(this)};function $s(u){u.T=Date.now()+u.H,Lu(u,u.H)}function Lu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xi(p(u.aa,u),m)}function qs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Nn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Xr(),wt(17)),yn(this),this.m=2,ts(this)):Lu(this,this.T-u)};function ts(u){u.j.I==0||u.K||an(u.j,u)}function yn(u){qs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ta(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Aa(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ns(v.h,u))){if(!u.L&&ns(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)to(v),Js(v);else break e;ja(v),wt(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Xi(p(v.Va,v),6e3));Mu(v.h)<=1&&v.ta&&(v.ta=void 0)}else tr(v,11)}else if((u.L||v.g==u)&&to(v),!A(m))for(F=v.Ba.g.parse(m),m=0;m<F.length;m++){let Ve=F[m];const rt=Ve[0];if(!(rt<=v.K))if(v.K=rt,Ve=Ve[1],v.I==2)if(Ve[0]=="c"){v.M=Ve[1],v.ba=Ve[2];const En=Ve[3];En!=null&&(v.ka=En,v.j.info("VER="+v.ka));const Dn=Ve[4];Dn!=null&&(v.za=Dn,v.j.info("SVER="+v.za));const Tn=Ve[5];Tn!=null&&typeof Tn=="number"&&Tn>0&&(S=1.5*Tn,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const nr=u.g;if(nr){const io=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var U=S.h;U.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(wr(U,U.h),U.h=null))}if(S.G){const so=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(S.wa=so,se(S.J,S.G,so))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var te=u;if(S.na=Ba(S,S.L?S.ba:null,S.W),te.L){Ra(S.h,te);var ge=te,Me=S.O;Me&&(ge.H=Me),ge.D&&(qs(ge),$s(ge)),S.g=te}else za(S);v.i.length>0&&er(v)}else Ve[0]!="stop"&&Ve[0]!="close"||tr(v,7);else v.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?tr(v,7):Ee(v):Ve[0]!="noop"&&v.l&&v.l.qa(Ve),v.A=0)}}Xr(4)}catch{}}var Nd=class{constructor(u,m){this.g=u,this.map=m}};function Nu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ou(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mu(u){return u.h?1:u.g?u.g.size:0}function ns(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wr(u,m){u.g?u.g.add(m):u.h=m}function Ra(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Nu.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ba(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return k(u.i)}var ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Re(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let F,U=null;S>=0?(F=u[v].substring(0,S),U=u[v].substring(S+1)):F=u[v],m(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Oe(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Oe?(this.l=u.l,vn(this,u.j),this.o=u.o,this.g=u.g,wn(this,u.u),this.h=u.h,rs(this,is(u.i)),this.m=u.m):u&&(m=String(u).match(ei))?(this.l=!1,vn(this,m[1]||"",!0),this.o=xr(m[2]||""),this.g=xr(m[3]||"",!0),wn(this,m[4]),this.h=xr(m[5]||"",!0),rs(this,m[6]||"",!0),this.m=xr(m[7]||"")):(this.l=!1,this.i=new On(null,this.l))}Oe.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qn(m,Du,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qn(m,Du,!0),"@"),u.push(ae(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Qn(v,v.charAt(0)=="/"?Er:Gs,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Qn(v,Tr)),u.join("")},Oe.prototype.resolve=function(u){const m=Bt(this);let v=!!u.j;v?vn(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var S=u.h;if(v)wn(m,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=m.h.lastIndexOf("/");F!=-1&&(S=m.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const U=[];for(let te=0;te<F.length;){const ge=F[te++];ge=="."?S&&te==F.length&&U.push(""):ge==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),S&&te==F.length&&U.push("")):(U.push(ge),S=!0)}S=U.join("/")}else S=F}return v?m.h=S:v=u.i.toString()!=="",v?rs(m,is(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Bt(u){return new Oe(u)}function vn(u,m,v){u.j=v?xr(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function rs(u,m,v){m instanceof On?(u.i=m,La(u.i,u.l)):(v||(m=Qn(m,tt)),u.i=new On(m,u.l))}function se(u,m,v){u.i.set(m,v)}function Ue(u){return se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xr(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qn(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Kt),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Du=/[#\/\?@]/g,Gs=/[#\?:]/g,Er=/[#\?]/g,tt=/[#\?@]/g,Tr=/#/g;function On(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function on(u){u.g||(u.g=new Map,u.h=0,u.i&&Re(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=On.prototype,t.add=function(u,m){on(this),this.i=null,u=Yn(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Zs(u,m){on(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ti(u,m){return on(u),m=Yn(u,m),u.g.has(m)}t.forEach=function(u,m){on(this),this.g.forEach(function(v,S){v.forEach(function(F){u.call(m,F,S,this)},this)},this)};function Ks(u,m){on(u);let v=[];if(typeof m=="string")ti(u,m)&&(v=v.concat(u.g.get(Yn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}t.set=function(u,m){return on(this),this.i=null,u=Yn(this,u),ti(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Ks(this,u),u.length>0?String(u[0]):m):m};function Qs(u,m,v){Zs(u,m),v.length>0&&(u.i=null,u.g.set(Yn(u,m),k(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const F=ae(v);v=Ks(this,v);for(let U=0;U<v.length;U++){let te=F;v[U]!==""&&(te+="="+ae(v[U])),u.push(te)}}return this.i=u.join("&")};function is(u){const m=new On;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function La(u,m){m&&!u.j&&(on(u),u.i=null,u.g.forEach(function(v,S){const F=S.toLowerCase();S!=F&&(Zs(this,S),Qs(this,F,v))},u)),u.j=m}function Ys(u,m){const v=new Ji;if(l.Image){const S=new Image;S.onload=y(xn,v,"TestLoadImage: loaded",!0,m,S),S.onerror=y(xn,v,"TestLoadImage: error",!1,m,S),S.onabort=y(xn,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=y(xn,v,"TestLoadImage: timeout",!1,m,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Vu(u,m){const v=new Ji,S=new AbortController,F=setTimeout(()=>{S.abort(),xn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(U=>{clearTimeout(F),U.ok?xn(v,"TestPingServer: ok",!0,m):xn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),xn(v,"TestPingServer: error",!1,m)})}function xn(u,m,v,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(v)}catch{}}function Od(){this.g=new Tu}function me(u){this.i=u.Sb||null,this.h=u.ab||!1}w(me,Sa),me.prototype.g=function(){return new Ut(this.i,this.h)};function Ut(u,m){yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ut,yt),t=Ut.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Sr(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;je(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function je(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ni(this):Sr(this),this.readyState==3&&je(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ni(this))},t.Na=function(u){this.g&&(this.response=u,ni(this))},t.ga=function(){this.g&&ni(this)};function ni(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Sr(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xs(u){let m="";return le(u,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function ss(u,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Xs(v),typeof u=="string"?v!=null&&ae(v):se(u,m,v))}function De(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(De,yt);var Na=/^https?$/i,os=["POST","PUT"];t=De.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ku.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){lt(this,U);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)v.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())v.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),F=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(os,m,void 0)>=0)||S||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,te]of v)this.g.setRequestHeader(U,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){lt(this,U)}};function lt(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Xn(u),as(u)}function Xn(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Oa(this):this.Xa())},t.Xa=function(){Oa(this)};function Oa(u){if(u.h&&typeof o<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=U===0){let te=String(u.D).match(ei)[1]||null;!te&&l.self&&l.self.location&&(te=l.self.location.protocol.slice(0,-1)),S=!Na.test(te?te.toLowerCase():"")}v=S}if(v)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var F=Jn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Xn(u)}}finally{as(u)}}}}function as(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||vt(u,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),kd(m)}};function Ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var v=Au(u[S]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=m[F]||[];m[F]=U,U.push(v)}X(m,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Va(u){this.za=0,this.i=[],this.j=new Ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ls("baseRetryDelayMs",5e3,u),this.Za=ls("retryDelaySeedMs",1e4,u),this.Ta=ls("forwardChannelMaxRetries",2,u),this.va=ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Nu(u&&u.concurrentRequestLimit),this.Ba=new Od,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Va.prototype,t.ka=8,t.I=1,t.connect=function(u,m,v,S){wt(0),this.W=u,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Ba(this,null,this.W),er(this)};function Ee(u){if(Qt(u),u.I==3){var m=u.V++,v=Bt(u.J);if(se(v,"SID",u.M),se(v,"RID",m),se(v,"TYPE","terminate"),Ir(u,v),m=new Nn(u,u.j,m),m.M=2,m.A=Ue(Bt(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&l.Image&&(new Image().src=m.A,v=!0),v||(m.g=Ua(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$s(m)}Mn(u)}function Js(u){u.g&&(Fa(u),u.g.cancel(),u.g=null)}function Qt(u){Js(u),u.v&&(l.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function er(u){if(!Ou(u.h)&&!u.m){u.m=!0;var m=u.Ea;Q||C(),J||(Q(),J=!0),b.add(m,u),u.D=0}}function zu(u,m){return Mu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xi(p(u.Ea,u,m),Bu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Nn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=he(U),Ke(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Fu(this,F,m),v=Bt(this.J),se(v,"RID",u),se(v,"CVER",22),this.G&&se(v,"X-HTTP-Session-Id",this.G),Ir(this,v),U&&(this.R?m="headers="+ae(Xs(U))+"&"+m:this.u&&ss(v,this.u,U)),wr(this.h,F),this.Ra&&se(v,"TYPE","init"),this.S?(se(v,"$req",m),se(v,"SID","null"),F.U=!0,Hs(F,v,null)):Hs(F,v,m),this.I=2}}else this.I==3&&(u?ju(this,u):this.i.length==0||Ou(this.h)||ju(this))};function ju(u,m){var v;m?v=m.l:v=u.V++;const S=Bt(u.J);se(S,"SID",u.M),se(S,"RID",v),se(S,"AID",u.K),Ir(u,S),u.u&&u.o&&ss(S,u.u,u.o),v=new Nn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Fu(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),wr(u.h,v),Hs(v,S,m)}function Ir(u,m){u.H&&le(u.H,function(v,S){se(m,S,v)}),u.l&&le({},function(v,S){se(m,S,v)})}function Fu(u,m,v){v=Math.min(u.i.length,v);const S=u.l?p(u.l.Ka,u.l,u):null;e:{var F=u.i;let ge=-1;for(;;){const Me=["count="+v];ge==-1?v>0?(ge=F[0].g,Me.push("ofs="+ge)):ge=0:Me.push("ofs="+ge);let Ve=!0;for(let rt=0;rt<v;rt++){var U=F[rt].g;const En=F[rt].map;if(U-=ge,U<0)ge=Math.max(0,F[rt].g-100),Ve=!1;else try{U="req"+U+"_"||"";try{var te=En instanceof Map?En:Object.entries(En);for(const[Dn,Tn]of te){let nr=Tn;h(Tn)&&(nr=Fs(Tn)),Me.push(U+Dn+"="+encodeURIComponent(nr))}}catch(Dn){throw Me.push(U+"type="+encodeURIComponent("_badmap")),Dn}}catch{S&&S(En)}}if(Ve){te=Me.join("&");break e}}te=void 0}return u=u.i.splice(0,v),m.G=u,te}function za(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Q||C(),J||(Q(),J=!0),b.add(m,u),u.A=0}}function ja(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xi(p(u.Da,u),Bu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xi(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Js(this),eo(this))};function Fa(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function eo(u){u.g=new Nn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Bt(u.na);se(m,"RID","rpc"),se(m,"SID",u.M),se(m,"AID",u.K),se(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&se(m,"TO",u.ia),se(m,"TYPE","xmlhttp"),Ir(u,m),u.u&&u.o&&ss(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ue(Bt(m)),v.u=null,v.R=!0,vr(v,u)}t.Va=function(){this.C!=null&&(this.C=null,Js(this),ja(this),wt(19))};function to(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function an(u,m){var v=null;if(u.g==m){to(u),Fa(u),u.g=null;var S=2}else if(ns(u.h,m))v=m.G,Ra(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;S=Us(),vt(S,new Cu(S,v)),er(u)}else za(u);else if(F=m.m,F==3||F==0&&m.X>0||!(S==1&&zu(u,m)||S==2&&ja(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),F){case 1:tr(u,5);break;case 4:tr(u,10);break;case 3:tr(u,6);break;default:tr(u,2)}}}function Bu(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function tr(u,m){if(u.j.info("Error code "+m),m==2){var v=p(u.bb,u),S=u.Ua;const F=!S;S=new Oe(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vn(S,"https"),Ue(S),F?Ys(S.toString(),v):Vu(S.toString(),v)}else wt(2);u.I=0,u.l&&u.l.pa(m),Mn(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Mn(u){if(u.I=0,u.ja=[],u.l){const m=ba(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ja,m),z(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function Ba(u,m,v){var S=v instanceof Oe?Bt(v):new Oe(v);if(S.g!="")m&&(S.g=m+"."+S.g),wn(S,S.u);else{var F=l.location;S=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const U=new Oe(null);S&&vn(U,S),m&&(U.g=m),F&&wn(U,F),v&&(U.h=v),S=U}return v=u.G,m=u.wa,v&&m&&se(S,v,m),se(S,"VER",u.ka),Ir(u,S),S}function Ua(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new De(new me({ab:v})):new De(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function no(){}t=no.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ro(){}ro.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){yt.call(this),this.g=new Va(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}w(Lt,yt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ee(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Fs(u),u=v);m.i.push(new Nd(m.Ya++,u)),m.I==3&&er(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ee(this.g),delete this.g,Lt.Z.N.call(this)};function Wa(u){Yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Wa,Yi);function Uu(){Bs.call(this),this.status=1}w(Uu,Bs);function ri(u){this.g=u}w(ri,no),ri.prototype.ra=function(){vt(this.g,"a")},ri.prototype.qa=function(u){vt(this.g,new Wa(u))},ri.prototype.pa=function(u){vt(this.g,new Uu)},ri.prototype.oa=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Yx=function(){return new ro},Qx=function(){return Us()},Kx=yr,kp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Mc=Ws,Pu.COMPLETE="complete",Zx=Pu,Su.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",yt.prototype.listen=yt.prototype.J,ll=Su,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,Gx=De}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",Uy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Gm("@firebase/firestore");function po(){return ks.logLevel}function ie(t,...e){if(ks.logLevel<=Pe.DEBUG){const n=e.map(Qm);ks.debug(`Firestore (${ca}): ${t}`,...n)}}function Wr(t,...e){if(ks.logLevel<=Pe.ERROR){const n=e.map(Qm);ks.error(`Firestore (${ca}): ${t}`,...n)}}function Qo(t,...e){if(ks.logLevel<=Pe.WARN){const n=e.map(Qm);ks.warn(`Firestore (${ca}): ${t}`,...n)}}function Qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xx(t,r,n)}function Xx(t,e,n){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wr(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Xx(e,s,r)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class Qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Yk{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new Jx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class Xk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Xk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tA(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Ap(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return vf(s)===vf(o)?ke(s,o):vf(s)?1:-1}return ke(t.length,e.length)}const nA=55296,rA=57343;function vf(t){const e=t.charCodeAt(0);return e>=nA&&e<=rA}function Yo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=or.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ke(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),s=or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?or.extractNumericId(e).compare(or.extractNumericId(n)):Ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class We extends or{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new We(n)}static emptyPath(){return new We([])}}const iA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends or{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return iA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hy}static keyField(){return new kt([Hy])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(o(),s++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(We.fromString(e))}static fromName(e){return new ue(We.fromString(e).popFirst(5))}static empty(){return new ue(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sA(t,e,n,r){if(e===!0&&r===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $y(t){if(!ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qy(t){if(ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function t1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rd(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!t1(t))throw new ne(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ne(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-62135596800,Zy=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Zy);return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gy)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zy}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:ft("string",Ge._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new Ge(0,0))}static max(){return new _e(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function oA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Mi(s,ue.empty(),e)}function aA(t){return new Mi(t.readTime,t.key,Zl)}class Mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mi(_e.min(),ue.empty(),Zl)}static max(){return new Mi(_e.max(),ue.empty(),Zl)}}function lA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==uA)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>r(d))}),l=!0,o===s&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(s=>s?Z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++h,h===o&&r(l)},y=>s(y))}})}static doWhile(e,n){return new Z((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function hA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function da(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=-1;function sd(t){return t==null}function vh(t){return t===0&&1/t==-1/0}function dA(t){return typeof t=="number"&&Number.isInteger(t)&&!vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="";function fA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ky(e)),e=pA(t.get(n),e);return Ky(e)}function pA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case n1:n+="";break;default:n+=o}}return n}function Ky(t){return t+n1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Pt(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yy(this.data.getIterator())}getIteratorFrom(e){return new Yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new _t(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new i1("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const mA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=mA.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vi(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="server_timestamp",o1="__type__",a1="__previous_value__",l1="__local_write_time__";function Jm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[o1])==null?void 0:r.stringValue)===s1}function od(t){const e=t.mapValue.fields[a1];return Jm(e)?od(e):e}function Kl(t){const e=Di(t.mapValue.fields[l1].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r,s,o,l,h,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const wh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__type__",_A="__max__",vc={mapValue:{}},c1="__vector__",xh="value";function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jm(t)?4:vA(t)?9007199254740991:yA(t)?10:11:pe(28295,{value:t})}function _r(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Di(s.timestampValue),h=Di(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Vi(s.bytesValue).isEqual(Vi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return it(s.geoPointValue.latitude)===it(o.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return it(s.integerValue)===it(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=it(s.doubleValue),h=it(o.doubleValue);return l===h?vh(l)===vh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Qy(l)!==Qy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!_r(l[d],h[d])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function Yl(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Xo(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=it(o.integerValue||o.doubleValue),d=it(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Xy(t.timestampValue,e.timestampValue);case 4:return Xy(Kl(t),Kl(e));case 5:return Ap(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Vi(o),d=Vi(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=ke(h[p],d[p]);if(y!==0)return y}return ke(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=ke(it(o.latitude),it(l.latitude));return h!==0?h:ke(it(o.longitude),it(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var x,k,z,N;const h=o.fields||{},d=l.fields||{},p=(x=h[xh])==null?void 0:x.arrayValue,y=(k=d[xh])==null?void 0:k.arrayValue,w=ke(((z=p==null?void 0:p.values)==null?void 0:z.length)||0,((N=y==null?void 0:y.values)==null?void 0:N.length)||0);return w!==0?w:Jy(p,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===vc.mapValue&&l===vc.mapValue)return 0;if(o===vc.mapValue)return 1;if(l===vc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const x=Ap(d[w],y[w]);if(x!==0)return x;const k=Xo(h[d[w]],p[y[w]]);if(k!==0)return k}return ke(d.length,y.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function Xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Di(t),r=Di(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function Jy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Xo(n[s],r[s]);if(o)return o}return ke(n.length,r.length)}function Jo(t){return Rp(t)}function Rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Rp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Rp(n.fields[l])}`;return s+"}"}(t.mapValue):pe(61005,{value:t})}function Dc(t){switch(zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(t);return e?16+Dc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Dc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hi(r.fields,(o,l)=>{s+=o.length+Dc(l)}),s}(t.mapValue);default:throw pe(13486,{value:t})}}function ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bp(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function tv(t){return!!t&&"nullValue"in t}function nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function yA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[u1])==null?void 0:r.stringValue)===c1}function El(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=El(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=El(t.arrayValue.values[n]);return e}return{...t}}function vA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=h.popLast()}l?r[h.lastSegment()]=El(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new en(El(this.value))}}function h1(t){const e=[];return Hi(t.fields,(n,r)=>{const s=new kt([n]);if(Vc(r)){const o=h1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,s,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new zt(e,0,_e.min(),_e.min(),_e.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new zt(e,1,n,_e.min(),r,s,0)}static newNoDocument(e,n){return new zt(e,2,n,_e.min(),_e.min(),en.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,_e.min(),_e.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.position=e,this.inclusive=n}}function rv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(l.referenceValue),n.key):r=Xo(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function iv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function wA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{}class dt extends d1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EA(e,n,r):n==="array-contains"?new IA(e,r):n==="in"?new CA(e,r):n==="not-in"?new PA(e,r):n==="array-contains-any"?new kA(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TA(e,r):new SA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends d1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return f1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function f1(t){return t.op==="and"}function p1(t){return xA(t)&&f1(t)}function xA(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function Lp(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(p1(t))return t.filters.map(e=>Lp(e)).join(",");{const e=t.filters.map(n=>Lp(n)).join(",");return`${t.op}(${e})`}}function m1(t,e){return t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.field.isEqual(s.field)&&_r(r.value,s.value)}(t,e):t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,h)=>o&&m1(l,s.filters[h]),!0):!1}(t,e):void pe(19439)}function g1(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(g1).join(" ,")+"}"}(t):"Filter"}class EA extends dt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class TA extends dt{constructor(e,n){super(e,"in",n),this.keys=_1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SA extends dt{constructor(e,n){super(e,"not-in",n),this.keys=_1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class IA extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Yl(n.arrayValue,this.value)}}class CA extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class PA extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class kA extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n=null,r=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function sv(t,e=null,n=[],r=[],s=null,o=null,l=null){return new AA(t,e,n,r,s,o,l)}function tg(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iv(t.startAt,e.startAt)&&iv(t.endAt,e.endAt)}function Np(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RA(t,e,n,r,s,o,l,h){return new fa(t,e,n,r,s,o,l,h)}function rg(t){return new fa(t)}function ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y1(t){return t.collectionGroup!==null}function Tl(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new _t(kt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xl(o,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new Xl(kt.keyField(),r))}return e.Ie}function cr(t){const e=ye(t);return e.Ee||(e.Ee=bA(e,Tl(t))),e.Ee}function bA(t,e){if(t.limitType==="F")return sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xl(s.field,o)});const n=t.endAt?new Eh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eh(t.startAt.position,t.startAt.inclusive):null;return sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Op(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mp(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return ng(cr(t),cr(e))&&t.limitType===e.limitType}function v1(t){return`${tg(cr(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>g1(s)).join(", ")}]`),sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Jo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Jo(s)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Tl(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,h,d){const p=rv(l,h,d);return l.inclusive?p<=0:p<0}(r.startAt,Tl(r),s)||r.endAt&&!function(l,h,d){const p=rv(l,h,d);return l.inclusive?p>=0:p>0}(r.endAt,Tl(r),s))}(t,e)}function LA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w1(t){return(e,n)=>{let r=!1;for(const s of Tl(t)){const o=NA(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function NA(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Xo(d,p):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new et(ue.comparator);function Hr(){return OA}const x1=new et(ue.comparator);function ul(...t){let e=x1;for(const n of t)e=e.insert(n.key,n);return e}function E1(t){let e=x1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Sl()}function T1(){return Sl()}function Sl(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const MA=new et(ue.comparator),DA=new _t(ue.comparator);function Ae(...t){let e=DA;for(const n of t)e=e.add(n);return e}const VA=new _t(ke);function zA(){return VA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function S1(t){return{integerValue:""+t}}function jA(t,e){return dA(e)?S1(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function FA(t,e,n){return t instanceof Th?function(s,o){const l={fields:{[o1]:{stringValue:s1},[l1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jm(o)&&(o=od(o)),o&&(l.fields[a1]=o),{mapValue:l}}(n,e):t instanceof Jl?C1(t,e):t instanceof eu?P1(t,e):function(s,o){const l=I1(s,o),h=av(l)+av(s.Ae);return bp(l)&&bp(s.Ae)?S1(h):ig(s.serializer,h)}(t,e)}function BA(t,e,n){return t instanceof Jl?C1(t,e):t instanceof eu?P1(t,e):n}function I1(t,e){return t instanceof Sh?function(r){return bp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Th extends ud{}class Jl extends ud{constructor(e){super(),this.elements=e}}function C1(t,e){const n=k1(e);for(const r of t.elements)n.some(s=>_r(s,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends ud{constructor(e){super(),this.elements=e}}function P1(t,e){let n=k1(e);for(const r of t.elements)n=n.filter(s=>!_r(s,r));return{arrayValue:{values:n}}}class Sh extends ud{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function av(t){return it(t.integerValue||t.doubleValue)}function k1(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jl&&s instanceof Jl||r instanceof eu&&s instanceof eu?Yo(r.elements,s.elements,_r):r instanceof Sh&&s instanceof Sh?_r(r.Ae,s.Ae):r instanceof Th&&s instanceof Th}(t.transform,e.transform)}class WA{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function A1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sg(t.key,qn.none()):new du(t.key,t.data,qn.none());{const n=t.data,r=en.empty();let s=new _t(kt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new $i(t.key,r,new dn(s.toArray()),qn.none())}}function HA(t,e,n){t instanceof du?function(s,o,l){const h=s.value.clone(),d=uv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(s,o,l){if(!zc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=uv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(R1(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,r){return t instanceof du?function(o,l,h,d){if(!zc(o.precondition,l))return h;const p=o.value.clone(),y=cv(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(o,l,h,d){if(!zc(o.precondition,l))return h;const p=cv(o.fieldTransforms,d,l),y=l.data;return y.setAll(R1(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(o,l,h){return zc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function $A(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=I1(r.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(r.field,o))}return n||null}function lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Yo(r,s,(o,l)=>UA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends cd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $i extends cd{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function R1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uv(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);r.set(o.field,BA(l,h,n[s]))}return r}function cv(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,FA(o,l,e))}return r}class sg extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qA extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&HA(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T1();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=A1(l,h);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>lv(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>lv(n,r))}}class og{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return MA}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new og(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,be;function QA(t){switch(t){case G.OK:return pe(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function b1(t){if(t===void 0)return Wr("GRPC error has no .code"),G.UNKNOWN;switch(t){case ct.OK:return G.OK;case ct.CANCELLED:return G.CANCELLED;case ct.UNKNOWN:return G.UNKNOWN;case ct.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ct.INTERNAL:return G.INTERNAL;case ct.UNAVAILABLE:return G.UNAVAILABLE;case ct.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ct.NOT_FOUND:return G.NOT_FOUND;case ct.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ct.ABORTED:return G.ABORTED;case ct.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ct.DATA_LOSS:return G.DATA_LOSS;default:return pe(39323,{code:t})}}(be=ct||(ct={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Ri([4294967295,4294967295],0);function hv(t){const e=YA().encode(t),n=new qx;return n.update(e),new Uint8Array(n.digest())}function dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([s,o],0)]}class ag{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cl(`Invalid padding: ${n}`);if(r<0)throw new cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ri.fromNumber(r)));return s.compare(XA)===1&&(s=new Ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hv(e),[r,s]=dv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ag(o,s,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=hv(e),[r,s]=dv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hd(_e.min(),s,new et(ke),Hr(),Ae())}}class fu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class L1{constructor(e,n){this.targetId=e,this.Ce=n}}class N1{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fv{constructor(){this.ve=0,this.Fe=pv(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pe(38017,{changeType:o})}}),new fu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hr(),this.Je=wc(),this.He=wc(),this.Ye=new et(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Np(o))if(r===0){const l=new ue(o.path);this.et(n,l,zt.newNoDocument(l,_e.min()))}else ze(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Vi(r).toUint8Array()}catch(d){if(d instanceof i1)return Qo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ag(l,s,o)}catch(d){return Qo(d instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Np(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,zt.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=Ae();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new hd(e,n,this.Ye,this.je,r);return this.je=Hr(),this.Je=wc(),this.He=wc(),this.Ye=new et(ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wc(){return new et(ue.comparator)}function pv(){return new et(ue.comparator)}const eR={asc:"ASCENDING",desc:"DESCENDING"},tR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nR={and:"AND",or:"OR"};class rR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function Ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iR(t,e){return Ih(t,e.toTimestamp())}function hr(t){return ze(!!t,49232),_e.fromTimestamp(function(n){const r=Di(n);return new Ge(r.seconds,r.nanos)}(t))}function lg(t,e){return Vp(t,e).canonicalString()}function Vp(t,e){const n=function(s){return new We(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M1(t){const e=We.fromString(t);return ze(F1(e),10190,{key:e.toString()}),e}function zp(t,e){return lg(t.databaseId,e.path)}function wf(t,e){const n=M1(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(V1(n))}function D1(t,e){return lg(t.databaseId,e)}function sR(t){const e=M1(t);return e.length===4?We.emptyPath():V1(e)}function jp(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function V1(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mv(t,e,n){return{name:zp(t,e),fields:n.value.mapValue.fields}}function oR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(ze(y===void 0||typeof y=="string",58123),bt.fromBase64String(y||"")):(ze(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),bt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?G.UNKNOWN:b1(p.code);return new ne(y,p.message||"")}(l);n=new N1(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wf(t,r.document.name),o=hr(r.document.updateTime),l=r.document.createTime?hr(r.document.createTime):_e.min(),h=new en({mapValue:{fields:r.document.fields}}),d=zt.newFoundDocument(s,o,l,h),p=r.targetIds||[],y=r.removedTargetIds||[];n=new jc(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wf(t,r.document),o=r.readTime?hr(r.readTime):_e.min(),l=zt.newNoDocument(s,o),h=r.removedTargetIds||[];n=new jc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wf(t,r.document),o=r.removedTargetIds||[];n=new jc([],o,s,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new KA(s,o),h=r.targetId;n=new L1(h,l)}}return n}function aR(t,e){let n;if(e instanceof du)n={update:mv(t,e.key,e.value)};else if(e instanceof sg)n={delete:zp(t,e.key)};else if(e instanceof $i)n={update:mv(t,e.key,e.data),updateMask:gR(e.fieldMask)};else{if(!(e instanceof qA))return pe(16599,{Vt:e.type});n={verify:zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Th)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Sh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw pe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:iR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(t,e.precondition)),n}function lR(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?hr(s.updateTime):hr(o);return l.isEqual(_e.min())&&(l=hr(o)),new WA(l,s.transformResults||[])}(n,e))):[]}function uR(t,e){return{documents:[D1(t,e.path)]}}function cR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D1(t,s);const o=function(p){if(p.length!==0)return j1(Zn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(x){return{field:go(x.field),direction:fR(x.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Dp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function hR(t){let e=sR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(w){const x=z1(w);return x instanceof Zn&&p1(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(x=>function(z){return new Xl(_o(z.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(x))}(n.orderBy));let h=null;n.limit&&(h=function(w){let x;return x=typeof w=="object"?w.value:w,sd(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(w){const x=!!w.before,k=w.values||[];return new Eh(k,x)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const x=!w.before,k=w.values||[];return new Eh(k,x)}(n.endAt)),RA(e,s,l,o,h,"F",d,p)}function dR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_o(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_o(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_o(n.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_o(n.unaryFilter.field);return dt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return dt.create(_o(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>z1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function fR(t){return eR[t]}function pR(t){return tR[t]}function mR(t){return nR[t]}function go(t){return{fieldPath:t.canonicalString()}}function _o(t){return kt.fromServerFormat(t.fieldPath)}function j1(t){return t instanceof dt?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(tv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(tv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:pR(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(s=>j1(s));return r.length===1?r[0]:{compositeFilter:{op:mR(n.op),filters:r}}}(t):pe(54877,{filter:t})}function gR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,s,o=_e.min(),l=_e.min(),h=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.yt=e}}function yR(t){const e=hR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Cn=new wR}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Mi.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(We.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B1=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(B1,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="LruGarbageCollector",xR=1048576;function yv([t,e],[n,r]){const s=ke(t,n);return s===0?ke(e,r):s}class ER{constructor(e){this.Ir=e,this.buffer=new _t(yv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(_v,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){da(n)?ie(_v,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}}class SR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(id.ce);const r=new ER(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(gv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,h=Date.now(),this.removeTargets(e,r,n))).next(w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),po()<=Pe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function IR(t,e){return new SR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Il(r.mutation,s,dn.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=ul();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,s){let o=Hr();const l=Sl(),h=function(){return Sl()}();return n.forEach((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof $i)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),Il(y.mutation,p,y.mutation.getFieldMask(),Ge.now())):l.set(p.key,dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>h.set(p,new PR(y,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Sl();let s=new et((l,h)=>l-h),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||dn.empty();y=h.applyToLocalView(p,y),r.set(d,y);const w=(s.get(h.batchId)||Ae()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,w=T1();y.forEach(x=>{if(!o.has(x)){const k=A1(n.get(x),r.get(x));k!==null&&w.set(x,k),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return Z.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return ue.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):Z.resolve(gs());let h=Zl,d=o;return l.next(p=>Z.forEach(p,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(y)?Z.resolve():this.remoteDocumentCache.getEntry(e,y).next(x=>{d=d.insert(y,x)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ae())).next(y=>({batchId:h,changes:E1(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=ul();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const p=function(w,x){return new fa(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((w,x)=>{l=l.insert(w,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,zt.newInvalidDocument(y)))});let h=ul();return l.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Il(y.mutation,p,dn.empty(),Ge.now()),ld(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yR(s.bundledQuery),readTime:hr(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.overlays=new et(ue.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return Z.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const s=gs(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new et((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=gs(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=gs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return Z.resolve(h)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ZA(n,r));let o=this.qr.get(n);o===void 0&&(o=Ae(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new _t(Et.$r),this.Ur=new _t(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new We([])),r=new Et(n,e),s=new Et(n,e+1),o=[];return this.Ur.forEachInRange([r,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new We([])),r=new Et(n,e),s=new Et(n,e+1);let o=Ae();return this.Ur.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Et.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new GA(o,n,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Et(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(ke);return n.forEach(s=>{const o=new Et(s,0),l=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ue.isDocumentKey(o)||(o=o.child(""));const l=new Et(new ue(o),0);let h=new _t(ke);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),Z.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,s=>{const o=new Et(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=function(){return new et(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():zt.newInvalidDocument(s))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Hr();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||lA(aA(y),r)<=0||(s.has(y.key)||ld(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,r,s){pe(9500)}ii(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OR(this)}getSize(e){return Z.resolve(this.size)}}class OR extends CR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.persistence=e,this.si=new Os(n=>tg(n),ng),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=ea.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.ui={},this.overlays={},this.ci=new id(0),this.li=!1,this.li=!0,this.hi=new bR,this.referenceDelegate=e(this),this.Pi=new MR(this),this.indexManager=new vR,this.remoteDocumentCache=function(s){return new NR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new _R(n),this.Ii=new AR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new LR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new DR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class DR extends cA{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,r=>{const s=ue.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.pi=new Os(r=>fA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=IR(this,n)}static mi(e,n){return new Ch(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?Z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dc(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new hg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bP()?8:hA(Ft())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new VR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=Pe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(po()<=Pe.DEBUG&&ie("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=Pe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):Z.resolve())}ys(e,n){if(ov(n))return Z.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mp(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ae(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Mp(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,r,s){return ov(n)||s.isEqual(_e.min())?Z.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?Z.resolve(null):(po()<=Pe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,l,n,oA(s,Zl)).next(h=>h))})}Ds(e,n){let r=new _t(w1(e));return n.forEach((s,o)=>{ld(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return po()<=Pe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Mi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",jR=3e8;class FR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(ke),this.xs=new Os(o=>tg(o),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BR(t,e,n,r){return new FR(t,e,n,r)}async function W1(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let d=Ae();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function UR(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const w=p.batch,x=w.keys();let k=Z.resolve();return x.forEach(z=>{k=k.next(()=>y.getEntry(d,z)).next(N=>{const j=p.docVersions.get(z);ze(j!==null,48541),N.version.compareTo(j)<0&&(w.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),y.addEntry(N)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=Ae();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function H1(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function WR(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((y,w)=>{const x=s.get(w);if(!x)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(o,y.addedDocuments,w)));let k=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(bt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),s=s.insert(w,k),function(N,j,R){return N.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=jR?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(x,k,y)&&h.push(n.Pi.updateTargetData(o,k))});let d=Hr(),p=Ae();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(HR(o,l,e.documentUpdates).next(y=>{d=y.ks,p=y.qs})),!r.isEqual(_e.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next(w=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function HR(t,e,n){let r=Ae(),s=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Hr();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(_e.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie(dg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function $R(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qR(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,Z.resolve(s)):n.Pi.allocateTargetId(r).next(l=>(s=new yi(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Fp(t,e,n){const r=ye(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!da(l))throw l;ie(dg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vv(t,e,n){const r=ye(t);let s=_e.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const w=ye(d),x=w.xs.get(y);return x!==void 0?Z.resolve(w.Ms.get(x)):w.Pi.getTargetData(p,y)}(r,l,cr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:_e.min(),n?o:Ae())).next(h=>(GR(r,LA(e),h),{documents:h,Qs:o})))}function GR(t,e,n){let r=t.Os.get(e)||_e.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class wv{constructor(){this.activeTargetIds=zA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.Mo=new wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="ConnectivityMonitor";class Ev{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(xv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function Bp(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="RestConnection",QR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===wh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=Bp(),h=this.zo(e,n.toUriEncodedString());ie(xf,`Sending RPC '${e}' ${l}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),y=la(p);return this.Jo(e,h,d,r,y).then(w=>(ie(xf,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Qo(xf,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=QR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class JR extends YR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=Bp();return new Promise((h,d)=>{const p=new Gx;p.setWithCredentials(!0),p.listenOnce(Zx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Mc.NO_ERROR:const w=p.getResponseJson();ie(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Mc.TIMEOUT:ie(Mt,`RPC '${e}' ${l} timed out`),d(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const x=p.getStatus();if(ie(Mt,`RPC '${e}' ${l} failed with status:`,x,"response text:",p.getResponseText()),x>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const N=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(T)>=0?T:G.UNKNOWN}(z.status);d(new ne(N,z.message))}else d(new ne(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ne(G.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ie(Mt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);ie(Mt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",y,r,15)})}T_(e,n,r){const s=Bp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Yx(),h=Qx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=o.join("");ie(Mt,`Creating RPC '${e}' stream ${s}: ${y}`,d);const w=l.createWebChannel(y,d);this.I_(w);let x=!1,k=!1;const z=new XR({Yo:j=>{k?ie(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(x||(ie(Mt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ie(Mt,`RPC '${e}' stream ${s} sending:`,j),w.send(j))},Zo:()=>w.close()}),N=(j,R,T)=>{j.listen(R,O=>{try{T(O)}catch(H){setTimeout(()=>{throw H},0)}})};return N(w,ll.EventType.OPEN,()=>{k||(ie(Mt,`RPC '${e}' stream ${s} transport opened.`),z.o_())}),N(w,ll.EventType.CLOSE,()=>{k||(k=!0,ie(Mt,`RPC '${e}' stream ${s} transport closed`),z.a_(),this.E_(w))}),N(w,ll.EventType.ERROR,j=>{k||(k=!0,Qo(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),z.a_(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),N(w,ll.EventType.MESSAGE,j=>{var R;if(!k){const T=j.data[0];ze(!!T,16349);const O=T,H=(O==null?void 0:O.error)||((R=O[0])==null?void 0:R.error);if(H){ie(Mt,`RPC '${e}' stream ${s} received error:`,H);const Q=H.status;let J=function(I){const M=ct[I];if(M!==void 0)return b1(M)}(Q),b=H.message;J===void 0&&(J=G.INTERNAL,b="Unknown error status: "+Q+" with message "+H.message),k=!0,z.a_(new ne(J,b)),w.close()}else ie(Mt,`RPC '${e}' stream ${s} received:`,T),z.u_(T)}}),N(h,Kx.STAT_EVENT,j=>{j.stat===kp.PROXY?ie(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===kp.NOPROXY&&ie(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{z.__()},0),z}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new rR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="PersistentStream";class q1{constructor(e,n,r,s,o,l,h,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Wr(n.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ne(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(Tv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(Tv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eb extends q1{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oR(this.serializer,e),r=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?hr(l.readTime):_e.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Np(d)?{documents:uR(o,d)}:{query:cR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=O1(o,l.resumeToken);const p=Dp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(_e.min())>0){h.readTime=Ih(o,l.snapshotVersion.toTimestamp());const p=Dp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=dR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.q_(n)}}class tb extends q1{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lR(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{}class rb extends nb{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Vp(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Vp(n,r),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ib{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class sb{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Ms(this)&&(ie(As,"Restarting streams for network reachability change."),await async function(d){const p=ye(d);p.Ea.add(4),await pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await fd(p)}(this))})}),this.Ra=new ib(r,s)}}async function fd(t){if(Ms(t))for(const e of t.da)await e(!0)}async function pu(t){for(const e of t.da)await e(!1)}function G1(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gg(n)?mg(n):pa(n).O_()&&pg(n,e))}function fg(t,e){const n=ye(t),r=pa(n);n.Ia.delete(e),r.O_()&&Z1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ms(n)&&n.Ra.set("Unknown"))}function pg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).Y_(e)}function Z1(t,e){t.Va.Ue(e),pa(t).Z_(e)}function mg(t){t.Va=new JA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Ra.ua()}function gg(t){return Ms(t)&&!pa(t).x_()&&t.Ia.size>0}function Ms(t){return ye(t).Ea.size===0}function K1(t){t.Va=void 0}async function ob(t){t.Ra.set("Online")}async function ab(t){t.Ia.forEach((e,n)=>{pg(t,e)})}async function lb(t,e){K1(t),gg(t)?(t.Ra.ha(e),mg(t)):t.Ra.set("Unknown")}async function ub(t,e,n){if(t.Ra.set("Online"),e instanceof N1&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(r){ie(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ph(t,r)}else if(e instanceof jc?t.Va.Ze(e):e instanceof L1?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const r=await H1(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(bt.EMPTY_BYTE_STRING,y.snapshotVersion)),Z1(o,d);const w=new yi(y.target,d,p,y.sequenceNumber);pg(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ie(As,"Failed to raise snapshot:",r),await Ph(t,r)}}async function Ph(t,e,n){if(!da(e))throw e;t.Ea.add(1),await pu(t),t.Ra.set("Offline"),n||(n=()=>H1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(As,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fd(t)})}function Q1(t,e){return e().catch(n=>Ph(t,n,e))}async function pd(t){const e=ye(t),n=ji(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;cb(e);)try{const s=await $R(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hb(e,s)}catch(s){await Ph(e,s)}Y1(e)&&X1(e)}function cb(t){return Ms(t)&&t.Ta.length<10}function hb(t,e){t.Ta.push(e);const n=ji(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Y1(t){return Ms(t)&&!ji(t).x_()&&t.Ta.length>0}function X1(t){ji(t).start()}async function db(t){ji(t).ra()}async function fb(t){const e=ji(t);for(const n of t.Ta)e.ea(n.mutations)}async function pb(t,e,n){const r=t.Ta.shift(),s=og.from(r,e,n);await Q1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pd(t)}async function mb(t,e){e&&ji(t).X_&&await async function(r,s){if(function(l){return QA(l)&&l!==G.ABORTED}(s.code)){const o=r.Ta.shift();ji(r).B_(),await Q1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pd(r)}}(t,e),Y1(t)&&X1(t)}async function Sv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(As,"RemoteStore received new credentials");const r=Ms(n);n.Ea.add(3),await pu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fd(n)}async function gb(t,e){const n=ye(t);e?(n.Ea.delete(2),await fd(n)):e||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function pa(t){return t.ma||(t.ma=function(n,r,s){const o=ye(n);return o.sa(),new eb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:ob.bind(null,t),t_:ab.bind(null,t),r_:lb.bind(null,t),H_:ub.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gg(t)?mg(t):t.Ra.set("Unknown")):(await t.ma.stop(),K1(t))})),t.ma}function ji(t){return t.fa||(t.fa=function(n,r,s){const o=ye(n);return o.sa(),new tb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:db.bind(null,t),r_:mb.bind(null,t),ta:fb.bind(null,t),na:pb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pd(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(As,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,h=new _g(e,n,l,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Wr("AsyncQueue",`${e}: ${t}`),da(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.ga=new et(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ta{constructor(e,n,r,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ta(e,n,Vo.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class yb{constructor(){this.queries=Cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ye(n),o=s.queries;s.queries=Cv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(r)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Cv(){return new Os(t=>v1(t),ad)}async function J1(t,e){const n=ye(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new _b,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=yg(l,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&vg(n)}async function eE(t,e){const n=ye(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vb(t,e){const n=ye(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&vg(n)}function wb(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function vg(t){t.Ca.forEach(e=>{e.next()})}var Up,Pv;(Pv=Up||(Up={})).Ma="default",Pv.Cache="cache";class tE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.key=e}}class rE{constructor(e){this.key=e}}class xb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=w1(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Iv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,w)=>{const x=s.get(y),k=ld(this.query,w)?w:null,z=!!x&&this.mutatedKeys.has(x.key),N=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;x&&k?x.data.isEqual(k.data)?z!==N&&(r.track({type:3,doc:k}),j=!0):this.su(x,k)||(r.track({type:2,doc:k}),j=!0,(d&&this.eu(k,d)>0||p&&this.eu(k,p)<0)&&(h=!0)):!x&&k?(r.track({type:0,doc:k}),j=!0):x&&!k&&(r.track({type:1,doc:x}),j=!0,(d||p)&&(h=!0)),j&&(k?(l=l.add(k),o=N?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,w)=>function(k,z){const N=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:j})}};return N(k)-N(z)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(r),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new ta(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new rE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new nE(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wg="SyncEngine";class Eb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Tb{constructor(e){this.key=e,this.hu=!1}}class Sb{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Os(h=>v1(h),ad),this.Iu=new Map,this.Eu=new Set,this.du=new et(ue.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ib(t,e,n=!0){const r=uE(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await iE(r,e,n,!0),s}async function Cb(t,e){const n=uE(t);await iE(n,e,!0,!1)}async function iE(t,e,n,r){const s=await qR(t.localStore,cr(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await Pb(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&G1(t.remoteStore,s),h}async function Pb(t,e,n,r,s){t.pu=(w,x,k)=>async function(N,j,R,T){let O=j.view.ru(R);O.Cs&&(O=await vv(N.localStore,j.query,!1).then(({documents:b})=>j.view.ru(b,O)));const H=T&&T.targetChanges.get(j.targetId),Q=T&&T.targetMismatches.get(j.targetId)!=null,J=j.view.applyChanges(O,N.isPrimaryClient,H,Q);return Av(N,j.targetId,J.au),J.snapshot}(t,w,x,k);const o=await vv(t.localStore,e,!0),l=new xb(e,o.Qs),h=l.ru(o.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Av(t,n,p.au);const y=new Eb(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function kb(t,e,n){const r=ye(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(l=>!ad(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fg(r.remoteStore,s.targetId),Wp(r,s.targetId)}).catch(ha)):(Wp(r,s.targetId),await Fp(r.localStore,s.targetId,!0))}async function Ab(t,e){const n=ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fg(n.remoteStore,r.targetId))}async function Rb(t,e,n){const r=Vb(t);try{const s=await function(l,h){const d=ye(l),p=Ge.now(),y=h.reduce((k,z)=>k.add(z.key),Ae());let w,x;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let z=Hr(),N=Ae();return d.Ns.getEntries(k,y).next(j=>{z=j,z.forEach((R,T)=>{T.isValidDocument()||(N=N.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,z)).next(j=>{w=j;const R=[];for(const T of h){const O=$A(T,w.get(T.key).overlayedDocument);O!=null&&R.push(new $i(T.key,O,h1(O.value.mapValue),qn.exists(!0)))}return d.mutationQueue.addMutationBatch(k,p,R,h)}).next(j=>{x=j;const R=j.applyToLocalDocumentSet(w,N);return d.documentOverlayCache.saveOverlays(k,j.batchId,R)})}).then(()=>({batchId:x.batchId,changes:E1(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new et(ke)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(r,s.batchId,n),await mu(r,s.changes),await pd(r.remoteStore)}catch(s){const o=yg(s,"Failed to persist write");n.reject(o)}}async function sE(t,e){const n=ye(t);try{const r=await WR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ze(l.hu,14607):s.removedDocuments.size>0&&(ze(l.hu,42227),l.hu=!1))}),await mu(n,r,e)}catch(r){await ha(r)}}function kv(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ye(l);d.onlineState=h;let p=!1;d.queries.forEach((y,w)=>{for(const x of w.Sa)x.va(h)&&(p=!0)}),p&&vg(d)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bb(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new et(ue.comparator);l=l.insert(o,zt.newNoDocument(o,_e.min()));const h=Ae().add(o),d=new hd(_e.min(),new Map,new et(ke),l,h);await sE(r,d),r.du=r.du.remove(o),r.Au.delete(e),xg(r)}else await Fp(r.localStore,e,!1).then(()=>Wp(r,e,n)).catch(ha)}async function Lb(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await UR(n.localStore,e);aE(n,r,null),oE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mu(n,s)}catch(s){await ha(s)}}async function Nb(t,e,n){const r=ye(t);try{const s=await function(l,h){const d=ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(w=>(ze(w!==null,37113),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);aE(r,e,n),oE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mu(r,s)}catch(s){await ha(s)}}function oE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function aE(t,e,n){const r=ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||lE(t,r)})}function lE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xg(t))}function Av(t,e,n){for(const r of n)r instanceof nE?(t.Ru.addReference(r.key,e),Ob(t,r)):r instanceof rE?(ie(wg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lE(t,r.key)):pe(19791,{wu:r})}function Ob(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(wg,"New document in limbo: "+n),t.Eu.add(r),xg(t))}function xg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(We.fromString(e)),r=t.fu.next();t.Au.set(r,new Tb(n)),t.du=t.du.insert(n,r),G1(t.remoteStore,new yi(cr(rg(n.path)),r,"TargetPurposeLimboResolution",id.ce))}}async function mu(t,e,n){const r=ye(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,d)=>{l.push(r.pu(d,e,n).then(p=>{var y;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){s.push(p);const w=hg.As(d.targetId,p);o.push(w)}}))}),await Promise.all(l),r.Pu.H_(s),await async function(d,p){const y=ye(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(p,x=>Z.forEach(x.Es,k=>y.persistence.referenceDelegate.addReference(w,x.targetId,k)).next(()=>Z.forEach(x.ds,k=>y.persistence.referenceDelegate.removeReference(w,x.targetId,k)))))}catch(w){if(!da(w))throw w;ie(dg,"Failed to update sequence numbers: "+w)}for(const w of p){const x=w.targetId;if(!w.fromCache){const k=y.Ms.get(x),z=k.snapshotVersion,N=k.withLastLimboFreeSnapshotVersion(z);y.Ms=y.Ms.insert(x,N)}}}(r.localStore,o))}async function Mb(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(wg,"User change. New user:",e.toKey());const r=await W1(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne(G.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(n,r.Ls)}}function Db(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function uE(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Db.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bb.bind(null,e),e.Pu.H_=vb.bind(null,e.eventManager),e.Pu.yu=wb.bind(null,e.eventManager),e}function Vb(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nb.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BR(this.persistence,new zR,e.initialUser,this.serializer)}Cu(e){return new U1(cg.mi,this.serializer)}Du(e){return new ZR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class zb extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new U1(r=>Ch.mi(r,n),this.serializer)}}class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mb.bind(null,this.syncEngine),await gb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yb}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=function(o){return new JR(o)}(e.databaseInfo);return function(o,l,h,d){return new rb(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,h){return new sb(r,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>kv(this.syncEngine,n,0),function(){return Ev.v()?new Ev:new KR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,y){const w=new Sb(s,o,l,h,d,p);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ye(s);ie(As,"RemoteStore shutting down."),o.Ea.add(5),await pu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hp.provider={build:()=>new Hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class jb{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ie(Fi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ie(Fi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Fi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await W1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fb(t);ie(Fi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sv(e.remoteStore,s)),t._onlineComponents=e}async function Fb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Fi,"Using user provided OfflineComponentProvider");try{await Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Tf(t,new kh)}}else ie(Fi,"Using default OfflineComponentProvider"),await Tf(t,new zb(void 0));return t._offlineComponents}async function hE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Fi,"Using user provided OnlineComponentProvider"),await Rv(t,t._uninitializedComponentsProvider._online)):(ie(Fi,"Using default OnlineComponentProvider"),await Rv(t,new Hp))),t._onlineComponents}function Bb(t){return hE(t).then(e=>e.syncEngine)}async function dE(t){const e=await hE(t),n=e.eventManager;return n.onListen=Ib.bind(null,e.syncEngine),n.onUnlisten=kb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Cb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ab.bind(null,e.syncEngine),n}function Ub(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new cE({next:x=>{y.Nu(),l.enqueueAndForget(()=>eE(o,w));const k=x.docs.has(h);!k&&x.fromCache?p.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&d&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new tE(rg(h.path),y,{includeMetadataChanges:!0,qa:!0});return J1(o,w)}(await dE(t),t.asyncQueue,e,n,r)),r.promise}function Wb(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new cE({next:x=>{y.Nu(),l.enqueueAndForget(()=>eE(o,w)),x.fromCache&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new tE(h,y,{includeMetadataChanges:!0,qa:!0});return J1(o,w)}(await dE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firestore.googleapis.com",Lv=!0;class Nv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pE,this.ssl=Lv}else this.host=e.host,this.ssl=e.ssl??Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kk;switch(r.type){case"firstParty":return new Jk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),bv.delete(n),r.terminate())}(this),Promise.resolve()}}function Hb(t,e,n,r={}){var p;t=gr(t,md);const s=la(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(zx(`https://${h}`),jx("Firestore",!0)),o.host!==pE&&o.host!==h&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:r};if(!Cs(d,l)&&(t._setSettings(d),r.mockUserToken)){let y,w;if(typeof r.mockUserToken=="string")y=r.mockUserToken,w=Dt.MOCK_USER;else{y=EP(r.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Dt(x)}t._authCredentials=new Qk(new Jx(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hu(n,ot._jsonSchema))return new ot(e,r||null,new ue(We.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:ft("string",ot._jsonSchemaVersion),referencePath:ft("string")};class bi extends Ds{constructor(e,n,r){super(e,n,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ue(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function un(t,e,...n){if(t=It(t),e1("collection","path",e),t instanceof md){const r=We.fromString(e,...n);return qy(r),new bi(t,null,r)}{if(!(t instanceof ot||t instanceof bi))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return qy(r),new bi(t.firestore,null,r)}}function Pn(t,e,...n){if(t=It(t),arguments.length===1&&(e=Ym.newId()),e1("doc","path",e),t instanceof md){const r=We.fromString(e,...n);return $y(r),new ot(t,null,new ue(r))}{if(!(t instanceof ot||t instanceof bi))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return $y(r),new ot(t.firestore,t instanceof bi?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="AsyncQueue";class Mv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $1(this,"async_queue_retry"),this._c=()=>{const r=Ef();r&&ie(Ov,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;ie(Ov,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Dv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=_g.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&pe(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ma extends md{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mv(e),this._firestoreClient=void 0,await e}}}function $b(t,e){const n=typeof t=="object"?t:Wx(),r=typeof t=="string"?t:wh,s=Km(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=wP("firestore");o&&Hb(s,...o)}return s}function Eg(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qb(t),t._firestoreClient}function qb(t){var r,s,o;const e=t._freezeSettings(),n=function(h,d,p,y){return new gA(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fE(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(bt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:ft("string",kn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:ft("string",dr._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fr(e.vectorValues);throw new ne(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:ft("string",fr._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=/^__.*__$/;class Zb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class mE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class Sg{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gE(this.Ac)&&Gb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Kb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}Cc(e,n,r,s=!1){return new Sg({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new Kb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qb(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Cg("Data must be an object, but it was:",l,r);const h=_E(r,l);let d,p;if(o.merge)d=new dn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const x=$p(e,w,n);if(!l.contains(x))throw new ne(G.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);vE(y,x)||y.push(x)}d=new dn(y),p=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,p=l.fieldTransforms;return new Zb(new en(h),d,p)}class _d extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function Yb(t,e,n,r){const s=t.Cc(1,e,n);Cg("Data must be an object, but it was:",s,r);const o=[],l=en.empty();Hi(r,(d,p)=>{const y=Pg(e,d,n);p=It(p);const w=s.yc(y);if(p instanceof _d)o.push(y);else{const x=gu(p,w);x!=null&&(o.push(y),l.set(y,x))}});const h=new dn(o);return new mE(l,h,s.fieldTransforms)}function Xb(t,e,n,r,s,o){const l=t.Cc(1,e,n),h=[$p(e,r,n)],d=[s];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push($p(e,o[x])),d.push(o[x+1]);const p=[],y=en.empty();for(let x=h.length-1;x>=0;--x)if(!vE(p,h[x])){const k=h[x];let z=d[x];z=It(z);const N=l.yc(k);if(z instanceof _d)p.push(k);else{const j=gu(z,N);j!=null&&(p.push(k),y.set(k,j))}}const w=new dn(p);return new mE(y,w,l.fieldTransforms)}function Jb(t,e,n,r=!1){return gu(n,t.Cc(r?4:3,e))}function gu(t,e){if(yE(t=It(t)))return Cg("Unsupported field value:",e,t),_E(t,e);if(t instanceof Tg)return function(r,s){if(!gE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const h of r){let d=gu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:Ih(s.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(s.serializer,o)}}if(r instanceof dr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:O1(s.serializer,r._byteString)};if(r instanceof ot){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fr)return function(l,h){return{mapValue:{fields:{[u1]:{stringValue:c1},[xh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return ig(h.serializer,p)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${rd(r)}`)}(t,e)}function _E(t,e){const n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,s)=>{const o=gu(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function yE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof dr||t instanceof kn||t instanceof ot||t instanceof Tg||t instanceof fr)}function Cg(t,e,n){if(!yE(n)||!t1(n)){const r=rd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $p(t,e,n){if((e=It(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,n)}const e2=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(e2)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ah(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ne(G.INVALID_ARGUMENT,h+t+d)}function vE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t2 extends wE{data(){return super.data()}}function yd(t,e){return typeof e=="string"?Pg(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class xE extends kg{}function Fc(t,e,...n){let r=[];e instanceof kg&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof Ag).length,h=o.filter(d=>d instanceof vd).length;if(l>1||l>0&&h>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vd extends xE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vd(e,n,r)}_apply(e){const n=this._parse(e);return EE(e._query,n),new Ds(e.firestore,e.converter,Op(e._query,n))}_parse(e){const n=Ig(e.firestore);return function(o,l,h,d,p,y,w){let x;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){zv(w,y);const z=[];for(const N of w)z.push(Vv(d,o,N));x={arrayValue:{values:z}}}else x=Vv(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||zv(w,y),x=Jb(h,l,w,y==="in"||y==="not-in");return dt.create(p,y,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bc(t,e,n){const r=e,s=yd("where",t);return vd._create(s,r,n)}class Ag extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)EE(l,d),l=Op(l,d)}(e._query,n),new Ds(e.firestore,e.converter,Op(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends xE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(o,l)}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new fa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function r2(t,e="asc"){const n=e,r=yd("orderBy",t);return Rg._create(r,n)}function Vv(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y1(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!ue.isDocumentKey(r))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ev(t,new ue(r))}if(n instanceof ot)return ev(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rd(n)}.`)}function zv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i2{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[xh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>it(l.doubleValue));return new fr(n)}convertGeoPoint(e){return new dr(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=od(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Di(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);ze(F1(r),9688,{name:e});const s=new Ql(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return s.isEqual(n)||Wr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends wE{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:ft("string",ws._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Uc extends ws{data(e={}){return super.data(e)}}class zo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uc(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Uc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Uc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:o2(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){t=gr(t,ot);const e=gr(t.firestore,ma);return Ub(Eg(e),t._key).then(n=>a2(e,t,n))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:ft("string",zo._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class TE extends i2{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function cn(t){t=gr(t,Ds);const e=gr(t.firestore,ma),n=Eg(e),r=new TE(e);return n2(t._query),Wb(n,t._query).then(s=>new zo(e,r,t,s))}function Lg(t,e,n){t=gr(t,ot);const r=gr(t.firestore,ma),s=s2(t.converter,e);return Ng(r,[Qb(Ig(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function tu(t,e,n,...r){t=gr(t,ot);const s=gr(t.firestore,ma),o=Ig(s);let l;return l=typeof(e=It(e))=="string"||e instanceof gd?Xb(o,"updateDoc",t._key,e,n,r):Yb(o,"updateDoc",t._key,e),Ng(s,[l.toMutation(t._key,qn.exists(!0))])}function Sf(t){return Ng(gr(t.firestore,ma),[new sg(t._key,qn.none())])}function Ng(t,e){return function(r,s){const o=new Vr;return r.asyncQueue.enqueueAndForget(async()=>Rb(await Bb(r),s,o)),o.promise}(Eg(t),e)}function a2(t,e,n){const r=n.docs.get(e._key),s=new TE(t);return new ws(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ca=s})(ua),Ko(new Ps("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new ma(new Yk(r.getProvider("auth-internal")),new eA(l,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(p.options.projectId,y)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ai(By,Uy,e),Ai(By,Uy,"esm2020")})();function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l2=SE,IE=new uu("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Gm("@firebase/auth");function u2(t,...e){Rh.logLevel<=Pe.WARN&&Rh.warn(`Auth (${ua}): ${t}`,...e)}function Wc(t,...e){Rh.logLevel<=Pe.ERROR&&Rh.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw Og(t,...e)}function pr(t,...e){return Og(t,...e)}function CE(t,e,n){const r={...l2(),[e]:n};return new uu("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return CE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IE.create(t,...e)}function fe(t,e,...n){if(!t)throw Og(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wc(e),new Error(e)}function $r(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function c2(){return jv()==="http:"||jv()==="https:"}function jv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c2()||kP()||"connection"in navigator)?navigator.onLine:!0}function d2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,$r(n>e,"Short delay should be less than long delay!"),this.isMobile=IP()||AP()}get(){return h2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){$r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m2=new _u(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qi(t,e,n,r,s={}){return kE(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=cu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return PP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&la(t.emulatorConfig.host)&&(p.credentials="include"),PE.fetch()(await AE(t,t.config.apiHost,n,h),p)})}async function kE(t,e,n){t._canInitEmulator=!1;const r={...f2,...e};try{const s=new _2(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ec(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Ec(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Ec(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw CE(t,y,p);Kn(t,y)}}catch(s){if(s instanceof Gr)throw s;Kn(t,"network-request-failed",{message:String(s)})}}async function wd(t,e,n,r,s={}){const o=await qi(t,e,n,r,s);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function AE(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?Mg(t.config,s):`${t.config.apiScheme}://${s}`;return p2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function g2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),m2.get())})}}function Ec(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}function Fv(t){return t!==void 0&&t.enterprise!==void 0}class y2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return g2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function v2(t,e){return qi(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function bh(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x2(t,e=!1){const n=It(t),r=await n.getIdToken(e),s=Dg(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Cl(If(s.auth_time)),issuedAtTime:Cl(If(s.iat)),expirationTime:Cl(If(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function Dg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ox(n);return s?JSON.parse(s):(Wc("Failed to decode base64 JWT payload"),null)}catch(s){return Wc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(t){const e=Dg(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gr&&E2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var w;const e=t.auth,n=await t.getIdToken(),r=await nu(t,bh(e,{idToken:n}));fe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?RE(s.providerUserInfo):[],l=I2(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function S2(t){const e=It(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function RE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e){const n=await kE(t,{},async()=>{const r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await AE(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&la(t.emulatorConfig.host)&&(d.credentials="include"),PE.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function P2(t,e){return qi(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await C2(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new jo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new T2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x2(this,e)}reload(){return S2(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await nu(this,w2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:k,providerData:z,stsTokenManager:N}=n;fe(w&&N,e,"internal-error");const j=jo.fromJSON(this.name,N);fe(typeof w=="string",e,"internal-error"),oi(r,e.name),oi(s,e.name),fe(typeof x=="boolean",e,"internal-error"),fe(typeof k=="boolean",e,"internal-error"),oi(o,e.name),oi(l,e.name),oi(h,e.name),oi(d,e.name),oi(p,e.name),oi(y,e.name);const R=new Wn({uid:w,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:k,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:j,createdAt:p,lastLoginAt:y});return z&&Array.isArray(z)&&(R.providerData=z.map(T=>({...T}))),d&&(R._redirectEventId=d),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new jo;s.updateFromServerResponse(n);const o=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?RE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new jo;h.updateFromIdToken(r);const d=new Wn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;function Mr(t){$r(t instanceof Function,"Expected a class definition");let e=Uv.get(t);return e?($r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bE.type="NONE";const Wv=bE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t,e,n){return`firebase:${t}:${e}:${n}`}class Fo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Hc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Hc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bh(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fo(Mr(Wv),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Mr(Wv);const l=Hc(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(l);if(y){let w;if(typeof y=="string"){const x=await bh(e,{idToken:y}).catch(()=>{});if(!x)break;w=await Wn._fromGetAccountInfoResponse(e,x,y)}else w=Wn._fromJSON(e,y);p!==o&&(h=w),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Fo(o,e,r):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Fo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ME(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VE(e))return"Blackberry";if(zE(e))return"Webos";if(NE(e))return"Safari";if((e.includes("chrome/")||OE(e))&&!e.includes("edge/"))return"Chrome";if(DE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LE(t=Ft()){return/firefox\//i.test(t)}function NE(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OE(t=Ft()){return/crios\//i.test(t)}function ME(t=Ft()){return/iemobile/i.test(t)}function DE(t=Ft()){return/android/i.test(t)}function VE(t=Ft()){return/blackberry/i.test(t)}function zE(t=Ft()){return/webos/i.test(t)}function Vg(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function k2(t=Ft()){var e;return Vg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function A2(){return RP()&&document.documentMode===10}function jE(t=Ft()){return Vg(t)||DE(t)||zE(t)||VE(t)||/windows phone/i.test(t)||ME(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e=[]){let n;switch(t){case"Browser":n=Hv(Ft());break;case"Worker":n=`${Hv(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=6;class N2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??L2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $v(this),this.idTokenSubscription=new $v(this),this.beforeStateQueue=new R2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mr(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bh(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Li(this));const n=e?It(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b2(this),n=new N2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await P2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[Mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&u2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ga(t){return It(t)}class $v{constructor(e){this.auth=e,this.observer=null,this.addObserver=zP(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M2(t){xd=t}function BE(t){return xd.loadJS(t)}function D2(){return xd.recaptchaEnterpriseScript}function V2(){return xd.gapiScript}function z2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class j2{constructor(){this.enterprise=new F2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class F2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const B2="recaptcha-enterprise",UE="NO_RECAPTCHA";class U2{constructor(e){this.type=B2,this.auth=ga(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{v2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new y2(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Fv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(UE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new j2().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&Fv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=D2();d.length!==0&&(d+=h),BE(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function qv(t,e,n,r=!1,s=!1){const o=new U2(t);let l;if(s)l=UE;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Gv(t,e,n,r,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await qv(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await qv(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t,e){const n=Km(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Cs(o,e??{}))return s;Kn(s,"already-initialized")}return n.initialize({options:e})}function H2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $2(t,e,n){const r=ga(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=WE(e),{host:l,port:h}=q2(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Cs(p,r.config.emulator)&&Cs(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,la(l)?(zx(`${o}//${l}${d}`),jx("Auth",!0)):G2()}function WE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function q2(t){const e=WE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Zv(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Zv(l)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Z2(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e){return wd(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function Y2(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends zg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ru(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ru(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gv(e,n,"signInWithPassword",K2);case"emailLink":return Q2(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gv(e,r,"signUpPassword",Z2);case"emailLink":return Y2(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return wd(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="http://localhost";class Rs extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new Rs(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:X2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(t){const e=ol(al(t)).link,n=e?ol(al(e)).deep_link_id:null,r=ol(al(t)).deep_link_id;return(r?ol(al(r)).link:null)||r||n||e||t}class jg{constructor(e){const n=ol(al(e)),r=n.apiKey??null,s=n.oobCode??null,o=J2(n.mode??null);fe(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eL(e);try{return new jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jg.parseLink(n);return fe(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends HE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends yu{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return di.credential(n,r)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends yu{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends yu{constructor(){super("twitter.com")}static credential(e,n){return Rs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Wn._fromIdTokenResponse(e,r,s),l=Kv(r);return new na({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kv(r);return new na({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Gr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nh(e,n,r,s)}}function $E(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(t,o,e,r):o})}async function tL(t,e,n=!1){const r=await nu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return na._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e,n=!1){const{auth:r}=t;if(Un(r.app))return Promise.reject(Li(r));const s="reauthenticate";try{const o=await nu(t,$E(r,s,e,t),n);fe(o.idToken,r,"internal-error");const l=Dg(o.idToken);fe(l,r,"internal-error");const{sub:h}=l;return fe(t.uid===h,r,"user-mismatch"),na._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t,e,n=!1){if(Un(t.app))return Promise.reject(Li(t));const r="signIn",s=await $E(t,r,e),o=await na._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function rL(t,e){return qE(ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t){const e=ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sL(t,e,n){return Un(t.app)?Promise.reject(Li(t)):rL(It(t),_a.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iL(t),r})}function oL(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function aL(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function lL(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function uL(t){return It(t).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=1e3,hL=10;class ZE extends GE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);A2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZE.type="LOCAL";const dL=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends GE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KE.type="SESSION";const QE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ed(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await fL(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Fg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function mL(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function gL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _L(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yL(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebaseLocalStorageDb",vL=1,Mh="firebaseLocalStorage",JE="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function wL(){const t=indexedDB.deleteDatabase(XE);return new vu(t).toPromise()}function Zp(){const t=indexedDB.open(XE,vL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mh,{keyPath:JE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await wL(),e(await Zp()))})})}async function Qv(t,e,n){const r=Td(t,!0).put({[JE]:e,value:n});return new vu(r).toPromise()}async function xL(t,e){const n=Td(t,!1).get(e),r=await new vu(n).toPromise();return r===void 0?null:r.value}function Yv(t,e){const n=Td(t,!0).delete(e);return new vu(n).toPromise()}const EL=800,TL=3;class eT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(yL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await gL(),!this.activeServiceWorker)return;this.sender=new pL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_L()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await Qv(e,Oh,"1"),await Yv(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Td(s,!1).getAll();return new vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eT.type="LOCAL";const SL=eT;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){return e?Mr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CL(t){return qE(t.auth,new Bg(t),t.bypassAuthState)}function PL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),nL(n,new Bg(t),t.bypassAuthState)}async function kL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),tL(n,new Bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return kL;case"reauthViaPopup":case"reauthViaRedirect":return PL;default:Kn(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new _u(2e3,1e4);class Ro extends tT{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AL.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="pendingRedirect",$c=new Map;class bL extends tT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const r=await LL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LL(t,e){const n=ML(e),r=OL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function NL(t,e){$c.set(t._key(),e)}function OL(t){return Mr(t._redirectPersistence)}function ML(t){return Hc(RL,t.config.apiKey,t.name)}async function DL(t,e,n=!1){if(Un(t.app))return Promise.reject(Li(t));const r=ga(t),s=IL(r,e),l=await new bL(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=10*60*1e3;class zL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nT(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(e))}saveEventToCache(e){this.cachedEventUids.add(Xv(e)),this.lastProcessedEventTime=Date.now()}}function Xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UL=/^https?/;async function WL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FL(t);for(const n of e)try{if(HL(n))return}catch{}Kn(t,"unauthorized-domain")}function HL(t){const e=qp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!UL.test(n))return!1;if(BL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new _u(3e4,6e4);function Jv(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qL(t){return new Promise((e,n)=>{var s,o,l;function r(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(pr(t,"network-request-failed"))},timeout:$L.get()})}if((o=(s=mr().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=mr().gapi)!=null&&l.load)r();else{const h=z2("iframefcb");return mr()[h]=()=>{gapi.load?r():n(pr(t,"network-request-failed"))},BE(`${V2()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw qc=null,e})}let qc=null;function GL(t){return qc=qc||qL(t),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new _u(5e3,15e3),KL="__/auth/iframe",QL="emulator/auth/iframe",YL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JL(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,QL):`https://${t.config.authDomain}/${KL}`,r={apiKey:e.apiKey,appName:t.name,v:ua},s=XL.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${cu(r).slice(1)}`}async function eN(t){const e=await GL(t),n=mr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:JL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YL,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=pr(t,"network-request-failed"),h=mr().setTimeout(()=>{o(l)},ZL.get());function d(){mr().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,rN=600,iN="_blank",sN="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oN(t,e,n,r=nN,s=rN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...tN,width:r.toString(),height:s.toString(),top:o,left:l},p=Ft().toLowerCase();n&&(h=OE(p)?iN:n),LE(p)&&(e=e||sN,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[k,z])=>`${x}${k}=${z},`,"");if(k2(p)&&h!=="_self")return aN(e||"",h),new e0(null);const w=window.open(e||"",h,y);fe(w,t,"popup-blocked");try{w.focus()}catch{}return new e0(w)}function aN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="__/auth/handler",uN="emulator/auth/handler",cN=encodeURIComponent("fac");async function t0(t,e,n,r,s,o){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ua,eventId:s};if(e instanceof HE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",VP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof yu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),p=d?`#${cN}=${encodeURIComponent(d)}`:"";return`${hN(t)}?${cu(h).slice(1)}${p}`}function hN({config:t}){return t.emulator?Mg(t,uN):`https://${t.authDomain}/${lN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="webStorageSupport";class dN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=DL,this._overrideRedirectResult=NL}async _openPopup(e,n,r,s){var l;$r((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await t0(e,n,r,qp(),s);return oN(e,o,Fg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await t0(e,n,r,qp(),s);return mL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):($r(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eN(e),r=new zL(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cf,{type:Cf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Cf];o!==void 0&&n(!!o),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jE()||NE()||Vg()}}const fN=dN;var n0="@firebase/auth",r0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gN(t){Ko(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FE(t)},p=new O2(r,s,o,d);return H2(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ko(new Ps("auth-internal",e=>{const n=ga(e.getProvider("auth").getImmediate());return(r=>new pN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(n0,r0,mN(t)),Ai(n0,r0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=5*60,yN=Vx("authIdTokenMaxAge")||_N;let i0=null;const vN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yN)return;const s=n==null?void 0:n.token;i0!==s&&(i0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wN(t=Wx()){const e=Km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W2(t,{popupRedirectResolver:fN,persistence:[SL,dL,QE]}),r=Vx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=vN(o.toString());aL(n,l,()=>l(n.currentUser)),oL(n,h=>l(h))}}const s=Mx("auth");return s&&$2(n,`http://${s}`),n}function xN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}M2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=pr("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",xN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gN("Browser");var EN="firebase",TN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(EN,TN,"app");const SN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},rT=Ux(SN),Se=$b(rT),Pf=wN(rT),qe={FACILITIES:"facilities",HITS:"hits"},IN=()=>{var V;const[t,e]=q.useState(!1),[n,r]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[y,w]=q.useState([]),[x,k]=q.useState(!1),[z,N]=q.useState(null),[j,R]=q.useState(null),[T,O]=q.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),H=aa();q.useEffect(()=>{const P=lL(Pf,A=>{A?(e(!0),h(null)):e(!1)});return()=>P()},[]),q.useEffect(()=>{t&&Q()},[t]);const Q=async()=>{k(!0),N(null);try{if(!Se)throw new Error("Firebase not initialized");const P=await cn(un(Se,qe.FACILITIES)),A=await Promise.all(P.docs.map(async ee=>{var Ce,xe;const we=Fc(un(Se,qe.HITS),Bc("facilityId","==",parseInt(ee.id))),Be=(await cn(we)).docs.map(ce=>({id:parseInt(ce.id),...ce.data()})),$=ee.data(),le=((Ce=$.location)==null?void 0:Ce.latitude)??$.latitude,X=((xe=$.location)==null?void 0:xe.longitude)??$.longitude,ve=Be.filter(ce=>!ce.draft).reduce((ce,at)=>ce+(at.damagePercentage||0),0),Ke=Math.max(0,$.capacity*(1-ve/100));return{id:parseInt(ee.id),name:$.name,type:$.type,capacity:$.capacity,gasCapacity:$.gasCapacity,currentProduction:Ke,latitude:le,longitude:X,status:$.status,hit:$.hit,draft:$.draft??!1,hits:Be}}));w(A)}catch(P){console.error("Error fetching facilities:",P),N("Failed to load facilities from Firebase.")}finally{k(!1)}},J=async P=>{P.preventDefault(),h(null),k(!0);try{await sL(Pf,n,s)}catch(A){console.error("Login error:",A),A.code==="auth/invalid-credential"?h("Invalid email or password"):A.code==="auth/user-not-found"?h("No account found with this email"):A.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{k(!1)}},b=async()=>{try{await uL(Pf),H("/")}catch(P){console.error("Logout error:",P)}},C=async P=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!Se)throw new Error("Firebase not initialized");const A=Fc(un(Se,qe.HITS),Bc("facilityId","==",P)),ee=await cn(A);for(const we of ee.docs)await Sf(we.ref);await Sf(Pn(Se,qe.FACILITIES,P.toString())),Q()}catch(A){console.error("Error deleting facility:",A),alert("Failed to delete facility")}},I=async(P,A)=>{var ee;A.preventDefault();try{if(!Se)throw new Error("Firebase not initialized");const Be=(await cn(un(Se,qe.HITS))).docs.reduce((X,he)=>{const ve=parseInt(he.id);return ve>X?ve:X},0)+1,$={id:Be,facilityId:P,date:T.date,severity:T.severity,damagePercentage:T.damagePercentage||0,mediaLinks:(ee=T.mediaLinks)==null?void 0:ee.filter(X=>X.trim()!==""),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!0};await Lg(Pn(Se,qe.HITS,Be.toString()),$);const le=Pn(Se,qe.FACILITIES,P.toString());await tu(le,{hit:!0}),R(null),O({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),Q()}catch(we){console.error("Error adding hit:",we),alert("Failed to add hit record")}},M=async(P,A)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!Se)throw new Error("Firebase not initialized");await Sf(Pn(Se,qe.HITS,A.toString()));const ee=Fc(un(Se,qe.HITS),Bc("facilityId","==",P));if((await cn(ee)).empty){const Ne=Pn(Se,qe.FACILITIES,P.toString());await tu(Ne,{hit:!1})}Q()}catch(ee){console.error("Error deleting hit:",ee),alert("Failed to delete hit record")}};return t?g.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[g.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[g.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[g.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),g.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),g.jsx("button",{onClick:b,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),g.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[g.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[g.jsx("span",{style:{fontSize:"20px"},children:""}),g.jsx("span",{children:"Facilities"})]}),g.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[g.jsx("span",{style:{fontSize:"20px"},children:""}),g.jsx("span",{children:"Hit Records"})]})]}),g.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:g.jsx("button",{onClick:()=>H("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" View Map"})})]}),g.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[g.jsxs("div",{children:[g.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),g.jsxs("p",{style:{color:"#999"},children:["Total: ",y.length," facilities"]})]}),g.jsx("button",{onClick:()=>H("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),x&&g.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),z&&g.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:z}),!x&&!z&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[g.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[g.jsx("thead",{children:g.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Normal Production"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Current Production"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),g.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),g.jsx("tbody",{children:y.map(P=>{var A,ee;return g.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[g.jsx("td",{style:{padding:"15px"},children:P.id}),g.jsx("td",{style:{padding:"15px"},children:P.name}),g.jsx("td",{style:{padding:"15px"},children:P.type}),g.jsxs("td",{style:{padding:"15px"},children:[((A=P.capacity)==null?void 0:A.toLocaleString())||0," bbl/day"]}),g.jsx("td",{style:{padding:"15px"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsxs("span",{style:{color:P.currentProduction===P.capacity?"#4CAF50":"#FF9800"},children:[((ee=P.currentProduction)==null?void 0:ee.toLocaleString())||0," bbl/day"]}),P.currentProduction!==P.capacity&&g.jsxs("span",{style:{fontSize:"11px",color:"#f44336",backgroundColor:"#331111",padding:"2px 6px",borderRadius:"3px"},children:["-",((1-(P.currentProduction||0)/P.capacity)*100).toFixed(0),"%"]})]})}),g.jsx("td",{style:{padding:"15px"},children:P.gasCapacity?P.gasCapacity.toLocaleString()+" million m/year":"-"}),g.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:P.latitude!=null&&P.longitude!=null?`${P.latitude.toFixed(4)}, ${P.longitude.toFixed(4)}`:"N/A"}),g.jsx("td",{style:{padding:"15px"},children:g.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:P.hit?"#f44336":"#4CAF50",color:"#fff"},children:P.status})}),g.jsx("td",{style:{padding:"15px"},children:g.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:P.draft?"#ff9800":"#4CAF50",color:"#fff"},children:P.draft?"DRAFT":"Published"})}),g.jsxs("td",{style:{padding:"15px"},children:[g.jsx("button",{onClick:()=>H(`/admin/facility/${P.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),g.jsx("button",{onClick:()=>C(P.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},P.id)})})]}),y.length===0&&g.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[g.jsxs("div",{children:[g.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),g.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),g.jsx("button",{onClick:()=>H("/admin/hit/new"),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"+ Add New Hit"})]}),j===-1&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[g.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),g.jsxs("form",{onSubmit:P=>{P.preventDefault();const A=parseInt(P.target.facilityId.value);I(A,P)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),g.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[g.jsx("option",{value:"",children:"-- Choose a facility --"}),y.map(P=>g.jsxs("option",{value:P.id,children:[P.name," (",P.type,") ",P.hits&&P.hits.length>0?`- ${P.hits.length} existing hit${P.hits.length>1?"s":""}`:""]},P.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),g.jsx("input",{type:"date",required:!0,value:T.date,onChange:P=>O({...T,date:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),g.jsxs("select",{value:T.severity,onChange:P=>O({...T,severity:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[g.jsx("option",{value:"damaged",children:"Damaged"}),g.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),g.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:P=>{const A=Number(P.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,A))})},placeholder:"0-100",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),g.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:P=>O({...T,expectedRepairTime:Number(P.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(V=T.mediaLinks)==null?void 0:V.map((P,A)=>g.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[g.jsx("input",{type:"url",value:P,onChange:ee=>{const we=[...T.mediaLinks||[]];we[A]=ee.target.value,O({...T,mediaLinks:we})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),A>0&&g.jsx("button",{type:"button",onClick:()=>{var we;const ee=(we=T.mediaLinks)==null?void 0:we.filter((Ne,Be)=>Be!==A);O({...T,mediaLinks:ee})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},A)),g.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),g.jsx("textarea",{value:T.notes,onChange:P=>O({...T,notes:P.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),g.jsx("div",{style:{gridColumn:"1 / -1"},children:g.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Add Hit Record"})})]})]}),x&&g.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),z&&g.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:z}),!x&&!z&&g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{display:"grid",gap:"20px"},children:y.filter(P=>P.hits&&P.hits.length>0).map(P=>{var A;return g.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[g.jsxs("div",{children:[g.jsx("h2",{style:{margin:0,color:"#dc2626"},children:P.name}),g.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[P.type,"  ",P.hits.length," hit record",P.hits.length!==1?"s":""]})]}),g.jsx("button",{onClick:()=>R(j===P.id?null:P.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:j===P.id?"Cancel":"+ Add Hit"})]}),j===P.id&&g.jsxs("form",{onSubmit:ee=>I(P.id,ee),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),g.jsx("input",{type:"date",required:!0,value:T.date,onChange:ee=>O({...T,date:ee.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),g.jsxs("select",{value:T.severity,onChange:ee=>O({...T,severity:ee.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[g.jsx("option",{value:"damaged",children:"Damaged"}),g.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),g.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:ee=>{const we=Number(ee.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,we))})},placeholder:"0-100",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),g.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:ee=>O({...T,expectedRepairTime:Number(ee.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(A=T.mediaLinks)==null?void 0:A.map((ee,we)=>g.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[g.jsx("input",{type:"url",value:ee,onChange:Ne=>{const Be=[...T.mediaLinks||[]];Be[we]=Ne.target.value,O({...T,mediaLinks:Be})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),we>0&&g.jsx("button",{type:"button",onClick:()=>{var Be;const Ne=(Be=T.mediaLinks)==null?void 0:Be.filter(($,le)=>le!==we);O({...T,mediaLinks:Ne})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},we)),g.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),g.jsx("textarea",{value:T.notes,onChange:ee=>O({...T,notes:ee.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),g.jsx("div",{style:{gridColumn:"1 / -1"},children:g.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:" Save Hit Record"})})]}),P.hits&&P.hits.length>0&&g.jsx("div",{style:{display:"grid",gap:"10px"},children:P.hits.map(ee=>g.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[g.jsxs("div",{style:{flex:1},children:[g.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),g.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",ee.id]})]}),g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),g.jsx("div",{style:{color:"#fff"},children:new Date(ee.date).toLocaleDateString()})]}),ee.severity&&g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),g.jsx("div",{style:{color:"#fff",backgroundColor:ee.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:ee.severity})]}),ee.damagePercentage!=null&&g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Production Impact"}),g.jsxs("div",{style:{color:"#f44336",fontWeight:"bold",fontSize:"14px"},children:["-",ee.damagePercentage,"%"]})]}),ee.expectedRepairTime&&g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),g.jsxs("div",{style:{color:"#FF9800"},children:[ee.expectedRepairTime," days"]})]}),ee.draft&&g.jsxs("div",{children:[g.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Status"}),g.jsx("div",{style:{color:"#000",backgroundColor:"#ff9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:"DRAFT"})]})]}),ee.mediaLinks&&ee.mediaLinks.length>0&&g.jsxs("div",{style:{marginTop:"10px"},children:[g.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),g.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:ee.mediaLinks.map((we,Ne)=>g.jsxs("a",{href:we,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[we.includes("youtube")||we.includes("youtu.be")||we.includes("video")?"":""," Media ",Ne+1]},Ne))})]}),!ee.mediaLinks&&ee.videoLink&&g.jsx("div",{style:{marginTop:"10px"},children:g.jsx("a",{href:ee.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:" View Video"})}),ee.notes&&g.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[g.jsx("strong",{children:"Notes:"})," ",ee.notes]})]}),g.jsxs("div",{style:{display:"flex",gap:"5px"},children:[g.jsx("button",{onClick:()=>H(`/admin/hit/${ee.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),g.jsx("button",{onClick:()=>M(P.id,ee.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},ee.id))})]},P.id)})}),y.filter(P=>P.hits&&P.hits.length>0).length===0&&g.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[g.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),g.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),g.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):g.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[g.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&g.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),g.jsxs("form",{onSubmit:J,children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),g.jsx("input",{type:"email",value:n,onChange:P=>r(P.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsxs("div",{style:{marginBottom:"30px"},children:[g.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),g.jsx("input",{type:"password",value:s,onChange:P=>o(P.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),g.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),g.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},CN=()=>{const{id:t}=td(),e=aa(),[n,r]=q.useState(!1),[s,o]=q.useState(null),[l,h]=q.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});q.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var y,w;r(!0);try{if(!Se)throw new Error("Firebase not initialized");const x=Pn(Se,qe.FACILITIES,t),k=await bg(x);if(k.exists()){const z=k.data(),N=((y=z.location)==null?void 0:y.latitude)??z.latitude,j=((w=z.location)==null?void 0:w.longitude)??z.longitude;h({id:parseInt(k.id),name:z.name,type:z.type,capacity:z.capacity,gasCapacity:z.gasCapacity,latitude:N,longitude:j,status:z.status,hit:z.hit,description:z.description||"",draft:z.draft??!1})}else o("Facility not found")}catch(x){console.error("Error fetching facility:",x),o("Failed to load facility")}finally{r(!1)}},p=async(y=!1)=>{r(!0),o(null);try{if(!Se)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),r(!1);return}let w=t;(!t||t==="new")&&(w=((await cn(un(Se,qe.FACILITIES))).docs.reduce((j,R)=>{const T=parseInt(R.id);return T>j?T:j},0)+1).toString());const x={id:parseInt(w),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},hit:l.hit??!1,draft:y?!1:l.draft??!0};l.status&&(x.status=l.status),l.gasCapacity!==void 0&&l.gasCapacity!==null&&(x.gasCapacity=l.gasCapacity),l.description&&(x.description=l.description);const k=Pn(Se,qe.FACILITIES,w);t&&t!=="new"?await tu(k,x):await Lg(k,x),alert(y?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(w){console.error("Error saving facility:",w),o("Failed to save facility")}finally{r(!1)}};return n&&t&&t!=="new"?g.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):g.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:g.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[g.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),g.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),s&&g.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:s}),l.draft&&g.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:" This facility is in DRAFT mode and is not visible on the public map"}),g.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),g.jsx("input",{type:"text",value:l.name,onChange:y=>h({...l,name:y.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),g.jsxs("select",{value:l.type,onChange:y=>h({...l,type:y.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[g.jsx("option",{value:"refinery",children:"Refinery"}),g.jsx("option",{value:"extraction",children:"Extraction"}),g.jsx("option",{value:"storage",children:"Storage"})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),g.jsxs("select",{value:l.status,onChange:y=>h({...l,status:y.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[g.jsx("option",{value:"operational",children:"Operational"}),g.jsx("option",{value:"damaged",children:"Damaged"}),g.jsx("option",{value:"offline",children:"Offline"})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),g.jsx("input",{type:"number",value:l.capacity,onChange:y=>h({...l,capacity:Number(y.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m/year)"}),g.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:y=>h({...l,gasCapacity:y.target.value?Number(y.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),g.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:y=>h({...l,latitude:Number(y.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),g.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:y=>h({...l,longitude:Number(y.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),g.jsx("textarea",{value:l.description,onChange:y=>h({...l,description:y.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),g.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),g.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})},PN=()=>{var z;const{id:t}=td(),e=aa(),[n,r]=q.useState(!1),[s,o]=q.useState([]),[l,h]=q.useState({id:0,facilityId:0,date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0});q.useEffect(()=>{d(),t&&t!=="new"&&p(parseInt(t))},[t]);const d=async()=>{try{if(!Se)throw new Error("Firebase not initialized");const j=(await cn(un(Se,qe.FACILITIES))).docs.map(R=>({id:parseInt(R.id),name:R.data().name,type:R.data().type}));o(j)}catch(N){console.error("Error fetching facilities:",N),alert("Failed to load facilities")}},p=async N=>{r(!0);try{if(!Se)throw new Error("Firebase not initialized");const j=Pn(Se,qe.HITS,N.toString()),R=await bg(j);if(R.exists()){const T=R.data();h({id:N,facilityId:T.facilityId,date:T.date,severity:T.severity||"damaged",damagePercentage:T.damagePercentage||0,mediaLinks:T.mediaLinks||(T.videoLink?[T.videoLink]:[""]),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!1})}else alert("Hit record not found"),e("/admin")}catch(j){console.error("Error fetching hit:",j),alert("Failed to load hit record")}finally{r(!1)}},y=async(N=!1)=>{var j;if(!l.facilityId){alert("Please select a facility");return}if(!l.date){alert("Please enter a date");return}r(!0);try{if(!Se)throw new Error("Firebase not initialized");const R={facilityId:l.facilityId,date:l.date,severity:l.severity,damagePercentage:l.damagePercentage||0,mediaLinks:(j=l.mediaLinks)==null?void 0:j.filter(T=>T.trim()!==""),expectedRepairTime:l.expectedRepairTime,notes:l.notes,draft:N?!1:l.draft};if(t==="new"){const H=(await cn(un(Se,qe.HITS))).docs.reduce((J,b)=>{const C=parseInt(b.id);return C>J?C:J},0)+1;await Lg(Pn(Se,qe.HITS,H.toString()),{...R,id:H});const Q=Pn(Se,qe.FACILITIES,l.facilityId.toString());await tu(Q,{hit:!0}),alert("Hit record created successfully!")}else{const T=Pn(Se,qe.HITS,t);await tu(T,R),alert("Hit record updated successfully!")}e("/admin")}catch(R){console.error("Error saving hit:",R),alert("Failed to save hit record")}finally{r(!1)}},w=()=>{h({...l,mediaLinks:[...l.mediaLinks||[],""]})},x=N=>{var j;h({...l,mediaLinks:(j=l.mediaLinks)==null?void 0:j.filter((R,T)=>T!==N)})},k=(N,j)=>{const R=[...l.mediaLinks||[]];R[N]=j,h({...l,mediaLinks:R})};return g.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",padding:"20px"},children:g.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[g.jsxs("div",{children:[g.jsx("h1",{style:{margin:0,marginBottom:"5px"},children:t==="new"?" Add New Hit Record":" Edit Hit Record"}),g.jsx("p",{style:{margin:0,color:"#999"},children:t==="new"?"Record a new strike on a facility":`Editing Hit #${t}`})]}),g.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" Back to Admin"})]}),n&&g.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading..."}),!n&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Facility *"}),g.jsxs("select",{value:l.facilityId,onChange:N=>h({...l,facilityId:parseInt(N.target.value)}),disabled:t!=="new",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:t!=="new"?"not-allowed":"pointer"},children:[g.jsx("option",{value:0,children:"-- Select a facility --"}),s.map(N=>g.jsxs("option",{value:N.id,children:[N.name," (",N.type,")"]},N.id))]}),t!=="new"&&g.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"12px"},children:"Facility cannot be changed after creation"})]}),g.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Date *"}),g.jsx("input",{type:"date",value:l.date,onChange:N=>h({...l,date:N.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Severity *"}),g.jsxs("select",{value:l.severity,onChange:N=>h({...l,severity:N.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[g.jsx("option",{value:"damaged",children:"Damaged"}),g.jsx("option",{value:"destroyed",children:"Destroyed"})]})]})]}),g.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Damage to Production (%) *"}),g.jsx("input",{type:"number",min:"0",max:"100",value:l.damagePercentage||0,onChange:N=>{const j=Number(N.target.value);h({...l,damagePercentage:Math.min(100,Math.max(0,j))})},placeholder:"0-100",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),g.jsx("p",{style:{margin:"6px 0 0 0",color:"#666",fontSize:"12px"},children:"Percentage of facility capacity affected by this hit"})]}),g.jsxs("div",{children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Expected Repair Time (days)"}),g.jsx("input",{type:"number",value:l.expectedRepairTime||"",onChange:N=>h({...l,expectedRepairTime:N.target.value?Number(N.target.value):void 0}),placeholder:"e.g., 30",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Media Links (Videos/Photos)"}),(z=l.mediaLinks)==null?void 0:z.map((N,j)=>g.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[g.jsx("input",{type:"url",value:N,onChange:R=>k(j,R.target.value),placeholder:"https://...",style:{flex:1,padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),j>0&&g.jsx("button",{type:"button",onClick:()=>x(j),style:{padding:"12px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Remove"})]},j)),g.jsx("button",{type:"button",onClick:w,style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginTop:"10px"},children:"+ Add Another Link"})]}),g.jsxs("div",{style:{gridColumn:"1 / -1"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Notes"}),g.jsx("textarea",{value:l.notes,onChange:N=>h({...l,notes:N.target.value}),rows:5,placeholder:"Describe the damage, impact, and any other relevant details...",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]})]}),l.draft&&g.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ff9800",color:"#000",borderRadius:"4px",fontWeight:"600",textAlign:"center"},children:" This hit record is in DRAFT mode and will not affect production calculations"}),g.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"15px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>e("/admin"),style:{padding:"12px 24px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),g.jsx("button",{onClick:()=>y(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#ff9800",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":" Save as Draft"}),g.jsx("button",{onClick:()=>y(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":t==="new"?" Publish Hit Record":" Publish"})]})]})]})})};function iT(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const kN=1;function AN(t){return Object.freeze({__version:kN,map:t})}function sT(t,e){return Object.freeze({...t,...e})}const oT=q.createContext(null),aT=oT.Provider;function Ug(){const t=q.useContext(oT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function lT(t){function e(n,r){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(r,()=>s),n.children==null?null:Pl.createElement(aT,{value:o},n.children)}return q.forwardRef(e)}function RN(t){function e(n,r){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(r,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?vx.createPortal(n.children,h):null}return q.forwardRef(e)}function bN(t){function e(n,r){const{instance:s}=t(n).current;return q.useImperativeHandle(r,()=>s),null}return q.forwardRef(e)}function Wg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Sd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function LN(t,e){return function(r,s){const o=Ug(),l=t(Sd(r,o),o);return iT(o.map,r.attribution),Wg(l.current,r.eventHandlers),e(l.current,o,r,s),l}}var Kp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(HT,function(n){var r="1.9.4";function s(i){var a,c,f,_;for(c=1,f=arguments.length;c<f;c++){_=arguments[c];for(a in _)i[a]=_[a]}return i}var o=Object.create||function(){function i(){}return function(a){return i.prototype=a,new i}}();function l(i,a){var c=Array.prototype.slice;if(i.bind)return i.bind.apply(i,c.call(arguments,1));var f=c.call(arguments,2);return function(){return i.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function p(i,a,c){var f,_,E,D;return D=function(){f=!1,_&&(E.apply(c,_),_=!1)},E=function(){f?_=arguments:(i.apply(c,arguments),setTimeout(D,a),f=!0)},E}function y(i,a,c){var f=a[1],_=a[0],E=f-_;return i===f&&c?i:((i-_)%E+E)%E+_}function w(){return!1}function x(i,a){if(a===!1)return i;var c=Math.pow(10,a===void 0?6:a);return Math.round(i*c)/c}function k(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function z(i){return k(i).split(/\s+/)}function N(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var c in a)i.options[c]=a[c];return i.options}function j(i,a,c){var f=[];for(var _ in i)f.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(i[_]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function T(i,a){return i.replace(R,function(c,f){var _=a[f];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(a)),_})}var O=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function H(i,a){for(var c=0;c<i.length;c++)if(i[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var b=0;function C(i){var a=+new Date,c=Math.max(0,16-(a-b));return b=a+c,window.setTimeout(i,c)}var I=window.requestAnimationFrame||J("RequestAnimationFrame")||C,M=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function V(i,a,c){if(c&&I===C)i.call(a);else return I.call(window,l(i,a))}function P(i){i&&M.call(window,i)}var A={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:y,falseFn:w,formatNum:x,trim:k,splitWords:z,setOptions:N,getParamString:j,template:T,isArray:O,indexOf:H,emptyImageUrl:Q,requestFn:I,cancelFn:M,requestAnimFrame:V,cancelAnimFrame:P};function ee(){}ee.extend=function(i){var a=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return i.statics&&s(a,i.statics),i.includes&&(we(i.includes),s.apply(null,[f].concat(i.includes))),s(f,i),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,D=f._initHooks.length;E<D;E++)f._initHooks[E].call(this)}},a},ee.include=function(i){var a=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},ee.mergeOptions=function(i){return s(this.prototype.options,i),this},ee.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),c=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function we(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=O(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a);else{i=z(i);for(var _=0,E=i.length;_<E;_++)this._on(i[_],a,c)}return this},off:function(i,a,c){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],a);else{i=z(i);for(var _=arguments.length===1,E=0,D=i.length;E<D;E++)_?this._off(i[E]):this._off(i[E],a,c)}return this},_on:function(i,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,c)===!1){c===this&&(c=void 0);var _={fn:a,ctx:c};f&&(_.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(_)}},_off:function(i,a,c){var f,_,E;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(_=0,E=f.length;_<E;_++)f[_].fn=w;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var D=this._listens(i,a,c);if(D!==!1){var B=f[D];this._firingCount&&(B.fn=w,this._events[i]=f=f.slice()),f.splice(D,1)}}},fire:function(i,a,c){if(!this.listens(i,c))return this;var f=s({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[i];if(_){this._firingCount=this._firingCount+1||1;for(var E=0,D=_.length;E<D;E++){var B=_[E],W=B.fn;B.once&&this.off(i,W,B.ctx),W.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(i,a,c,f){typeof i!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(f=!!a,_=void 0,c=void 0);var E=this._events&&this._events[i];if(E&&E.length&&this._listens(i,_,c)!==!1)return!0;if(f){for(var D in this._eventParents)if(this._eventParents[D].listens(i,a,c,f))return!0}return!1},_listens:function(i,a,c){if(!this._events)return!1;var f=this._events[i]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var _=0,E=f.length;_<E;_++)if(f[_].fn===a&&f[_].ctx===c)return _;return!1},once:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a,!0);else{i=z(i);for(var _=0,E=i.length;_<E;_++)this._on(i[_],a,c,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[d(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[d(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var Be=ee.extend(Ne);function $(i,a,c){this.x=c?Math.round(i):i,this.y=c?Math.round(a):a}var le=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(X(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(X(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new $(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new $(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(i){i=X(i);var a=i.x-this.x,c=i.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(i){return i=X(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=X(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function X(i,a,c){return i instanceof $?i:O(i)?new $(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new $(i.x,i.y):new $(i,a,c)}function he(i,a){if(i)for(var c=a?[i,a]:i,f=0,_=c.length;f<_;f++)this.extend(c[f])}he.prototype={extend:function(i){var a,c;if(!i)return this;if(i instanceof $||typeof i[0]=="number"||"x"in i)a=c=X(i);else if(i=ve(i),a=i.min,c=i.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(i){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,c;return typeof i[0]=="number"||i instanceof $?i=X(i):i=ve(i),i instanceof he?(a=i.min,c=i.max):a=c=i,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(i){i=ve(i);var a=this.min,c=this.max,f=i.min,_=i.max,E=_.x>=a.x&&f.x<=c.x,D=_.y>=a.y&&f.y<=c.y;return E&&D},overlaps:function(i){i=ve(i);var a=this.min,c=this.max,f=i.min,_=i.max,E=_.x>a.x&&f.x<c.x,D=_.y>a.y&&f.y<c.y;return E&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*i,_=Math.abs(a.y-c.y)*i;return ve(X(a.x-f,a.y-_),X(c.x+f,c.y+_))},equals:function(i){return i?(i=ve(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ve(i,a){return!i||i instanceof he?i:new he(i,a)}function Ke(i,a){if(i)for(var c=a?[i,a]:i,f=0,_=c.length;f<_;f++)this.extend(c[f])}Ke.prototype={extend:function(i){var a=this._southWest,c=this._northEast,f,_;if(i instanceof xe)f=i,_=i;else if(i instanceof Ke){if(f=i._southWest,_=i._northEast,!f||!_)return this}else return i?this.extend(ce(i)||Ce(i)):this;return!a&&!c?(this._southWest=new xe(f.lat,f.lng),this._northEast=new xe(_.lat,_.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(i){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*i,_=Math.abs(a.lng-c.lng)*i;return new Ke(new xe(a.lat-f,a.lng-_),new xe(c.lat+f,c.lng+_))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof xe||"lat"in i?i=ce(i):i=Ce(i);var a=this._southWest,c=this._northEast,f,_;return i instanceof Ke?(f=i.getSouthWest(),_=i.getNorthEast()):f=_=i,f.lat>=a.lat&&_.lat<=c.lat&&f.lng>=a.lng&&_.lng<=c.lng},intersects:function(i){i=Ce(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),_=i.getNorthEast(),E=_.lat>=a.lat&&f.lat<=c.lat,D=_.lng>=a.lng&&f.lng<=c.lng;return E&&D},overlaps:function(i){i=Ce(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),_=i.getNorthEast(),E=_.lat>a.lat&&f.lat<c.lat,D=_.lng>a.lng&&f.lng<c.lng;return E&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=Ce(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(i,a){return i instanceof Ke?i:new Ke(i,a)}function xe(i,a,c){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,c!==void 0&&(this.alt=+c)}xe.prototype={equals:function(i,a){if(!i)return!1;i=ce(i);var c=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return c<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+x(this.lat,i)+", "+x(this.lng,i)+")"},distanceTo:function(i){return _n.distance(this,ce(i))},wrap:function(){return _n.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function ce(i,a,c){return i instanceof xe?i:O(i)&&typeof i[0]!="object"?i.length===3?new xe(i[0],i[1],i[2]):i.length===2?new xe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new xe(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new xe(i,a,c)}var at={latLngToPoint:function(i,a){var c=this.projection.project(i),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(i,a){var c=this.scale(a),f=this.transformation.untransform(i,c);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(i),f=this.transformation.transform(a.min,c),_=this.transformation.transform(a.max,c);return new he(f,_)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?y(i.lng,this.wrapLng,!0):i.lng,c=this.wrapLat?y(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new xe(c,a,f)},wrapLatLngBounds:function(i){var a=i.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,_=a.lng-c.lng;if(f===0&&_===0)return i;var E=i.getSouthWest(),D=i.getNorthEast(),B=new xe(E.lat-f,E.lng-_),W=new xe(D.lat-f,D.lng-_);return new Ke(B,W)}},_n=s({},at,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var c=Math.PI/180,f=i.lat*c,_=a.lat*c,E=Math.sin((a.lat-i.lat)*c/2),D=Math.sin((a.lng-i.lng)*c/2),B=E*E+Math.cos(f)*Math.cos(_)*D*D,W=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*W}}),va=6378137,wa={R:va,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,i.lat),-c),_=Math.sin(f*a);return new $(this.R*i.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(i){var a=180/Math.PI;return new xe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:function(){var i=va*Math.PI;return new he([-i,-i],[i,i])}()};function xa(i,a,c,f){if(O(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=c,this._d=f}xa.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new $((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function Zr(i,a,c,f){return new xa(i,a,c,f)}var Gi=s({},_n,{code:"EPSG:3857",projection:wa,transformation:function(){var i=.5/(Math.PI*wa.R);return Zr(i,.5,-i,.5)}()}),wu=s({},Gi,{code:"EPSG:900913"});function xu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function zs(i,a){var c="",f,_,E,D,B,W;for(f=0,E=i.length;f<E;f++){for(B=i[f],_=0,D=B.length;_<D;_++)W=B[_],c+=(_?"L":"M")+W.x+" "+W.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var Zi=document.documentElement.style,Ki="ActiveXObject"in window,yt=Ki&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Kr=Zt("webkit"),Eu=Zt("android"),Ea=Zt("android 2")||Zt("android 3"),Pd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qi=Eu&&Zt("Google")&&Pd<537&&!("AudioNode"in window),js=!!window.opera,Ta=!vt&&Zt("chrome"),Fs=Zt("gecko")&&!Kr&&!js&&!Ki,kd=!Ta&&Zt("safari"),Tu=Zt("phantom"),Sa="OTransition"in Zi,Su=navigator.platform.indexOf("Win")===0,Qr=Ki&&"transition"in Zi,Yi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ea,Bs="MozPerspective"in Zi,yr=!window.L_DISABLE_3D&&(Qr||Yi||Bs)&&!Sa&&!Tu,Yr=typeof orientation<"u"||Zt("mobile"),Us=Yr&&Kr,Iu=Yr&&Yi,Xr=!window.PointerEvent&&window.MSPointerEvent,Ia=!!(window.PointerEvent||Xr),wt="ontouchstart"in window||!!window.TouchEvent,Cu=!window.L_NO_TOUCH&&(wt||Ia),Xi=Yr&&js,Ji=Yr&&Fs,Ad=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Rd=function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return i}(),Jr=function(){return!!document.createElement("canvas").getContext}(),Ca=!!(document.createElementNS&&xu("svg").createSVGRect),bd=!!Ca&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ws=!Ca&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Pu=navigator.platform.indexOf("Mac")===0,ku=navigator.platform.indexOf("Linux")===0;function Zt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ae={ie:Ki,ielt9:yt,edge:vt,webkit:Kr,android:Eu,android23:Ea,androidStock:Qi,opera:js,chrome:Ta,gecko:Fs,safari:kd,phantom:Tu,opera12:Sa,win:Su,ie3d:Qr,webkit3d:Yi,gecko3d:Bs,any3d:yr,mobile:Yr,mobileWebkit:Us,mobileWebkit3d:Iu,msPointer:Xr,pointer:Ia,touch:Cu,touchNative:wt,mobileOpera:Xi,mobileGecko:Ji,retina:Ad,passiveEvents:Rd,canvas:Jr,svg:Ca,vml:Ws,inlineSvg:bd,mac:Pu,linux:ku},Au=ae.msPointer?"MSPointerDown":"pointerdown",Nn=ae.msPointer?"MSPointerMove":"pointermove",Pa=ae.msPointer?"MSPointerUp":"pointerup",ka=ae.msPointer?"MSPointerCancel":"pointercancel",es={touchstart:Au,touchmove:Nn,touchend:Pa,touchcancel:ka},Hs={touchstart:Aa,touchmove:yn,touchend:yn,touchcancel:yn},vr={},Ru=!1;function bu(i,a,c){return a==="touchstart"&&ts(),Hs[a]?(c=Hs[a].bind(this,c),i.addEventListener(es[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function Ld(i,a,c){if(!es[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(es[a],c,!1)}function $s(i){vr[i.pointerId]=i}function Lu(i){vr[i.pointerId]&&(vr[i.pointerId]=i)}function qs(i){delete vr[i.pointerId]}function ts(){Ru||(document.addEventListener(Au,$s,!0),document.addEventListener(Nn,Lu,!0),document.addEventListener(Pa,qs,!0),document.addEventListener(ka,qs,!0),Ru=!0)}function yn(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in vr)a.touches.push(vr[c]);a.changedTouches=[a],i(a)}}function Aa(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&lt(a),yn(i,a)}function Nd(i){var a={},c,f;for(f in i)c=i[f],a[f]=c&&c.bind?c.bind(i):c;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Nu=200;function Ou(i,a){i.addEventListener("dblclick",a);var c=0,f;function _(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var D=Oa(E);if(!(D.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!D.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Nu?(f++,f===2&&a(Nd(E))):f=1,c=B}}}return i.addEventListener("click",_),{dblclick:a,simDblclick:_}}function Mu(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var ns=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wr=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ra=wr==="webkitTransition"||wr==="OTransition"?wr+"End":"transitionend";function ba(i){return typeof i=="string"?document.getElementById(i):i}function ei(i,a){var c=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);c=f?f[a]:null}return c==="auto"?null:c}function Re(i,a,c){var f=document.createElement(i);return f.className=a||"",c&&c.appendChild(f),f}function Oe(i){var a=i.parentNode;a&&a.removeChild(i)}function Bt(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function vn(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function wn(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function rs(i,a){if(i.classList!==void 0)return i.classList.contains(a);var c=Qn(i);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function se(i,a){if(i.classList!==void 0)for(var c=z(a),f=0,_=c.length;f<_;f++)i.classList.add(c[f]);else if(!rs(i,a)){var E=Qn(i);xr(i,(E?E+" ":"")+a)}}function Ue(i,a){i.classList!==void 0?i.classList.remove(a):xr(i,k((" "+Qn(i)+" ").replace(" "+a+" "," ")))}function xr(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function Qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Kt(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&Du(i,a)}function Du(i,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=i.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):i.style.filter+=" progid:"+f+"(opacity="+a+")"}function Gs(i){for(var a=document.documentElement.style,c=0;c<i.length;c++)if(i[c]in a)return i[c];return!1}function Er(i,a,c){var f=a||new $(0,0);i.style[ns]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function tt(i,a){i._leaflet_pos=a,ae.any3d?Er(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Tr(i){return i._leaflet_pos||new $(0,0)}var On,on,Zs;if("onselectstart"in document)On=function(){me(window,"selectstart",lt)},on=function(){je(window,"selectstart",lt)};else{var ti=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);On=function(){if(ti){var i=document.documentElement.style;Zs=i[ti],i[ti]="none"}},on=function(){ti&&(document.documentElement.style[ti]=Zs,Zs=void 0)}}function Ks(){me(window,"dragstart",lt)}function Qs(){je(window,"dragstart",lt)}var is,Yn;function La(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ys(),is=i,Yn=i.style.outlineStyle,i.style.outlineStyle="none",me(window,"keydown",Ys))}function Ys(){is&&(is.style.outlineStyle=Yn,is=void 0,Yn=void 0,je(window,"keydown",Ys))}function Vu(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function xn(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var Od={__proto__:null,TRANSFORM:ns,TRANSITION:wr,TRANSITION_END:Ra,get:ba,getStyle:ei,create:Re,remove:Oe,empty:Bt,toFront:vn,toBack:wn,hasClass:rs,addClass:se,removeClass:Ue,setClass:xr,getClass:Qn,setOpacity:Kt,testProp:Gs,setTransform:Er,setPosition:tt,getPosition:Tr,get disableTextSelection(){return On},get enableTextSelection(){return on},disableImageDrag:Ks,enableImageDrag:Qs,preventOutline:La,restoreOutline:Ys,getSizedParentNode:Vu,getScale:xn};function me(i,a,c,f){if(a&&typeof a=="object")for(var _ in a)Xs(i,_,a[_],c);else{a=z(a);for(var E=0,D=a.length;E<D;E++)Xs(i,a[E],c,f)}return this}var Ut="_leaflet_events";function je(i,a,c,f){if(arguments.length===1)ni(i),delete i[Ut];else if(a&&typeof a=="object")for(var _ in a)ss(i,_,a[_],c);else if(a=z(a),arguments.length===2)ni(i,function(B){return H(a,B)!==-1});else for(var E=0,D=a.length;E<D;E++)ss(i,a[E],c,f);return this}function ni(i,a){for(var c in i[Ut]){var f=c.split(/\d/)[0];(!a||a(f))&&ss(i,f,null,null,c)}}var Sr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(i,a,c,f){var _=a+d(c)+(f?"_"+d(f):"");if(i[Ut]&&i[Ut][_])return this;var E=function(B){return c.call(f||i,B||window.event)},D=E;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?E=bu(i,a,E):ae.touch&&a==="dblclick"?E=Ou(i,E):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(Sr[a]||a,E,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(B){B=B||window.event,Da(i,B)&&D(B)},i.addEventListener(Sr[a],E,!1)):i.addEventListener(a,D,!1):i.attachEvent("on"+a,E),i[Ut]=i[Ut]||{},i[Ut][_]=E}function ss(i,a,c,f,_){_=_||a+d(c)+(f?"_"+d(f):"");var E=i[Ut]&&i[Ut][_];if(!E)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?Ld(i,a,E):ae.touch&&a==="dblclick"?Mu(i,E):"removeEventListener"in i?i.removeEventListener(Sr[a]||a,E,!1):i.detachEvent("on"+a,E),i[Ut][_]=null}function De(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Na(i){return Xs(i,"wheel",De),this}function os(i){return me(i,"mousedown touchstart dblclick contextmenu",De),i._leaflet_disable_click=!0,this}function lt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xn(i){return lt(i),De(i),this}function Oa(i){if(i.composedPath)return i.composedPath();for(var a=[],c=i.target;c;)a.push(c),c=c.parentNode;return a}function as(i,a){if(!a)return new $(i.clientX,i.clientY);var c=xn(a),f=c.boundingClientRect;return new $((i.clientX-f.left)/c.x-a.clientLeft,(i.clientY-f.top)/c.y-a.clientTop)}var Jn=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ma(i){return ae.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Jn:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Da(i,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==i;)c=c.parentNode}catch{return!1}return c!==i}var ls={__proto__:null,on:me,off:je,stopPropagation:De,disableScrollPropagation:Na,disableClickPropagation:os,preventDefault:lt,stop:Xn,getPropagationPath:Oa,getMousePosition:as,getWheelDelta:Ma,isExternalTarget:Da,addListener:me,removeListener:je},Va=Be.extend({run:function(i,a,c,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Tr(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var c=this._startPos.add(this._offset.multiplyBy(i));a&&c._round(),tt(this._el,c),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ee=Be.extend({options:{crs:Gi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=N(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wr&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Ra,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(ce(i),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,c.zoom):this._tryAnimatedPan(i,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,c){var f=this.getZoomScale(a),_=this.getSize().divideBy(2),E=i instanceof $?i:this.latLngToContainerPoint(i),D=E.subtract(_).multiplyBy(1-1/f),B=this.containerPointToLatLng(_.add(D));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():Ce(i);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(i,!1,c.add(f));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:i.getCenter(),zoom:_};var E=f.subtract(c).divideBy(2),D=this.project(i.getSouthWest(),_),B=this.project(i.getNorthEast(),_),W=this.unproject(D.add(B).divideBy(2).add(E),_);return{center:W,zoom:_}},fitBounds:function(i,a){if(i=Ce(i),!i.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(i,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=X(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Va,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(i,a,c);this._stop();var f=this.project(this.getCenter()),_=this.project(i),E=this.getSize(),D=this._zoom;i=ce(i),a=a===void 0?D:a;var B=Math.max(E.x,E.y),W=B*this.getZoomScale(D,a),K=_.distanceTo(f)||1,re=1.42,de=re*re;function Te(ut){var Ju=ut?-1:1,jT=ut?W:B,FT=W*W-B*B+Ju*de*de*K*K,BT=2*jT*de*K,jd=FT/BT,h_=Math.sqrt(jd*jd+1)-jd,UT=h_<1e-9?-18:Math.log(h_);return UT}function Wt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function xt(ut){return(Math.exp(ut)+Math.exp(-ut))/2}function Sn(ut){return Wt(ut)/xt(ut)}var Yt=Te(0);function ho(ut){return B*(xt(Yt)/xt(Yt+re*ut))}function MT(ut){return B*(xt(Yt)*Sn(Yt+re*ut)-Wt(Yt))/de}function DT(ut){return 1-Math.pow(1-ut,1.5)}var VT=Date.now(),u_=(Te(1)-Yt)/re,zT=c.duration?1e3*c.duration:1e3*u_*.8;function c_(){var ut=(Date.now()-VT)/zT,Ju=DT(ut)*u_;ut<=1?(this._flyToFrame=V(c_,this),this._move(this.unproject(f.add(_.subtract(f).multiplyBy(MT(Ju)/K)),D),this.getScaleZoom(B/ho(Ju),D),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),c_.call(this),this},flyToBounds:function(i,a){var c=this._getBoundsCenterZoom(i,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(i){return i=Ce(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Ce(i));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),E=this.project(i),D=this.getPixelBounds(),B=ve([D.min.add(c),D.max.subtract(f)]),W=B.getSize();if(!B.contains(E)){this._enforcingBounds=!0;var K=E.subtract(B.getCenter()),re=B.extend(E).getSize().subtract(W);_.x+=K.x<0?-re.x:re.x,_.y+=K.y<0?-re.y:re.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),_=c.divideBy(2).round(),E=f.subtract(_);return!E.x&&!E.y?this:(i.animate&&i.pan?this.panBy(E):(i.pan&&this._rawPanBy(E),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,i):navigator.geolocation.getCurrentPosition(a,c,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,c=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,c=i.coords.longitude,f=new xe(a,c),_=f.toBounds(i.coords.accuracy*2),E=this._locateOptions;if(E.setView){var D=this.getBoundsZoom(_);this.setView(f,E.maxZoom?Math.min(D,E.maxZoom):D)}var B={latlng:f,bounds:_,timestamp:i.timestamp};for(var W in i.coords)typeof i.coords[W]=="number"&&(B[W]=i.coords[W]);this.fire("locationfound",B)}},addHandler:function(i,a){if(!a)return this;var c=this[i]=new a(this);return this._handlers.push(c),this.options[i]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Oe(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var c="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Re("div",c,a||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),c=this.unproject(i.getTopRight());return new Ke(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,c){i=Ce(i),c=X(c||[0,0]);var f=this.getZoom()||0,_=this.getMinZoom(),E=this.getMaxZoom(),D=i.getNorthWest(),B=i.getSouthEast(),W=this.getSize().subtract(c),K=ve(this.project(B,f),this.project(D,f)).getSize(),re=ae.any3d?this.options.zoomSnap:1,de=W.x/K.x,Te=W.y/K.y,Wt=a?Math.max(de,Te):Math.min(de,Te);return f=this.getScaleZoom(Wt,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(_,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var c=this._getTopLeftPoint(i,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(i)/c.scale(a)},getScaleZoom:function(i,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(i*c.scale(a));return isNaN(f)?1/0:f},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ce(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(i),a)},layerPointToLatLng:function(i){var a=X(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(ce(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ce(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ce(i))},distance:function(i,a){return this.options.crs.distance(ce(i),ce(a))},containerPointToLayerPoint:function(i){return X(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return X(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(X(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(i)))},mouseEventToContainerPoint:function(i){return as(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=ba(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(i,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ei(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(i.markerPane,"leaflet-zoom-hide"),se(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,c){tt(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,c)._move(i,a)._moveEnd(_),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,c,f){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){tt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[d(this._container)]=this;var a=i?je:me;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var c=[],f,_=a==="mouseout"||a==="mouseover",E=i.target||i.srcElement,D=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){D=!0;break}if(f&&f.listens(a,!0)&&(_&&!Da(E,i)||(c.push(f),_))||E===this._container)break;E=E.parentNode}return!c.length&&!D&&!_&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var c=i.type;c==="mousedown"&&La(a),this._fireDOMEvent(i,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,c){if(i.type==="click"){var f=s({},i);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var _=this._findEventTargets(i,a);if(c){for(var E=[],D=0;D<c.length;D++)c[D].listens(a,!0)&&E.push(c[D]);_=E.concat(_)}if(_.length){a==="contextmenu"&&lt(i);var B=_[0],W={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);W.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(i),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=K?B.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(D=0;D<_.length;D++)if(_[D].fire(a,W,!0),W.originalEvent._stopped||_[D].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Tr(this._mapPane)||new $(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var c=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var c=this.getSize()._divideBy(2);return this.project(i,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(i,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(i.getSouthWest(),a)._subtract(f),this.project(i.getNorthWest(),a)._subtract(f),this.project(i.getSouthEast(),a)._subtract(f),this.project(i.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,c){if(!c)return i;var f=this.project(i,a),_=this.getSize().divideBy(2),E=new he(f.subtract(_),f.add(_)),D=this._getBoundsOffset(E,c,a);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?i:this.unproject(f.add(D),a)},_limitOffset:function(i,a){if(!a)return i;var c=this.getPixelBounds(),f=new he(c.min.add(i),c.max.add(i));return i.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(i,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),_=f.min.subtract(i.min),E=f.max.subtract(i.max),D=this._rebound(_.x,-E.x),B=this._rebound(_.y,-E.y);return new $(D,B)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(a,Math.min(c,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var c=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var i=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var c=ns,f=this._proxy.style[c];Er(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();Er(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),_=this._getCenterOffset(i)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(_)?!1:(V(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(i,a){return new Ee(i,a)}var Qt=ee.extend({options:{position:"topright"},initialize:function(i){N(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),c=this.getPosition(),f=i._controlCorners[c];return se(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),er=function(i){return new Qt(i)};Ee.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",c=this._controlContainer=Re("div",a+"control-container",this._container);function f(_,E){var D=a+_+" "+a+E;i[_+E]=Re("div",D,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Oe(this._controlCorners[i]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(i,a,c){N(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Qt.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=Re("div",i),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),os(a),Na(a);var f=this._section=Re("section",i+"-list");c&&(this._map.on("click",this.collapse,this),me(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Re("a",i+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),me(_,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){lt(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Re("div",i+"-base",f),this._separator=Re("div",i+"-separator",f),this._overlaysList=Re("div",i+"-overlays",f),a.appendChild(f)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,c){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,_){return this.options.sortFunction(f.layer,_.layer,f.name,_.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bt(this._baseLayersList),Bt(this._overlaysList),this._layerControlInputs=[];var i,a,c,f,_=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,i=i||!f.overlay,_+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&_>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(d(i.target)),c=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(i,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(i){var a=document.createElement("label"),c=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(i.layer),me(f,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+i.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(_);var D=i.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,c,f=[],_=[];this._handlingClick=!0;for(var E=i.length-1;E>=0;E--)a=i[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||_.push(c);for(E=0;E<_.length;E++)this._map.hasLayer(_[E])&&this._map.removeLayer(_[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,c,f=this._map.getZoom(),_=i.length-1;_>=0;_--)a=i[_],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,me(i,"click",lt),this.expand();var a=this;setTimeout(function(){je(i,"click",lt),a._preventClick=!1})}}),ju=function(i,a,c){return new zu(i,a,c)},Ir=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",c=Re("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,c,f,_){var E=Re("a",c,f);return E.innerHTML=i,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),os(E),me(E,"click",Xn),me(E,"click",_,this),me(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";Ue(this._zoomInButton,a),Ue(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(se(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(se(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ir,this.addControl(this.zoomControl))});var Fu=function(i){return new Ir(i)},za=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",c=Re("div",a),f=this.options;return this._addScales(f,a+"-line",c),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),c},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,c){i.metric&&(this._mScale=Re("div",a,c)),i.imperial&&(this._iScale=Re("div",a,c))},_update:function(){var i=this._map,a=i.getSize().y/2,c=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/i)},_updateImperial:function(i){var a=i*3.2808399,c,f,_;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(i,a,c){i.style.width=Math.round(this.options.maxWidth*c)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),c=i/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),ja=function(i){return new za(i)},Fa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eo=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Fa+" ":"")+"Leaflet</a>"},initialize:function(i){N(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),os(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),i.length&&c.push(i.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new eo().addTo(this)});var to=function(i){return new eo(i)};Qt.Layers=zu,Qt.Zoom=Ir,Qt.Scale=za,Qt.Attribution=eo,er.layers=ju,er.zoom=Fu,er.scale=ja,er.attribution=to;var an=ee.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(i,a){return i.addHandler(a,this),this};var Bu={Events:Ne},tr=ae.touch?"touchstart mousedown":"mousedown",Mn=Be.extend({options:{clickTolerance:3},initialize:function(i,a,c,f){N(this,f),this._element=i,this._dragStartTarget=a||i,this._preventOutline=c},enable:function(){this._enabled||(me(this._dragStartTarget,tr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,tr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!rs(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Mn._dragging=this,this._preventOutline&&La(this._element),Ks(),On(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,c=Vu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=Tr(this._element),this._parentScale=xn(c);var f=i.type==="mousedown";me(document,f?"mousemove":"touchmove",this._onMove,this),me(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,lt(i),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),tt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),Qs(),on();var a=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ba(i,a,c){var f,_=[1,4,2,8],E,D,B,W,K,re,de,Te;for(E=0,re=i.length;E<re;E++)i[E]._code=U(i[E],a);for(B=0;B<4;B++){for(de=_[B],f=[],E=0,re=i.length,D=re-1;E<re;D=E++)W=i[E],K=i[D],W._code&de?K._code&de||(Te=F(K,W,de,a,c),Te._code=U(Te,a),f.push(Te)):(K._code&de&&(Te=F(K,W,de,a,c),Te._code=U(Te,a),f.push(Te)),f.push(W));i=f}return i}function Ua(i,a){var c,f,_,E,D,B,W,K,re;if(!i||i.length===0)throw new Error("latlngs not passed");Me(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var de=ce([0,0]),Te=Ce(i),Wt=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());Wt<1700&&(de=no(i));var xt=i.length,Sn=[];for(c=0;c<xt;c++){var Yt=ce(i[c]);Sn.push(a.project(ce([Yt.lat-de.lat,Yt.lng-de.lng])))}for(B=W=K=0,c=0,f=xt-1;c<xt;f=c++)_=Sn[c],E=Sn[f],D=_.y*E.x-E.y*_.x,W+=(_.x+E.x)*D,K+=(_.y+E.y)*D,B+=D*3;B===0?re=Sn[0]:re=[W/B,K/B];var ho=a.unproject(X(re));return ce([ho.lat+de.lat,ho.lng+de.lng])}function no(i){for(var a=0,c=0,f=0,_=0;_<i.length;_++){var E=ce(i[_]);a+=E.lat,c+=E.lng,f++}return ce([a/f,c/f])}var ro={__proto__:null,clipPolygon:Ba,polygonCenter:Ua,centroid:no};function Lt(i,a){if(!a||!i.length)return i.slice();var c=a*a;return i=m(i,c),i=ri(i,c),i}function Wa(i,a,c){return Math.sqrt(ge(i,a,c,!0))}function Uu(i,a,c){return ge(i,a,c)}function ri(i,a){var c=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,_=new f(c);_[0]=_[c-1]=1,u(i,_,a,0,c-1);var E,D=[];for(E=0;E<c;E++)_[E]&&D.push(i[E]);return D}function u(i,a,c,f,_){var E=0,D,B,W;for(B=f+1;B<=_-1;B++)W=ge(i[B],i[f],i[_],!0),W>E&&(D=B,E=W);E>c&&(a[D]=1,u(i,a,c,f,D),u(i,a,c,D,_))}function m(i,a){for(var c=[i[0]],f=1,_=0,E=i.length;f<E;f++)te(i[f],i[_])>a&&(c.push(i[f]),_=f);return _<E-1&&c.push(i[E-1]),c}var v;function S(i,a,c,f,_){var E=f?v:U(i,c),D=U(a,c),B,W,K;for(v=D;;){if(!(E|D))return[i,a];if(E&D)return!1;B=E||D,W=F(i,a,B,c,_),K=U(W,c),B===E?(i=W,E=K):(a=W,D=K)}}function F(i,a,c,f,_){var E=a.x-i.x,D=a.y-i.y,B=f.min,W=f.max,K,re;return c&8?(K=i.x+E*(W.y-i.y)/D,re=W.y):c&4?(K=i.x+E*(B.y-i.y)/D,re=B.y):c&2?(K=W.x,re=i.y+D*(W.x-i.x)/E):c&1&&(K=B.x,re=i.y+D*(B.x-i.x)/E),new $(K,re,_)}function U(i,a){var c=0;return i.x<a.min.x?c|=1:i.x>a.max.x&&(c|=2),i.y<a.min.y?c|=4:i.y>a.max.y&&(c|=8),c}function te(i,a){var c=a.x-i.x,f=a.y-i.y;return c*c+f*f}function ge(i,a,c,f){var _=a.x,E=a.y,D=c.x-_,B=c.y-E,W=D*D+B*B,K;return W>0&&(K=((i.x-_)*D+(i.y-E)*B)/W,K>1?(_=c.x,E=c.y):K>0&&(_+=D*K,E+=B*K)),D=i.x-_,B=i.y-E,f?D*D+B*B:new $(_,E)}function Me(i){return!O(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Ve(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Me(i)}function rt(i,a){var c,f,_,E,D,B,W,K;if(!i||i.length===0)throw new Error("latlngs not passed");Me(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var re=ce([0,0]),de=Ce(i),Te=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Te<1700&&(re=no(i));var Wt=i.length,xt=[];for(c=0;c<Wt;c++){var Sn=ce(i[c]);xt.push(a.project(ce([Sn.lat-re.lat,Sn.lng-re.lng])))}for(c=0,f=0;c<Wt-1;c++)f+=xt[c].distanceTo(xt[c+1])/2;if(f===0)K=xt[0];else for(c=0,E=0;c<Wt-1;c++)if(D=xt[c],B=xt[c+1],_=D.distanceTo(B),E+=_,E>f){W=(E-f)/_,K=[B.x-W*(B.x-D.x),B.y-W*(B.y-D.y)];break}var Yt=a.unproject(X(K));return ce([Yt.lat+re.lat,Yt.lng+re.lng])}var En={__proto__:null,simplify:Lt,pointToSegmentDistance:Wa,closestPointOnSegment:Uu,clipSegment:S,_getEdgeIntersection:F,_getBitCode:U,_sqClosestPointOnSegment:ge,isFlat:Me,_flat:Ve,polylineCenter:rt},Dn={project:function(i){return new $(i.lng,i.lat)},unproject:function(i){return new xe(i.y,i.x)},bounds:new he([-180,-90],[180,90])},Tn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,c=this.R,f=i.lat*a,_=this.R_MINOR/c,E=Math.sqrt(1-_*_),D=E*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-D)/(1+D),E/2);return f=-c*Math.log(Math.max(B,1e-10)),new $(i.lng*a*c,f)},unproject:function(i){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,_=Math.sqrt(1-f*f),E=Math.exp(-i.y/c),D=Math.PI/2-2*Math.atan(E),B=0,W=.1,K;B<15&&Math.abs(W)>1e-7;B++)K=_*Math.sin(D),K=Math.pow((1-K)/(1+K),_/2),W=Math.PI/2-2*Math.atan(E*K)-D,D+=W;return new xe(D*a,i.x*a/c)}},nr={__proto__:null,LonLat:Dn,Mercator:Tn,SphericalMercator:wa},io=s({},_n,{code:"EPSG:3395",projection:Tn,transformation:function(){var i=.5/(Math.PI*Tn.R);return Zr(i,.5,-i,.5)}()}),so=s({},_n,{code:"EPSG:4326",projection:Dn,transformation:Zr(1/180,1,-1/180,.5)}),fT=s({},at,{projection:Dn,transformation:Zr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var c=a.lng-i.lng,f=a.lat-i.lat;return Math.sqrt(c*c+f*f)},infinite:!0});at.Earth=_n,at.EPSG3395=io,at.EPSG3857=Gi,at.EPSG900913=wu,at.EPSG4326=so,at.Simple=fT;var Vn=Be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[d(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[d(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=d(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return d(i)in this._layers},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},_addLayers:function(i){i=i?O(i)?i:[i]:[];for(var a=0,c=i.length;a<c;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[d(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=d(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var _=this._zoomBoundLayers[f].options;i=_.minZoom===void 0?i:Math.min(i,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oo=Vn.extend({initialize:function(i,a){N(this,a),this._layers={};var c,f;if(i)for(c=0,f=i.length;c<f;c++)this.addLayer(i[c])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[i]&&f[i].apply(f,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return d(i)}}),pT=function(i,a){return new oo(i,a)},Cr=oo.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),oo.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),oo.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ke;for(var a in this._layers){var c=this._layers[a];i.extend(c.getBounds?c.getBounds():c.getLatLng())}return i}}),mT=function(i,a){return new Cr(i,a)},ao=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){N(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var c=this._getIconUrl(i);if(!c){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var _=X(f),E=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(c.className||""),E&&(i.style.marginLeft=-E.x+"px",i.style.marginTop=-E.y+"px"),_&&(i.style.width=_.x+"px",i.style.height=_.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return ae.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function gT(i){return new ao(i)}var Ha=ao.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ha.imagePath!="string"&&(Ha.imagePath=this._detectIconPath()),(this.options.imagePath||Ha.imagePath)+ao.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(c,f,_){var E=f.exec(c);return E&&E[_]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Re("div","leaflet-default-icon-path",document.body),a=ei(i,"background-image")||ei(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Hg=an.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Mn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,E=Tr(a._icon),D=c.getPixelBounds(),B=c.getPixelOrigin(),W=ve(D.min._subtract(B).add(_),D.max._subtract(B).subtract(_));if(!W.contains(E)){var K=X((Math.max(W.max.x,E.x)-W.max.x)/(D.max.x-W.max.x)-(Math.min(W.min.x,E.x)-W.min.x)/(D.min.x-W.min.x),(Math.max(W.max.y,E.y)-W.max.y)/(D.max.y-W.max.y)-(Math.min(W.min.y,E.y)-W.min.y)/(D.min.y-W.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),tt(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=V(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,c=a._shadow,f=Tr(a._icon),_=a._map.layerPointToLatLng(f);c&&tt(c,f),a._latlng=_,i.latlng=_,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Wu=Vn.extend({options:{icon:new Ha,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){N(this,a),this._latlng=ce(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=ce(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=i.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(c.title=i.title),c.tagName==="IMG"&&(c.alt=i.alt||"")),se(c,a),i.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(c,"focus",this._panOnFocus,this);var _=i.icon.createShadow(this._shadow),E=!1;_!==this._shadow&&(this._removeShadow(),E=!0),_&&(se(_,a),_.alt=""),this._shadow=_,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&E&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&tt(this._icon,i),this._shadow&&tt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hg)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hg(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Kt(this._icon,i),this._shadow&&Kt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _T(i,a){return new Wu(i,a)}var ii=Vn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return N(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Hu=ii.extend({options:{fill:!0,radius:10},initialize:function(i,a){N(this,a),this._latlng=ce(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=ce(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return ii.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,c=this._clickTolerance(),f=[i+c,a+c];this._pxBounds=new he(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yT(i,a){return new Hu(i,a)}var Md=Hu.extend({initialize:function(i,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),N(this,a),this._latlng=ce(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ke(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ii.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===_n.distance){var _=Math.PI/180,E=this._mRadius/_n.R/_,D=c.project([a+E,i]),B=c.project([a-E,i]),W=D.add(B).divideBy(2),K=c.unproject(W).lat,re=Math.acos((Math.cos(E*_)-Math.sin(a*_)*Math.sin(K*_))/(Math.cos(a*_)*Math.cos(K*_)))/_;(isNaN(re)||re===0)&&(re=E/Math.cos(Math.PI/180*a)),this._point=W.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:W.x-c.project([K,i-re]).x,this._radiusY=W.y-D.y}else{var de=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(de).x}this._updateBounds()}});function vT(i,a,c){return new Md(i,a,c)}var Pr=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){N(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,c=null,f=ge,_,E,D=0,B=this._parts.length;D<B;D++)for(var W=this._parts[D],K=1,re=W.length;K<re;K++){_=W[K-1],E=W[K];var de=f(i,_,E,!0);de<a&&(a=de,c=f(i,_,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=ce(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ke,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Me(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],c=Me(i),f=0,_=i.length;f<_;f++)c?(a[f]=ce(i[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(i[f]);return a},_project:function(){var i=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new $(i,i);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,c){var f=i[0]instanceof xe,_=i.length,E,D;if(f){for(D=[],E=0;E<_;E++)D[E]=this._map.latLngToLayerPoint(i[E]),c.extend(D[E]);a.push(D)}else for(E=0;E<_;E++)this._projectLatlngs(i[E],a,c)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,_,E,D,B,W;for(c=0,_=0,E=this._rings.length;c<E;c++)for(W=this._rings[c],f=0,D=W.length;f<D-1;f++)B=S(W[f],W[f+1],i,f,!0),B&&(a[_]=a[_]||[],a[_].push(B[0]),(B[1]!==W[f+1]||f===D-2)&&(a[_].push(B[1]),_++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,c=0,f=i.length;c<f;c++)i[c]=Lt(i[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var c,f,_,E,D,B,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(c=0,E=this._parts.length;c<E;c++)for(B=this._parts[c],f=0,D=B.length,_=D-1;f<D;_=f++)if(!(!a&&f===0)&&Wa(i,B[_],B[f])<=W)return!0;return!1}});function wT(i,a){return new Pr(i,a)}Pr._flat=Ve;var lo=Pr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ua(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=Pr.prototype._convertLatLngs.call(this,i),c=a.length;return c>=2&&a[0]instanceof xe&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(i){Pr.prototype._setLatLngs.call(this,i),Me(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Me(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(i=new he(i.min.subtract(c),i.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,_=this._rings.length,E;f<_;f++)E=Ba(this._rings[f],i,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,c,f,_,E,D,B,W,K;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(E=0,W=this._parts.length;E<W;E++)for(c=this._parts[E],D=0,K=c.length,B=K-1;D<K;B=D++)f=c[D],_=c[B],f.y>i.y!=_.y>i.y&&i.x<(_.x-f.x)*(i.y-f.y)/(_.y-f.y)+f.x&&(a=!a);return a||Pr.prototype._containsPoint.call(this,i,!0)}});function xT(i,a){return new lo(i,a)}var kr=Cr.extend({initialize:function(i,a){N(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=O(i)?i:i.features,c,f,_;if(a){for(c=0,f=a.length;c<f;c++)_=a[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var E=this.options;if(E.filter&&!E.filter(i))return this;var D=$u(i,E);return D?(D.feature=Zu(i),D.defaultOptions=D.options,this.resetStyle(D),E.onEachFeature&&E.onEachFeature(i,D),this.addLayer(D)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function $u(i,a){var c=i.type==="Feature"?i.geometry:i,f=c?c.coordinates:null,_=[],E=a&&a.pointToLayer,D=a&&a.coordsToLatLng||Dd,B,W,K,re;if(!f&&!c)return null;switch(c.type){case"Point":return B=D(f),$g(E,i,B,a);case"MultiPoint":for(K=0,re=f.length;K<re;K++)B=D(f[K]),_.push($g(E,i,B,a));return new Cr(_);case"LineString":case"MultiLineString":return W=qu(f,c.type==="LineString"?0:1,D),new Pr(W,a);case"Polygon":case"MultiPolygon":return W=qu(f,c.type==="Polygon"?1:2,D),new lo(W,a);case"GeometryCollection":for(K=0,re=c.geometries.length;K<re;K++){var de=$u({geometry:c.geometries[K],type:"Feature",properties:i.properties},a);de&&_.push(de)}return new Cr(_);case"FeatureCollection":for(K=0,re=c.features.length;K<re;K++){var Te=$u(c.features[K],a);Te&&_.push(Te)}return new Cr(_);default:throw new Error("Invalid GeoJSON object.")}}function $g(i,a,c,f){return i?i(a,c):new Wu(c,f&&f.markersInheritOptions&&f)}function Dd(i){return new xe(i[1],i[0],i[2])}function qu(i,a,c){for(var f=[],_=0,E=i.length,D;_<E;_++)D=a?qu(i[_],a-1,c):(c||Dd)(i[_]),f.push(D);return f}function Vd(i,a){return i=ce(i),i.alt!==void 0?[x(i.lng,a),x(i.lat,a),x(i.alt,a)]:[x(i.lng,a),x(i.lat,a)]}function Gu(i,a,c,f){for(var _=[],E=0,D=i.length;E<D;E++)_.push(a?Gu(i[E],Me(i[E])?0:a-1,c,f):Vd(i[E],f));return!a&&c&&_.length>0&&_.push(_[0].slice()),_}function uo(i,a){return i.feature?s({},i.feature,{geometry:a}):Zu(a)}function Zu(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var zd={toGeoJSON:function(i){return uo(this,{type:"Point",coordinates:Vd(this.getLatLng(),i)})}};Wu.include(zd),Md.include(zd),Hu.include(zd),Pr.include({toGeoJSON:function(i){var a=!Me(this._latlngs),c=Gu(this._latlngs,a?1:0,!1,i);return uo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),lo.include({toGeoJSON:function(i){var a=!Me(this._latlngs),c=a&&!Me(this._latlngs[0]),f=Gu(this._latlngs,c?2:a?1:0,!0,i);return a||(f=[f]),uo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),oo.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(i).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(_){if(_.toGeoJSON){var E=_.toGeoJSON(i);if(c)f.push(E.geometry);else{var D=Zu(E);D.type==="FeatureCollection"?f.push.apply(f,D.features):f.push(D)}}}),c?uo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function qg(i,a){return new kr(i,a)}var ET=qg,Ku=Vn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,c){this._url=i,this._bounds=Ce(a),N(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&vn(this._image),this},bringToBack:function(){return this._map&&wn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ce(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:Re("img");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Er(this._image,c,a)},_reset:function(){var i=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();tt(i,a.min),i.style.width=c.x+"px",i.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),TT=function(i,a,c){return new Ku(i,a,c)},Gg=Ku.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:Re("video");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),i){for(var c=a.getElementsByTagName("source"),f=[],_=0;_<c.length;_++)f.push(c[_].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var D=Re("source");D.src=this._url[E],a.appendChild(D)}}});function ST(i,a,c){return new Gg(i,a,c)}var Zg=Ku.extend({_initImage:function(){var i=this._image=this._url;se(i,"leaflet-image-layer"),this._zoomAnimated&&se(i,"leaflet-zoom-animated"),this.options.className&&se(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function IT(i,a,c){return new Zg(i,a,c)}var rr=Vn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof xe||O(i))?(this._latlng=ce(i),N(this,a)):(N(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ce(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vn(this._container),this},bringToBack:function(){return this._map&&wn(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof Cr){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?tt(this._container,i.add(c)):a=a.add(i).add(c);var f=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(i,a,c,f){var _=a;return _ instanceof i||(_=new i(f).setContent(a)),c&&_.setLatLng(c),_}}),Vn.include({_initOverlay:function(i,a,c,f){var _=c;return _ instanceof i?(N(_,f),_._source=this):(_=a&&!f?a:new i(f,this),_.setContent(c)),_}});var Qu=rr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,rr.prototype.openOn.call(this,i)},onAdd:function(i){rr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",De))},onRemove:function(i){rr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",De))},getEvents:function(){var i=rr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=Re("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Re("div",i+"-content-wrapper",a);if(this._contentNode=Re("div",i+"-content",c),os(a),Na(this._contentNode),me(a,"contextmenu",De),this._tipContainer=Re("div",i+"-tip-container",a),this._tip=Re("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Re("a",i+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',me(f,"click",function(_){lt(_),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var c=i.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=i.offsetHeight,_=this.options.maxHeight,E="leaflet-popup-scrolled";_&&f>_?(a.height=_+"px",se(i,E)):Ue(i,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),c=this._getAnchor();tt(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(ei(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,_=new $(this._containerLeft,-c-this._containerBottom);_._add(Tr(this._container));var E=i.layerPointToContainerPoint(_),D=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||D),W=X(this.options.autoPanPaddingBottomRight||D),K=i.getSize(),re=0,de=0;E.x+f+W.x>K.x&&(re=E.x+f-K.x+W.x),E.x-re-B.x<0&&(re=E.x-B.x),E.y+c+W.y>K.y&&(de=E.y+c-K.y+W.y),E.y-de-B.y<0&&(de=E.y-B.y),(re||de)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([re,de]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),CT=function(i,a){return new Qu(i,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(i,a,c){return this._initOverlay(Qu,i,a,c).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Vn.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Qu,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Cr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xn(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Yu=rr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){rr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){rr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=rr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,c,f=this._map,_=this._container,E=f.latLngToContainerPoint(f.getCenter()),D=f.layerPointToContainerPoint(i),B=this.options.direction,W=_.offsetWidth,K=_.offsetHeight,re=X(this.options.offset),de=this._getAnchor();B==="top"?(a=W/2,c=K):B==="bottom"?(a=W/2,c=0):B==="center"?(a=W/2,c=K/2):B==="right"?(a=0,c=K/2):B==="left"?(a=W,c=K/2):D.x<E.x?(B="right",a=0,c=K/2):(B="left",a=W+(re.x+de.x)*2,c=K/2),i=i.subtract(X(a,c,!0)).add(re).add(de),Ue(_,"leaflet-tooltip-right"),Ue(_,"leaflet-tooltip-left"),Ue(_,"leaflet-tooltip-top"),Ue(_,"leaflet-tooltip-bottom"),se(_,"leaflet-tooltip-"+B),tt(_,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Kt(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),PT=function(i,a){return new Yu(i,a)};Ee.include({openTooltip:function(i,a,c){return this._initOverlay(Yu,i,a,c).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Vn.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Yu,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Cr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(me(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),me(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,c,f;this._tooltip.options.sticky&&i.originalEvent&&(c=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Kg=ao.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Bt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function kT(i){return new Kg(i)}ao.Default=Ha;var $a=Vn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){N(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Oe(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof $?i:new $(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,c=-i(-1/0,1/0),f=0,_=a.length,E;f<_;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=i(c,+E));isFinite(c)&&(this.options.zIndex=c+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Kt(this._container,this.options.opacity);var i=+new Date,a=!1,c=!1;for(var f in this._tiles){var _=this._tiles[f];if(!(!_.current||!_.loaded)){var E=Math.min(1,(i-_.loaded)/200);Kt(_.el,E),E<1?a=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(P(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===i?(this._levels[c].el.style.zIndex=a-Math.abs(i-c),this._onUpdateLevel(c)):(Oe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[i],_=this._map;return f||(f=this._levels[i]={},f.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=_.project(_.unproject(_.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,_.getCenter(),_.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Oe(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,c,f){var _=Math.floor(i/2),E=Math.floor(a/2),D=c-1,B=new $(+_,+E);B.z=+D;var W=this._tileCoordsToKey(B),K=this._tiles[W];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),D>f?this._retainParent(_,E,D,f):!1)},_retainChildren:function(i,a,c,f){for(var _=2*i;_<2*i+2;_++)for(var E=2*a;E<2*a+2;E++){var D=new $(_,E);D.z=c+1;var B=this._tileCoordsToKey(D),W=this._tiles[B];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);c+1<f&&this._retainChildren(_,E,c+1,f)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,c,f){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var E=this.options.updateWhenZooming&&_!==this._tileZoom;(!f||E)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(i),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],i,a)},_setZoomTransform:function(i,a,c){var f=this._map.getZoomScale(c,i.zoom),_=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Er(i.el,_,f):tt(i.el,_)},_resetGrid:function(){var i=this._map,a=i.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(i.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(i.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),_=a.project(i,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new he(_.subtract(E),_.add(E))},_update:function(i){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),_=this._pxBoundsToTileRange(f),E=_.getCenter(),D=[],B=this.options.keepBuffer,W=new he(_.getBottomLeft().subtract([B,-B]),_.getTopRight().add([B,-B]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var re=this._tiles[K].coords;(re.z!==this._tileZoom||!W.contains(new $(re.x,re.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(i,c);return}for(var de=_.min.y;de<=_.max.y;de++)for(var Te=_.min.x;Te<=_.max.x;Te++){var Wt=new $(Te,de);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var xt=this._tiles[this._tileCoordsToKey(Wt)];xt?xt.current=!0:D.push(Wt)}}if(D.sort(function(Yt,ho){return Yt.distanceTo(E)-ho.distanceTo(E)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Sn=document.createDocumentFragment();for(Te=0;Te<D.length;Te++)this._addTile(D[Te],Sn);this._level.el.appendChild(Sn)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(i.x<c.min.x||i.x>c.max.x)||!a.wrapLat&&(i.y<c.min.y||i.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return Ce(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,c=this.getTileSize(),f=i.scaleBy(c),_=f.add(c),E=a.unproject(f,i.z),D=a.unproject(_,i.z);return[E,D]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),c=new Ke(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(i){var a=this._tiles[i];a&&(Oe(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){se(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=w,i.onmousemove=w,ae.ielt9&&this.options.opacity<1&&Kt(i,this.options.opacity)},_addTile:function(i,a){var c=this._getTilePos(i),f=this._tileCoordsToKey(i),_=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(_),this.createTile.length<2&&V(l(this._tileReady,this,i,null,_)),tt(_,c),this._tiles[f]={el:_,coords:i,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:i})},_tileReady:function(i,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:i});var f=this._tileCoordsToKey(i);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),P(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(se(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new $(this._wrapX?y(i.x,this._wrapX):i.x,this._wrapY?y(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new he(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function AT(i){return new $a(i)}var co=$a.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=N(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var c=document.createElement("img");return me(c,"load",l(this._tileOnLoad,this,a,c)),me(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(i),c},getTileUrl:function(i){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=c),a["-y"]=c}return T(this._url,s(a,this.options))},_tileOnLoad:function(i,a){ae.ielt9?setTimeout(l(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),i(c,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(i=a-i),i+f},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Q;var c=this._tiles[i].coords;Oe(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",Q),$a.prototype._removeTile.call(this,i)},_tileReady:function(i,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return $a.prototype._tileReady.call(this,i,a,c)}});function Qg(i,a){return new co(i,a)}var Yg=co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=N(this,a);var _=a.detectRetina&&ae.retina?2:1,E=this.getTileSize();c.width=E.x*_,c.height=E.y*_,this.wmsParams=c},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,co.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),_=f.min,E=f.max,D=(this._wmsVersion>=1.3&&this._crs===so?[_.y,_.x,E.y,E.x]:[_.x,_.y,E.x,E.y]).join(","),B=co.prototype.getTileUrl.call(this,i);return B+j(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(i,a){return s(this.wmsParams,i),a||this.redraw(),this}});function RT(i,a){return new Yg(i,a)}co.WMS=Yg,Qg.wms=RT;var Ar=Vn.extend({options:{padding:.1},initialize:function(i){N(this,i),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),E=f.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(i,a));ae.any3d?Er(this._container,E,c):tt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xg=Ar.extend({options:{tolerance:0},getEvents:function(){var i=Ar.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");me(i,"mousemove",this._onMouseMove,this),me(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,Oe(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var i=this._bounds,a=this._container,c=i.getSize(),f=ae.retina?2:1;tt(a,i.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[d(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete i._order,delete this._layers[d(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),c=[],f,_;for(_=0;_<a.length;_++){if(f=Number(a[_]),isNaN(f))return;c.push(f)}i.options._dashArray=c}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var c,f,_,E,D=i._parts,B=D.length,W=this._ctx;if(B){for(W.beginPath(),c=0;c<B;c++){for(f=0,_=D[c].length;f<_;f++)E=D[c][f],W[f?"lineTo":"moveTo"](E.x,E.y);a&&W.closePath()}this._fillStroke(W,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,c=this._ctx,f=Math.max(Math.round(i._radius),1),_=(Math.max(Math.round(i._radiusY),1)||f)/f;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(a.x,a.y/_,f,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,i)}},_fillStroke:function(i,a){var c=a.options;c.fill&&(i.globalAlpha=c.fillOpacity,i.fillStyle=c.fillColor||c.color,i.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=c.opacity,i.lineWidth=c.weight,i.strokeStyle=c.color,i.lineCap=c.lineCap,i.lineJoin=c.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(se(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,c){this._map._fireDOMEvent(a,c||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function Jg(i){return ae.canvas?new Xg(i):null}var qa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bT={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ar.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=qa("shape");se(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=qa("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;Oe(a),i.removeInteractiveTarget(a),delete this._layers[d(i)]},_updateStyle:function(i){var a=i._stroke,c=i._fill,f=i.options,_=i._container;_.stroked=!!f.stroke,_.filled=!!f.fill,f.stroke?(a||(a=i._stroke=qa("stroke")),_.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(_.removeChild(a),i._stroke=null),f.fill?(c||(c=i._fill=qa("fill")),_.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(_.removeChild(c),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),c=Math.round(i._radius),f=Math.round(i._radiusY||c);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){vn(i._container)},_bringToBack:function(i){wn(i._container)}},Xu=ae.vml?qa:xu,Ga=Ar.extend({_initContainer:function(){this._container=Xu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var i=this._bounds,a=i.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),tt(c,i.min),c.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Xu("path");i.options.className&&se(a,i.options.className),i.options.interactive&&se(a,"leaflet-interactive"),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Oe(i._path),i.removeInteractiveTarget(i._path),delete this._layers[d(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,c=i.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,zs(i._parts,a))},_updateCircle:function(i){var a=i._point,c=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||c,_="a"+c+","+f+" 0 1,0 ",E=i._empty()?"M0 0":"M"+(a.x-c)+","+a.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(i,E)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){vn(i._path)},_bringToBack:function(i){wn(i._path)}});ae.vml&&Ga.include(bT);function e_(i){return ae.svg||ae.vml?new Ga(i):null}Ee.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&Jg(i)||e_(i)}});var t_=lo.extend({initialize:function(i,a){lo.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ce(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function LT(i,a){return new t_(i,a)}Ga.create=Xu,Ga.pointsToPath=zs,kr.geometryToLayer=$u,kr.coordsToLatLng=Dd,kr.coordsToLatLngs=qu,kr.latLngToCoords=Vd,kr.latLngsToCoords=Gu,kr.getFeature=uo,kr.asFeature=Zu,Ee.mergeOptions({boxZoom:!0});var n_=an.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),On(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(i),me(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new he(this._point,this._startPoint),c=a.getSize();tt(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Oe(this._box),Ue(this._container,"leaflet-crosshair")),on(),Qs(),je(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",n_),Ee.mergeOptions({doubleClickZoom:!0});var r_=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,_=i.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(i.containerPoint,_)}});Ee.addInitHook("addHandler","doubleClickZoom",r_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var i_=an.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Mn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ce(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,_=(f-a+c)%i+a-c,E=(f+a+c)%i-a-c,D=Math.abs(_+c)<Math.abs(E+c)?_:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(i){var a=this._map,c=a.options,f=!c.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),f)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,D=c.easeLinearity,B=_.multiplyBy(D/E),W=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,W),re=B.multiplyBy(K/W),de=K/(c.inertiaDeceleration*D),Te=re.multiplyBy(-de/2).round();!Te.x&&!Te.y?a.fire("moveend"):(Te=a._limitOffset(Te,a.options.maxBounds),V(function(){a.panBy(Te,{duration:de,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",i_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var s_=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),me(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,c=i.scrollTop||a.scrollTop,f=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},c=this.keyCodes,f,_;for(f=0,_=c.left.length;f<_;f++)a[c.left[f]]=[-1*i,0];for(f=0,_=c.right.length;f<_;f++)a[c.right[f]]=[i,0];for(f=0,_=c.down.length;f<_;f++)a[c.down[f]]=[0,i];for(f=0,_=c.up.length;f<_;f++)a[c.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},c=this.keyCodes,f,_;for(f=0,_=c.zoomIn.length;f<_;f++)a[c.zoomIn[f]]=i;for(f=0,_=c.zoomOut.length;f<_;f++)a[c.zoomOut[f]]=-i},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],i.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(_)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Xn(i)}}});Ee.addInitHook("addHandler","keyboard",s_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var o_=an.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=Ma(i),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Xn(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),c=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(_/c)*c:_,D=i._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,D&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+D):i.setZoomAround(this._lastMousePos,a+D))}});Ee.addInitHook("addHandler","scrollWheelZoom",o_);var NT=600;Ee.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var a_=an.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",lt),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),NT),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){je(document,"touchend",lt),je(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var c=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",a_),Ee.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var l_=an.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),lt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]),_=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(_===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var D=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(D,this,!0),lt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",l_),Ee.BoxZoom=n_,Ee.DoubleClickZoom=r_,Ee.Drag=i_,Ee.Keyboard=s_,Ee.ScrollWheelZoom=o_,Ee.TapHold=a_,Ee.TouchZoom=l_,n.Bounds=he,n.Browser=ae,n.CRS=at,n.Canvas=Xg,n.Circle=Md,n.CircleMarker=Hu,n.Class=ee,n.Control=Qt,n.DivIcon=Kg,n.DivOverlay=rr,n.DomEvent=ls,n.DomUtil=Od,n.Draggable=Mn,n.Evented=Be,n.FeatureGroup=Cr,n.GeoJSON=kr,n.GridLayer=$a,n.Handler=an,n.Icon=ao,n.ImageOverlay=Ku,n.LatLng=xe,n.LatLngBounds=Ke,n.Layer=Vn,n.LayerGroup=oo,n.LineUtil=En,n.Map=Ee,n.Marker=Wu,n.Mixin=Bu,n.Path=ii,n.Point=$,n.PolyUtil=ro,n.Polygon=lo,n.Polyline=Pr,n.Popup=Qu,n.PosAnimation=Va,n.Projection=nr,n.Rectangle=t_,n.Renderer=Ar,n.SVG=Ga,n.SVGOverlay=Zg,n.TileLayer=co,n.Tooltip=Yu,n.Transformation=xa,n.Util=A,n.VideoOverlay=Gg,n.bind=l,n.bounds=ve,n.canvas=Jg,n.circle=vT,n.circleMarker=yT,n.control=er,n.divIcon=kT,n.extend=s,n.featureGroup=mT,n.geoJSON=qg,n.geoJson=ET,n.gridLayer=AT,n.icon=gT,n.imageOverlay=TT,n.latLng=ce,n.latLngBounds=Ce,n.layerGroup=pT,n.map=Js,n.marker=_T,n.point=X,n.polygon=xT,n.polyline=wT,n.popup=CT,n.rectangle=LT,n.setOptions=N,n.stamp=d,n.svg=e_,n.svgOverlay=IT,n.tileLayer=Qg,n.tooltip=PT,n.transformation=Zr,n.version=r,n.videoOverlay=ST;var OT=window.L;n.noConflict=function(){return window.L=OT,this},window.L=n})})(Kp,Kp.exports);var ya=Kp.exports;const Qp=o0(ya);function Id(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Cd(t,e){return e==null?function(r,s){const o=q.useRef();return o.current||(o.current=t(r,s)),o}:function(r,s){const o=q.useRef();o.current||(o.current=t(r,s));const l=q.useRef(r),{instance:h}=o.current;return q.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,s]),o}}function uT(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function cT(t){return function(n){const r=Ug(),s=t(Sd(n,r),r);return iT(r.map,n.attribution),Wg(s.current,n.eventHandlers),uT(s.current,r),s}}function NN(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function ON(t){return function(n){const r=Ug(),s=t(Sd(n,r),r);return Wg(s.current,n.eventHandlers),uT(s.current,r),NN(s.current,n),s}}function MN(t,e){const n=Cd(t,e),r=cT(n);return lT(r)}function DN(t,e){const n=Cd(t),r=LN(n,e);return RN(r)}function VN(t,e){const n=Cd(t,e),r=ON(n);return lT(r)}function zN(t,e){const n=Cd(t,e),r=cT(n);return bN(r)}function jN(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Yp(){return Yp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yp.apply(this,arguments)}function FN({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...y},w){const[x]=q.useState({className:s,id:o,style:h}),[k,z]=q.useState(null);q.useImperativeHandle(w,()=>(k==null?void 0:k.map)??null,[k]);const N=q.useCallback(R=>{if(R!==null&&k===null){const T=new ya.Map(R,y);n!=null&&p!=null?T.setView(n,p):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),z(AN(T))}},[]);q.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const j=k?Pl.createElement(aT,{value:k},r):l??null;return Pl.createElement("div",Yp({},x,{ref:N}),j)}const BN=q.forwardRef(FN),hT=MN(function({position:e,...n},r){const s=new ya.Marker(e,n);return Id(s,sT(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),UN=VN(function({positions:e,...n},r){const s=new ya.Polygon(e,n);return Id(s,sT(r,{overlayContainer:s}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),dT=DN(function(e,n){const r=new ya.Popup(e,n.overlayContainer);return Id(r,n)},function(e,n,{position:r},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,r])}),WN=zN(function({url:e,...n},r){const s=new ya.TileLayer(e,Sd(n,r));return Id(s,r)},function(e,n,r){jN(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),HN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],$N=(t,e=3)=>{const n=[];for(let r=0;r<t.length-1;r++){const s=t[r],o=t[r+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},qN=(t,e)=>{const n=$N(t,5),r=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],y=p[0]-o,w=p[1]-l,x=Math.sqrt(y*y+w*w);if(x===0)continue;const k=y/x,z=w/x,N=Math.atan2(w,y)*(180/Math.PI);let j=0;if(N>=45&&N<=135){const T=1-Math.abs((N-90)/45);j+=100*T}if(Math.abs(N)>=135){const T=Math.abs(N),O=1-Math.abs((T-180)/45);j+=100*O}const R=Math.max(0,e-j);h.push([p[0]+k*R*r,p[1]+z*R*s])}return h},GN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],ZN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],s0=(t,e=0)=>{let n="white",r=2;return e>0&&e<50?(n="#FF9800",r=3):e>=50&&(n="#EF4444",r=3),Qp.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: ${r}px solid ${n}; box-sizing: border-box;"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},KN=({facility:t,onViewDetails:e})=>{var h,d;const n=q.useRef(null),r=p=>{switch(p==null?void 0:p.toLowerCase().trim()){case"refinery":return"#1cc5b7ff";case"extraction":return"#8B5CF6";case"storage":return"#F59E0B";default:return"#FFC300"}};q.useEffect(()=>{if(n.current){const p=r(t.type);n.current.setIcon(s0(p,t.damagePercentage||0))}},[t.damagePercentage,t.type]);const s=((h=t.location)==null?void 0:h.latitude)??t.latitude??0,o=((d=t.location)==null?void 0:d.longitude)??t.longitude??0,l=r(t.type);return g.jsx(hT,{ref:n,position:[s,o],icon:s0(l,t.damagePercentage||0),children:g.jsx(dT,{children:g.jsxs("div",{style:{color:"#1f2937",minWidth:"280px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},children:[g.jsx("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:g.jsx("h3",{style:{margin:"0",fontSize:"18px",fontWeight:"700",color:"#111827",lineHeight:"1.3"},children:t.name})}),g.jsxs("div",{style:{marginBottom:"14px",display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[g.jsx("div",{style:{display:"inline-flex",alignItems:"center",padding:"5px 12px",backgroundColor:t.hit?"#ef4444":"#10b981",color:"white",borderRadius:"6px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:t.hit?" HIT":" OPERATIONAL"}),t.hit&&t.damagePercentage&&t.damagePercentage>0&&g.jsxs("div",{style:{display:"inline-flex",alignItems:"center",padding:"5px 12px",backgroundColor:"#f97316",color:"white",borderRadius:"6px",fontSize:"12px",fontWeight:"700",letterSpacing:"0.3px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[" ",t.damagePercentage,"%"]})]}),g.jsx("div",{style:{marginBottom:"14px",padding:"10px 12px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:g.jsxs("p",{style:{margin:"0",fontSize:"13px",color:"#6b7280"},children:[g.jsx("span",{style:{fontWeight:"600",color:"#374151"},children:"Type:"})," ",g.jsx("span",{style:{textTransform:"capitalize",color:"#111827",fontWeight:"500"},children:t.type})]})}),g.jsxs("div",{style:{margin:"14px 0",padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fde68a"},children:[g.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"13px",fontWeight:"700",color:"#92400e",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Production"}),g.jsx("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:g.jsxs("p",{style:{margin:"0",fontSize:"13px",lineHeight:"1.6"},children:[g.jsx("span",{style:{fontWeight:"600",color:"#374151"},children:" Oil:"})," ",g.jsxs("span",{style:{color:"#111827",fontWeight:"500"},children:[t.capacity.toLocaleString()," bbl/day"]}),t.hit&&t.damagePercentage&&t.damagePercentage>0&&g.jsxs(g.Fragment,{children:[g.jsx("br",{}),g.jsxs("span",{style:{color:"#dc2626",fontWeight:"700",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:[" ",Math.round(t.capacity*(1-t.damagePercentage/100)).toLocaleString()," bbl/day"]})]})]})}),t.gasCapacity&&g.jsx("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:g.jsxs("p",{style:{margin:"0",fontSize:"13px",lineHeight:"1.6"},children:[g.jsx("span",{style:{fontWeight:"600",color:"#374151"},children:" Gas:"})," ",g.jsxs("span",{style:{color:"#111827",fontWeight:"500"},children:[t.gasCapacity.toLocaleString()," m/year"]}),t.hit&&t.damagePercentage&&t.damagePercentage>0&&g.jsxs(g.Fragment,{children:[g.jsx("br",{}),g.jsxs("span",{style:{color:"#dc2626",fontWeight:"700",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:[" ",Math.round(t.gasCapacity*(1-t.damagePercentage/100)).toLocaleString()," m/year"]})]})]})})]}),g.jsx("div",{style:{margin:"12px 0 14px 0",padding:"8px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",textAlign:"center"},children:g.jsxs("p",{style:{margin:"0",fontSize:"11px",color:"#6b7280",fontWeight:"500",fontFamily:"monospace",letterSpacing:"0.3px"},children:[" ",s.toFixed(4),", ",o.toFixed(4)]})}),g.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"10px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseOver:p=>{p.currentTarget.style.backgroundColor="#2563eb",p.currentTarget.style.transform="translateY(-1px)",p.currentTarget.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.4)"},onMouseOut:p=>{p.currentTarget.style.backgroundColor="#3b82f6",p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(59, 130, 246, 0.3)"},children:"View Full Details "})]})})})},QN=()=>{const t=aa(),[e,n]=q.useState([]),[r,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,y]=q.useState(0),[w,x]=q.useState(!0),[k,z]=q.useState(!0),[N,j]=q.useState(!0),[R,T]=q.useState(!0),[O,H]=q.useState(!0),[Q,J]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!Se){console.error("Firebase not initialized");return}const M=await cn(un(Se,qe.FACILITIES)),V=await cn(un(Se,qe.HITS)),P=M.docs.map(A=>{const ee=A.data(),we=parseInt(A.id),Be=V.docs.map($=>$.data()).filter($=>$.facilityId===we&&!$.draft).reduce(($,le)=>$+(le.damagePercentage||0),0);return{id:we,...ee,damagePercentage:Be}}).filter(A=>!A.draft);n(P)}catch(M){console.error("Error fetching facilities:",M)}})()},[]);const b=I=>{t(`/facility/${I}`)},C=e.filter(I=>!(r!=="all"&&I.type!==r||I.type==="refinery"&&!w||I.type==="extraction"&&!k||I.type==="storage"&&!N||o==="hit"&&!I.hit||o==="operational"&&I.hit||I.capacity<p||h&&!I.name.toLowerCase().includes(h.toLowerCase())));return g.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[g.jsxs("div",{style:{width:"320px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[g.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),g.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[C.length," of ",e.length," facilities"]})]}),g.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),g.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:I=>d(I.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:I=>I.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:I=>I.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[g.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:I=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[g.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:I=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Min. Capacity"}),g.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px",marginBottom:"8px",fontWeight:"600"},children:[p.toLocaleString()," barrels/day"]}),g.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:I=>y(Number(I.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"5px"}})]}),g.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[g.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Facility Types"}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[g.jsx("input",{type:"checkbox",checked:w,onChange:I=>x(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),g.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"2px"}}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[g.jsx("input",{type:"checkbox",checked:k,onChange:I=>z(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),g.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#8B5CF6",borderRadius:"2px"}}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[g.jsx("input",{type:"checkbox",checked:N,onChange:I=>j(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),g.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#F59E0B",borderRadius:"2px"}}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),g.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[g.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Weapon Ranges"}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[g.jsx("span",{style:{color:"#10B981",fontSize:"16px"},children:""}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"500km Range"})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[g.jsx("span",{style:{color:"#F97316",fontSize:"16px"},children:""}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1000km Range"})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[g.jsx("span",{style:{color:"#EF4444",fontSize:"16px"},children:""}),g.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1500km Range"})]})]})]})]})]}),g.jsx("div",{style:{flex:1,position:"relative"},children:g.jsxs(BN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[g.jsx(WN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),GN.map(I=>{if(I.range===500&&!R||I.range===1e3&&!O||I.range===1500&&!Q)return null;const M=qN(HN,I.range);return g.jsx(UN,{positions:M,pathOptions:{color:I.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}},I.range)}),ZN.map(I=>{let M;return I.name==="Moscow"?M=Qp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${I.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):I.name==="Kyiv"&&I.colors&&(M=Qp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${I.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${I.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),g.jsx(hT,{position:[I.lat,I.lon],icon:M,children:g.jsx(dT,{children:g.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:I.name})})},I.name)}),C.map(I=>g.jsx(KN,{facility:I,onViewDetails:b},I.id))]})})]})},YN=()=>{var w,x;const{id:t}=td(),e=aa(),[n,r]=q.useState(null),[s,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!Se){console.error("Firebase not initialized"),h(!1);return}const z=Pn(Se,qe.FACILITIES,t),N=await bg(z);if(N.exists()){r({id:parseInt(N.id),...N.data()});const j=un(Se,qe.HITS),R=Fc(j,Bc("facilityId","==",parseInt(t)),r2("date","desc")),O=(await cn(R)).docs.map(H=>({id:H.data().id,...H.data()})).filter(H=>!H.draft);o(O)}else console.error("Facility not found");h(!1)}catch(z){console.error("Error fetching facility:",z),h(!1)}})()},[t]),l)return g.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return g.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[g.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),g.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((w=n.location)==null?void 0:w.latitude)??n.latitude??0,p=((x=n.location)==null?void 0:x.longitude)??n.longitude??0,y=k=>{switch(k){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return g.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[g.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Back to Map"}),g.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),g.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),g.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:g.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),g.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[g.jsx("span",{style:{color:y(n.type),fontSize:"28px"},children:""}),g.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),g.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),g.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),g.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),g.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[g.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),g.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[g.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),g.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),""]})]}),g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),g.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),""]})]})]}),g.jsx("div",{style:{marginTop:"20px"},children:g.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps "})})]}),s.length>0&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[g.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),g.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((k,z)=>g.jsxs("div",{onClick:()=>e(`/hit/${k.id}`),style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="#1a1a1a",N.currentTarget.style.borderColor="#444",N.currentTarget.style.transform="translateX(4px)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="#0a0a0a",N.currentTarget.style.borderColor="#333",N.currentTarget.style.transform="translateX(0)"},children:[g.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[g.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-z}),g.jsxs("div",{children:[g.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(k.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),g.jsxs("div",{style:{fontSize:"13px",color:"#888",display:"flex",gap:"12px",flexWrap:"wrap"},children:[k.severity&&g.jsxs("span",{children:["Severity: ",g.jsx("span",{style:{color:k.severity==="destroyed"?"#f44336":"#FF9800",fontWeight:"600",textTransform:"uppercase"},children:k.severity})]}),k.damagePercentage!=null&&g.jsxs("span",{children:["Impact: ",g.jsxs("span",{style:{color:"#f44336",fontWeight:"600"},children:["-",k.damagePercentage,"%"]})]}),k.expectedRepairTime&&g.jsxs("span",{children:["Repair: ",g.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[k.expectedRepairTime," days"]})]})]})]})]})}),(k.mediaLinks&&k.mediaLinks.length>0||k.videoLink)&&g.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:k.mediaLinks&&k.mediaLinks.length>0?k.mediaLinks.map((N,j)=>g.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",display:"inline-block"},children:[N.includes("youtube")||N.includes("youtu.be")||N.includes("video")?"":""," Media ",j+1]},j)):k.videoLink&&g.jsx("a",{href:k.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:" Video"})}),k.notes&&g.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5",marginBottom:"12px"},children:k.notes}),g.jsxs("div",{style:{marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #333",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"6px",color:"#3b82f6",fontSize:"13px",fontWeight:"500"},children:[g.jsx("span",{children:"View Full Details"}),g.jsx("span",{style:{fontSize:"16px"},children:""})]})]},k.id))})]})]})})]})},XN=()=>{const{id:t}=td(),e=aa(),[n,r]=q.useState(null),[s,o]=q.useState(null),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!Se){console.error("Firebase not initialized"),h(!1);return}const y=un(Se,qe.HITS),x=(await cn(y)).docs.find(k=>k.data().id===parseInt(t));if(x){const k={id:x.data().id,...x.data()};r(k);const z=un(Se,qe.FACILITIES),j=(await cn(z)).docs.find(R=>parseInt(R.id)===k.facilityId);j&&o({id:parseInt(j.id),...j.data()})}else console.error("Hit not found");h(!1)}catch(y){console.error("Error fetching hit:",y),h(!1)}})()},[t]),l)return g.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return g.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px"},children:[g.jsx("div",{style:{color:"white",fontSize:"18px"},children:"Hit not found"}),g.jsx("button",{onClick:()=>e("/"),style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=new Date(n.date);return g.jsxs("div",{style:{width:"100%",minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"0"},children:[g.jsx("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"1px solid #333",padding:"20px 40px",position:"sticky",top:0,zIndex:100},children:g.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:g.jsxs("button",{onClick:()=>e(-1),style:{padding:"8px 16px",backgroundColor:"transparent",color:"#888",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#333",p.currentTarget.style.color="white"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.color="#888"},children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Back"})]})})}),g.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"40px"},children:[g.jsxs("div",{style:{marginBottom:"40px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[g.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"13px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Strike Record"}),g.jsxs("div",{style:{color:"#666",fontSize:"14px",fontFamily:"monospace"},children:["ID #",n.id]})]}),g.jsxs("h1",{style:{margin:"0 0 12px 0",fontSize:"36px",fontWeight:"700"},children:["Strike on ",d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),s&&g.jsxs("div",{style:{fontSize:"16px",color:"#888",marginBottom:"8px"},children:["Target: ",g.jsx("button",{onClick:()=>e(`/facility/${s.id}`),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"16px",fontWeight:"600",textDecoration:"underline",padding:0},children:s.name})]})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"20px",marginBottom:"30px"},children:[g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:" Strike Date"}),g.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"white"},children:d.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),g.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:d.toLocaleDateString("en-US",{weekday:"long"})})]}),n.severity&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:" Severity"}),g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:n.severity==="destroyed"?"#f44336":"#FF9800",textTransform:"uppercase"},children:n.severity})]}),n.damagePercentage!=null&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:" Impact on Production"}),g.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#dc2626"},children:["-",n.damagePercentage,"%"]})]}),n.expectedRepairTime&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[g.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:" Expected Repair Time"}),g.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#f59e0b"},children:n.expectedRepairTime}),g.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"days"})]})]}),s&&n.damagePercentage!=null&&n.damagePercentage>0&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[g.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:" Production Impact"}),g.jsxs("div",{style:{display:"grid",gap:"20px"},children:[g.jsxs("div",{style:{padding:"20px",backgroundColor:"#0a0a0a",borderRadius:"6px",border:"1px solid #333"},children:[g.jsx("div",{style:{fontSize:"14px",color:"#888",marginBottom:"8px",fontWeight:"500"},children:" Oil Production"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"4px"},children:"Before Strike"}),g.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"white"},children:[s.capacity.toLocaleString()," ",g.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"bbl/day"})]})]}),g.jsx("div",{style:{fontSize:"24px",color:"#666"},children:""}),g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"4px"},children:"After Strike"}),g.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#dc2626"},children:[Math.round(s.capacity*(1-n.damagePercentage/100)).toLocaleString()," ",g.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"bbl/day"})]})]})]}),g.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#dc2626",fontWeight:"600"},children:["Loss: ",Math.round(s.capacity*(n.damagePercentage/100)).toLocaleString()," bbl/day"]})]}),s.gasCapacity&&g.jsxs("div",{style:{padding:"20px",backgroundColor:"#0a0a0a",borderRadius:"6px",border:"1px solid #333"},children:[g.jsx("div",{style:{fontSize:"14px",color:"#888",marginBottom:"8px",fontWeight:"500"},children:" Gas Production"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"4px"},children:"Before Strike"}),g.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"white"},children:[s.gasCapacity.toLocaleString()," ",g.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"m/year"})]})]}),g.jsx("div",{style:{fontSize:"24px",color:"#666"},children:""}),g.jsxs("div",{children:[g.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"4px"},children:"After Strike"}),g.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#dc2626"},children:[Math.round(s.gasCapacity*(1-n.damagePercentage/100)).toLocaleString()," ",g.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"m/year"})]})]})]}),g.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#dc2626",fontWeight:"600"},children:["Loss: ",Math.round(s.gasCapacity*(n.damagePercentage/100)).toLocaleString()," m/year"]})]})]})]}),n.notes&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[g.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:" Notes"}),g.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.7",color:"#ccc",whiteSpace:"pre-wrap"},children:n.notes})]}),(n.mediaLinks&&n.mediaLinks.length>0||n.videoLink)&&g.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[g.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:" Media & Evidence"}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.mediaLinks&&n.mediaLinks.length>0?n.mediaLinks.map((p,y)=>g.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px 20px",backgroundColor:"#0a0a0a",color:"white",textDecoration:"none",borderRadius:"6px",border:"1px solid #333",fontSize:"15px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.backgroundColor="#dc2626",w.currentTarget.style.borderColor="#dc2626"},onMouseLeave:w=>{w.currentTarget.style.backgroundColor="#0a0a0a",w.currentTarget.style.borderColor="#333"},children:[g.jsx("span",{style:{fontSize:"24px"},children:p.includes("youtube")||p.includes("youtu.be")||p.includes("video")?"":""}),g.jsxs("div",{style:{flex:1},children:[g.jsxs("div",{children:["Media Source ",y+1]}),g.jsx("div",{style:{fontSize:"12px",color:"#888",marginTop:"2px"},children:new URL(p).hostname})]}),g.jsx("span",{style:{fontSize:"20px"},children:""})]},y)):n.videoLink&&g.jsxs("a",{href:n.videoLink,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px 20px",backgroundColor:"#0a0a0a",color:"white",textDecoration:"none",borderRadius:"6px",border:"1px solid #333",fontSize:"15px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#dc2626",p.currentTarget.style.borderColor="#dc2626"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="#0a0a0a",p.currentTarget.style.borderColor="#333"},children:[g.jsx("span",{style:{fontSize:"24px"},children:""}),g.jsxs("div",{style:{flex:1},children:[g.jsx("div",{children:"Video Evidence"}),g.jsx("div",{style:{fontSize:"12px",color:"#888",marginTop:"2px"},children:new URL(n.videoLink).hostname})]}),g.jsx("span",{style:{fontSize:"20px"},children:""})]})})]})]})]})},JN=()=>g.jsx(hP,{children:g.jsxs(lP,{children:[g.jsx(hs,{path:"/",element:g.jsx(QN,{})}),g.jsx(hs,{path:"/facility/:id",element:g.jsx(YN,{})}),g.jsx(hs,{path:"/hit/:id",element:g.jsx(XN,{})}),g.jsx(hs,{path:"/admin",element:g.jsx(IN,{})}),g.jsx(hs,{path:"/admin/facility/:id",element:g.jsx(CN,{})}),g.jsx(hs,{path:"/admin/hit/:id",element:g.jsx(PN,{})})]})}),eO=kf.createRoot(document.getElementById("root"));eO.render(g.jsx(Pl.StrictMode,{children:g.jsx(JN,{})}));
