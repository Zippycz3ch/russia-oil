function AI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var kI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yv={exports:{}},Ah={},Xv={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=Symbol.for("react.element"),RI=Symbol.for("react.portal"),LI=Symbol.for("react.fragment"),bI=Symbol.for("react.strict_mode"),NI=Symbol.for("react.profiler"),OI=Symbol.for("react.provider"),MI=Symbol.for("react.context"),DI=Symbol.for("react.forward_ref"),VI=Symbol.for("react.suspense"),FI=Symbol.for("react.memo"),zI=Symbol.for("react.lazy"),r_=Symbol.iterator;function BI(t){return t===null||typeof t!="object"?null:(t=r_&&t[r_]||t["@@iterator"],typeof t=="function"?t:null)}var Jv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e0=Object.assign,t0={};function ea(t,e,n){this.props=t,this.context=e,this.refs=t0,this.updater=n||Jv}ea.prototype.isReactComponent={};ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n0(){}n0.prototype=ea.prototype;function Hp(t,e,n){this.props=t,this.context=e,this.refs=t0,this.updater=n||Jv}var $p=Hp.prototype=new n0;$p.constructor=Hp;e0($p,ea.prototype);$p.isPureReactComponent=!0;var s_=Array.isArray,i0=Object.prototype.hasOwnProperty,Wp={current:null},r0={key:!0,ref:!0,__self:!0,__source:!0};function s0(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)i0.call(e,i)&&!r0.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Kl,type:t,key:o,ref:l,props:s,_owner:Wp.current}}function UI(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function jI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var o_=/\/+/g;function Ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jI(""+t.key):e.toString(36)}function pc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Kl:case RI:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Ld(l,0):i,s_(s)?(n="",t!=null&&(n=t.replace(o_,"$&/")+"/"),pc(s,e,n,"",function(p){return p})):s!=null&&(qp(s)&&(s=UI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(o_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",s_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Ld(o,h);l+=pc(o,e,n,d,s)}else if(d=BI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Ld(o,h++),l+=pc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Hu(t,e,n){if(t==null)return t;var i=[],s=0;return pc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function HI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},mc={transition:null},$I={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Wp};function o0(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Hu,forEach:function(t,e,n){Hu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hu(t,function(){e++}),e},toArray:function(t){return Hu(t,function(e){return e})||[]},only:function(t){if(!qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=ea;Pe.Fragment=LI;Pe.Profiler=NI;Pe.PureComponent=Hp;Pe.StrictMode=bI;Pe.Suspense=VI;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$I;Pe.act=o0;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=e0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Wp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)i0.call(e,d)&&!r0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:Kl,type:t.type,key:s,ref:o,props:i,_owner:l}};Pe.createContext=function(t){return t={$$typeof:MI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OI,_context:t},t.Consumer=t};Pe.createElement=s0;Pe.createFactory=function(t){var e=s0.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:DI,render:t}};Pe.isValidElement=qp;Pe.lazy=function(t){return{$$typeof:zI,_payload:{_status:-1,_result:t},_init:HI}};Pe.memo=function(t,e){return{$$typeof:FI,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=mc.transition;mc.transition={};try{t()}finally{mc.transition=e}};Pe.unstable_act=o0;Pe.useCallback=function(t,e){return Kt.current.useCallback(t,e)};Pe.useContext=function(t){return Kt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Kt.current.useEffect(t,e)};Pe.useId=function(){return Kt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Kt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Kt.current.useRef(t)};Pe.useState=function(t){return Kt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Kt.current.useTransition()};Pe.version="18.3.1";Xv.exports=Pe;var q=Xv.exports;const Is=Qv(q),WI=AI({__proto__:null,default:Is},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=q,ZI=Symbol.for("react.element"),GI=Symbol.for("react.fragment"),KI=Object.prototype.hasOwnProperty,QI=qI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YI={key:!0,ref:!0,__self:!0,__source:!0};function a0(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)KI.call(e,i)&&!YI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:ZI,type:t,key:o,ref:l,props:s,_owner:QI.current}}Ah.Fragment=GI;Ah.jsx=a0;Ah.jsxs=a0;Yv.exports=Ah;var Zp=Yv.exports;const $u=Zp.Fragment,V=Zp.jsx,Y=Zp.jsxs;var wf={},l0={exports:{}},yn={},u0={exports:{}},c0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,de){var B=G.length;G.push(de);e:for(;0<B;){var te=B-1>>>1,ae=G[te];if(0<s(ae,de))G[te]=de,G[B]=ae,B=te;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var de=G[0],B=G.pop();if(B!==de){G[0]=B;e:for(var te=0,ae=G.length,Le=ae>>>1;te<Le;){var Te=2*(te+1)-1,Ee=G[Te],le=Te+1,Fe=G[le];if(0>s(Ee,B))le<ae&&0>s(Fe,Ee)?(G[te]=Fe,G[le]=B,te=le):(G[te]=Ee,G[Te]=B,te=Te);else if(le<ae&&0>s(Fe,B))G[te]=Fe,G[le]=B,te=le;else break e}}return de}function s(G,de){var B=G.sortIndex-de.sortIndex;return B!==0?B:G.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],y=1,v=null,E=3,k=!1,F=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(G){for(var de=n(p);de!==null;){if(de.callback===null)i(p);else if(de.startTime<=G)i(p),de.sortIndex=de.expirationTime,e(d,de);else break;de=n(p)}}function W(G){if(M=!1,O(G),!F)if(n(d)!==null)F=!0,tt(X);else{var de=n(p);de!==null&&un(W,de.startTime-G)}}function X(G,de){F=!1,M&&(M=!1,C(I),I=-1),k=!0;var B=E;try{for(O(de),v=n(d);v!==null&&(!(v.expirationTime>de)||G&&!b());){var te=v.callback;if(typeof te=="function"){v.callback=null,E=v.priorityLevel;var ae=te(v.expirationTime<=de);de=t.unstable_now(),typeof ae=="function"?v.callback=ae:v===n(d)&&i(d),O(de)}else i(d);v=n(d)}if(v!==null)var Le=!0;else{var Te=n(p);Te!==null&&un(W,Te.startTime-de),Le=!1}return Le}finally{v=null,E=B,k=!1}}var J=!1,x=null,I=-1,S=5,R=-1;function b(){return!(t.unstable_now()-R<S)}function D(){if(x!==null){var G=t.unstable_now();R=G;var de=!0;try{de=x(!0,G)}finally{de?A():(J=!1,x=null)}}else J=!1}var A;if(typeof P=="function")A=function(){P(D)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,Yt=De.port2;De.port1.onmessage=D,A=function(){Yt.postMessage(null)}}else A=function(){U(D,0)};function tt(G){x=G,J||(J=!0,A())}function un(G,de){I=U(function(){G(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){F||k||(F=!0,tt(X))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(E){case 1:case 2:case 3:var de=3;break;default:de=E}var B=E;E=de;try{return G()}finally{E=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,de){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var B=E;E=G;try{return de()}finally{E=B}},t.unstable_scheduleCallback=function(G,de,B){var te=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,G){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=B+ae,G={id:y++,callback:de,priorityLevel:G,startTime:B,expirationTime:ae,sortIndex:-1},B>te?(G.sortIndex=B,e(p,G),n(d)===null&&G===n(p)&&(M?(C(I),I=-1):M=!0,un(W,B-te))):(G.sortIndex=ae,e(d,G),F||k||(F=!0,tt(X))),G},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(G){var de=E;return function(){var B=E;E=de;try{return G.apply(this,arguments)}finally{E=B}}}})(c0);u0.exports=c0;var XI=u0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JI=q,_n=XI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h0=new Set,Tl={};function Os(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(Tl[t]=e,t=0;t<e.length;t++)h0.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,eS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a_={},l_={};function tS(t){return Ef.call(l_,t)?!0:Ef.call(a_,t)?!1:eS.test(t)?l_[t]=!0:(a_[t]=!0,!1)}function nS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iS(t,e,n,i){if(e===null||typeof e>"u"||nS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gp,Kp);kt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,n,i){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iS(e,n,s,i)&&(n=null),i||s===null?tS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Yi=JI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wu=Symbol.for("react.element"),mo=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),d0=Symbol.for("react.provider"),f0=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Sf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),u_=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,bd;function Ja(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var Nd=!1;function Od(t,e){if(!t||Nd)return"";Nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ja(t):""}function rS(t){switch(t.tag){case 5:return Ja(t.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function Pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case mo:return"Portal";case Tf:return"Profiler";case Yp:return"StrictMode";case If:return"Suspense";case Sf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f0:return(t.displayName||"Context")+".Consumer";case d0:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:Pf(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Pf(t(e))}catch{}}return null}function sS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oS(t){var e=m0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qu(t){t._valueTracker||(t._valueTracker=oS(t))}function g0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=m0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function c_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _0(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function Cf(t,e){_0(t,e);var n=Vr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||Vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var el=Array.isArray;function Ao(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(el(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function y0(t,e){var n=Vr(e.value),i=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function f_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,w0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aS=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){aS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function E0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function T0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=E0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var lS=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(t,e){if(e){if(lS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function bf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,ko=null,Ro=null;function p_(t){if(t=Xl(t)){if(typeof Of!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Nh(e),Of(t.stateNode,t.type,e))}}function I0(t){ko?Ro?Ro.push(t):Ro=[t]:ko=t}function S0(){if(ko){var t=ko,e=Ro;if(Ro=ko=null,p_(t),e)for(t=0;t<e.length;t++)p_(e[t])}}function P0(t,e){return t(e)}function x0(){}var Md=!1;function C0(t,e,n){if(Md)return t(e,n);Md=!0;try{return P0(t,e,n)}finally{Md=!1,(ko!==null||Ro!==null)&&(x0(),S0())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var i=Nh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Mf=!1;if(ji)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{Mf=!1}function uS(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var ll=!1,Fc=null,zc=!1,Df=null,cS={onError:function(t){ll=!0,Fc=t}};function hS(t,e,n,i,s,o,l,h,d){ll=!1,Fc=null,uS.apply(cS,arguments)}function dS(t,e,n,i,s,o,l,h,d){if(hS.apply(this,arguments),ll){if(ll){var p=Fc;ll=!1,Fc=null}else throw Error(ee(198));zc||(zc=!0,Df=p)}}function Ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m_(t){if(Ms(t)!==t)throw Error(ee(188))}function fS(t){var e=t.alternate;if(!e){if(e=Ms(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return m_(s),t;if(o===i)return m_(s),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function k0(t){return t=fS(t),t!==null?R0(t):null}function R0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R0(t);if(e!==null)return e;t=t.sibling}return null}var L0=_n.unstable_scheduleCallback,g_=_n.unstable_cancelCallback,pS=_n.unstable_shouldYield,mS=_n.unstable_requestPaint,it=_n.unstable_now,gS=_n.unstable_getCurrentPriorityLevel,tm=_n.unstable_ImmediatePriority,b0=_n.unstable_UserBlockingPriority,Bc=_n.unstable_NormalPriority,_S=_n.unstable_LowPriority,N0=_n.unstable_IdlePriority,kh=null,ui=null;function yS(t){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(kh,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:ES,vS=Math.log,wS=Math.LN2;function ES(t){return t>>>=0,t===0?32:31-(vS(t)/wS|0)|0}var Gu=64,Ku=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=tl(h):(o&=l,o!==0&&(i=tl(o)))}else l=n&~s,l!==0?i=tl(l):o!==0&&(i=tl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-jn(e),s=1<<n,i|=t[n],e&=~s;return i}function TS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-jn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=TS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function O0(){var t=Gu;return Gu<<=1,!(Gu&4194240)&&(Gu=64),t}function Dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function SS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-jn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Ve=0;function M0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D0,im,V0,F0,z0,Ff=!1,Qu=[],Sr=null,Pr=null,xr=null,Pl=new Map,xl=new Map,pr=[],PS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function __(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(e.pointerId)}}function Za(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Xl(e),e!==null&&im(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xS(t,e,n,i,s){switch(e){case"focusin":return Sr=Za(Sr,t,e,n,i,s),!0;case"dragenter":return Pr=Za(Pr,t,e,n,i,s),!0;case"mouseover":return xr=Za(xr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Pl.set(o,Za(Pl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,xl.set(o,Za(xl.get(o)||null,t,e,n,i,s)),!0}return!1}function B0(t){var e=ps(t.target);if(e!==null){var n=Ms(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,z0(t.priority,function(){V0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return e=Xl(n),e!==null&&im(e),t.blockedOn=n,!1;e.shift()}return!0}function y_(t,e,n){gc(t)&&n.delete(e)}function CS(){Ff=!1,Sr!==null&&gc(Sr)&&(Sr=null),Pr!==null&&gc(Pr)&&(Pr=null),xr!==null&&gc(xr)&&(xr=null),Pl.forEach(y_),xl.forEach(y_)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,CS)))}function Cl(t){function e(s){return Ga(s,t)}if(0<Qu.length){Ga(Qu[0],t);for(var n=1;n<Qu.length;n++){var i=Qu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Sr!==null&&Ga(Sr,t),Pr!==null&&Ga(Pr,t),xr!==null&&Ga(xr,t),Pl.forEach(e),xl.forEach(e),n=0;n<pr.length;n++)i=pr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)B0(n),n.blockedOn===null&&pr.shift()}var Lo=Yi.ReactCurrentBatchConfig,jc=!0;function AS(t,e,n,i){var s=Ve,o=Lo.transition;Lo.transition=null;try{Ve=1,rm(t,e,n,i)}finally{Ve=s,Lo.transition=o}}function kS(t,e,n,i){var s=Ve,o=Lo.transition;Lo.transition=null;try{Ve=4,rm(t,e,n,i)}finally{Ve=s,Lo.transition=o}}function rm(t,e,n,i){if(jc){var s=zf(t,e,n,i);if(s===null)qd(t,e,i,Hc,n),__(t,i);else if(xS(s,t,e,n,i))i.stopPropagation();else if(__(t,i),e&4&&-1<PS.indexOf(t)){for(;s!==null;){var o=Xl(s);if(o!==null&&D0(o),o=zf(t,e,n,i),o===null&&qd(t,e,i,Hc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else qd(t,e,i,null,n)}}var Hc=null;function zf(t,e,n,i){if(Hc=null,t=em(i),t=ps(t),t!==null)if(e=Ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hc=t,null}function U0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gS()){case tm:return 1;case b0:return 4;case Bc:case _S:return 16;case N0:return 536870912;default:return 16}default:return 16}}var wr=null,sm=null,_c=null;function j0(){if(_c)return _c;var t,e=sm,n=e.length,i,s="value"in wr?wr.value:wr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return _c=s.slice(t,1<i?1-i:void 0)}function yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yu(){return!0}function v_(){return!1}function vn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Yu:v_,this.isPropagationStopped=v_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),e}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=vn(ta),Yl=Qe({},ta,{view:0,detail:0}),RS=vn(Yl),Vd,Fd,Ka,Rh=Qe({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(Vd=t.screenX-Ka.screenX,Fd=t.screenY-Ka.screenY):Fd=Vd=0,Ka=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),w_=vn(Rh),LS=Qe({},Rh,{dataTransfer:0}),bS=vn(LS),NS=Qe({},Yl,{relatedTarget:0}),zd=vn(NS),OS=Qe({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),MS=vn(OS),DS=Qe({},ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VS=vn(DS),FS=Qe({},ta,{data:0}),E_=vn(FS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function am(){return jS}var HS=Qe({},Yl,{key:function(t){if(t.key){var e=zS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=vn(HS),WS=Qe({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T_=vn(WS),qS=Qe({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),ZS=vn(qS),GS=Qe({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=vn(GS),QS=Qe({},Rh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=vn(QS),XS=[9,13,27,32],lm=ji&&"CompositionEvent"in window,ul=null;ji&&"documentMode"in document&&(ul=document.documentMode);var JS=ji&&"TextEvent"in window&&!ul,H0=ji&&(!lm||ul&&8<ul&&11>=ul),I_=String.fromCharCode(32),S_=!1;function $0(t,e){switch(t){case"keyup":return XS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function eP(t,e){switch(t){case"compositionend":return W0(e);case"keypress":return e.which!==32?null:(S_=!0,I_);case"textInput":return t=e.data,t===I_&&S_?null:t;default:return null}}function tP(t,e){if(_o)return t==="compositionend"||!lm&&$0(t,e)?(t=j0(),_c=sm=wr=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H0&&e.locale!=="ko"?null:e.data;default:return null}}var nP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nP[t.type]:e==="textarea"}function q0(t,e,n,i){I0(i),e=$c(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var cl=null,Al=null;function iP(t){iw(t,0)}function Lh(t){var e=wo(t);if(g0(e))return t}function rP(t,e){if(t==="change")return e}var Z0=!1;if(ji){var Bd;if(ji){var Ud="oninput"in document;if(!Ud){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),Ud=typeof x_.oninput=="function"}Bd=Ud}else Bd=!1;Z0=Bd&&(!document.documentMode||9<document.documentMode)}function C_(){cl&&(cl.detachEvent("onpropertychange",G0),Al=cl=null)}function G0(t){if(t.propertyName==="value"&&Lh(Al)){var e=[];q0(e,Al,t,em(t)),C0(iP,e)}}function sP(t,e,n){t==="focusin"?(C_(),cl=e,Al=n,cl.attachEvent("onpropertychange",G0)):t==="focusout"&&C_()}function oP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lh(Al)}function aP(t,e){if(t==="click")return Lh(e)}function lP(t,e){if(t==="input"||t==="change")return Lh(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:uP;function kl(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Ef.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function A_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function k_(t,e){var n=A_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A_(n)}}function K0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?K0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Q0(){for(var t=window,e=Vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vc(t.document)}return e}function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cP(t){var e=Q0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&K0(n.ownerDocument.documentElement,n)){if(i!==null&&um(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=k_(n,o);var l=k_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hP=ji&&"documentMode"in document&&11>=document.documentMode,yo=null,Bf=null,hl=null,Uf=!1;function R_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||yo==null||yo!==Vc(i)||(i=yo,"selectionStart"in i&&um(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hl&&kl(hl,i)||(hl=i,i=$c(Bf,"onSelect"),0<i.length&&(e=new om("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=yo)))}function Xu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:Xu("Animation","AnimationEnd"),animationiteration:Xu("Animation","AnimationIteration"),animationstart:Xu("Animation","AnimationStart"),transitionend:Xu("Transition","TransitionEnd")},jd={},Y0={};ji&&(Y0=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function bh(t){if(jd[t])return jd[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y0)return jd[t]=e[n];return t}var X0=bh("animationend"),J0=bh("animationiteration"),ew=bh("animationstart"),tw=bh("transitionend"),nw=new Map,L_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){nw.set(t,e),Os(e,[t])}for(var Hd=0;Hd<L_.length;Hd++){var $d=L_[Hd],dP=$d.toLowerCase(),fP=$d[0].toUpperCase()+$d.slice(1);Wr(dP,"on"+fP)}Wr(X0,"onAnimationEnd");Wr(J0,"onAnimationIteration");Wr(ew,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(tw,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pP=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function b_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dS(i,e,void 0,t),t.currentTarget=null}function iw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;b_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;b_(s,h,p),o=d}}}if(zc)throw t=Df,zc=!1,Df=null,t}function He(t,e){var n=e[qf];n===void 0&&(n=e[qf]=new Set);var i=t+"__bubble";n.has(i)||(rw(e,t,2,!1),n.add(i))}function Wd(t,e,n){var i=0;e&&(i|=4),rw(n,t,i,e)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Ju]){t[Ju]=!0,h0.forEach(function(n){n!=="selectionchange"&&(pP.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ju]||(e[Ju]=!0,Wd("selectionchange",!1,e))}}function rw(t,e,n,i){switch(U0(e)){case 1:var s=AS;break;case 4:s=kS;break;default:s=rm}n=s.bind(null,e,n,t),s=void 0,!Mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ps(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}C0(function(){var p=o,y=em(n),v=[];e:{var E=nw.get(t);if(E!==void 0){var k=om,F=t;switch(t){case"keypress":if(yc(n)===0)break e;case"keydown":case"keyup":k=$S;break;case"focusin":F="focus",k=zd;break;case"focusout":F="blur",k=zd;break;case"beforeblur":case"afterblur":k=zd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=w_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=bS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=ZS;break;case X0:case J0:case ew:k=MS;break;case tw:k=KS;break;case"scroll":k=RS;break;case"wheel":k=YS;break;case"copy":case"cut":case"paste":k=VS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=T_}var M=(e&4)!==0,U=!M&&t==="scroll",C=M?E!==null?E+"Capture":null:E;M=[];for(var P=p,O;P!==null;){O=P;var W=O.stateNode;if(O.tag===5&&W!==null&&(O=W,C!==null&&(W=Sl(P,C),W!=null&&M.push(Ll(P,W,O)))),U)break;P=P.return}0<M.length&&(E=new k(E,F,null,n,y),v.push({event:E,listeners:M}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&n!==Nf&&(F=n.relatedTarget||n.fromElement)&&(ps(F)||F[Hi]))break e;if((k||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,k?(F=n.relatedTarget||n.toElement,k=p,F=F?ps(F):null,F!==null&&(U=Ms(F),F!==U||F.tag!==5&&F.tag!==6)&&(F=null)):(k=null,F=p),k!==F)){if(M=w_,W="onMouseLeave",C="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(M=T_,W="onPointerLeave",C="onPointerEnter",P="pointer"),U=k==null?E:wo(k),O=F==null?E:wo(F),E=new M(W,P+"leave",k,n,y),E.target=U,E.relatedTarget=O,W=null,ps(y)===p&&(M=new M(C,P+"enter",F,n,y),M.target=O,M.relatedTarget=U,W=M),U=W,k&&F)t:{for(M=k,C=F,P=0,O=M;O;O=uo(O))P++;for(O=0,W=C;W;W=uo(W))O++;for(;0<P-O;)M=uo(M),P--;for(;0<O-P;)C=uo(C),O--;for(;P--;){if(M===C||C!==null&&M===C.alternate)break t;M=uo(M),C=uo(C)}M=null}else M=null;k!==null&&N_(v,E,k,M,!1),F!==null&&U!==null&&N_(v,U,F,M,!0)}}e:{if(E=p?wo(p):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var X=rP;else if(P_(E))if(Z0)X=lP;else{X=oP;var J=sP}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(X=aP);if(X&&(X=X(t,p))){q0(v,X,n,y);break e}J&&J(t,E,p),t==="focusout"&&(J=E._wrapperState)&&J.controlled&&E.type==="number"&&Af(E,"number",E.value)}switch(J=p?wo(p):window,t){case"focusin":(P_(J)||J.contentEditable==="true")&&(yo=J,Bf=p,hl=null);break;case"focusout":hl=Bf=yo=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,R_(v,n,y);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":R_(v,n,y)}var x;if(lm)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _o?$0(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(H0&&n.locale!=="ko"&&(_o||I!=="onCompositionStart"?I==="onCompositionEnd"&&_o&&(x=j0()):(wr=y,sm="value"in wr?wr.value:wr.textContent,_o=!0)),J=$c(p,I),0<J.length&&(I=new E_(I,t,null,n,y),v.push({event:I,listeners:J}),x?I.data=x:(x=W0(n),x!==null&&(I.data=x)))),(x=JS?eP(t,n):tP(t,n))&&(p=$c(p,"onBeforeInput"),0<p.length&&(y=new E_("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:p}),y.data=x))}iw(v,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $c(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sl(t,n),o!=null&&i.unshift(Ll(t,o,s)),o=Sl(t,e),o!=null&&i.push(Ll(t,o,s))),t=t.return}return i}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=Sl(n,o),d!=null&&l.unshift(Ll(n,d,h))):s||(d=Sl(n,o),d!=null&&l.push(Ll(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var mP=/\r\n?/g,gP=/\u0000|\uFFFD/g;function O_(t){return(typeof t=="string"?t:""+t).replace(mP,`
`).replace(gP,"")}function ec(t,e,n){if(e=O_(e),O_(t)!==e&&n)throw Error(ee(425))}function Wc(){}var jf=null,Hf=null;function $f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,_P=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,yP=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(vP)}:Wf;function vP(t){setTimeout(function(){throw t})}function Zd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Cl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Cl(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var na=Math.random().toString(36).slice(2),ai="__reactFiber$"+na,bl="__reactProps$"+na,Hi="__reactContainer$"+na,qf="__reactEvents$"+na,wP="__reactListeners$"+na,EP="__reactHandles$"+na;function ps(t){var e=t[ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hi]||n[ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D_(t);t!==null;){if(n=t[ai])return n;t=D_(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){return t=t[ai]||t[Hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Nh(t){return t[bl]||null}var Zf=[],Eo=-1;function qr(t){return{current:t}}function qe(t){0>Eo||(t.current=Zf[Eo],Zf[Eo]=null,Eo--)}function Ue(t,e){Eo++,Zf[Eo]=t.current,t.current=e}var Fr={},jt=qr(Fr),on=qr(!1),Ss=Fr;function Bo(t,e){var n=t.type.contextTypes;if(!n)return Fr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function an(t){return t=t.childContextTypes,t!=null}function qc(){qe(on),qe(jt)}function V_(t,e,n){if(jt.current!==Fr)throw Error(ee(168));Ue(jt,e),Ue(on,n)}function sw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ee(108,sS(t)||"Unknown",s));return Qe({},n,i)}function Zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ss=jt.current,Ue(jt,t),Ue(on,on.current),!0}function F_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=sw(t,e,Ss),i.__reactInternalMemoizedMergedChildContext=t,qe(on),qe(jt),Ue(jt,t)):qe(on),Ue(on,n)}var Mi=null,Oh=!1,Gd=!1;function ow(t){Mi===null?Mi=[t]:Mi.push(t)}function TP(t){Oh=!0,ow(t)}function Zr(){if(!Gd&&Mi!==null){Gd=!0;var t=0,e=Ve;try{var n=Mi;for(Ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Mi=null,Oh=!1}catch(s){throw Mi!==null&&(Mi=Mi.slice(t+1)),L0(tm,Zr),s}finally{Ve=e,Gd=!1}}return null}var To=[],Io=0,Gc=null,Kc=0,Tn=[],In=0,Ps=null,Di=1,Vi="";function us(t,e){To[Io++]=Kc,To[Io++]=Gc,Gc=t,Kc=e}function aw(t,e,n){Tn[In++]=Di,Tn[In++]=Vi,Tn[In++]=Ps,Ps=t;var i=Di;t=Vi;var s=32-jn(i)-1;i&=~(1<<s),n+=1;var o=32-jn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Di=1<<32-jn(e)+s|n<<s|i,Vi=o+t}else Di=1<<o|n<<s|i,Vi=t}function cm(t){t.return!==null&&(us(t,1),aw(t,1,0))}function hm(t){for(;t===Gc;)Gc=To[--Io],To[Io]=null,Kc=To[--Io],To[Io]=null;for(;t===Ps;)Ps=Tn[--In],Tn[In]=null,Vi=Tn[--In],Tn[In]=null,Di=Tn[--In],Tn[In]=null}var gn=null,pn=null,Ze=!1,Bn=null;function lw(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,pn=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:Di,overflow:Vi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,pn=null,!0):!1;default:return!1}}function Gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kf(t){if(Ze){var e=pn;if(e){var n=e;if(!z_(t,e)){if(Gf(t))throw Error(ee(418));e=Cr(n.nextSibling);var i=gn;e&&z_(t,e)?lw(i,n):(t.flags=t.flags&-4097|2,Ze=!1,gn=t)}}else{if(Gf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ze=!1,gn=t}}}function B_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function tc(t){if(t!==gn)return!1;if(!Ze)return B_(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$f(t.type,t.memoizedProps)),e&&(e=pn)){if(Gf(t))throw uw(),Error(ee(418));for(;e;)lw(t,e),e=Cr(e.nextSibling)}if(B_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=gn?Cr(t.stateNode.nextSibling):null;return!0}function uw(){for(var t=pn;t;)t=Cr(t.nextSibling)}function Uo(){pn=gn=null,Ze=!1}function dm(t){Bn===null?Bn=[t]:Bn.push(t)}var IP=Yi.ReactCurrentBatchConfig;function Qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function nc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function U_(t){var e=t._init;return e(t._payload)}function cw(t){function e(C,P){if(t){var O=C.deletions;O===null?(C.deletions=[P],C.flags|=16):O.push(P)}}function n(C,P){if(!t)return null;for(;P!==null;)e(C,P),P=P.sibling;return null}function i(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function s(C,P){return C=Lr(C,P),C.index=0,C.sibling=null,C}function o(C,P,O){return C.index=O,t?(O=C.alternate,O!==null?(O=O.index,O<P?(C.flags|=2,P):O):(C.flags|=2,P)):(C.flags|=1048576,P)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function h(C,P,O,W){return P===null||P.tag!==6?(P=tf(O,C.mode,W),P.return=C,P):(P=s(P,O),P.return=C,P)}function d(C,P,O,W){var X=O.type;return X===go?y(C,P,O.props.children,W,O.key):P!==null&&(P.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===dr&&U_(X)===P.type)?(W=s(P,O.props),W.ref=Qa(C,P,O),W.return=C,W):(W=Pc(O.type,O.key,O.props,null,C.mode,W),W.ref=Qa(C,P,O),W.return=C,W)}function p(C,P,O,W){return P===null||P.tag!==4||P.stateNode.containerInfo!==O.containerInfo||P.stateNode.implementation!==O.implementation?(P=nf(O,C.mode,W),P.return=C,P):(P=s(P,O.children||[]),P.return=C,P)}function y(C,P,O,W,X){return P===null||P.tag!==7?(P=vs(O,C.mode,W,X),P.return=C,P):(P=s(P,O),P.return=C,P)}function v(C,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return P=tf(""+P,C.mode,O),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Wu:return O=Pc(P.type,P.key,P.props,null,C.mode,O),O.ref=Qa(C,null,P),O.return=C,O;case mo:return P=nf(P,C.mode,O),P.return=C,P;case dr:var W=P._init;return v(C,W(P._payload),O)}if(el(P)||Wa(P))return P=vs(P,C.mode,O,null),P.return=C,P;nc(C,P)}return null}function E(C,P,O,W){var X=P!==null?P.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return X!==null?null:h(C,P,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Wu:return O.key===X?d(C,P,O,W):null;case mo:return O.key===X?p(C,P,O,W):null;case dr:return X=O._init,E(C,P,X(O._payload),W)}if(el(O)||Wa(O))return X!==null?null:y(C,P,O,W,null);nc(C,O)}return null}function k(C,P,O,W,X){if(typeof W=="string"&&W!==""||typeof W=="number")return C=C.get(O)||null,h(P,C,""+W,X);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Wu:return C=C.get(W.key===null?O:W.key)||null,d(P,C,W,X);case mo:return C=C.get(W.key===null?O:W.key)||null,p(P,C,W,X);case dr:var J=W._init;return k(C,P,O,J(W._payload),X)}if(el(W)||Wa(W))return C=C.get(O)||null,y(P,C,W,X,null);nc(P,W)}return null}function F(C,P,O,W){for(var X=null,J=null,x=P,I=P=0,S=null;x!==null&&I<O.length;I++){x.index>I?(S=x,x=null):S=x.sibling;var R=E(C,x,O[I],W);if(R===null){x===null&&(x=S);break}t&&x&&R.alternate===null&&e(C,x),P=o(R,P,I),J===null?X=R:J.sibling=R,J=R,x=S}if(I===O.length)return n(C,x),Ze&&us(C,I),X;if(x===null){for(;I<O.length;I++)x=v(C,O[I],W),x!==null&&(P=o(x,P,I),J===null?X=x:J.sibling=x,J=x);return Ze&&us(C,I),X}for(x=i(C,x);I<O.length;I++)S=k(x,C,I,O[I],W),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?I:S.key),P=o(S,P,I),J===null?X=S:J.sibling=S,J=S);return t&&x.forEach(function(b){return e(C,b)}),Ze&&us(C,I),X}function M(C,P,O,W){var X=Wa(O);if(typeof X!="function")throw Error(ee(150));if(O=X.call(O),O==null)throw Error(ee(151));for(var J=X=null,x=P,I=P=0,S=null,R=O.next();x!==null&&!R.done;I++,R=O.next()){x.index>I?(S=x,x=null):S=x.sibling;var b=E(C,x,R.value,W);if(b===null){x===null&&(x=S);break}t&&x&&b.alternate===null&&e(C,x),P=o(b,P,I),J===null?X=b:J.sibling=b,J=b,x=S}if(R.done)return n(C,x),Ze&&us(C,I),X;if(x===null){for(;!R.done;I++,R=O.next())R=v(C,R.value,W),R!==null&&(P=o(R,P,I),J===null?X=R:J.sibling=R,J=R);return Ze&&us(C,I),X}for(x=i(C,x);!R.done;I++,R=O.next())R=k(x,C,I,R.value,W),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?I:R.key),P=o(R,P,I),J===null?X=R:J.sibling=R,J=R);return t&&x.forEach(function(D){return e(C,D)}),Ze&&us(C,I),X}function U(C,P,O,W){if(typeof O=="object"&&O!==null&&O.type===go&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Wu:e:{for(var X=O.key,J=P;J!==null;){if(J.key===X){if(X=O.type,X===go){if(J.tag===7){n(C,J.sibling),P=s(J,O.props.children),P.return=C,C=P;break e}}else if(J.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===dr&&U_(X)===J.type){n(C,J.sibling),P=s(J,O.props),P.ref=Qa(C,J,O),P.return=C,C=P;break e}n(C,J);break}else e(C,J);J=J.sibling}O.type===go?(P=vs(O.props.children,C.mode,W,O.key),P.return=C,C=P):(W=Pc(O.type,O.key,O.props,null,C.mode,W),W.ref=Qa(C,P,O),W.return=C,C=W)}return l(C);case mo:e:{for(J=O.key;P!==null;){if(P.key===J)if(P.tag===4&&P.stateNode.containerInfo===O.containerInfo&&P.stateNode.implementation===O.implementation){n(C,P.sibling),P=s(P,O.children||[]),P.return=C,C=P;break e}else{n(C,P);break}else e(C,P);P=P.sibling}P=nf(O,C.mode,W),P.return=C,C=P}return l(C);case dr:return J=O._init,U(C,P,J(O._payload),W)}if(el(O))return F(C,P,O,W);if(Wa(O))return M(C,P,O,W);nc(C,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,P!==null&&P.tag===6?(n(C,P.sibling),P=s(P,O),P.return=C,C=P):(n(C,P),P=tf(O,C.mode,W),P.return=C,C=P),l(C)):n(C,P)}return U}var jo=cw(!0),hw=cw(!1),Qc=qr(null),Yc=null,So=null,fm=null;function pm(){fm=So=Yc=null}function mm(t){var e=Qc.current;qe(Qc),t._currentValue=e}function Qf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){Yc=t,fm=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(fm!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(Yc===null)throw Error(ee(308));So=t,Yc.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var ms=null;function gm(t){ms===null?ms=[t]:ms.push(t)}function dw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,gm(e)):(n.next=s.next,s.next=n),e.interleaved=n,$i(t,i)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function _m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,$i(t,n)}return s=i.interleaved,s===null?(e.next=e,gm(i)):(e.next=s.next,s.next=e),i.interleaved=e,$i(t,n)}function vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}function j_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,i){var s=t.updateQueue;fr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,y=p=d=null,h=o;do{var E=h.lane,k=h.eventTime;if((i&E)===E){y!==null&&(y=y.next={eventTime:k,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var F=t,M=h;switch(E=e,k=n,M.tag){case 1:if(F=M.payload,typeof F=="function"){v=F.call(k,v,E);break e}v=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=M.payload,E=typeof F=="function"?F.call(k,v,E):F,E==null)break e;v=Qe({},v,E);break e;case 2:fr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else k={eventTime:k,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=k,d=v):y=y.next=k,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(1);if(y===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Cs|=l,t.lanes=l,t.memoizedState=v}}function H_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(ee(191,s));s.call(i)}}}var Jl={},ci=qr(Jl),Nl=qr(Jl),Ol=qr(Jl);function gs(t){if(t===Jl)throw Error(ee(174));return t}function ym(t,e){switch(Ue(Ol,e),Ue(Nl,t),Ue(ci,Jl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rf(e,t)}qe(ci),Ue(ci,e)}function Ho(){qe(ci),qe(Nl),qe(Ol)}function pw(t){gs(Ol.current);var e=gs(ci.current),n=Rf(e,t.type);e!==n&&(Ue(Nl,t),Ue(ci,n))}function vm(t){Nl.current===t&&(qe(ci),qe(Nl))}var Ge=qr(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kd=[];function wm(){for(var t=0;t<Kd.length;t++)Kd[t]._workInProgressVersionPrimary=null;Kd.length=0}var wc=Yi.ReactCurrentDispatcher,Qd=Yi.ReactCurrentBatchConfig,xs=0,Ke=null,pt=null,Et=null,eh=!1,dl=!1,Ml=0,SP=0;function Mt(){throw Error(ee(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function Tm(t,e,n,i,s,o){if(xs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wc.current=t===null||t.memoizedState===null?AP:kP,t=n(i,s),dl){o=0;do{if(dl=!1,Ml=0,25<=o)throw Error(ee(301));o+=1,Et=pt=null,e.updateQueue=null,wc.current=RP,t=n(i,s)}while(dl)}if(wc.current=th,e=pt!==null&&pt.next!==null,xs=0,Et=pt=Ke=null,eh=!1,e)throw Error(ee(300));return t}function Im(){var t=Ml!==0;return Ml=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ke.memoizedState=Et=t:Et=Et.next=t,Et}function An(){if(pt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Ke.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(ee(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ke.memoizedState=Et=t:Et=Et.next=t}return Et}function Dl(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=An(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=pt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var y=p.lane;if((xs&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var v={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=i):d=d.next=v,Ke.lanes|=y,Cs|=y}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Wn(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,Cs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xd(t){var e=An(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Wn(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function mw(){}function gw(t,e){var n=Ke,i=An(),s=e(),o=!Wn(i.memoizedState,s);if(o&&(i.memoizedState=s,sn=!0),i=i.queue,Sm(vw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Vl(9,yw.bind(null,n,i,s,e),void 0,null),Tt===null)throw Error(ee(349));xs&30||_w(n,e,s)}return s}function _w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yw(t,e,n,i){e.value=n,e.getSnapshot=i,ww(e)&&Ew(t)}function vw(t,e,n){return n(function(){ww(e)&&Ew(t)})}function ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function Ew(t){var e=$i(t,1);e!==null&&Hn(e,t,1,-1)}function $_(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},e.queue=t,t=t.dispatch=CP.bind(null,Ke,t),[e.memoizedState,t]}function Vl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Tw(){return An().memoizedState}function Ec(t,e,n,i){var s=si();Ke.flags|=t,s.memoizedState=Vl(1|e,n,void 0,i===void 0?null:i)}function Mh(t,e,n,i){var s=An();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&Em(i,l.deps)){s.memoizedState=Vl(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Vl(1|e,n,o,i)}function W_(t,e){return Ec(8390656,8,t,e)}function Sm(t,e){return Mh(2048,8,t,e)}function Iw(t,e){return Mh(4,2,t,e)}function Sw(t,e){return Mh(4,4,t,e)}function Pw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xw(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4,4,Pw.bind(null,e,t),n)}function Pm(){}function Cw(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Aw(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function kw(t,e,n){return xs&21?(Wn(n,e)||(n=O0(),Ke.lanes|=n,Cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function PP(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var i=Qd.transition;Qd.transition={};try{t(!1),e()}finally{Ve=n,Qd.transition=i}}function Rw(){return An().memoizedState}function xP(t,e,n){var i=Rr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lw(t))bw(e,n);else if(n=dw(t,e,n,i),n!==null){var s=Zt();Hn(n,t,i,s),Nw(n,e,i)}}function CP(t,e,n){var i=Rr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lw(t))bw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Wn(h,l)){var d=e.interleaved;d===null?(s.next=s,gm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=dw(t,e,s,i),n!==null&&(s=Zt(),Hn(n,t,i,s),Nw(n,e,i))}}function Lw(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function bw(t,e){dl=eh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nm(t,n)}}var th={readContext:Cn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},AP={readContext:Cn,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:W_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4194308,4,Pw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var n=si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=xP.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:$_,useDebugValue:Pm,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=$_(!1),e=t[0];return t=PP.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=si();if(Ze){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Tt===null)throw Error(ee(349));xs&30||_w(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,W_(vw.bind(null,i,o,t),[t]),i.flags|=2048,Vl(9,yw.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=si(),e=Tt.identifierPrefix;if(Ze){var n=Vi,i=Di;n=(i&~(1<<32-jn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:Cn,useCallback:Cw,useContext:Cn,useEffect:Sm,useImperativeHandle:xw,useInsertionEffect:Iw,useLayoutEffect:Sw,useMemo:Aw,useReducer:Yd,useRef:Tw,useState:function(){return Yd(Dl)},useDebugValue:Pm,useDeferredValue:function(t){var e=An();return kw(e,pt.memoizedState,t)},useTransition:function(){var t=Yd(Dl)[0],e=An().memoizedState;return[t,e]},useMutableSource:mw,useSyncExternalStore:gw,useId:Rw,unstable_isNewReconciler:!1},RP={readContext:Cn,useCallback:Cw,useContext:Cn,useEffect:Sm,useImperativeHandle:xw,useInsertionEffect:Iw,useLayoutEffect:Sw,useMemo:Aw,useReducer:Xd,useRef:Tw,useState:function(){return Xd(Dl)},useDebugValue:Pm,useDeferredValue:function(t){var e=An();return pt===null?e.memoizedState=t:kw(e,pt.memoizedState,t)},useTransition:function(){var t=Xd(Dl)[0],e=An().memoizedState;return[t,e]},useMutableSource:mw,useSyncExternalStore:gw,useId:Rw,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dh={isMounted:function(t){return(t=t._reactInternals)?Ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Zt(),s=Rr(t),o=Bi(i,s);o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(Hn(e,t,s,i),vc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Zt(),s=Rr(t),o=Bi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(Hn(e,t,s,i),vc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),i=Rr(t),s=Bi(n,i);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,i),e!==null&&(Hn(e,t,i,n),vc(e,t,i))}};function q_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!kl(n,i)||!kl(s,o):!0}function Ow(t,e,n){var i=!1,s=Fr,o=e.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(s=an(e)?Ss:jt.current,i=e.contextTypes,o=(i=i!=null)?Bo(t,s):Fr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Z_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Dh.enqueueReplaceState(e,e.state,null)}function Xf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_m(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Cn(o):(o=an(e)?Ss:jt.current,s.context=Bo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Yf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dh.enqueueReplaceState(s,s.state,null),Xc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e){try{var n="",i=e;do n+=rS(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LP=typeof WeakMap=="function"?WeakMap:Map;function Mw(t,e,n){n=Bi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ih||(ih=!0,up=i),Jf(t,e)},n}function Dw(t,e,n){n=Bi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Jf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Jf(t,e),typeof i!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function G_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new LP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=WP.bind(null,t,e,n),e.then(t,t))}function K_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Q_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bi(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var bP=Yi.ReactCurrentOwner,sn=!1;function qt(t,e,n,i){e.child=t===null?hw(e,null,n,i):jo(e,t.child,n,i)}function Y_(t,e,n,i,s){n=n.render;var o=e.ref;return bo(e,s),i=Tm(t,e,n,i,o,s),n=Im(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wi(t,e,s)):(Ze&&n&&cm(e),e.flags|=1,qt(t,e,i,s),e.child)}function X_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Vw(t,e,o,i,s)):(t=Pc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:kl,n(l,i)&&t.ref===e.ref)return Wi(t,e,s)}return e.flags|=1,t=Lr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Vw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(kl(o,i)&&t.ref===e.ref)if(sn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Wi(t,e,s)}return ep(t,e,n,i,s)}function Fw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(xo,fn),fn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(xo,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ue(xo,fn),fn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ue(xo,fn),fn|=i;return qt(t,e,s,n),e.child}function zw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ep(t,e,n,i,s){var o=an(n)?Ss:jt.current;return o=Bo(e,o),bo(e,s),n=Tm(t,e,n,i,o,s),i=Im(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wi(t,e,s)):(Ze&&i&&cm(e),e.flags|=1,qt(t,e,n,s),e.child)}function J_(t,e,n,i,s){if(an(n)){var o=!0;Zc(e)}else o=!1;if(bo(e,s),e.stateNode===null)Tc(t,e),Ow(e,n,i),Xf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Cn(p):(p=an(n)?Ss:jt.current,p=Bo(e,p));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&Z_(e,l,i,p),fr=!1;var E=e.memoizedState;l.state=E,Xc(e,i,l,s),d=e.memoizedState,h!==i||E!==d||on.current||fr?(typeof y=="function"&&(Yf(e,n,y,i),d=e.memoizedState),(h=fr||q_(e,n,h,i,E,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,fw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Fn(e.type,h),l.props=p,v=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Cn(d):(d=an(n)?Ss:jt.current,d=Bo(e,d));var k=n.getDerivedStateFromProps;(y=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||E!==d)&&Z_(e,l,i,d),fr=!1,E=e.memoizedState,l.state=E,Xc(e,i,l,s);var F=e.memoizedState;h!==v||E!==F||on.current||fr?(typeof k=="function"&&(Yf(e,n,k,i),F=e.memoizedState),(p=fr||q_(e,n,p,i,E,F,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=F),l.props=i,l.state=F,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return tp(t,e,n,i,o,s)}function tp(t,e,n,i,s,o){zw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&F_(e,n,!1),Wi(t,e,o);i=e.stateNode,bP.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=jo(e,t.child,null,o),e.child=jo(e,null,h,o)):qt(t,e,h,o),e.memoizedState=i.state,s&&F_(e,n,!0),e.child}function Bw(t){var e=t.stateNode;e.pendingContext?V_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&V_(t,e.context,!1),ym(t,e.containerInfo)}function ey(t,e,n,i,s){return Uo(),dm(s),e.flags|=256,qt(t,e,n,i),e.child}var np={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uw(t,e,n){var i=e.pendingProps,s=Ge.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ue(Ge,s&1),t===null)return Kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=zh(l,i,0,null),t=vs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ip(n),e.memoizedState=np,t):xm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return NP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Lr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Lr(h,o):(o=vs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?ip(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=np,i}return o=t.child,t=o.sibling,i=Lr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function xm(t,e){return e=zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ic(t,e,n,i){return i!==null&&dm(i),jo(e,t.child,null,n),t=xm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Jd(Error(ee(422))),ic(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=zh({mode:"visible",children:i.children},s,0,null),o=vs(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&jo(e,t.child,null,l),e.child.memoizedState=ip(l),e.memoizedState=np,o);if(!(e.mode&1))return ic(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(ee(419)),i=Jd(o,i,void 0),ic(t,e,l,i)}if(h=(l&t.childLanes)!==0,sn||h){if(i=Tt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,$i(t,s),Hn(i,t,s,-1))}return bm(),i=Jd(Error(ee(421))),ic(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qP.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,pn=Cr(s.nextSibling),gn=e,Ze=!0,Bn=null,t!==null&&(Tn[In++]=Di,Tn[In++]=Vi,Tn[In++]=Ps,Di=t.id,Vi=t.overflow,Ps=e),e=xm(e,i.children),e.flags|=4096,e)}function ty(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Qf(t.return,e,n)}function ef(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function jw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(qt(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ty(t,n,e);else if(t.tag===19)ty(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ue(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ef(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ef(e,!0,n,null,o);break;case"together":ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OP(t,e,n){switch(e.tag){case 3:Bw(e),Uo();break;case 5:pw(e);break;case 1:an(e.type)&&Zc(e);break;case 4:ym(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ue(Qc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ue(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?Uw(t,e,n):(Ue(Ge,Ge.current&1),t=Wi(t,e,n),t!==null?t.sibling:null);Ue(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return jw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,Fw(t,e,n)}return Wi(t,e,n)}var Hw,rp,$w,Ww;Hw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};$w=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,gs(ci.current);var o=null;switch(n){case"input":s=xf(t,s),i=xf(t,i),o=[];break;case"select":s=Qe({},s,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":s=kf(t,s),i=kf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Wc)}Lf(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Tl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&He("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};Ww=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ya(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function MP(t,e,n){var i=e.pendingProps;switch(hm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return an(e.type)&&qc(),Dt(e),null;case 3:return i=e.stateNode,Ho(),qe(on),qe(jt),wm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(tc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(dp(Bn),Bn=null))),rp(t,e),Dt(e),null;case 5:vm(e);var s=gs(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)$w(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Dt(e),null}if(t=gs(ci.current),tc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ai]=e,i[bl]=o,t=(e.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(s=0;s<nl.length;s++)He(nl[s],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":c_(i,o),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},He("invalid",i);break;case"textarea":d_(i,o),He("invalid",i)}Lf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&ec(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&ec(i.textContent,h,t),s=["children",""+h]):Tl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&He("scroll",i)}switch(n){case"input":qu(i),h_(i,o,!0);break;case"textarea":qu(i),f_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Wc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ai]=e,t[bl]=i,Hw(t,e,!1,!1),e.stateNode=t;e:{switch(l=bf(n,i),n){case"dialog":He("cancel",t),He("close",t),s=i;break;case"iframe":case"object":case"embed":He("load",t),s=i;break;case"video":case"audio":for(s=0;s<nl.length;s++)He(nl[s],t);s=i;break;case"source":He("error",t),s=i;break;case"img":case"image":case"link":He("error",t),He("load",t),s=i;break;case"details":He("toggle",t),s=i;break;case"input":c_(t,i),s=xf(t,i),He("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Qe({},i,{value:void 0}),He("invalid",t);break;case"textarea":d_(t,i),s=kf(t,i),He("invalid",t);break;default:s=i}Lf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?T0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&w0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Il(t,d):typeof d=="number"&&Il(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&He("scroll",t):d!=null&&Qp(t,o,d,l))}switch(n){case"input":qu(t),h_(t,i,!1);break;case"textarea":qu(t),f_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Vr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ao(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ao(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)Ww(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=gs(Ol.current),gs(ci.current),tc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ai]=e,(o=i.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:ec(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ec(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ai]=e,e.stateNode=i}return Dt(e),null;case 13:if(qe(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&pn!==null&&e.mode&1&&!(e.flags&128))uw(),Uo(),e.flags|=98560,o=!1;else if(o=tc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[ai]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),o=!1}else Bn!==null&&(dp(Bn),Bn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?mt===0&&(mt=3):bm())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Ho(),rp(t,e),t===null&&Rl(e.stateNode.containerInfo),Dt(e),null;case 10:return mm(e.type._context),Dt(e),null;case 17:return an(e.type)&&qc(),Dt(e),null;case 19:if(qe(Ge),o=e.memoizedState,o===null)return Dt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ya(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Jc(t),l!==null){for(e.flags|=128,Ya(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Wo&&(e.flags|=128,i=!0,Ya(o,!1),e.lanes=4194304)}else{if(!i)if(t=Jc(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ya(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ze)return Dt(e),null}else 2*it()-o.renderingStartTime>Wo&&n!==1073741824&&(e.flags|=128,i=!0,Ya(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ge.current,Ue(Ge,i?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Lm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function DP(t,e){switch(hm(e),e.tag){case 1:return an(e.type)&&qc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ho(),qe(on),qe(jt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vm(e),null;case 13:if(qe(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ge),null;case 4:return Ho(),null;case 10:return mm(e.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var rc=!1,Bt=!1,VP=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function sp(t,e,n){try{n()}catch(i){et(t,e,i)}}var ny=!1;function FP(t,e){if(jf=jc,t=Q0(),um(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,y=0,v=t,E=null;t:for(;;){for(var k;v!==n||s!==0&&v.nodeType!==3||(h=l+s),v!==o||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(k=v.firstChild)!==null;)E=v,v=k;for(;;){if(v===t)break t;if(E===n&&++p===s&&(h=l),E===o&&++y===i&&(d=l),(k=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=k}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hf={focusedElem:t,selectionRange:n},jc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var M=F.memoizedProps,U=F.memoizedState,C=e.stateNode,P=C.getSnapshotBeforeUpdate(e.elementType===e.type?M:Fn(e.type,M),U);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(W){et(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return F=ny,ny=!1,F}function fl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&sp(e,n,o)}s=s.next}while(s!==i)}}function Vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qw(t){var e=t.alternate;e!==null&&(t.alternate=null,qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ai],delete e[bl],delete e[qf],delete e[wP],delete e[EP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zw(t){return t.tag===5||t.tag===3||t.tag===4}function iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wc));else if(i!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}function lp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}var Pt=null,zn=!1;function cr(t,e,n){for(n=n.child;n!==null;)Gw(t,e,n),n=n.sibling}function Gw(t,e,n){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(kh,n)}catch{}switch(n.tag){case 5:Bt||Po(n,e);case 6:var i=Pt,s=zn;Pt=null,cr(t,e,n),Pt=i,zn=s,Pt!==null&&(zn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(zn?(t=Pt,n=n.stateNode,t.nodeType===8?Zd(t.parentNode,n):t.nodeType===1&&Zd(t,n),Cl(t)):Zd(Pt,n.stateNode));break;case 4:i=Pt,s=zn,Pt=n.stateNode.containerInfo,zn=!0,cr(t,e,n),Pt=i,zn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&sp(n,e,l),s=s.next}while(s!==i)}cr(t,e,n);break;case 1:if(!Bt&&(Po(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(Bt=(i=Bt)||n.memoizedState!==null,cr(t,e,n),Bt=i):cr(t,e,n);break;default:cr(t,e,n)}}function ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VP),e.forEach(function(i){var s=ZP.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,zn=!1;break e;case 3:Pt=h.stateNode.containerInfo,zn=!0;break e;case 4:Pt=h.stateNode.containerInfo,zn=!0;break e}h=h.return}if(Pt===null)throw Error(ee(160));Gw(o,l,s),Pt=null,zn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){et(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kw(e,t),e=e.sibling}function Kw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),ri(t),i&4){try{fl(3,t,t.return),Vh(3,t)}catch(M){et(t,t.return,M)}try{fl(5,t,t.return)}catch(M){et(t,t.return,M)}}break;case 1:Vn(e,t),ri(t),i&512&&n!==null&&Po(n,n.return);break;case 5:if(Vn(e,t),ri(t),i&512&&n!==null&&Po(n,n.return),t.flags&32){var s=t.stateNode;try{Il(s,"")}catch(M){et(t,t.return,M)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&_0(s,o),bf(h,l);var p=bf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],v=d[l+1];y==="style"?T0(s,v):y==="dangerouslySetInnerHTML"?w0(s,v):y==="children"?Il(s,v):Qp(s,y,v,p)}switch(h){case"input":Cf(s,o);break;case"textarea":y0(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Ao(s,!!o.multiple,k,!1):E!==!!o.multiple&&(o.defaultValue!=null?Ao(s,!!o.multiple,o.defaultValue,!0):Ao(s,!!o.multiple,o.multiple?[]:"",!1))}s[bl]=o}catch(M){et(t,t.return,M)}}break;case 6:if(Vn(e,t),ri(t),i&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(M){et(t,t.return,M)}}break;case 3:if(Vn(e,t),ri(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(M){et(t,t.return,M)}break;case 4:Vn(e,t),ri(t);break;case 13:Vn(e,t),ri(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(km=it())),i&4&&ry(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(p=Bt)||y,Vn(e,t),Bt=p):Vn(e,t),ri(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(oe=t,y=t.child;y!==null;){for(v=oe=y;oe!==null;){switch(E=oe,k=E.child,E.tag){case 0:case 11:case 14:case 15:fl(4,E,E.return);break;case 1:Po(E,E.return);var F=E.stateNode;if(typeof F.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(M){et(i,n,M)}}break;case 5:Po(E,E.return);break;case 22:if(E.memoizedState!==null){oy(v);continue}}k!==null?(k.return=E,oe=k):oy(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=E0("display",l))}catch(M){et(t,t.return,M)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(M){et(t,t.return,M)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Vn(e,t),ri(t),i&4&&ry(t);break;case 21:break;default:Vn(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zw(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Il(s,""),i.flags&=-33);var o=iy(t);lp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=iy(t);ap(t,h,l);break;default:throw Error(ee(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zP(t,e,n){oe=t,Qw(t)}function Qw(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||rc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Bt;h=rc;var p=Bt;if(rc=l,(Bt=d)&&!p)for(oe=s;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?ay(s):d!==null?(d.return=l,oe=d):ay(s);for(;o!==null;)oe=o,Qw(o),o=o.sibling;oe=s,rc=h,Bt=p}sy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):sy(t)}}function sy(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Vh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&H_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}H_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Cl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Bt||e.flags&512&&op(e)}catch(E){et(e,e.return,E)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function oy(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function ay(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){et(e,s,d)}}var o=e.return;try{op(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{op(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var BP=Math.ceil,nh=Yi.ReactCurrentDispatcher,Cm=Yi.ReactCurrentOwner,xn=Yi.ReactCurrentBatchConfig,be=0,Tt=null,lt=null,At=0,fn=0,xo=qr(0),mt=0,Fl=null,Cs=0,Fh=0,Am=0,pl=null,nn=null,km=0,Wo=1/0,Oi=null,ih=!1,up=null,kr=null,sc=!1,Er=null,rh=0,ml=0,cp=null,Ic=-1,Sc=0;function Zt(){return be&6?it():Ic!==-1?Ic:Ic=it()}function Rr(t){return t.mode&1?be&2&&At!==0?At&-At:IP.transition!==null?(Sc===0&&(Sc=O0()),Sc):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:U0(t.type)),t):1}function Hn(t,e,n,i){if(50<ml)throw ml=0,cp=null,Error(ee(185));Ql(t,n,i),(!(be&2)||t!==Tt)&&(t===Tt&&(!(be&2)&&(Fh|=n),mt===4&&mr(t,At)),ln(t,i),n===1&&be===0&&!(e.mode&1)&&(Wo=it()+500,Oh&&Zr()))}function ln(t,e){var n=t.callbackNode;IS(t,e);var i=Uc(t,t===Tt?At:0);if(i===0)n!==null&&g_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&g_(n),e===1)t.tag===0?TP(ly.bind(null,t)):ow(ly.bind(null,t)),yP(function(){!(be&6)&&Zr()}),n=null;else{switch(M0(i)){case 1:n=tm;break;case 4:n=b0;break;case 16:n=Bc;break;case 536870912:n=N0;break;default:n=Bc}n=r1(n,Yw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yw(t,e){if(Ic=-1,Sc=0,be&6)throw Error(ee(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var i=Uc(t,t===Tt?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=sh(t,i);else{e=i;var s=be;be|=2;var o=Jw();(Tt!==t||At!==e)&&(Oi=null,Wo=it()+500,ys(t,e));do try{HP();break}catch(h){Xw(t,h)}while(1);pm(),nh.current=o,be=s,lt!==null?e=0:(Tt=null,At=0,e=mt)}if(e!==0){if(e===2&&(s=Vf(t),s!==0&&(i=s,e=hp(t,s))),e===1)throw n=Fl,ys(t,0),mr(t,i),ln(t,it()),n;if(e===6)mr(t,i);else{if(s=t.current.alternate,!(i&30)&&!UP(s)&&(e=sh(t,i),e===2&&(o=Vf(t),o!==0&&(i=o,e=hp(t,o))),e===1))throw n=Fl,ys(t,0),mr(t,i),ln(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:cs(t,nn,Oi);break;case 3:if(mr(t,i),(i&130023424)===i&&(e=km+500-it(),10<e)){if(Uc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wf(cs.bind(null,t,nn,Oi),e);break}cs(t,nn,Oi);break;case 4:if(mr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-jn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*BP(i/1960))-i,10<i){t.timeoutHandle=Wf(cs.bind(null,t,nn,Oi),i);break}cs(t,nn,Oi);break;case 5:cs(t,nn,Oi);break;default:throw Error(ee(329))}}}return ln(t,it()),t.callbackNode===n?Yw.bind(null,t):null}function hp(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=sh(t,e),t!==2&&(e=nn,nn=n,e!==null&&dp(e)),t}function dp(t){nn===null?nn=t:nn.push.apply(nn,t)}function UP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Wn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Am,e&=~Fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),i=1<<n;t[n]=-1,e&=~i}}function ly(t){if(be&6)throw Error(ee(327));No();var e=Uc(t,0);if(!(e&1))return ln(t,it()),null;var n=sh(t,e);if(t.tag!==0&&n===2){var i=Vf(t);i!==0&&(e=i,n=hp(t,i))}if(n===1)throw n=Fl,ys(t,0),mr(t,e),ln(t,it()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,nn,Oi),ln(t,it()),null}function Rm(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Wo=it()+500,Oh&&Zr())}}function As(t){Er!==null&&Er.tag===0&&!(be&6)&&No();var e=be;be|=1;var n=xn.transition,i=Ve;try{if(xn.transition=null,Ve=1,t)return t()}finally{Ve=i,xn.transition=n,be=e,!(be&6)&&Zr()}}function Lm(){fn=xo.current,qe(xo)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_P(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(hm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qc();break;case 3:Ho(),qe(on),qe(jt),wm();break;case 5:vm(i);break;case 4:Ho();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:mm(i.type._context);break;case 22:case 23:Lm()}n=n.return}if(Tt=t,lt=t=Lr(t.current,null),At=fn=e,mt=0,Fl=null,Am=Fh=Cs=0,nn=pl=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}ms=null}return t}function Xw(t,e){do{var n=lt;try{if(pm(),wc.current=th,eh){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}eh=!1}if(xs=0,Et=pt=Ke=null,dl=!1,Ml=0,Cm.current=null,n===null||n.return===null){mt=1,Fl=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=h,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var k=K_(l);if(k!==null){k.flags&=-257,Q_(k,l,h,o,e),k.mode&1&&G_(o,p,e),e=k,d=p;var F=e.updateQueue;if(F===null){var M=new Set;M.add(d),e.updateQueue=M}else F.add(d);break e}else{if(!(e&1)){G_(o,p,e),bm();break e}d=Error(ee(426))}}else if(Ze&&h.mode&1){var U=K_(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Q_(U,l,h,o,e),dm($o(d,h));break e}}o=d=$o(d,h),mt!==4&&(mt=2),pl===null?pl=[o]:pl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=Mw(o,d,e);j_(o,C);break e;case 1:h=d;var P=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(kr===null||!kr.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=Dw(o,h,e);j_(o,W);break e}}o=o.return}while(o!==null)}t1(n)}catch(X){e=X,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(1)}function Jw(){var t=nh.current;return nh.current=th,t===null?th:t}function bm(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(Cs&268435455)&&!(Fh&268435455)||mr(Tt,At)}function sh(t,e){var n=be;be|=2;var i=Jw();(Tt!==t||At!==e)&&(Oi=null,ys(t,e));do try{jP();break}catch(s){Xw(t,s)}while(1);if(pm(),be=n,nh.current=i,lt!==null)throw Error(ee(261));return Tt=null,At=0,mt}function jP(){for(;lt!==null;)e1(lt)}function HP(){for(;lt!==null&&!pS();)e1(lt)}function e1(t){var e=i1(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?t1(t):lt=e,Cm.current=null}function t1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DP(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,lt=null;return}}else if(n=MP(n,e,fn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);mt===0&&(mt=5)}function cs(t,e,n){var i=Ve,s=xn.transition;try{xn.transition=null,Ve=1,$P(t,e,n,i)}finally{xn.transition=s,Ve=i}return null}function $P(t,e,n,i){do No();while(Er!==null);if(be&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(SS(t,o),t===Tt&&(lt=Tt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sc||(sc=!0,r1(Bc,function(){return No(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=xn.transition,xn.transition=null;var l=Ve;Ve=1;var h=be;be|=4,Cm.current=null,FP(t,n),Kw(n,t),cP(Hf),jc=!!jf,Hf=jf=null,t.current=n,zP(n),mS(),be=h,Ve=l,xn.transition=o}else t.current=n;if(sc&&(sc=!1,Er=t,rh=s),o=t.pendingLanes,o===0&&(kr=null),yS(n.stateNode),ln(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(ih)throw ih=!1,t=up,up=null,t;return rh&1&&t.tag!==0&&No(),o=t.pendingLanes,o&1?t===cp?ml++:(ml=0,cp=t):ml=0,Zr(),null}function No(){if(Er!==null){var t=M0(rh),e=xn.transition,n=Ve;try{if(xn.transition=null,Ve=16>t?16:t,Er===null)var i=!1;else{if(t=Er,Er=null,rh=0,be&6)throw Error(ee(331));var s=be;for(be|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var y=oe;switch(y.tag){case 0:case 11:case 15:fl(8,y,o)}var v=y.child;if(v!==null)v.return=y,oe=v;else for(;oe!==null;){y=oe;var E=y.sibling,k=y.return;if(qw(y),y===p){oe=null;break}if(E!==null){E.return=k,oe=E;break}oe=k}}}var F=o.alternate;if(F!==null){var M=F.child;if(M!==null){F.child=null;do{var U=M.sibling;M.sibling=null,M=U}while(M!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fl(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,oe=C;break e}oe=o.return}}var P=t.current;for(oe=P;oe!==null;){l=oe;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,oe=O;else e:for(l=P;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Vh(9,h)}}catch(X){et(h,h.return,X)}if(h===l){oe=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,oe=W;break e}oe=h.return}}if(be=s,Zr(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(kh,t)}catch{}i=!0}return i}finally{Ve=n,xn.transition=e}}return!1}function uy(t,e,n){e=$o(n,e),e=Mw(t,e,1),t=Ar(t,e,1),e=Zt(),t!==null&&(Ql(t,1,e),ln(t,e))}function et(t,e,n){if(t.tag===3)uy(t,t,n);else for(;e!==null;){if(e.tag===3){uy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(kr===null||!kr.has(i))){t=$o(n,t),t=Dw(e,t,1),e=Ar(e,t,1),t=Zt(),e!==null&&(Ql(e,1,t),ln(e,t));break}}e=e.return}}function WP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>it()-km?ys(t,0):Am|=n),ln(t,e)}function n1(t,e){e===0&&(t.mode&1?(e=Ku,Ku<<=1,!(Ku&130023424)&&(Ku=4194304)):e=1);var n=Zt();t=$i(t,e),t!==null&&(Ql(t,e,n),ln(t,n))}function qP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n1(t,n)}function ZP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),n1(t,n)}var i1;i1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,OP(t,e,n);sn=!!(t.flags&131072)}else sn=!1,Ze&&e.flags&1048576&&aw(e,Kc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Tc(t,e),t=e.pendingProps;var s=Bo(e,jt.current);bo(e,n),s=Tm(null,e,i,t,s,n);var o=Im();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(i)?(o=!0,Zc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_m(e),s.updater=Dh,e.stateNode=s,s._reactInternals=e,Xf(e,i,t,n),e=tp(null,e,i,!0,o,n)):(e.tag=0,Ze&&o&&cm(e),qt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Tc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=KP(i),t=Fn(i,t),s){case 0:e=ep(null,e,i,t,n);break e;case 1:e=J_(null,e,i,t,n);break e;case 11:e=Y_(null,e,i,t,n);break e;case 14:e=X_(null,e,i,Fn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),ep(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),J_(t,e,i,s,n);case 3:e:{if(Bw(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,s=o.element,fw(t,e),Xc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=$o(Error(ee(423)),e),e=ey(t,e,i,n,s);break e}else if(i!==s){s=$o(Error(ee(424)),e),e=ey(t,e,i,n,s);break e}else for(pn=Cr(e.stateNode.containerInfo.firstChild),gn=e,Ze=!0,Bn=null,n=hw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),i===s){e=Wi(t,e,n);break e}qt(t,e,i,n)}e=e.child}return e;case 5:return pw(e),t===null&&Kf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,$f(i,s)?l=null:o!==null&&$f(i,o)&&(e.flags|=32),zw(t,e),qt(t,e,l,n),e.child;case 6:return t===null&&Kf(e),null;case 13:return Uw(t,e,n);case 4:return ym(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=jo(e,null,i,n):qt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),Y_(t,e,i,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Ue(Qc,i._currentValue),i._currentValue=l,o!==null)if(Wn(o.value,l)){if(o.children===s.children&&!on.current){e=Wi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Bi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Qf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ee(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Qf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,bo(e,n),s=Cn(s),i=i(s),e.flags|=1,qt(t,e,i,n),e.child;case 14:return i=e.type,s=Fn(i,e.pendingProps),s=Fn(i.type,s),X_(t,e,i,s,n);case 15:return Vw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Fn(i,s),Tc(t,e),e.tag=1,an(i)?(t=!0,Zc(e)):t=!1,bo(e,n),Ow(e,i,s),Xf(e,i,s,n),tp(null,e,i,!0,t,n);case 19:return jw(t,e,n);case 22:return Fw(t,e,n)}throw Error(ee(156,e.tag))};function r1(t,e){return L0(t,e)}function GP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,i){return new GP(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KP(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Nm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case go:return vs(n.children,s,o,e);case Yp:l=8,s|=8;break;case Tf:return t=Pn(12,n,e,s|2),t.elementType=Tf,t.lanes=o,t;case If:return t=Pn(13,n,e,s),t.elementType=If,t.lanes=o,t;case Sf:return t=Pn(19,n,e,s),t.elementType=Sf,t.lanes=o,t;case p0:return zh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case d0:l=10;break e;case f0:l=9;break e;case Xp:l=11;break e;case Jp:l=14;break e;case dr:l=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Pn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function vs(t,e,n,i){return t=Pn(7,t,i,e),t.lanes=n,t}function zh(t,e,n,i){return t=Pn(22,t,i,e),t.elementType=p0,t.lanes=n,t.stateNode={isHidden:!1},t}function tf(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function nf(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QP(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dd(0),this.expirationTimes=Dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,i,s,o,l,h,d){return t=new QP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(o),t}function YP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function s1(t){if(!t)return Fr;t=t._reactInternals;e:{if(Ms(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(an(n))return sw(t,n,e)}return e}function o1(t,e,n,i,s,o,l,h,d){return t=Om(n,i,!0,t,s,o,l,h,d),t.context=s1(null),n=t.current,i=Zt(),s=Rr(n),o=Bi(i,s),o.callback=e??null,Ar(n,o,s),t.current.lanes=s,Ql(t,s,i),ln(t,i),t}function Bh(t,e,n,i){var s=e.current,o=Zt(),l=Rr(s);return n=s1(n),e.context===null?e.context=n:e.pendingContext=n,e=Bi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ar(s,e,l),t!==null&&(Hn(t,s,l,o),vc(t,s,l)),l}function oh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mm(t,e){cy(t,e),(t=t.alternate)&&cy(t,e)}function XP(){return null}var a1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dm(t){this._internalRoot=t}Uh.prototype.render=Dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Bh(t,e,null,null)};Uh.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){Bh(null,t,null,null)}),e[Hi]=null}};function Uh(t){this._internalRoot=t}Uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=F0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&B0(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hy(){}function JP(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=oh(l);o.call(p)}}var l=o1(e,i,t,0,null,!1,!1,"",hy);return t._reactRootContainer=l,t[Hi]=l.current,Rl(t.nodeType===8?t.parentNode:t),As(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=oh(d);h.call(p)}}var d=Om(t,0,!1,null,null,!1,!1,"",hy);return t._reactRootContainer=d,t[Hi]=d.current,Rl(t.nodeType===8?t.parentNode:t),As(function(){Bh(e,d,n,i)}),d}function Hh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=oh(l);h.call(d)}}Bh(e,l,t,s)}else l=JP(n,e,t,s,i);return oh(l)}D0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tl(e.pendingLanes);n!==0&&(nm(e,n|1),ln(e,it()),!(be&6)&&(Wo=it()+500,Zr()))}break;case 13:As(function(){var i=$i(t,1);if(i!==null){var s=Zt();Hn(i,t,1,s)}}),Mm(t,1)}};im=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=Zt();Hn(e,t,134217728,n)}Mm(t,134217728)}};V0=function(t){if(t.tag===13){var e=Rr(t),n=$i(t,e);if(n!==null){var i=Zt();Hn(n,t,e,i)}Mm(t,e)}};F0=function(){return Ve};z0=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Of=function(t,e,n){switch(e){case"input":if(Cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Nh(i);if(!s)throw Error(ee(90));g0(i),Cf(i,s)}}}break;case"textarea":y0(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};P0=Rm;x0=As;var ex={usingClientEntryPoint:!1,Events:[Xl,wo,Nh,I0,S0,Rm]},Xa={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tx={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k0(t),t===null?null:t.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||XP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{kh=oc.inject(tx),ui=oc}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ex;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error(ee(200));return YP(t,e,null,n)};yn.createRoot=function(t,e){if(!Vm(t))throw Error(ee(299));var n=!1,i="",s=a1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,i,s),t[Hi]=e.current,Rl(t.nodeType===8?t.parentNode:t),new Dm(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=k0(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return As(t)};yn.hydrate=function(t,e,n){if(!jh(e))throw Error(ee(200));return Hh(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!Vm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=a1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=o1(e,null,t,1,n??null,s,!1,o,l),t[Hi]=e.current,Rl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Uh(e)};yn.render=function(t,e,n){if(!jh(e))throw Error(ee(200));return Hh(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!jh(t))throw Error(ee(40));return t._reactRootContainer?(As(function(){Hh(null,null,t,!1,function(){t._reactRootContainer=null,t[Hi]=null})}),!0):!1};yn.unstable_batchedUpdates=Rm;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!jh(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Hh(t,e,n,!1,i)};yn.version="18.3.1-next-f1338f8080-20240426";function l1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l1)}catch(t){console.error(t)}}l1(),l0.exports=yn;var u1=l0.exports,dy=u1;wf.createRoot=dy.createRoot,wf.hydrateRoot=dy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zl.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const fy="popstate";function nx(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return fp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:h1(s)}return rx(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function c1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ix(){return Math.random().toString(36).substr(2,8)}function py(t,e){return{usr:t.state,key:t.key,idx:e}}function fp(t,e,n,i){return n===void 0&&(n=null),zl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ia(e):e,{state:n,key:e&&e.key||i||ix()})}function h1(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ia(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function rx(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=Tr.Pop,d=null,p=y();p==null&&(p=0,l.replaceState(zl({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function v(){h=Tr.Pop;let U=y(),C=U==null?null:U-p;p=U,d&&d({action:h,location:M.location,delta:C})}function E(U,C){h=Tr.Push;let P=fp(M.location,U,C);n&&n(P,U),p=y()+1;let O=py(P,p),W=M.createHref(P);try{l.pushState(O,"",W)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(W)}o&&d&&d({action:h,location:M.location,delta:1})}function k(U,C){h=Tr.Replace;let P=fp(M.location,U,C);n&&n(P,U),p=y();let O=py(P,p),W=M.createHref(P);l.replaceState(O,"",W),o&&d&&d({action:h,location:M.location,delta:0})}function F(U){let C=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof U=="string"?U:h1(U);return P=P.replace(/ $/,"%20"),gt(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let M={get action(){return h},get location(){return t(s,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(fy,v),d=U,()=>{s.removeEventListener(fy,v),d=null}},createHref(U){return e(s,U)},createURL:F,encodeLocation(U){let C=F(U);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:E,replace:k,go(U){return l.go(U)}};return M}var my;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(my||(my={}));function sx(t,e,n){return n===void 0&&(n="/"),ox(t,e,n,!1)}function ox(t,e,n,i){let s=typeof e=="string"?ia(e):e,o=p1(s.pathname||"/",n);if(o==null)return null;let l=d1(t);ax(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=yx(o);h=gx(l[d],p,i)}return h}function d1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(gt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=ws([i,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),d1(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:px(p,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of f1(o.path))s(o,l,d)}),e}function f1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=f1(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function ax(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const lx=/^:[\w-]+$/,ux=3,cx=2,hx=1,dx=10,fx=-2,gy=t=>t==="*";function px(t,e){let n=t.split("/"),i=n.length;return n.some(gy)&&(i+=fx),e&&(i+=cx),n.filter(s=>!gy(s)).reduce((s,o)=>s+(lx.test(o)?ux:o===""?hx:dx),i)}function mx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function gx(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=_y({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!v&&p&&n&&!i[i.length-1].route.index&&(v=_y({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:ws([o,v.pathname]),pathnameBase:Sx(ws([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=ws([o,v.pathnameBase]))}return l}function _y(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=_x(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,y,v)=>{let{paramName:E,isOptional:k}=y;if(E==="*"){let M=h[v]||"";l=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const F=h[v];return k&&!F?p[E]=void 0:p[E]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function _x(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),c1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function yx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return c1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function p1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function vx(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?ia(t):t;return{pathname:n?n.startsWith("/")?n:wx(n,e):e,search:Px(i),hash:xx(s)}}function wx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ex(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tx(t,e){let n=Ex(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Ix(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=ia(t):(s=zl({},t),gt(!s.pathname||!s.pathname.includes("?"),rf("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),rf("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),rf("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}h=v>=0?e[v]:"/"}let d=vx(s,h),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}const ws=t=>t.join("/").replace(/\/\/+/g,"/"),Sx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Px=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const m1=["post","put","patch","delete"];new Set(m1);const Ax=["get",...m1];new Set(Ax);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bl.apply(this,arguments)}const Fm=q.createContext(null),kx=q.createContext(null),$h=q.createContext(null),Wh=q.createContext(null),Ds=q.createContext({outlet:null,matches:[],isDataRoute:!1}),g1=q.createContext(null);function qh(){return q.useContext(Wh)!=null}function _1(){return qh()||gt(!1),q.useContext(Wh).location}function y1(t){q.useContext($h).static||q.useLayoutEffect(t)}function zm(){let{isDataRoute:t}=q.useContext(Ds);return t?Hx():Rx()}function Rx(){qh()||gt(!1);let t=q.useContext(Fm),{basename:e,future:n,navigator:i}=q.useContext($h),{matches:s}=q.useContext(Ds),{pathname:o}=_1(),l=JSON.stringify(Tx(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return y1(()=>{h.current=!0}),q.useCallback(function(p,y){if(y===void 0&&(y={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let v=Ix(p,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ws([e,v.pathname])),(y.replace?i.replace:i.push)(v,y.state,y)},[e,i,l,o,t])}function Lx(){let{matches:t}=q.useContext(Ds),e=t[t.length-1];return e?e.params:{}}function bx(t,e){return Nx(t,e)}function Nx(t,e,n,i){qh()||gt(!1);let{navigator:s}=q.useContext($h),{matches:o}=q.useContext(Ds),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=_1(),y;if(e){var v;let U=typeof e=="string"?ia(e):e;d==="/"||(v=U.pathname)!=null&&v.startsWith(d)||gt(!1),y=U}else y=p;let E=y.pathname||"/",k=E;if(d!=="/"){let U=d.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let F=sx(t,{pathname:k}),M=Fx(F&&F.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:ws([d,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:ws([d,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&M?q.createElement(Wh.Provider,{value:{location:Bl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Tr.Pop}},M):M}function Ox(){let t=jx(),e=Cx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,o)}const Mx=q.createElement(Ox,null);class Dx extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Ds.Provider,{value:this.props.routeContext},q.createElement(g1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vx(t){let{routeContext:e,match:n,children:i}=t,s=q.useContext(Fm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Ds.Provider,{value:e},i)}function Fx(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);y>=0||gt(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:E,errors:k}=n,F=v.route.loader&&E[v.route.id]===void 0&&(!k||k[v.route.id]===void 0);if(v.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let k,F=!1,M=null,U=null;n&&(k=h&&v.route.id?h[v.route.id]:void 0,M=v.route.errorElement||Mx,d&&(p<0&&E===0?($x("route-fallback",!1),F=!0,U=null):p===E&&(F=!0,U=v.route.hydrateFallbackElement||null)));let C=e.concat(l.slice(0,E+1)),P=()=>{let O;return k?O=M:F?O=U:v.route.Component?O=q.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=y,q.createElement(Vx,{match:v,routeContext:{outlet:y,matches:C,isDataRoute:n!=null},children:O})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(Dx,{location:n.location,revalidation:n.revalidation,component:M,error:k,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}var v1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(v1||{}),ah=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ah||{});function zx(t){let e=q.useContext(Fm);return e||gt(!1),e}function Bx(t){let e=q.useContext(kx);return e||gt(!1),e}function Ux(t){let e=q.useContext(Ds);return e||gt(!1),e}function w1(t){let e=Ux(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function jx(){var t;let e=q.useContext(g1),n=Bx(ah.UseRouteError),i=w1(ah.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Hx(){let{router:t}=zx(v1.UseNavigateStable),e=w1(ah.UseNavigateStable),n=q.useRef(!1);return y1(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bl({fromRouteId:e},o)))},[t,e])}const yy={};function $x(t,e,n){!e&&!yy[t]&&(yy[t]=!0)}function Wx(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function xc(t){gt(!1)}function qx(t){let{basename:e="/",children:n=null,location:i,navigationType:s=Tr.Pop,navigator:o,static:l=!1,future:h}=t;qh()&&gt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:Bl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=ia(i));let{pathname:y="/",search:v="",hash:E="",state:k=null,key:F="default"}=i,M=q.useMemo(()=>{let U=p1(y,d);return U==null?null:{location:{pathname:U,search:v,hash:E,state:k,key:F},navigationType:s}},[d,y,v,E,k,F,s]);return M==null?null:q.createElement($h.Provider,{value:p},q.createElement(Wh.Provider,{children:n,value:M}))}function Zx(t){let{children:e,location:n}=t;return bx(pp(e),n)}new Promise(()=>{});function pp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(i,s)=>{if(!q.isValidElement(i))return;let o=[...e,s];if(i.type===q.Fragment){n.push.apply(n,pp(i.props.children,o));return}i.type!==xc&&gt(!1),!i.props.index||!i.props.children||gt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Gx="6";try{window.__reactRouterVersion=Gx}catch{}const Kx="startTransition",vy=WI[Kx];function Qx(t){let{basename:e,children:n,future:i,window:s}=t,o=q.useRef();o.current==null&&(o.current=nx({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},y=q.useCallback(v=>{p&&vy?vy(()=>d(v)):d(v)},[d,p]);return q.useLayoutEffect(()=>l.listen(y),[l,y]),q.useEffect(()=>Wx(i),[i]),q.createElement(qx,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var wy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wy||(wy={}));var Ey;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ey||(Ey={}));const Yx=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Xx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},T1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,k=p&63;d||(k=64,l||(E=64)),i.push(n[y],n[v],n[E],n[k])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(E1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new Jx;const E=o<<2|h>>4;if(i.push(E),p!==64){const k=h<<4&240|p>>2;if(i.push(k),v!==64){const F=p<<6&192|v;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Jx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eC=function(t){const e=E1(t);return T1.encodeByteArray(e,!0)},lh=function(t){return eC(t).replace(/\./g,"")},I1=function(t){try{return T1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=()=>tC().__FIREBASE_DEFAULTS__,iC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&I1(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return Yx()||nC()||iC()||rC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S1=t=>{var e,n;return(n=(e=Zh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},sC=t=>{const e=S1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},P1=()=>{var t;return(t=Zh())==null?void 0:t.config},x1=t=>{var e;return(e=Zh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t},h="";return[lh(JSON.stringify(n)),lh(JSON.stringify(l)),h].join(".")}const gl={};function lC(){const t={prod:[],emulator:[]};for(const e of Object.keys(gl))gl[e]?t.emulator.push(e):t.prod.push(e);return t}function uC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ty=!1;function A1(t,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||gl[t]===e||gl[t]||Ty)return;gl[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=lC().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,k){E.setAttribute("width","24"),E.setAttribute("id",k),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Ty=!0,l()},E}function y(E,k){E.setAttribute("id",k),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=uC(i),k=n("text"),F=document.getElementById(k)||document.createElement("span"),M=n("learnmore"),U=document.getElementById(M)||document.createElement("a"),C=n("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const O=E.element;h(O),y(U,M);const W=p();d(P,C),O.append(P,F,U,W),document.body.appendChild(O)}o?(F.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function hC(){var e;const t=(e=Zh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mC(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gC(){return!hC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="FirebaseError";class Xi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=vC,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?wC(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Xi(s,h,i)}}function wC(t,e){return t.replace(EC,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const EC=/\{\$([^}]+)}/g;function TC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ks(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Iy(o)&&Iy(l)){if(!ks(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Iy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function IC(t,e){const n=new SC(t,e);return n.subscribe.bind(n)}class SC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");PC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=sf),s.error===void 0&&(s.error=sf),s.complete===void 0&&(s.complete=sf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new oC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AC(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CC(t){return t===hs?void 0:t}function AC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const RC={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},LC=xe.INFO,bC={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},NC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=bC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=LC,this._logHandler=NC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const OC=(t,e)=>e.some(n=>t instanceof n);let Sy,Py;function MC(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DC(){return Py||(Py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k1=new WeakMap,mp=new WeakMap,R1=new WeakMap,of=new WeakMap,Um=new WeakMap;function VC(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(br(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&k1.set(n,t)}).catch(()=>{}),Um.set(e,t),e}function FC(t){if(mp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});mp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zC(t){gp=t(gp)}function BC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(af(this),e,...n);return R1.set(i,e.sort?e.sort():[e]),br(i)}:DC().includes(t)?function(...e){return t.apply(af(this),e),br(k1.get(this))}:function(...e){return br(t.apply(af(this),e))}}function UC(t){return typeof t=="function"?BC(t):(t instanceof IDBTransaction&&FC(t),OC(t,MC())?new Proxy(t,gp):t)}function br(t){if(t instanceof IDBRequest)return VC(t);if(of.has(t))return of.get(t);const e=UC(t);return e!==t&&(of.set(t,e),Um.set(e,t)),e}const af=t=>Um.get(t);function jC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=br(l);return i&&l.addEventListener("upgradeneeded",d=>{i(br(l.result),d.oldVersion,d.newVersion,br(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const HC=["get","getKey","getAll","getAllKeys","count"],$C=["put","add","delete","clear"],lf=new Map;function xy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=$C.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HC.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return lf.set(e,o),o}zC(t=>({...t,get:(e,n,i)=>xy(e,n)||t.get(e,n,i),has:(e,n)=>!!xy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",Cy="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Bm("@firebase/app"),ZC="@firebase/app-compat",GC="@firebase/analytics-compat",KC="@firebase/analytics",QC="@firebase/app-check-compat",YC="@firebase/app-check",XC="@firebase/auth",JC="@firebase/auth-compat",eA="@firebase/database",tA="@firebase/data-connect",nA="@firebase/database-compat",iA="@firebase/functions",rA="@firebase/functions-compat",sA="@firebase/installations",oA="@firebase/installations-compat",aA="@firebase/messaging",lA="@firebase/messaging-compat",uA="@firebase/performance",cA="@firebase/performance-compat",hA="@firebase/remote-config",dA="@firebase/remote-config-compat",fA="@firebase/storage",pA="@firebase/storage-compat",mA="@firebase/firestore",gA="@firebase/ai",_A="@firebase/firestore-compat",yA="firebase",vA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",wA={[_p]:"fire-core",[ZC]:"fire-core-compat",[KC]:"fire-analytics",[GC]:"fire-analytics-compat",[YC]:"fire-app-check",[QC]:"fire-app-check-compat",[XC]:"fire-auth",[JC]:"fire-auth-compat",[eA]:"fire-rtdb",[tA]:"fire-data-connect",[nA]:"fire-rtdb-compat",[iA]:"fire-fn",[rA]:"fire-fn-compat",[sA]:"fire-iid",[oA]:"fire-iid-compat",[aA]:"fire-fcm",[lA]:"fire-fcm-compat",[uA]:"fire-perf",[cA]:"fire-perf-compat",[hA]:"fire-rc",[dA]:"fire-rc-compat",[fA]:"fire-gcs",[pA]:"fire-gcs-compat",[mA]:"fire-fst",[_A]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[yA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,EA=new Map,vp=new Map;function Ay(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(vp.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,t);for(const n of uh.values())Ay(n,t);for(const n of EA.values())Ay(n,t);return!0}function jm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new eu("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=vA;function L1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:yp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=P1()),!n)throw Nr.create("no-options");const o=uh.get(s);if(o){if(ks(n,o.options)&&ks(i,o.config))return o;throw Nr.create("duplicate-app",{appName:s})}const l=new kC(s);for(const d of vp.values())l.addComponent(d);const h=new IA(n,i,l);return uh.set(s,h),h}function b1(t=yp){const e=uh.get(t);if(!e&&t===yp&&P1())return L1();if(!e)throw Nr.create("no-app",{appName:t});return e}function Or(t,e,n){let i=wA[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(l.join(" "));return}qo(new Rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-heartbeat-database",PA=1,Ul="firebase-heartbeat-store";let uf=null;function N1(){return uf||(uf=jC(SA,PA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),uf}async function xA(t){try{const n=(await N1()).transaction(Ul),i=await n.objectStore(Ul).get(O1(t));return await n.done,i}catch(e){if(e instanceof Xi)qi.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function ky(t,e){try{const i=(await N1()).transaction(Ul,"readwrite");await i.objectStore(Ul).put(e,O1(t)),await i.done}catch(n){if(n instanceof Xi)qi.warn(n.message);else{const i=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(i.message)}}}function O1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,AA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ry();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>AA){const l=bA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:i,unsentEntries:s}=RA(this._heartbeatsCache.heartbeats),o=lh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return qi.warn(n),""}}}function Ry(){return new Date().toISOString().substring(0,10)}function RA(t,e=CA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Ly(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ly(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class LA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ly(t){return lh(JSON.stringify({version:2,heartbeats:t})).length}function bA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){qo(new Rs("platform-logger",e=>new WC(e),"PRIVATE")),qo(new Rs("heartbeat",e=>new kA(e),"PRIVATE")),Or(_p,Cy,t),Or(_p,Cy,"esm2020"),Or("fire-js","")}NA("");var by=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,M1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function S(){}S.prototype=I.prototype,x.F=I.prototype,x.prototype=new S,x.prototype.constructor=x,x.D=function(R,b,D){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return I.prototype[b].apply(R,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,I,S){S||(S=0);const R=Array(16);if(typeof I=="string")for(var b=0;b<16;++b)R[b]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(b=0;b<16;++b)R[b]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=x.g[0],S=x.g[1],b=x.g[2];let D=x.g[3],A;A=I+(D^S&(b^D))+R[0]+3614090360&4294967295,I=S+(A<<7&4294967295|A>>>25),A=D+(b^I&(S^b))+R[1]+3905402710&4294967295,D=I+(A<<12&4294967295|A>>>20),A=b+(S^D&(I^S))+R[2]+606105819&4294967295,b=D+(A<<17&4294967295|A>>>15),A=S+(I^b&(D^I))+R[3]+3250441966&4294967295,S=b+(A<<22&4294967295|A>>>10),A=I+(D^S&(b^D))+R[4]+4118548399&4294967295,I=S+(A<<7&4294967295|A>>>25),A=D+(b^I&(S^b))+R[5]+1200080426&4294967295,D=I+(A<<12&4294967295|A>>>20),A=b+(S^D&(I^S))+R[6]+2821735955&4294967295,b=D+(A<<17&4294967295|A>>>15),A=S+(I^b&(D^I))+R[7]+4249261313&4294967295,S=b+(A<<22&4294967295|A>>>10),A=I+(D^S&(b^D))+R[8]+1770035416&4294967295,I=S+(A<<7&4294967295|A>>>25),A=D+(b^I&(S^b))+R[9]+2336552879&4294967295,D=I+(A<<12&4294967295|A>>>20),A=b+(S^D&(I^S))+R[10]+4294925233&4294967295,b=D+(A<<17&4294967295|A>>>15),A=S+(I^b&(D^I))+R[11]+2304563134&4294967295,S=b+(A<<22&4294967295|A>>>10),A=I+(D^S&(b^D))+R[12]+1804603682&4294967295,I=S+(A<<7&4294967295|A>>>25),A=D+(b^I&(S^b))+R[13]+4254626195&4294967295,D=I+(A<<12&4294967295|A>>>20),A=b+(S^D&(I^S))+R[14]+2792965006&4294967295,b=D+(A<<17&4294967295|A>>>15),A=S+(I^b&(D^I))+R[15]+1236535329&4294967295,S=b+(A<<22&4294967295|A>>>10),A=I+(b^D&(S^b))+R[1]+4129170786&4294967295,I=S+(A<<5&4294967295|A>>>27),A=D+(S^b&(I^S))+R[6]+3225465664&4294967295,D=I+(A<<9&4294967295|A>>>23),A=b+(I^S&(D^I))+R[11]+643717713&4294967295,b=D+(A<<14&4294967295|A>>>18),A=S+(D^I&(b^D))+R[0]+3921069994&4294967295,S=b+(A<<20&4294967295|A>>>12),A=I+(b^D&(S^b))+R[5]+3593408605&4294967295,I=S+(A<<5&4294967295|A>>>27),A=D+(S^b&(I^S))+R[10]+38016083&4294967295,D=I+(A<<9&4294967295|A>>>23),A=b+(I^S&(D^I))+R[15]+3634488961&4294967295,b=D+(A<<14&4294967295|A>>>18),A=S+(D^I&(b^D))+R[4]+3889429448&4294967295,S=b+(A<<20&4294967295|A>>>12),A=I+(b^D&(S^b))+R[9]+568446438&4294967295,I=S+(A<<5&4294967295|A>>>27),A=D+(S^b&(I^S))+R[14]+3275163606&4294967295,D=I+(A<<9&4294967295|A>>>23),A=b+(I^S&(D^I))+R[3]+4107603335&4294967295,b=D+(A<<14&4294967295|A>>>18),A=S+(D^I&(b^D))+R[8]+1163531501&4294967295,S=b+(A<<20&4294967295|A>>>12),A=I+(b^D&(S^b))+R[13]+2850285829&4294967295,I=S+(A<<5&4294967295|A>>>27),A=D+(S^b&(I^S))+R[2]+4243563512&4294967295,D=I+(A<<9&4294967295|A>>>23),A=b+(I^S&(D^I))+R[7]+1735328473&4294967295,b=D+(A<<14&4294967295|A>>>18),A=S+(D^I&(b^D))+R[12]+2368359562&4294967295,S=b+(A<<20&4294967295|A>>>12),A=I+(S^b^D)+R[5]+4294588738&4294967295,I=S+(A<<4&4294967295|A>>>28),A=D+(I^S^b)+R[8]+2272392833&4294967295,D=I+(A<<11&4294967295|A>>>21),A=b+(D^I^S)+R[11]+1839030562&4294967295,b=D+(A<<16&4294967295|A>>>16),A=S+(b^D^I)+R[14]+4259657740&4294967295,S=b+(A<<23&4294967295|A>>>9),A=I+(S^b^D)+R[1]+2763975236&4294967295,I=S+(A<<4&4294967295|A>>>28),A=D+(I^S^b)+R[4]+1272893353&4294967295,D=I+(A<<11&4294967295|A>>>21),A=b+(D^I^S)+R[7]+4139469664&4294967295,b=D+(A<<16&4294967295|A>>>16),A=S+(b^D^I)+R[10]+3200236656&4294967295,S=b+(A<<23&4294967295|A>>>9),A=I+(S^b^D)+R[13]+681279174&4294967295,I=S+(A<<4&4294967295|A>>>28),A=D+(I^S^b)+R[0]+3936430074&4294967295,D=I+(A<<11&4294967295|A>>>21),A=b+(D^I^S)+R[3]+3572445317&4294967295,b=D+(A<<16&4294967295|A>>>16),A=S+(b^D^I)+R[6]+76029189&4294967295,S=b+(A<<23&4294967295|A>>>9),A=I+(S^b^D)+R[9]+3654602809&4294967295,I=S+(A<<4&4294967295|A>>>28),A=D+(I^S^b)+R[12]+3873151461&4294967295,D=I+(A<<11&4294967295|A>>>21),A=b+(D^I^S)+R[15]+530742520&4294967295,b=D+(A<<16&4294967295|A>>>16),A=S+(b^D^I)+R[2]+3299628645&4294967295,S=b+(A<<23&4294967295|A>>>9),A=I+(b^(S|~D))+R[0]+4096336452&4294967295,I=S+(A<<6&4294967295|A>>>26),A=D+(S^(I|~b))+R[7]+1126891415&4294967295,D=I+(A<<10&4294967295|A>>>22),A=b+(I^(D|~S))+R[14]+2878612391&4294967295,b=D+(A<<15&4294967295|A>>>17),A=S+(D^(b|~I))+R[5]+4237533241&4294967295,S=b+(A<<21&4294967295|A>>>11),A=I+(b^(S|~D))+R[12]+1700485571&4294967295,I=S+(A<<6&4294967295|A>>>26),A=D+(S^(I|~b))+R[3]+2399980690&4294967295,D=I+(A<<10&4294967295|A>>>22),A=b+(I^(D|~S))+R[10]+4293915773&4294967295,b=D+(A<<15&4294967295|A>>>17),A=S+(D^(b|~I))+R[1]+2240044497&4294967295,S=b+(A<<21&4294967295|A>>>11),A=I+(b^(S|~D))+R[8]+1873313359&4294967295,I=S+(A<<6&4294967295|A>>>26),A=D+(S^(I|~b))+R[15]+4264355552&4294967295,D=I+(A<<10&4294967295|A>>>22),A=b+(I^(D|~S))+R[6]+2734768916&4294967295,b=D+(A<<15&4294967295|A>>>17),A=S+(D^(b|~I))+R[13]+1309151649&4294967295,S=b+(A<<21&4294967295|A>>>11),A=I+(b^(S|~D))+R[4]+4149444226&4294967295,I=S+(A<<6&4294967295|A>>>26),A=D+(S^(I|~b))+R[11]+3174756917&4294967295,D=I+(A<<10&4294967295|A>>>22),A=b+(I^(D|~S))+R[2]+718787259&4294967295,b=D+(A<<15&4294967295|A>>>17),A=S+(D^(b|~I))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+D&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const S=I-this.blockSize,R=this.C;let b=this.h,D=0;for(;D<I;){if(b==0)for(;D<=S;)s(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<I;)if(R[b++]=x.charCodeAt(D++),b==this.blockSize){s(this,R),b=0;break}}else for(;D<I;)if(R[b++]=x[D++],b==this.blockSize){s(this,R),b=0;break}}this.h=b,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var S=x.length-8;S<x.length;++S)x[S]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,S=0;S<4;++S)for(let R=0;R<32;R+=8)x[I++]=this.g[S]>>>R&255;return x};function o(x,I){var S=h;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=I(x)}function l(x,I){this.h=I;const S=[];let R=!0;for(let b=x.length-1;b>=0;b--){const D=x[b]|0;R&&D==I||(S[b]=D,R=!1)}this.g=S}var h={};function d(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return U(p(-x));const I=[];let S=1;for(let R=0;x>=S;R++)I[R]=x/S|0,S*=4294967296;return new l(I,0)}function y(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return U(y(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=p(Math.pow(I,8));let R=v;for(let D=0;D<x.length;D+=8){var b=Math.min(8,x.length-D);const A=parseInt(x.substring(D,D+b),I);b<8?(b=p(Math.pow(I,b)),R=R.j(b).add(p(A))):(R=R.j(S),R=R.add(p(A)))}return R}var v=d(0),E=d(1),k=d(16777216);t=l.prototype,t.m=function(){if(M(this))return-U(this).m();let x=0,I=1;for(let S=0;S<this.g.length;S++){const R=this.i(S);x+=(R>=0?R:4294967296+R)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(F(this))return"0";if(M(this))return"-"+U(this).toString(x);const I=p(Math.pow(x,6));var S=this;let R="";for(;;){const b=W(S,I).g;S=C(S,b.j(I));let D=((S.g.length>0?S.g[0]:S.h)>>>0).toString(x);if(S=b,F(S))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function F(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function M(x){return x.h==-1}t.l=function(x){return x=C(this,x),M(x)?-1:F(x)?0:1};function U(x){const I=x.g.length,S=[];for(let R=0;R<I;R++)S[R]=~x.g[R];return new l(S,~x.h).add(E)}t.abs=function(){return M(this)?U(this):this},t.add=function(x){const I=Math.max(this.g.length,x.g.length),S=[];let R=0;for(let b=0;b<=I;b++){let D=R+(this.i(b)&65535)+(x.i(b)&65535),A=(D>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);R=A>>>16,D&=65535,A&=65535,S[b]=A<<16|D}return new l(S,S[S.length-1]&-2147483648?-1:0)};function C(x,I){return x.add(U(I))}t.j=function(x){if(F(this)||F(x))return v;if(M(this))return M(x)?U(this).j(U(x)):U(U(this).j(x));if(M(x))return U(this.j(U(x)));if(this.l(k)<0&&x.l(k)<0)return p(this.m()*x.m());const I=this.g.length+x.g.length,S=[];for(var R=0;R<2*I;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(let b=0;b<x.g.length;b++){const D=this.i(R)>>>16,A=this.i(R)&65535,De=x.i(b)>>>16,Yt=x.i(b)&65535;S[2*R+2*b]+=A*Yt,P(S,2*R+2*b),S[2*R+2*b+1]+=D*Yt,P(S,2*R+2*b+1),S[2*R+2*b+1]+=A*De,P(S,2*R+2*b+1),S[2*R+2*b+2]+=D*De,P(S,2*R+2*b+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new l(S,0)};function P(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function O(x,I){this.g=x,this.h=I}function W(x,I){if(F(I))throw Error("division by zero");if(F(x))return new O(v,v);if(M(x))return I=W(U(x),I),new O(U(I.g),U(I.h));if(M(I))return I=W(x,U(I)),new O(U(I.g),I.h);if(x.g.length>30){if(M(x)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var S=E,R=I;R.l(x)<=0;)S=X(S),R=X(R);var b=J(S,1),D=J(R,1);for(R=J(R,2),S=J(S,2);!F(R);){var A=D.add(R);A.l(x)<=0&&(b=b.add(S),D=A),R=J(R,1),S=J(S,1)}return I=C(x,b.j(I)),new O(b,I)}for(b=v;x.l(I)>=0;){for(S=Math.max(1,Math.floor(x.m()/I.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=p(S),A=D.j(I);M(A)||A.l(x)>0;)S-=R,D=p(S),A=D.j(I);F(D)&&(D=E),b=b.add(D),x=C(x,A)}return new O(b,x)}t.B=function(x){return W(this,x).h},t.and=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let R=0;R<I;R++)S[R]=this.i(R)&x.i(R);return new l(S,this.h&x.h)},t.or=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let R=0;R<I;R++)S[R]=this.i(R)|x.i(R);return new l(S,this.h|x.h)},t.xor=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let R=0;R<I;R++)S[R]=this.i(R)^x.i(R);return new l(S,this.h^x.h)};function X(x){const I=x.g.length+1,S=[];for(let R=0;R<I;R++)S[R]=x.i(R)<<1|x.i(R-1)>>>31;return new l(S,x.h)}function J(x,I){const S=I>>5;I%=32;const R=x.g.length-S,b=[];for(let D=0;D<R;D++)b[D]=I>0?x.i(D+S)>>>I|x.i(D+S+1)<<32-I:x.i(D+S);return new l(b,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,M1=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Mr=l}).apply(typeof by<"u"?by:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D1,il,V1,Cc,wp,F1,z1,B1;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var z=u[T];if(!(z in _))break e;_=_[z]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,_){return u.call.apply(u.bind,arguments)}function p(u,m,_){return p=d,p.apply(null,arguments)}function y(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,z,H){for(var ne=Array(arguments.length-2),he=2;he<arguments.length;he++)ne[he-2]=arguments[he];return m.prototype[z].apply(T,ne)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function F(u,m){for(let T=1;T<arguments.length;T++){const z=arguments[T];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const H=z.length||0;u.length=_+H;for(let ne=0;ne<H;ne++)u[_+ne]=z[ne]}else u.push(z)}}class M{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){l.setTimeout(()=>{throw u},0)}function C(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class P{constructor(){this.h=this.g=null}add(m,_){const T=O.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var O=new M(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let X,J=!1,x=new P,I=()=>{const u=Promise.resolve(void 0);X=()=>{u.then(S)}};function S(){for(var u;u=C();){try{u.h.call(u.g)}catch(_){U(_)}var m=O;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,m),l.removeEventListener("test",_,m)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function De(u,m){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(De,b),De.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Yt="closure_listenable_"+(Math.random()*1e6|0),tt=0;function un(u,m,_,T,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=z,this.key=++tt,this.da=this.fa=!1}function G(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function B(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function te(u){const m={};for(const _ in u)m[_]=u[_];return m}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Le(u,m){let _,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(_ in T)u[_]=T[_];for(let H=0;H<ae.length;H++)_=ae[H],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,_,T,z){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ne=le(u,m,T,z);return ne>-1?(m=u[ne],_||(m.fa=!1)):(m=new un(m,this.src,H,!!T,z),m.fa=_,u.push(m)),m};function Ee(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],z=Array.prototype.indexOf.call(T,m,void 0),H;(H=z>=0)&&Array.prototype.splice.call(T,z,1),H&&(G(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function le(u,m,_,T){for(let z=0;z<u.length;++z){const H=u[z];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==T)return z}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Lt={};function kn(u,m,_,T,z){if(T&&T.once)return er(u,m,_,T,z);if(Array.isArray(m)){for(let H=0;H<m.length;H++)kn(u,m[H],_,T,z);return null}return _=ga(_),u&&u[Yt]?u.J(m,_,h(T)?!!T.capture:!!T,z):vi(u,m,_,!1,T,z)}function vi(u,m,_,T,z,H){if(!m)throw Error("Invalid event type");const ne=h(z)?!!z.capture:!!z;let he=Qr(u);if(he||(u[Fe]=he=new Te(u)),_=he.add(m,_,T,ne,H),_.proxy)return _;if(T=Ji(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)D||(z=ne),z===void 0&&(z=!1),u.addEventListener(m.toString(),T,z);else if(u.attachEvent)u.attachEvent(ma(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ji(){function u(_){return m.call(u.src,u.listener,_)}const m=du;return u}function er(u,m,_,T,z){if(Array.isArray(m)){for(let H=0;H<m.length;H++)er(u,m[H],_,T,z);return null}return _=ga(_),u&&u[Yt]?u.K(m,_,h(T)?!!T.capture:!!T,z):vi(u,m,_,!0,T,z)}function zs(u,m,_,T,z){if(Array.isArray(m))for(var H=0;H<m.length;H++)zs(u,m[H],_,T,z);else T=h(T)?!!T.capture:!!T,_=ga(_),u&&u[Yt]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],_=le(m,_,T,z),_>-1&&(G(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Qr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=le(m,_,T,z)),(_=u>-1?m[u]:null)&&pa(_))}function pa(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Yt])Ee(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ma(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Qr(m))?(Ee(_,u),_.h==0&&(_.src=null,m[Fe]=null)):G(u)}}}function ma(u){return u in Lt?Lt[u]:Lt[u]="on"+u}function du(u,m){if(u.da)u=!0;else{m=new De(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&pa(u),u=_.call(T,m)}return u}function Qr(u){return u=u[Fe],u instanceof Te?u:null}var tr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ga(u){return typeof u=="function"?u:(u[tr]||(u[tr]=function(m){return u.handleEvent(m)}),u[tr])}function ht(){R.call(this),this.i=new Te(this),this.M=this,this.G=null}v(ht,R),ht.prototype[Yt]=!0,ht.prototype.removeEventListener=function(u,m,_,T){zs(this,u,m,_,T)};function dt(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new b(m,u);else if(m instanceof b)m.target=m.target||u;else{var z=m;m=new b(T,u),Le(m,z)}z=!0;let H,ne;if(_)for(ne=_.length-1;ne>=0;ne--)H=m.g=_[ne],z=Yr(H,T,!0,m)&&z;if(H=m.g=u,z=Yr(H,T,!0,m)&&z,z=Yr(H,T,!1,m)&&z,_)for(ne=0;ne<_.length;ne++)H=m.g=_[ne],z=Yr(H,T,!1,m)&&z}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)G(_[T]);delete u.g[m],u.h--}}this.G=null},ht.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ht.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Yr(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let H=0;H<m.length;++H){const ne=m[H];if(ne&&!ne.da&&ne.capture==_){const he=ne.listener,Je=ne.ha||ne.src;ne.fa&&Ee(u.i,ne),z=he.call(Je,T)!==!1&&z}}return z&&!T.defaultPrevented}function fu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function pu(u){u.g=fu(()=>{u.g=null,u.i&&(u.i=!1,pu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class md extends R{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:pu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(u){R.call(this),this.h=u,this.g={}}v(wi,R);var _a=[];function ya(u){de(u.g,function(m,_){this.g.hasOwnProperty(_)&&pa(m)},u),u.g={}}wi.prototype.N=function(){wi.Z.N.call(this),ya(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var va=l.JSON.stringify,mu=l.JSON.parse,gu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function _u(){}function wa(){}var Ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bs(){b.call(this,"d")}v(Bs,b);function Ea(){b.call(this,"c")}v(Ea,b);var cn={},yu=null;function Us(){return yu=yu||new ht}cn.Ia="serverreachability";function Ta(u){b.call(this,cn.Ia,u)}v(Ta,b);function nr(u){const m=Us();dt(m,new Ta(m))}cn.STAT_EVENT="statevent";function Ia(u,m){b.call(this,cn.STAT_EVENT,u),this.stat=m}v(Ia,b);function It(u){const m=Us();dt(m,new Ia(m,u))}cn.Ja="timingevent";function vu(u,m){b.call(this,cn.Ja,u),this.size=m}v(vu,b);function Xr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function gd(u,m,_,T,z,H){u.info(function(){if(u.g)if(H){var ne="",he=H.split("&");for(let Oe=0;Oe<he.length;Oe++){var Je=he[Oe].split("=");if(Je.length>1){const st=Je[0];Je=Je[1];const Jt=st.split("_");ne=Jt.length>=2&&Jt[1]=="type"?ne+(st+"="+Je+"&"):ne+(st+"=redacted&")}}}else ne=null;else ne=H;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+m+`
`+_+`
`+ne})}function _d(u,m,_,T,z,H,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+m+`
`+_+`
`+H+" "+ne})}function Zn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+vd(u,_)+(T?" "+T:"")})}function yd(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function vd(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var _=H[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return va(H)}catch{return m}}var js={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hn;function ue(){}v(ue,_u),ue.prototype.g=function(){return new XMLHttpRequest},hn=new ue;function ir(u){return encodeURIComponent(String(u))}function Eu(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Rn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sa}function Sa(){this.i=null,this.g="",this.h=!1}var Hs={},$s={};function Gn(u,m,_){u.M=1,u.A=sr(St(m)),u.u=_,u.R=!0,Pa(u,null)}function Pa(u,m){u.F=Date.now(),Ws(u),u.B=St(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ns(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Sa,u.g=no(u.j,_?m:null,!u.u),u.P>0&&(u.O=new md(p(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(_a[0]=z.toString()),z=_a);for(let H=0;H<z.length;H++){const ne=kn(_,z[H],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?te(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),nr(),gd(u.i,u.v,u.B,u.l,u.S,u.u)}Rn.prototype.ba=function(u){u=u.target;const m=this.O;m&&On(u)==3?m.j():this.Y(u)},Rn.prototype.Y=function(u){try{if(u==this.g)e:{const he=On(this.g),Je=this.g.ya(),Oe=this.g.ca();if(!(he<3)&&(he!=3||this.g&&(this.h.h||this.g.la()||eo(this.g)))){this.K||he!=4||Je==7||(Je==8||Oe<=0?nr(3):nr(2)),Ca(this);var m=this.g.ca();this.X=m;var _=wd(this);if(this.o=m==200,_d(this.i,this.v,this.B,this.l,this.S,he,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var H=T;break t}}H=null}if(u=H)Zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Aa(this,u);else{this.o=!1,this.m=3,It(12),Ti(this),Kn(this);break e}}if(this.R){u=!0;let st;for(;!this.K&&this.C<_.length;)if(st=Ed(this,_),st==$s){he==4&&(this.m=4,It(14),u=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(st==Hs){this.m=4,It(15),Zn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Zn(this.i,this.l,st,null),Aa(this,st);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||_.length!=0||this.h.h||(this.m=1,It(16),u=!1),this.o=this.o&&u,!u)Zn(this.i,this.l,_,"[Invalid Chunked Response]"),Ti(this),Kn(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),os(ne),ne.P=!0,It(11))}}else Zn(this.i,this.l,_,null),Aa(this,_);he==4&&Ti(this),this.o&&!this.K&&(he==4?Au(this.j,this):(this.o=!1,Ws(this)))}else Sd(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Ti(this),Kn(this)}}}catch{}finally{}};function wd(u){if(!Tu(u))return u.g.la();const m=eo(u.g);if(m==="")return"";let _="";const T=m.length,z=On(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ti(u),Kn(u),"";u.h.i=new l.TextDecoder}for(let H=0;H<T;H++)u.h.h=!0,_+=u.h.i.decode(m[H],{stream:!(z&&H==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Tu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ed(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?$s:(_=Number(m.substring(_,T)),isNaN(_)?Hs:(T+=1,T+_>m.length?$s:(m=m.slice(T,T+_),u.C=T+_,m)))}Rn.prototype.cancel=function(){this.K=!0,Ti(this)};function Ws(u){u.T=Date.now()+u.H,xa(u,u.H)}function xa(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xr(p(u.aa,u),m)}function Ca(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Rn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yd(this.i,this.B),this.M!=2&&(nr(),It(17)),Ti(this),this.m=2,Kn(this)):xa(this,this.T-u)};function Kn(u){u.j.I==0||u.K||Au(u.j,u)}function Ti(u){Ca(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ya(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Aa(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||Ii(_.h,u))){if(!u.L&&Ii(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)$t(_),bt(_);else break e;Da(_),It(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Xr(p(_.Va,_),6e3));qs(_.h)<=1&&_.ta&&(_.ta=void 0)}else Nt(_,11)}else if((u.L||_.g==u)&&$t(_),!A(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Oe=z[m];const st=Oe[0];if(!(st<=_.K))if(_.K=st,Oe=Oe[1],_.I==2)if(Oe[0]=="c"){_.M=Oe[1],_.ba=Oe[2];const Jt=Oe[3];Jt!=null&&(_.ka=Jt,_.j.info("VER="+_.ka));const Mn=Oe[4];Mn!=null&&(_.za=Mn,_.j.info("SVER="+_.za));const ti=Oe[5];ti!=null&&typeof ti=="number"&&ti>0&&(T=1.5*ti,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const ni=u.g;if(ni){const ls=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var H=T.h;H.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Zs(H,H.h),H.h=null))}if(T.G){const Ba=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(T.wa=Ba,me(T.J,T.G,Ba))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ne=u;if(T.na=za(T,T.L?T.ba:null,T.W),ne.L){ka(T.h,ne);var he=ne,Je=T.O;Je&&(he.H=Je),he.D&&(Ca(he),Ws(he)),T.g=ne}else xu(T);_.i.length>0&&rs(_)}else Oe[0]!="stop"&&Oe[0]!="close"||Nt(_,7);else _.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Nt(_,7):Oa(_):Oe[0]!="noop"&&_.l&&_.l.qa(Oe),_.A=0)}}nr(4)}catch{}}var Td=class{constructor(u,m){this.g=u,this.map=m}};function Iu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Su(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qs(u){return u.h?1:u.g?u.g.size:0}function Ii(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Zs(u,m){u.g?u.g.add(m):u.h=m}function ka(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Iu.prototype.cancel=function(){if(this.i=rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rr(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return k(u.i)}var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function je(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let z,H=null;T>=0?(z=u[_].substring(0,T),H=u[_].substring(T+1)):z=u[_],m(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function dn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof dn?(this.l=u.l,wn(this,u.j),this.o=u.o,this.g=u.g,Si(this,u.u),this.h=u.h,ye(this,Qs(u.i)),this.m=u.m):u&&(m=String(u).match(ke))?(this.l=!1,wn(this,m[1]||"",!0),this.o=Qn(m[2]||""),this.g=Qn(m[3]||"",!0),Si(this,m[4]),this.h=Qn(m[5]||"",!0),ye(this,m[6]||"",!0),this.m=Qn(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}dn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(yt(m,es,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(yt(m,es,!0),"@"),u.push(ir(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(yt(_,_.charAt(0)=="/"?Xe:Pi,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",yt(_,ts)),u.join("")},dn.prototype.resolve=function(u){const m=St(this);let _=!!u.j;_?wn(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Si(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=m.h.lastIndexOf("/");z!=-1&&(T=m.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ne=0;ne<z.length;){const he=z[ne++];he=="."?T&&ne==z.length&&H.push(""):he==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),T&&ne==z.length&&H.push("")):(H.push(he),T=!0)}T=H.join("/")}else T=z}return _?m.h=T:_=u.i.toString()!=="",_?ye(m,Qs(u.i)):_=!!u.m,_&&(m.m=u.m),m};function St(u){return new dn(u)}function wn(u,m,_){u.j=_?Qn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Si(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ye(u,m,_){m instanceof Ln?(u.i=m,Ys(u.i,u.l)):(_||(m=yt(m,xi)),u.i=new Ln(m,u.l))}function me(u,m,_){u.i.set(m,_)}function sr(u){return me(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Qn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yt(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Id),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Id(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var es=/[#\/\?@]/g,Pi=/[#\?:]/g,Xe=/[#\?]/g,xi=/[#\?@]/g,ts=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function bn(u){u.g||(u.g=new Map,u.h=0,u.i&&je(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=Ln.prototype,t.add=function(u,m){bn(this),this.i=null,u=Yn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function or(u,m){bn(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Gs(u,m){return bn(u),m=Yn(u,m),u.g.has(m)}t.forEach=function(u,m){bn(this),this.g.forEach(function(_,T){_.forEach(function(z){u.call(m,z,T,this)},this)},this)};function Ks(u,m){bn(u);let _=[];if(typeof m=="string")Gs(u,m)&&(_=_.concat(u.g.get(Yn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}t.set=function(u,m){return bn(this),this.i=null,u=Yn(this,u),Gs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Ks(this,u),u.length>0?String(u[0]):m):m};function ns(u,m,_){or(u,m),_.length>0&&(u.i=null,u.g.set(Yn(u,m),k(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const z=ir(_);_=Ks(this,_);for(let H=0;H<_.length;H++){let ne=z;_[H]!==""&&(ne+="="+ir(_[H])),u.push(ne)}}return this.i=u.join("&")};function Qs(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ys(u,m){m&&!u.j&&(bn(u),u.i=null,u.g.forEach(function(_,T){const z=T.toLowerCase();T!=z&&(or(this,T),ns(this,z,_))},u)),u.j=m}function Pu(u,m){const _=new Jr;if(l.Image){const T=new Image;T.onload=y(Xn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=y(Xn,_,"TestLoadImage: error",!1,m,T),T.onabort=y(Xn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=y(Xn,_,"TestLoadImage: timeout",!1,m,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Ra(u,m){const _=new Jr,T=new AbortController,z=setTimeout(()=>{T.abort(),Xn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(z),H.ok?Xn(_,"TestPingServer: ok",!0,m):Xn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),Xn(_,"TestPingServer: error",!1,m)})}function Xn(u,m,_,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(_)}catch{}}function ve(){this.g=new gu}function Xt(u){this.i=u.Sb||null,this.h=u.ab||!1}v(Xt,_u),Xt.prototype.g=function(){return new Ne(this.i,this.h)};function Ne(u,m){ht.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ne,ht),t=Ne.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ai(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;La(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function La(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ci(this):Ai(this),this.readyState==3&&La(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Ci(this))},t.Na=function(u){this.g&&(this.response=u,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ai(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ne.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xs(u){let m="";return de(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Nn(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Xs(_),typeof u=="string"?_!=null&&ir(_):me(u,m,_))}function ze(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ze,ht);var is=/^https?$/i,ft=["POST","PUT"];t=ze.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hn.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Jn(this,H);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)_.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())_.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(ft,m,void 0)>=0)||T||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of _)this.g.setRequestHeader(H,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Jn(this,H)}};function Jn(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ba(u),Js(u)}function ba(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Na(this):this.Xa())},t.Xa=function(){Na(this)};function Na(u){if(u.h&&typeof o<"u"){if(u.v&&On(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),On(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=H===0){let ne=String(u.D).match(ke)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),T=!is.test(ne?ne.toLowerCase():"")}_=T}if(_)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var z=On(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",ba(u)}}finally{Js(u)}}}}function Js(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||dt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}t.ca=function(){try{return On(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),mu(m)}};function eo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sd(u){const m={};u=(u.g&&On(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(A(u[T]))continue;var _=Eu(u[T]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[z]||[];m[z]=H,H.push(_)}B(m,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Se(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ar("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ar("baseRetryDelayMs",5e3,u),this.Za=ar("retryDelaySeedMs",1e4,u),this.Ta=ar("forwardChannelMaxRetries",2,u),this.va=ar("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Iu(u&&u.concurrentRequestLimit),this.Ba=new ve,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Se.prototype,t.ka=8,t.I=1,t.connect=function(u,m,_,T){It(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=za(this,null,this.W),rs(this)};function Oa(u){if(lr(u),u.I==3){var m=u.V++,_=St(u.J);if(me(_,"SID",u.M),me(_,"RID",m),me(_,"TYPE","terminate"),ss(u,_),m=new Rn(u,u.j,m),m.M=2,m.A=sr(St(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=m.A,_=!0),_||(m.g=no(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ws(m)}Fa(u)}function bt(u){u.g&&(os(u),u.g.cancel(),u.g=null)}function lr(u){bt(u),u.v&&(l.clearTimeout(u.v),u.v=null),$t(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function rs(u){if(!Su(u.h)&&!u.m){u.m=!0;var m=u.Ea;X||I(),J||(X(),J=!0),x.add(m,u),u.D=0}}function Pd(u,m){return qs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xr(p(u.Ea,u,m),Va(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Rn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=te(H),Le(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ma(this,z,m),_=St(this.J),me(_,"RID",u),me(_,"CVER",22),this.G&&me(_,"X-HTTP-Session-Id",this.G),ss(this,_),H&&(this.R?m="headers="+ir(Xs(H))+"&"+m:this.u&&Nn(_,this.u,H)),Zs(this.h,z),this.Ra&&me(_,"TYPE","init"),this.S?(me(_,"$req",m),me(_,"SID","null"),z.U=!0,Gn(z,_,null)):Gn(z,_,m),this.I=2}}else this.I==3&&(u?to(this,u):this.i.length==0||Su(this.h)||to(this))};function to(u,m){var _;m?_=m.l:_=u.V++;const T=St(u.J);me(T,"SID",u.M),me(T,"RID",_),me(T,"AID",u.K),ss(u,T),u.u&&u.o&&Nn(T,u.u,u.o),_=new Rn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ma(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Zs(u.h,_),Gn(_,T,m)}function ss(u,m){u.H&&de(u.H,function(_,T){me(m,T,_)}),u.l&&de({},function(_,T){me(m,T,_)})}function Ma(u,m,_){_=Math.min(u.i.length,_);const T=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let he=-1;for(;;){const Je=["count="+_];he==-1?_>0?(he=z[0].g,Je.push("ofs="+he)):he=0:Je.push("ofs="+he);let Oe=!0;for(let st=0;st<_;st++){var H=z[st].g;const Jt=z[st].map;if(H-=he,H<0)he=Math.max(0,z[st].g-100),Oe=!1;else try{H="req"+H+"_"||"";try{var ne=Jt instanceof Map?Jt:Object.entries(Jt);for(const[Mn,ti]of ne){let ni=ti;h(ti)&&(ni=va(ti)),Je.push(H+Mn+"="+encodeURIComponent(ni))}}catch(Mn){throw Je.push(H+"type="+encodeURIComponent("_badmap")),Mn}}catch{T&&T(Jt)}}if(Oe){ne=Je.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),m.G=u,ne}function xu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;X||I(),J||(X(),J=!0),x.add(m,u),u.A=0}}function Da(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xr(p(u.Da,u),Va(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xr(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),bt(this),Cu(this))};function os(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function Cu(u){u.g=new Rn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=St(u.na);me(m,"RID","rpc"),me(m,"SID",u.M),me(m,"AID",u.K),me(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&me(m,"TO",u.ia),me(m,"TYPE","xmlhttp"),ss(u,m),u.u&&u.o&&Nn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=sr(St(m)),_.u=null,_.R=!0,Pa(_,u)}t.Va=function(){this.C!=null&&(this.C=null,bt(this),Da(this),It(19))};function $t(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Au(u,m){var _=null;if(u.g==m){$t(u),os(u),u.g=null;var T=2}else if(Ii(u.h,m))_=m.G,ka(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;T=Us(),dt(T,new vu(T,_)),rs(u)}else xu(u);else if(z=m.m,z==3||z==0&&m.X>0||!(T==1&&Pd(u,m)||T==2&&Da(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:Nt(u,5);break;case 4:Nt(u,10);break;case 3:Nt(u,6);break;default:Nt(u,2)}}}function Va(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Nt(u,m){if(u.j.info("Error code "+m),m==2){var _=p(u.bb,u),T=u.Ua;const z=!T;T=new dn(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wn(T,"https"),sr(T),z?Pu(T.toString(),_):Ra(T.toString(),_)}else It(2);u.I=0,u.l&&u.l.pa(m),Fa(u),lr(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Fa(u){if(u.I=0,u.ja=[],u.l){const m=rr(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function za(u,m,_){var T=_ instanceof dn?St(_):new dn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Si(T,T.u);else{var z=l.location;T=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const H=new dn(null);T&&wn(H,T),m&&(H.g=m),z&&Si(H,z),_&&(H.h=_),T=H}return _=u.G,m=u.wa,_&&m&&me(T,_,m),me(T,"VER",u.ka),ss(u,T),T}function no(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ze(new Xt({ab:_})):new ze(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}t=ku.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function as(){}as.prototype.g=function(u,m){return new Ot(u,m)};function Ot(u,m){ht.call(this),this.g=new Se(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}v(Ot,ht),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Oa(this.g)},Ot.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=va(u),u=_);m.i.push(new Td(m.Ya++,u)),m.I==3&&rs(m)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Oa(this.g),delete this.g,Ot.Z.N.call(this)};function Ru(u){Bs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Ru,Bs);function Lu(){Ea.call(this),this.status=1}v(Lu,Ea);function ei(u){this.g=u}v(ei,ku),ei.prototype.ra=function(){dt(this.g,"a")},ei.prototype.qa=function(u){dt(this.g,new Ru(u))},ei.prototype.pa=function(u){dt(this.g,new Lu)},ei.prototype.oa=function(){dt(this.g,"b")},as.prototype.createWebChannel=as.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,B1=function(){return new as},z1=function(){return Us()},F1=cn,wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,Cc=js,wu.COMPLETE="complete",V1=wu,wa.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",ht.prototype.listen=ht.prototype.J,il=wa,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,D1=ze}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const Ny="@firebase/firestore",Oy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Bm("@firebase/firestore");function co(){return Ls.logLevel}function se(t,...e){if(Ls.logLevel<=xe.DEBUG){const n=e.map(Hm);Ls.debug(`Firestore (${oa}): ${t}`,...n)}}function Zi(t,...e){if(Ls.logLevel<=xe.ERROR){const n=e.map(Hm);Ls.error(`Firestore (${oa}): ${t}`,...n)}}function Zo(t,...e){if(Ls.logLevel<=xe.WARN){const n=e.map(Hm);Ls.warn(`Firestore (${oa}): ${t}`,...n)}}function Hm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,U1(t,i,n)}function U1(t,e,n){let i=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Zi(i),new Error(i)}function Me(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||U1(e,s,i)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class MA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DA{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ui,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ui)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string",31837,{l:i}),new j1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class VA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new VA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class My{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new My(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=BA(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ce(t,e){return t<e?-1:t>e?1:0}function Ep(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return cf(s)===cf(o)?Ce(s,o):cf(s)?1:-1}return Ce(t.length,e.length)}const UA=55296,jA=57343;function cf(t){const e=t.charCodeAt(0);return e>=UA&&e<=jA}function Go(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="__name__";class oi{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&pe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=oi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ce(e.length,n.length)}static compareSegments(e,n){const i=oi.isNumericId(e),s=oi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?oi.extractNumericId(e).compare(oi.extractNumericId(n)):Ep(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class Be extends oi{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const HA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends oi{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return HA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dy}static keyField(){return new Ct([Dy])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ie(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ie(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e,n){if(!n)throw new ie(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $A(t,e,n,i){if(e===!0&&i===!0)throw new ie(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vy(t){if(!ce.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fy(t){if(ce.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function _i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gh(t);throw new ie(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function nu(t,e){if(!$1(t))throw new ie(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ie(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-62135596800,By=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*By);return new We(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zy)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/By}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nu(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:ct("string",We._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new We(0,0))}static max(){return new _e(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=-1;function WA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new zr(s,ce.empty(),e)}function qA(t){return new zr(t.readTime,t.key,jl)}class zr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new zr(_e.min(),ce.empty(),jl)}static max(){return new zr(_e.max(),ce.empty(),jl)}}function ZA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==GA)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(s=>s?K.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new K((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function QA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function Qh(t){return t==null}function ch(t){return t===0&&1/t==-1/0}function YA(t){return typeof t=="number"&&Number.isInteger(t)&&!ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="";function XA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Uy(e)),e=JA(t.get(n),e);return Uy(e)}function JA(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case W1:n+="";break;default:n+=o}}return n}function Uy(t){return t+W1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??xt.RED,this.left=s??xt.EMPTY,this.right=o??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new xt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new mn([])}unionWith(e){let n=new _t(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Z1("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=ek.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="server_timestamp",K1="__type__",Q1="__previous_value__",Y1="__local_write_time__";function qm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K1])==null?void 0:i.stringValue)===G1}function Yh(t){const e=t.mapValue.fields[Q1];return qm(e)?Yh(e):e}function Hl(t){const e=Br(t.mapValue.fields[Y1].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,i,s,o,l,h,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const hh="(default)";class $l{constructor(e,n){this.projectId=e,this.database=n||hh}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__type__",J1="__max__",uc={mapValue:{fields:{__type__:{stringValue:J1}}}},eE="__vector__",dh="value";function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qm(t)?4:ik(t)?9007199254740991:nk(t)?10:11:pe(28295,{value:t})}function yi(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hl(t).isEqual(Hl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Br(s.timestampValue),h=Br(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ur(s.bytesValue).isEqual(Ur(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return nt(s.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nt(s.integerValue)===nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=nt(s.doubleValue),h=nt(o.doubleValue);return l===h?ch(l)===ch(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(jy(l)!==jy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!yi(l[d],h[d])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function Wl(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=jr(t),i=jr(e);if(n!==i)return Ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return $y(t.timestampValue,e.timestampValue);case 4:return $y(Hl(t),Hl(e));case 5:return Ep(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ur(o),d=Ur(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Ce(h[p],d[p]);if(y!==0)return y}return Ce(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ce(nt(o.latitude),nt(l.latitude));return h!==0?h:Ce(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,k,F,M;const h=o.fields||{},d=l.fields||{},p=(E=h[dh])==null?void 0:E.arrayValue,y=(k=d[dh])==null?void 0:k.arrayValue,v=Ce(((F=p==null?void 0:p.values)==null?void 0:F.length)||0,((M=y==null?void 0:y.values)==null?void 0:M.length)||0);return v!==0?v:Wy(p,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===uc.mapValue&&l===uc.mapValue)return 0;if(o===uc.mapValue)return 1;if(l===uc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const E=Ep(d[v],y[v]);if(E!==0)return E;const k=Ko(h[d[v]],p[y[v]]);if(k!==0)return k}return Ce(d.length,y.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function $y(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Br(t),i=Br(e),s=Ce(n.seconds,i.seconds);return s!==0?s:Ce(n.nanos,i.nanos)}function Wy(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Ko(n[s],i[s]);if(o)return o}return Ce(n.length,i.length)}function Qo(t){return Tp(t)}function Tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Br(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Tp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Tp(n.fields[l])}`;return s+"}"}(t.mapValue):pe(61005,{value:t})}function Ac(t){switch(jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yh(t);return e?16+Ac(e):16;case 5:return 2*t.stringValue.length;case 6:return Ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Ac(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Gr(i.fields,(o,l)=>{s+=o.length+Ac(l)}),s}(t.mapValue);default:throw pe(13486,{value:t})}}function qy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ip(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function Zy(t){return!!t&&"nullValue"in t}function Gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kc(t){return!!t&&"mapValue"in t}function nk(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[X1])==null?void 0:i.stringValue)===eE}function _l(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=_l(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_l(t.arrayValue.values[n]);return e}return{...t}}function ik(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(n)}setAll(e){let n=Ct.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=_l(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];kc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Gr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new rn(_l(this.value))}}function tE(t){const e=[];return Gr(t.fields,(n,i)=>{const s=new Ct([n]);if(kc(i)){const o=tE(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ut(e,0,_e.min(),_e.min(),_e.min(),rn.empty(),0)}static newFoundDocument(e,n,i,s){return new Ut(e,1,n,_e.min(),i,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,_e.min(),_e.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,_e.min(),_e.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.position=e,this.inclusive=n}}function Ky(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(l.referenceValue),n.key):i=Ko(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function rk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{}class ut extends nE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ok(e,n,i):n==="array-contains"?new uk(e,i):n==="in"?new ck(e,i):n==="not-in"?new hk(e,i):n==="array-contains-any"?new dk(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ak(e,i):new lk(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends nE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qn(e,n)}matches(e){return iE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iE(t){return t.op==="and"}function rE(t){return sk(t)&&iE(t)}function sk(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function Sp(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(rE(t))return t.filters.map(e=>Sp(e)).join(",");{const e=t.filters.map(n=>Sp(n)).join(",");return`${t.op}(${e})`}}function sE(t,e){return t instanceof ut?function(i,s){return s instanceof ut&&i.op===s.op&&i.field.isEqual(s.field)&&yi(i.value,s.value)}(t,e):t instanceof qn?function(i,s){return s instanceof qn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&sE(l,s.filters[h]),!0):!1}(t,e):void pe(19439)}function oE(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(oE).join(" ,")+"}"}(t):"Filter"}class ok extends ut{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class ak extends ut{constructor(e,n){super(e,"in",n),this.keys=aE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lk extends ut{constructor(e,n){super(e,"not-in",n),this.keys=aE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class uk extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&Wl(n.arrayValue,this.value)}}class ck extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class hk extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wl(this.value.arrayValue,n)}}class dk extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function Yy(t,e=null,n=[],i=[],s=null,o=null,l=null){return new fk(t,e,n,i,s,o,l)}function Gm(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Sp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qo(i)).join(",")),e.Te=n}return e.Te}function Km(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function Pp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pk(t,e,n,i,s,o,l,h){return new iu(t,e,n,i,s,o,l,h)}function Qm(t){return new iu(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lE(t){return t.collectionGroup!==null}function yl(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new _t(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ph(o,i))}),n.has(Ct.keyField().canonicalString())||e.Ie.push(new ph(Ct.keyField(),i))}return e.Ie}function hi(t){const e=we(t);return e.Ee||(e.Ee=mk(e,yl(t))),e.Ee}function mk(t,e){if(t.limitType==="F")return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ph(s.field,o)});const n=t.endAt?new fh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new fh(t.startAt.position,t.startAt.inclusive):null;return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function xp(t,e){const n=t.filters.concat([e]);return new iu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cp(t,e,n){return new iu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xh(t,e){return Km(hi(t),hi(e))&&t.limitType===e.limitType}function uE(t){return`${Gm(hi(t))}|lt:${t.limitType}`}function ho(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>oE(s)).join(", ")}]`),Qh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Qo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Qo(s)).join(",")),`Target(${i})`}(hi(t))}; limitType=${t.limitType})`}function Jh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of yl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=Ky(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,yl(i),s)||i.endAt&&!function(l,h,d){const p=Ky(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,yl(i),s))}(t,e)}function gk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cE(t){return(e,n)=>{let i=!1;for(const s of yl(t)){const o=_k(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function _k(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Ko(d,p):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return q1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Ye(ce.comparator);function Gi(){return yk}const hE=new Ye(ce.comparator);function rl(...t){let e=hE;for(const n of t)e=e.insert(n.key,n);return e}function dE(t){let e=hE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function _s(){return vl()}function fE(){return vl()}function vl(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const vk=new Ye(ce.comparator),wk=new _t(ce.comparator);function Ae(...t){let e=wk;for(const n of t)e=e.add(n);return e}const Ek=new _t(Ce);function Tk(){return Ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function pE(t){return{integerValue:""+t}}function Ik(t,e){return YA(e)?pE(e):Ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function Sk(t,e,n){return t instanceof mh?function(s,o){const l={fields:{[K1]:{stringValue:G1},[Y1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&qm(o)&&(o=Yh(o)),o&&(l.fields[Q1]=o),{mapValue:l}}(n,e):t instanceof ql?gE(t,e):t instanceof Zl?_E(t,e):function(s,o){const l=mE(s,o),h=Jy(l)+Jy(s.Ae);return Ip(l)&&Ip(s.Ae)?pE(h):Ym(s.serializer,h)}(t,e)}function Pk(t,e,n){return t instanceof ql?gE(t,e):t instanceof Zl?_E(t,e):n}function mE(t,e){return t instanceof gh?function(i){return Ip(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class mh extends ed{}class ql extends ed{constructor(e){super(),this.elements=e}}function gE(t,e){const n=yE(e);for(const i of t.elements)n.some(s=>yi(s,i))||n.push(i);return{arrayValue:{values:n}}}class Zl extends ed{constructor(e){super(),this.elements=e}}function _E(t,e){let n=yE(e);for(const i of t.elements)n=n.filter(s=>!yi(s,i));return{arrayValue:{values:n}}}class gh extends ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Jy(t){return nt(t.integerValue||t.doubleValue)}function yE(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xk(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof ql&&s instanceof ql||i instanceof Zl&&s instanceof Zl?Go(i.elements,s.elements,yi):i instanceof gh&&s instanceof gh?yi(i.Ae,s.Ae):i instanceof mh&&s instanceof mh}(t.transform,e.transform)}class Ck{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class td{}function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xm(t.key,$n.none()):new ru(t.key,t.data,$n.none());{const n=t.data,i=rn.empty();let s=new _t(Ct.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Kr(t.key,i,new mn(s.toArray()),$n.none())}}function Ak(t,e,n){t instanceof ru?function(s,o,l){const h=s.value.clone(),d=tv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(s,o,l){if(!Rc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=tv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(wE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function wl(t,e,n,i){return t instanceof ru?function(o,l,h,d){if(!Rc(o.precondition,l))return h;const p=o.value.clone(),y=nv(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Kr?function(o,l,h,d){if(!Rc(o.precondition,l))return h;const p=nv(o.fieldTransforms,d,l),y=l.data;return y.setAll(wE(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,l,h){return Rc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function kk(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=mE(i.transform,s||null);o!=null&&(n===null&&(n=rn.empty()),n.set(i.field,o))}return n||null}function ev(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Go(i,s,(o,l)=>xk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ru extends td{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kr extends td{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function tv(t,e,n){const i=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,Pk(l,h,n[s]))}return i}function nv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,Sk(o,l,e))}return i}class Xm extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rk extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ak(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=fE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=vE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,i)=>ev(n,i))&&Go(this.baseMutations,e.baseMutations,(n,i)=>ev(n,i))}}class Jm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Me(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return vk}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Jm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Re;function Ok(t){switch(t){case Z.OK:return pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function EE(t){if(t===void 0)return Zi("GRPC error has no .code"),Z.UNKNOWN;switch(t){case at.OK:return Z.OK;case at.CANCELLED:return Z.CANCELLED;case at.UNKNOWN:return Z.UNKNOWN;case at.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case at.INTERNAL:return Z.INTERNAL;case at.UNAVAILABLE:return Z.UNAVAILABLE;case at.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case at.NOT_FOUND:return Z.NOT_FOUND;case at.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case at.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case at.ABORTED:return Z.ABORTED;case at.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case at.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case at.DATA_LOSS:return Z.DATA_LOSS;default:return pe(39323,{code:t})}}(Re=at||(at={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new Mr([4294967295,4294967295],0);function iv(t){const e=Mk().encode(t),n=new M1;return n.update(e),new Uint8Array(n.digest())}function rv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mr([n,i],0),new Mr([s,o],0)]}class eg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sl(`Invalid padding: ${n}`);if(i<0)throw new sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Mr.fromNumber(i)));return s.compare(Dk)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iv(e),[i,s]=rv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new eg(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=iv(e),[i,s]=rv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nd(_e.min(),s,new Ye(Ce),Gi(),Ae())}}class su{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new su(i,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class TE{constructor(e,n){this.targetId=e,this.Ce=n}}class IE{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class sv{constructor(){this.ve=0,this.Fe=ov(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),i=Ae();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:pe(38017,{changeType:o})}}),new su(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=ov()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Vk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gi(),this.Je=cc(),this.He=cc(),this.Ye=new Ye(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Pp(o))if(i===0){const l=new ce(o.path);this.et(n,l,Ut.newNoDocument(l,_e.min()))}else Me(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Ur(i).toUint8Array()}catch(d){if(d instanceof Z1)return Zo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new eg(l,s,o)}catch(d){return Zo(d instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Pp(h.target)){const d=new ce(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ut.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Ae();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new nd(e,n,this.Ye,this.je,i);return this.je=Gi(),this.Je=cc(),this.He=cc(),this.Ye=new Ye(Ce),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cc(){return new Ye(ce.comparator)}function ov(){return new Ye(ce.comparator)}const Fk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),zk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Bk=(()=>({and:"AND",or:"OR"}))();class Uk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ap(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function _h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jk(t,e){return _h(t,e.toTimestamp())}function di(t){return Me(!!t,49232),_e.fromTimestamp(function(n){const i=Br(n);return new We(i.seconds,i.nanos)}(t))}function tg(t,e){return kp(t,e).canonicalString()}function kp(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PE(t){const e=Be.fromString(t);return Me(RE(e),10190,{key:e.toString()}),e}function Rp(t,e){return tg(t.databaseId,e.path)}function hf(t,e){const n=PE(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(CE(n))}function xE(t,e){return tg(t.databaseId,e)}function Hk(t){const e=PE(t);return e.length===4?Be.emptyPath():CE(e)}function Lp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CE(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function av(t,e,n){return{name:Rp(t,e),fields:n.value.mapValue.fields}}function $k(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Me(y===void 0||typeof y=="string",58123),Rt.fromBase64String(y||"")):(Me(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Rt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?Z.UNKNOWN:EE(p.code);return new ie(y,p.message||"")}(l);n=new IE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=hf(t,i.document.name),o=di(i.document.updateTime),l=i.document.createTime?di(i.document.createTime):_e.min(),h=new rn({mapValue:{fields:i.document.fields}}),d=Ut.newFoundDocument(s,o,l,h),p=i.targetIds||[],y=i.removedTargetIds||[];n=new Lc(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=hf(t,i.document),o=i.readTime?di(i.readTime):_e.min(),l=Ut.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Lc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=hf(t,i.document),o=i.removedTargetIds||[];n=new Lc([],o,s,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new Nk(s,o),h=i.targetId;n=new TE(h,l)}}return n}function Wk(t,e){let n;if(e instanceof ru)n={update:av(t,e.key,e.value)};else if(e instanceof Xm)n={delete:Rp(t,e.key)};else if(e instanceof Kr)n={update:av(t,e.key,e.data),updateMask:eR(e.fieldMask)};else{if(!(e instanceof Rk))return pe(16599,{Vt:e.type});n={verify:Rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof mh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ql)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Zl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof gh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw pe(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:jk(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(t,e.precondition)),n}function qk(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?di(s.updateTime):di(o);return l.isEqual(_e.min())&&(l=di(o)),new Ck(l,s.transformResults||[])}(n,e))):[]}function Zk(t,e){return{documents:[xE(t,e.path)]}}function Gk(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=xE(t,s);const o=function(p){if(p.length!==0)return kE(qn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:fo(E.field),direction:Yk(E.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Ap(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function Kk(t){let e=Hk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Me(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(v){const E=AE(v);return E instanceof qn&&rE(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(E=>function(F){return new ph(po(F.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,Qh(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(v){const E=!!v.before,k=v.values||[];return new fh(k,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,k=v.values||[];return new fh(k,E)}(n.endAt)),pk(e,s,l,o,h,"F",d,p)}function Qk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=po(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=po(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=po(n.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=po(n.unaryFilter.field);return ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ut.create(po(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(i=>AE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function Yk(t){return Fk[t]}function Xk(t){return zk[t]}function Jk(t){return Bk[t]}function fo(t){return{fieldPath:t.canonicalString()}}function po(t){return Ct.fromServerFormat(t.fieldPath)}function kE(t){return t instanceof ut?function(n){if(n.op==="=="){if(Gy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(Zy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(Zy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:Xk(n.op),value:n.value}}}(t):t instanceof qn?function(n){const i=n.getFilters().map(s=>kE(s));return i.length===1?i[0]:{compositeFilter:{op:Jk(n.op),filters:i}}}(t):pe(54877,{filter:t})}function eR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,i,s,o=_e.min(),l=_e.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.yt=e}}function nR(t){const e=Kk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.Cn=new rR}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(zr.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class rR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new _t(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new _t(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(LE,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="LruGarbageCollector",sR=1048576;function cv([t,e],[n,i]){const s=Ce(t,n);return s===0?Ce(e,i):s}class oR{constructor(e){this.Ir=e,this.buffer=new _t(cv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();cv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aR{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(uv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){la(n)?se(uv,"Ignoring IndexedDB error during garbage collection: ",n):await aa(n)}await this.Vr(3e5)})}}class lR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Kh.ce);const i=new oR(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(lv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),co()<=xe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function uR(t,e){return new lR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&wl(i.mutation,s,mn.empty(),We.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ae()){const s=_s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=rl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Gi();const l=vl(),h=function(){return vl()}();return n.forEach((d,p)=>{const y=i.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Kr)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),wl(y.mutation,p,y.mutation.getFieldMask(),We.now())):l.set(p.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>h.set(p,new hR(y,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=vl();let s=new Ye((l,h)=>l-h),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=i.get(d)||mn.empty();y=h.applyToLocalView(p,y),i.set(d,y);const v=(s.get(h.batchId)||Ae()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=fE();y.forEach(E=>{if(!o.has(E)){const k=vE(n.get(E),i.get(E));k!==null&&v.set(E,k),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return K.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):K.resolve(_s());let h=jl,d=o;return l.next(p=>K.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{d=d.insert(y,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ae())).next(y=>({batchId:h,changes:dE(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let s=rl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=rl();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(v,E){return new iu(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(y=>{y.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Ut.newInvalidDocument(y)))});let h=rl();return l.forEach((d,p)=>{const y=o.get(d);y!==void 0&&wl(y.mutation,p,mn.empty(),We.now()),Jh(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:di(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:nR(s.bundledQuery),readTime:di(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.overlays=new Ye(ce.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_s();return K.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const s=_s(),o=n.length+1,l=new ce(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ye((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=_s(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=_s(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return K.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new bk(n,i));let o=this.qr.get(n);o===void 0&&(o=Ae(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.Qr=new _t(wt.$r),this.Ur=new _t(wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new wt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ce(new Be([])),i=new wt(n,e),s=new wt(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new Be([])),i=new wt(n,e),s=new wt(n,e+1);let o=Ae();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(wt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Lk(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Wm:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(Ce);return n.forEach(s=>{const o=new wt(s,0),l=new wt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const l=new wt(new ce(o),0);let h=new _t(Ce);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),K.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,s=>{const o=new wt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new wt(n,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.ri=e,this.docs=function(){return new Ye(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let i=Gi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ut.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Gi();const l=n.path,h=new ce(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||ZA(qA(y),i)<=0||(s.has(y.key)||Jh(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,s){pe(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new yR(this)}getSize(e){return K.resolve(this.size)}}class yR extends cR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.persistence=e,this.si=new Vs(n=>Gm(n),Km),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new ng,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kh(0),this.li=!1,this.li=!0,this.hi=new mR,this.referenceDelegate=e(this),this.Pi=new vR(this),this.indexManager=new iR,this.remoteDocumentCache=function(s){return new _R(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new tR(n),this.Ii=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new gR(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const s=new wR(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class wR extends KA{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new ng,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const s=ce.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new Vs(i=>XA(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=uR(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?K.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ac(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ae(),s=Ae();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new rg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gC()?8:QA(Ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new ER;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(co()<=xe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(co()<=xe.DEBUG&&se("QueryEngine","Query:",ho(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(co()<=xe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):K.resolve())}ys(e,n){if(Xy(n))return K.resolve(null);let i=hi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cp(n,null,"F"),i=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ae(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Cp(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,i,s){return Xy(n)||s.isEqual(_e.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?K.resolve(null):(co()<=xe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ho(n)),this.vs(e,l,n,WA(s,jl)).next(h=>h))})}Ds(e,n){let i=new _t(cE(e));return n.forEach((s,o)=>{Jh(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return co()<=xe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(e,n,zr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LocalStore",IR=3e8;class SR{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Ce),this.xs=new Vs(o=>Gm(o),Km),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function PR(t,e,n,i){return new SR(t,e,n,i)}async function NE(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ae();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function xR(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,E=v.keys();let k=K.resolve();return E.forEach(F=>{k=k.next(()=>y.getEntry(d,F)).next(M=>{const U=p.docVersions.get(F);Me(U!==null,48541),M.version.compareTo(U)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ae();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function OE(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function CR(t,e){const n=we(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((y,v)=>{const E=s.get(v);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,y.addedDocuments,v)));let k=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(Rt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,i)),s=s.insert(v,k),function(M,U,C){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=IR?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(E,k,y)&&h.push(n.Pi.updateTargetData(o,k))});let d=Gi(),p=Ae();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(AR(o,l,e.documentUpdates).next(y=>{d=y.ks,p=y.qs})),!i.isEqual(_e.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function AR(t,e,n){let i=Ae(),s=Ae();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Gi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(_e.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):se(sg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function kR(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function RR(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,K.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new Ir(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function bp(t,e,n){const i=we(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!la(l))throw l;se(sg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function hv(t,e,n){const i=we(t);let s=_e.min(),o=Ae();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const v=we(d),E=v.xs.get(y);return E!==void 0?K.resolve(v.Ms.get(E)):v.Pi.getTargetData(p,y)}(i,l,hi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:_e.min(),n?o:Ae())).next(h=>(LR(i,gk(e),h),{documents:h,Qs:o})))}function LR(t,e,n){let i=t.Os.get(e)||_e.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class dv{constructor(){this.activeTargetIds=Tk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bR{constructor(){this.Mo=new dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="ConnectivityMonitor";class pv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(fv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Np(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",OR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===hh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=Np(),h=this.zo(e,n.toUriEncodedString());se(df,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),y=ra(p);return this.Jo(e,h,d,i,y).then(v=>(se(df,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Zo(df,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=OR[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class VR extends MR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=Np();return new Promise((h,d)=>{const p=new D1;p.setWithCredentials(!0),p.listenOnce(V1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Cc.NO_ERROR:const v=p.getResponseJson();se(Vt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Cc.TIMEOUT:se(Vt,`RPC '${e}' ${l} timed out`),d(new ie(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const E=p.getStatus();if(se(Vt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const F=k==null?void 0:k.error;if(F&&F.status&&F.message){const M=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(F.status);d(new ie(M,F.message))}else d(new ie(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ie(Z.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{se(Vt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);se(Vt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",y,i,15)})}T_(e,n,i){const s=Np(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=B1(),h=z1(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=o.join("");se(Vt,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=l.createWebChannel(y,d);this.I_(v);let E=!1,k=!1;const F=new DR({Yo:U=>{k?se(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(E||(se(Vt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),se(Vt,`RPC '${e}' stream ${s} sending:`,U),v.send(U))},Zo:()=>v.close()}),M=(U,C,P)=>{U.listen(C,O=>{try{P(O)}catch(W){setTimeout(()=>{throw W},0)}})};return M(v,il.EventType.OPEN,()=>{k||(se(Vt,`RPC '${e}' stream ${s} transport opened.`),F.o_())}),M(v,il.EventType.CLOSE,()=>{k||(k=!0,se(Vt,`RPC '${e}' stream ${s} transport closed`),F.a_(),this.E_(v))}),M(v,il.EventType.ERROR,U=>{k||(k=!0,Zo(Vt,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),F.a_(new ie(Z.UNAVAILABLE,"The operation could not be completed")))}),M(v,il.EventType.MESSAGE,U=>{var C;if(!k){const P=U.data[0];Me(!!P,16349);const O=P,W=(O==null?void 0:O.error)||((C=O[0])==null?void 0:C.error);if(W){se(Vt,`RPC '${e}' stream ${s} received error:`,W);const X=W.status;let J=function(S){const R=at[S];if(R!==void 0)return EE(R)}(X),x=W.message;J===void 0&&(J=Z.INTERNAL,x="Unknown error status: "+X+" with message "+W.message),k=!0,F.a_(new ie(J,x)),v.close()}else se(Vt,`RPC '${e}' stream ${s} received:`,P),F.u_(P)}}),M(h,F1.STAT_EVENT,U=>{U.stat===wp.PROXY?se(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===wp.NOPROXY&&se(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new Uk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="PersistentStream";class DE{constructor(e,n,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ME(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ie(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(mv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(mv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FR extends DE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$k(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?di(l.readTime):_e.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Pp(d)?{documents:Zk(o,d)}:{query:Gk(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=SE(o,l.resumeToken);const p=Ap(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(_e.min())>0){h.readTime=_h(o,l.snapshotVersion.toTimestamp());const p=Ap(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=Qk(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.q_(n)}}class zR extends DE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qk(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Lp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Wk(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{}class UR extends BR{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,kp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(Z.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,kp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(Z.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zi(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="RemoteStore";class HR{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Fs(this)&&(se(bs,"Restarting streams for network reachability change."),await async function(d){const p=we(d);p.Ea.add(4),await ou(p),p.Ra.set("Unknown"),p.Ea.delete(4),await rd(p)}(this))})}),this.Ra=new jR(i,s)}}async function rd(t){if(Fs(t))for(const e of t.da)await e(!0)}async function ou(t){for(const e of t.da)await e(!1)}function VE(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ug(n)?lg(n):ua(n).O_()&&ag(n,e))}function og(t,e){const n=we(t),i=ua(n);n.Ia.delete(e),i.O_()&&FE(n,e),n.Ia.size===0&&(i.O_()?i.L_():Fs(n)&&n.Ra.set("Unknown"))}function ag(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ua(t).Y_(e)}function FE(t,e){t.Va.Ue(e),ua(t).Z_(e)}function lg(t){t.Va=new Vk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ua(t).start(),t.Ra.ua()}function ug(t){return Fs(t)&&!ua(t).x_()&&t.Ia.size>0}function Fs(t){return we(t).Ea.size===0}function zE(t){t.Va=void 0}async function $R(t){t.Ra.set("Online")}async function WR(t){t.Ia.forEach((e,n)=>{ag(t,e)})}async function qR(t,e){zE(t),ug(t)?(t.Ra.ha(e),lg(t)):t.Ra.set("Unknown")}async function ZR(t,e,n){if(t.Ra.set("Online"),e instanceof IE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){se(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vh(t,i)}else if(e instanceof Lc?t.Va.Ze(e):e instanceof TE?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const i=await OE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(Rt.EMPTY_BYTE_STRING,y.snapshotVersion)),FE(o,d);const v=new Ir(y.target,d,p,y.sequenceNumber);ag(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){se(bs,"Failed to raise snapshot:",i),await vh(t,i)}}async function vh(t,e,n){if(!la(e))throw e;t.Ea.add(1),await ou(t),t.Ra.set("Offline"),n||(n=()=>OE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(bs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await rd(t)})}function BE(t,e){return e().catch(n=>vh(t,n,e))}async function sd(t){const e=we(t),n=Hr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;GR(e);)try{const s=await kR(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,KR(e,s)}catch(s){await vh(e,s)}UE(e)&&jE(e)}function GR(t){return Fs(t)&&t.Ta.length<10}function KR(t,e){t.Ta.push(e);const n=Hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UE(t){return Fs(t)&&!Hr(t).x_()&&t.Ta.length>0}function jE(t){Hr(t).start()}async function QR(t){Hr(t).ra()}async function YR(t){const e=Hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function XR(t,e,n){const i=t.Ta.shift(),s=Jm.from(i,e,n);await BE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sd(t)}async function JR(t,e){e&&Hr(t).X_&&await async function(i,s){if(function(l){return Ok(l)&&l!==Z.ABORTED}(s.code)){const o=i.Ta.shift();Hr(i).B_(),await BE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await sd(i)}}(t,e),UE(t)&&jE(t)}async function gv(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(bs,"RemoteStore received new credentials");const i=Fs(n);n.Ea.add(3),await ou(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rd(n)}async function e2(t,e){const n=we(t);e?(n.Ea.delete(2),await rd(n)):e||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function ua(t){return t.ma||(t.ma=function(n,i,s){const o=we(n);return o.sa(),new FR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:$R.bind(null,t),t_:WR.bind(null,t),r_:qR.bind(null,t),H_:ZR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ug(t)?lg(t):t.Ra.set("Unknown")):(await t.ma.stop(),zE(t))})),t.ma}function Hr(t){return t.fa||(t.fa=function(n,i,s){const o=we(n);return o.sa(),new zR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:QR.bind(null,t),r_:JR.bind(null,t),ta:YR.bind(null,t),na:XR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(bs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new cg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(t,e){if(Zi("AsyncQueue",`${e}: ${t}`),la(t))return new ie(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=rl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Oo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.ga=new Ye(ce.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Xo{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Xo(e,n,Oo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class n2{constructor(){this.queries=yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=we(n),o=s.queries;s.queries=yv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ie(Z.ABORTED,"Firestore shutting down"))}}function yv(){return new Vs(t=>uE(t),Xh)}async function HE(t,e){const n=we(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new t2,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=hg(l,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&dg(n)}async function $E(t,e){const n=we(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function i2(t,e){const n=we(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&dg(n)}function r2(t,e,n){const i=we(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function dg(t){t.Ca.forEach(e=>{e.next()})}var Op,vv;(vv=Op||(Op={})).Ma="default",vv.Cache="cache";class WE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class s2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=cE(e),this.tu=new Oo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new _v,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const E=s.get(y),k=Jh(this.query,v)?v:null,F=!!E&&this.mutatedKeys.has(E.key),M=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let U=!1;E&&k?E.data.isEqual(k.data)?F!==M&&(i.track({type:3,doc:k}),U=!0):this.su(E,k)||(i.track({type:2,doc:k}),U=!0,(d&&this.eu(k,d)>0||p&&this.eu(k,p)<0)&&(h=!0)):!E&&k?(i.track({type:0,doc:k}),U=!0):E&&!k&&(i.track({type:1,doc:E}),U=!0,(d||p)&&(h=!0)),U&&(k?(l=l.add(k),o=M?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,v)=>function(k,F){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:U})}};return M(k)-M(F)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new Xo(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new ZE(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new qE(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fg="SyncEngine";class o2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class a2{constructor(e){this.key=e,this.hu=!1}}class l2{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Vs(h=>uE(h),Xh),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ce.comparator),this.Au=new Map,this.Ru=new ng,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u2(t,e,n=!0){const i=JE(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await GE(i,e,n,!0),s}async function c2(t,e){const n=JE(t);await GE(n,e,!0,!1)}async function GE(t,e,n,i){const s=await RR(t.localStore,hi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await h2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&VE(t.remoteStore,s),h}async function h2(t,e,n,i,s){t.pu=(v,E,k)=>async function(M,U,C,P){let O=U.view.ru(C);O.Cs&&(O=await hv(M.localStore,U.query,!1).then(({documents:x})=>U.view.ru(x,O)));const W=P&&P.targetChanges.get(U.targetId),X=P&&P.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(O,M.isPrimaryClient,W,X);return Ev(M,U.targetId,J.au),J.snapshot}(t,v,E,k);const o=await hv(t.localStore,e,!0),l=new s2(e,o.Qs),h=l.ru(o.documents),d=su.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Ev(t,n,p.au);const y=new o2(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function d2(t,e,n){const i=we(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!Xh(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await bp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&og(i.remoteStore,s.targetId),Mp(i,s.targetId)}).catch(aa)):(Mp(i,s.targetId),await bp(i.localStore,s.targetId,!0))}async function f2(t,e){const n=we(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),og(n.remoteStore,i.targetId))}async function p2(t,e,n){const i=E2(t);try{const s=await function(l,h){const d=we(l),p=We.now(),y=h.reduce((k,F)=>k.add(F.key),Ae());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let F=Gi(),M=Ae();return d.Ns.getEntries(k,y).next(U=>{F=U,F.forEach((C,P)=>{P.isValidDocument()||(M=M.add(C))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,F)).next(U=>{v=U;const C=[];for(const P of h){const O=kk(P,v.get(P.key).overlayedDocument);O!=null&&C.push(new Kr(P.key,O,tE(O.value.mapValue),$n.exists(!0)))}return d.mutationQueue.addMutationBatch(k,p,C,h)}).next(U=>{E=U;const C=U.applyToLocalDocumentSet(v,M);return d.documentOverlayCache.saveOverlays(k,U.batchId,C)})}).then(()=>({batchId:E.batchId,changes:dE(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ye(Ce)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(i,s.batchId,n),await au(i,s.changes),await sd(i.remoteStore)}catch(s){const o=hg(s,"Failed to persist write");n.reject(o)}}async function KE(t,e){const n=we(t);try{const i=await CR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Me(l.hu,14607):s.removedDocuments.size>0&&(Me(l.hu,42227),l.hu=!1))}),await au(n,i,e)}catch(i){await aa(i)}}function wv(t,e,n){const i=we(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=we(l);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const E of v.Sa)E.va(h)&&(p=!0)}),p&&dg(d)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function m2(t,e,n){const i=we(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Ye(ce.comparator);l=l.insert(o,Ut.newNoDocument(o,_e.min()));const h=Ae().add(o),d=new nd(_e.min(),new Map,new Ye(Ce),l,h);await KE(i,d),i.du=i.du.remove(o),i.Au.delete(e),pg(i)}else await bp(i.localStore,e,!1).then(()=>Mp(i,e,n)).catch(aa)}async function g2(t,e){const n=we(t),i=e.batch.batchId;try{const s=await xR(n.localStore,e);YE(n,i,null),QE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await au(n,s)}catch(s){await aa(s)}}async function _2(t,e,n){const i=we(t);try{const s=await function(l,h){const d=we(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Me(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,e);YE(i,e,n),QE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await au(i,s)}catch(s){await aa(s)}}function QE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function YE(t,e,n){const i=we(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||XE(t,i)})}function XE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(og(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),pg(t))}function Ev(t,e,n){for(const i of n)i instanceof qE?(t.Ru.addReference(i.key,e),y2(t,i)):i instanceof ZE?(se(fg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||XE(t,i.key)):pe(19791,{wu:i})}function y2(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(se(fg,"New document in limbo: "+n),t.Eu.add(i),pg(t))}function pg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(Be.fromString(e)),i=t.fu.next();t.Au.set(i,new a2(n)),t.du=t.du.insert(n,i),VE(t.remoteStore,new Ir(hi(Qm(n.path)),i,"TargetPurposeLimboResolution",Kh.ce))}}async function au(t,e,n){const i=we(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=rg.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,p){const y=we(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>K.forEach(p,E=>K.forEach(E.Es,k=>y.persistence.referenceDelegate.addReference(v,E.targetId,k)).next(()=>K.forEach(E.ds,k=>y.persistence.referenceDelegate.removeReference(v,E.targetId,k)))))}catch(v){if(!la(v))throw v;se(sg,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const k=y.Ms.get(E),F=k.snapshotVersion,M=k.withLastLimboFreeSnapshotVersion(F);y.Ms=y.Ms.insert(E,M)}}}(i.localStore,o))}async function v2(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se(fg,"User change. New user:",e.toKey());const i=await NE(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ie(Z.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await au(n,i.Ls)}}function w2(t,e){const n=we(t),i=n.Au.get(e);if(i&&i.hu)return Ae().add(i.key);{let s=Ae();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function JE(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m2.bind(null,e),e.Pu.H_=i2.bind(null,e.eventManager),e.Pu.yu=r2.bind(null,e.eventManager),e}function E2(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_2.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PR(this.persistence,new TR,e.initialUser,this.serializer)}Cu(e){return new bE(ig.mi,this.serializer)}Du(e){return new bR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class T2 extends wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof yh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aR(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new bE(i=>yh.mi(i,n),this.serializer)}}class Dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=v2.bind(null,this.syncEngine),await e2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n2}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),i=function(o){return new VR(o)}(e.databaseInfo);return function(o,l,h,d){return new UR(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new HR(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>wv(this.syncEngine,n,0),function(){return pv.v()?new pv:new NR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,y){const v=new l2(s,o,l,h,d,p);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=we(s);se(bs,"RemoteStore shutting down."),o.Ea.add(5),await ou(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class I2{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{se($r,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(se($r,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=hg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function pf(t,e){t.asyncQueue.verifyOperationInProgress(),se($r,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await NE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S2(t);se($r,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>gv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>gv(e.remoteStore,s)),t._onlineComponents=e}async function S2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se($r,"Using user provided OfflineComponentProvider");try{await pf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await pf(t,new wh)}}else se($r,"Using default OfflineComponentProvider"),await pf(t,new T2(void 0));return t._offlineComponents}async function tT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se($r,"Using user provided OnlineComponentProvider"),await Tv(t,t._uninitializedComponentsProvider._online)):(se($r,"Using default OnlineComponentProvider"),await Tv(t,new Dp))),t._onlineComponents}function P2(t){return tT(t).then(e=>e.syncEngine)}async function nT(t){const e=await tT(t),n=e.eventManager;return n.onListen=u2.bind(null,e.syncEngine),n.onUnlisten=d2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f2.bind(null,e.syncEngine),n}function x2(t,e,n={}){const i=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new eT({next:E=>{y.Nu(),l.enqueueAndForget(()=>$E(o,v));const k=E.docs.has(h);!k&&E.fromCache?p.reject(new ie(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&E.fromCache&&d&&d.source==="server"?p.reject(new ie(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new WE(Qm(h.path),y,{includeMetadataChanges:!0,qa:!0});return HE(o,v)}(await nT(t),t.asyncQueue,e,n,i)),i.promise}function C2(t,e,n={}){const i=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new eT({next:E=>{y.Nu(),l.enqueueAndForget(()=>$E(o,v)),E.fromCache&&d.source==="server"?p.reject(new ie(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new WE(h,y,{includeMetadataChanges:!0,qa:!0});return HE(o,v)}(await nT(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firestore.googleapis.com",Sv=!0;class Pv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rT,this.ssl=Sv}else this.host=e.host,this.ssl=e.ssl??Sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sR)throw new ie(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iT(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new OA;switch(i.type){case"firstParty":return new FA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Iv.get(n);i&&(se("ComponentProvider","Removing Datastore"),Iv.delete(n),i.terminate())}(this),Promise.resolve()}}function A2(t,e,n,i={}){var p;t=_i(t,od);const s=ra(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(C1(`https://${h}`),A1("Firestore",!0)),o.host!==rT&&o.host!==h&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!ks(d,l)&&(t._setSettings(d),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=zt.MOCK_USER;else{y=aC(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ie(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new zt(E)}t._authCredentials=new MA(new j1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ca(this.firestore,e,this._query)}}class rt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(nu(n,rt._jsonSchema))return new rt(e,i||null,new ce(Be.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ct("string",rt._jsonSchemaVersion),referencePath:ct("string")};class Dr extends ca{constructor(e,n,i){super(e,n,Qm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ce(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function ds(t,e,...n){if(t=Gt(t),H1("collection","path",e),t instanceof od){const i=Be.fromString(e,...n);return Fy(i),new Dr(t,null,i)}{if(!(t instanceof rt||t instanceof Dr))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Fy(i),new Dr(t.firestore,null,i)}}function Ni(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=$m.newId()),H1("doc","path",e),t instanceof od){const i=Be.fromString(e,...n);return Vy(i),new rt(t,null,new ce(i))}{if(!(t instanceof rt||t instanceof Dr))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Vy(i),new rt(t.firestore,t instanceof Dr?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="AsyncQueue";class Cv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ME(this,"async_queue_retry"),this._c=()=>{const i=ff();i&&se(xv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=ff();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ui;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;se(xv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Zi("INTERNAL UNHANDLED ERROR: ",Av(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=cg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&pe(47125,{Pc:Av(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Av(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ha extends od{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Cv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cv(e),this._firestoreClient=void 0,await e}}}function k2(t,e){const n=typeof t=="object"?t:b1(),i=typeof t=="string"?t:e||hh,s=jm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=sC("firestore");o&&A2(s,...o)}return s}function mg(t){if(t._terminated)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R2(t),t._firestoreClient}function R2(t){var i,s,o;const e=t._freezeSettings(),n=function(h,d,p,y){return new tk(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,iT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new I2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Rt.fromBase64String(e))}catch(n){throw new ie(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nu(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:ct("string",Sn._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(nu(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:ct("string",fi._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nu(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pi(e.vectorValues);throw new ie(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:ct("string",pi._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^__.*__$/;class b2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class sT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class _g{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oT(this.Ac)&&L2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||id(e)}Cc(e,n,i,s=!1){return new _g({Ac:e,methodName:n,Dc:i,path:Ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yg(t){const e=t._freezeSettings(),n=id(t._databaseId);return new N2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O2(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);vg("Data must be an object, but it was:",l,i);const h=aT(i,l);let d,p;if(o.merge)d=new mn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=Vp(e,v,n);if(!l.contains(E))throw new ie(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);uT(y,E)||y.push(E)}d=new mn(y),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new b2(new rn(h),d,p)}class ld extends gg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function M2(t,e,n,i){const s=t.Cc(1,e,n);vg("Data must be an object, but it was:",s,i);const o=[],l=rn.empty();Gr(i,(d,p)=>{const y=wg(e,d,n);p=Gt(p);const v=s.yc(y);if(p instanceof ld)o.push(y);else{const E=lu(p,v);E!=null&&(o.push(y),l.set(y,E))}});const h=new mn(o);return new sT(l,h,s.fieldTransforms)}function D2(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Vp(e,i,n)],d=[s];if(o.length%2!=0)throw new ie(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Vp(e,o[E])),d.push(o[E+1]);const p=[],y=rn.empty();for(let E=h.length-1;E>=0;--E)if(!uT(p,h[E])){const k=h[E];let F=d[E];F=Gt(F);const M=l.yc(k);if(F instanceof ld)p.push(k);else{const U=lu(F,M);U!=null&&(p.push(k),y.set(k,U))}}const v=new mn(p);return new sT(y,v,l.fieldTransforms)}function V2(t,e,n,i=!1){return lu(n,t.Cc(i?4:3,e))}function lu(t,e){if(lT(t=Gt(t)))return vg("Unsupported field value:",e,t),aT(t,e);if(t instanceof gg)return function(i,s){if(!oT(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=lu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ik(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=We.fromDate(i);return{timestampValue:_h(s.serializer,o)}}if(i instanceof We){const o=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_h(s.serializer,o)}}if(i instanceof fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sn)return{bytesValue:SE(s.serializer,i._byteString)};if(i instanceof rt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof pi)return function(l,h){return{mapValue:{fields:{[X1]:{stringValue:eE},[dh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Ym(h.serializer,p)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Gh(i)}`)}(t,e)}function aT(t,e){const n={};return q1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(i,s)=>{const o=lu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function lT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof fi||t instanceof Sn||t instanceof rt||t instanceof gg||t instanceof pi)}function vg(t,e,n){if(!lT(n)||!$1(n)){const i=Gh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Vp(t,e,n){if((e=Gt(e))instanceof ad)return e._internalPath;if(typeof e=="string")return wg(t,e);throw Eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const F2=new RegExp("[~\\*/\\[\\]]");function wg(t,e,n){if(e.search(F2)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ad(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ie(Z.INVALID_ARGUMENT,h+t+d)}function uT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z2 extends cT{data(){return super.data()}}function Eg(t,e){return typeof e=="string"?wg(t,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class U2 extends Tg{}function mf(t,e,...n){let i=[];e instanceof Tg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Ig).length,h=o.filter(d=>d instanceof ud).length;if(l>1||l>0&&h>0)throw new ie(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class ud extends U2{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ud(e,n,i)}_apply(e){const n=this._parse(e);return hT(e._query,n),new ca(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=yg(e.firestore);return function(o,l,h,d,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Rv(v,y);const F=[];for(const M of v)F.push(kv(d,o,M));E={arrayValue:{values:F}}}else E=kv(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Rv(v,y),E=V2(h,l,v,y==="in"||y==="not-in");return ut.create(p,y,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gf(t,e,n){const i=e,s=Eg("where",t);return ud._create(s,i,n)}class Ig extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)hT(l,d),l=xp(l,d)}(e._query,n),new ca(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kv(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new ie(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lE(e)&&n.indexOf("/")!==-1)throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ce.isDocumentKey(i))throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qy(t,new ce(i))}if(n instanceof rt)return qy(t,n._key);throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(n)}.`)}function Rv(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hT(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class j2{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Gr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[dh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>nt(l.doubleValue));return new pi(n)}convertGeoPoint(e){return new fi(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Yh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const n=Br(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Me(RE(i),9688,{name:e});const s=new $l(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return s.isEqual(n)||Zi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends cT{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Eg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:ct("string",Es._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class bc extends Es{data(e={}){return super.data(e)}}class Mo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ol(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new bc(this._firestore,this._userDataWriter,i.key,i,new ol(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new bc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ol(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new bc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ol(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:$2(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){t=_i(t,rt);const e=_i(t.firestore,ha);return x2(mg(e),t._key).then(n=>W2(e,t,n))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:ct("string",Mo._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class fT extends j2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function fs(t){t=_i(t,ca);const e=_i(t.firestore,ha),n=mg(e),i=new fT(e);return B2(t._query),C2(n,t._query).then(s=>new Mo(e,i,t,s))}function Lv(t,e,n){t=_i(t,rt);const i=_i(t.firestore,ha),s=H2(t.converter,e,n);return Sg(i,[O2(yg(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function dc(t,e,n,...i){t=_i(t,rt);const s=_i(t.firestore,ha),o=yg(s);let l;return l=typeof(e=Gt(e))=="string"||e instanceof ad?D2(o,"updateDoc",t._key,e,n,i):M2(o,"updateDoc",t._key,e),Sg(s,[l.toMutation(t._key,$n.exists(!0))])}function _f(t){return Sg(_i(t.firestore,ha),[new Xm(t._key,$n.none())])}function Sg(t,e){return function(i,s){const o=new Ui;return i.asyncQueue.enqueueAndForget(async()=>p2(await P2(i),s,o)),o.promise}(mg(t),e)}function W2(t,e,n){const i=n.docs.get(e._key),s=new fT(t);return new Es(t,s,e._key,i,new ol(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oa=s})(sa),qo(new Rs("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ha(new DA(i.getProvider("auth-internal")),new zA(l,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(p.options.projectId,y)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Or(Ny,Oy,e),Or(Ny,Oy,"esm2020")})();var q2="firebase",Z2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(q2,Z2,"app");function pT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G2=pT,mT=new eu("auth","Firebase",pT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Bm("@firebase/auth");function K2(t,...e){Th.logLevel<=xe.WARN&&Th.warn(`Auth (${sa}): ${t}`,...e)}function Nc(t,...e){Th.logLevel<=xe.ERROR&&Th.error(`Auth (${sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,...e){throw Pg(t,...e)}function mi(t,...e){return Pg(t,...e)}function gT(t,e,n){const i={...G2(),[e]:n};return new eu("auth","Firebase",i).create(e,{appName:t.name})}function Ts(t){return gT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return mT.create(t,...e)}function ge(t,e,...n){if(!t)throw Pg(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function Qi(t,e){t||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Q2(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q2()||fC()||"connection"in navigator)?navigator.onLine:!0}function X2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=cC()||pC()}get(){return Y2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){Qi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tL=new uu(3e4,6e4);function Cg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function da(t,e,n,i,s={}){return yT(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=tu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return dC()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&ra(t.emulatorConfig.host)&&(p.credentials="include"),_T.fetch()(await vT(t,t.config.apiHost,n,h),p)})}async function yT(t,e,n){t._canInitEmulator=!1;const i={...J2,...e};try{const s=new iL(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw fc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw fc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw fc(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gT(t,y,p);Ki(t,y)}}catch(s){if(s instanceof Xi)throw s;Ki(t,"network-request-failed",{message:String(s)})}}async function nL(t,e,n,i,s={}){const o=await da(t,e,n,i,s);return"mfaPendingCredential"in o&&Ki(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function vT(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?xg(t.config,s):`${t.config.apiScheme}://${s}`;return eL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class iL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),tL.get())})}}function fc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=mi(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){return da(t,"POST","/v1/accounts:delete",e)}async function Ih(t,e){return da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sL(t,e=!1){const n=Gt(t),i=await n.getIdToken(e),s=Ag(i);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:El(yf(s.auth_time)),issuedAtTime:El(yf(s.iat)),expirationTime:El(yf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function yf(t){return Number(t)*1e3}function Ag(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const s=I1(n);return s?JSON.parse(s):(Nc("Failed to decode base64 JWT payload"),null)}catch(s){return Nc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Nv(t){const e=Ag(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Xi&&oL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function oL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=El(this.lastLoginAt),this.creationTime=El(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var v;const e=t.auth,n=await t.getIdToken(),i=await Gl(t,Ih(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?wT(s.providerUserInfo):[],l=uL(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new zp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function lL(t){const e=Gt(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function wT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e){const n=await yT(t,{},async()=>{const i=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await vT(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&ra(t.emulatorConfig.host)&&(d.credentials="include"),_T.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hL(t,e){return da(t,"POST","/v2/accounts:revokeToken",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await cL(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Do;return i&&(ge(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ge(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ge(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Un{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new aL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gl(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sL(this,e)}reload(){return lL(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await Gl(this,rL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:k,providerData:F,stsTokenManager:M}=n;ge(v&&M,e,"internal-error");const U=Do.fromJSON(this.name,M);ge(typeof v=="string",e,"internal-error"),hr(i,e.name),hr(s,e.name),ge(typeof E=="boolean",e,"internal-error"),ge(typeof k=="boolean",e,"internal-error"),hr(o,e.name),hr(l,e.name),hr(h,e.name),hr(d,e.name),hr(p,e.name),hr(y,e.name);const C=new Un({uid:v,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:k,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:U,createdAt:p,lastLoginAt:y});return F&&Array.isArray(F)&&(C.providerData=F.map(P=>({...P}))),d&&(C._redirectEventId=d),C}static async _fromIdTokenResponse(e,n,i=!1){const s=new Do;s.updateFromServerResponse(n);const o=new Un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Sh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?wT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Do;h.updateFromIdToken(i);const d=new Un({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new zp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function zi(t){Qi(t instanceof Function,"Expected a class definition");let e=Ov.get(t);return e?(Qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ov.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ET.type="NONE";const Mv=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e,n){return`firebase:${t}:${e}:${n}`}class Vo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Oc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Oc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ih(this.auth,{idToken:e}).catch(()=>{});return n?Un._fromGetAccountInfoResponse(this.auth,n,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vo(zi(Mv),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||zi(Mv);const l=Oc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(l);if(y){let v;if(typeof y=="string"){const E=await Ih(e,{idToken:y}).catch(()=>{});if(!E)break;v=await Un._fromGetAccountInfoResponse(e,E,y)}else v=Un._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Vo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Vo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(AT(e))return"Webos";if(IT(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function TT(t=Ht()){return/firefox\//i.test(t)}function IT(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(t=Ht()){return/crios\//i.test(t)}function PT(t=Ht()){return/iemobile/i.test(t)}function xT(t=Ht()){return/android/i.test(t)}function CT(t=Ht()){return/blackberry/i.test(t)}function AT(t=Ht()){return/webos/i.test(t)}function kg(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dL(t=Ht()){var e;return kg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function fL(){return mC()&&document.documentMode===10}function kT(t=Ht()){return kg(t)||xT(t)||AT(t)||CT(t)||/windows phone/i.test(t)||PT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e=[]){let n;switch(t){case"Browser":n=Dv(Ht());break;case"Worker":n=`${Dv(Ht())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e={}){return da(t,"GET","/v2/passwordPolicy",Cg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=6;class _L{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new pL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ih(this,{idToken:e}),i=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(li(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(Ts(this));const n=e?Gt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mL(this),n=new _L(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&K2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rg(t){return Gt(t)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=IC(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vL(t){Lg=t}function wL(t){return Lg.loadJS(t)}function EL(){return Lg.gapiScript}function TL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){const n=jm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(ks(o,e??{}))return s;Ki(s,"already-initialized")}return n.initialize({options:e})}function SL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function PL(t,e,n){const i=Rg(t);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=LT(e),{host:l,port:h}=xL(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(ks(p,i.config.emulator)&&ks(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,ra(l)?(C1(`${o}//${l}${d}`),A1("Auth",!0)):s||CL()}function LT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xL(t){const e=LT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Fv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Fv(l)}}}function Fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e){return nL(t,"POST","/v1/accounts:signInWithIdp",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="http://localhost";class Ns extends bT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new Ns(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:AL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends NT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends cu{constructor(){super("facebook.com")}static credential(e){return Ns._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ns._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return _r.credential(n,i)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends cu{constructor(){super("github.com")}static credential(e){return Ns._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends cu{constructor(){super("twitter.com")}static credential(e,n){return Ns._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return vr.credential(n,i)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Un._fromIdTokenResponse(e,i,s),l=zv(i);return new Jo({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=zv(i);return new Jo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function zv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends Xi{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ph.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Ph(e,n,i,s)}}function OT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ph._fromErrorAndOperation(t,o,e,i):o})}async function kL(t,e,n=!1){const i=await Gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e,n=!1){const{auth:i}=t;if(li(i.app))return Promise.reject(Ts(i));const s="reauthenticate";try{const o=await Gl(t,OT(i,s,e,t),n);ge(o.idToken,i,"internal-error");const l=Ag(o.idToken);ge(l,i,"internal-error");const{sub:h}=l;return ge(t.uid===h,i,"user-mismatch"),Jo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ki(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e,n=!1){if(li(t.app))return Promise.reject(Ts(t));const i="signIn",s=await OT(t,i,e),o=await Jo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function bL(t,e,n,i){return Gt(t).onIdTokenChanged(e,n,i)}function NL(t,e,n){return Gt(t).beforeAuthStateChanged(e,n)}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=1e3,ML=10;class DT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);fL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ML):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DT.type="LOCAL";const DL=DT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VT.type="SESSION";const FT=VT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new cd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await VL(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=bg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function zL(t){gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function BL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function jL(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firebaseLocalStorageDb",HL=1,Ch="firebaseLocalStorage",UT="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hd(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function $L(){const t=indexedDB.deleteDatabase(BT);return new hu(t).toPromise()}function Bp(){const t=indexedDB.open(BT,HL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ch,{keyPath:UT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await $L(),e(await Bp()))})})}async function Bv(t,e,n){const i=hd(t,!0).put({[UT]:e,value:n});return new hu(i).toPromise()}async function WL(t,e){const n=hd(t,!1).get(e),i=await new hu(n).toPromise();return i===void 0?null:i.value}function Uv(t,e){const n=hd(t,!0).delete(e);return new hu(n).toPromise()}const qL=800,ZL=3;class jT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ZL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(jL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await BL(),!this.activeServiceWorker)return;this.sender=new FL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await Bv(e,xh,"1"),await Uv(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>WL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=hd(s,!1).getAll();return new hu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jT.type="LOCAL";const GL=jT;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t,e){return e?zi(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends bT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QL(t){return LL(t.auth,new Ng(t),t.bypassAuthState)}function YL(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),RL(n,new Ng(t),t.bypassAuthState)}async function XL(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),kL(n,new Ng(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QL;case"linkViaPopup":case"linkViaRedirect":return XL;case"reauthViaPopup":case"reauthViaRedirect":return YL;default:Ki(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=new uu(2e3,1e4);class Co extends HT{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const e=bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JL.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="pendingRedirect",Mc=new Map;class tb extends HT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Mc.get(this.auth._key());if(!e){try{const i=await nb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Mc.set(this.auth._key(),e)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nb(t,e){const n=sb(e),i=rb(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function ib(t,e){Mc.set(t._key(),e)}function rb(t){return zi(t._redirectPersistence)}function sb(t){return Oc(eb,t.config.apiKey,t.name)}async function ob(t,e,n=!1){if(li(t.app))return Promise.reject(Ts(t));const i=Rg(t),s=KL(i,e),l=await new tb(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=10*60*1e3;class lb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ub(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!$T(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ab&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $T({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ub(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $T(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(t,e={}){return da(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,db=/^https?/;async function fb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cb(t);for(const n of e)try{if(pb(n))return}catch{}Ki(t,"unauthorized-domain")}function pb(t){const e=Fp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!db.test(n))return!1;if(hb.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new uu(3e4,6e4);function Hv(){const t=gi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gb(t){return new Promise((e,n)=>{var s,o,l;function i(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(mi(t,"network-request-failed"))},timeout:mb.get()})}if((o=(s=gi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=gi().gapi)!=null&&l.load)i();else{const h=TL("iframefcb");return gi()[h]=()=>{gapi.load?i():n(mi(t,"network-request-failed"))},wL(`${EL()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function _b(t){return Dc=Dc||gb(t),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new uu(5e3,15e3),vb="__/auth/iframe",wb="emulator/auth/iframe",Eb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ib(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xg(e,wb):`https://${t.config.authDomain}/${vb}`,i={apiKey:e.apiKey,appName:t.name,v:sa},s=Tb.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${tu(i).slice(1)}`}async function Sb(t){const e=await _b(t),n=gi().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:Ib(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eb,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=mi(t,"network-request-failed"),h=gi().setTimeout(()=>{o(l)},yb.get());function d(){gi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xb=500,Cb=600,Ab="_blank",kb="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rb(t,e,n,i=xb,s=Cb){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...Pb,width:i.toString(),height:s.toString(),top:o,left:l},p=Ht().toLowerCase();n&&(h=ST(p)?Ab:n),TT(p)&&(e=e||kb,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[k,F])=>`${E}${k}=${F},`,"");if(dL(p)&&h!=="_self")return Lb(e||"",h),new $v(null);const v=window.open(e||"",h,y);ge(v,t,"popup-blocked");try{v.focus()}catch{}return new $v(v)}function Lb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="__/auth/handler",Nb="emulator/auth/handler",Ob=encodeURIComponent("fac");async function Wv(t,e,n,i,s,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:sa,eventId:s};if(e instanceof NT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",TC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(o||{}))l[y]=v}if(e instanceof cu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),p=d?`#${Ob}=${encodeURIComponent(d)}`:"";return`${Mb(t)}?${tu(h).slice(1)}${p}`}function Mb({config:t}){return t.emulator?xg(t,Nb):`https://${t.authDomain}/${bb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class Db{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FT,this._completeRedirectFn=ob,this._overrideRedirectResult=ib}async _openPopup(e,n,i,s){var l;Qi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Wv(e,n,i,Fp(),s);return Rb(e,o,bg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Wv(e,n,i,Fp(),s);return zL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Qi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Sb(e),i=new lb(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vf,{type:vf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[vf];o!==void 0&&n(!!o),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kT()||IT()||kg()}}const Vb=Db;var qv="@firebase/auth",Zv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bb(t){qo(new Rs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ge(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RT(t)},p=new yL(i,s,o,d);return SL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),qo(new Rs("auth-internal",e=>{const n=Rg(e.getProvider("auth").getImmediate());return(i=>new Fb(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(qv,Zv,zb(t)),Or(qv,Zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=5*60,jb=x1("authIdTokenMaxAge")||Ub;let Gv=null;const Hb=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jb)return;const s=n==null?void 0:n.token;Gv!==s&&(Gv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $b(t=b1()){const e=jm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IL(t,{popupRedirectResolver:Vb,persistence:[GL,DL,FT]}),i=x1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Hb(o.toString());NL(n,l,()=>l(n.currentUser)),bL(n,h=>l(h))}}const s=S1("auth");return s&&PL(n,`http://${s}`),n}function Wb(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=mi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",Wb().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bb("Browser");const qb={apiKey:{}.VITE_FIREBASE_API_KEY||"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:{}.VITE_FIREBASE_AUTH_DOMAIN||"russia-oil-tracker.firebaseapp.com",projectId:{}.VITE_FIREBASE_PROJECT_ID||"russia-oil-tracker",storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET||"russia-oil-tracker.firebasestorage.app",messagingSenderId:{}.VITE_FIREBASE_MESSAGING_SENDER_ID||"86599024625",appId:{}.VITE_FIREBASE_APP_ID||"1:86599024625:web:c833bd2f796bf999784e50"},WT=L1(qb),$e=k2(WT);$b(WT);const Ft={FACILITIES:"facilities",HITS:"hits"},Zb=()=>{const[t,e]=q.useState(!1),[n,i]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState("facilities"),[d,p]=q.useState([]),[y,v]=q.useState(!1),[E,k]=q.useState(null),[F,M]=q.useState(null),[U,C]=q.useState({}),[P,O]=q.useState(!1),[W,X]=q.useState(null);q.useState(null);const[J,x]=q.useState({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),[I,S]=q.useState({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),R=zm();q.useEffect(()=>{t&&b()},[t]);const b=async()=>{v(!0),k(null);try{if(!$e)throw new Error("Firebase not initialized");const B=await fs(ds($e,Ft.FACILITIES)),te=await Promise.all(B.docs.map(async ae=>{var kn,vi;const Le=mf(ds($e,Ft.HITS),gf("facilityId","==",parseInt(ae.id))),Ee=(await fs(Le)).docs.map(Ji=>({id:parseInt(Ji.id),...Ji.data()})),le=ae.data(),Fe=((kn=le.location)==null?void 0:kn.latitude)??le.latitude,Lt=((vi=le.location)==null?void 0:vi.longitude)??le.longitude;return{id:parseInt(ae.id),name:le.name,type:le.type,capacity:le.capacity,latitude:Fe,longitude:Lt,status:le.status,hit:le.hit,hits:Ee}}));p(te)}catch(B){console.error("Error fetching facilities:",B),k("Failed to load facilities from Firebase.")}finally{v(!1)}},D=B=>{B.preventDefault(),n==="admin"&&s==="admin123"?e(!0):alert("Invalid credentials. Use admin/admin123")},A=async B=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!$e)throw new Error("Firebase not initialized");const te=mf(ds($e,Ft.HITS),gf("facilityId","==",B)),ae=await fs(te);for(const Le of ae.docs)await _f(Le.ref);await _f(Ni($e,Ft.FACILITIES,B.toString())),b()}catch(te){console.error("Error deleting facility:",te),alert("Failed to delete facility")}},De=async B=>{try{if(!$e)throw new Error("Firebase not initialized");const te=Ni($e,Ft.FACILITIES,B.toString()),ae=await dT(te);if(ae.exists()){const Le=ae.data();await dc(te,{hit:!Le.hit}),b()}}catch(te){console.error("Error toggling hit status:",te),alert("Failed to toggle hit status")}},Yt=B=>{M(B.id),C(B)},tt=async()=>{if(F)try{if(!$e)throw new Error("Firebase not initialized");const B={name:U.name,type:U.type,capacity:U.capacity,status:U.status,hit:U.hit};U.latitude!==void 0&&U.longitude!==void 0&&(B.location={latitude:U.latitude,longitude:U.longitude});const te=Ni($e,Ft.FACILITIES,F.toString());await dc(te,B),M(null),C({}),b()}catch(B){console.error("Error updating facility:",B),alert("Failed to update facility")}},un=async B=>{B.preventDefault();try{if(!$e)throw new Error("Firebase not initialized");const Le=(await fs(ds($e,Ft.FACILITIES))).docs.reduce((Ee,le)=>{const Fe=parseInt(le.id);return Fe>Ee?Fe:Ee},0)+1,Te={id:Le,name:I.name,type:I.type,capacity:I.capacity,location:{latitude:I.latitude,longitude:I.longitude},status:I.status,hit:!1,hits:[]};await Lv(Ni($e,Ft.FACILITIES,Le.toString()),Te),O(!1),S({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),b()}catch(te){console.error("Error adding facility:",te),alert("Failed to add facility")}},G=async(B,te)=>{te.preventDefault();try{if(!$e)throw new Error("Firebase not initialized");const Te=(await fs(ds($e,Ft.HITS))).docs.reduce((Fe,Lt)=>{const kn=parseInt(Lt.id);return kn>Fe?kn:Fe},0)+1,Ee={...J,id:Te,facilityId:B};await Lv(Ni($e,Ft.HITS,Te.toString()),Ee);const le=Ni($e,Ft.FACILITIES,B.toString());await dc(le,{hit:!0}),X(null),x({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),b()}catch(ae){console.error("Error adding hit:",ae),alert("Failed to add hit record")}},de=async(B,te)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!$e)throw new Error("Firebase not initialized");await _f(Ni($e,Ft.HITS,te.toString()));const ae=mf(ds($e,Ft.HITS),gf("facilityId","==",B));if((await fs(ae)).empty){const Te=Ni($e,Ft.FACILITIES,B.toString());await dc(Te,{hit:!1})}b()}catch(ae){console.error("Error deleting hit:",ae),alert("Failed to delete hit record")}};return t?Y("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff"},children:[Y("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column"},children:[Y("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[V("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),V("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russia Oil Tracker"})]}),Y("nav",{style:{flex:1,padding:"20px 0"},children:[Y("button",{onClick:()=>h("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:l==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[V("span",{style:{fontSize:"20px"},children:"🏭"}),V("span",{children:"Facilities"})]}),Y("button",{onClick:()=>h("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:l==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[V("span",{style:{fontSize:"20px"},children:"💥"}),V("span",{children:"Hit Records"})]})]}),Y("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:[V("button",{onClick:()=>R("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"10px",fontSize:"14px"},children:"🗺️ View Map"}),V("button",{onClick:()=>e(!1),style:{width:"100%",padding:"10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"🚪 Logout"})]})]}),Y("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[l==="facilities"&&Y($u,{children:[Y("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[Y("div",{children:[V("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),Y("p",{style:{color:"#999"},children:["Total: ",d.length," facilities"]})]}),V("button",{onClick:()=>O(!P),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:P?"Cancel":"+ Add Facility"})]}),P&&Y("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #333"},children:[V("h2",{style:{marginBottom:"20px"},children:"Add New Facility"}),Y("form",{onSubmit:un,style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Name"}),V("input",{type:"text",required:!0,value:I.name,onChange:B=>S({...I,name:B.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Type"}),Y("select",{value:I.type,onChange:B=>S({...I,type:B.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"Refinery",children:"Refinery"}),V("option",{value:"Extraction",children:"Extraction"}),V("option",{value:"Storage",children:"Storage"})]})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Capacity (barrels/day)"}),V("input",{type:"number",required:!0,value:I.capacity,onChange:B=>S({...I,capacity:Number(B.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Status"}),Y("select",{value:I.status,onChange:B=>S({...I,status:B.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),V("option",{value:"HIT",children:"HIT"})]})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Latitude"}),V("input",{type:"number",step:"any",required:!0,value:I.latitude,onChange:B=>S({...I,latitude:Number(B.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Longitude"}),V("input",{type:"number",step:"any",required:!0,value:I.longitude,onChange:B=>S({...I,longitude:Number(B.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),V("div",{style:{gridColumn:"1 / -1"},children:V("button",{type:"submit",style:{padding:"10px 30px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Create Facility"})})]})]}),y&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),E&&V("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:E}),!y&&!E&&Y("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[Y("table",{style:{width:"100%",borderCollapse:"collapse"},children:[V("thead",{children:Y("tr",{style:{backgroundColor:"#0a0a0a"},children:[V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Capacity"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),V("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),V("tbody",{children:d.map(B=>{var te;return V(Is.Fragment,{children:V("tr",{style:{borderBottom:"1px solid #333"},children:F===B.id?Y($u,{children:[V("td",{style:{padding:"15px"},children:B.id}),V("td",{style:{padding:"15px"},children:V("input",{type:"text",value:U.name,onChange:ae=>C({...U,name:ae.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),V("td",{style:{padding:"15px"},children:Y("select",{value:U.type,onChange:ae=>C({...U,type:ae.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"Refinery",children:"Refinery"}),V("option",{value:"Extraction",children:"Extraction"}),V("option",{value:"Storage",children:"Storage"})]})}),V("td",{style:{padding:"15px"},children:V("input",{type:"number",value:U.capacity,onChange:ae=>C({...U,capacity:Number(ae.target.value)}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),V("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:B.latitude!=null&&B.longitude!=null?`${B.latitude.toFixed(4)}, ${B.longitude.toFixed(4)}`:"N/A"}),V("td",{style:{padding:"15px"},children:Y("select",{value:U.status,onChange:ae=>C({...U,status:ae.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[V("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),V("option",{value:"HIT",children:"HIT"})]})}),Y("td",{style:{padding:"15px"},children:[V("button",{onClick:tt,style:{padding:"5px 15px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px"},children:"Save"}),V("button",{onClick:()=>M(null),style:{padding:"5px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]})]}):Y($u,{children:[V("td",{style:{padding:"15px"},children:B.id}),V("td",{style:{padding:"15px"},children:B.name}),V("td",{style:{padding:"15px"},children:B.type}),V("td",{style:{padding:"15px"},children:((te=B.capacity)==null?void 0:te.toLocaleString())||0}),V("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:B.latitude!=null&&B.longitude!=null?`${B.latitude.toFixed(4)}, ${B.longitude.toFixed(4)}`:"N/A"}),V("td",{style:{padding:"15px"},children:V("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:B.hit?"#f44336":"#4CAF50",color:"#fff"},children:B.status})}),Y("td",{style:{padding:"15px"},children:[V("button",{onClick:()=>Yt(B),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),V("button",{onClick:()=>De(B.id),style:{padding:"5px 10px",backgroundColor:B.hit?"#4CAF50":"#FF9800",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:B.hit?"Restore":"Mark Hit"}),V("button",{onClick:()=>A(B.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})})},B.id)})})]}),d.length===0&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),l==="hits"&&Y($u,{children:[Y("div",{style:{marginBottom:"30px"},children:[V("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),V("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),y&&V("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),E&&V("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:E}),!y&&!E&&Y("div",{style:{display:"grid",gap:"20px"},children:[d.map(B=>B.hits&&B.hits.length>0&&Y("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[Y("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[Y("div",{children:[V("h2",{style:{margin:0,color:"#4CAF50"},children:B.name}),Y("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[B.type," • ",B.hits.length," hit record",B.hits.length!==1?"s":""]})]}),V("button",{onClick:()=>X(W===B.id?null:B.id),style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:W===B.id?"Cancel":"+ Add Hit"})]}),W===B.id&&Y("form",{onSubmit:te=>G(B.id,te),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date"}),V("input",{type:"date",required:!0,value:J.date,onChange:te=>x({...J,date:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),V("input",{type:"number",value:J.expectedRepairTime,onChange:te=>x({...J,expectedRepairTime:Number(te.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{style:{gridColumn:"1 / -1"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Video Link"}),V("input",{type:"url",value:J.videoLink,onChange:te=>x({...J,videoLink:te.target.value}),placeholder:"https://...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{style:{gridColumn:"1 / -1"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),V("textarea",{value:J.notes,onChange:te=>x({...J,notes:te.target.value}),rows:3,style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical"}})]}),V("div",{style:{gridColumn:"1 / -1"},children:V("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save Hit Record"})})]}),V("div",{style:{display:"grid",gap:"10px"},children:B.hits.map(te=>V("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:Y("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[Y("div",{style:{flex:1},children:[Y("div",{style:{display:"flex",gap:"15px",marginBottom:"10px"},children:[Y("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),Y("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",te.id]})]}),Y("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),V("div",{style:{color:"#fff"},children:new Date(te.date).toLocaleDateString()})]}),te.expectedRepairTime&&Y("div",{children:[V("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),Y("div",{style:{color:"#FF9800"},children:[te.expectedRepairTime," days"]})]})]}),te.videoLink&&V("div",{style:{marginTop:"10px"},children:V("a",{href:te.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:"🎥 View Video"})}),te.notes&&Y("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[V("strong",{children:"Notes:"})," ",te.notes]})]}),V("button",{onClick:()=>de(B.id,te.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})},te.id))})]},B.id)),d.every(B=>!B.hits||B.hits.length===0)&&Y("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[V("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"💥"}),V("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),V("p",{children:"Hit records will appear here when facilities are marked as hit."})]})]})]})]})]}):V("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:Y("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[V("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),Y("form",{onSubmit:D,children:[Y("div",{style:{marginBottom:"20px"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Username"}),V("input",{type:"text",value:n,onChange:B=>i(B.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),Y("div",{style:{marginBottom:"30px"},children:[V("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),V("input",{type:"password",value:s,onChange:B=>o(B.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),V("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),V("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Default: admin / admin123"})]})]})})};function qT(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Gb=1;function Kb(t){return Object.freeze({__version:Gb,map:t})}function ZT(t,e){return Object.freeze({...t,...e})}const GT=q.createContext(null),KT=GT.Provider;function Og(){const t=q.useContext(GT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function QT(t){function e(n,i){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(i,()=>s),n.children==null?null:Is.createElement(KT,{value:o},n.children)}return q.forwardRef(e)}function Qb(t){function e(n,i){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(i,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?u1.createPortal(n.children,h):null}return q.forwardRef(e)}function Yb(t){function e(n,i){const{instance:s}=t(n).current;return q.useImperativeHandle(i,()=>s),null}return q.forwardRef(e)}function Mg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function dd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Xb(t,e){return function(i,s){const o=Og(),l=t(dd(i,o),o);return qT(o.map,i.attribution),Mg(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Up={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(kI,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,w,N;return N=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(N,a),f=!0)},w}function y(r,a,c){var f=a[1],g=a[0],w=f-g;return r===f&&c?r:((r-g)%w+w)%w+g}function v(){return!1}function E(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function k(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return k(r).split(/\s+/)}function M(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function U(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(C,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var x=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-x));return x=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||J("RequestAnimationFrame")||I,R=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function b(r,a,c){if(c&&S===I)r.call(a);else return S.call(window,l(r,a))}function D(r){r&&R.call(window,r)}var A={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:y,falseFn:v,formatNum:E,trim:k,splitWords:F,setOptions:M,getParamString:U,template:P,isArray:O,indexOf:W,emptyImageUrl:X,requestFn:S,cancelFn:R,requestAnimFrame:b,cancelAnimFrame:D};function De(){}De.extend=function(r){var a=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Yt(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,N=f._initHooks.length;w<N;w++)f._initHooks[w].call(this)}},a},De.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},De.mergeOptions=function(r){return s(this.prototype.options,r),this},De.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Yt(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var tt={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=F(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=F(r);for(var g=arguments.length===1,w=0,N=r.length;w<N;w++)g?this._off(r[w]):this._off(r[w],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,w;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=v;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var N=this._listens(r,a,c);if(N!==!1){var j=f[N];this._firingCount&&(j.fn=v,this._events[r]=f=f.slice()),f.splice(N,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,N=g.length;w<N;w++){var j=g[w],$=j.fn;j.once&&this.off(r,$,j.ctx),$.call(j.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[r];if(w&&w.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var N in this._eventParents)if(this._eventParents[N].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=F(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};tt.addEventListener=tt.on,tt.removeEventListener=tt.clearAllEventListeners=tt.off,tt.addOneTimeEventListener=tt.once,tt.fireEvent=tt.fire,tt.hasEventListeners=tt.listens;var un=De.extend(tt);function G(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var de=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(r){return this.clone()._add(B(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(B(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new G(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new G(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(r){r=B(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=B(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=B(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function B(r,a,c){return r instanceof G?r:O(r)?new G(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new G(r.x,r.y):new G(r,a,c)}function te(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}te.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof G||typeof r[0]=="number"||"x"in r)a=c=B(r);else if(r=ae(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof G?r=B(r):r=ae(r),r instanceof te?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ae(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>=a.x&&f.x<=c.x,N=g.y>=a.y&&f.y<=c.y;return w&&N},overlaps:function(r){r=ae(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>a.x&&f.x<c.x,N=g.y>a.y&&f.y<c.y;return w&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ae(B(a.x-f,a.y-g),B(c.x+f,c.y+g))},equals:function(r){return r?(r=ae(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ae(r,a){return!r||r instanceof te?r:new te(r,a)}function Le(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Le.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof Ee)f=r,g=r;else if(r instanceof Le){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(le(r)||Te(r)):this;return!a&&!c?(this._southWest=new Ee(f.lat,f.lng),this._northEast=new Ee(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Le(new Ee(a.lat-f,a.lng-g),new Ee(c.lat+f,c.lng+g))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Ee||"lat"in r?r=le(r):r=Te(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Le?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Te(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,N=g.lng>=a.lng&&f.lng<=c.lng;return w&&N},overlaps:function(r){r=Te(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,N=g.lng>a.lng&&f.lng<c.lng;return w&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Te(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Te(r,a){return r instanceof Le?r:new Le(r,a)}function Ee(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}Ee.prototype={equals:function(r,a){if(!r)return!1;r=le(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return Lt.distance(this,le(r))},wrap:function(){return Lt.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Te([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function le(r,a,c){return r instanceof Ee?r:O(r)&&typeof r[0]!="object"?r.length===3?new Ee(r[0],r[1],r[2]):r.length===2?new Ee(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Ee(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new Ee(r,a,c)}var Fe={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new te(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new Ee(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var w=r.getSouthWest(),N=r.getNorthEast(),j=new Ee(w.lat-f,w.lng-g),$=new Ee(N.lat-f,N.lng-g);return new Le(j,$)}},Lt=s({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,w=Math.sin((a.lat-r.lat)*c/2),N=Math.sin((a.lng-r.lng)*c/2),j=w*w+Math.cos(f)*Math.cos(g)*N*N,$=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*$}}),kn=6378137,vi={R:kn,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new G(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new Ee((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=kn*Math.PI;return new te([-r,-r],[r,r])}()};function Ji(r,a,c,f){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Ji.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new G((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function er(r,a,c,f){return new Ji(r,a,c,f)}var zs=s({},Lt,{code:"EPSG:3857",projection:vi,transformation:function(){var r=.5/(Math.PI*vi.R);return er(r,.5,-r,.5)}()}),pa=s({},zs,{code:"EPSG:900913"});function ma(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function du(r,a){var c="",f,g,w,N,j,$;for(f=0,w=r.length;f<w;f++){for(j=r[f],g=0,N=j.length;g<N;g++)$=j[g],c+=(g?"L":"M")+$.x+" "+$.y;c+=a?ue.svg?"z":"x":""}return c||"M0 0"}var Qr=document.documentElement.style,tr="ActiveXObject"in window,ga=tr&&!document.addEventListener,ht="msLaunchUri"in navigator&&!("documentMode"in document),dt=hn("webkit"),Yr=hn("android"),fu=hn("android 2")||hn("android 3"),pu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),md=Yr&&hn("Google")&&pu<537&&!("AudioNode"in window),wi=!!window.opera,_a=!ht&&hn("chrome"),ya=hn("gecko")&&!dt&&!wi&&!tr,va=!_a&&hn("safari"),mu=hn("phantom"),gu="OTransition"in Qr,_u=navigator.platform.indexOf("Win")===0,wa=tr&&"transition"in Qr,Ei="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!fu,Bs="MozPerspective"in Qr,Ea=!window.L_DISABLE_3D&&(wa||Ei||Bs)&&!gu&&!mu,cn=typeof orientation<"u"||hn("mobile"),yu=cn&&dt,Us=cn&&Ei,Ta=!window.PointerEvent&&window.MSPointerEvent,nr=!!(window.PointerEvent||Ta),Ia="ontouchstart"in window||!!window.TouchEvent,It=!window.L_NO_TOUCH&&(Ia||nr),vu=cn&&wi,Xr=cn&&ya,Jr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,gd=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return r}(),_d=function(){return!!document.createElement("canvas").getContext}(),Zn=!!(document.createElementNS&&ma("svg").createSVGRect),yd=!!Zn&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vd=!Zn&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),js=navigator.platform.indexOf("Mac")===0,wu=navigator.platform.indexOf("Linux")===0;function hn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ue={ie:tr,ielt9:ga,edge:ht,webkit:dt,android:Yr,android23:fu,androidStock:md,opera:wi,chrome:_a,gecko:ya,safari:va,phantom:mu,opera12:gu,win:_u,ie3d:wa,webkit3d:Ei,gecko3d:Bs,any3d:Ea,mobile:cn,mobileWebkit:yu,mobileWebkit3d:Us,msPointer:Ta,pointer:nr,touch:It,touchNative:Ia,mobileOpera:vu,mobileGecko:Xr,retina:Jr,passiveEvents:gd,canvas:_d,svg:Zn,vml:vd,inlineSvg:yd,mac:js,linux:wu},ir=ue.msPointer?"MSPointerDown":"pointerdown",Eu=ue.msPointer?"MSPointerMove":"pointermove",Rn=ue.msPointer?"MSPointerUp":"pointerup",Sa=ue.msPointer?"MSPointerCancel":"pointercancel",Hs={touchstart:ir,touchmove:Eu,touchend:Rn,touchcancel:Sa},$s={touchstart:Ti,touchmove:Kn,touchend:Kn,touchcancel:Kn},Gn={},Pa=!1;function wd(r,a,c){return a==="touchstart"&&Ca(),$s[a]?(c=$s[a].bind(this,c),r.addEventListener(Hs[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function Tu(r,a,c){if(!Hs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Hs[a],c,!1)}function Ed(r){Gn[r.pointerId]=r}function Ws(r){Gn[r.pointerId]&&(Gn[r.pointerId]=r)}function xa(r){delete Gn[r.pointerId]}function Ca(){Pa||(document.addEventListener(ir,Ed,!0),document.addEventListener(Eu,Ws,!0),document.addEventListener(Rn,xa,!0),document.addEventListener(Sa,xa,!0),Pa=!0)}function Kn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Gn)a.touches.push(Gn[c]);a.changedTouches=[a],r(a)}}function Ti(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ft(a),Kn(r,a)}function Aa(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Td=200;function Iu(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var N=ba(w);if(!(N.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!N.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var j=Date.now();j-c<=Td?(f++,f===2&&a(Aa(w))):f=1,c=j}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Su(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var qs=es(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ii=es(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Zs=Ii==="webkitTransition"||Ii==="OTransition"?Ii+"End":"transitionend";function ka(r){return typeof r=="string"?document.getElementById(r):r}function rr(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function ke(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function je(r){var a=r.parentNode;a&&a.removeChild(r)}function dn(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function St(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function wn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Si(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=Qn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ye(r,a){if(r.classList!==void 0)for(var c=F(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!Si(r,a)){var w=Qn(r);sr(r,(w?w+" ":"")+a)}}function me(r,a){r.classList!==void 0?r.classList.remove(a):sr(r,k((" "+Qn(r)+" ").replace(" "+a+" "," ")))}function sr(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function Qn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function yt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Id(r,a)}function Id(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function es(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Pi(r,a,c){var f=a||new G(0,0);r.style[qs]=(ue.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(r,a){r._leaflet_pos=a,ue.any3d?Pi(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function xi(r){return r._leaflet_pos||new G(0,0)}var ts,Ln,bn;if("onselectstart"in document)ts=function(){ve(window,"selectstart",ft)},Ln=function(){Ne(window,"selectstart",ft)};else{var or=es(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ts=function(){if(or){var r=document.documentElement.style;bn=r[or],r[or]="none"}},Ln=function(){or&&(document.documentElement.style[or]=bn,bn=void 0)}}function Gs(){ve(window,"dragstart",ft)}function Ks(){Ne(window,"dragstart",ft)}var ns,Qs;function Yn(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ys(),ns=r,Qs=r.style.outlineStyle,r.style.outlineStyle="none",ve(window,"keydown",Ys))}function Ys(){ns&&(ns.style.outlineStyle=Qs,ns=void 0,Qs=void 0,Ne(window,"keydown",Ys))}function Pu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ra(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Xn={__proto__:null,TRANSFORM:qs,TRANSITION:Ii,TRANSITION_END:Zs,get:ka,getStyle:rr,create:ke,remove:je,empty:dn,toFront:St,toBack:wn,hasClass:Si,addClass:ye,removeClass:me,setClass:sr,getClass:Qn,setOpacity:yt,testProp:es,setTransform:Pi,setPosition:Xe,getPosition:xi,get disableTextSelection(){return ts},get enableTextSelection(){return Ln},disableImageDrag:Gs,enableImageDrag:Ks,preventOutline:Yn,restoreOutline:Ys,getSizedParentNode:Pu,getScale:Ra};function ve(r,a,c,f){if(a&&typeof a=="object")for(var g in a)Ai(r,g,a[g],c);else{a=F(a);for(var w=0,N=a.length;w<N;w++)Ai(r,a[w],c,f)}return this}var Xt="_leaflet_events";function Ne(r,a,c,f){if(arguments.length===1)La(r),delete r[Xt];else if(a&&typeof a=="object")for(var g in a)Xs(r,g,a[g],c);else if(a=F(a),arguments.length===2)La(r,function(j){return W(a,j)!==-1});else for(var w=0,N=a.length;w<N;w++)Xs(r,a[w],c,f);return this}function La(r,a){for(var c in r[Xt]){var f=c.split(/\d/)[0];(!a||a(f))&&Xs(r,f,null,null,c)}}var Ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ai(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[Xt]&&r[Xt][g])return this;var w=function(j){return c.call(f||r,j||window.event)},N=w;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?w=wd(r,a,w):ue.touch&&a==="dblclick"?w=Iu(r,w):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Ci[a]||a,w,ue.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(j){j=j||window.event,eo(r,j)&&N(j)},r.addEventListener(Ci[a],w,!1)):r.addEventListener(a,N,!1):r.attachEvent("on"+a,w),r[Xt]=r[Xt]||{},r[Xt][g]=w}function Xs(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=r[Xt]&&r[Xt][g];if(!w)return this;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?Tu(r,a,w):ue.touch&&a==="dblclick"?Su(r,w):"removeEventListener"in r?r.removeEventListener(Ci[a]||a,w,!1):r.detachEvent("on"+a,w),r[Xt][g]=null}function Nn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ze(r){return Ai(r,"wheel",Nn),this}function is(r){return ve(r,"mousedown touchstart dblclick contextmenu",Nn),r._leaflet_disable_click=!0,this}function ft(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Jn(r){return ft(r),Nn(r),this}function ba(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Na(r,a){if(!a)return new G(r.clientX,r.clientY);var c=Ra(a),f=c.boundingClientRect;return new G((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Js=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function On(r){return ue.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Js:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function eo(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Sd={__proto__:null,on:ve,off:Ne,stopPropagation:Nn,disableScrollPropagation:ze,disableClickPropagation:is,preventDefault:ft,stop:Jn,getPropagationPath:ba,getMousePosition:Na,getWheelDelta:On,isExternalTarget:eo,addListener:ve,removeListener:Ne},ar=un.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=xi(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Se=un.extend({options:{crs:zs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=M(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(le(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ii&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Zs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(le(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=r instanceof G?r:this.latLngToContainerPoint(r),N=w.subtract(g).multiplyBy(1-1/f),j=this.containerPointToLatLng(g.add(N));return this.setView(j,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Te(r);var c=B(a.paddingTopLeft||a.padding||[0,0]),f=B(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),N=this.project(r.getSouthWest(),g),j=this.project(r.getNorthEast(),g),$=this.unproject(N.add(j).divideBy(2).add(w),g);return{center:$,zoom:g}},fitBounds:function(r,a){if(r=Te(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=B(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ar,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ue.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),w=this.getSize(),N=this._zoom;r=le(r),a=a===void 0?N:a;var j=Math.max(w.x,w.y),$=j*this.getZoomScale(N,a),Q=g.distanceTo(f)||1,re=1.42,fe=re*re;function Ie(ot){var ju=ot?-1:1,SI=ot?$:j,PI=$*$-j*j+ju*fe*fe*Q*Q,xI=2*SI*fe*Q,Rd=PI/xI,i_=Math.sqrt(Rd*Rd+1)-Rd,CI=i_<1e-9?-18:Math.log(i_);return CI}function Wt(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function vt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function En(ot){return Wt(ot)/vt(ot)}var en=Ie(0);function lo(ot){return j*(vt(en)/vt(en+re*ot))}function wI(ot){return j*(vt(en)*En(en+re*ot)-Wt(en))/fe}function EI(ot){return 1-Math.pow(1-ot,1.5)}var TI=Date.now(),t_=(Ie(1)-en)/re,II=c.duration?1e3*c.duration:1e3*t_*.8;function n_(){var ot=(Date.now()-TI)/II,ju=EI(ot)*t_;ot<=1?(this._flyToFrame=b(n_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(wI(ju)/Q)),N),this.getScaleZoom(j/lo(ju),N),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),n_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Te(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Te(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=B(a.paddingTopLeft||a.padding||[0,0]),f=B(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(r),N=this.getPixelBounds(),j=ae([N.min.add(c),N.max.subtract(f)]),$=j.getSize();if(!j.contains(w)){this._enforcingBounds=!0;var Q=w.subtract(j.getCenter()),re=j.extend(w).getSize().subtract($);g.x+=Q.x<0?-re.x:re.x,g.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(r.animate&&r.pan?this.panBy(w):(r.pan&&this._rawPanBy(w),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new Ee(a,c),g=f.toBounds(r.coords.accuracy*2),w=this._locateOptions;if(w.setView){var N=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(N,w.maxZoom):N)}var j={latlng:f,bounds:g,timestamp:r.timestamp};for(var $ in r.coords)typeof r.coords[$]=="number"&&(j[$]=r.coords[$]);this.fire("locationfound",j)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)je(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=ke("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Le(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Te(r),c=B(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),N=r.getNorthWest(),j=r.getSouthEast(),$=this.getSize().subtract(c),Q=ae(this.project(j,f),this.project(N,f)).getSize(),re=ue.any3d?this.options.zoomSnap:1,fe=$.x/Q.x,Ie=$.y/Q.y,Wt=a?Math.max(fe,Ie):Math.min(fe,Ie);return f=this.getScaleZoom(Wt,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new te(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(le(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(B(r),a)},layerPointToLatLng:function(r){var a=B(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(le(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(le(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Te(r))},distance:function(r,a){return this.options.crs.distance(le(r),le(a))},containerPointToLayerPoint:function(r){return B(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return B(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(B(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(r)))},mouseEventToContainerPoint:function(r){return Na(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ka(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ye(r,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=rr(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(r.markerPane,"leaflet-zoom-hide"),ye(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Xe(this._mapPane,new G(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Ne:ve;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=r.target||r.srcElement,N=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){N=!0;break}if(f&&f.listens(a,!0)&&(g&&!eo(w,r)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!N&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&Yn(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var w=[],N=0;N<c.length;N++)c[N].listens(a,!0)&&w.push(c[N]);g=w.concat(g)}if(g.length){a==="contextmenu"&&ft(r);var j=g[0],$={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Q=j.getLatLng&&(!j._radius||j._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(r),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?j.getLatLng():this.layerPointToLatLng($.layerPoint)}for(N=0;N<g.length;N++)if(g[N].fire(a,$,!0),$.originalEvent._stopped||g[N].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return xi(this._mapPane)||new G(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ae([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),w=new te(f.subtract(g),f.add(g)),N=this._getBoundsOffset(w,c,a);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?r:this.unproject(f.add(N),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new te(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ae(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),w=f.max.subtract(r.max),N=this._rebound(g.x,-w.x),j=this._rebound(g.y,-w.y);return new G(N,j)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ue.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){me(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=qs,f=this._proxy.style[c];Pi(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Pi(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(b(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&me(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oa(r,a){return new Se(r,a)}var bt=De.extend({options:{position:"topright"},initialize:function(r){M(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return ye(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),lr=function(r){return new bt(r)};Se.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=ke("div",a+"control-container",this._container);function f(g,w){var N=a+g+" "+a+w;r[g+w]=ke("div",N,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)je(this._controlCorners[r]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rs=bt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){M(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return bt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):me(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return me(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=ke("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),is(a),ze(a);var f=this._section=ke("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ve(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=ke("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ve(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){ft(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=ke("div",r+"-base",f),this._separator=ke("div",r+"-separator",f),this._overlaysList=ke("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dn(this._baseLayersList),dn(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ve(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var N=r.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=r.length-1;w>=0;w--)a=r[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ve(r,"click",ft),this.expand();var a=this;setTimeout(function(){Ne(r,"click",ft),a._preventClick=!1})}}),Pd=function(r,a,c){return new rs(r,a,c)},to=bt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=ke("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var w=ke("a",c,f);return w.innerHTML=r,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),is(w),ve(w,"click",Jn),ve(w,"click",g,this),ve(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";me(this._zoomInButton,a),me(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ye(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ye(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new to,this.addControl(this.zoomControl))});var ss=function(r){return new to(r)},Ma=bt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=ke("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=ke("div",a,c)),r.imperial&&(this._iScale=ke("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),xu=function(r){return new Ma(r)},Da='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',os=bt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Da+" ":"")+"Leaflet</a>"},initialize:function(r){M(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ke("div","leaflet-control-attribution"),is(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new os().addTo(this)});var Cu=function(r){return new os(r)};bt.Layers=rs,bt.Zoom=to,bt.Scale=Ma,bt.Attribution=os,lr.layers=Pd,lr.zoom=ss,lr.scale=xu,lr.attribution=Cu;var $t=De.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$t.addTo=function(r,a){return r.addHandler(a,this),this};var Au={Events:tt},Va=ue.touch?"touchstart mousedown":"mousedown",Nt=un.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){M(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ve(this._dragStartTarget,Va,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nt._dragging===this&&this.finishDrag(!0),Ne(this._dragStartTarget,Va,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Si(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Nt._dragging===this&&this.finishDrag();return}if(!(Nt._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Nt._dragging=this,this._preventOutline&&Yn(this._element),Gs(),ts(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Pu(this._element);this._startPoint=new G(a.clientX,a.clientY),this._startPos=xi(this._element),this._parentScale=Ra(c);var f=r.type==="mousedown";ve(document,f?"mousemove":"touchmove",this._onMove,this),ve(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new G(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,ft(r),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){me(document.body,"leaflet-dragging"),this._lastTarget&&(me(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ne(document,"mousemove touchmove",this._onMove,this),Ne(document,"mouseup touchend touchcancel",this._onUp,this),Ks(),Ln();var a=this._moved&&this._moving;this._moving=!1,Nt._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Fa(r,a,c){var f,g=[1,4,2,8],w,N,j,$,Q,re,fe,Ie;for(w=0,re=r.length;w<re;w++)r[w]._code=z(r[w],a);for(j=0;j<4;j++){for(fe=g[j],f=[],w=0,re=r.length,N=re-1;w<re;N=w++)$=r[w],Q=r[N],$._code&fe?Q._code&fe||(Ie=T(Q,$,fe,a,c),Ie._code=z(Ie,a),f.push(Ie)):(Q._code&fe&&(Ie=T(Q,$,fe,a,c),Ie._code=z(Ie,a),f.push(Ie)),f.push($));r=f}return r}function za(r,a){var c,f,g,w,N,j,$,Q,re;if(!r||r.length===0)throw new Error("latlngs not passed");he(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var fe=le([0,0]),Ie=Te(r),Wt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Wt<1700&&(fe=no(r));var vt=r.length,En=[];for(c=0;c<vt;c++){var en=le(r[c]);En.push(a.project(le([en.lat-fe.lat,en.lng-fe.lng])))}for(j=$=Q=0,c=0,f=vt-1;c<vt;f=c++)g=En[c],w=En[f],N=g.y*w.x-w.y*g.x,$+=(g.x+w.x)*N,Q+=(g.y+w.y)*N,j+=N*3;j===0?re=En[0]:re=[$/j,Q/j];var lo=a.unproject(B(re));return le([lo.lat+fe.lat,lo.lng+fe.lng])}function no(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var w=le(r[g]);a+=w.lat,c+=w.lng,f++}return le([a/f,c/f])}var ku={__proto__:null,clipPolygon:Fa,polygonCenter:za,centroid:no};function as(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=u(r,c),r=Lu(r,c),r}function Ot(r,a,c){return Math.sqrt(ne(r,a,c,!0))}function Ru(r,a,c){return ne(r,a,c)}function Lu(r,a){var c=r.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,ei(r,g,a,0,c-1);var w,N=[];for(w=0;w<c;w++)g[w]&&N.push(r[w]);return N}function ei(r,a,c,f,g){var w=0,N,j,$;for(j=f+1;j<=g-1;j++)$=ne(r[j],r[f],r[g],!0),$>w&&(N=j,w=$);w>c&&(a[N]=1,ei(r,a,c,f,N),ei(r,a,c,N,g))}function u(r,a){for(var c=[r[0]],f=1,g=0,w=r.length;f<w;f++)H(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<w-1&&c.push(r[w-1]),c}var m;function _(r,a,c,f,g){var w=f?m:z(r,c),N=z(a,c),j,$,Q;for(m=N;;){if(!(w|N))return[r,a];if(w&N)return!1;j=w||N,$=T(r,a,j,c,g),Q=z($,c),j===w?(r=$,w=Q):(a=$,N=Q)}}function T(r,a,c,f,g){var w=a.x-r.x,N=a.y-r.y,j=f.min,$=f.max,Q,re;return c&8?(Q=r.x+w*($.y-r.y)/N,re=$.y):c&4?(Q=r.x+w*(j.y-r.y)/N,re=j.y):c&2?(Q=$.x,re=r.y+N*($.x-r.x)/w):c&1&&(Q=j.x,re=r.y+N*(j.x-r.x)/w),new G(Q,re,g)}function z(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function H(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function ne(r,a,c,f){var g=a.x,w=a.y,N=c.x-g,j=c.y-w,$=N*N+j*j,Q;return $>0&&(Q=((r.x-g)*N+(r.y-w)*j)/$,Q>1?(g=c.x,w=c.y):Q>0&&(g+=N*Q,w+=j*Q)),N=r.x-g,j=r.y-w,f?N*N+j*j:new G(g,w)}function he(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Je(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),he(r)}function Oe(r,a){var c,f,g,w,N,j,$,Q;if(!r||r.length===0)throw new Error("latlngs not passed");he(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var re=le([0,0]),fe=Te(r),Ie=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ie<1700&&(re=no(r));var Wt=r.length,vt=[];for(c=0;c<Wt;c++){var En=le(r[c]);vt.push(a.project(le([En.lat-re.lat,En.lng-re.lng])))}for(c=0,f=0;c<Wt-1;c++)f+=vt[c].distanceTo(vt[c+1])/2;if(f===0)Q=vt[0];else for(c=0,w=0;c<Wt-1;c++)if(N=vt[c],j=vt[c+1],g=N.distanceTo(j),w+=g,w>f){$=(w-f)/g,Q=[j.x-$*(j.x-N.x),j.y-$*(j.y-N.y)];break}var en=a.unproject(B(Q));return le([en.lat+re.lat,en.lng+re.lng])}var st={__proto__:null,simplify:as,pointToSegmentDistance:Ot,closestPointOnSegment:Ru,clipSegment:_,_getEdgeIntersection:T,_getBitCode:z,_sqClosestPointOnSegment:ne,isFlat:he,_flat:Je,polylineCenter:Oe},Jt={project:function(r){return new G(r.lng,r.lat)},unproject:function(r){return new Ee(r.y,r.x)},bounds:new te([-180,-90],[180,90])},Mn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),N=w*Math.sin(f),j=Math.tan(Math.PI/4-f/2)/Math.pow((1-N)/(1+N),w/2);return f=-c*Math.log(Math.max(j,1e-10)),new G(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-r.y/c),N=Math.PI/2-2*Math.atan(w),j=0,$=.1,Q;j<15&&Math.abs($)>1e-7;j++)Q=g*Math.sin(N),Q=Math.pow((1-Q)/(1+Q),g/2),$=Math.PI/2-2*Math.atan(w*Q)-N,N+=$;return new Ee(N*a,r.x*a/c)}},ti={__proto__:null,LonLat:Jt,Mercator:Mn,SphericalMercator:vi},ni=s({},Lt,{code:"EPSG:3395",projection:Mn,transformation:function(){var r=.5/(Math.PI*Mn.R);return er(r,.5,-r,.5)}()}),ls=s({},Lt,{code:"EPSG:4326",projection:Jt,transformation:er(1/180,1,-1/180,.5)}),Ba=s({},Fe,{projection:Jt,transformation:er(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});Fe.Earth=Lt,Fe.EPSG3395=ni,Fe.EPSG3857=zs,Fe.EPSG900913=pa,Fe.EPSG4326=ls,Fe.Simple=Ba;var Dn=un.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var io=Dn.extend({initialize:function(r,a){M(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),JT=function(r,a){return new io(r,a)},ki=io.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),io.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),io.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Le;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),eI=function(r,a){return new ki(r,a)},ro=De.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){M(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=B(f),w=B(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),w&&(r.style.marginLeft=-w.x+"px",r.style.marginTop=-w.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ue.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function tI(r){return new ro(r)}var Ua=ro.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ua.imagePath!="string"&&(Ua.imagePath=this._detectIconPath()),(this.options.imagePath||Ua.imagePath)+ro.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ke("div","leaflet-default-icon-path",document.body),a=rr(r,"background-image")||rr(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Dg=$t.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Nt(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&me(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=xi(a._icon),N=c.getPixelBounds(),j=c.getPixelOrigin(),$=ae(N.min._subtract(j).add(g),N.max._subtract(j).subtract(g));if(!$.contains(w)){var Q=B((Math.max($.max.x,w.x)-$.max.x)/(N.max.x-$.max.x)-(Math.min($.min.x,w.x)-$.min.x)/(N.min.x-$.min.x),(Math.max($.max.y,w.y)-$.max.y)/(N.max.y-$.max.y)-(Math.min($.min.y,w.y)-$.min.y)/(N.min.y-$.min.y)).multiplyBy(f);c.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),Xe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=b(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=xi(a._icon),g=a._map.layerPointToLatLng(f);c&&Xe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),bu=Dn.extend({options:{icon:new Ua,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){M(this,a),this._latlng=le(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=le(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ye(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(ye(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Dg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Dg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&yt(this._icon,r),this._shadow&&yt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?B(a.iconSize):B(0,0),f=a.iconAnchor?B(a.iconAnchor):B(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nI(r,a){return new bu(r,a)}var ur=Dn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return M(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nu=ur.extend({options:{fill:!0,radius:10},initialize:function(r,a){M(this,a),this._latlng=le(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=le(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return ur.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new te(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function iI(r,a){return new Nu(r,a)}var xd=Nu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),M(this,a),this._latlng=le(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Le(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ur.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Lt.distance){var g=Math.PI/180,w=this._mRadius/Lt.R/g,N=c.project([a+w,r]),j=c.project([a-w,r]),$=N.add(j).divideBy(2),Q=c.unproject($).lat,re=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Q*g))/(Math.cos(a*g)*Math.cos(Q*g)))/g;(isNaN(re)||re===0)&&(re=w/Math.cos(Math.PI/180*a)),this._point=$.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:$.x-c.project([Q,r-re]).x,this._radiusY=$.y-N.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function rI(r,a,c){return new xd(r,a,c)}var Ri=ur.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){M(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=ne,g,w,N=0,j=this._parts.length;N<j;N++)for(var $=this._parts[N],Q=1,re=$.length;Q<re;Q++){g=$[Q-1],w=$[Q];var fe=f(r,g,w,!0);fe<a&&(a=fe,c=f(r,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oe(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=le(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Le,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return he(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=he(r),f=0,g=r.length;f<g;f++)c?(a[f]=le(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new G(r,r);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof Ee,g=r.length,w,N;if(f){for(N=[],w=0;w<g;w++)N[w]=this._map.latLngToLayerPoint(r[w]),c.extend(N[w]);a.push(N)}else for(w=0;w<g;w++)this._projectLatlngs(r[w],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,N,j,$;for(c=0,g=0,w=this._rings.length;c<w;c++)for($=this._rings[c],f=0,N=$.length;f<N-1;f++)j=_($[f],$[f+1],r,f,!0),j&&(a[g]=a[g]||[],a[g].push(j[0]),(j[1]!==$[f+1]||f===N-2)&&(a[g].push(j[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=as(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,w,N,j,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,w=this._parts.length;c<w;c++)for(j=this._parts[c],f=0,N=j.length,g=N-1;f<N;g=f++)if(!(!a&&f===0)&&Ot(r,j[g],j[f])<=$)return!0;return!1}});function sI(r,a){return new Ri(r,a)}Ri._flat=Je;var so=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return za(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Ri.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof Ee&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Ri.prototype._setLatLngs.call(this,r),he(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return he(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new G(a,a);if(r=new te(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=Fa(this._rings[f],r,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,w,N,j,$,Q;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(w=0,$=this._parts.length;w<$;w++)for(c=this._parts[w],N=0,Q=c.length,j=Q-1;N<Q;j=N++)f=c[N],g=c[j],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Ri.prototype._containsPoint.call(this,r,!0)}});function oI(r,a){return new so(r,a)}var Li=ki.extend({initialize:function(r,a){M(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(r))return this;var N=Ou(r,w);return N?(N.feature=Vu(r),N.defaultOptions=N.options,this.resetStyle(N),w.onEachFeature&&w.onEachFeature(r,N),this.addLayer(N)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Ou(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,N=a&&a.coordsToLatLng||Cd,j,$,Q,re;if(!f&&!c)return null;switch(c.type){case"Point":return j=N(f),Vg(w,r,j,a);case"MultiPoint":for(Q=0,re=f.length;Q<re;Q++)j=N(f[Q]),g.push(Vg(w,r,j,a));return new ki(g);case"LineString":case"MultiLineString":return $=Mu(f,c.type==="LineString"?0:1,N),new Ri($,a);case"Polygon":case"MultiPolygon":return $=Mu(f,c.type==="Polygon"?1:2,N),new so($,a);case"GeometryCollection":for(Q=0,re=c.geometries.length;Q<re;Q++){var fe=Ou({geometry:c.geometries[Q],type:"Feature",properties:r.properties},a);fe&&g.push(fe)}return new ki(g);case"FeatureCollection":for(Q=0,re=c.features.length;Q<re;Q++){var Ie=Ou(c.features[Q],a);Ie&&g.push(Ie)}return new ki(g);default:throw new Error("Invalid GeoJSON object.")}}function Vg(r,a,c,f){return r?r(a,c):new bu(c,f&&f.markersInheritOptions&&f)}function Cd(r){return new Ee(r[1],r[0],r[2])}function Mu(r,a,c){for(var f=[],g=0,w=r.length,N;g<w;g++)N=a?Mu(r[g],a-1,c):(c||Cd)(r[g]),f.push(N);return f}function Ad(r,a){return r=le(r),r.alt!==void 0?[E(r.lng,a),E(r.lat,a),E(r.alt,a)]:[E(r.lng,a),E(r.lat,a)]}function Du(r,a,c,f){for(var g=[],w=0,N=r.length;w<N;w++)g.push(a?Du(r[w],he(r[w])?0:a-1,c,f):Ad(r[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function oo(r,a){return r.feature?s({},r.feature,{geometry:a}):Vu(a)}function Vu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var kd={toGeoJSON:function(r){return oo(this,{type:"Point",coordinates:Ad(this.getLatLng(),r)})}};bu.include(kd),xd.include(kd),Nu.include(kd),Ri.include({toGeoJSON:function(r){var a=!he(this._latlngs),c=Du(this._latlngs,a?1:0,!1,r);return oo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),so.include({toGeoJSON:function(r){var a=!he(this._latlngs),c=a&&!he(this._latlngs[0]),f=Du(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),oo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),io.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),oo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(r);if(c)f.push(w.geometry);else{var N=Vu(w);N.type==="FeatureCollection"?f.push.apply(f,N.features):f.push(N)}}}),c?oo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Fg(r,a){return new Li(r,a)}var aI=Fg,Fu=Dn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Te(a),M(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&St(this._image),this},bringToBack:function(){return this._map&&wn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Te(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:ke("img");if(ye(a,"leaflet-image-layer"),this._zoomAnimated&&ye(a,"leaflet-zoom-animated"),this.options.className&&ye(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Pi(this._image,c,a)},_reset:function(){var r=this._image,a=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),lI=function(r,a,c){return new Fu(r,a,c)},zg=Fu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:ke("video");if(ye(a,"leaflet-image-layer"),this._zoomAnimated&&ye(a,"leaflet-zoom-animated"),this.options.className&&ye(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var N=ke("source");N.src=this._url[w],a.appendChild(N)}}});function uI(r,a,c){return new zg(r,a,c)}var Bg=Fu.extend({_initImage:function(){var r=this._image=this._url;ye(r,"leaflet-image-layer"),this._zoomAnimated&&ye(r,"leaflet-zoom-animated"),this.options.className&&ye(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function cI(r,a,c){return new Bg(r,a,c)}var ii=Dn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof Ee||O(r))?(this._latlng=le(r),M(this,a)):(M(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&yt(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(l(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=le(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&St(this._container),this},bringToBack:function(){return this._map&&wn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof ki){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=B(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Dn.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(M(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var zu=ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ii.prototype.openOn.call(this,r)},onAdd:function(r){ii.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ur||this._source.on("preclick",Nn))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ur||this._source.off("preclick",Nn))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=ke("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=ke("div",r+"-content-wrapper",a);if(this._contentNode=ke("div",r+"-content",c),is(a),ze(this._contentNode),ve(a,"contextmenu",Nn),this._tipContainer=ke("div",r+"-tip-container",a),this._tip=ke("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=ke("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ve(f,"click",function(g){ft(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ye(r,w)):me(r,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(rr(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new G(this._containerLeft,-c-this._containerBottom);g._add(xi(this._container));var w=r.layerPointToContainerPoint(g),N=B(this.options.autoPanPadding),j=B(this.options.autoPanPaddingTopLeft||N),$=B(this.options.autoPanPaddingBottomRight||N),Q=r.getSize(),re=0,fe=0;w.x+f+$.x>Q.x&&(re=w.x+f-Q.x+$.x),w.x-re-j.x<0&&(re=w.x-j.x),w.y+c+$.y>Q.y&&(fe=w.y+c-Q.y+$.y),w.y-fe-j.y<0&&(fe=w.y-j.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hI=function(r,a){return new zu(r,a)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(r,a,c){return this._initOverlay(zu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Dn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(zu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof ki||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Jn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof ur)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Bu=ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ii.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ke("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),N=f.layerPointToContainerPoint(r),j=this.options.direction,$=g.offsetWidth,Q=g.offsetHeight,re=B(this.options.offset),fe=this._getAnchor();j==="top"?(a=$/2,c=Q):j==="bottom"?(a=$/2,c=0):j==="center"?(a=$/2,c=Q/2):j==="right"?(a=0,c=Q/2):j==="left"?(a=$,c=Q/2):N.x<w.x?(j="right",a=0,c=Q/2):(j="left",a=$+(re.x+fe.x)*2,c=Q/2),r=r.subtract(B(a,c,!0)).add(re).add(fe),me(g,"leaflet-tooltip-right"),me(g,"leaflet-tooltip-left"),me(g,"leaflet-tooltip-top"),me(g,"leaflet-tooltip-bottom"),ye(g,"leaflet-tooltip-"+j),Xe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&yt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),dI=function(r,a){return new Bu(r,a)};Se.include({openTooltip:function(r,a,c){return this._initOverlay(Bu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Dn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof ki||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ve(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ve(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Ug=ro.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(dn(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=B(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function fI(r){return new Ug(r)}ro.Default=Ua;var ja=Dn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){M(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),je(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(St(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof G?r:new G(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=r(c,+w));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){yt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(r-g.loaded)/200);yt(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(D(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(je(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)je(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),w=Math.floor(a/2),N=c-1,j=new G(+g,+w);j.z=+N;var $=this._tileCoordsToKey(j),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),N>f?this._retainParent(g,w,N,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var w=2*a;w<2*a+2;w++){var N=new G(g,w);N.z=c+1;var j=this._tileCoordsToKey(N),$=this._tiles[j];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ue.any3d?Pi(r.el,g,f):Xe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new te(g.subtract(w),g.add(w))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),w=g.getCenter(),N=[],j=this.options.keepBuffer,$=new te(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!$.contains(new G(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var fe=g.min.y;fe<=g.max.y;fe++)for(var Ie=g.min.x;Ie<=g.max.x;Ie++){var Wt=new G(Ie,fe);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var vt=this._tiles[this._tileCoordsToKey(Wt)];vt?vt.current=!0:N.push(Wt)}}if(N.sort(function(en,lo){return en.distanceTo(w)-lo.distanceTo(w)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var En=document.createDocumentFragment();for(Ie=0;Ie<N.length;Ie++)this._addTile(N[Ie],En);this._level.el.appendChild(En)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Te(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),w=a.unproject(f,r.z),N=a.unproject(g,r.z);return[w,N]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Le(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new G(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(je(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ye(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=v,r.onmousemove=v,ue.ielt9&&this.options.opacity<1&&yt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&b(l(this._tileReady,this,r,null,g)),Xe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(yt(c.el,0),D(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ye(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new G(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new te(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function pI(r){return new ja(r)}var ao=ja.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=M(this,a),a.detectRetina&&ue.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ve(c,"load",l(this._tileOnLoad,this,a,c)),ve(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ue.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ue.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=v,a.onerror=v,!a.complete)){a.src=X;var c=this._tiles[r].coords;je(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",X),ja.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return ja.prototype._tileReady.call(this,r,a,c)}});function jg(r,a){return new ao(r,a)}var Hg=ao.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=M(this,a);var g=a.detectRetina&&ue.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ao.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ae(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,N=(this._wmsVersion>=1.3&&this._crs===ls?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),j=ao.prototype.getTileUrl.call(this,r);return j+U(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function mI(r,a){return new Hg(r,a)}ao.WMS=Hg,jg.wms=mI;var bi=Dn.extend({options:{padding:.1},initialize:function(r){M(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ue.any3d?Pi(this._container,w,c):Xe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new te(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$g=bi.extend({options:{tolerance:0},getEvents:function(){var r=bi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ve(r,"mousemove",this._onMouseMove,this),ve(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,je(this._container),Ne(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ue.retina?2:1;Xe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,w,N=r._parts,j=N.length,$=this._ctx;if(j){for($.beginPath(),c=0;c<j;c++){for(f=0,g=N[c].length;f<g;f++)w=N[c][f],$[f?"lineTo":"moveTo"](w.x,w.y);a&&$.closePath()}this._fillStroke($,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(me(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ye(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Wg(r){return ue.canvas?new $g(r):null}var Ha=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),gI={_initContainer:function(){this._container=ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(bi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ha("shape");ye(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ha("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;je(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Ha("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Ha("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){St(r._container)},_bringToBack:function(r){wn(r._container)}},Uu=ue.vml?Ha:ma,$a=bi.extend({_initContainer:function(){this._container=Uu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Uu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),Ne(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Uu("path");r.options.className&&ye(a,r.options.className),r.options.interactive&&ye(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){je(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,du(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,w)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){St(r._path)},_bringToBack:function(r){wn(r._path)}});ue.vml&&$a.include(gI);function qg(r){return ue.svg||ue.vml?new $a(r):null}Se.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Wg(r)||qg(r)}});var Zg=so.extend({initialize:function(r,a){so.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Te(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function _I(r,a){return new Zg(r,a)}$a.create=Uu,$a.pointsToPath=du,Li.geometryToLayer=Ou,Li.coordsToLatLng=Cd,Li.coordsToLatLngs=Mu,Li.latLngToCoords=Ad,Li.latLngsToCoords=Du,Li.getFeature=oo,Li.asFeature=Vu,Se.mergeOptions({boxZoom:!0});var Gg=$t.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ts(),Gs(),this._startPoint=this._map.mouseEventToContainerPoint(r),ve(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ke("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new te(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(je(this._box),me(this._container,"leaflet-crosshair")),Ln(),Ks(),Ne(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",Gg),Se.mergeOptions({doubleClickZoom:!0});var Kg=$t.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Se.addInitHook("addHandler","doubleClickZoom",Kg),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qg=$t.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Nt(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){me(this._map._container,"leaflet-grab"),me(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Te(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,w=(f+a+c)%r-a-c,N=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,j=g.multiplyBy(N/w),$=j.distanceTo([0,0]),Q=Math.min(c.inertiaMaxSpeed,$),re=j.multiplyBy(Q/$),fe=Q/(c.inertiaDeceleration*N),Ie=re.multiplyBy(-fe/2).round();!Ie.x&&!Ie.y?a.fire("moveend"):(Ie=a._limitOffset(Ie,a.options.maxBounds),b(function(){a.panBy(Ie,{duration:fe,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",Qg),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yg=$t.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ve(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ne(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=B(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(B(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jn(r)}}});Se.addInitHook("addHandler","keyboard",Yg),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xg=$t.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=On(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Jn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,N=r._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,N&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+N):r.setZoomAround(this._lastMousePos,a+N))}});Se.addInitHook("addHandler","scrollWheelZoom",Xg);var yI=600;Se.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Jg=$t.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new G(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",ft),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),yI),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ne(document,"touchend",ft),Ne(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new G(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Se.addInitHook("addHandler","tapHold",Jg),Se.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var e_=$t.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){me(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),ft(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var N=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=b(N,this,!0),ft(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",e_),Se.BoxZoom=Gg,Se.DoubleClickZoom=Kg,Se.Drag=Qg,Se.Keyboard=Yg,Se.ScrollWheelZoom=Xg,Se.TapHold=Jg,Se.TouchZoom=e_,n.Bounds=te,n.Browser=ue,n.CRS=Fe,n.Canvas=$g,n.Circle=xd,n.CircleMarker=Nu,n.Class=De,n.Control=bt,n.DivIcon=Ug,n.DivOverlay=ii,n.DomEvent=Sd,n.DomUtil=Xn,n.Draggable=Nt,n.Evented=un,n.FeatureGroup=ki,n.GeoJSON=Li,n.GridLayer=ja,n.Handler=$t,n.Icon=ro,n.ImageOverlay=Fu,n.LatLng=Ee,n.LatLngBounds=Le,n.Layer=Dn,n.LayerGroup=io,n.LineUtil=st,n.Map=Se,n.Marker=bu,n.Mixin=Au,n.Path=ur,n.Point=G,n.PolyUtil=ku,n.Polygon=so,n.Polyline=Ri,n.Popup=zu,n.PosAnimation=ar,n.Projection=ti,n.Rectangle=Zg,n.Renderer=bi,n.SVG=$a,n.SVGOverlay=Bg,n.TileLayer=ao,n.Tooltip=Bu,n.Transformation=Ji,n.Util=A,n.VideoOverlay=zg,n.bind=l,n.bounds=ae,n.canvas=Wg,n.circle=rI,n.circleMarker=iI,n.control=lr,n.divIcon=fI,n.extend=s,n.featureGroup=eI,n.geoJSON=Fg,n.geoJson=aI,n.gridLayer=pI,n.icon=tI,n.imageOverlay=lI,n.latLng=le,n.latLngBounds=Te,n.layerGroup=JT,n.map=Oa,n.marker=nI,n.point=B,n.polygon=oI,n.polyline=sI,n.popup=hI,n.rectangle=_I,n.setOptions=M,n.stamp=d,n.svg=qg,n.svgOverlay=cI,n.tileLayer=jg,n.tooltip=dI,n.transformation=er,n.version=i,n.videoOverlay=uI;var vI=window.L;n.noConflict=function(){return window.L=vI,this},window.L=n})})(Up,Up.exports);var fa=Up.exports;const Jb=Qv(fa);function fd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function pd(t,e){return e==null?function(i,s){const o=q.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=q.useRef();o.current||(o.current=t(i,s));const l=q.useRef(i),{instance:h}=o.current;return q.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function YT(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function XT(t){return function(n){const i=Og(),s=t(dd(n,i),i);return qT(i.map,n.attribution),Mg(s.current,n.eventHandlers),YT(s.current,i),s}}function eN(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function tN(t){return function(n){const i=Og(),s=t(dd(n,i),i);return Mg(s.current,n.eventHandlers),YT(s.current,i),eN(s.current,n),s}}function nN(t,e){const n=pd(t,e),i=XT(n);return QT(i)}function iN(t,e){const n=pd(t),i=Xb(n,e);return Qb(i)}function rN(t,e){const n=pd(t,e),i=tN(n);return QT(i)}function sN(t,e){const n=pd(t,e),i=XT(n);return Yb(i)}function oN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function jp(){return jp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jp.apply(this,arguments)}function aN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...y},v){const[E]=q.useState({className:s,id:o,style:h}),[k,F]=q.useState(null);q.useImperativeHandle(v,()=>(k==null?void 0:k.map)??null,[k]);const M=q.useCallback(C=>{if(C!==null&&k===null){const P=new fa.Map(C,y);n!=null&&p!=null?P.setView(n,p):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),F(Kb(P))}},[]);q.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const U=k?Is.createElement(KT,{value:k},i):l??null;return Is.createElement("div",jp({},E,{ref:M}),U)}const lN=q.forwardRef(aN),uN=nN(function({position:e,...n},i){const s=new fa.Marker(e,n);return fd(s,ZT(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),cN=rN(function({positions:e,...n},i){const s=new fa.Polygon(e,n);return fd(s,ZT(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),hN=iN(function(e,n){const i=new fa.Popup(e,n.overlayContainer);return fd(i,n)},function(e,n,{position:i},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),dN=sN(function({url:e,...n},i){const s=new fa.TileLayer(e,dd(n,i));return fd(s,i)},function(e,n,i){oN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});const fN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],pN=(t,e=3)=>{const n=[];for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},mN=(t,e)=>{const n=pN(t,5),i=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],y=p[0]-o,v=p[1]-l,E=Math.sqrt(y*y+v*v);if(E===0)continue;const k=y/E,F=v/E;h.push([p[0]+k*e*i,p[1]+F*e*s])}return h},gN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],Kv=(t,e)=>{const n=e?"red":"white";return Jb.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},_N=({facility:t,onViewDetails:e})=>{const n=q.useRef(null);q.useEffect(()=>{if(n.current){const s=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(Kv(s,t.hit))}},[t.hit,t.type]);const i=s=>{switch(s){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return V(uN,{ref:n,position:[t.location.latitude,t.location.longitude],icon:Kv(i(t.type),t.hit),children:V(hN,{children:Y("div",{style:{color:"#000",minWidth:"200px"},children:[V("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),V("div",{style:{marginBottom:"8px"},children:V("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),Y("p",{style:{margin:"5px 0",fontSize:"13px"},children:[V("strong",{children:"Type:"})," ",V("span",{style:{textTransform:"capitalize"},children:t.type})]}),Y("p",{style:{margin:"5px 0",fontSize:"13px"},children:[V("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),Y("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[t.location.latitude.toFixed(4),", ",t.location.longitude.toFixed(4)]}),V("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:s=>s.currentTarget.style.backgroundColor="#2563eb",onMouseOut:s=>s.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details →"})]})})})},yN=()=>{const t=zm(),[e,n]=q.useState([]),[i,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,y]=q.useState(0),[v,E]=q.useState(!0),[k,F]=q.useState(!0),[M,U]=q.useState(!0),[C,P]=q.useState(!0),[O,W]=q.useState(!0),[X,J]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!$e){console.error("Firebase not initialized");return}const b=(await fs(ds($e,Ft.FACILITIES))).docs.map(D=>({id:parseInt(D.id),...D.data()}));n(b)}catch(R){console.error("Error fetching facilities:",R)}})()},[]);const x=S=>{t(`/facility/${S}`)},I=e.filter(S=>!(i!=="all"&&S.type!==i||S.type==="refinery"&&!v||S.type==="extraction"&&!k||S.type==="storage"&&!M||o==="hit"&&!S.hit||o==="operational"&&S.hit||S.capacity<p||h&&!S.name.toLowerCase().includes(h.toLowerCase())));return Y("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[Y("div",{style:{width:"320px",backgroundColor:"#1a1a1a",borderRight:"2px solid #333",display:"flex",flexDirection:"column",overflow:"hidden"},children:[Y("div",{style:{padding:"20px",borderBottom:"1px solid #333",backgroundColor:"#222"},children:[V("h2",{style:{margin:"0 0 5px 0",fontSize:"18px",fontWeight:"600",color:"white"},children:"Russian Oil Facilities"}),Y("p",{style:{margin:0,color:"#888",fontSize:"13px"},children:[I.length," of ",e.length," facilities"]})]}),Y("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:[Y("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Search"}),V("input",{type:"text",placeholder:"Search by name...",value:h,onChange:S=>d(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]}),Y("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Facility Type"}),Y("select",{value:i,onChange:S=>s(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[V("option",{value:"all",children:"All Types"}),V("option",{value:"refinery",children:"Refinery"}),V("option",{value:"extraction",children:"Extraction"}),V("option",{value:"storage",children:"Storage"})]})]}),Y("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),Y("select",{value:o,onChange:S=>l(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"#0a0a0a",border:"1px solid #444",borderRadius:"4px",color:"white",fontSize:"14px",cursor:"pointer",outline:"none",boxSizing:"border-box"},children:[V("option",{value:"all",children:"All Status"}),V("option",{value:"hit",children:"Hit"}),V("option",{value:"operational",children:"Operational"})]})]}),Y("div",{style:{marginBottom:"20px"},children:[V("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Min. Capacity"}),Y("div",{style:{color:"#666",fontSize:"12px",marginBottom:"8px"},children:[p.toLocaleString()," barrels/day"]}),V("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:S=>y(Number(S.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#3b82f6"}})]}),(i!=="all"||o!=="all"||h!==""||p>0)&&V("button",{onClick:()=>{s("all"),l("all"),d(""),y(0)},style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",marginBottom:"20px"},children:"Clear All Filters"}),Y("div",{style:{borderTop:"1px solid #333",paddingTop:"20px",marginTop:"20px"},children:[V("div",{style:{fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:"Facility Types"}),Y("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:v,onChange:S=>E(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#FF5733"}}),V("span",{style:{color:"#FF5733",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Refinery"})]}),Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:k,onChange:S=>F(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#33FF57"}}),V("span",{style:{color:"#33FF57",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Extraction"})]}),Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:M,onChange:S=>U(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#3357FF"}}),V("span",{style:{color:"#3357FF",fontSize:"16px"},children:"●"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"Storage"})]})]})]}),Y("div",{style:{borderTop:"1px solid #333",paddingTop:"20px",marginTop:"20px"},children:[V("div",{style:{fontSize:"13px",color:"#aaa",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:"Weapon Ranges"}),Y("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:C,onChange:S=>P(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#10B981"}}),V("span",{style:{color:"#10B981",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"500km Range"})]}),Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:O,onChange:S=>W(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#F97316"}}),V("span",{style:{color:"#F97316",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"1000km Range"})]}),Y("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[V("input",{type:"checkbox",checked:X,onChange:S=>J(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#EF4444"}}),V("span",{style:{color:"#EF4444",fontSize:"16px"},children:"■"}),V("span",{style:{fontSize:"14px",color:"#ccc"},children:"1500km Range"})]})]})]})]})]}),V("div",{style:{flex:1,position:"relative"},children:Y(lN,{center:[55,50],zoom:4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[V(dN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),gN.map(S=>{if(S.range===500&&!C||S.range===1e3&&!O||S.range===1500&&!X)return null;const R=mN(fN,S.range);return V(Is.Fragment,{children:V(cN,{positions:R,pathOptions:{color:S.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}})},S.name)}),I.map(S=>V(_N,{facility:S,onViewDetails:x},S.id))]})})]})},vN=()=>{const{id:t}=Lx(),e=zm(),[n,i]=q.useState(null),[s,o]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!$e){console.error("Firebase not initialized"),o(!1);return}const d=Ni($e,Ft.FACILITIES,t),p=await dT(d);p.exists()?i({id:parseInt(p.id),...p.data()}):console.error("Facility not found"),o(!1)}catch(d){console.error("Error fetching facility:",d),o(!1)}})()},[t]),s)return V("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return Y("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[V("div",{style:{fontSize:"18px"},children:"Facility not found"}),V("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const l=h=>{switch(h){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return Y("div",{style:{width:"100%",minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white"},children:[Y("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px"},children:[V("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:"← Back to Map"}),V("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),V("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),Y("div",{style:{padding:"40px",maxWidth:"1200px"},children:[Y("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[Y("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),Y("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[V("span",{style:{color:l(n.type),fontSize:"28px"},children:"●"}),V("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),Y("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),V("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),V("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day"})]}),Y("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),Y("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),Y("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[V("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),Y("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[Y("div",{children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),Y("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[n.location.latitude.toFixed(6),"°"]})]}),Y("div",{children:[V("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),Y("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[n.location.longitude.toFixed(6),"°"]})]})]}),V("div",{style:{marginTop:"20px"},children:V("a",{href:`https://www.google.com/maps?q=${n.location.latitude},${n.location.longitude}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps →"})})]})]})]})},wN=()=>V(Qx,{basename:"/russia-oil",children:Y(Zx,{children:[V(xc,{path:"/",element:V(yN,{})}),V(xc,{path:"/facility/:id",element:V(vN,{})}),V(xc,{path:"/admin",element:V(Zb,{})})]})}),EN=wf.createRoot(document.getElementById("root"));EN.render(V(Is.StrictMode,{children:V(wN,{})}));
