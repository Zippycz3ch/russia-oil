function H1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rw={exports:{}},Dh={},sw={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu=Symbol.for("react.element"),$1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),G1=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),eI=Symbol.for("react.lazy"),u_=Symbol.iterator;function tI(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aw=Object.assign,lw={};function ia(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uw(){}uw.prototype=ia.prototype;function Yp(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}var Xp=Yp.prototype=new uw;Xp.constructor=Yp;aw(Xp,ia.prototype);Xp.isPureReactComponent=!0;var c_=Array.isArray,cw=Object.prototype.hasOwnProperty,Jp={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)cw.call(e,i)&&!hw.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:nu,type:t,key:o,ref:l,props:s,_owner:Jp.current}}function nI(t,e){return{$$typeof:nu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function em(t){return typeof t=="object"&&t!==null&&t.$$typeof===nu}function iI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h_=/\/+/g;function zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iI(""+t.key):e.toString(36)}function Ec(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case nu:case $1:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+zd(l,0):i,c_(s)?(n="",t!=null&&(n=t.replace(h_,"$&/")+"/"),Ec(s,e,n,"",function(p){return p})):s!=null&&(em(s)&&(s=nI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(h_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",c_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+zd(o,h);l+=Ec(o,e,n,d,s)}else if(d=tI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+zd(o,h++),l+=Ec(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Xu(t,e,n){if(t==null)return t;var i=[],s=0;return Ec(t,i,"","",function(o){return e.call(n,o,s++)}),i}function rI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Tc={transition:null},sI={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:Jp};function fw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ia;Ie.Fragment=q1;Ie.Profiler=Z1;Ie.PureComponent=Yp;Ie.StrictMode=G1;Ie.Suspense=X1;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sI;Ie.act=fw;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=aw({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Jp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)cw.call(e,d)&&!hw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:nu,type:t.type,key:s,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};Ie.createElement=dw;Ie.createFactory=function(t){var e=dw.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:Y1,render:t}};Ie.isValidElement=em;Ie.lazy=function(t){return{$$typeof:eI,_payload:{_status:-1,_result:t},_init:rI}};Ie.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Tc.transition;Tc.transition={};try{t()}finally{Tc.transition=e}};Ie.unstable_act=fw;Ie.useCallback=function(t,e){return $t.current.useCallback(t,e)};Ie.useContext=function(t){return $t.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return $t.current.useEffect(t,e)};Ie.useId=function(){return $t.current.useId()};Ie.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return $t.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};Ie.useRef=function(t){return $t.current.useRef(t)};Ie.useState=function(t){return $t.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return $t.current.useTransition()};Ie.version="18.3.1";sw.exports=Ie;var G=sw.exports;const Cl=iw(G),oI=H1({__proto__:null,default:Cl},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI=G,lI=Symbol.for("react.element"),uI=Symbol.for("react.fragment"),cI=Object.prototype.hasOwnProperty,hI=aI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dI={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)cI.call(e,i)&&!dI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lI,type:t,key:o,ref:l,props:s,_owner:hI.current}}Dh.Fragment=uI;Dh.jsx=pw;Dh.jsxs=pw;rw.exports=Dh;var w=rw.exports,Pf={},mw={exports:{}},pn={},gw={exports:{}},_w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,ee){var q=M.length;M.push(ee);e:for(;0<q;){var ie=q-1>>>1,ue=M[ie];if(0<s(ue,ee))M[ie]=ee,M[q]=ue,q=ie;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var ee=M[0],q=M.pop();if(q!==ee){M[0]=q;e:for(var ie=0,ue=M.length,Ee=ue>>>1;ie<Ee;){var de=2*(ie+1)-1,ge=M[de],he=de+1,He=M[he];if(0>s(ge,q))he<ue&&0>s(He,ge)?(M[ie]=He,M[he]=q,ie=he):(M[ie]=ge,M[de]=q,ie=de);else if(he<ue&&0>s(He,q))M[ie]=He,M[he]=q,ie=he;else break e}}return ee}function s(M,ee){var q=M.sortIndex-ee.sortIndex;return q!==0?q:M.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,v=null,T=3,A=!1,V=!1,F=!1,B=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(M){for(var ee=n(p);ee!==null;){if(ee.callback===null)i(p);else if(ee.startTime<=M)i(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=n(p)}}function W(M){if(F=!1,O(M),!V)if(n(d)!==null)V=!0,et(X);else{var ee=n(p);ee!==null&&Gt(W,ee.startTime-M)}}function X(M,ee){V=!1,F&&(F=!1,k(S),S=-1),A=!0;var q=T;try{for(O(ee),v=n(d);v!==null&&(!(v.expirationTime>ee)||M&&!D());){var ie=v.callback;if(typeof ie=="function"){v.callback=null,T=v.priorityLevel;var ue=ie(v.expirationTime<=ee);ee=t.unstable_now(),typeof ue=="function"?v.callback=ue:v===n(d)&&i(d),O(ee)}else i(d);v=n(d)}if(v!==null)var Ee=!0;else{var de=n(p);de!==null&&Gt(W,de.startTime-ee),Ee=!1}return Ee}finally{v=null,T=q,A=!1}}var Z=!1,P=null,S=-1,x=5,b=-1;function D(){return!(t.unstable_now()-b<x)}function z(){if(P!==null){var M=t.unstable_now();b=M;var ee=!0;try{ee=P(!0,M)}finally{ee?R():(Z=!1,P=null)}}else Z=!1}var R;if(typeof C=="function")R=function(){C(z)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,on=Me.port2;Me.port1.onmessage=z,R=function(){on.postMessage(null)}}else R=function(){B(z,0)};function et(M){P=M,Z||(Z=!0,R())}function Gt(M,ee){S=B(function(){M(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){V||A||(V=!0,et(X))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(M){switch(T){case 1:case 2:case 3:var ee=3;break;default:ee=T}var q=T;T=ee;try{return M()}finally{T=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,ee){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=T;T=M;try{return ee()}finally{T=q}},t.unstable_scheduleCallback=function(M,ee,q){var ie=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ie+q:ie):q=ie,M){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,M={id:_++,callback:ee,priorityLevel:M,startTime:q,expirationTime:ue,sortIndex:-1},q>ie?(M.sortIndex=q,e(p,M),n(d)===null&&M===n(p)&&(F?(k(S),S=-1):F=!0,Gt(W,q-ie))):(M.sortIndex=ue,e(d,M),V||A||(V=!0,et(X))),M},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(M){var ee=T;return function(){var q=T;T=ee;try{return M.apply(this,arguments)}finally{T=q}}}})(_w);gw.exports=_w;var fI=gw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI=G,fn=fI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,Pl={};function bs(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(Pl[t]=e,t=0;t<e.length;t++)yw.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,mI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d_={},f_={};function gI(t){return Af.call(f_,t)?!0:Af.call(d_,t)?!1:mI.test(t)?f_[t]=!0:(d_[t]=!0,!1)}function _I(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yI(t,e,n,i){if(e===null||typeof e>"u"||_I(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tm,nm);kt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tm,nm);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tm,nm);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,i){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yI(e,n,s,i)&&(n=null),i||s===null?gI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Wi=pI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),p_=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=p_&&t[p_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,jd;function el(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Bd=!1;function Ud(t,e){if(!t||Bd)return"";Bd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Bd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?el(t):""}function vI(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case kf:return"Profiler";case rm:return"StrictMode";case Rf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ww:return(t.displayName||"Context")+".Consumer";case vw:return(t._context.displayName||"Context")+".Provider";case sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case om:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function wI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EI(t){var e=Tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=EI(t))}function xw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Tw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iw(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Of(t,e){Iw(t,e);var n=Or(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tl=Array.isArray;function bo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function __(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(tl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function Sw(t,e){var n=Or(e.value),i=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,Pw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TI=["Webkit","ms","Moz","O"];Object.keys(hl).forEach(function(t){TI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hl[e]=hl[t]})});function Aw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hl.hasOwnProperty(t)&&hl[t]?(""+e).trim():e+"px"}function kw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Aw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var xI=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(t,e){if(e){if(xI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function zf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bf=null,Lo=null,No=null;function v_(t){if(t=su(t)){if(typeof Bf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=jh(e),Bf(t.stateNode,t.type,e))}}function Rw(t){Lo?No?No.push(t):No=[t]:Lo=t}function bw(){if(Lo){var t=Lo,e=No;if(No=Lo=null,v_(t),e)for(t=0;t<e.length;t++)v_(e[t])}}function Lw(t,e){return t(e)}function Nw(){}var Hd=!1;function Ow(t,e,n){if(Hd)return t(e,n);Hd=!0;try{return Lw(t,e,n)}finally{Hd=!1,(Lo!==null||No!==null)&&(Nw(),bw())}}function kl(t,e){var n=t.stateNode;if(n===null)return null;var i=jh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Uf=!1;if(Mi)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{Uf=!1}function II(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var dl=!1,Gc=null,Zc=!1,Hf=null,SI={onError:function(t){dl=!0,Gc=t}};function CI(t,e,n,i,s,o,l,h,d){dl=!1,Gc=null,II.apply(SI,arguments)}function PI(t,e,n,i,s,o,l,h,d){if(CI.apply(this,arguments),dl){if(dl){var p=Gc;dl=!1,Gc=null}else throw Error(J(198));Zc||(Zc=!0,Hf=p)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w_(t){if(Ls(t)!==t)throw Error(J(188))}function AI(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return w_(s),t;if(o===i)return w_(s),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Mw(t){return t=AI(t),t!==null?Vw(t):null}function Vw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vw(t);if(e!==null)return e;t=t.sibling}return null}var Fw=fn.unstable_scheduleCallback,E_=fn.unstable_cancelCallback,kI=fn.unstable_shouldYield,RI=fn.unstable_requestPaint,it=fn.unstable_now,bI=fn.unstable_getCurrentPriorityLevel,lm=fn.unstable_ImmediatePriority,zw=fn.unstable_UserBlockingPriority,Kc=fn.unstable_NormalPriority,LI=fn.unstable_LowPriority,jw=fn.unstable_IdlePriority,Mh=null,si=null;function NI(t){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:MI,OI=Math.log,DI=Math.LN2;function MI(t){return t>>>=0,t===0?32:31-(OI(t)/DI|0)|0}var nc=64,ic=4194304;function nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=nl(h):(o&=l,o!==0&&(i=nl(o)))}else l=n&~s,l!==0?i=nl(l):o!==0&&(i=nl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Bn(e),s=1<<n,i|=t[n],e&=~s;return i}function VI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Bn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=VI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bw(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function Wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=n}function zI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Fe=0;function Uw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,cm,Ww,$w,qw,$f=!1,rc=[],wr=null,Er=null,Tr=null,Rl=new Map,bl=new Map,lr=[],jI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T_(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Za(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=su(e),e!==null&&cm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BI(t,e,n,i,s){switch(e){case"focusin":return wr=Za(wr,t,e,n,i,s),!0;case"dragenter":return Er=Za(Er,t,e,n,i,s),!0;case"mouseover":return Tr=Za(Tr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Rl.set(o,Za(Rl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,bl.set(o,Za(bl.get(o)||null,t,e,n,i,s)),!0}return!1}function Gw(t){var e=fs(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=Dw(n),e!==null){t.blockedOn=e,qw(t.priority,function(){Ww(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);jf=i,n.target.dispatchEvent(i),jf=null}else return e=su(n),e!==null&&cm(e),t.blockedOn=n,!1;e.shift()}return!0}function x_(t,e,n){xc(t)&&n.delete(e)}function UI(){$f=!1,wr!==null&&xc(wr)&&(wr=null),Er!==null&&xc(Er)&&(Er=null),Tr!==null&&xc(Tr)&&(Tr=null),Rl.forEach(x_),bl.forEach(x_)}function Ka(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,UI)))}function Ll(t){function e(s){return Ka(s,t)}if(0<rc.length){Ka(rc[0],t);for(var n=1;n<rc.length;n++){var i=rc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(wr!==null&&Ka(wr,t),Er!==null&&Ka(Er,t),Tr!==null&&Ka(Tr,t),Rl.forEach(e),bl.forEach(e),n=0;n<lr.length;n++)i=lr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Gw(n),n.blockedOn===null&&lr.shift()}var Oo=Wi.ReactCurrentBatchConfig,Yc=!0;function HI(t,e,n,i){var s=Fe,o=Oo.transition;Oo.transition=null;try{Fe=1,hm(t,e,n,i)}finally{Fe=s,Oo.transition=o}}function WI(t,e,n,i){var s=Fe,o=Oo.transition;Oo.transition=null;try{Fe=4,hm(t,e,n,i)}finally{Fe=s,Oo.transition=o}}function hm(t,e,n,i){if(Yc){var s=qf(t,e,n,i);if(s===null)ef(t,e,i,Xc,n),T_(t,i);else if(BI(s,t,e,n,i))i.stopPropagation();else if(T_(t,i),e&4&&-1<jI.indexOf(t)){for(;s!==null;){var o=su(s);if(o!==null&&Hw(o),o=qf(t,e,n,i),o===null&&ef(t,e,i,Xc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else ef(t,e,i,null,n)}}var Xc=null;function qf(t,e,n,i){if(Xc=null,t=am(i),t=fs(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xc=t,null}function Zw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bI()){case lm:return 1;case zw:return 4;case Kc:case LI:return 16;case jw:return 536870912;default:return 16}default:return 16}}var gr=null,dm=null,Ic=null;function Kw(){if(Ic)return Ic;var t,e=dm,n=e.length,i,s="value"in gr?gr.value:gr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Ic=s.slice(t,1<i?1-i:void 0)}function Sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function I_(){return!1}function mn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sc:I_,this.isPropagationStopped=I_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=mn(ra),ru=Qe({},ra,{view:0,detail:0}),$I=mn(ru),$d,qd,Qa,Vh=Qe({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qa&&(Qa&&t.type==="mousemove"?($d=t.screenX-Qa.screenX,qd=t.screenY-Qa.screenY):qd=$d=0,Qa=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),S_=mn(Vh),qI=Qe({},Vh,{dataTransfer:0}),GI=mn(qI),ZI=Qe({},ru,{relatedTarget:0}),Gd=mn(ZI),KI=Qe({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=mn(KI),YI=Qe({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XI=mn(YI),JI=Qe({},ra,{data:0}),C_=mn(JI),eS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nS[t])?!!e[t]:!1}function pm(){return iS}var rS=Qe({},ru,{key:function(t){if(t.key){var e=eS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(t){return t.type==="keypress"?Sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sS=mn(rS),oS=Qe({},Vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P_=mn(oS),aS=Qe({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),lS=mn(aS),uS=Qe({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),cS=mn(uS),hS=Qe({},Vh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dS=mn(hS),fS=[9,13,27,32],mm=Mi&&"CompositionEvent"in window,fl=null;Mi&&"documentMode"in document&&(fl=document.documentMode);var pS=Mi&&"TextEvent"in window&&!fl,Qw=Mi&&(!mm||fl&&8<fl&&11>=fl),A_=" ",k_=!1;function Yw(t,e){switch(t){case"keyup":return fS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function mS(t,e){switch(t){case"compositionend":return Xw(e);case"keypress":return e.which!==32?null:(k_=!0,A_);case"textInput":return t=e.data,t===A_&&k_?null:t;default:return null}}function gS(t,e){if(wo)return t==="compositionend"||!mm&&Yw(t,e)?(t=Kw(),Ic=dm=gr=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qw&&e.locale!=="ko"?null:e.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_S[t.type]:e==="textarea"}function Jw(t,e,n,i){Rw(i),e=Jc(e,"onChange"),0<e.length&&(n=new fm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pl=null,Nl=null;function yS(t){c0(t,0)}function Fh(t){var e=xo(t);if(xw(e))return t}function vS(t,e){if(t==="change")return e}var e0=!1;if(Mi){var Zd;if(Mi){var Kd="oninput"in document;if(!Kd){var b_=document.createElement("div");b_.setAttribute("oninput","return;"),Kd=typeof b_.oninput=="function"}Zd=Kd}else Zd=!1;e0=Zd&&(!document.documentMode||9<document.documentMode)}function L_(){pl&&(pl.detachEvent("onpropertychange",t0),Nl=pl=null)}function t0(t){if(t.propertyName==="value"&&Fh(Nl)){var e=[];Jw(e,Nl,t,am(t)),Ow(yS,e)}}function wS(t,e,n){t==="focusin"?(L_(),pl=e,Nl=n,pl.attachEvent("onpropertychange",t0)):t==="focusout"&&L_()}function ES(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(Nl)}function TS(t,e){if(t==="click")return Fh(e)}function xS(t,e){if(t==="input"||t==="change")return Fh(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:IS;function Ol(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Af.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function N_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O_(t,e){var n=N_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N_(n)}}function n0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i0(){for(var t=window,e=qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qc(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SS(t){var e=i0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n0(n.ownerDocument.documentElement,n)){if(i!==null&&gm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=O_(n,o);var l=O_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CS=Mi&&"documentMode"in document&&11>=document.documentMode,Eo=null,Gf=null,ml=null,Zf=!1;function D_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Eo==null||Eo!==qc(i)||(i=Eo,"selectionStart"in i&&gm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ml&&Ol(ml,i)||(ml=i,i=Jc(Gf,"onSelect"),0<i.length&&(e=new fm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Eo)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},Qd={},r0={};Mi&&(r0=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function zh(t){if(Qd[t])return Qd[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r0)return Qd[t]=e[n];return t}var s0=zh("animationend"),o0=zh("animationiteration"),a0=zh("animationstart"),l0=zh("transitionend"),u0=new Map,M_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){u0.set(t,e),bs(e,[t])}for(var Yd=0;Yd<M_.length;Yd++){var Xd=M_[Yd],PS=Xd.toLowerCase(),AS=Xd[0].toUpperCase()+Xd.slice(1);Ur(PS,"on"+AS)}Ur(s0,"onAnimationEnd");Ur(o0,"onAnimationIteration");Ur(a0,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(l0,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function V_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,PI(i,e,void 0,t),t.currentTarget=null}function c0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,p),o=d}}}if(Zc)throw t=Hf,Zc=!1,Hf=null,t}function We(t,e){var n=e[Jf];n===void 0&&(n=e[Jf]=new Set);var i=t+"__bubble";n.has(i)||(h0(e,t,2,!1),n.add(i))}function Jd(t,e,n){var i=0;e&&(i|=4),h0(n,t,i,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[ac]){t[ac]=!0,yw.forEach(function(n){n!=="selectionchange"&&(kS.has(n)||Jd(n,!1,t),Jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,Jd("selectionchange",!1,e))}}function h0(t,e,n,i){switch(Zw(e)){case 1:var s=HI;break;case 4:s=WI;break;default:s=hm}n=s.bind(null,e,n,t),s=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ef(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=fs(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Ow(function(){var p=o,_=am(n),v=[];e:{var T=u0.get(t);if(T!==void 0){var A=fm,V=t;switch(t){case"keypress":if(Sc(n)===0)break e;case"keydown":case"keyup":A=sS;break;case"focusin":V="focus",A=Gd;break;case"focusout":V="blur",A=Gd;break;case"beforeblur":case"afterblur":A=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=S_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=GI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=lS;break;case s0:case o0:case a0:A=QI;break;case l0:A=cS;break;case"scroll":A=$I;break;case"wheel":A=dS;break;case"copy":case"cut":case"paste":A=XI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=P_}var F=(e&4)!==0,B=!F&&t==="scroll",k=F?T!==null?T+"Capture":null:T;F=[];for(var C=p,O;C!==null;){O=C;var W=O.stateNode;if(O.tag===5&&W!==null&&(O=W,k!==null&&(W=kl(C,k),W!=null&&F.push(Ml(C,W,O)))),B)break;C=C.return}0<F.length&&(T=new A(T,V,null,n,_),v.push({event:T,listeners:F}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",T&&n!==jf&&(V=n.relatedTarget||n.fromElement)&&(fs(V)||V[Vi]))break e;if((A||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,A?(V=n.relatedTarget||n.toElement,A=p,V=V?fs(V):null,V!==null&&(B=Ls(V),V!==B||V.tag!==5&&V.tag!==6)&&(V=null)):(A=null,V=p),A!==V)){if(F=S_,W="onMouseLeave",k="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(F=P_,W="onPointerLeave",k="onPointerEnter",C="pointer"),B=A==null?T:xo(A),O=V==null?T:xo(V),T=new F(W,C+"leave",A,n,_),T.target=B,T.relatedTarget=O,W=null,fs(_)===p&&(F=new F(k,C+"enter",V,n,_),F.target=O,F.relatedTarget=B,W=F),B=W,A&&V)t:{for(F=A,k=V,C=0,O=F;O;O=fo(O))C++;for(O=0,W=k;W;W=fo(W))O++;for(;0<C-O;)F=fo(F),C--;for(;0<O-C;)k=fo(k),O--;for(;C--;){if(F===k||k!==null&&F===k.alternate)break t;F=fo(F),k=fo(k)}F=null}else F=null;A!==null&&F_(v,T,A,F,!1),V!==null&&B!==null&&F_(v,B,V,F,!0)}}e:{if(T=p?xo(p):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var X=vS;else if(R_(T))if(e0)X=xS;else{X=ES;var Z=wS}else(A=T.nodeName)&&A.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=TS);if(X&&(X=X(t,p))){Jw(v,X,n,_);break e}Z&&Z(t,T,p),t==="focusout"&&(Z=T._wrapperState)&&Z.controlled&&T.type==="number"&&Df(T,"number",T.value)}switch(Z=p?xo(p):window,t){case"focusin":(R_(Z)||Z.contentEditable==="true")&&(Eo=Z,Gf=p,ml=null);break;case"focusout":ml=Gf=Eo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,D_(v,n,_);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":D_(v,n,_)}var P;if(mm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else wo?Yw(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Qw&&n.locale!=="ko"&&(wo||S!=="onCompositionStart"?S==="onCompositionEnd"&&wo&&(P=Kw()):(gr=_,dm="value"in gr?gr.value:gr.textContent,wo=!0)),Z=Jc(p,S),0<Z.length&&(S=new C_(S,t,null,n,_),v.push({event:S,listeners:Z}),P?S.data=P:(P=Xw(n),P!==null&&(S.data=P)))),(P=pS?mS(t,n):gS(t,n))&&(p=Jc(p,"onBeforeInput"),0<p.length&&(_=new C_("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:p}),_.data=P))}c0(v,e)})}function Ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=kl(t,n),o!=null&&i.unshift(Ml(t,o,s)),o=kl(t,e),o!=null&&i.push(Ml(t,o,s))),t=t.return}return i}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=kl(n,o),d!=null&&l.unshift(Ml(n,d,h))):s||(d=kl(n,o),d!=null&&l.push(Ml(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var RS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function z_(t){return(typeof t=="string"?t:""+t).replace(RS,`
`).replace(bS,"")}function lc(t,e,n){if(e=z_(e),z_(t)!==e&&n)throw Error(J(425))}function eh(){}var Kf=null,Qf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,LS=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(t){return j_.resolve(null).then(t).catch(OS)}:Xf;function OS(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ll(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ll(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),ri="__reactFiber$"+sa,Vl="__reactProps$"+sa,Vi="__reactContainer$"+sa,Jf="__reactEvents$"+sa,DS="__reactListeners$"+sa,MS="__reactHandles$"+sa;function fs(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B_(t);t!==null;){if(n=t[ri])return n;t=B_(t)}return e}t=n,n=t.parentNode}return null}function su(t){return t=t[ri]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function jh(t){return t[Vl]||null}var ep=[],Io=-1;function Hr(t){return{current:t}}function qe(t){0>Io||(t.current=ep[Io],ep[Io]=null,Io--)}function Ue(t,e){Io++,ep[Io]=t.current,t.current=e}var Dr={},Ft=Hr(Dr),nn=Hr(!1),Es=Dr;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Dr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function th(){qe(nn),qe(Ft)}function U_(t,e,n){if(Ft.current!==Dr)throw Error(J(168));Ue(Ft,e),Ue(nn,n)}function d0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(J(108,wI(t)||"Unknown",s));return Qe({},n,i)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,Es=Ft.current,Ue(Ft,t),Ue(nn,nn.current),!0}function H_(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=d0(t,e,Es),i.__reactInternalMemoizedMergedChildContext=t,qe(nn),qe(Ft),Ue(Ft,t)):qe(nn),Ue(nn,n)}var Ai=null,Bh=!1,nf=!1;function f0(t){Ai===null?Ai=[t]:Ai.push(t)}function VS(t){Bh=!0,f0(t)}function Wr(){if(!nf&&Ai!==null){nf=!0;var t=0,e=Fe;try{var n=Ai;for(Fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ai=null,Bh=!1}catch(s){throw Ai!==null&&(Ai=Ai.slice(t+1)),Fw(lm,Wr),s}finally{Fe=e,nf=!1}}return null}var So=[],Co=0,ih=null,rh=0,xn=[],In=0,Ts=null,Ri=1,bi="";function cs(t,e){So[Co++]=rh,So[Co++]=ih,ih=t,rh=e}function p0(t,e,n){xn[In++]=Ri,xn[In++]=bi,xn[In++]=Ts,Ts=t;var i=Ri;t=bi;var s=32-Bn(i)-1;i&=~(1<<s),n+=1;var o=32-Bn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Ri=1<<32-Bn(e)+s|n<<s|i,bi=o+t}else Ri=1<<o|n<<s|i,bi=t}function _m(t){t.return!==null&&(cs(t,1),p0(t,1,0))}function ym(t){for(;t===ih;)ih=So[--Co],So[Co]=null,rh=So[--Co],So[Co]=null;for(;t===Ts;)Ts=xn[--In],xn[In]=null,bi=xn[--In],xn[In]=null,Ri=xn[--In],xn[In]=null}var dn=null,cn=null,Ge=!1,Fn=null;function m0(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,cn=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ts!==null?{id:Ri,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,cn=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function np(t){if(Ge){var e=cn;if(e){var n=e;if(!W_(t,e)){if(tp(t))throw Error(J(418));e=xr(n.nextSibling);var i=dn;e&&W_(t,e)?m0(i,n):(t.flags=t.flags&-4097|2,Ge=!1,dn=t)}}else{if(tp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ge=!1,dn=t}}}function $_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function uc(t){if(t!==dn)return!1;if(!Ge)return $_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=cn)){if(tp(t))throw g0(),Error(J(418));for(;e;)m0(t,e),e=xr(e.nextSibling)}if($_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=dn?xr(t.stateNode.nextSibling):null;return!0}function g0(){for(var t=cn;t;)t=xr(t.nextSibling)}function Wo(){cn=dn=null,Ge=!1}function vm(t){Fn===null?Fn=[t]:Fn.push(t)}var FS=Wi.ReactCurrentBatchConfig;function Ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q_(t){var e=t._init;return e(t._payload)}function _0(t){function e(k,C){if(t){var O=k.deletions;O===null?(k.deletions=[C],k.flags|=16):O.push(C)}}function n(k,C){if(!t)return null;for(;C!==null;)e(k,C),C=C.sibling;return null}function i(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function s(k,C){return k=Pr(k,C),k.index=0,k.sibling=null,k}function o(k,C,O){return k.index=O,t?(O=k.alternate,O!==null?(O=O.index,O<C?(k.flags|=2,C):O):(k.flags|=2,C)):(k.flags|=1048576,C)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,C,O,W){return C===null||C.tag!==6?(C=cf(O,k.mode,W),C.return=k,C):(C=s(C,O),C.return=k,C)}function d(k,C,O,W){var X=O.type;return X===vo?_(k,C,O.props.children,W,O.key):C!==null&&(C.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===or&&q_(X)===C.type)?(W=s(C,O.props),W.ref=Ya(k,C,O),W.return=k,W):(W=Lc(O.type,O.key,O.props,null,k.mode,W),W.ref=Ya(k,C,O),W.return=k,W)}function p(k,C,O,W){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=hf(O,k.mode,W),C.return=k,C):(C=s(C,O.children||[]),C.return=k,C)}function _(k,C,O,W,X){return C===null||C.tag!==7?(C=ys(O,k.mode,W,X),C.return=k,C):(C=s(C,O),C.return=k,C)}function v(k,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=cf(""+C,k.mode,O),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ju:return O=Lc(C.type,C.key,C.props,null,k.mode,O),O.ref=Ya(k,null,C),O.return=k,O;case yo:return C=hf(C,k.mode,O),C.return=k,C;case or:var W=C._init;return v(k,W(C._payload),O)}if(tl(C)||qa(C))return C=ys(C,k.mode,O,null),C.return=k,C;cc(k,C)}return null}function T(k,C,O,W){var X=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return X!==null?null:h(k,C,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ju:return O.key===X?d(k,C,O,W):null;case yo:return O.key===X?p(k,C,O,W):null;case or:return X=O._init,T(k,C,X(O._payload),W)}if(tl(O)||qa(O))return X!==null?null:_(k,C,O,W,null);cc(k,O)}return null}function A(k,C,O,W,X){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(O)||null,h(C,k,""+W,X);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Ju:return k=k.get(W.key===null?O:W.key)||null,d(C,k,W,X);case yo:return k=k.get(W.key===null?O:W.key)||null,p(C,k,W,X);case or:var Z=W._init;return A(k,C,O,Z(W._payload),X)}if(tl(W)||qa(W))return k=k.get(O)||null,_(C,k,W,X,null);cc(C,W)}return null}function V(k,C,O,W){for(var X=null,Z=null,P=C,S=C=0,x=null;P!==null&&S<O.length;S++){P.index>S?(x=P,P=null):x=P.sibling;var b=T(k,P,O[S],W);if(b===null){P===null&&(P=x);break}t&&P&&b.alternate===null&&e(k,P),C=o(b,C,S),Z===null?X=b:Z.sibling=b,Z=b,P=x}if(S===O.length)return n(k,P),Ge&&cs(k,S),X;if(P===null){for(;S<O.length;S++)P=v(k,O[S],W),P!==null&&(C=o(P,C,S),Z===null?X=P:Z.sibling=P,Z=P);return Ge&&cs(k,S),X}for(P=i(k,P);S<O.length;S++)x=A(P,k,S,O[S],W),x!==null&&(t&&x.alternate!==null&&P.delete(x.key===null?S:x.key),C=o(x,C,S),Z===null?X=x:Z.sibling=x,Z=x);return t&&P.forEach(function(D){return e(k,D)}),Ge&&cs(k,S),X}function F(k,C,O,W){var X=qa(O);if(typeof X!="function")throw Error(J(150));if(O=X.call(O),O==null)throw Error(J(151));for(var Z=X=null,P=C,S=C=0,x=null,b=O.next();P!==null&&!b.done;S++,b=O.next()){P.index>S?(x=P,P=null):x=P.sibling;var D=T(k,P,b.value,W);if(D===null){P===null&&(P=x);break}t&&P&&D.alternate===null&&e(k,P),C=o(D,C,S),Z===null?X=D:Z.sibling=D,Z=D,P=x}if(b.done)return n(k,P),Ge&&cs(k,S),X;if(P===null){for(;!b.done;S++,b=O.next())b=v(k,b.value,W),b!==null&&(C=o(b,C,S),Z===null?X=b:Z.sibling=b,Z=b);return Ge&&cs(k,S),X}for(P=i(k,P);!b.done;S++,b=O.next())b=A(P,k,S,b.value,W),b!==null&&(t&&b.alternate!==null&&P.delete(b.key===null?S:b.key),C=o(b,C,S),Z===null?X=b:Z.sibling=b,Z=b);return t&&P.forEach(function(z){return e(k,z)}),Ge&&cs(k,S),X}function B(k,C,O,W){if(typeof O=="object"&&O!==null&&O.type===vo&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Ju:e:{for(var X=O.key,Z=C;Z!==null;){if(Z.key===X){if(X=O.type,X===vo){if(Z.tag===7){n(k,Z.sibling),C=s(Z,O.props.children),C.return=k,k=C;break e}}else if(Z.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===or&&q_(X)===Z.type){n(k,Z.sibling),C=s(Z,O.props),C.ref=Ya(k,Z,O),C.return=k,k=C;break e}n(k,Z);break}else e(k,Z);Z=Z.sibling}O.type===vo?(C=ys(O.props.children,k.mode,W,O.key),C.return=k,k=C):(W=Lc(O.type,O.key,O.props,null,k.mode,W),W.ref=Ya(k,C,O),W.return=k,k=W)}return l(k);case yo:e:{for(Z=O.key;C!==null;){if(C.key===Z)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){n(k,C.sibling),C=s(C,O.children||[]),C.return=k,k=C;break e}else{n(k,C);break}else e(k,C);C=C.sibling}C=hf(O,k.mode,W),C.return=k,k=C}return l(k);case or:return Z=O._init,B(k,C,Z(O._payload),W)}if(tl(O))return V(k,C,O,W);if(qa(O))return F(k,C,O,W);cc(k,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(n(k,C.sibling),C=s(C,O),C.return=k,k=C):(n(k,C),C=cf(O,k.mode,W),C.return=k,k=C),l(k)):n(k,C)}return B}var $o=_0(!0),y0=_0(!1),sh=Hr(null),oh=null,Po=null,wm=null;function Em(){wm=Po=oh=null}function Tm(t){var e=sh.current;qe(sh),t._currentValue=e}function ip(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){oh=t,wm=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(wm!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(oh===null)throw Error(J(308));Po=t,oh.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var ps=null;function xm(t){ps===null?ps=[t]:ps.push(t)}function v0(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,xm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fi(t,i)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Fi(t,n)}return s=i.interleaved,s===null?(e.next=e,xm(i)):(e.next=s.next,s.next=e),i.interleaved=e,Fi(t,n)}function Cc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}function G_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ah(t,e,n,i){var s=t.updateQueue;ar=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,_=p=d=null,h=o;do{var T=h.lane,A=h.eventTime;if((i&T)===T){_!==null&&(_=_.next={eventTime:A,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var V=t,F=h;switch(T=e,A=n,F.tag){case 1:if(V=F.payload,typeof V=="function"){v=V.call(A,v,T);break e}v=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=F.payload,T=typeof V=="function"?V.call(A,v,T):V,T==null)break e;v=Qe({},v,T);break e;case 2:ar=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else A={eventTime:A,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=A,d=v):_=_.next=A,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(_===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Is|=l,t.lanes=l,t.memoizedState=v}}function Z_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(J(191,s));s.call(i)}}}var ou={},oi=Hr(ou),Fl=Hr(ou),zl=Hr(ou);function ms(t){if(t===ou)throw Error(J(174));return t}function Sm(t,e){switch(Ue(zl,e),Ue(Fl,t),Ue(oi,ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}qe(oi),Ue(oi,e)}function qo(){qe(oi),qe(Fl),qe(zl)}function E0(t){ms(zl.current);var e=ms(oi.current),n=Vf(e,t.type);e!==n&&(Ue(Fl,t),Ue(oi,n))}function Cm(t){Fl.current===t&&(qe(oi),qe(Fl))}var Ze=Hr(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function Pm(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var Pc=Wi.ReactCurrentDispatcher,sf=Wi.ReactCurrentBatchConfig,xs=0,Ke=null,ht=null,Et=null,uh=!1,gl=!1,jl=0,zS=0;function Lt(){throw Error(J(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function km(t,e,n,i,s,o){if(xs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?HS:WS,t=n(i,s),gl){o=0;do{if(gl=!1,jl=0,25<=o)throw Error(J(301));o+=1,Et=ht=null,e.updateQueue=null,Pc.current=$S,t=n(i,s)}while(gl)}if(Pc.current=ch,e=ht!==null&&ht.next!==null,xs=0,Et=ht=Ke=null,uh=!1,e)throw Error(J(300));return t}function Rm(){var t=jl!==0;return jl=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ke.memoizedState=Et=t:Et=Et.next=t,Et}function kn(){if(ht===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=Et===null?Ke.memoizedState:Et.next;if(e!==null)Et=e,ht=t;else{if(t===null)throw Error(J(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Et===null?Ke.memoizedState=Et=t:Et=Et.next=t}return Et}function Bl(t,e){return typeof e=="function"?e(t):e}function of(t){var e=kn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=ht,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((xs&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var v={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=i):d=d.next=v,Ke.lanes|=_,Is|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Wn(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,Is|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function af(t){var e=kn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Wn(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function T0(){}function x0(t,e){var n=Ke,i=kn(),s=e(),o=!Wn(i.memoizedState,s);if(o&&(i.memoizedState=s,tn=!0),i=i.queue,bm(C0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Ul(9,S0.bind(null,n,i,s,e),void 0,null),Tt===null)throw Error(J(349));xs&30||I0(n,e,s)}return s}function I0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S0(t,e,n,i){e.value=n,e.getSnapshot=i,P0(e)&&A0(t)}function C0(t,e,n){return n(function(){P0(e)&&A0(t)})}function P0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function A0(t){var e=Fi(t,1);e!==null&&Un(e,t,1,-1)}function K_(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=US.bind(null,Ke,t),[e.memoizedState,t]}function Ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function k0(){return kn().memoizedState}function Ac(t,e,n,i){var s=ni();Ke.flags|=t,s.memoizedState=Ul(1|e,n,void 0,i===void 0?null:i)}function Uh(t,e,n,i){var s=kn();i=i===void 0?null:i;var o=void 0;if(ht!==null){var l=ht.memoizedState;if(o=l.destroy,i!==null&&Am(i,l.deps)){s.memoizedState=Ul(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Ul(1|e,n,o,i)}function Q_(t,e){return Ac(8390656,8,t,e)}function bm(t,e){return Uh(2048,8,t,e)}function R0(t,e){return Uh(4,2,t,e)}function b0(t,e){return Uh(4,4,t,e)}function L0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N0(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,L0.bind(null,e,t),n)}function Lm(){}function O0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Am(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Am(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function M0(t,e,n){return xs&21?(Wn(n,e)||(n=Bw(),Ke.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function jS(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var i=sf.transition;sf.transition={};try{t(!1),e()}finally{Fe=n,sf.transition=i}}function V0(){return kn().memoizedState}function BS(t,e,n){var i=Cr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},F0(t))z0(e,n);else if(n=v0(t,e,n,i),n!==null){var s=Wt();Un(n,t,i,s),j0(n,e,i)}}function US(t,e,n){var i=Cr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(F0(t))z0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Wn(h,l)){var d=e.interleaved;d===null?(s.next=s,xm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=v0(t,e,s,i),n!==null&&(s=Wt(),Un(n,t,i,s),j0(n,e,i))}}function F0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function z0(t,e){gl=uh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}var ch={readContext:An,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},HS={readContext:An,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4194308,4,L0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ac(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ac(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ni();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=BS.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:K_,useDebugValue:Lm,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=K_(!1),e=t[0];return t=jS.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=ni();if(Ge){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Tt===null)throw Error(J(349));xs&30||I0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Q_(C0.bind(null,i,o,t),[t]),i.flags|=2048,Ul(9,S0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=Tt.identifierPrefix;if(Ge){var n=bi,i=Ri;n=(i&~(1<<32-Bn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WS={readContext:An,useCallback:O0,useContext:An,useEffect:bm,useImperativeHandle:N0,useInsertionEffect:R0,useLayoutEffect:b0,useMemo:D0,useReducer:of,useRef:k0,useState:function(){return of(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=kn();return M0(e,ht.memoizedState,t)},useTransition:function(){var t=of(Bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:x0,useId:V0,unstable_isNewReconciler:!1},$S={readContext:An,useCallback:O0,useContext:An,useEffect:bm,useImperativeHandle:N0,useInsertionEffect:R0,useLayoutEffect:b0,useMemo:D0,useReducer:af,useRef:k0,useState:function(){return af(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=kn();return ht===null?e.memoizedState=t:M0(e,ht.memoizedState,t)},useTransition:function(){var t=af(Bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:x0,useId:V0,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hh={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wt(),s=Cr(t),o=Oi(i,s);o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,s),e!==null&&(Un(e,t,s,i),Cc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wt(),s=Cr(t),o=Oi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,s),e!==null&&(Un(e,t,s,i),Cc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),i=Cr(t),s=Oi(n,i);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,i),e!==null&&(Un(e,t,i,n),Cc(e,t,i))}};function Y_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,i)||!Ol(s,o):!0}function B0(t,e,n){var i=!1,s=Dr,o=e.contextType;return typeof o=="object"&&o!==null?o=An(o):(s=rn(e)?Es:Ft.current,i=e.contextTypes,o=(i=i!=null)?Ho(t,s):Dr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function X_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Hh.enqueueReplaceState(e,e.state,null)}function sp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Im(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=An(o):(o=rn(e)?Es:Ft.current,s.context=Ho(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hh.enqueueReplaceState(s,s.state,null),ah(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",i=e;do n+=vI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qS=typeof WeakMap=="function"?WeakMap:Map;function U0(t,e,n){n=Oi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){dh||(dh=!0,gp=i),op(t,e)},n}function H0(t,e,n){n=Oi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){op(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){op(t,e),typeof i!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function J_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=oC.bind(null,t,e,n),e.then(t,t))}function ey(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ty(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oi(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var GS=Wi.ReactCurrentOwner,tn=!1;function Ht(t,e,n,i){e.child=t===null?y0(e,null,n,i):$o(e,t.child,n,i)}function ny(t,e,n,i,s){n=n.render;var o=e.ref;return Do(e,s),i=km(t,e,n,i,o,s),n=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(Ge&&n&&_m(e),e.flags|=1,Ht(t,e,i,s),e.child)}function iy(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!jm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,W0(t,e,o,i,s)):(t=Lc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(l,i)&&t.ref===e.ref)return zi(t,e,s)}return e.flags|=1,t=Pr(o,i),t.ref=e.ref,t.return=e,e.child=t}function W0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ol(o,i)&&t.ref===e.ref)if(tn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,zi(t,e,s)}return ap(t,e,n,i,s)}function $0(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(ko,un),un|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(ko,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ue(ko,un),un|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ue(ko,un),un|=i;return Ht(t,e,s,n),e.child}function q0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,n,i,s){var o=rn(n)?Es:Ft.current;return o=Ho(e,o),Do(e,s),n=km(t,e,n,i,o,s),i=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(Ge&&i&&_m(e),e.flags|=1,Ht(t,e,n,s),e.child)}function ry(t,e,n,i,s){if(rn(n)){var o=!0;nh(e)}else o=!1;if(Do(e,s),e.stateNode===null)kc(t,e),B0(e,n,i),sp(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=An(p):(p=rn(n)?Es:Ft.current,p=Ho(e,p));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&X_(e,l,i,p),ar=!1;var T=e.memoizedState;l.state=T,ah(e,i,l,s),d=e.memoizedState,h!==i||T!==d||nn.current||ar?(typeof _=="function"&&(rp(e,n,_,i),d=e.memoizedState),(h=ar||Y_(e,n,h,i,T,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,w0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Mn(e.type,h),l.props=p,v=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=An(d):(d=rn(n)?Es:Ft.current,d=Ho(e,d));var A=n.getDerivedStateFromProps;(_=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||T!==d)&&X_(e,l,i,d),ar=!1,T=e.memoizedState,l.state=T,ah(e,i,l,s);var V=e.memoizedState;h!==v||T!==V||nn.current||ar?(typeof A=="function"&&(rp(e,n,A,i),V=e.memoizedState),(p=ar||Y_(e,n,p,i,T,V,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,V,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,V,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=V),l.props=i,l.state=V,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return lp(t,e,n,i,o,s)}function lp(t,e,n,i,s,o){q0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&H_(e,n,!1),zi(t,e,o);i=e.stateNode,GS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,h,o)):Ht(t,e,h,o),e.memoizedState=i.state,s&&H_(e,n,!0),e.child}function G0(t){var e=t.stateNode;e.pendingContext?U_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U_(t,e.context,!1),Sm(t,e.containerInfo)}function sy(t,e,n,i,s){return Wo(),vm(s),e.flags|=256,Ht(t,e,n,i),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Z0(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ue(Ze,s&1),t===null)return np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=qh(l,i,0,null),t=ys(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=cp(n),e.memoizedState=up,t):Nm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return ZS(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Pr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Pr(h,o):(o=ys(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?cp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=up,i}return o=t.child,t=o.sibling,i=Pr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Nm(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hc(t,e,n,i){return i!==null&&vm(i),$o(e,t.child,null,n),t=Nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZS(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=lf(Error(J(422))),hc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=qh({mode:"visible",children:i.children},s,0,null),o=ys(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&$o(e,t.child,null,l),e.child.memoizedState=cp(l),e.memoizedState=up,o);if(!(e.mode&1))return hc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(J(419)),i=lf(o,i,void 0),hc(t,e,l,i)}if(h=(l&t.childLanes)!==0,tn||h){if(i=Tt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Fi(t,s),Un(i,t,s,-1))}return zm(),i=lf(Error(J(421))),hc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aC.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,cn=xr(s.nextSibling),dn=e,Ge=!0,Fn=null,t!==null&&(xn[In++]=Ri,xn[In++]=bi,xn[In++]=Ts,Ri=t.id,bi=t.overflow,Ts=e),e=Nm(e,i.children),e.flags|=4096,e)}function oy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ip(t.return,e,n)}function uf(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function K0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ht(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,n,e);else if(t.tag===19)oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ue(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uf(e,!0,n,null,o);break;case"together":uf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KS(t,e,n){switch(e.tag){case 3:G0(e),Wo();break;case 5:E0(e);break;case 1:rn(e.type)&&nh(e);break;case 4:Sm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ue(sh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ue(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?Z0(t,e,n):(Ue(Ze,Ze.current&1),t=zi(t,e,n),t!==null?t.sibling:null);Ue(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return K0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,$0(t,e,n)}return zi(t,e,n)}var Q0,hp,Y0,X0;Q0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hp=function(){};Y0=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ms(oi.current);var o=null;switch(n){case"input":s=Nf(t,s),i=Nf(t,i),o=[];break;case"select":s=Qe({},s,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":s=Mf(t,s),i=Mf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=eh)}Ff(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Pl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&We("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};X0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Xa(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function QS(t,e,n){var i=e.pendingProps;switch(ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return rn(e.type)&&th(),Nt(e),null;case 3:return i=e.stateNode,qo(),qe(nn),qe(Ft),Pm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(vp(Fn),Fn=null))),hp(t,e),Nt(e),null;case 5:Cm(e);var s=ms(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)Y0(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Nt(e),null}if(t=ms(oi.current),uc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ri]=e,i[Vl]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(s=0;s<il.length;s++)We(il[s],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":m_(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":__(i,o),We("invalid",i)}Ff(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",""+h]):Pl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&We("scroll",i)}switch(n){case"input":ec(i),g_(i,o,!0);break;case"textarea":ec(i),y_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=eh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ri]=e,t[Vl]=i,Q0(t,e,!1,!1),e.stateNode=t;e:{switch(l=zf(n,i),n){case"dialog":We("cancel",t),We("close",t),s=i;break;case"iframe":case"object":case"embed":We("load",t),s=i;break;case"video":case"audio":for(s=0;s<il.length;s++)We(il[s],t);s=i;break;case"source":We("error",t),s=i;break;case"img":case"image":case"link":We("error",t),We("load",t),s=i;break;case"details":We("toggle",t),s=i;break;case"input":m_(t,i),s=Nf(t,i),We("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Qe({},i,{value:void 0}),We("invalid",t);break;case"textarea":__(t,i),s=Mf(t,i),We("invalid",t);break;default:s=i}Ff(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?kw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Pw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Al(t,d):typeof d=="number"&&Al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&We("scroll",t):d!=null&&im(t,o,d,l))}switch(n){case"input":ec(t),g_(t,i,!1);break;case"textarea":ec(t),y_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Or(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?bo(t,!!i.multiple,o,!1):i.defaultValue!=null&&bo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)X0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=ms(zl.current),ms(oi.current),uc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ri]=e,(o=i.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:lc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ri]=e,e.stateNode=i}return Nt(e),null;case 13:if(qe(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&cn!==null&&e.mode&1&&!(e.flags&128))g0(),Wo(),e.flags|=98560,o=!1;else if(o=uc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[ri]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else Fn!==null&&(vp(Fn),Fn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?dt===0&&(dt=3):zm())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return qo(),hp(t,e),t===null&&Dl(e.stateNode.containerInfo),Nt(e),null;case 10:return Tm(e.type._context),Nt(e),null;case 17:return rn(e.type)&&th(),Nt(e),null;case 19:if(qe(Ze),o=e.memoizedState,o===null)return Nt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Xa(o,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=lh(t),l!==null){for(e.flags|=128,Xa(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Zo&&(e.flags|=128,i=!0,Xa(o,!1),e.lanes=4194304)}else{if(!i)if(t=lh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ge)return Nt(e),null}else 2*it()-o.renderingStartTime>Zo&&n!==1073741824&&(e.flags|=128,i=!0,Xa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ze.current,Ue(Ze,i?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Fm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?un&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function YS(t,e){switch(ym(e),e.tag){case 1:return rn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),qe(nn),qe(Ft),Pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cm(e),null;case 13:if(qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ze),null;case 4:return qo(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return Fm(),null;case 24:return null;default:return null}}var dc=!1,Mt=!1,XS=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function dp(t,e,n){try{n()}catch(i){Je(t,e,i)}}var ay=!1;function JS(t,e){if(Kf=Yc,t=i0(),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,v=t,T=null;t:for(;;){for(var A;v!==n||s!==0&&v.nodeType!==3||(h=l+s),v!==o||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(A=v.firstChild)!==null;)T=v,v=A;for(;;){if(v===t)break t;if(T===n&&++p===s&&(h=l),T===o&&++_===i&&(d=l),(A=v.nextSibling)!==null)break;v=T,T=v.parentNode}v=A}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qf={focusedElem:t,selectionRange:n},Yc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var F=V.memoizedProps,B=V.memoizedState,k=e.stateNode,C=k.getSnapshotBeforeUpdate(e.elementType===e.type?F:Mn(e.type,F),B);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(W){Je(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return V=ay,ay=!1,V}function _l(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&dp(e,n,o)}s=s.next}while(s!==i)}}function Wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J0(t){var e=t.alternate;e!==null&&(t.alternate=null,J0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[Vl],delete e[Jf],delete e[DS],delete e[MS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eE(t){return t.tag===5||t.tag===3||t.tag===4}function ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eh));else if(i!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}var It=null,Vn=!1;function rr(t,e,n){for(n=n.child;n!==null;)tE(t,e,n),n=n.sibling}function tE(t,e,n){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(Mh,n)}catch{}switch(n.tag){case 5:Mt||Ao(n,e);case 6:var i=It,s=Vn;It=null,rr(t,e,n),It=i,Vn=s,It!==null&&(Vn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Vn?(t=It,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),Ll(t)):tf(It,n.stateNode));break;case 4:i=It,s=Vn,It=n.stateNode.containerInfo,Vn=!0,rr(t,e,n),It=i,Vn=s;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&dp(n,e,l),s=s.next}while(s!==i)}rr(t,e,n);break;case 1:if(!Mt&&(Ao(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,rr(t,e,n),Mt=i):rr(t,e,n);break;default:rr(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XS),e.forEach(function(i){var s=lC.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:It=h.stateNode,Vn=!1;break e;case 3:It=h.stateNode.containerInfo,Vn=!0;break e;case 4:It=h.stateNode.containerInfo,Vn=!0;break e}h=h.return}if(It===null)throw Error(J(160));tE(o,l,s),It=null,Vn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){Je(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nE(e,t),e=e.sibling}function nE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ti(t),i&4){try{_l(3,t,t.return),Wh(3,t)}catch(F){Je(t,t.return,F)}try{_l(5,t,t.return)}catch(F){Je(t,t.return,F)}}break;case 1:Dn(e,t),ti(t),i&512&&n!==null&&Ao(n,n.return);break;case 5:if(Dn(e,t),ti(t),i&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(F){Je(t,t.return,F)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Iw(s,o),zf(h,l);var p=zf(h,o);for(l=0;l<d.length;l+=2){var _=d[l],v=d[l+1];_==="style"?kw(s,v):_==="dangerouslySetInnerHTML"?Pw(s,v):_==="children"?Al(s,v):im(s,_,v,p)}switch(h){case"input":Of(s,o);break;case"textarea":Sw(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?bo(s,!!o.multiple,A,!1):T!==!!o.multiple&&(o.defaultValue!=null?bo(s,!!o.multiple,o.defaultValue,!0):bo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Vl]=o}catch(F){Je(t,t.return,F)}}break;case 6:if(Dn(e,t),ti(t),i&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(F){Je(t,t.return,F)}}break;case 3:if(Dn(e,t),ti(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(F){Je(t,t.return,F)}break;case 4:Dn(e,t),ti(t);break;case 13:Dn(e,t),ti(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Mm=it())),i&4&&uy(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(p=Mt)||_,Dn(e,t),Mt=p):Dn(e,t),ti(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(ae=t,_=t.child;_!==null;){for(v=ae=_;ae!==null;){switch(T=ae,A=T.child,T.tag){case 0:case 11:case 14:case 15:_l(4,T,T.return);break;case 1:Ao(T,T.return);var V=T.stateNode;if(typeof V.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(F){Je(i,n,F)}}break;case 5:Ao(T,T.return);break;case 22:if(T.memoizedState!==null){hy(v);continue}}A!==null?(A.return=T,ae=A):hy(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Aw("display",l))}catch(F){Je(t,t.return,F)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(F){Je(t,t.return,F)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Dn(e,t),ti(t),i&4&&uy(t);break;case 21:break;default:Dn(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eE(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Al(s,""),i.flags&=-33);var o=ly(t);mp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=ly(t);pp(t,h,l);break;default:throw Error(J(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eC(t,e,n){ae=t,iE(t)}function iE(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||dc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Mt;h=dc;var p=Mt;if(dc=l,(Mt=d)&&!p)for(ae=s;ae!==null;)l=ae,d=l.child,l.tag===22&&l.memoizedState!==null?dy(s):d!==null?(d.return=l,ae=d):dy(s);for(;o!==null;)ae=o,iE(o),o=o.sibling;ae=s,dc=h,Mt=p}cy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):cy(t)}}function cy(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Wh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Z_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&Ll(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Mt||e.flags&512&&fp(e)}catch(T){Je(e,e.return,T)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function hy(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function dy(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wh(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{fp(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{fp(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){ae=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ae=h;break}ae=e.return}}var tC=Math.ceil,hh=Wi.ReactCurrentDispatcher,Om=Wi.ReactCurrentOwner,Pn=Wi.ReactCurrentBatchConfig,Re=0,Tt=null,lt=null,At=0,un=0,ko=Hr(0),dt=0,Hl=null,Is=0,$h=0,Dm=0,yl=null,Jt=null,Mm=0,Zo=1/0,Pi=null,dh=!1,gp=null,Sr=null,fc=!1,_r=null,fh=0,vl=0,_p=null,Rc=-1,bc=0;function Wt(){return Re&6?it():Rc!==-1?Rc:Rc=it()}function Cr(t){return t.mode&1?Re&2&&At!==0?At&-At:FS.transition!==null?(bc===0&&(bc=Bw()),bc):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Zw(t.type)),t):1}function Un(t,e,n,i){if(50<vl)throw vl=0,_p=null,Error(J(185));iu(t,n,i),(!(Re&2)||t!==Tt)&&(t===Tt&&(!(Re&2)&&($h|=n),dt===4&&ur(t,At)),sn(t,i),n===1&&Re===0&&!(e.mode&1)&&(Zo=it()+500,Bh&&Wr()))}function sn(t,e){var n=t.callbackNode;FI(t,e);var i=Qc(t,t===Tt?At:0);if(i===0)n!==null&&E_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&E_(n),e===1)t.tag===0?VS(fy.bind(null,t)):f0(fy.bind(null,t)),NS(function(){!(Re&6)&&Wr()}),n=null;else{switch(Uw(i)){case 1:n=lm;break;case 4:n=zw;break;case 16:n=Kc;break;case 536870912:n=jw;break;default:n=Kc}n=hE(n,rE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rE(t,e){if(Rc=-1,bc=0,Re&6)throw Error(J(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var i=Qc(t,t===Tt?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ph(t,i);else{e=i;var s=Re;Re|=2;var o=oE();(Tt!==t||At!==e)&&(Pi=null,Zo=it()+500,_s(t,e));do try{rC();break}catch(h){sE(t,h)}while(!0);Em(),hh.current=o,Re=s,lt!==null?e=0:(Tt=null,At=0,e=dt)}if(e!==0){if(e===2&&(s=Wf(t),s!==0&&(i=s,e=yp(t,s))),e===1)throw n=Hl,_s(t,0),ur(t,i),sn(t,it()),n;if(e===6)ur(t,i);else{if(s=t.current.alternate,!(i&30)&&!nC(s)&&(e=ph(t,i),e===2&&(o=Wf(t),o!==0&&(i=o,e=yp(t,o))),e===1))throw n=Hl,_s(t,0),ur(t,i),sn(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:hs(t,Jt,Pi);break;case 3:if(ur(t,i),(i&130023424)===i&&(e=Mm+500-it(),10<e)){if(Qc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xf(hs.bind(null,t,Jt,Pi),e);break}hs(t,Jt,Pi);break;case 4:if(ur(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Bn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tC(i/1960))-i,10<i){t.timeoutHandle=Xf(hs.bind(null,t,Jt,Pi),i);break}hs(t,Jt,Pi);break;case 5:hs(t,Jt,Pi);break;default:throw Error(J(329))}}}return sn(t,it()),t.callbackNode===n?rE.bind(null,t):null}function yp(t,e){var n=yl;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=ph(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&vp(e)),t}function vp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function nC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Wn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Dm,e&=~$h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bn(e),i=1<<n;t[n]=-1,e&=~i}}function fy(t){if(Re&6)throw Error(J(327));Mo();var e=Qc(t,0);if(!(e&1))return sn(t,it()),null;var n=ph(t,e);if(t.tag!==0&&n===2){var i=Wf(t);i!==0&&(e=i,n=yp(t,i))}if(n===1)throw n=Hl,_s(t,0),ur(t,e),sn(t,it()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,Jt,Pi),sn(t,it()),null}function Vm(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Zo=it()+500,Bh&&Wr())}}function Ss(t){_r!==null&&_r.tag===0&&!(Re&6)&&Mo();var e=Re;Re|=1;var n=Pn.transition,i=Fe;try{if(Pn.transition=null,Fe=1,t)return t()}finally{Fe=i,Pn.transition=n,Re=e,!(Re&6)&&Wr()}}function Fm(){un=ko.current,qe(ko)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LS(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(ym(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&th();break;case 3:qo(),qe(nn),qe(Ft),Pm();break;case 5:Cm(i);break;case 4:qo();break;case 13:qe(Ze);break;case 19:qe(Ze);break;case 10:Tm(i.type._context);break;case 22:case 23:Fm()}n=n.return}if(Tt=t,lt=t=Pr(t.current,null),At=un=e,dt=0,Hl=null,Dm=$h=Is=0,Jt=yl=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}ps=null}return t}function sE(t,e){do{var n=lt;try{if(Em(),Pc.current=ch,uh){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}uh=!1}if(xs=0,Et=ht=Ke=null,gl=!1,jl=0,Om.current=null,n===null||n.return===null){dt=1,Hl=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=ey(l);if(A!==null){A.flags&=-257,ty(A,l,h,o,e),A.mode&1&&J_(o,p,e),e=A,d=p;var V=e.updateQueue;if(V===null){var F=new Set;F.add(d),e.updateQueue=F}else V.add(d);break e}else{if(!(e&1)){J_(o,p,e),zm();break e}d=Error(J(426))}}else if(Ge&&h.mode&1){var B=ey(l);if(B!==null){!(B.flags&65536)&&(B.flags|=256),ty(B,l,h,o,e),vm(Go(d,h));break e}}o=d=Go(d,h),dt!==4&&(dt=2),yl===null?yl=[o]:yl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=U0(o,d,e);G_(o,k);break e;case 1:h=d;var C=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Sr===null||!Sr.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=H0(o,h,e);G_(o,W);break e}}o=o.return}while(o!==null)}lE(n)}catch(X){e=X,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function oE(){var t=hh.current;return hh.current=ch,t===null?ch:t}function zm(){(dt===0||dt===3||dt===2)&&(dt=4),Tt===null||!(Is&268435455)&&!($h&268435455)||ur(Tt,At)}function ph(t,e){var n=Re;Re|=2;var i=oE();(Tt!==t||At!==e)&&(Pi=null,_s(t,e));do try{iC();break}catch(s){sE(t,s)}while(!0);if(Em(),Re=n,hh.current=i,lt!==null)throw Error(J(261));return Tt=null,At=0,dt}function iC(){for(;lt!==null;)aE(lt)}function rC(){for(;lt!==null&&!kI();)aE(lt)}function aE(t){var e=cE(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?lE(t):lt=e,Om.current=null}function lE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YS(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,lt=null;return}}else if(n=QS(n,e,un),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);dt===0&&(dt=5)}function hs(t,e,n){var i=Fe,s=Pn.transition;try{Pn.transition=null,Fe=1,sC(t,e,n,i)}finally{Pn.transition=s,Fe=i}return null}function sC(t,e,n,i){do Mo();while(_r!==null);if(Re&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zI(t,o),t===Tt&&(lt=Tt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,hE(Kc,function(){return Mo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pn.transition,Pn.transition=null;var l=Fe;Fe=1;var h=Re;Re|=4,Om.current=null,JS(t,n),nE(n,t),SS(Qf),Yc=!!Kf,Qf=Kf=null,t.current=n,eC(n),RI(),Re=h,Fe=l,Pn.transition=o}else t.current=n;if(fc&&(fc=!1,_r=t,fh=s),o=t.pendingLanes,o===0&&(Sr=null),NI(n.stateNode),sn(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(dh)throw dh=!1,t=gp,gp=null,t;return fh&1&&t.tag!==0&&Mo(),o=t.pendingLanes,o&1?t===_p?vl++:(vl=0,_p=t):vl=0,Wr(),null}function Mo(){if(_r!==null){var t=Uw(fh),e=Pn.transition,n=Fe;try{if(Pn.transition=null,Fe=16>t?16:t,_r===null)var i=!1;else{if(t=_r,_r=null,fh=0,Re&6)throw Error(J(331));var s=Re;for(Re|=4,ae=t.current;ae!==null;){var o=ae,l=o.child;if(ae.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ae=p;ae!==null;){var _=ae;switch(_.tag){case 0:case 11:case 15:_l(8,_,o)}var v=_.child;if(v!==null)v.return=_,ae=v;else for(;ae!==null;){_=ae;var T=_.sibling,A=_.return;if(J0(_),_===p){ae=null;break}if(T!==null){T.return=A,ae=T;break}ae=A}}}var V=o.alternate;if(V!==null){var F=V.child;if(F!==null){V.child=null;do{var B=F.sibling;F.sibling=null,F=B}while(F!==null)}}ae=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ae=l;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_l(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ae=k;break e}ae=o.return}}var C=t.current;for(ae=C;ae!==null;){l=ae;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ae=O;else e:for(l=C;ae!==null;){if(h=ae,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Wh(9,h)}}catch(X){Je(h,h.return,X)}if(h===l){ae=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,ae=W;break e}ae=h.return}}if(Re=s,Wr(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(Mh,t)}catch{}i=!0}return i}finally{Fe=n,Pn.transition=e}}return!1}function py(t,e,n){e=Go(n,e),e=U0(t,e,1),t=Ir(t,e,1),e=Wt(),t!==null&&(iu(t,1,e),sn(t,e))}function Je(t,e,n){if(t.tag===3)py(t,t,n);else for(;e!==null;){if(e.tag===3){py(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Sr===null||!Sr.has(i))){t=Go(n,t),t=H0(e,t,1),e=Ir(e,t,1),t=Wt(),e!==null&&(iu(e,1,t),sn(e,t));break}}e=e.return}}function oC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(At&n)===n&&(dt===4||dt===3&&(At&130023424)===At&&500>it()-Mm?_s(t,0):Dm|=n),sn(t,e)}function uE(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=Wt();t=Fi(t,e),t!==null&&(iu(t,e,n),sn(t,n))}function aC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uE(t,n)}function lC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),uE(t,n)}var cE;cE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,KS(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ge&&e.flags&1048576&&p0(e,rh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kc(t,e),t=e.pendingProps;var s=Ho(e,Ft.current);Do(e,n),s=km(null,e,i,t,s,n);var o=Rm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(i)?(o=!0,nh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Im(e),s.updater=Hh,e.stateNode=s,s._reactInternals=e,sp(e,i,t,n),e=lp(null,e,i,!0,o,n)):(e.tag=0,Ge&&o&&_m(e),Ht(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=cC(i),t=Mn(i,t),s){case 0:e=ap(null,e,i,t,n);break e;case 1:e=ry(null,e,i,t,n);break e;case 11:e=ny(null,e,i,t,n);break e;case 14:e=iy(null,e,i,Mn(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),ap(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),ry(t,e,i,s,n);case 3:e:{if(G0(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,s=o.element,w0(t,e),ah(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Go(Error(J(423)),e),e=sy(t,e,i,n,s);break e}else if(i!==s){s=Go(Error(J(424)),e),e=sy(t,e,i,n,s);break e}else for(cn=xr(e.stateNode.containerInfo.firstChild),dn=e,Ge=!0,Fn=null,n=y0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),i===s){e=zi(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return E0(e),t===null&&np(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Yf(i,s)?l=null:o!==null&&Yf(i,o)&&(e.flags|=32),q0(t,e),Ht(t,e,l,n),e.child;case 6:return t===null&&np(e),null;case 13:return Z0(t,e,n);case 4:return Sm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=$o(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),ny(t,e,i,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Ue(sh,i._currentValue),i._currentValue=l,o!==null)if(Wn(o.value,l)){if(o.children===s.children&&!nn.current){e=zi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Oi(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ip(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(J(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ip(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Do(e,n),s=An(s),i=i(s),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,s=Mn(i,e.pendingProps),s=Mn(i.type,s),iy(t,e,i,s,n);case 15:return W0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),kc(t,e),e.tag=1,rn(i)?(t=!0,nh(e)):t=!1,Do(e,n),B0(e,i,s),sp(e,i,s,n),lp(null,e,i,!0,t,n);case 19:return K0(t,e,n);case 22:return $0(t,e,n)}throw Error(J(156,e.tag))};function hE(t,e){return Fw(t,e)}function uC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,i){return new uC(t,e,n,i)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cC(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sm)return 11;if(t===om)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")jm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vo:return ys(n.children,s,o,e);case rm:l=8,s|=8;break;case kf:return t=Cn(12,n,e,s|2),t.elementType=kf,t.lanes=o,t;case Rf:return t=Cn(13,n,e,s),t.elementType=Rf,t.lanes=o,t;case bf:return t=Cn(19,n,e,s),t.elementType=bf,t.lanes=o,t;case Ew:return qh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vw:l=10;break e;case ww:l=9;break e;case sm:l=11;break e;case om:l=14;break e;case or:l=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Cn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function ys(t,e,n,i){return t=Cn(7,t,i,e),t.lanes=n,t}function qh(t,e,n,i){return t=Cn(22,t,i,e),t.elementType=Ew,t.lanes=n,t.stateNode={isHidden:!1},t}function cf(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function hf(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hC(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(t,e,n,i,s,o,l,h,d){return t=new hC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(o),t}function dC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dE(t){if(!t)return Dr;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(rn(n))return d0(t,n,e)}return e}function fE(t,e,n,i,s,o,l,h,d){return t=Bm(n,i,!0,t,s,o,l,h,d),t.context=dE(null),n=t.current,i=Wt(),s=Cr(n),o=Oi(i,s),o.callback=e??null,Ir(n,o,s),t.current.lanes=s,iu(t,s,i),sn(t,i),t}function Gh(t,e,n,i){var s=e.current,o=Wt(),l=Cr(s);return n=dE(n),e.context===null?e.context=n:e.pendingContext=n,e=Oi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ir(s,e,l),t!==null&&(Un(t,s,l,o),Cc(t,s,l)),l}function mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function my(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Um(t,e){my(t,e),(t=t.alternate)&&my(t,e)}function fC(){return null}var pE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hm(t){this._internalRoot=t}Zh.prototype.render=Hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Gh(t,e,null,null)};Zh.prototype.unmount=Hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){Gh(null,t,null,null)}),e[Vi]=null}};function Zh(t){this._internalRoot=t}Zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=$w();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&Gw(t)}};function Wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gy(){}function pC(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=mh(l);o.call(p)}}var l=fE(e,i,t,0,null,!1,!1,"",gy);return t._reactRootContainer=l,t[Vi]=l.current,Dl(t.nodeType===8?t.parentNode:t),Ss(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=mh(d);h.call(p)}}var d=Bm(t,0,!1,null,null,!1,!1,"",gy);return t._reactRootContainer=d,t[Vi]=d.current,Dl(t.nodeType===8?t.parentNode:t),Ss(function(){Gh(e,d,n,i)}),d}function Qh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=mh(l);h.call(d)}}Gh(e,l,t,s)}else l=pC(n,e,t,s,i);return mh(l)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nl(e.pendingLanes);n!==0&&(um(e,n|1),sn(e,it()),!(Re&6)&&(Zo=it()+500,Wr()))}break;case 13:Ss(function(){var i=Fi(t,1);if(i!==null){var s=Wt();Un(i,t,1,s)}}),Um(t,1)}};cm=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=Wt();Un(e,t,134217728,n)}Um(t,134217728)}};Ww=function(t){if(t.tag===13){var e=Cr(t),n=Fi(t,e);if(n!==null){var i=Wt();Un(n,t,e,i)}Um(t,e)}};$w=function(){return Fe};qw=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Bf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=jh(i);if(!s)throw Error(J(90));xw(i),Of(i,s)}}}break;case"textarea":Sw(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};Lw=Vm;Nw=Ss;var mC={usingClientEntryPoint:!1,Events:[su,xo,jh,Rw,bw,Vm]},Ja={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gC={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||fC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Mh=pc.inject(gC),si=pc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(e))throw Error(J(200));return dC(t,e,null,n)};pn.createRoot=function(t,e){if(!Wm(t))throw Error(J(299));var n=!1,i="",s=pE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bm(t,1,!1,null,null,n,!1,i,s),t[Vi]=e.current,Dl(t.nodeType===8?t.parentNode:t),new Hm(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Mw(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return Ss(t)};pn.hydrate=function(t,e,n){if(!Kh(e))throw Error(J(200));return Qh(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Wm(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=pE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=fE(e,null,t,1,n??null,s,!1,o,l),t[Vi]=e.current,Dl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zh(e)};pn.render=function(t,e,n){if(!Kh(e))throw Error(J(200));return Qh(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Kh(t))throw Error(J(40));return t._reactRootContainer?(Ss(function(){Qh(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};pn.unstable_batchedUpdates=Vm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Kh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Qh(t,e,n,!1,i)};pn.version="18.3.1-next-f1338f8080-20240426";function mE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mE)}catch(t){console.error(t)}}mE(),mw.exports=pn;var gE=mw.exports,_y=gE;Pf.createRoot=_y.createRoot,Pf.hydrateRoot=_y.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wl.apply(this,arguments)}var yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yr||(yr={}));const yy="popstate";function _C(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return wp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:yE(s)}return vC(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _E(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yC(){return Math.random().toString(36).substr(2,8)}function vy(t,e){return{usr:t.state,key:t.key,idx:e}}function wp(t,e,n,i){return n===void 0&&(n=null),Wl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oa(e):e,{state:n,key:e&&e.key||i||yC()})}function yE(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function vC(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=yr.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(Wl({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function v(){h=yr.Pop;let B=_(),k=B==null?null:B-p;p=B,d&&d({action:h,location:F.location,delta:k})}function T(B,k){h=yr.Push;let C=wp(F.location,B,k);p=_()+1;let O=vy(C,p),W=F.createHref(C);try{l.pushState(O,"",W)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(W)}o&&d&&d({action:h,location:F.location,delta:1})}function A(B,k){h=yr.Replace;let C=wp(F.location,B,k);p=_();let O=vy(C,p),W=F.createHref(C);l.replaceState(O,"",W),o&&d&&d({action:h,location:F.location,delta:0})}function V(B){let k=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof B=="string"?B:yE(B);return C=C.replace(/ $/,"%20"),ft(k,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,k)}let F={get action(){return h},get location(){return t(s,l)},listen(B){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(yy,v),d=B,()=>{s.removeEventListener(yy,v),d=null}},createHref(B){return e(s,B)},createURL:V,encodeLocation(B){let k=V(B);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:T,replace:A,go(B){return l.go(B)}};return F}var wy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wy||(wy={}));function wC(t,e,n){return n===void 0&&(n="/"),EC(t,e,n)}function EC(t,e,n,i){let s=typeof e=="string"?oa(e):e,o=EE(s.pathname||"/",n);if(o==null)return null;let l=vE(t);TC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=OC(o);h=bC(l[d],p)}return h}function vE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ft(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=vs([i,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(ft(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),vE(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:kC(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of wE(o.path))s(o,l,d)}),e}function wE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=wE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function TC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const xC=/^:[\w-]+$/,IC=3,SC=2,CC=1,PC=10,AC=-2,Ey=t=>t==="*";function kC(t,e){let n=t.split("/"),i=n.length;return n.some(Ey)&&(i+=AC),e&&(i+=SC),n.filter(s=>!Ey(s)).reduce((s,o)=>s+(xC.test(o)?IC:o===""?CC:PC),i)}function RC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function bC(t,e,n){let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=LC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),T=d.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:vs([o,v.pathname]),pathnameBase:jC(vs([o,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(o=vs([o,v.pathnameBase]))}return l}function LC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=NC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,_,v)=>{let{paramName:T,isOptional:A}=_;if(T==="*"){let F=h[v]||"";l=o.slice(0,o.length-F.length).replace(/(.)\/+$/,"$1")}const V=h[v];return A&&!V?p[T]=void 0:p[T]=(V||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function NC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_E(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function OC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _E(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function EE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function DC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?oa(t):t;return{pathname:n?n.startsWith("/")?n:MC(n,e):e,search:BC(i),hash:UC(s)}}function MC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function df(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FC(t,e){let n=VC(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zC(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=oa(t):(s=Wl({},t),ft(!s.pathname||!s.pathname.includes("?"),df("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),df("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),df("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),v-=1;s.pathname=T.join("/")}h=v>=0?e[v]:"/"}let d=DC(s,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),jC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TE=["post","put","patch","delete"];new Set(TE);const WC=["get",...TE];new Set(WC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$l.apply(this,arguments)}const $m=G.createContext(null),$C=G.createContext(null),Yh=G.createContext(null),Xh=G.createContext(null),Ns=G.createContext({outlet:null,matches:[],isDataRoute:!1}),xE=G.createContext(null);function Jh(){return G.useContext(Xh)!=null}function IE(){return Jh()||ft(!1),G.useContext(Xh).location}function SE(t){G.useContext(Yh).static||G.useLayoutEffect(t)}function ed(){let{isDataRoute:t}=G.useContext(Ns);return t?rP():qC()}function qC(){Jh()||ft(!1);let t=G.useContext($m),{basename:e,future:n,navigator:i}=G.useContext(Yh),{matches:s}=G.useContext(Ns),{pathname:o}=IE(),l=JSON.stringify(FC(s,n.v7_relativeSplatPath)),h=G.useRef(!1);return SE(()=>{h.current=!0}),G.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let v=zC(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:vs([e,v.pathname])),(_.replace?i.replace:i.push)(v,_.state,_)},[e,i,l,o,t])}function CE(){let{matches:t}=G.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function GC(t,e){return ZC(t,e)}function ZC(t,e,n,i){Jh()||ft(!1);let{navigator:s}=G.useContext(Yh),{matches:o}=G.useContext(Ns),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=IE(),_;if(e){var v;let B=typeof e=="string"?oa(e):e;d==="/"||(v=B.pathname)!=null&&v.startsWith(d)||ft(!1),_=B}else _=p;let T=_.pathname||"/",A=T;if(d!=="/"){let B=d.replace(/^\//,"").split("/");A="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let V=wC(t,{pathname:A}),F=JC(V&&V.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:vs([d,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?d:vs([d,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,n,i);return e&&F?G.createElement(Xh.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:yr.Pop}},F):F}function KC(){let t=iP(),e=HC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,null)}const QC=G.createElement(KC,null);class YC extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(Ns.Provider,{value:this.props.routeContext},G.createElement(xE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XC(t){let{routeContext:e,match:n,children:i}=t,s=G.useContext($m);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(Ns.Provider,{value:e},i)}function JC(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let _=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);_>=0||ft(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<l.length;_++){let v=l[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=_),v.route.id){let{loaderData:T,errors:A}=n,V=v.route.loader&&T[v.route.id]===void 0&&(!A||A[v.route.id]===void 0);if(v.route.lazy||V){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,v,T)=>{let A,V=!1,F=null,B=null;n&&(A=h&&v.route.id?h[v.route.id]:void 0,F=v.route.errorElement||QC,d&&(p<0&&T===0?(sP("route-fallback"),V=!0,B=null):p===T&&(V=!0,B=v.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,T+1)),C=()=>{let O;return A?O=F:V?O=B:v.route.Component?O=G.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=_,G.createElement(XC,{match:v,routeContext:{outlet:_,matches:k,isDataRoute:n!=null},children:O})};return n&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?G.createElement(YC,{location:n.location,revalidation:n.revalidation,component:F,error:A,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):C()},null)}var PE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PE||{}),AE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AE||{});function eP(t){let e=G.useContext($m);return e||ft(!1),e}function tP(t){let e=G.useContext($C);return e||ft(!1),e}function nP(t){let e=G.useContext(Ns);return e||ft(!1),e}function kE(t){let e=nP(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function iP(){var t;let e=G.useContext(xE),n=tP(),i=kE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function rP(){let{router:t}=eP(PE.UseNavigateStable),e=kE(AE.UseNavigateStable),n=G.useRef(!1);return SE(()=>{n.current=!0}),G.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$l({fromRouteId:e},o)))},[t,e])}const Ty={};function sP(t,e,n){Ty[t]||(Ty[t]=!0)}function oP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rl(t){ft(!1)}function aP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=yr.Pop,navigator:o,static:l=!1,future:h}=t;Jh()&&ft(!1);let d=e.replace(/^\/*/,"/"),p=G.useMemo(()=>({basename:d,navigator:o,static:l,future:$l({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=oa(i));let{pathname:_="/",search:v="",hash:T="",state:A=null,key:V="default"}=i,F=G.useMemo(()=>{let B=EE(_,d);return B==null?null:{location:{pathname:B,search:v,hash:T,state:A,key:V},navigationType:s}},[d,_,v,T,A,V,s]);return F==null?null:G.createElement(Yh.Provider,{value:p},G.createElement(Xh.Provider,{children:n,value:F}))}function lP(t){let{children:e,location:n}=t;return GC(Ep(e),n)}new Promise(()=>{});function Ep(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(i,s)=>{if(!G.isValidElement(i))return;let o=[...e,s];if(i.type===G.Fragment){n.push.apply(n,Ep(i.props.children,o));return}i.type!==rl&&ft(!1),!i.props.index||!i.props.children||ft(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ep(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uP="6";try{window.__reactRouterVersion=uP}catch{}const cP="startTransition",xy=oI[cP];function hP(t){let{basename:e,children:n,future:i,window:s}=t,o=G.useRef();o.current==null&&(o.current=_C({window:s,v5Compat:!0}));let l=o.current,[h,d]=G.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},_=G.useCallback(v=>{p&&xy?xy(()=>d(v)):d(v)},[d,p]);return G.useLayoutEffect(()=>l.listen(_),[l,_]),G.useEffect(()=>oP(i),[i]),G.createElement(aP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var Iy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var Sy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sy||(Sy={}));const dP=()=>{};var Cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,A=p&63;d||(A=64,l||(T=64)),i.push(n[_],n[v],n[T],n[A])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new pP;const T=o<<2|h>>4;if(i.push(T),p!==64){const A=h<<4&240|p>>2;if(i.push(A),v!==64){const V=p<<6&192|v;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mP=function(t){const e=RE(t);return bE.encodeByteArray(e,!0)},gh=function(t){return mP(t).replace(/\./g,"")},LE=function(t){try{return bE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=()=>gP().__FIREBASE_DEFAULTS__,yP=()=>{if(typeof process>"u"||typeof Cy>"u")return;const t=Cy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},td=()=>{try{return dP()||_P()||yP()||vP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NE=t=>{var e,n;return(n=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wP=t=>{const e=NE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OE=()=>{var t;return(t=td())==null?void 0:t.config},DE=t=>{var e;return(e=td())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ME(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gh(JSON.stringify(n)),gh(JSON.stringify(l)),""].join(".")}const wl={};function xP(){const t={prod:[],emulator:[]};for(const e of Object.keys(wl))wl[e]?t.emulator.push(e):t.prod.push(e);return t}function IP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Py=!1;function VE(t,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||wl[t]===e||wl[t]||Py)return;wl[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=xP().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Py=!0,l()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=IP(i),A=n("text"),V=document.getElementById(A)||document.createElement("span"),F=n("learnmore"),B=document.getElementById(F)||document.createElement("a"),k=n("preprendIcon"),C=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const O=T.element;h(O),_(B,F);const W=p();d(C,k),O.append(C,V,B,W),document.body.appendChild(O)}o?(V.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function CP(){var e;const t=(e=td())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RP(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bP(){return!CP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function NP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class $i extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=OP,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?DP(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new $i(s,h,i)}}function DP(t,e){return t.replace(MP,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const MP=/\{\$([^}]+)}/g;function VP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Ay(o)&&Ay(l)){if(!Cs(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ay(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ol(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FP(t,e){const n=new zP(t,e);return n.subscribe.bind(n)}class zP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new EP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UP(t){return t===ds?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const $P={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},qP=Se.INFO,GP={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},ZP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=GP[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=qP,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const KP=(t,e)=>e.some(n=>t instanceof n);let ky,Ry;function QP(){return ky||(ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YP(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,Tp=new WeakMap,zE=new WeakMap,pf=new WeakMap,Gm=new WeakMap;function XP(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ar(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),Gm.set(e,t),e}function JP(t){if(Tp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Tp.set(t,e)}let xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){xp=t(xp)}function tA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(mf(this),e,...n);return zE.set(i,e.sort?e.sort():[e]),Ar(i)}:YP().includes(t)?function(...e){return t.apply(mf(this),e),Ar(FE.get(this))}:function(...e){return Ar(t.apply(mf(this),e))}}function nA(t){return typeof t=="function"?tA(t):(t instanceof IDBTransaction&&JP(t),KP(t,QP())?new Proxy(t,xp):t)}function Ar(t){if(t instanceof IDBRequest)return XP(t);if(pf.has(t))return pf.get(t);const e=nA(t);return e!==t&&(pf.set(t,e),Gm.set(e,t)),e}const mf=t=>Gm.get(t);function iA(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Ar(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Ar(l.result),d.oldVersion,d.newVersion,Ar(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const rA=["get","getKey","getAll","getAllKeys","count"],sA=["put","add","delete","clear"],gf=new Map;function by(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=sA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return gf.set(e,o),o}eA(t=>({...t,get:(e,n,i)=>by(e,n)||t.get(e,n,i),has:(e,n)=>!!by(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",Ly="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new qm("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",hA="@firebase/app-check-compat",dA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",mA="@firebase/database",gA="@firebase/data-connect",_A="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",TA="@firebase/messaging",xA="@firebase/messaging-compat",IA="@firebase/performance",SA="@firebase/performance-compat",CA="@firebase/remote-config",PA="@firebase/remote-config-compat",AA="@firebase/storage",kA="@firebase/storage-compat",RA="@firebase/firestore",bA="@firebase/ai",LA="@firebase/firestore-compat",NA="firebase",OA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",DA={[Ip]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[dA]:"fire-app-check",[hA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[mA]:"fire-rtdb",[gA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[TA]:"fire-fcm",[xA]:"fire-fcm-compat",[IA]:"fire-perf",[SA]:"fire-perf-compat",[CA]:"fire-rc",[PA]:"fire-rc-compat",[AA]:"fire-gcs",[kA]:"fire-gcs-compat",[RA]:"fire-fst",[LA]:"fire-fst-compat",[bA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,MA=new Map,Cp=new Map;function Ny(t,e){try{t.container.addComponent(e)}catch(n){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ko(t){const e=t.name;if(Cp.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,t);for(const n of _h.values())Ny(n,t);for(const n of MA.values())Ny(n,t);return!0}function Zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new au("app","Firebase",VA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=OA;function jE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Sp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=OE()),!n)throw kr.create("no-options");const o=_h.get(s);if(o){if(Cs(n,o.options)&&Cs(i,o.config))return o;throw kr.create("duplicate-app",{appName:s})}const l=new WP(s);for(const d of Cp.values())l.addComponent(d);const h=new FA(n,i,l);return _h.set(s,h),h}function BE(t=Sp){const e=_h.get(t);if(!e&&t===Sp&&OE())return jE();if(!e)throw kr.create("no-app",{appName:t});return e}function Rr(t,e,n){let i=DA[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(l.join(" "));return}Ko(new Ps(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",jA=1,ql="firebase-heartbeat-store";let _f=null;function UE(){return _f||(_f=iA(zA,jA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),_f}async function BA(t){try{const n=(await UE()).transaction(ql),i=await n.objectStore(ql).get(HE(t));return await n.done,i}catch(e){if(e instanceof $i)ji.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ji.warn(n.message)}}}async function Oy(t,e){try{const i=(await UE()).transaction(ql,"readwrite");await i.objectStore(ql).put(e,HE(t)),await i.done}catch(n){if(n instanceof $i)ji.warn(n.message);else{const i=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ji.warn(i.message)}}}function HE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,HA=30;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Dy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>HA){const l=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ji.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dy(),{heartbeatsToSend:i,unsentEntries:s}=$A(this._heartbeatsCache.heartbeats),o=gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ji.warn(n),""}}}function Dy(){return new Date().toISOString().substring(0,10)}function $A(t,e=UA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),My(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),My(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class qA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?NP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function My(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}function GA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){Ko(new Ps("platform-logger",e=>new oA(e),"PRIVATE")),Ko(new Ps("heartbeat",e=>new WA(e),"PRIVATE")),Rr(Ip,Ly,t),Rr(Ip,Ly,"esm2020"),Rr("fire-js","")}ZA("");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,WE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function x(){}x.prototype=S.prototype,P.F=S.prototype,P.prototype=new x,P.prototype.constructor=P,P.D=function(b,D,z){for(var R=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)R[Me-2]=arguments[Me];return S.prototype[D].apply(b,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,S,x){x||(x=0);const b=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)b[D]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(D=0;D<16;++D)b[D]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=P.g[0],x=P.g[1],D=P.g[2];let z=P.g[3],R;R=S+(z^x&(D^z))+b[0]+3614090360&4294967295,S=x+(R<<7&4294967295|R>>>25),R=z+(D^S&(x^D))+b[1]+3905402710&4294967295,z=S+(R<<12&4294967295|R>>>20),R=D+(x^z&(S^x))+b[2]+606105819&4294967295,D=z+(R<<17&4294967295|R>>>15),R=x+(S^D&(z^S))+b[3]+3250441966&4294967295,x=D+(R<<22&4294967295|R>>>10),R=S+(z^x&(D^z))+b[4]+4118548399&4294967295,S=x+(R<<7&4294967295|R>>>25),R=z+(D^S&(x^D))+b[5]+1200080426&4294967295,z=S+(R<<12&4294967295|R>>>20),R=D+(x^z&(S^x))+b[6]+2821735955&4294967295,D=z+(R<<17&4294967295|R>>>15),R=x+(S^D&(z^S))+b[7]+4249261313&4294967295,x=D+(R<<22&4294967295|R>>>10),R=S+(z^x&(D^z))+b[8]+1770035416&4294967295,S=x+(R<<7&4294967295|R>>>25),R=z+(D^S&(x^D))+b[9]+2336552879&4294967295,z=S+(R<<12&4294967295|R>>>20),R=D+(x^z&(S^x))+b[10]+4294925233&4294967295,D=z+(R<<17&4294967295|R>>>15),R=x+(S^D&(z^S))+b[11]+2304563134&4294967295,x=D+(R<<22&4294967295|R>>>10),R=S+(z^x&(D^z))+b[12]+1804603682&4294967295,S=x+(R<<7&4294967295|R>>>25),R=z+(D^S&(x^D))+b[13]+4254626195&4294967295,z=S+(R<<12&4294967295|R>>>20),R=D+(x^z&(S^x))+b[14]+2792965006&4294967295,D=z+(R<<17&4294967295|R>>>15),R=x+(S^D&(z^S))+b[15]+1236535329&4294967295,x=D+(R<<22&4294967295|R>>>10),R=S+(D^z&(x^D))+b[1]+4129170786&4294967295,S=x+(R<<5&4294967295|R>>>27),R=z+(x^D&(S^x))+b[6]+3225465664&4294967295,z=S+(R<<9&4294967295|R>>>23),R=D+(S^x&(z^S))+b[11]+643717713&4294967295,D=z+(R<<14&4294967295|R>>>18),R=x+(z^S&(D^z))+b[0]+3921069994&4294967295,x=D+(R<<20&4294967295|R>>>12),R=S+(D^z&(x^D))+b[5]+3593408605&4294967295,S=x+(R<<5&4294967295|R>>>27),R=z+(x^D&(S^x))+b[10]+38016083&4294967295,z=S+(R<<9&4294967295|R>>>23),R=D+(S^x&(z^S))+b[15]+3634488961&4294967295,D=z+(R<<14&4294967295|R>>>18),R=x+(z^S&(D^z))+b[4]+3889429448&4294967295,x=D+(R<<20&4294967295|R>>>12),R=S+(D^z&(x^D))+b[9]+568446438&4294967295,S=x+(R<<5&4294967295|R>>>27),R=z+(x^D&(S^x))+b[14]+3275163606&4294967295,z=S+(R<<9&4294967295|R>>>23),R=D+(S^x&(z^S))+b[3]+4107603335&4294967295,D=z+(R<<14&4294967295|R>>>18),R=x+(z^S&(D^z))+b[8]+1163531501&4294967295,x=D+(R<<20&4294967295|R>>>12),R=S+(D^z&(x^D))+b[13]+2850285829&4294967295,S=x+(R<<5&4294967295|R>>>27),R=z+(x^D&(S^x))+b[2]+4243563512&4294967295,z=S+(R<<9&4294967295|R>>>23),R=D+(S^x&(z^S))+b[7]+1735328473&4294967295,D=z+(R<<14&4294967295|R>>>18),R=x+(z^S&(D^z))+b[12]+2368359562&4294967295,x=D+(R<<20&4294967295|R>>>12),R=S+(x^D^z)+b[5]+4294588738&4294967295,S=x+(R<<4&4294967295|R>>>28),R=z+(S^x^D)+b[8]+2272392833&4294967295,z=S+(R<<11&4294967295|R>>>21),R=D+(z^S^x)+b[11]+1839030562&4294967295,D=z+(R<<16&4294967295|R>>>16),R=x+(D^z^S)+b[14]+4259657740&4294967295,x=D+(R<<23&4294967295|R>>>9),R=S+(x^D^z)+b[1]+2763975236&4294967295,S=x+(R<<4&4294967295|R>>>28),R=z+(S^x^D)+b[4]+1272893353&4294967295,z=S+(R<<11&4294967295|R>>>21),R=D+(z^S^x)+b[7]+4139469664&4294967295,D=z+(R<<16&4294967295|R>>>16),R=x+(D^z^S)+b[10]+3200236656&4294967295,x=D+(R<<23&4294967295|R>>>9),R=S+(x^D^z)+b[13]+681279174&4294967295,S=x+(R<<4&4294967295|R>>>28),R=z+(S^x^D)+b[0]+3936430074&4294967295,z=S+(R<<11&4294967295|R>>>21),R=D+(z^S^x)+b[3]+3572445317&4294967295,D=z+(R<<16&4294967295|R>>>16),R=x+(D^z^S)+b[6]+76029189&4294967295,x=D+(R<<23&4294967295|R>>>9),R=S+(x^D^z)+b[9]+3654602809&4294967295,S=x+(R<<4&4294967295|R>>>28),R=z+(S^x^D)+b[12]+3873151461&4294967295,z=S+(R<<11&4294967295|R>>>21),R=D+(z^S^x)+b[15]+530742520&4294967295,D=z+(R<<16&4294967295|R>>>16),R=x+(D^z^S)+b[2]+3299628645&4294967295,x=D+(R<<23&4294967295|R>>>9),R=S+(D^(x|~z))+b[0]+4096336452&4294967295,S=x+(R<<6&4294967295|R>>>26),R=z+(x^(S|~D))+b[7]+1126891415&4294967295,z=S+(R<<10&4294967295|R>>>22),R=D+(S^(z|~x))+b[14]+2878612391&4294967295,D=z+(R<<15&4294967295|R>>>17),R=x+(z^(D|~S))+b[5]+4237533241&4294967295,x=D+(R<<21&4294967295|R>>>11),R=S+(D^(x|~z))+b[12]+1700485571&4294967295,S=x+(R<<6&4294967295|R>>>26),R=z+(x^(S|~D))+b[3]+2399980690&4294967295,z=S+(R<<10&4294967295|R>>>22),R=D+(S^(z|~x))+b[10]+4293915773&4294967295,D=z+(R<<15&4294967295|R>>>17),R=x+(z^(D|~S))+b[1]+2240044497&4294967295,x=D+(R<<21&4294967295|R>>>11),R=S+(D^(x|~z))+b[8]+1873313359&4294967295,S=x+(R<<6&4294967295|R>>>26),R=z+(x^(S|~D))+b[15]+4264355552&4294967295,z=S+(R<<10&4294967295|R>>>22),R=D+(S^(z|~x))+b[6]+2734768916&4294967295,D=z+(R<<15&4294967295|R>>>17),R=x+(z^(D|~S))+b[13]+1309151649&4294967295,x=D+(R<<21&4294967295|R>>>11),R=S+(D^(x|~z))+b[4]+4149444226&4294967295,S=x+(R<<6&4294967295|R>>>26),R=z+(x^(S|~D))+b[11]+3174756917&4294967295,z=S+(R<<10&4294967295|R>>>22),R=D+(S^(z|~x))+b[2]+718787259&4294967295,D=z+(R<<15&4294967295|R>>>17),R=x+(z^(D|~S))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+z&4294967295}i.prototype.v=function(P,S){S===void 0&&(S=P.length);const x=S-this.blockSize,b=this.C;let D=this.h,z=0;for(;z<S;){if(D==0)for(;z<=x;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<S;)if(b[D++]=P.charCodeAt(z++),D==this.blockSize){s(this,b),D=0;break}}else for(;z<S;)if(b[D++]=P[z++],D==this.blockSize){s(this,b),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var x=P.length-8;x<P.length;++x)P[x]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,x=0;x<4;++x)for(let b=0;b<32;b+=8)P[S++]=this.g[x]>>>b&255;return P};function o(P,S){var x=h;return Object.prototype.hasOwnProperty.call(x,P)?x[P]:x[P]=S(P)}function l(P,S){this.h=S;const x=[];let b=!0;for(let D=P.length-1;D>=0;D--){const z=P[D]|0;b&&z==S||(x[D]=z,b=!1)}this.g=x}var h={};function d(P){return-128<=P&&P<128?o(P,function(S){return new l([S|0],S<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return v;if(P<0)return B(p(-P));const S=[];let x=1;for(let b=0;P>=x;b++)S[b]=P/x|0,x*=4294967296;return new l(S,0)}function _(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return B(_(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(S,8));let b=v;for(let z=0;z<P.length;z+=8){var D=Math.min(8,P.length-z);const R=parseInt(P.substring(z,z+D),S);D<8?(D=p(Math.pow(S,D)),b=b.j(D).add(p(R))):(b=b.j(x),b=b.add(p(R)))}return b}var v=d(0),T=d(1),A=d(16777216);t=l.prototype,t.m=function(){if(F(this))return-B(this).m();let P=0,S=1;for(let x=0;x<this.g.length;x++){const b=this.i(x);P+=(b>=0?b:4294967296+b)*S,S*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(V(this))return"0";if(F(this))return"-"+B(this).toString(P);const S=p(Math.pow(P,6));var x=this;let b="";for(;;){const D=W(x,S).g;x=k(x,D.j(S));let z=((x.g.length>0?x.g[0]:x.h)>>>0).toString(P);if(x=D,V(x))return z+b;for(;z.length<6;)z="0"+z;b=z+b}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function V(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function F(P){return P.h==-1}t.l=function(P){return P=k(this,P),F(P)?-1:V(P)?0:1};function B(P){const S=P.g.length,x=[];for(let b=0;b<S;b++)x[b]=~P.g[b];return new l(x,~P.h).add(T)}t.abs=function(){return F(this)?B(this):this},t.add=function(P){const S=Math.max(this.g.length,P.g.length),x=[];let b=0;for(let D=0;D<=S;D++){let z=b+(this.i(D)&65535)+(P.i(D)&65535),R=(z>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);b=R>>>16,z&=65535,R&=65535,x[D]=R<<16|z}return new l(x,x[x.length-1]&-2147483648?-1:0)};function k(P,S){return P.add(B(S))}t.j=function(P){if(V(this)||V(P))return v;if(F(this))return F(P)?B(this).j(B(P)):B(B(this).j(P));if(F(P))return B(this.j(B(P)));if(this.l(A)<0&&P.l(A)<0)return p(this.m()*P.m());const S=this.g.length+P.g.length,x=[];for(var b=0;b<2*S;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(let D=0;D<P.g.length;D++){const z=this.i(b)>>>16,R=this.i(b)&65535,Me=P.i(D)>>>16,on=P.i(D)&65535;x[2*b+2*D]+=R*on,C(x,2*b+2*D),x[2*b+2*D+1]+=z*on,C(x,2*b+2*D+1),x[2*b+2*D+1]+=R*Me,C(x,2*b+2*D+1),x[2*b+2*D+2]+=z*Me,C(x,2*b+2*D+2)}for(P=0;P<S;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=S;P<2*S;P++)x[P]=0;return new l(x,0)};function C(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function O(P,S){this.g=P,this.h=S}function W(P,S){if(V(S))throw Error("division by zero");if(V(P))return new O(v,v);if(F(P))return S=W(B(P),S),new O(B(S.g),B(S.h));if(F(S))return S=W(P,B(S)),new O(B(S.g),S.h);if(P.g.length>30){if(F(P)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var x=T,b=S;b.l(P)<=0;)x=X(x),b=X(b);var D=Z(x,1),z=Z(b,1);for(b=Z(b,2),x=Z(x,2);!V(b);){var R=z.add(b);R.l(P)<=0&&(D=D.add(x),z=R),b=Z(b,1),x=Z(x,1)}return S=k(P,D.j(S)),new O(D,S)}for(D=v;P.l(S)>=0;){for(x=Math.max(1,Math.floor(P.m()/S.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),z=p(x),R=z.j(S);F(R)||R.l(P)>0;)x-=b,z=p(x),R=z.j(S);V(z)&&(z=T),D=D.add(z),P=k(P,R)}return new O(D,P)}t.B=function(P){return W(this,P).h},t.and=function(P){const S=Math.max(this.g.length,P.g.length),x=[];for(let b=0;b<S;b++)x[b]=this.i(b)&P.i(b);return new l(x,this.h&P.h)},t.or=function(P){const S=Math.max(this.g.length,P.g.length),x=[];for(let b=0;b<S;b++)x[b]=this.i(b)|P.i(b);return new l(x,this.h|P.h)},t.xor=function(P){const S=Math.max(this.g.length,P.g.length),x=[];for(let b=0;b<S;b++)x[b]=this.i(b)^P.i(b);return new l(x,this.h^P.h)};function X(P){const S=P.g.length+1,x=[];for(let b=0;b<S;b++)x[b]=P.i(b)<<1|P.i(b-1)>>>31;return new l(x,P.h)}function Z(P,S){const x=S>>5;S%=32;const b=P.g.length-x,D=[];for(let z=0;z<b;z++)D[z]=S>0?P.i(z+x)>>>S|P.i(z+x+1)<<32-S:P.i(z+x);return new l(D,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,br=l}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,al,qE,Nc,Pp,GE,ZE,KE;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in y))break e;y=y[j]}u=u[u.length-1],I=y[u],m=m(I),m!=I&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var y=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&y.push([I,m[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){return p=d,p.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function v(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,j,H){for(var te=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)te[ye-2]=arguments[ye];return m.prototype[j].apply(I,te)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function A(u){const m=u.length;if(m>0){const y=Array(m);for(let I=0;I<m;I++)y[I]=u[I];return y}return[]}function V(u,m){for(let I=1;I<arguments.length;I++){const j=arguments[I];var y=typeof j;if(y=y!="object"?y:j?Array.isArray(j)?"array":y:"null",y=="array"||y=="object"&&typeof j.length=="number"){y=u.length||0;const H=j.length||0;u.length=y+H;for(let te=0;te<H;te++)u[y+te]=j[te]}else u.push(j)}}class F{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function B(u){l.setTimeout(()=>{throw u},0)}function k(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class C{constructor(){this.h=this.g=null}add(m,y){const I=O.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var O=new F(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Z=!1,P=new C,S=()=>{const u=Promise.resolve(void 0);X=()=>{u.then(x)}};function x(){for(var u;u=k();){try{u.h.call(u.g)}catch(y){B(y)}var m=O;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Z=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function Me(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(Me,D),Me.prototype.init=function(u,m){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var on="closure_listenable_"+(Math.random()*1e6|0),et=0;function Gt(u,m,y,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=j,this.key=++et,this.da=this.fa=!1}function M(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ee(u,m,y){for(const I in u)m.call(y,u[I],I,u)}function q(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function ie(u){const m={};for(const y in u)m[y]=u[y];return m}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(u,m){let y,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(y in I)u[y]=I[y];for(let H=0;H<ue.length;H++)y=ue[H],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,m,y,I,j){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const te=he(u,m,I,j);return te>-1?(m=u[te],y||(m.fa=!1)):(m=new Gt(m,this.src,H,!!I,j),m.fa=y,u.push(m)),m};function ge(u,m){const y=m.type;if(y in u.g){var I=u.g[y],j=Array.prototype.indexOf.call(I,m,void 0),H;(H=j>=0)&&Array.prototype.splice.call(I,j,1),H&&(M(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function he(u,m,y,I){for(let j=0;j<u.length;++j){const H=u[j];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==I)return j}return-1}var He="closure_lm_"+(Math.random()*1e6|0),mt={};function qi(u,m,y,I,j){if(Array.isArray(m)){for(let H=0;H<m.length;H++)qi(u,m[H],y,I,j);return null}return y=Qr(y),u&&u[on]?u.J(m,y,h(I)?!!I.capture:!1,j):ya(u,m,y,!1,I,j)}function ya(u,m,y,I,j,H){if(!m)throw Error("Invalid event type");const te=h(j)?!!j.capture:!!j;let ye=Fs(u);if(ye||(u[He]=ye=new de(u)),y=ye.add(m,y,I,te,H),y.proxy)return y;if(I=va(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)z||(j=te),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(yu(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function va(){function u(y){return m.call(u.src,u.listener,y)}const m=vu;return u}function Gi(u,m,y,I,j){if(Array.isArray(m))for(var H=0;H<m.length;H++)Gi(u,m[H],y,I,j);else I=h(I)?!!I.capture:!!I,y=Qr(y),u&&u[on]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],y=he(m,y,I,j),y>-1&&(M(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=he(m,y,I,j)),(y=u>-1?m[u]:null)&&Zr(y))}function Zr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[on])ge(m.i,u);else{var y=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(y,I,u.capture):m.detachEvent?m.detachEvent(yu(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=Fs(m))?(ge(y,u),y.h==0&&(y.src=null,m[He]=null)):M(u)}}}function yu(u){return u in mt?mt[u]:mt[u]="on"+u}function vu(u,m){if(u.da)u=!0;else{m=new Me(m,this);const y=u.listener,I=u.ha||u.src;u.fa&&Zr(u),u=y.call(I,m)}return u}function Fs(u){return u=u[He],u instanceof de?u:null}var Kr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qr(u){return typeof u=="function"?u:(u[Kr]||(u[Kr]=function(m){return u.handleEvent(m)}),u[Kr])}function gt(){b.call(this),this.i=new de(this),this.M=this,this.G=null}v(gt,b),gt.prototype[on]=!0,gt.prototype.removeEventListener=function(u,m,y,I){Gi(this,u,m,y,I)};function _t(u,m){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var j=m;m=new D(I,u),Ee(m,j)}j=!0;let H,te;if(y)for(te=y.length-1;te>=0;te--)H=m.g=y[te],j=Zi(H,I,!0,m)&&j;if(H=m.g=u,j=Zi(H,I,!0,m)&&j,j=Zi(H,I,!1,m)&&j,y)for(te=0;te<y.length;te++)H=m.g=y[te],j=Zi(H,I,!1,m)&&j}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let I=0;I<y.length;I++)M(y[I]);delete u.g[m],u.h--}}this.G=null},gt.prototype.J=function(u,m,y,I){return this.i.add(String(u),m,!1,y,I)},gt.prototype.K=function(u,m,y,I){return this.i.add(String(u),m,!0,y,I)};function Zi(u,m,y,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let H=0;H<m.length;++H){const te=m[H];if(te&&!te.da&&te.capture==y){const ye=te.listener,Le=te.ha||te.src;te.fa&&ge(u.i,te),j=ye.call(Le,I)!==!1&&j}}return j&&!I.defaultPrevented}function wu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function wa(u){u.g=wu(()=>{u.g=null,u.i&&(u.i=!1,wa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cd extends b{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(u){b.call(this),this.h=u,this.g={}}v(Yr,b);var zs=[];function Ea(u){ee(u.g,function(m,y){this.g.hasOwnProperty(y)&&Zr(m)},u),u.g={}}Yr.prototype.N=function(){Yr.Z.N.call(this),Ea(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=l.JSON.stringify,Pd=l.JSON.parse,Eu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Ta(){}function Tu(){}var Ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xr(){D.call(this,"d")}v(Xr,D);function Bs(){D.call(this,"c")}v(Bs,D);var mi={},Qi=null;function Us(){return Qi=Qi||new gt}mi.Ia="serverreachability";function xu(u){D.call(this,mi.Ia,u)}v(xu,D);function Yi(u){const m=Us();_t(m,new xu(m))}mi.STAT_EVENT="statevent";function xa(u,m){D.call(this,mi.STAT_EVENT,u),this.stat=m}v(xa,D);function yt(u){const m=Us();_t(m,new xa(m,u))}mi.Ja="timingevent";function Iu(u,m){D.call(this,mi.Ja,u),this.size=m}v(Iu,D);function Jr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function Ad(u,m,y,I,j,H){u.info(function(){if(u.g)if(H){var te="",ye=H.split("&");for(let Oe=0;Oe<ye.length;Oe++){var Le=ye[Oe].split("=");if(Le.length>1){const tt=Le[0];Le=Le[1];const wn=tt.split("_");te=wn.length>=2&&wn[1]=="type"?te+(tt+"="+Le+"&"):te+(tt+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+y+`
`+te})}function kd(u,m,y,I,j,H,te){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+y+`
`+H+" "+te})}function Xi(u,m,y,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Rd(u,y)+(I?" "+I:"")})}function Ia(u,m){u.info(function(){return"TIMEOUT: "+m})}es.prototype.info=function(){};function Rd(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var y=H[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let te=1;te<I.length;te++)I[te]=""}}}}return js(H)}catch{return m}}var Hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Su={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cu;function Zt(){}v(Zt,Ta),Zt.prototype.g=function(){return new XMLHttpRequest},Cu=new Zt;function le(u){return encodeURIComponent(String(u))}function Pu(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Rn(u,m,y,I){this.j=u,this.i=m,this.l=y,this.S=I||1,this.V=new Yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sa}function Sa(){this.i=null,this.g="",this.h=!1}var Ca={},ts={};function Ws(u,m,y){u.M=1,u.A=ze(jt(m)),u.u=y,u.R=!0,gi(u,null)}function gi(u,m){u.F=Date.now(),$s(u),u.B=jt(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),Qs(y.i,"t",I),u.C=0,y=u.j.L,u.h=new Sa,u.g=ja(u.j,y?m:null,!u.u),u.P>0&&(u.O=new Cd(p(u.Y,u,u.g),u.P)),m=u.V,y=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(zs[0]=j.toString()),j=zs);for(let H=0;H<j.length;H++){const te=qi(y,j[H],I||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?ie(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Yi(),Ad(u.i,u.v,u.B,u.l,u.S,u.u)}Rn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qn(u)==3?m.j():this.Y(u)},Rn.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Qn(this.g),Le=this.g.ya(),Oe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Na(this.g)))){this.K||ye!=4||Le==7||(Le==8||Oe<=0?Yi(3):Yi(2)),qs(this);var m=this.g.ca();this.X=m;var y=Au(this);if(this.o=m==200,kd(this.i,this.v,this.B,this.l,this.S,ye,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var H=I;break t}}H=null}if(u=H)Xi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pa(this,u);else{this.o=!1,this.m=3,yt(12),gn(this),ns(this);break e}}if(this.R){u=!0;let tt;for(;!this.K&&this.C<y.length;)if(tt=bd(this,y),tt==ts){ye==4&&(this.m=4,yt(14),u=!1),Xi(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Ca){this.m=4,yt(15),Xi(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Xi(this.i,this.l,tt,null),Pa(this,tt);if(ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||y.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)Xi(this.i,this.l,y,"[Invalid Chunked Response]"),gn(this),ns(this);else if(y.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Fa(te),te.P=!0,yt(11))}}else Xi(this.i,this.l,y,null),Pa(this,y);ye==4&&gn(this),this.o&&!this.K&&(ye==4?ln(this.j,this):(this.o=!1,$s(this)))}else Oa(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),gn(this),ns(this)}}}catch{}finally{}};function Au(u){if(!ku(u))return u.g.la();const m=Na(u.g);if(m==="")return"";let y="";const I=m.length,j=Qn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gn(u),ns(u),"";u.h.i=new l.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,y+=u.h.i.decode(m[H],{stream:!(j&&H==I-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function ku(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bd(u,m){var y=u.C,I=m.indexOf(`
`,y);return I==-1?ts:(y=Number(m.substring(y,I)),isNaN(y)?Ca:(I+=1,I+y>m.length?ts:(m=m.slice(I,I+y),u.C=I+y,m)))}Rn.prototype.cancel=function(){this.K=!0,gn(this)};function $s(u){u.T=Date.now()+u.H,Ru(u,u.H)}function Ru(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(p(u.aa,u),m)}function qs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Rn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ia(this.i,this.B),this.M!=2&&(Yi(),yt(17)),gn(this),this.m=2,ns(this)):Ru(this,this.T-u)};function ns(u){u.j.I==0||u.K||ln(u.j,u)}function gn(u){qs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ea(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Pa(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||is(y.h,u))){if(!u.L&&is(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)to(y),Js(y);else break e;Va(y),yt(18)}}else y.xa=j[1],0<y.xa-y.K&&j[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Jr(p(y.Va,y),6e3));Nu(y.h)<=1&&y.ta&&(y.ta=void 0)}else Xn(y,11)}else if((u.L||y.g==u)&&to(y),!R(m))for(j=y.Ba.g.parse(m),m=0;m<j.length;m++){let Oe=j[m];const tt=Oe[0];if(!(tt<=y.K))if(y.K=tt,Oe=Oe[1],y.I==2)if(Oe[0]=="c"){y.M=Oe[1],y.ba=Oe[2];const wn=Oe[3];wn!=null&&(y.ka=wn,y.j.info("VER="+y.ka));const Nn=Oe[4];Nn!=null&&(y.za=Nn,y.j.info("SVER="+y.za));const En=Oe[5];En!=null&&typeof En=="number"&&En>0&&(I=1.5*En,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const Jn=u.g;if(Jn){const ro=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var H=I.h;H.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(_i(H,H.h),H.h=null))}if(I.G){const so=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(I.wa=so,oe(I.J,I.G,so))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var te=u;if(I.na=za(I,I.L?I.ba:null,I.W),te.L){Aa(I.h,te);var ye=te,Le=I.O;Le&&(ye.H=Le),ye.D&&(qs(ye),$s(ye)),I.g=te}else Ma(I);y.i.length>0&&Yn(y)}else Oe[0]!="stop"&&Oe[0]!="close"||Xn(y,7);else y.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Xn(y,7):Te(y):Oe[0]!="noop"&&y.l&&y.l.qa(Oe),y.A=0)}}Yi(4)}catch{}}var Ld=class{constructor(u,m){this.g=u,this.map=m}};function bu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nu(u){return u.h?1:u.g?u.g.size:0}function is(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function _i(u,m){u.g?u.g.add(m):u.h=m}function Aa(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bu.prototype.cancel=function(){if(this.i=ka(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ka(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return A(u.i)}var Ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ae(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let j,H=null;I>=0?(j=u[y].substring(0,I),H=u[y].substring(I+1)):j=u[y],m(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function be(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof be?(this.l=u.l,_n(this,u.j),this.o=u.o,this.g=u.g,yn(this,u.u),this.h=u.h,rs(this,ss(u.i)),this.m=u.m):u&&(m=String(u).match(Ji))?(this.l=!1,_n(this,m[1]||"",!0),this.o=yi(m[2]||""),this.g=yi(m[3]||"",!0),yn(this,m[4]),this.h=yi(m[5]||"",!0),rs(this,m[6]||"",!0),this.m=yi(m[7]||"")):(this.l=!1,this.i=new bn(null,this.l))}be.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Gn(m,Ou,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Gn(m,Ou,!0),"@"),u.push(le(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Gn(y,y.charAt(0)=="/"?vi:Gs,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Gn(y,wi)),u.join("")},be.prototype.resolve=function(u){const m=jt(this);let y=!!u.j;y?_n(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var I=u.h;if(y)yn(m,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=m.h.lastIndexOf("/");j!=-1&&(I=m.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const H=[];for(let te=0;te<j.length;){const ye=j[te++];ye=="."?I&&te==j.length&&H.push(""):ye==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&te==j.length&&H.push("")):(H.push(ye),I=!0)}I=H.join("/")}else I=j}return y?m.h=I:y=u.i.toString()!=="",y?rs(m,ss(u.i)):y=!!u.m,y&&(m.m=u.m),m};function jt(u){return new be(u)}function _n(u,m,y){u.j=y?yi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function yn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function rs(u,m,y){m instanceof bn?(u.i=m,Ra(u.i,u.l)):(y||(m=Gn(m,Xe)),u.i=new bn(m,u.l))}function oe(u,m,y){u.i.set(m,y)}function ze(u){return oe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function yi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Kt),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ou=/[#\/\?@]/g,Gs=/[#\?:]/g,vi=/[#\?]/g,Xe=/[#\?@]/g,wi=/#/g;function bn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Ae(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=bn.prototype,t.add=function(u,m){an(this),this.i=null,u=Zn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Zs(u,m){an(u),m=Zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function er(u,m){return an(u),m=Zn(u,m),u.g.has(m)}t.forEach=function(u,m){an(this),this.g.forEach(function(y,I){y.forEach(function(j){u.call(m,j,I,this)},this)},this)};function Ks(u,m){an(u);let y=[];if(typeof m=="string")er(u,m)&&(y=y.concat(u.g.get(Zn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return an(this),this.i=null,u=Zn(this,u),er(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Ks(this,u),u.length>0?String(u[0]):m):m};function Qs(u,m,y){Zs(u,m),y.length>0&&(u.i=null,u.g.set(Zn(u,m),A(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var y=m[I];const j=le(y);y=Ks(this,y);for(let H=0;H<y.length;H++){let te=j;y[H]!==""&&(te+="="+le(y[H])),u.push(te)}}return this.i=u.join("&")};function ss(u){const m=new bn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ra(u,m){m&&!u.j&&(an(u),u.i=null,u.g.forEach(function(y,I){const j=I.toLowerCase();I!=j&&(Zs(this,I),Qs(this,j,y))},u)),u.j=m}function Ys(u,m){const y=new es;if(l.Image){const I=new Image;I.onload=_(vn,y,"TestLoadImage: loaded",!0,m,I),I.onerror=_(vn,y,"TestLoadImage: error",!1,m,I),I.onabort=_(vn,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=_(vn,y,"TestLoadImage: timeout",!1,m,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Du(u,m){const y=new es,I=new AbortController,j=setTimeout(()=>{I.abort(),vn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(j),H.ok?vn(y,"TestPingServer: ok",!0,m):vn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),vn(y,"TestPingServer: error",!1,m)})}function vn(u,m,y,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(y)}catch{}}function Nd(){this.g=new Eu}function _e(u){this.i=u.Sb||null,this.h=u.ab||!1}v(_e,Ta),_e.prototype.g=function(){return new Bt(this.i,this.h)};function Bt(u,m){gt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Bt,gt),t=Bt.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ei(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?tr(this):Ei(this),this.readyState==3&&Ve(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,tr(this))},t.Na=function(u){this.g&&(this.response=u,tr(this))},t.ga=function(){this.g&&tr(this)};function tr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ei(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ei(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xs(u){let m="";return ee(u,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function os(u,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Xs(y),typeof u=="string"?y!=null&&le(y):oe(u,m,y))}function Ne(u){gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ne,gt);var ba=/^https?$/i,as=["POST","PUT"];t=Ne.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cu.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){st(this,H);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)y.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())y.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),j=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(as,m,void 0)>=0)||I||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of y)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){st(this,H)}};function st(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Kn(u),ls(u)}function Kn(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,_t(this,"complete"),_t(this,"abort"),ls(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},t.Xa=function(){La(this)};function La(u){if(u.h&&typeof o<"u"){if(u.v&&Qn(u)==4)setTimeout(u.Ca.bind(u),0);else if(_t(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=H===0){let te=String(u.D).match(Ji)[1]||null;!te&&l.self&&l.self.location&&(te=l.self.location.protocol.slice(0,-1)),I=!ba.test(te?te.toLowerCase():"")}y=I}if(y)_t(u,"complete"),_t(u,"success");else{u.o=6;try{var j=Qn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Kn(u)}}finally{ls(u)}}}}function ls(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||_t(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pd(m)}};function Na(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oa(u){const m={};u=(u.g&&Qn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(R(u[I]))continue;var y=Pu(u[I]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[j]||[];m[j]=H,H.push(y)}q(m,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Da(u){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=us("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=us("baseRetryDelayMs",5e3,u),this.Za=us("retryDelaySeedMs",1e4,u),this.Ta=us("forwardChannelMaxRetries",2,u),this.va=us("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bu(u&&u.concurrentRequestLimit),this.Ba=new Nd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Da.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,I){yt(0),this.W=u,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=za(this,null,this.W),Yn(this)};function Te(u){if(Qt(u),u.I==3){var m=u.V++,y=jt(u.J);if(oe(y,"SID",u.M),oe(y,"RID",m),oe(y,"TYPE","terminate"),Ti(u,y),m=new Rn(u,u.j,m),m.M=2,m.A=ze(jt(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.A,y=!0),y||(m.g=ja(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$s(m)}Ln(u)}function Js(u){u.g&&(Fa(u),u.g.cancel(),u.g=null)}function Qt(u){Js(u),u.v&&(l.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function Yn(u){if(!Lu(u.h)&&!u.m){u.m=!0;var m=u.Ea;X||S(),Z||(X(),Z=!0),P.add(m,u),u.D=0}}function Mu(u,m){return Nu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(p(u.Ea,u,m),zu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Rn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=ie(H),Ee(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Fu(this,j,m),y=jt(this.J),oe(y,"RID",u),oe(y,"CVER",22),this.G&&oe(y,"X-HTTP-Session-Id",this.G),Ti(this,y),H&&(this.R?m="headers="+le(Xs(H))+"&"+m:this.u&&os(y,this.u,H)),_i(this.h,j),this.Ra&&oe(y,"TYPE","init"),this.S?(oe(y,"$req",m),oe(y,"SID","null"),j.U=!0,Ws(j,y,null)):Ws(j,y,m),this.I=2}}else this.I==3&&(u?Vu(this,u):this.i.length==0||Lu(this.h)||Vu(this))};function Vu(u,m){var y;m?y=m.l:y=u.V++;const I=jt(u.J);oe(I,"SID",u.M),oe(I,"RID",y),oe(I,"AID",u.K),Ti(u,I),u.u&&u.o&&os(I,u.u,u.o),y=new Rn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Fu(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),_i(u.h,y),Ws(y,I,m)}function Ti(u,m){u.H&&ee(u.H,function(y,I){oe(m,I,y)}),u.l&&ee({},function(y,I){oe(m,I,y)})}function Fu(u,m,y){y=Math.min(u.i.length,y);const I=u.l?p(u.l.Ka,u.l,u):null;e:{var j=u.i;let ye=-1;for(;;){const Le=["count="+y];ye==-1?y>0?(ye=j[0].g,Le.push("ofs="+ye)):ye=0:Le.push("ofs="+ye);let Oe=!0;for(let tt=0;tt<y;tt++){var H=j[tt].g;const wn=j[tt].map;if(H-=ye,H<0)ye=Math.max(0,j[tt].g-100),Oe=!1;else try{H="req"+H+"_"||"";try{var te=wn instanceof Map?wn:Object.entries(wn);for(const[Nn,En]of te){let Jn=En;h(En)&&(Jn=js(En)),Le.push(H+Nn+"="+encodeURIComponent(Jn))}}catch(Nn){throw Le.push(H+"type="+encodeURIComponent("_badmap")),Nn}}catch{I&&I(wn)}}if(Oe){te=Le.join("&");break e}}te=void 0}return u=u.i.splice(0,y),m.G=u,te}function Ma(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;X||S(),Z||(X(),Z=!0),P.add(m,u),u.A=0}}function Va(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(p(u.Da,u),zu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Js(this),eo(this))};function Fa(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function eo(u){u.g=new Rn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=jt(u.na);oe(m,"RID","rpc"),oe(m,"SID",u.M),oe(m,"AID",u.K),oe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&oe(m,"TO",u.ia),oe(m,"TYPE","xmlhttp"),Ti(u,m),u.u&&u.o&&os(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=ze(jt(m)),y.u=null,y.R=!0,gi(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Js(this),Va(this),yt(19))};function to(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function ln(u,m){var y=null;if(u.g==m){to(u),Fa(u),u.g=null;var I=2}else if(is(u.h,m))y=m.G,Aa(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;I=Us(),_t(I,new Iu(I,y)),Yn(u)}else Ma(u);else if(j=m.m,j==3||j==0&&m.X>0||!(I==1&&Mu(u,m)||I==2&&Va(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),j){case 1:Xn(u,5);break;case 4:Xn(u,10);break;case 3:Xn(u,6);break;default:Xn(u,2)}}}function zu(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function Xn(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.bb,u),I=u.Ua;const j=!I;I=new be(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_n(I,"https"),ze(I),j?Ys(I.toString(),y):Du(I.toString(),y)}else yt(2);u.I=0,u.l&&u.l.pa(m),Ln(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Ln(u){if(u.I=0,u.ja=[],u.l){const m=ka(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ja,m),V(u.ja,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.oa()}}function za(u,m,y){var I=y instanceof be?jt(y):new be(y);if(I.g!="")m&&(I.g=m+"."+I.g),yn(I,I.u);else{var j=l.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const H=new be(null);I&&_n(H,I),m&&(H.g=m),j&&yn(H,j),y&&(H.h=y),I=H}return y=u.G,m=u.wa,y&&m&&oe(I,y,m),oe(I,"VER",u.ka),Ti(u,I),I}function ja(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ne(new _e({ab:y})):new Ne(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function no(){}t=no.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function io(){}io.prototype.g=function(u,m){return new bt(u,m)};function bt(u,m){gt.call(this),this.g=new Da(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new nr(this)}v(bt,gt),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Te(this.g)},bt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=js(u),u=y);m.i.push(new Ld(m.Ya++,u)),m.I==3&&Yn(m)},bt.prototype.N=function(){this.g.l=null,delete this.j,Te(this.g),delete this.g,bt.Z.N.call(this)};function Ba(u){Xr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Ba,Xr);function ju(){Bs.call(this),this.status=1}v(ju,Bs);function nr(u){this.g=u}v(nr,no),nr.prototype.ra=function(){_t(this.g,"a")},nr.prototype.qa=function(u){_t(this.g,new Ba(u))},nr.prototype.pa=function(u){_t(this.g,new ju)},nr.prototype.oa=function(){_t(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,KE=function(){return new io},ZE=function(){return Us()},GE=mi,Pp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Nc=Hs,Su.COMPLETE="complete",qE=Su,Tu.EventType=Ki,Ki.OPEN="a",Ki.CLOSE="b",Ki.ERROR="c",Ki.MESSAGE="d",gt.prototype.listen=gt.prototype.J,al=Tu,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,$E=Ne}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const Fy="@firebase/firestore",zy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new qm("@firebase/firestore");function po(){return As.logLevel}function se(t,...e){if(As.logLevel<=Se.DEBUG){const n=e.map(Km);As.debug(`Firestore (${ua}): ${t}`,...n)}}function Bi(t,...e){if(As.logLevel<=Se.ERROR){const n=e.map(Km);As.error(`Firestore (${ua}): ${t}`,...n)}}function Qo(t,...e){if(As.logLevel<=Se.WARN){const n=e.map(Km);As.warn(`Firestore (${ua}): ${t}`,...n)}}function Km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,QE(t,i,n)}function QE(t,e,n){let i=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bi(i),new Error(i)}function De(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||QE(e,s,i)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class QA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Di,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Di)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(De(typeof i.accessToken=="string",31837,{l:i}),new YE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class XA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ek{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tk(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ce(t,e){return t<e?-1:t>e?1:0}function Ap(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return yf(s)===yf(o)?Ce(s,o):yf(s)?1:-1}return Ce(t.length,e.length)}const nk=55296,ik=57343;function yf(t){const e=t.charCodeAt(0);return e>=nk&&e<=ik}function Yo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="__name__";class ii{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=ii.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ce(e.length,n.length)}static compareSegments(e,n){const i=ii.isNumericId(e),s=ii.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ii.extractNumericId(e).compare(ii.extractNumericId(n)):Ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class Be extends ii{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends ii{construct(e,n,i){return new Pt(e,n,i)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===By}static keyField(){return new Pt([By])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sk(t,e,n,i){if(e===!0&&i===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uy(t){if(!ce.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hy(t){if(ce.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nd(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function uu(t,e){if(!JE(t))throw new ne(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ne(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=-62135596800,$y=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*$y);return new $e(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wy)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$y}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:ct("string",$e._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new $e(0,0))}static max(){return new ve(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function ok(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(i===1e9?new $e(n+1,0):new $e(n,i));return new Mr(s,ce.empty(),e)}function ak(t){return new Mr(t.readTime,t.key,Gl)}class Mr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Mr(ve.min(),ce.empty(),Gl)}static max(){return new Mr(ve.max(),ce.empty(),Gl)}}function lk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ck{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==uk)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(s=>s?Q.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&i(l)},_=>s(_))}})}static doWhile(e,n){return new Q((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function hk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=-1;function rd(t){return t==null}function yh(t){return t===0&&1/t==-1/0}function dk(t){return typeof t=="number"&&Number.isInteger(t)&&!yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="";function fk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qy(e)),e=pk(t.get(n),e);return qy(e)}function pk(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case eT:n+="";break;default:n+=o}}return n}function qy(t){return t+eT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=s??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Ct(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zy(this.data.getIterator())}getIteratorFrom(e){return new Zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class Zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new pt(Pt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nT("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const mk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=mk.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="server_timestamp",rT="__type__",sT="__previous_value__",oT="__local_write_time__";function Xm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rT])==null?void 0:i.stringValue)===iT}function sd(t){const e=t.mapValue.fields[sT];return Xm(e)?sd(e):e}function Zl(t){const e=Vr(t.mapValue.fields[oT].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,i,s,o,l,h,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const vh="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||vh}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__type__",_k="__max__",_c={mapValue:{}},lT="__vector__",wh="value";function zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xm(t)?4:vk(t)?9007199254740991:yk(t)?10:11:me(28295,{value:t})}function pi(t,e){if(t===e)return!0;const n=zr(t);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Vr(s.timestampValue),h=Vr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Fr(s.bytesValue).isEqual(Fr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return nt(s.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nt(s.integerValue)===nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=nt(s.doubleValue),h=nt(o.doubleValue);return l===h?yh(l)===yh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Gy(l)!==Gy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!pi(l[d],h[d])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Ql(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function Xo(t,e){if(t===e)return 0;const n=zr(t),i=zr(e);if(n!==i)return Ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Ky(t.timestampValue,e.timestampValue);case 4:return Ky(Zl(t),Zl(e));case 5:return Ap(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Fr(o),d=Fr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Ce(h[p],d[p]);if(_!==0)return _}return Ce(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ce(nt(o.latitude),nt(l.latitude));return h!==0?h:Ce(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var T,A,V,F;const h=o.fields||{},d=l.fields||{},p=(T=h[wh])==null?void 0:T.arrayValue,_=(A=d[wh])==null?void 0:A.arrayValue,v=Ce(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return v!==0?v:Qy(p,_)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===_c.mapValue&&l===_c.mapValue)return 0;if(o===_c.mapValue)return 1;if(l===_c.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=Ap(d[v],_[v]);if(T!==0)return T;const A=Xo(h[d[v]],p[_[v]]);if(A!==0)return A}return Ce(d.length,_.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function Ky(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Vr(t),i=Vr(e),s=Ce(n.seconds,i.seconds);return s!==0?s:Ce(n.nanos,i.nanos)}function Qy(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Xo(n[s],i[s]);if(o)return o}return Ce(n.length,i.length)}function Jo(t){return kp(t)}function kp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Vr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=kp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${kp(n.fields[l])}`;return s+"}"}(t.mapValue):me(61005,{value:t})}function Oc(t){switch(zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sd(t);return e?16+Oc(e):16;case 5:return 2*t.stringValue.length;case 6:return Fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Oc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return $r(i.fields,(o,l)=>{s+=o.length+Oc(l)}),s}(t.mapValue);default:throw me(13486,{value:t})}}function Yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rp(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function Xy(t){return!!t&&"nullValue"in t}function Jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dc(t){return!!t&&"mapValue"in t}function yk(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aT])==null?void 0:i.stringValue)===lT}function El(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $r(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=El(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=El(t.arrayValue.values[n]);return e}return{...t}}function vk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_k}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(n)}setAll(e){let n=Pt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=El(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){$r(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new en(El(this.value))}}function uT(t){const e=[];return $r(t.fields,(n,i)=>{const s=new Pt([n]);if(Dc(i)){const o=uT(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Vt(e,0,ve.min(),ve.min(),ve.min(),en.empty(),0)}static newFoundDocument(e,n,i,s){return new Vt(e,1,n,ve.min(),i,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,ve.min(),ve.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,ve.min(),ve.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.position=e,this.inclusive=n}}function ev(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(l.referenceValue),n.key):i=Xo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function wk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class ut extends cT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Tk(e,n,i):n==="array-contains"?new Sk(e,i):n==="in"?new Ck(e,i):n==="not-in"?new Pk(e,i):n==="array-contains-any"?new Ak(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new xk(e,i):new Ik(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $n(e,n)}matches(e){return hT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hT(t){return t.op==="and"}function dT(t){return Ek(t)&&hT(t)}function Ek(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function bp(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(dT(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function fT(t,e){return t instanceof ut?function(i,s){return s instanceof ut&&i.op===s.op&&i.field.isEqual(s.field)&&pi(i.value,s.value)}(t,e):t instanceof $n?function(i,s){return s instanceof $n&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&fT(l,s.filters[h]),!0):!1}(t,e):void me(19439)}function pT(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(pT).join(" ,")+"}"}(t):"Filter"}class Tk extends ut{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class xk extends ut{constructor(e,n){super(e,"in",n),this.keys=mT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ik extends ut{constructor(e,n){super(e,"not-in",n),this.keys=mT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class Sk extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&Ql(n.arrayValue,this.value)}}class Ck extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class Pk extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class Ak extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function nv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new kk(t,e,n,i,s,o,l)}function eg(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jo(i)).join(",")),e.Te=n}return e.Te}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tv(t.startAt,e.startAt)&&tv(t.endAt,e.endAt)}function Lp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rk(t,e,n,i,s,o,l,h){return new da(t,e,n,i,s,o,l,h)}function ng(t){return new da(t)}function iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gT(t){return t.collectionGroup!==null}function Tl(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new pt(Pt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yl(o,i))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Yl(Pt.keyField(),i))}return e.Ie}function ai(t){const e=we(t);return e.Ee||(e.Ee=bk(e,Tl(t))),e.Ee}function bk(t,e){if(t.limitType==="F")return nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Yl(s.field,o)});const n=t.endAt?new Eh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Eh(t.startAt.position,t.startAt.inclusive):null;return nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Np(t,e){const n=t.filters.concat([e]);return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Op(t,e,n){return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return tg(ai(t),ai(e))&&t.limitType===e.limitType}function _T(t){return`${eg(ai(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>pT(s)).join(", ")}]`),rd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Jo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Jo(s)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Tl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=ev(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Tl(i),s)||i.endAt&&!function(l,h,d){const p=ev(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Tl(i),s))}(t,e)}function Lk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yT(t){return(e,n)=>{let i=!1;for(const s of Tl(t)){const o=Nk(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Nk(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Xo(d,p):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return tT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new Ye(ce.comparator);function Ui(){return Ok}const vT=new Ye(ce.comparator);function ll(...t){let e=vT;for(const n of t)e=e.insert(n.key,n);return e}function wT(t){let e=vT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function gs(){return xl()}function ET(){return xl()}function xl(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const Dk=new Ye(ce.comparator),Mk=new pt(ce.comparator);function Pe(...t){let e=Mk;for(const n of t)e=e.add(n);return e}const Vk=new pt(Ce);function Fk(){return Vk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function zk(t,e){return dk(e)?TT(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function jk(t,e,n){return t instanceof Th?function(s,o){const l={fields:{[rT]:{stringValue:iT},[oT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Xm(o)&&(o=sd(o)),o&&(l.fields[sT]=o),{mapValue:l}}(n,e):t instanceof Xl?IT(t,e):t instanceof Jl?ST(t,e):function(s,o){const l=xT(s,o),h=rv(l)+rv(s.Ae);return Rp(l)&&Rp(s.Ae)?TT(h):ig(s.serializer,h)}(t,e)}function Bk(t,e,n){return t instanceof Xl?IT(t,e):t instanceof Jl?ST(t,e):n}function xT(t,e){return t instanceof xh?function(i){return Rp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Th extends ld{}class Xl extends ld{constructor(e){super(),this.elements=e}}function IT(t,e){const n=CT(e);for(const i of t.elements)n.some(s=>pi(s,i))||n.push(i);return{arrayValue:{values:n}}}class Jl extends ld{constructor(e){super(),this.elements=e}}function ST(t,e){let n=CT(e);for(const i of t.elements)n=n.filter(s=>!pi(s,i));return{arrayValue:{values:n}}}class xh extends ld{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rv(t){return nt(t.integerValue||t.doubleValue)}function CT(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Uk(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Xl&&s instanceof Xl||i instanceof Jl&&s instanceof Jl?Yo(i.elements,s.elements,pi):i instanceof xh&&s instanceof xh?pi(i.Ae,s.Ae):i instanceof Th&&s instanceof Th}(t.transform,e.transform)}class Hk{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function PT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rg(t.key,Hn.none()):new cu(t.key,t.data,Hn.none());{const n=t.data,i=en.empty();let s=new pt(Pt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new qr(t.key,i,new hn(s.toArray()),Hn.none())}}function Wk(t,e,n){t instanceof cu?function(s,o,l){const h=s.value.clone(),d=ov(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(s,o,l){if(!Mc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ov(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(AT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,i){return t instanceof cu?function(o,l,h,d){if(!Mc(o.precondition,l))return h;const p=o.value.clone(),_=av(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof qr?function(o,l,h,d){if(!Mc(o.precondition,l))return h;const p=av(o.fieldTransforms,d,l),_=l.data;return _.setAll(AT(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,l,h){return Mc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function $k(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=xT(i.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(i.field,o))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Yo(i,s,(o,l)=>Uk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cu extends ud{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends ud{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ov(t,e,n){const i=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,Bk(l,h,n[s]))}return i}function av(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,jk(o,l,e))}return i}class rg extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qk extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Wk(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ET();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=PT(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,i)=>sv(n,i))&&Yo(this.baseMutations,e.baseMutations,(n,i)=>sv(n,i))}}class sg{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){De(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return Dk}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new sg(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,ke;function Qk(t){switch(t){case K.OK:return me(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function kT(t){if(t===void 0)return Bi("GRPC error has no .code"),K.UNKNOWN;switch(t){case at.OK:return K.OK;case at.CANCELLED:return K.CANCELLED;case at.UNKNOWN:return K.UNKNOWN;case at.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case at.INTERNAL:return K.INTERNAL;case at.UNAVAILABLE:return K.UNAVAILABLE;case at.UNAUTHENTICATED:return K.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case at.NOT_FOUND:return K.NOT_FOUND;case at.ALREADY_EXISTS:return K.ALREADY_EXISTS;case at.PERMISSION_DENIED:return K.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case at.ABORTED:return K.ABORTED;case at.OUT_OF_RANGE:return K.OUT_OF_RANGE;case at.UNIMPLEMENTED:return K.UNIMPLEMENTED;case at.DATA_LOSS:return K.DATA_LOSS;default:return me(39323,{code:t})}}(ke=at||(at={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new br([4294967295,4294967295],0);function lv(t){const e=Yk().encode(t),n=new WE;return n.update(e),new Uint8Array(n.digest())}function uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new br([n,i],0),new br([s,o],0)]}class og{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ul(`Invalid padding: ${n}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ul(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=br.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(br.fromNumber(i)));return s.compare(Xk)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lv(e),[i,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new og(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=lv(e),[i,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cd(ve.min(),s,new Ye(Ce),Ui(),Pe())}}class hu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new hu(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class RT{constructor(e,n){this.targetId=e,this.Ce=n}}class bT{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class cv{constructor(){this.ve=0,this.Fe=hv(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),i=Pe();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:me(38017,{changeType:o})}}),new hu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=hv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Jk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=yc(),this.He=yc(),this.Ye=new Ye(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Lp(o))if(i===0){const l=new ce(o.path);this.et(n,l,Vt.newNoDocument(l,ve.min()))}else De(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Fr(i).toUint8Array()}catch(d){if(d instanceof nT)return Qo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new og(l,s,o)}catch(d){return Qo(d instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Lp(h.target)){const d=new ce(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Vt.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Pe();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new cd(e,n,this.Ye,this.je,i);return this.je=Ui(),this.Je=yc(),this.He=yc(),this.Ye=new Ye(Ce),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yc(){return new Ye(ce.comparator)}function hv(){return new Ye(ce.comparator)}const eR={asc:"ASCENDING",desc:"DESCENDING"},tR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nR={and:"AND",or:"OR"};class iR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function Ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rR(t,e){return Ih(t,e.toTimestamp())}function li(t){return De(!!t,49232),ve.fromTimestamp(function(n){const i=Vr(n);return new $e(i.seconds,i.nanos)}(t))}function ag(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NT(t){const e=Be.fromString(t);return De(FT(e),10190,{key:e.toString()}),e}function Vp(t,e){return ag(t.databaseId,e.path)}function vf(t,e){const n=NT(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(DT(n))}function OT(t,e){return ag(t.databaseId,e)}function sR(t){const e=NT(t);return e.length===4?Be.emptyPath():DT(e)}function Fp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DT(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dv(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function oR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(De(_===void 0||typeof _=="string",58123),Rt.fromBase64String(_||"")):(De(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Rt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?K.UNKNOWN:kT(p.code);return new ne(_,p.message||"")}(l);n=new bT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=vf(t,i.document.name),o=li(i.document.updateTime),l=i.document.createTime?li(i.document.createTime):ve.min(),h=new en({mapValue:{fields:i.document.fields}}),d=Vt.newFoundDocument(s,o,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Vc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=vf(t,i.document),o=i.readTime?li(i.readTime):ve.min(),l=Vt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Vc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=vf(t,i.document),o=i.removedTargetIds||[];n=new Vc([],o,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new Kk(s,o),h=i.targetId;n=new RT(h,l)}}return n}function aR(t,e){let n;if(e instanceof cu)n={update:dv(t,e.key,e.value)};else if(e instanceof rg)n={delete:Vp(t,e.key)};else if(e instanceof qr)n={update:dv(t,e.key,e.data),updateMask:gR(e.fieldMask)};else{if(!(e instanceof qk))return me(16599,{Vt:e.type});n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Th)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof xh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw me(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:rR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function lR(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?li(s.updateTime):li(o);return l.isEqual(ve.min())&&(l=li(o)),new Hk(l,s.transformResults||[])}(n,e))):[]}function uR(t,e){return{documents:[OT(t,e.path)]}}function cR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OT(t,s);const o=function(p){if(p.length!==0)return VT($n.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:go(T.field),direction:fR(T.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Dp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function hR(t){let e=sR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){De(i===1,65062);const _=n.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const T=MT(v);return T instanceof $n&&dT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(T=>function(V){return new Yl(_o(V.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,rd(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(v){const T=!!v.before,A=v.values||[];return new Eh(A,T)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const T=!v.before,A=v.values||[];return new Eh(A,T)}(n.endAt)),Rk(e,s,l,o,h,"F",d,p)}function dR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_o(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=_o(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_o(n.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_o(n.unaryFilter.field);return ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return ut.create(_o(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(i=>MT(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function fR(t){return eR[t]}function pR(t){return tR[t]}function mR(t){return nR[t]}function go(t){return{fieldPath:t.canonicalString()}}function _o(t){return Pt.fromServerFormat(t.fieldPath)}function VT(t){return t instanceof ut?function(n){if(n.op==="=="){if(Jy(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(Xy(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jy(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(Xy(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:pR(n.op),value:n.value}}}(t):t instanceof $n?function(n){const i=n.getFilters().map(s=>VT(s));return i.length===1?i[0]:{compositeFilter:{op:mR(n.op),filters:i}}}(t):me(54877,{filter:t})}function gR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,i,s,o=ve.min(),l=ve.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.yt=e}}function yR(t){const e=hR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Cn=new wR}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Mr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new pt(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new pt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zT=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(zT,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="LruGarbageCollector",ER=1048576;function mv([t,e],[n,i]){const s=Ce(t,n);return s===0?Ce(e,i):s}class TR{constructor(e){this.Ir=e,this.buffer=new pt(mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();mv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xR{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(pv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ha(n)?se(pv,"Ignoring IndexedDB error during garbage collection: ",n):await ca(n)}await this.Vr(3e5)})}}class IR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(id.ce);const i=new TR(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(fv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),po()<=Se.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function SR(t,e){return new IR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Il(i.mutation,s,hn.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=ll();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Ui();const l=xl(),h=function(){return xl()}();return n.forEach((d,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof qr)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Il(_.mutation,p,_.mutation.getFieldMask(),$e.now())):l.set(p.key,hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>h.set(p,new PR(_,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=xl();let s=new Ye((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||hn.empty();_=h.applyToLocalView(p,_),i.set(d,_);const v=(s.get(h.batchId)||Pe()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,v=ET();_.forEach(T=>{if(!o.has(T)){const A=PT(n.get(T),i.get(T));A!==null&&v.set(T,A),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Q.resolve(gs());let h=Gl,d=o;return l.next(p=>Q.forEach(p,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Pe())).next(_=>({batchId:h,changes:wT(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let s=ll();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=ll();return this.indexManager.getCollectionParents(e,o).next(h=>Q.forEach(h,d=>{const p=function(v,T){return new da(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((v,T)=>{l=l.insert(v,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Vt.newInvalidDocument(_)))});let h=ll();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Il(_.mutation,p,hn.empty(),$e.now()),ad(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:li(s.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yR(s.bundledQuery),readTime:li(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.overlays=new Ye(ce.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=gs();return Q.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const s=gs(),o=n.length+1,l=new ce(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ye((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=gs(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=gs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=s)););return Q.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Zk(n,i));let o=this.qr.get(n);o===void 0&&(o=Pe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Qr=new pt(wt.$r),this.Ur=new pt(wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new wt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ce(new Be([])),i=new wt(n,e),s=new wt(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new Be([])),i=new wt(n,e),s=new wt(n,e+1);let o=Pe();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(wt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Gk(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pt(Ce);return n.forEach(s=>{const o=new wt(s,0),l=new wt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),Q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const l=new wt(new ce(o),0);let h=new pt(Ce);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),Q.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Q.forEach(n.mutations,s=>{const o=new wt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new wt(n,0),s=this.Zr.firstAfterOrEqual(i);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=function(){return new Ye(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let i=Ui();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Vt.newInvalidDocument(s))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Ui();const l=n.path,h=new ce(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||lk(ak(_),i)<=0||(s.has(_.key)||ad(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,s){me(9500)}ii(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new OR(this)}getSize(e){return Q.resolve(this.size)}}class OR extends CR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.persistence=e,this.si=new Os(n=>eg(n),tg),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new lg,this.targetCount=0,this.ai=ea.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Q.waitFor(o).next(()=>s)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.ui={},this.overlays={},this.ci=new id(0),this.li=!1,this.li=!0,this.hi=new bR,this.referenceDelegate=e(this),this.Pi=new DR(this),this.indexManager=new vR,this.remoteDocumentCache=function(s){return new NR(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new _R(n),this.Ii=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new LR(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const s=new MR(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return Q.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class MR extends ck{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new lg,this.Vi=null}static mi(e){return new ug(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,i=>{const s=ce.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sh{constructor(e,n){this.persistence=e,this.pi=new Os(i=>fk(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=SR(this,n)}static mi(e,n){return new Sh(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?Q.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ve.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}br(e,n,i){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Q.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Pe(),s=Pe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new cg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bP()?8:hk(zt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new VR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(po()<=Se.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(po()<=Se.DEBUG&&se("QueryEngine","Query:",mo(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(po()<=Se.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):Q.resolve())}ys(e,n){if(iv(n))return Q.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Op(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Pe(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Op(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,i,s){return iv(n)||s.isEqual(ve.min())?Q.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?Q.resolve(null):(po()<=Se.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,l,n,ok(s,Gl)).next(h=>h))})}Ds(e,n){let i=new pt(yT(e));return n.forEach((s,o)=>{ad(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return po()<=Se.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",zR=3e8;class jR{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Ce),this.xs=new Os(o=>eg(o),tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BR(t,e,n,i){return new jR(t,e,n,i)}async function BT(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Pe();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function UR(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const v=p.batch,T=v.keys();let A=Q.resolve();return T.forEach(V=>{A=A.next(()=>_.getEntry(d,V)).next(F=>{const B=p.docVersions.get(V);De(B!==null,48541),F.version.compareTo(B)<0&&(v.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Pe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function UT(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function HR(t,e){const n=we(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((_,v)=>{const T=s.get(v);if(!T)return;h.push(n.Pi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,_.addedDocuments,v)));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(Rt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),s=s.insert(v,A),function(F,B,k){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=zR?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(T,A,_)&&h.push(n.Pi.updateTargetData(o,A))});let d=Ui(),p=Pe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(WR(o,l,e.documentUpdates).next(_=>{d=_.ks,p=_.qs})),!i.isEqual(ve.min())){const _=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return Q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function WR(t,e,n){let i=Pe(),s=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Ui();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ve.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):se(hg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function $R(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ym),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qR(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,Q.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new vr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function zp(t,e,n){const i=we(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!ha(l))throw l;se(hg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function gv(t,e,n){const i=we(t);let s=ve.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const v=we(d),T=v.xs.get(_);return T!==void 0?Q.resolve(v.Ms.get(T)):v.Pi.getTargetData(p,_)}(i,l,ai(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:ve.min(),n?o:Pe())).next(h=>(GR(i,Lk(e),h),{documents:h,Qs:o})))}function GR(t,e,n){let i=t.Os.get(e)||ve.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class _v{constructor(){this.activeTargetIds=Fk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="ConnectivityMonitor";class vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function jp(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="RestConnection",QR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===vh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=jp(),h=this.zo(e,n.toUriEncodedString());se(wf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),_=aa(p);return this.Jo(e,h,d,i,_).then(v=>(se(wf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Qo(wf,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=QR[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class JR extends YR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=jp();return new Promise((h,d)=>{const p=new $E;p.setWithCredentials(!0),p.listenOnce(qE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Nc.NO_ERROR:const v=p.getResponseJson();se(Ot,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Nc.TIMEOUT:se(Ot,`RPC '${e}' ${l} timed out`),d(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const T=p.getStatus();if(se(Ot,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const F=function(k){const C=k.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(C)>=0?C:K.UNKNOWN}(V.status);d(new ne(F,V.message))}else d(new ne(K.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ne(K.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{se(Ot,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(s);se(Ot,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",_,i,15)})}T_(e,n,i){const s=jp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=KE(),h=ZE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");se(Ot,`Creating RPC '${e}' stream ${s}: ${_}`,d);const v=l.createWebChannel(_,d);this.I_(v);let T=!1,A=!1;const V=new XR({Yo:B=>{A?se(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,B):(T||(se(Ot,`Opening RPC '${e}' stream ${s} transport.`),v.open(),T=!0),se(Ot,`RPC '${e}' stream ${s} sending:`,B),v.send(B))},Zo:()=>v.close()}),F=(B,k,C)=>{B.listen(k,O=>{try{C(O)}catch(W){setTimeout(()=>{throw W},0)}})};return F(v,al.EventType.OPEN,()=>{A||(se(Ot,`RPC '${e}' stream ${s} transport opened.`),V.o_())}),F(v,al.EventType.CLOSE,()=>{A||(A=!0,se(Ot,`RPC '${e}' stream ${s} transport closed`),V.a_(),this.E_(v))}),F(v,al.EventType.ERROR,B=>{A||(A=!0,Qo(Ot,`RPC '${e}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),V.a_(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),F(v,al.EventType.MESSAGE,B=>{var k;if(!A){const C=B.data[0];De(!!C,16349);const O=C,W=(O==null?void 0:O.error)||((k=O[0])==null?void 0:k.error);if(W){se(Ot,`RPC '${e}' stream ${s} received error:`,W);const X=W.status;let Z=function(x){const b=at[x];if(b!==void 0)return kT(b)}(X),P=W.message;Z===void 0&&(Z=K.INTERNAL,P="Unknown error status: "+X+" with message "+W.message),A=!0,V.a_(new ne(Z,P)),v.close()}else se(Ot,`RPC '${e}' stream ${s} received:`,C),V.u_(C)}}),F(h,GE.STAT_EVENT,B=>{B.stat===Pp.PROXY?se(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):B.stat===Pp.NOPROXY&&se(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.__()},0),V}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return new iR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="PersistentStream";class WT{constructor(e,n,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Bi(n.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ne(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e2 extends WT{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oR(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ve.min():l.readTime?li(l.readTime):ve.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Fp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Lp(d)?{documents:uR(o,d)}:{query:cR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=LT(o,l.resumeToken);const p=Dp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ve.min())>0){h.readTime=Ih(o,l.snapshotVersion.toTimestamp());const p=Dp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=dR(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.q_(n)}}class t2 extends WT{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lR(e.writeResults,e.commitTime),i=li(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>aR(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class i2 extends n2{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Mp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Mp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(K.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bi(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class s2{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Ds(this)&&(se(ks,"Restarting streams for network reachability change."),await async function(d){const p=we(d);p.Ea.add(4),await du(p),p.Ra.set("Unknown"),p.Ea.delete(4),await dd(p)}(this))})}),this.Ra=new r2(i,s)}}async function dd(t){if(Ds(t))for(const e of t.da)await e(!0)}async function du(t){for(const e of t.da)await e(!1)}function $T(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mg(n)?pg(n):fa(n).O_()&&fg(n,e))}function dg(t,e){const n=we(t),i=fa(n);n.Ia.delete(e),i.O_()&&qT(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ds(n)&&n.Ra.set("Unknown"))}function fg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fa(t).Y_(e)}function qT(t,e){t.Va.Ue(e),fa(t).Z_(e)}function pg(t){t.Va=new Jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.Ra.ua()}function mg(t){return Ds(t)&&!fa(t).x_()&&t.Ia.size>0}function Ds(t){return we(t).Ea.size===0}function GT(t){t.Va=void 0}async function o2(t){t.Ra.set("Online")}async function a2(t){t.Ia.forEach((e,n)=>{fg(t,e)})}async function l2(t,e){GT(t),mg(t)?(t.Ra.ha(e),pg(t)):t.Ra.set("Unknown")}async function u2(t,e,n){if(t.Ra.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){se(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ch(t,i)}else if(e instanceof Vc?t.Va.Ze(e):e instanceof RT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const i=await UT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(Rt.EMPTY_BYTE_STRING,_.snapshotVersion)),qT(o,d);const v=new vr(_.target,d,p,_.sequenceNumber);fg(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){se(ks,"Failed to raise snapshot:",i),await Ch(t,i)}}async function Ch(t,e,n){if(!ha(e))throw e;t.Ea.add(1),await du(t),t.Ra.set("Offline"),n||(n=()=>UT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dd(t)})}function ZT(t,e){return e().catch(n=>Ch(t,n,e))}async function fd(t){const e=we(t),n=jr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ym;for(;c2(e);)try{const s=await $R(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,h2(e,s)}catch(s){await Ch(e,s)}KT(e)&&QT(e)}function c2(t){return Ds(t)&&t.Ta.length<10}function h2(t,e){t.Ta.push(e);const n=jr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(t){return Ds(t)&&!jr(t).x_()&&t.Ta.length>0}function QT(t){jr(t).start()}async function d2(t){jr(t).ra()}async function f2(t){const e=jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function p2(t,e,n){const i=t.Ta.shift(),s=sg.from(i,e,n);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fd(t)}async function m2(t,e){e&&jr(t).X_&&await async function(i,s){if(function(l){return Qk(l)&&l!==K.ABORTED}(s.code)){const o=i.Ta.shift();jr(i).B_(),await ZT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await fd(i)}}(t,e),KT(t)&&QT(t)}async function Ev(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(ks,"RemoteStore received new credentials");const i=Ds(n);n.Ea.add(3),await du(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dd(n)}async function g2(t,e){const n=we(t);e?(n.Ea.delete(2),await dd(n)):e||(n.Ea.add(2),await du(n),n.Ra.set("Unknown"))}function fa(t){return t.ma||(t.ma=function(n,i,s){const o=we(n);return o.sa(),new e2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:o2.bind(null,t),t_:a2.bind(null,t),r_:l2.bind(null,t),H_:u2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),mg(t)?pg(t):t.Ra.set("Unknown")):(await t.ma.stop(),GT(t))})),t.ma}function jr(t){return t.fa||(t.fa=function(n,i,s){const o=we(n);return o.sa(),new t2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d2.bind(null,t),r_:m2.bind(null,t),ta:f2.bind(null,t),na:p2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new gg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(t,e){if(Bi("AsyncQueue",`${e}: ${t}`),ha(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=ll(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.ga=new Ye(ce.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ta{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ta(e,n,Vo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class y2{constructor(){this.queries=xv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=we(n),o=s.queries;s.queries=xv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function xv(){return new Os(t=>_T(t),od)}async function YT(t,e){const n=we(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new _2,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=_g(l,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&yg(n)}async function XT(t,e){const n=we(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function v2(t,e){const n=we(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&yg(n)}function w2(t,e,n){const i=we(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function yg(t){t.Ca.forEach(e=>{e.next()})}var Bp,Iv;(Iv=Bp||(Bp={})).Ma="default",Iv.Cache="cache";class JT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.key=e}}class tx{constructor(e){this.key=e}}class E2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=yT(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Tv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const T=s.get(_),A=ad(this.query,v)?v:null,V=!!T&&this.mutatedKeys.has(T.key),F=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let B=!1;T&&A?T.data.isEqual(A.data)?V!==F&&(i.track({type:3,doc:A}),B=!0):this.su(T,A)||(i.track({type:2,doc:A}),B=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!T&&A?(i.track({type:0,doc:A}),B=!0):T&&!A&&(i.track({type:1,doc:T}),B=!0,(d||p)&&(h=!0)),B&&(A?(l=l.add(A),o=F?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((_,v)=>function(A,V){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:B})}};return F(A)-F(V)}(_.type,v.type)||this.eu(_.doc,v.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new ta(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new tx(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new ex(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vg="SyncEngine";class T2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class x2{constructor(e){this.key=e,this.hu=!1}}class I2{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Os(h=>_T(h),od),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ce.comparator),this.Au=new Map,this.Ru=new lg,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(t,e,n=!0){const i=ax(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await nx(i,e,n,!0),s}async function C2(t,e){const n=ax(t);await nx(n,e,!0,!1)}async function nx(t,e,n,i){const s=await qR(t.localStore,ai(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await P2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&$T(t.remoteStore,s),h}async function P2(t,e,n,i,s){t.pu=(v,T,A)=>async function(F,B,k,C){let O=B.view.ru(k);O.Cs&&(O=await gv(F.localStore,B.query,!1).then(({documents:P})=>B.view.ru(P,O)));const W=C&&C.targetChanges.get(B.targetId),X=C&&C.targetMismatches.get(B.targetId)!=null,Z=B.view.applyChanges(O,F.isPrimaryClient,W,X);return Cv(F,B.targetId,Z.au),Z.snapshot}(t,v,T,A);const o=await gv(t.localStore,e,!0),l=new E2(e,o.Qs),h=l.ru(o.documents),d=hu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Cv(t,n,p.au);const _=new T2(e,n,l);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function A2(t,e,n){const i=we(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!od(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await zp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&dg(i.remoteStore,s.targetId),Up(i,s.targetId)}).catch(ca)):(Up(i,s.targetId),await zp(i.localStore,s.targetId,!0))}async function k2(t,e){const n=we(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),dg(n.remoteStore,i.targetId))}async function R2(t,e,n){const i=V2(t);try{const s=await function(l,h){const d=we(l),p=$e.now(),_=h.reduce((A,V)=>A.add(V.key),Pe());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let V=Ui(),F=Pe();return d.Ns.getEntries(A,_).next(B=>{V=B,V.forEach((k,C)=>{C.isValidDocument()||(F=F.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,V)).next(B=>{v=B;const k=[];for(const C of h){const O=$k(C,v.get(C.key).overlayedDocument);O!=null&&k.push(new qr(C.key,O,uT(O.value.mapValue),Hn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,k,h)}).next(B=>{T=B;const k=B.applyToLocalDocumentSet(v,F);return d.documentOverlayCache.saveOverlays(A,B.batchId,k)})}).then(()=>({batchId:T.batchId,changes:wT(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ye(Ce)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(i,s.batchId,n),await fu(i,s.changes),await fd(i.remoteStore)}catch(s){const o=_g(s,"Failed to persist write");n.reject(o)}}async function ix(t,e){const n=we(t);try{const i=await HR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?De(l.hu,14607):s.removedDocuments.size>0&&(De(l.hu,42227),l.hu=!1))}),await fu(n,i,e)}catch(i){await ca(i)}}function Sv(t,e,n){const i=we(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=we(l);d.onlineState=h;let p=!1;d.queries.forEach((_,v)=>{for(const T of v.Sa)T.va(h)&&(p=!0)}),p&&yg(d)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function b2(t,e,n){const i=we(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Ye(ce.comparator);l=l.insert(o,Vt.newNoDocument(o,ve.min()));const h=Pe().add(o),d=new cd(ve.min(),new Map,new Ye(Ce),l,h);await ix(i,d),i.du=i.du.remove(o),i.Au.delete(e),wg(i)}else await zp(i.localStore,e,!1).then(()=>Up(i,e,n)).catch(ca)}async function L2(t,e){const n=we(t),i=e.batch.batchId;try{const s=await UR(n.localStore,e);sx(n,i,null),rx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fu(n,s)}catch(s){await ca(s)}}async function N2(t,e,n){const i=we(t);try{const s=await function(l,h){const d=we(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(De(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,e);sx(i,e,n),rx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await fu(i,s)}catch(s){await ca(s)}}function rx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sx(t,e,n){const i=we(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||ox(t,i)})}function ox(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(dg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),wg(t))}function Cv(t,e,n){for(const i of n)i instanceof ex?(t.Ru.addReference(i.key,e),O2(t,i)):i instanceof tx?(se(vg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||ox(t,i.key)):me(19791,{wu:i})}function O2(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(se(vg,"New document in limbo: "+n),t.Eu.add(i),wg(t))}function wg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(Be.fromString(e)),i=t.fu.next();t.Au.set(i,new x2(n)),t.du=t.du.insert(n,i),$T(t.remoteStore,new vr(ai(ng(n.path)),i,"TargetPurposeLimboResolution",id.ce))}}async function fu(t,e,n){const i=we(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var _;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=cg.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,p){const _=we(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Q.forEach(p,T=>Q.forEach(T.Es,A=>_.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>Q.forEach(T.ds,A=>_.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!ha(v))throw v;se(hg,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const A=_.Ms.get(T),V=A.snapshotVersion,F=A.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(T,F)}}}(i.localStore,o))}async function D2(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se(vg,"User change. New user:",e.toKey());const i=await BT(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne(K.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fu(n,i.Ls)}}function M2(t,e){const n=we(t),i=n.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let s=Pe();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function ax(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b2.bind(null,e),e.Pu.H_=v2.bind(null,e.eventManager),e.Pu.yu=w2.bind(null,e.eventManager),e}function V2(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N2.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BR(this.persistence,new FR,e.initialUser,this.serializer)}Cu(e){return new jT(ug.mi,this.serializer)}Du(e){return new ZR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class F2 extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Sh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xR(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new jT(i=>Sh.mi(i,n),this.serializer)}}class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Sv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y2}()}createDatastore(e){const n=hd(e.databaseInfo.databaseId),i=function(o){return new JR(o)}(e.databaseInfo);return function(o,l,h,d){return new i2(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new s2(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Sv(this.syncEngine,n,0),function(){return vv.v()?new vv:new KR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,_){const v=new I2(s,o,l,h,d,p);return _&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=we(s);se(ks,"RemoteStore shutting down."),o.Ea.add(5),await du(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hp.provider={build:()=>new Hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class z2{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{se(Br,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(se(Br,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=_g(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress(),se(Br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await BT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j2(t);se(Br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Ev(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Ev(e.remoteStore,s)),t._onlineComponents=e}async function j2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Br,"Using user provided OfflineComponentProvider");try{await Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Tf(t,new Ph)}}else se(Br,"Using default OfflineComponentProvider"),await Tf(t,new F2(void 0));return t._offlineComponents}async function ux(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Br,"Using user provided OnlineComponentProvider"),await Pv(t,t._uninitializedComponentsProvider._online)):(se(Br,"Using default OnlineComponentProvider"),await Pv(t,new Hp))),t._onlineComponents}function B2(t){return ux(t).then(e=>e.syncEngine)}async function cx(t){const e=await ux(t),n=e.eventManager;return n.onListen=S2.bind(null,e.syncEngine),n.onUnlisten=A2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k2.bind(null,e.syncEngine),n}function U2(t,e,n={}){const i=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new lx({next:T=>{_.Nu(),l.enqueueAndForget(()=>XT(o,v));const A=T.docs.has(h);!A&&T.fromCache?p.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&d&&d.source==="server"?p.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new JT(ng(h.path),_,{includeMetadataChanges:!0,qa:!0});return YT(o,v)}(await cx(t),t.asyncQueue,e,n,i)),i.promise}function H2(t,e,n={}){const i=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new lx({next:T=>{_.Nu(),l.enqueueAndForget(()=>XT(o,v)),T.fromCache&&d.source==="server"?p.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new JT(h,_,{includeMetadataChanges:!0,qa:!0});return YT(o,v)}(await cx(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="firestore.googleapis.com",kv=!0;class Rv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dx,this.ssl=kv}else this.host=e.host,this.ssl=e.ssl??kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ER)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hx(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KA;switch(i.type){case"firstParty":return new JA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Av.get(n);i&&(se("ComponentProvider","Removing Datastore"),Av.delete(n),i.terminate())}(this),Promise.resolve()}}function W2(t,e,n,i={}){var p;t=fi(t,pd);const s=aa(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(ME(`https://${h}`),VE("Firestore",!0)),o.host!==dx&&o.host!==h&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!Cs(d,l)&&(t._setSettings(d),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Dt.MOCK_USER;else{_=TP(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Dt(T)}t._authCredentials=new QA(new YE(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class rt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(uu(n,rt._jsonSchema))return new rt(e,i||null,new ce(Be.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ct("string",rt._jsonSchemaVersion),referencePath:ct("string")};class Lr extends Ms{constructor(e,n,i){super(e,n,ng(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ce(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function cr(t,e,...n){if(t=xt(t),XE("collection","path",e),t instanceof pd){const i=Be.fromString(e,...n);return Hy(i),new Lr(t,null,i)}{if(!(t instanceof rt||t instanceof Lr))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Hy(i),new Lr(t.firestore,null,i)}}function ki(t,e,...n){if(t=xt(t),arguments.length===1&&(e=Qm.newId()),XE("doc","path",e),t instanceof pd){const i=Be.fromString(e,...n);return Uy(i),new rt(t,null,new ce(i))}{if(!(t instanceof rt||t instanceof Lr))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Uy(i),new rt(t.firestore,t instanceof Lr?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="AsyncQueue";class Lv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HT(this,"async_queue_retry"),this._c=()=>{const i=Ef();i&&se(bv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Di;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ha(e))throw e;se(bv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Bi("INTERNAL UNHANDLED ERROR: ",Nv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=gg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:Nv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pa extends pd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Lv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lv(e),this._firestoreClient=void 0,await e}}}function $2(t,e){const n=typeof t=="object"?t:BE(),i=typeof t=="string"?t:vh,s=Zm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=wP("firestore");o&&W2(s,...o)}return s}function Eg(t){if(t._terminated)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q2(t),t._firestoreClient}function q2(t){var i,s,o;const e=t._freezeSettings(),n=function(h,d,p,_){return new gk(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hx(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new z2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Rt.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:ct("string",Sn._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(uu(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:ct("string",ui._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ci(e.vectorValues);throw new ne(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:ct("string",ci._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^__.*__$/;class Z2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new cu(e,this.data,n,this.fieldTransforms)}}class fx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function px(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class xg{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(px(this.Ac)&&G2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hd(e)}Cc(e,n,i,s=!1){return new xg({Ac:e,methodName:n,Dc:i,path:Pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(t){const e=t._freezeSettings(),n=hd(t._databaseId);return new K2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q2(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Sg("Data must be an object, but it was:",l,i);const h=mx(i,l);let d,p;if(o.merge)d=new hn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=Wp(e,v,n);if(!l.contains(T))throw new ne(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);_x(_,T)||_.push(T)}d=new hn(_),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new Z2(new en(h),d,p)}class gd extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}function Y2(t,e,n,i){const s=t.Cc(1,e,n);Sg("Data must be an object, but it was:",s,i);const o=[],l=en.empty();$r(i,(d,p)=>{const _=Cg(e,d,n);p=xt(p);const v=s.yc(_);if(p instanceof gd)o.push(_);else{const T=pu(p,v);T!=null&&(o.push(_),l.set(_,T))}});const h=new hn(o);return new fx(l,h,s.fieldTransforms)}function X2(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Wp(e,i,n)],d=[s];if(o.length%2!=0)throw new ne(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(Wp(e,o[T])),d.push(o[T+1]);const p=[],_=en.empty();for(let T=h.length-1;T>=0;--T)if(!_x(p,h[T])){const A=h[T];let V=d[T];V=xt(V);const F=l.yc(A);if(V instanceof gd)p.push(A);else{const B=pu(V,F);B!=null&&(p.push(A),_.set(A,B))}}const v=new hn(p);return new fx(_,v,l.fieldTransforms)}function J2(t,e,n,i=!1){return pu(n,t.Cc(i?4:3,e))}function pu(t,e){if(gx(t=xt(t)))return Sg("Unsupported field value:",e,t),mx(t,e);if(t instanceof Tg)return function(i,s){if(!px(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=pu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=$e.fromDate(i);return{timestampValue:Ih(s.serializer,o)}}if(i instanceof $e){const o=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ih(s.serializer,o)}}if(i instanceof ui)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sn)return{bytesValue:LT(s.serializer,i._byteString)};if(i instanceof rt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ag(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ci)return function(l,h){return{mapValue:{fields:{[aT]:{stringValue:lT},[wh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return ig(h.serializer,p)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${nd(i)}`)}(t,e)}function mx(t,e){const n={};return tT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(t,(i,s)=>{const o=pu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function gx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof ui||t instanceof Sn||t instanceof rt||t instanceof Tg||t instanceof ci)}function Sg(t,e,n){if(!gx(n)||!JE(n)){const i=nd(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Wp(t,e,n){if((e=xt(e))instanceof md)return e._internalPath;if(typeof e=="string")return Cg(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,n)}const eb=new RegExp("[~\\*/\\[\\]]");function Cg(t,e,n){if(e.search(eb)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new md(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ah(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ne(K.INVALID_ARGUMENT,h+t+d)}function _x(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_d("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tb extends yx{data(){return super.data()}}function _d(t,e){return typeof e=="string"?Cg(t,e):e instanceof md?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class vx extends Pg{}function Fc(t,e,...n){let i=[];e instanceof Pg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Ag).length,h=o.filter(d=>d instanceof yd).length;if(l>1||l>0&&h>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class yd extends vx{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yd(e,n,i)}_apply(e){const n=this._parse(e);return wx(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n))}_parse(e){const n=Ig(e.firestore);return function(o,l,h,d,p,_,v){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Dv(v,_);const V=[];for(const F of v)V.push(Ov(d,o,F));T={arrayValue:{values:V}}}else T=Ov(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Dv(v,_),T=J2(h,l,v,_==="in"||_==="not-in");return ut.create(p,_,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zc(t,e,n){const i=e,s=_d("where",t);return yd._create(s,i,n)}class Ag extends Pg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)wx(l,d),l=Np(l,d)}(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kg extends vx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(o,l)}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new da(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ib(t,e="asc"){const n=e,i=_d("orderBy",t);return kg._create(i,n)}function Ov(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ce.isDocumentKey(i))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yy(t,new ce(i))}if(n instanceof rt)return Yy(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(n)}.`)}function Dv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wx(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rb{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return $r(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[wh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>nt(l.doubleValue));return new ci(n)}convertGeoPoint(e){return new ui(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);De(FT(i),9688,{name:e});const s=new Kl(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return s.isEqual(n)||Bi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends yx{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_d("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:ct("string",ws._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class jc extends ws{data(e={}){return super.data(e)}}class Fo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new cl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new jc(this._firestore,this._userDataWriter,i.key,i,new cl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:ob(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ob(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){t=fi(t,rt);const e=fi(t.firestore,pa);return U2(Eg(e),t._key).then(n=>ab(e,t,n))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:ct("string",Fo._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class Tx extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function hr(t){t=fi(t,Ms);const e=fi(t.firestore,pa),n=Eg(e),i=new Tx(e);return nb(t._query),H2(n,t._query).then(s=>new Fo(e,i,t,s))}function xx(t,e,n){t=fi(t,rt);const i=fi(t.firestore,pa),s=sb(t.converter,e);return Rg(i,[Q2(Ig(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Hn.none())])}function Bc(t,e,n,...i){t=fi(t,rt);const s=fi(t.firestore,pa),o=Ig(s);let l;return l=typeof(e=xt(e))=="string"||e instanceof md?X2(o,"updateDoc",t._key,e,n,i):Y2(o,"updateDoc",t._key,e),Rg(s,[l.toMutation(t._key,Hn.exists(!0))])}function xf(t){return Rg(fi(t.firestore,pa),[new rg(t._key,Hn.none())])}function Rg(t,e){return function(i,s){const o=new Di;return i.asyncQueue.enqueueAndForget(async()=>R2(await B2(i),s,o)),o.promise}(Eg(t),e)}function ab(t,e,n){const i=n.docs.get(e._key),s=new Tx(t);return new ws(t,s,e._key,i,new cl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ua=s})(la),Ko(new Ps("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new pa(new YA(i.getProvider("auth-internal")),new ek(l,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(p.options.projectId,_)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Rr(Fy,zy,e),Rr(Fy,zy,"esm2020")})();function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lb=Ix,Sx=new au("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new qm("@firebase/auth");function ub(t,...e){kh.logLevel<=Se.WARN&&kh.warn(`Auth (${la}): ${t}`,...e)}function Uc(t,...e){kh.logLevel<=Se.ERROR&&kh.error(`Auth (${la}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw bg(t,...e)}function hi(t,...e){return bg(t,...e)}function Cx(t,e,n){const i={...lb(),[e]:n};return new au("auth","Firebase",i).create(e,{appName:t.name})}function Nr(t){return Cx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Sx.create(t,...e)}function pe(t,e,...n){if(!t)throw bg(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function Hi(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cb(){return Mv()==="http:"||Mv()==="https:"}function Mv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cb()||AP()||"connection"in navigator)?navigator.onLine:!0}function db(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=SP()||kP()}get(){return hb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mb=new mu(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gr(t,e,n,i,s={}){return Ax(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=lu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return PP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&aa(t.emulatorConfig.host)&&(p.credentials="include"),Px.fetch()(await kx(t,t.config.apiHost,n,h),p)})}async function Ax(t,e,n){t._canInitEmulator=!1;const i={...fb,...e};try{const s=new _b(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw wc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw wc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw wc(t,"user-disabled",l);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Cx(t,_,p);qn(t,_)}}catch(s){if(s instanceof $i)throw s;qn(t,"network-request-failed",{message:String(s)})}}async function vd(t,e,n,i,s={}){const o=await Gr(t,e,n,i,s);return"mfaPendingCredential"in o&&qn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kx(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Lg(t.config,s):`${t.config.apiScheme}://${s}`;return pb.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function gb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _b{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(hi(this.auth,"network-request-failed")),mb.get())})}}function wc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=hi(t,e,i);return s.customData._tokenResponse=n,s}function Vv(t){return t!==void 0&&t.enterprise!==void 0}class yb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vb(t,e){return Gr(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function Rh(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Eb(t,e=!1){const n=xt(t),i=await n.getIdToken(e),s=Ng(i);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Sl(If(s.auth_time)),issuedAtTime:Sl(If(s.iat)),expirationTime:Sl(If(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function Ng(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const s=LE(n);return s?JSON.parse(s):(Uc("Failed to decode base64 JWT payload"),null)}catch(s){return Uc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fv(t){const e=Ng(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof $i&&Tb(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Tb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var v;const e=t.auth,n=await t.getIdToken(),i=await eu(t,Rh(e,{idToken:n}));pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?Rx(s.providerUserInfo):[],l=Sb(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function Ib(t){const e=xt(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sb(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Rx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t,e){const n=await Ax(t,{},async()=>{const i=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await kx(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&aa(t.emulatorConfig.host)&&(d.credentials="include"),Px.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pb(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Fv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Cb(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new zo;return i&&(pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new xb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Eb(this,e)}reload(){return Ib(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await eu(this,wb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:v,emailVerified:T,isAnonymous:A,providerData:V,stsTokenManager:F}=n;pe(v&&F,e,"internal-error");const B=zo.fromJSON(this.name,F);pe(typeof v=="string",e,"internal-error"),sr(i,e.name),sr(s,e.name),pe(typeof T=="boolean",e,"internal-error"),pe(typeof A=="boolean",e,"internal-error"),sr(o,e.name),sr(l,e.name),sr(h,e.name),sr(d,e.name),sr(p,e.name),sr(_,e.name);const k=new jn({uid:v,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:A,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:B,createdAt:p,lastLoginAt:_});return V&&Array.isArray(V)&&(k.providerData=V.map(C=>({...C}))),d&&(k._redirectEventId=d),k}static async _fromIdTokenResponse(e,n,i=!1){const s=new zo;s.updateFromServerResponse(n);const o=new jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Rx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new zo;h.updateFromIdToken(i);const d=new jn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function Ni(t){Hi(t instanceof Function,"Expected a class definition");let e=zv.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bx.type="NONE";const jv=bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Hc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Hc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rh(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new jo(Ni(jv),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Ni(jv);const l=Hc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let v;if(typeof _=="string"){const T=await Rh(e,{idToken:_}).catch(()=>{});if(!T)break;v=await jn._fromGetAccountInfoResponse(e,T,_)}else v=jn._fromJSON(e,_);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new jo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new jo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vx(e))return"Blackberry";if(Fx(e))return"Webos";if(Nx(e))return"Safari";if((e.includes("chrome/")||Ox(e))&&!e.includes("edge/"))return"Chrome";if(Mx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Lx(t=zt()){return/firefox\//i.test(t)}function Nx(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ox(t=zt()){return/crios\//i.test(t)}function Dx(t=zt()){return/iemobile/i.test(t)}function Mx(t=zt()){return/android/i.test(t)}function Vx(t=zt()){return/blackberry/i.test(t)}function Fx(t=zt()){return/webos/i.test(t)}function Og(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ab(t=zt()){var e;return Og(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kb(){return RP()&&document.documentMode===10}function zx(t=zt()){return Og(t)||Mx(t)||Fx(t)||Vx(t)||/windows phone/i.test(t)||Dx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e=[]){let n;switch(t){case"Browser":n=Bv(zt());break;case"Worker":n=`${Bv(zt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=6;class Nb{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Lb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uv(this),this.idTokenSubscription=new Uv(this),this.beforeStateQueue=new Rb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rh(this,{idToken:e}),i=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=db()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Nr(this));const n=e?xt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bb(this),n=new Nb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Pb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ub(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ma(t){return xt(t)}class Uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FP(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Db(t){wd=t}function Bx(t){return wd.loadJS(t)}function Mb(){return wd.recaptchaEnterpriseScript}function Vb(){return wd.gapiScript}function Fb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zb{constructor(){this.enterprise=new jb}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jb{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Bb="recaptcha-enterprise",Ux="NO_RECAPTCHA";class Ub{constructor(e){this.type=Bb,this.auth=ma(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{vb(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new yb(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Vv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(Ux)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zb().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Vv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Mb();d.length!==0&&(d+=h),Bx(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Hv(t,e,n,i=!1,s=!1){const o=new Ub(t);let l;if(s)l=Ux;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Wv(t,e,n,i,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Hv(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Hv(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){const n=Zm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Cs(o,e??{}))return s;qn(s,"already-initialized")}return n.initialize({options:e})}function Wb(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $b(t,e,n){const i=ma(t);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=Hx(e),{host:l,port:h}=qb(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},_=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(Cs(p,i.config.emulator)&&Cs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,aa(l)?(ME(`${o}//${l}${d}`),VE("Auth",!0)):Gb()}function Hx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qb(t){const e=Hx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:$v(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:$v(l)}}}function $v(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}async function Zb(t,e){return Gr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(t,e){return vd(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function Yb(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Dg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new tu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wv(e,n,"signInWithPassword",Kb);case"emailLink":return Qb(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wv(e,i,"signUpPassword",Zb);case"emailLink":return Yb(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return vd(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="http://localhost";class Rs extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new Rs(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Bo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:Xb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(t){const e=sl(ol(t)).link,n=e?sl(ol(e)).deep_link_id:null,i=sl(ol(t)).deep_link_id;return(i?sl(ol(i)).link:null)||i||n||e||t}class Mg{constructor(e){const n=sl(ol(e)),i=n.apiKey??null,s=n.oobCode??null,o=Jb(n.mode??null);pe(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eL(e);try{return new Mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Mg.parseLink(n);return pe(i,"argument-error"),tu._fromEmailAndCode(e,i.code,i.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Wx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends gu{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return fr.credential(n,i)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends gu{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends gu{constructor(){super("twitter.com")}static credential(e,n){return Rs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return mr.credential(n,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await jn._fromIdTokenResponse(e,i,s),l=qv(i);return new na({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=qv(i);return new na({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends $i{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Lh(e,n,i,s)}}function $x(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(t,o,e,i):o})}async function tL(t,e,n=!1){const i=await eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return na._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e,n=!1){const{auth:i}=t;if(zn(i.app))return Promise.reject(Nr(i));const s="reauthenticate";try{const o=await eu(t,$x(i,s,e,t),n);pe(o.idToken,i,"internal-error");const l=Ng(o.idToken);pe(l,i,"internal-error");const{sub:h}=l;return pe(t.uid===h,i,"user-mismatch"),na._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&qn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t,e,n=!1){if(zn(t.app))return Promise.reject(Nr(t));const i="signIn",s=await $x(t,i,e),o=await na._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function iL(t,e){return qx(ma(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t){const e=ma(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sL(t,e,n){return zn(t.app)?Promise.reject(Nr(t)):iL(xt(t),ga.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rL(t),i})}function oL(t,e,n,i){return xt(t).onIdTokenChanged(e,n,i)}function aL(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function lL(t,e,n,i){return xt(t).onAuthStateChanged(e,n,i)}function uL(t){return xt(t).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=1e3,hL=10;class Zx extends Gx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);kb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hL):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},cL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zx.type="LOCAL";const dL=Zx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends Gx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kx.type="SESSION";const Qx=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await fL(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Vg("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function mL(t){di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function gL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _L(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yL(){return Yx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebaseLocalStorageDb",vL=1,Oh="firebaseLocalStorage",Jx="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function wL(){const t=indexedDB.deleteDatabase(Xx);return new _u(t).toPromise()}function Gp(){const t=indexedDB.open(Xx,vL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Oh,{keyPath:Jx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Oh)?e(i):(i.close(),await wL(),e(await Gp()))})})}async function Gv(t,e,n){const i=Td(t,!0).put({[Jx]:e,value:n});return new _u(i).toPromise()}async function EL(t,e){const n=Td(t,!1).get(e),i=await new _u(n).toPromise();return i===void 0?null:i.value}function Zv(t,e){const n=Td(t,!0).delete(e);return new _u(n).toPromise()}const TL=800,xL=3;class e1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(yL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await gL(),!this.activeServiceWorker)return;this.sender=new pL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_L()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await Gv(e,Nh,"1"),await Zv(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>EL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Td(s,!1).getAll();return new _u(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e1.type="LOCAL";const IL=e1;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t,e){return e?Ni(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CL(t){return qx(t.auth,new Fg(t),t.bypassAuthState)}function PL(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),nL(n,new Fg(t),t.bypassAuthState)}async function AL(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),tL(n,new Fg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return PL;default:qn(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new mu(2e3,1e4);class Ro extends t1{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kL.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="pendingRedirect",Wc=new Map;class bL extends t1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wc.get(this.auth._key());if(!e){try{const i=await LL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wc.set(this.auth._key(),e)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LL(t,e){const n=DL(e),i=OL(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function NL(t,e){Wc.set(t._key(),e)}function OL(t){return Ni(t._redirectPersistence)}function DL(t){return Hc(RL,t.config.apiKey,t.name)}async function ML(t,e,n=!1){if(zn(t.app))return Promise.reject(Nr(t));const i=ma(t),s=SL(i,e),l=await new bL(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=10*60*1e3;class FL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!n1(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kv(e))}saveEventToCache(e){this.cachedEventUids.add(Kv(e)),this.lastProcessedEventTime=Date.now()}}function Kv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e={}){return Gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UL=/^https?/;async function HL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jL(t);for(const n of e)try{if(WL(n))return}catch{}qn(t,"unauthorized-domain")}function WL(t){const e=$p(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!UL.test(n))return!1;if(BL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new mu(3e4,6e4);function Qv(){const t=di().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qL(t){return new Promise((e,n)=>{var s,o,l;function i(){Qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qv(),n(hi(t,"network-request-failed"))},timeout:$L.get()})}if((o=(s=di().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=di().gapi)!=null&&l.load)i();else{const h=Fb("iframefcb");return di()[h]=()=>{gapi.load?i():n(hi(t,"network-request-failed"))},Bx(`${Vb()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw $c=null,e})}let $c=null;function GL(t){return $c=$c||qL(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new mu(5e3,15e3),KL="__/auth/iframe",QL="emulator/auth/iframe",YL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JL(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lg(e,QL):`https://${t.config.authDomain}/${KL}`,i={apiKey:e.apiKey,appName:t.name,v:la},s=XL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${lu(i).slice(1)}`}async function eN(t){const e=await GL(t),n=di().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:JL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=hi(t,"network-request-failed"),h=di().setTimeout(()=>{o(l)},ZL.get());function d(){di().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,iN=600,rN="_blank",sN="http://localhost";class Yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oN(t,e,n,i=nN,s=iN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...tN,width:i.toString(),height:s.toString(),top:o,left:l},p=zt().toLowerCase();n&&(h=Ox(p)?rN:n),Lx(p)&&(e=e||sN,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[A,V])=>`${T}${A}=${V},`,"");if(Ab(p)&&h!=="_self")return aN(e||"",h),new Yv(null);const v=window.open(e||"",h,_);pe(v,t,"popup-blocked");try{v.focus()}catch{}return new Yv(v)}function aN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="__/auth/handler",uN="emulator/auth/handler",cN=encodeURIComponent("fac");async function Xv(t,e,n,i,s,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:la,eventId:s};if(e instanceof Wx){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",VP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))l[_]=v}if(e instanceof gu){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${cN}=${encodeURIComponent(d)}`:"";return`${hN(t)}?${lu(h).slice(1)}${p}`}function hN({config:t}){return t.emulator?Lg(t,uN):`https://${t.authDomain}/${lN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class dN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qx,this._completeRedirectFn=ML,this._overrideRedirectResult=NL}async _openPopup(e,n,i,s){var l;Hi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Xv(e,n,i,$p(),s);return oN(e,o,Vg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Xv(e,n,i,$p(),s);return mL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Hi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await eN(e),i=new FL(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sf,{type:Sf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Sf];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zx()||Nx()||Og()}}const fN=dN;var Jv="@firebase/auth",ew="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gN(t){Ko(new Ps("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jx(t)},p=new Ob(i,s,o,d);return Wb(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ko(new Ps("auth-internal",e=>{const n=ma(e.getProvider("auth").getImmediate());return(i=>new pN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(Jv,ew,mN(t)),Rr(Jv,ew,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=5*60,yN=DE("authIdTokenMaxAge")||_N;let tw=null;const vN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>yN)return;const s=n==null?void 0:n.token;tw!==s&&(tw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wN(t=BE()){const e=Zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Hb(t,{popupRedirectResolver:fN,persistence:[IL,dL,Qx]}),i=DE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=vN(o.toString());aL(n,l,()=>l(n.currentUser)),oL(n,h=>l(h))}}const s=NE("auth");return s&&$b(n,`http://${s}`),n}function EN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Db({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=hi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",EN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gN("Browser");var TN="firebase",xN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(TN,xN,"app");const IN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},i1=jE(IN),je=$2(i1),Cf=wN(i1),St={FACILITIES:"facilities",HITS:"hits"},SN=()=>{var Gt;const[t,e]=G.useState(!1),[n,i]=G.useState(""),[s,o]=G.useState(""),[l,h]=G.useState(null),[d,p]=G.useState("facilities"),[_,v]=G.useState([]),[T,A]=G.useState(!1),[V,F]=G.useState(null),[B,k]=G.useState(null),[C,O]=G.useState(null),[W,X]=G.useState({}),[Z,P]=G.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",mediaLinks:[""],expectedRepairTime:0,notes:""}),S=ed();G.useEffect(()=>{const M=lL(Cf,ee=>{ee?(e(!0),h(null)):e(!1)});return()=>M()},[]),G.useEffect(()=>{t&&x()},[t]);const x=async()=>{A(!0),F(null);try{if(!je)throw new Error("Firebase not initialized");const M=await hr(cr(je,St.FACILITIES)),ee=await Promise.all(M.docs.map(async q=>{var He,mt;const ie=Fc(cr(je,St.HITS),zc("facilityId","==",parseInt(q.id))),Ee=(await hr(ie)).docs.map(qi=>({id:parseInt(qi.id),...qi.data()})),de=q.data(),ge=((He=de.location)==null?void 0:He.latitude)??de.latitude,he=((mt=de.location)==null?void 0:mt.longitude)??de.longitude;return{id:parseInt(q.id),name:de.name,type:de.type,capacity:de.capacity,gasCapacity:de.gasCapacity,latitude:ge,longitude:he,status:de.status,hit:de.hit,draft:de.draft??!1,hits:Ee}}));v(ee)}catch(M){console.error("Error fetching facilities:",M),F("Failed to load facilities from Firebase.")}finally{A(!1)}},b=async M=>{M.preventDefault(),h(null),A(!0);try{await sL(Cf,n,s)}catch(ee){console.error("Login error:",ee),ee.code==="auth/invalid-credential"?h("Invalid email or password"):ee.code==="auth/user-not-found"?h("No account found with this email"):ee.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{A(!1)}},D=async()=>{try{await uL(Cf),S("/")}catch(M){console.error("Logout error:",M)}},z=async M=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!je)throw new Error("Firebase not initialized");const ee=Fc(cr(je,St.HITS),zc("facilityId","==",M)),q=await hr(ee);for(const ie of q.docs)await xf(ie.ref);await xf(ki(je,St.FACILITIES,M.toString())),x()}catch(ee){console.error("Error deleting facility:",ee),alert("Failed to delete facility")}},R=async(M,ee)=>{var q;ee.preventDefault();try{if(!je)throw new Error("Firebase not initialized");const Ee=(await hr(cr(je,St.HITS))).docs.reduce((he,He)=>{const mt=parseInt(He.id);return mt>he?mt:he},0)+1,de={id:Ee,facilityId:M,date:Z.date,severity:Z.severity,mediaLinks:(q=Z.mediaLinks)==null?void 0:q.filter(he=>he.trim()!==""),expectedRepairTime:Z.expectedRepairTime,notes:Z.notes};await xx(ki(je,St.HITS,Ee.toString()),de);const ge=ki(je,St.FACILITIES,M.toString());await Bc(ge,{hit:!0}),k(null),P({date:new Date().toISOString().split("T")[0],severity:"damaged",mediaLinks:[""],expectedRepairTime:0,notes:""}),x()}catch(ie){console.error("Error adding hit:",ie),alert("Failed to add hit record")}},Me=async(M,ee)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!je)throw new Error("Firebase not initialized");await xf(ki(je,St.HITS,ee.toString()));const q=Fc(cr(je,St.HITS),zc("facilityId","==",M));if((await hr(q)).empty){const ue=ki(je,St.FACILITIES,M.toString());await Bc(ue,{hit:!1})}x()}catch(q){console.error("Error deleting hit:",q),alert("Failed to delete hit record")}},on=M=>{O(M.id),X({...M,mediaLinks:M.mediaLinks||(M.videoLink?[M.videoLink]:[""])})},et=async()=>{var M;if(C)try{if(!je)throw new Error("Firebase not initialized");const ee={date:W.date,severity:W.severity,mediaLinks:(M=W.mediaLinks)==null?void 0:M.filter(ie=>ie.trim()!==""),expectedRepairTime:W.expectedRepairTime,notes:W.notes},q=ki(je,St.HITS,C.toString());await Bc(q,ee),O(null),X({}),x()}catch(ee){console.error("Error updating hit:",ee),alert("Failed to update hit record")}};return t?w.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[w.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),w.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),w.jsx("button",{onClick:D,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),w.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[w.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:""}),w.jsx("span",{children:"Facilities"})]}),w.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:""}),w.jsx("span",{children:"Hit Records"})]})]}),w.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:w.jsx("button",{onClick:()=>S("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" View Map"})})]}),w.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),w.jsxs("p",{style:{color:"#999"},children:["Total: ",_.length," facilities"]})]}),w.jsx("button",{onClick:()=>S("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),T&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),V&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:V}),!T&&!V&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[w.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[w.jsx("thead",{children:w.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Oil Capacity"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),w.jsx("tbody",{children:_.map(M=>{var ee;return w.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[w.jsx("td",{style:{padding:"15px"},children:M.id}),w.jsx("td",{style:{padding:"15px"},children:M.name}),w.jsx("td",{style:{padding:"15px"},children:M.type}),w.jsx("td",{style:{padding:"15px"},children:((ee=M.capacity)==null?void 0:ee.toLocaleString())||0}),w.jsx("td",{style:{padding:"15px"},children:M.gasCapacity?M.gasCapacity.toLocaleString():"-"}),w.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:M.latitude!=null&&M.longitude!=null?`${M.latitude.toFixed(4)}, ${M.longitude.toFixed(4)}`:"N/A"}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:M.hit?"#f44336":"#4CAF50",color:"#fff"},children:M.status})}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:M.draft?"#ff9800":"#4CAF50",color:"#fff"},children:M.draft?"DRAFT":"Published"})}),w.jsxs("td",{style:{padding:"15px"},children:[w.jsx("button",{onClick:()=>S(`/admin/facility/${M.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>z(M.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},M.id)})})]}),_.length===0&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),w.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),w.jsx("button",{onClick:()=>k(B===-1?null:-1),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:B===-1?"Cancel":"+ Add New Hit"})]}),B===-1&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[w.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),w.jsxs("form",{onSubmit:M=>{M.preventDefault();const ee=parseInt(M.target.facilityId.value);R(ee,M)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),w.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[w.jsx("option",{value:"",children:"-- Choose a facility --"}),_.map(M=>w.jsxs("option",{value:M.id,children:[M.name," (",M.type,") ",M.hits&&M.hits.length>0?`- ${M.hits.length} existing hit${M.hits.length>1?"s":""}`:""]},M.id))]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:Z.date,onChange:M=>P({...Z,date:M.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:Z.severity,onChange:M=>P({...Z,severity:M.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),w.jsx("input",{type:"number",value:Z.expectedRepairTime,onChange:M=>P({...Z,expectedRepairTime:Number(M.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(Gt=Z.mediaLinks)==null?void 0:Gt.map((M,ee)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:M,onChange:q=>{const ie=[...Z.mediaLinks||[]];ie[ee]=q.target.value,P({...Z,mediaLinks:ie})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),ee>0&&w.jsx("button",{type:"button",onClick:()=>{var ie;const q=(ie=Z.mediaLinks)==null?void 0:ie.filter((ue,Ee)=>Ee!==ee);P({...Z,mediaLinks:q})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},ee)),w.jsx("button",{type:"button",onClick:()=>P({...Z,mediaLinks:[...Z.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:Z.notes,onChange:M=>P({...Z,notes:M.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Add Hit Record"})})]})]}),T&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),V&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:V}),!T&&!V&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{display:"grid",gap:"20px"},children:_.filter(M=>M.hits&&M.hits.length>0).map(M=>{var ee;return w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[w.jsxs("div",{children:[w.jsx("h2",{style:{margin:0,color:"#dc2626"},children:M.name}),w.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[M.type,"  ",M.hits.length," hit record",M.hits.length!==1?"s":""]})]}),w.jsx("button",{onClick:()=>k(B===M.id?null:M.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:B===M.id?"Cancel":"+ Add Hit"})]}),B===M.id&&w.jsxs("form",{onSubmit:q=>R(M.id,q),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:Z.date,onChange:q=>P({...Z,date:q.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:Z.severity,onChange:q=>P({...Z,severity:q.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),w.jsx("input",{type:"number",value:Z.expectedRepairTime,onChange:q=>P({...Z,expectedRepairTime:Number(q.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(ee=Z.mediaLinks)==null?void 0:ee.map((q,ie)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:q,onChange:ue=>{const Ee=[...Z.mediaLinks||[]];Ee[ie]=ue.target.value,P({...Z,mediaLinks:Ee})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),ie>0&&w.jsx("button",{type:"button",onClick:()=>{var Ee;const ue=(Ee=Z.mediaLinks)==null?void 0:Ee.filter((de,ge)=>ge!==ie);P({...Z,mediaLinks:ue})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},ie)),w.jsx("button",{type:"button",onClick:()=>P({...Z,mediaLinks:[...Z.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:Z.notes,onChange:q=>P({...Z,notes:q.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:" Save Hit Record"})})]}),M.hits&&M.hits.length>0&&w.jsx("div",{style:{display:"grid",gap:"10px"},children:M.hits.map(q=>{var ie;return w.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:C===q.id?"1px solid #2196F3":"1px solid #333"},children:C===q.id?w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px",fontSize:"12px"},children:"Date *"}),w.jsx("input",{type:"date",value:W.date,onChange:ue=>X({...W,date:ue.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px",fontSize:"12px"},children:"Severity *"}),w.jsxs("select",{value:W.severity,onChange:ue=>X({...W,severity:ue.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px",fontSize:"12px"},children:"Repair Time (days)"}),w.jsx("input",{type:"number",value:W.expectedRepairTime||"",onChange:ue=>X({...W,expectedRepairTime:Number(ue.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px",fontSize:"12px"},children:"Media Links (Videos/Photos)"}),(ie=W.mediaLinks)==null?void 0:ie.map((ue,Ee)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:ue,onChange:de=>{const ge=[...W.mediaLinks||[]];ge[Ee]=de.target.value,X({...W,mediaLinks:ge})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),Ee>0&&w.jsx("button",{type:"button",onClick:()=>{var ge;const de=(ge=W.mediaLinks)==null?void 0:ge.filter((he,He)=>He!==Ee);X({...W,mediaLinks:de})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},Ee)),w.jsx("button",{type:"button",onClick:()=>X({...W,mediaLinks:[...W.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px",fontSize:"12px"},children:"Notes"}),w.jsx("textarea",{value:W.notes,onChange:ue=>X({...W,notes:ue.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"10px"},children:[w.jsx("button",{onClick:et,style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:"Save Changes"}),w.jsx("button",{onClick:()=>O(null),style:{padding:"8px 16px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Cancel"})]})]}):w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[w.jsxs("div",{style:{flex:1},children:[w.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),w.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",q.id]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),w.jsx("div",{style:{color:"#fff"},children:new Date(q.date).toLocaleDateString()})]}),q.severity&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),w.jsx("div",{style:{color:"#fff",backgroundColor:q.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:q.severity})]}),q.expectedRepairTime&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),w.jsxs("div",{style:{color:"#FF9800"},children:[q.expectedRepairTime," days"]})]})]}),q.mediaLinks&&q.mediaLinks.length>0&&w.jsxs("div",{style:{marginTop:"10px"},children:[w.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),w.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:q.mediaLinks.map((ue,Ee)=>w.jsxs("a",{href:ue,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[" Link ",Ee+1]},Ee))})]}),!q.mediaLinks&&q.videoLink&&w.jsx("div",{style:{marginTop:"10px"},children:w.jsx("a",{href:q.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:" View Video"})}),q.notes&&w.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[w.jsx("strong",{children:"Notes:"})," ",q.notes]})]}),w.jsxs("div",{style:{display:"flex",gap:"5px"},children:[w.jsx("button",{onClick:()=>on(q),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>Me(M.id,q.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},q.id)})})]},M.id)})}),_.filter(M=>M.hits&&M.hits.length>0).length===0&&w.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[w.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),w.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),w.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[w.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&w.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),w.jsxs("form",{onSubmit:b,children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),w.jsx("input",{type:"email",value:n,onChange:M=>i(M.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{marginBottom:"30px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),w.jsx("input",{type:"password",value:s,onChange:M=>o(M.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),w.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},CN=()=>{const{id:t}=CE(),e=ed(),[n,i]=G.useState(!1),[s,o]=G.useState(null),[l,h]=G.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});G.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var _,v;i(!0);try{if(!je)throw new Error("Firebase not initialized");const T=ki(je,St.FACILITIES,t),A=await Ex(T);if(A.exists()){const V=A.data(),F=((_=V.location)==null?void 0:_.latitude)??V.latitude,B=((v=V.location)==null?void 0:v.longitude)??V.longitude;h({id:parseInt(A.id),name:V.name,type:V.type,capacity:V.capacity,gasCapacity:V.gasCapacity,latitude:F,longitude:B,status:V.status,hit:V.hit,description:V.description||"",draft:V.draft??!1})}else o("Facility not found")}catch(T){console.error("Error fetching facility:",T),o("Failed to load facility")}finally{i(!1)}},p=async(_=!1)=>{i(!0),o(null);try{if(!je)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),i(!1);return}let v=t;(!t||t==="new")&&(v=((await hr(cr(je,St.FACILITIES))).docs.reduce((B,k)=>{const C=parseInt(k.id);return C>B?C:B},0)+1).toString());const T={id:parseInt(v),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},status:l.status,hit:l.hit??!1,draft:_?!1:l.draft??!0};l.gasCapacity&&(T.gasCapacity=l.gasCapacity),l.description&&(T.description=l.description);const A=ki(je,St.FACILITIES,v);t&&t!=="new"?await Bc(A,T):await xx(A,T),alert(_?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(v){console.error("Error saving facility:",v),o("Failed to save facility")}finally{i(!1)}};return n&&t&&t!=="new"?w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:w.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[w.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),s&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:s}),l.draft&&w.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:" This facility is in DRAFT mode and is not visible on the public map"}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),w.jsx("input",{type:"text",value:l.name,onChange:_=>h({...l,name:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),w.jsxs("select",{value:l.type,onChange:_=>h({...l,type:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"refinery",children:"Refinery"}),w.jsx("option",{value:"extraction",children:"Extraction"}),w.jsx("option",{value:"storage",children:"Storage"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),w.jsxs("select",{value:l.status,onChange:_=>h({...l,status:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"operational",children:"Operational"}),w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"offline",children:"Offline"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),w.jsx("input",{type:"number",value:l.capacity,onChange:_=>h({...l,capacity:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m/year)"}),w.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:_=>h({...l,gasCapacity:_.target.value?Number(_.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:_=>h({...l,latitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:_=>h({...l,longitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),w.jsx("textarea",{value:l.description,onChange:_=>h({...l,description:_.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),w.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[w.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),w.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})};function r1(t,e){const n=G.useRef(e);G.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const PN=1;function AN(t){return Object.freeze({__version:PN,map:t})}function s1(t,e){return Object.freeze({...t,...e})}const o1=G.createContext(null),a1=o1.Provider;function zg(){const t=G.useContext(o1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function l1(t){function e(n,i){const{instance:s,context:o}=t(n).current;return G.useImperativeHandle(i,()=>s),n.children==null?null:Cl.createElement(a1,{value:o},n.children)}return G.forwardRef(e)}function kN(t){function e(n,i){const[s,o]=G.useState(!1),{instance:l}=t(n,o).current;G.useImperativeHandle(i,()=>l),G.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?gE.createPortal(n.children,h):null}return G.forwardRef(e)}function RN(t){function e(n,i){const{instance:s}=t(n).current;return G.useImperativeHandle(i,()=>s),null}return G.forwardRef(e)}function jg(t,e){const n=G.useRef();G.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function xd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function bN(t,e){return function(i,s){const o=zg(),l=t(xd(i,o),o);return r1(o.map,i.attribution),jg(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Zp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(W1,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,E,N;return N=function(){f=!1,g&&(E.apply(c,g),g=!1)},E=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(N,a),f=!0)},E}function _(r,a,c){var f=a[1],g=a[0],E=f-g;return r===f&&c?r:((r-g)%E+E)%E+g}function v(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function A(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function V(r){return A(r).split(/\s+/)}function F(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function B(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function C(r,a){return r.replace(k,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var P=0;function S(r){var a=+new Date,c=Math.max(0,16-(a-P));return P=a+c,window.setTimeout(r,c)}var x=window.requestAnimationFrame||Z("RequestAnimationFrame")||S,b=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function D(r,a,c){if(c&&x===S)r.call(a);else return x.call(window,l(r,a))}function z(r){r&&b.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:v,formatNum:T,trim:A,splitWords:V,setOptions:F,getParamString:B,template:C,isArray:O,indexOf:W,emptyImageUrl:X,requestFn:x,cancelFn:b,requestAnimFrame:D,cancelAnimFrame:z};function Me(){}Me.extend=function(r){var a=function(){F(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(on(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,N=f._initHooks.length;E<N;E++)f._initHooks[E].call(this)}},a},Me.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Me.mergeOptions=function(r){return s(this.prototype.options,r),this},Me.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function on(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var et={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=V(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=V(r);for(var g=arguments.length===1,E=0,N=r.length;E<N;E++)g?this._off(r[E]):this._off(r[E],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,E;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,E=f.length;g<E;g++)f[g].fn=v;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var N=this._listens(r,a,c);if(N!==!1){var U=f[N];this._firingCount&&(U.fn=v,this._events[r]=f=f.slice()),f.splice(N,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,N=g.length;E<N;E++){var U=g[E],$=U.fn;U.once&&this.off(r,$,U.ctx),$.call(U.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var E=this._events&&this._events[r];if(E&&E.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var N in this._eventParents)if(this._eventParents[N].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,E=f.length;g<E;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=V(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};et.addEventListener=et.on,et.removeEventListener=et.clearAllEventListeners=et.off,et.addOneTimeEventListener=et.once,et.fireEvent=et.fire,et.hasEventListeners=et.listens;var Gt=Me.extend(et);function M(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ee=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(r){return this.clone()._add(q(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(q(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new M(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new M(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(r){r=q(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=q(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=q(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function q(r,a,c){return r instanceof M?r:O(r)?new M(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new M(r.x,r.y):new M(r,a,c)}function ie(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ie.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof M||typeof r[0]=="number"||"x"in r)a=c=q(r);else if(r=ue(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof M?r=q(r):r=ue(r),r instanceof ie?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ue(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>=a.x&&f.x<=c.x,N=g.y>=a.y&&f.y<=c.y;return E&&N},overlaps:function(r){r=ue(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>a.x&&f.x<c.x,N=g.y>a.y&&f.y<c.y;return E&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ue(q(a.x-f,a.y-g),q(c.x+f,c.y+g))},equals:function(r){return r?(r=ue(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ue(r,a){return!r||r instanceof ie?r:new ie(r,a)}function Ee(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ee.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof ge)f=r,g=r;else if(r instanceof Ee){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(he(r)||de(r)):this;return!a&&!c?(this._southWest=new ge(f.lat,f.lng),this._northEast=new ge(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ee(new ge(a.lat-f,a.lng-g),new ge(c.lat+f,c.lng+g))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ge||"lat"in r?r=he(r):r=de(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ee?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=de(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>=a.lat&&f.lat<=c.lat,N=g.lng>=a.lng&&f.lng<=c.lng;return E&&N},overlaps:function(r){r=de(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>a.lat&&f.lat<c.lat,N=g.lng>a.lng&&f.lng<c.lng;return E&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=de(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(r,a){return r instanceof Ee?r:new Ee(r,a)}function ge(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ge.prototype={equals:function(r,a){if(!r)return!1;r=he(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return mt.distance(this,he(r))},wrap:function(){return mt.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return de([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function he(r,a,c){return r instanceof ge?r:O(r)&&typeof r[0]!="object"?r.length===3?new ge(r[0],r[1],r[2]):r.length===2?new ge(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ge(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ge(r,a,c)}var He={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ie(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?_(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?_(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ge(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var E=r.getSouthWest(),N=r.getNorthEast(),U=new ge(E.lat-f,E.lng-g),$=new ge(N.lat-f,N.lng-g);return new Ee(U,$)}},mt=s({},He,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,E=Math.sin((a.lat-r.lat)*c/2),N=Math.sin((a.lng-r.lng)*c/2),U=E*E+Math.cos(f)*Math.cos(g)*N*N,$=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*$}}),qi=6378137,ya={R:qi,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new M(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new ge((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=qi*Math.PI;return new ie([-r,-r],[r,r])}()};function va(r,a,c,f){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}va.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new M((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Gi(r,a,c,f){return new va(r,a,c,f)}var Zr=s({},mt,{code:"EPSG:3857",projection:ya,transformation:function(){var r=.5/(Math.PI*ya.R);return Gi(r,.5,-r,.5)}()}),yu=s({},Zr,{code:"EPSG:900913"});function vu(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Fs(r,a){var c="",f,g,E,N,U,$;for(f=0,E=r.length;f<E;f++){for(U=r[f],g=0,N=U.length;g<N;g++)$=U[g],c+=(g?"L":"M")+$.x+" "+$.y;c+=a?le.svg?"z":"x":""}return c||"M0 0"}var Kr=document.documentElement.style,Qr="ActiveXObject"in window,gt=Qr&&!document.addEventListener,_t="msLaunchUri"in navigator&&!("documentMode"in document),Zi=Zt("webkit"),wu=Zt("android"),wa=Zt("android 2")||Zt("android 3"),Cd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Yr=wu&&Zt("Google")&&Cd<537&&!("AudioNode"in window),zs=!!window.opera,Ea=!_t&&Zt("chrome"),js=Zt("gecko")&&!Zi&&!zs&&!Qr,Pd=!Ea&&Zt("safari"),Eu=Zt("phantom"),Ta="OTransition"in Kr,Tu=navigator.platform.indexOf("Win")===0,Ki=Qr&&"transition"in Kr,Xr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wa,Bs="MozPerspective"in Kr,mi=!window.L_DISABLE_3D&&(Ki||Xr||Bs)&&!Ta&&!Eu,Qi=typeof orientation<"u"||Zt("mobile"),Us=Qi&&Zi,xu=Qi&&Xr,Yi=!window.PointerEvent&&window.MSPointerEvent,xa=!!(window.PointerEvent||Yi),yt="ontouchstart"in window||!!window.TouchEvent,Iu=!window.L_NO_TOUCH&&(yt||xa),Jr=Qi&&zs,es=Qi&&js,Ad=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,kd=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return r}(),Xi=function(){return!!document.createElement("canvas").getContext}(),Ia=!!(document.createElementNS&&vu("svg").createSVGRect),Rd=!!Ia&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hs=!Ia&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Su=navigator.platform.indexOf("Mac")===0,Cu=navigator.platform.indexOf("Linux")===0;function Zt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var le={ie:Qr,ielt9:gt,edge:_t,webkit:Zi,android:wu,android23:wa,androidStock:Yr,opera:zs,chrome:Ea,gecko:js,safari:Pd,phantom:Eu,opera12:Ta,win:Tu,ie3d:Ki,webkit3d:Xr,gecko3d:Bs,any3d:mi,mobile:Qi,mobileWebkit:Us,mobileWebkit3d:xu,msPointer:Yi,pointer:xa,touch:Iu,touchNative:yt,mobileOpera:Jr,mobileGecko:es,retina:Ad,passiveEvents:kd,canvas:Xi,svg:Ia,vml:Hs,inlineSvg:Rd,mac:Su,linux:Cu},Pu=le.msPointer?"MSPointerDown":"pointerdown",Rn=le.msPointer?"MSPointerMove":"pointermove",Sa=le.msPointer?"MSPointerUp":"pointerup",Ca=le.msPointer?"MSPointerCancel":"pointercancel",ts={touchstart:Pu,touchmove:Rn,touchend:Sa,touchcancel:Ca},Ws={touchstart:Pa,touchmove:gn,touchend:gn,touchcancel:gn},gi={},Au=!1;function ku(r,a,c){return a==="touchstart"&&ns(),Ws[a]?(c=Ws[a].bind(this,c),r.addEventListener(ts[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function bd(r,a,c){if(!ts[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(ts[a],c,!1)}function $s(r){gi[r.pointerId]=r}function Ru(r){gi[r.pointerId]&&(gi[r.pointerId]=r)}function qs(r){delete gi[r.pointerId]}function ns(){Au||(document.addEventListener(Pu,$s,!0),document.addEventListener(Rn,Ru,!0),document.addEventListener(Sa,qs,!0),document.addEventListener(Ca,qs,!0),Au=!0)}function gn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in gi)a.touches.push(gi[c]);a.changedTouches=[a],r(a)}}function Pa(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&st(a),gn(r,a)}function Ld(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var bu=200;function Lu(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var N=La(E);if(!(N.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!N.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var U=Date.now();U-c<=bu?(f++,f===2&&a(Ld(E))):f=1,c=U}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Nu(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var is=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_i=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Aa=_i==="webkitTransition"||_i==="OTransition"?_i+"End":"transitionend";function ka(r){return typeof r=="string"?document.getElementById(r):r}function Ji(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Ae(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function be(r){var a=r.parentNode;a&&a.removeChild(r)}function jt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function _n(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function yn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function rs(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=Gn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function oe(r,a){if(r.classList!==void 0)for(var c=V(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!rs(r,a)){var E=Gn(r);yi(r,(E?E+" ":"")+a)}}function ze(r,a){r.classList!==void 0?r.classList.remove(a):yi(r,A((" "+Gn(r)+" ").replace(" "+a+" "," ")))}function yi(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function Gn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Kt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ou(r,a)}function Ou(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function Gs(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function vi(r,a,c){var f=a||new M(0,0);r.style[is]=(le.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(r,a){r._leaflet_pos=a,le.any3d?vi(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function wi(r){return r._leaflet_pos||new M(0,0)}var bn,an,Zs;if("onselectstart"in document)bn=function(){_e(window,"selectstart",st)},an=function(){Ve(window,"selectstart",st)};else{var er=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(er){var r=document.documentElement.style;Zs=r[er],r[er]="none"}},an=function(){er&&(document.documentElement.style[er]=Zs,Zs=void 0)}}function Ks(){_e(window,"dragstart",st)}function Qs(){Ve(window,"dragstart",st)}var ss,Zn;function Ra(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ys(),ss=r,Zn=r.style.outlineStyle,r.style.outlineStyle="none",_e(window,"keydown",Ys))}function Ys(){ss&&(ss.style.outlineStyle=Zn,ss=void 0,Zn=void 0,Ve(window,"keydown",Ys))}function Du(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function vn(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Nd={__proto__:null,TRANSFORM:is,TRANSITION:_i,TRANSITION_END:Aa,get:ka,getStyle:Ji,create:Ae,remove:be,empty:jt,toFront:_n,toBack:yn,hasClass:rs,addClass:oe,removeClass:ze,setClass:yi,getClass:Gn,setOpacity:Kt,testProp:Gs,setTransform:vi,setPosition:Xe,getPosition:wi,get disableTextSelection(){return bn},get enableTextSelection(){return an},disableImageDrag:Ks,enableImageDrag:Qs,preventOutline:Ra,restoreOutline:Ys,getSizedParentNode:Du,getScale:vn};function _e(r,a,c,f){if(a&&typeof a=="object")for(var g in a)Xs(r,g,a[g],c);else{a=V(a);for(var E=0,N=a.length;E<N;E++)Xs(r,a[E],c,f)}return this}var Bt="_leaflet_events";function Ve(r,a,c,f){if(arguments.length===1)tr(r),delete r[Bt];else if(a&&typeof a=="object")for(var g in a)os(r,g,a[g],c);else if(a=V(a),arguments.length===2)tr(r,function(U){return W(a,U)!==-1});else for(var E=0,N=a.length;E<N;E++)os(r,a[E],c,f);return this}function tr(r,a){for(var c in r[Bt]){var f=c.split(/\d/)[0];(!a||a(f))&&os(r,f,null,null,c)}}var Ei={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[Bt]&&r[Bt][g])return this;var E=function(U){return c.call(f||r,U||window.event)},N=E;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?E=ku(r,a,E):le.touch&&a==="dblclick"?E=Lu(r,E):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Ei[a]||a,E,le.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(U){U=U||window.event,Oa(r,U)&&N(U)},r.addEventListener(Ei[a],E,!1)):r.addEventListener(a,N,!1):r.attachEvent("on"+a,E),r[Bt]=r[Bt]||{},r[Bt][g]=E}function os(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var E=r[Bt]&&r[Bt][g];if(!E)return this;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?bd(r,a,E):le.touch&&a==="dblclick"?Nu(r,E):"removeEventListener"in r?r.removeEventListener(Ei[a]||a,E,!1):r.detachEvent("on"+a,E),r[Bt][g]=null}function Ne(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ba(r){return Xs(r,"wheel",Ne),this}function as(r){return _e(r,"mousedown touchstart dblclick contextmenu",Ne),r._leaflet_disable_click=!0,this}function st(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Kn(r){return st(r),Ne(r),this}function La(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function ls(r,a){if(!a)return new M(r.clientX,r.clientY);var c=vn(a),f=c.boundingClientRect;return new M((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Qn=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Na(r){return le.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Qn:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Oa(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var us={__proto__:null,on:_e,off:Ve,stopPropagation:Ne,disableScrollPropagation:ba,disableClickPropagation:as,preventDefault:st,stop:Kn,getPropagationPath:La,getMousePosition:ls,getWheelDelta:Na,isExternalTarget:Oa,addListener:_e,removeListener:Ve},Da=Gt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=wi(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Te=Gt.extend({options:{crs:Zr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=F(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(he(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_i&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,Aa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(he(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),E=r instanceof M?r:this.latLngToContainerPoint(r),N=E.subtract(g).multiplyBy(1-1/f),U=this.containerPointToLatLng(g.add(N));return this.setView(U,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():de(r);var c=q(a.paddingTopLeft||a.padding||[0,0]),f=q(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var E=f.subtract(c).divideBy(2),N=this.project(r.getSouthWest(),g),U=this.project(r.getNorthEast(),g),$=this.unproject(N.add(U).divideBy(2).add(E),g);return{center:$,zoom:g}},fitBounds:function(r,a){if(r=de(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=q(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!le.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),E=this.getSize(),N=this._zoom;r=he(r),a=a===void 0?N:a;var U=Math.max(E.x,E.y),$=U*this.getZoomScale(N,a),Y=g.distanceTo(f)||1,re=1.42,fe=re*re;function xe(ot){var Yu=ot?-1:1,z1=ot?$:U,j1=$*$-U*U+Yu*fe*fe*Y*Y,B1=2*z1*fe*Y,Fd=j1/B1,l_=Math.sqrt(Fd*Fd+1)-Fd,U1=l_<1e-9?-18:Math.log(l_);return U1}function Ut(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function vt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function Tn(ot){return Ut(ot)/vt(ot)}var Yt=xe(0);function ho(ot){return U*(vt(Yt)/vt(Yt+re*ot))}function D1(ot){return U*(vt(Yt)*Tn(Yt+re*ot)-Ut(Yt))/fe}function M1(ot){return 1-Math.pow(1-ot,1.5)}var V1=Date.now(),o_=(xe(1)-Yt)/re,F1=c.duration?1e3*c.duration:1e3*o_*.8;function a_(){var ot=(Date.now()-V1)/F1,Yu=M1(ot)*o_;ot<=1?(this._flyToFrame=D(a_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(D1(Yu)/Y)),N),this.getScaleZoom(U/ho(Yu),N),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),a_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=de(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,de(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=q(a.paddingTopLeft||a.padding||[0,0]),f=q(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(r),N=this.getPixelBounds(),U=ue([N.min.add(c),N.max.subtract(f)]),$=U.getSize();if(!U.contains(E)){this._enforcingBounds=!0;var Y=E.subtract(U.getCenter()),re=U.extend(E).getSize().subtract($);g.x+=Y.x<0?-re.x:re.x,g.y+=Y.y<0?-re.y:re.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),E=f.subtract(g);return!E.x&&!E.y?this:(r.animate&&r.pan?this.panBy(E):(r.pan&&this._rawPanBy(E),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ge(a,c),g=f.toBounds(r.coords.accuracy*2),E=this._locateOptions;if(E.setView){var N=this.getBoundsZoom(g);this.setView(f,E.maxZoom?Math.min(N,E.maxZoom):N)}var U={latlng:f,bounds:g,timestamp:r.timestamp};for(var $ in r.coords)typeof r.coords[$]=="number"&&(U[$]=r.coords[$]);this.fire("locationfound",U)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)be(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Ae("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ee(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=de(r),c=q(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),N=r.getNorthWest(),U=r.getSouthEast(),$=this.getSize().subtract(c),Y=ue(this.project(U,f),this.project(N,f)).getSize(),re=le.any3d?this.options.zoomSnap:1,fe=$.x/Y.x,xe=$.y/Y.y,Ut=a?Math.max(fe,xe):Math.min(fe,xe);return f=this.getScaleZoom(Ut,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(g,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ie(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(he(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(q(r),a)},layerPointToLatLng:function(r){var a=q(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(he(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(he(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(de(r))},distance:function(r,a){return this.options.crs.distance(he(r),he(a))},containerPointToLayerPoint:function(r){return q(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return q(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(q(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(r)))},mouseEventToContainerPoint:function(r){return ls(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ka(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,oe(r,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Ji(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(r.markerPane,"leaflet-zoom-hide"),oe(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Xe(this._mapPane,new M(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Ve:_e;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",E=r.target||r.srcElement,N=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){N=!0;break}if(f&&f.listens(a,!0)&&(g&&!Oa(E,r)||(c.push(f),g))||E===this._container)break;E=E.parentNode}return!c.length&&!N&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&Ra(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var E=[],N=0;N<c.length;N++)c[N].listens(a,!0)&&E.push(c[N]);g=E.concat(g)}if(g.length){a==="contextmenu"&&st(r);var U=g[0],$={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Y=U.getLatLng&&(!U._radius||U._radius<=10);$.containerPoint=Y?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(r),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Y?U.getLatLng():this.layerPointToLatLng($.layerPoint)}for(N=0;N<g.length;N++)if(g[N].fire(a,$,!0),$.originalEvent._stopped||g[N].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return wi(this._mapPane)||new M(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ue([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),E=new ie(f.subtract(g),f.add(g)),N=this._getBoundsOffset(E,c,a);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?r:this.unproject(f.add(N),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ie(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ue(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),E=f.max.subtract(r.max),N=this._rebound(g.x,-E.x),U=this._rebound(g.y,-E.y);return new M(N,U)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=le.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=is,f=this._proxy.style[c];vi(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();vi(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(D(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(r,a){return new Te(r,a)}var Qt=Me.extend({options:{position:"topright"},initialize:function(r){F(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return oe(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Yn=function(r){return new Qt(r)};Te.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ae("div",a+"control-container",this._container);function f(g,E){var N=a+g+" "+a+E;r[g+E]=Ae("div",N,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)be(this._controlCorners[r]);be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){F(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Qt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Ae("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),as(a),ba(a);var f=this._section=Ae("section",r+"-list");c&&(this._map.on("click",this.collapse,this),_e(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ae("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),_e(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){st(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ae("div",r+"-base",f),this._separator=Ae("div",r+"-separator",f),this._overlaysList=Ae("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;jt(this._baseLayersList),jt(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),_e(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(g);var N=r.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var E=r.length-1;E>=0;E--)a=r[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,_e(r,"click",st),this.expand();var a=this;setTimeout(function(){Ve(r,"click",st),a._preventClick=!1})}}),Vu=function(r,a,c){return new Mu(r,a,c)},Ti=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Ae("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var E=Ae("a",c,f);return E.innerHTML=r,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),as(E),_e(E,"click",Kn),_e(E,"click",g,this),_e(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";ze(this._zoomInButton,a),ze(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(oe(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(oe(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ti,this.addControl(this.zoomControl))});var Fu=function(r){return new Ti(r)},Ma=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Ae("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Ae("div",a,c)),r.imperial&&(this._iScale=Ae("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Va=function(r){return new Ma(r)},Fa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eo=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Fa+" ":"")+"Leaflet</a>"},initialize:function(r){F(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),as(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new eo().addTo(this)});var to=function(r){return new eo(r)};Qt.Layers=Mu,Qt.Zoom=Ti,Qt.Scale=Ma,Qt.Attribution=eo,Yn.layers=Vu,Yn.zoom=Fu,Yn.scale=Va,Yn.attribution=to;var ln=Me.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ln.addTo=function(r,a){return r.addHandler(a,this),this};var zu={Events:et},Xn=le.touch?"touchstart mousedown":"mousedown",Ln=Gt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){F(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(_e(this._dragStartTarget,Xn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ln._dragging===this&&this.finishDrag(!0),Ve(this._dragStartTarget,Xn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!rs(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Ln._dragging===this&&this.finishDrag();return}if(!(Ln._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Ln._dragging=this,this._preventOutline&&Ra(this._element),Ks(),bn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Du(this._element);this._startPoint=new M(a.clientX,a.clientY),this._startPos=wi(this._element),this._parentScale=vn(c);var f=r.type==="mousedown";_e(document,f?"mousemove":"touchmove",this._onMove,this),_e(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new M(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,st(r),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ve(document,"mousemove touchmove",this._onMove,this),Ve(document,"mouseup touchend touchcancel",this._onUp,this),Qs(),an();var a=this._moved&&this._moving;this._moving=!1,Ln._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function za(r,a,c){var f,g=[1,4,2,8],E,N,U,$,Y,re,fe,xe;for(E=0,re=r.length;E<re;E++)r[E]._code=H(r[E],a);for(U=0;U<4;U++){for(fe=g[U],f=[],E=0,re=r.length,N=re-1;E<re;N=E++)$=r[E],Y=r[N],$._code&fe?Y._code&fe||(xe=j(Y,$,fe,a,c),xe._code=H(xe,a),f.push(xe)):(Y._code&fe&&(xe=j(Y,$,fe,a,c),xe._code=H(xe,a),f.push(xe)),f.push($));r=f}return r}function ja(r,a){var c,f,g,E,N,U,$,Y,re;if(!r||r.length===0)throw new Error("latlngs not passed");Le(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var fe=he([0,0]),xe=de(r),Ut=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());Ut<1700&&(fe=no(r));var vt=r.length,Tn=[];for(c=0;c<vt;c++){var Yt=he(r[c]);Tn.push(a.project(he([Yt.lat-fe.lat,Yt.lng-fe.lng])))}for(U=$=Y=0,c=0,f=vt-1;c<vt;f=c++)g=Tn[c],E=Tn[f],N=g.y*E.x-E.y*g.x,$+=(g.x+E.x)*N,Y+=(g.y+E.y)*N,U+=N*3;U===0?re=Tn[0]:re=[$/U,Y/U];var ho=a.unproject(q(re));return he([ho.lat+fe.lat,ho.lng+fe.lng])}function no(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var E=he(r[g]);a+=E.lat,c+=E.lng,f++}return he([a/f,c/f])}var io={__proto__:null,clipPolygon:za,polygonCenter:ja,centroid:no};function bt(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=m(r,c),r=nr(r,c),r}function Ba(r,a,c){return Math.sqrt(ye(r,a,c,!0))}function ju(r,a,c){return ye(r,a,c)}function nr(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var E,N=[];for(E=0;E<c;E++)g[E]&&N.push(r[E]);return N}function u(r,a,c,f,g){var E=0,N,U,$;for(U=f+1;U<=g-1;U++)$=ye(r[U],r[f],r[g],!0),$>E&&(N=U,E=$);E>c&&(a[N]=1,u(r,a,c,f,N),u(r,a,c,N,g))}function m(r,a){for(var c=[r[0]],f=1,g=0,E=r.length;f<E;f++)te(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<E-1&&c.push(r[E-1]),c}var y;function I(r,a,c,f,g){var E=f?y:H(r,c),N=H(a,c),U,$,Y;for(y=N;;){if(!(E|N))return[r,a];if(E&N)return!1;U=E||N,$=j(r,a,U,c,g),Y=H($,c),U===E?(r=$,E=Y):(a=$,N=Y)}}function j(r,a,c,f,g){var E=a.x-r.x,N=a.y-r.y,U=f.min,$=f.max,Y,re;return c&8?(Y=r.x+E*($.y-r.y)/N,re=$.y):c&4?(Y=r.x+E*(U.y-r.y)/N,re=U.y):c&2?(Y=$.x,re=r.y+N*($.x-r.x)/E):c&1&&(Y=U.x,re=r.y+N*(U.x-r.x)/E),new M(Y,re,g)}function H(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function te(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function ye(r,a,c,f){var g=a.x,E=a.y,N=c.x-g,U=c.y-E,$=N*N+U*U,Y;return $>0&&(Y=((r.x-g)*N+(r.y-E)*U)/$,Y>1?(g=c.x,E=c.y):Y>0&&(g+=N*Y,E+=U*Y)),N=r.x-g,U=r.y-E,f?N*N+U*U:new M(g,E)}function Le(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Oe(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Le(r)}function tt(r,a){var c,f,g,E,N,U,$,Y;if(!r||r.length===0)throw new Error("latlngs not passed");Le(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var re=he([0,0]),fe=de(r),xe=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());xe<1700&&(re=no(r));var Ut=r.length,vt=[];for(c=0;c<Ut;c++){var Tn=he(r[c]);vt.push(a.project(he([Tn.lat-re.lat,Tn.lng-re.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=vt[c].distanceTo(vt[c+1])/2;if(f===0)Y=vt[0];else for(c=0,E=0;c<Ut-1;c++)if(N=vt[c],U=vt[c+1],g=N.distanceTo(U),E+=g,E>f){$=(E-f)/g,Y=[U.x-$*(U.x-N.x),U.y-$*(U.y-N.y)];break}var Yt=a.unproject(q(Y));return he([Yt.lat+re.lat,Yt.lng+re.lng])}var wn={__proto__:null,simplify:bt,pointToSegmentDistance:Ba,closestPointOnSegment:ju,clipSegment:I,_getEdgeIntersection:j,_getBitCode:H,_sqClosestPointOnSegment:ye,isFlat:Le,_flat:Oe,polylineCenter:tt},Nn={project:function(r){return new M(r.lng,r.lat)},unproject:function(r){return new ge(r.y,r.x)},bounds:new ie([-180,-90],[180,90])},En={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,E=Math.sqrt(1-g*g),N=E*Math.sin(f),U=Math.tan(Math.PI/4-f/2)/Math.pow((1-N)/(1+N),E/2);return f=-c*Math.log(Math.max(U,1e-10)),new M(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),E=Math.exp(-r.y/c),N=Math.PI/2-2*Math.atan(E),U=0,$=.1,Y;U<15&&Math.abs($)>1e-7;U++)Y=g*Math.sin(N),Y=Math.pow((1-Y)/(1+Y),g/2),$=Math.PI/2-2*Math.atan(E*Y)-N,N+=$;return new ge(N*a,r.x*a/c)}},Jn={__proto__:null,LonLat:Nn,Mercator:En,SphericalMercator:ya},ro=s({},mt,{code:"EPSG:3395",projection:En,transformation:function(){var r=.5/(Math.PI*En.R);return Gi(r,.5,-r,.5)}()}),so=s({},mt,{code:"EPSG:4326",projection:Nn,transformation:Gi(1/180,1,-1/180,.5)}),f1=s({},He,{projection:Nn,transformation:Gi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});He.Earth=mt,He.EPSG3395=ro,He.EPSG3857=Zr,He.EPSG900913=yu,He.EPSG4326=so,He.Simple=f1;var On=Gt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oo=On.extend({initialize:function(r,a){F(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),p1=function(r,a){return new oo(r,a)},xi=oo.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),oo.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),oo.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ee;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),m1=function(r,a){return new xi(r,a)},ao=Me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){F(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=q(f),E=q(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),E&&(r.style.marginLeft=-E.x+"px",r.style.marginTop=-E.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return le.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function g1(r){return new ao(r)}var Ua=ao.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ua.imagePath!="string"&&(Ua.imagePath=this._detectIconPath()),(this.options.imagePath||Ua.imagePath)+ao.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var E=f.exec(c);return E&&E[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ae("div","leaflet-default-icon-path",document.body),a=Ji(r,"background-image")||Ji(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Bg=ln.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Ln(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=wi(a._icon),N=c.getPixelBounds(),U=c.getPixelOrigin(),$=ue(N.min._subtract(U).add(g),N.max._subtract(U).subtract(g));if(!$.contains(E)){var Y=q((Math.max($.max.x,E.x)-$.max.x)/(N.max.x-$.max.x)-(Math.min($.min.x,E.x)-$.min.x)/(N.min.x-$.min.x),(Math.max($.max.y,E.y)-$.max.y)/(N.max.y-$.max.y)-(Math.min($.min.y,E.y)-$.min.y)/(N.min.y-$.min.y)).multiplyBy(f);c.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Xe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=D(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=wi(a._icon),g=a._map.layerPointToLatLng(f);c&&Xe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Bu=On.extend({options:{icon:new Ua,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){F(this,a),this._latlng=he(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=he(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),oe(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(oe(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(this._icon,"focus",this._panOnFocus,this),be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&be(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Kt(this._icon,r),this._shadow&&Kt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?q(a.iconSize):q(0,0),f=a.iconAnchor?q(a.iconAnchor):q(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _1(r,a){return new Bu(r,a)}var ir=On.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return F(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Uu=ir.extend({options:{fill:!0,radius:10},initialize:function(r,a){F(this,a),this._latlng=he(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=he(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return ir.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ie(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function y1(r,a){return new Uu(r,a)}var Od=Uu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),F(this,a),this._latlng=he(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ir.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===mt.distance){var g=Math.PI/180,E=this._mRadius/mt.R/g,N=c.project([a+E,r]),U=c.project([a-E,r]),$=N.add(U).divideBy(2),Y=c.unproject($).lat,re=Math.acos((Math.cos(E*g)-Math.sin(a*g)*Math.sin(Y*g))/(Math.cos(a*g)*Math.cos(Y*g)))/g;(isNaN(re)||re===0)&&(re=E/Math.cos(Math.PI/180*a)),this._point=$.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:$.x-c.project([Y,r-re]).x,this._radiusY=$.y-N.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function v1(r,a,c){return new Od(r,a,c)}var Ii=ir.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){F(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=ye,g,E,N=0,U=this._parts.length;N<U;N++)for(var $=this._parts[N],Y=1,re=$.length;Y<re;Y++){g=$[Y-1],E=$[Y];var fe=f(r,g,E,!0);fe<a&&(a=fe,c=f(r,g,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=he(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ee,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=Le(r),f=0,g=r.length;f<g;f++)c?(a[f]=he(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new M(r,r);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ge,g=r.length,E,N;if(f){for(N=[],E=0;E<g;E++)N[E]=this._map.latLngToLayerPoint(r[E]),c.extend(N[E]);a.push(N)}else for(E=0;E<g;E++)this._projectLatlngs(r[E],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,E,N,U,$;for(c=0,g=0,E=this._rings.length;c<E;c++)for($=this._rings[c],f=0,N=$.length;f<N-1;f++)U=I($[f],$[f+1],r,f,!0),U&&(a[g]=a[g]||[],a[g].push(U[0]),(U[1]!==$[f+1]||f===N-2)&&(a[g].push(U[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=bt(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,E,N,U,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,E=this._parts.length;c<E;c++)for(U=this._parts[c],f=0,N=U.length,g=N-1;f<N;g=f++)if(!(!a&&f===0)&&Ba(r,U[g],U[f])<=$)return!0;return!1}});function w1(r,a){return new Ii(r,a)}Ii._flat=Oe;var lo=Ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ja(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Ii.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ge&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Ii.prototype._setLatLngs.call(this,r),Le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new M(a,a);if(r=new ie(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,E;f<g;f++)E=za(this._rings[f],r,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,E,N,U,$,Y;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(E=0,$=this._parts.length;E<$;E++)for(c=this._parts[E],N=0,Y=c.length,U=Y-1;N<Y;U=N++)f=c[N],g=c[U],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Ii.prototype._containsPoint.call(this,r,!0)}});function E1(r,a){return new lo(r,a)}var Si=xi.extend({initialize:function(r,a){F(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(r))return this;var N=Hu(r,E);return N?(N.feature=qu(r),N.defaultOptions=N.options,this.resetStyle(N),E.onEachFeature&&E.onEachFeature(r,N),this.addLayer(N)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Hu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],E=a&&a.pointToLayer,N=a&&a.coordsToLatLng||Dd,U,$,Y,re;if(!f&&!c)return null;switch(c.type){case"Point":return U=N(f),Ug(E,r,U,a);case"MultiPoint":for(Y=0,re=f.length;Y<re;Y++)U=N(f[Y]),g.push(Ug(E,r,U,a));return new xi(g);case"LineString":case"MultiLineString":return $=Wu(f,c.type==="LineString"?0:1,N),new Ii($,a);case"Polygon":case"MultiPolygon":return $=Wu(f,c.type==="Polygon"?1:2,N),new lo($,a);case"GeometryCollection":for(Y=0,re=c.geometries.length;Y<re;Y++){var fe=Hu({geometry:c.geometries[Y],type:"Feature",properties:r.properties},a);fe&&g.push(fe)}return new xi(g);case"FeatureCollection":for(Y=0,re=c.features.length;Y<re;Y++){var xe=Hu(c.features[Y],a);xe&&g.push(xe)}return new xi(g);default:throw new Error("Invalid GeoJSON object.")}}function Ug(r,a,c,f){return r?r(a,c):new Bu(c,f&&f.markersInheritOptions&&f)}function Dd(r){return new ge(r[1],r[0],r[2])}function Wu(r,a,c){for(var f=[],g=0,E=r.length,N;g<E;g++)N=a?Wu(r[g],a-1,c):(c||Dd)(r[g]),f.push(N);return f}function Md(r,a){return r=he(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function $u(r,a,c,f){for(var g=[],E=0,N=r.length;E<N;E++)g.push(a?$u(r[E],Le(r[E])?0:a-1,c,f):Md(r[E],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function uo(r,a){return r.feature?s({},r.feature,{geometry:a}):qu(a)}function qu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Vd={toGeoJSON:function(r){return uo(this,{type:"Point",coordinates:Md(this.getLatLng(),r)})}};Bu.include(Vd),Od.include(Vd),Uu.include(Vd),Ii.include({toGeoJSON:function(r){var a=!Le(this._latlngs),c=$u(this._latlngs,a?1:0,!1,r);return uo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),lo.include({toGeoJSON:function(r){var a=!Le(this._latlngs),c=a&&!Le(this._latlngs[0]),f=$u(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),uo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),oo.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(r);if(c)f.push(E.geometry);else{var N=qu(E);N.type==="FeatureCollection"?f.push.apply(f,N.features):f.push(N)}}}),c?uo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Hg(r,a){return new Si(r,a)}var T1=Hg,Gu=On.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=de(a),F(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&_n(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=de(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Ae("img");if(oe(a,"leaflet-image-layer"),this._zoomAnimated&&oe(a,"leaflet-zoom-animated"),this.options.className&&oe(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;vi(this._image,c,a)},_reset:function(){var r=this._image,a=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),x1=function(r,a,c){return new Gu(r,a,c)},Wg=Gu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Ae("video");if(oe(a,"leaflet-image-layer"),this._zoomAnimated&&oe(a,"leaflet-zoom-animated"),this.options.className&&oe(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var N=Ae("source");N.src=this._url[E],a.appendChild(N)}}});function I1(r,a,c){return new Wg(r,a,c)}var $g=Gu.extend({_initImage:function(){var r=this._image=this._url;oe(r,"leaflet-image-layer"),this._zoomAnimated&&oe(r,"leaflet-zoom-animated"),this.options.className&&oe(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function S1(r,a,c){return new $g(r,a,c)}var ei=On.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ge||O(r))?(this._latlng=he(r),F(this,a)):(F(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(be,void 0,this._container),200)):be(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=he(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_n(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof xi){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=q(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),On.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(F(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Zu=ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ei.prototype.openOn.call(this,r)},onAdd:function(r){ei.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ir||this._source.on("preclick",Ne))},onRemove:function(r){ei.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ir||this._source.off("preclick",Ne))},getEvents:function(){var r=ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Ae("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ae("div",r+"-content-wrapper",a);if(this._contentNode=Ae("div",r+"-content",c),as(a),ba(this._contentNode),_e(a,"contextmenu",Ne),this._tipContainer=Ae("div",r+"-tip-container",a),this._tip=Ae("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ae("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',_e(f,"click",function(g){st(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",oe(r,E)):ze(r,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Ji(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new M(this._containerLeft,-c-this._containerBottom);g._add(wi(this._container));var E=r.layerPointToContainerPoint(g),N=q(this.options.autoPanPadding),U=q(this.options.autoPanPaddingTopLeft||N),$=q(this.options.autoPanPaddingBottomRight||N),Y=r.getSize(),re=0,fe=0;E.x+f+$.x>Y.x&&(re=E.x+f-Y.x+$.x),E.x-re-U.x<0&&(re=E.x-U.x),E.y+c+$.y>Y.y&&(fe=E.y+c-Y.y+$.y),E.y-fe-U.y<0&&(fe=E.y-U.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),C1=function(r,a){return new Zu(r,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(r,a,c){return this._initOverlay(Zu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),On.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Zu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof xi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Kn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof ir)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ku=ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ei.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ei.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ei.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,E=f.latLngToContainerPoint(f.getCenter()),N=f.layerPointToContainerPoint(r),U=this.options.direction,$=g.offsetWidth,Y=g.offsetHeight,re=q(this.options.offset),fe=this._getAnchor();U==="top"?(a=$/2,c=Y):U==="bottom"?(a=$/2,c=0):U==="center"?(a=$/2,c=Y/2):U==="right"?(a=0,c=Y/2):U==="left"?(a=$,c=Y/2):N.x<E.x?(U="right",a=0,c=Y/2):(U="left",a=$+(re.x+fe.x)*2,c=Y/2),r=r.subtract(q(a,c,!0)).add(re).add(fe),ze(g,"leaflet-tooltip-right"),ze(g,"leaflet-tooltip-left"),ze(g,"leaflet-tooltip-top"),ze(g,"leaflet-tooltip-bottom"),oe(g,"leaflet-tooltip-"+U),Xe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Kt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),P1=function(r,a){return new Ku(r,a)};Te.include({openTooltip:function(r,a,c){return this._initOverlay(Ku,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),On.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ku,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof xi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(_e(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),_e(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var qg=ao.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(jt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=q(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function A1(r){return new qg(r)}ao.Default=Ua;var Ha=On.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){F(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),be(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof M?r:new M(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,E;f<g;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=r(c,+E));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){Kt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var E=Math.min(1,(r-g.loaded)/200);Kt(g.el,E),E<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(be(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)be(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),E=Math.floor(a/2),N=c-1,U=new M(+g,+E);U.z=+N;var $=this._tileCoordsToKey(U),Y=this._tiles[$];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),N>f?this._retainParent(g,E,N,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var E=2*a;E<2*a+2;E++){var N=new M(g,E);N.z=c+1;var U=this._tileCoordsToKey(N),$=this._tiles[U];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);c+1<f&&this._retainChildren(g,E,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();le.any3d?vi(r.el,g,f):Xe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new ie(g.subtract(E),g.add(E))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),E=g.getCenter(),N=[],U=this.options.keepBuffer,$=new ie(g.getBottomLeft().subtract([U,-U]),g.getTopRight().add([U,-U]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var re=this._tiles[Y].coords;(re.z!==this._tileZoom||!$.contains(new M(re.x,re.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var fe=g.min.y;fe<=g.max.y;fe++)for(var xe=g.min.x;xe<=g.max.x;xe++){var Ut=new M(xe,fe);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var vt=this._tiles[this._tileCoordsToKey(Ut)];vt?vt.current=!0:N.push(Ut)}}if(N.sort(function(Yt,ho){return Yt.distanceTo(E)-ho.distanceTo(E)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(xe=0;xe<N.length;xe++)this._addTile(N[xe],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return de(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),E=a.unproject(f,r.z),N=a.unproject(g,r.z);return[E,N]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ee(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new M(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(be(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){oe(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=v,r.onmousemove=v,le.ielt9&&this.options.opacity<1&&Kt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&D(l(this._tileReady,this,r,null,g)),Xe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(oe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new M(this._wrapX?_(r.x,this._wrapX):r.x,this._wrapY?_(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ie(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function k1(r){return new Ha(r)}var co=Ha.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=F(this,a),a.detectRetina&&le.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return _e(c,"load",l(this._tileOnLoad,this,a,c)),_e(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:le.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return C(this._url,s(a,this.options))},_tileOnLoad:function(r,a){le.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=v,a.onerror=v,!a.complete)){a.src=X;var c=this._tiles[r].coords;be(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",X),Ha.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return Ha.prototype._tileReady.call(this,r,a,c)}});function Gg(r,a){return new co(r,a)}var Zg=co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=F(this,a);var g=a.detectRetina&&le.retina?2:1,E=this.getTileSize();c.width=E.x*g,c.height=E.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,co.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ue(c.project(a[0]),c.project(a[1])),g=f.min,E=f.max,N=(this._wmsVersion>=1.3&&this._crs===so?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),U=co.prototype.getTileUrl.call(this,r);return U+B(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function R1(r,a){return new Zg(r,a)}co.WMS=Zg,Gg.wms=R1;var Ci=On.extend({options:{padding:.1},initialize:function(r){F(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),E=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));le.any3d?vi(this._container,E,c):Xe(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ie(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kg=Ci.extend({options:{tolerance:0},getEvents:function(){var r=Ci.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");_e(r,"mousemove",this._onMouseMove,this),_e(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,be(this._container),Ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=le.retina?2:1;Xe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,E,N=r._parts,U=N.length,$=this._ctx;if(U){for($.beginPath(),c=0;c<U;c++){for(f=0,g=N[c].length;f<g;f++)E=N[c][f],$[f?"lineTo":"moveTo"](E.x,E.y);a&&$.closePath()}this._fillStroke($,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(ze(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(oe(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Qg(r){return le.canvas?new Kg(r):null}var Wa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),b1={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ci.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Wa("shape");oe(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Wa("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;be(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Wa("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Wa("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){_n(r._container)},_bringToBack:function(r){yn(r._container)}},Qu=le.vml?Wa:vu,$a=Ci.extend({_initContainer:function(){this._container=Qu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){be(this._container),Ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Qu("path");r.options.className&&oe(a,r.options.className),r.options.interactive&&oe(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){be(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Fs(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",E=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,E)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){_n(r._path)},_bringToBack:function(r){yn(r._path)}});le.vml&&$a.include(b1);function Yg(r){return le.svg||le.vml?new $a(r):null}Te.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Qg(r)||Yg(r)}});var Xg=lo.extend({initialize:function(r,a){lo.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=de(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function L1(r,a){return new Xg(r,a)}$a.create=Qu,$a.pointsToPath=Fs,Si.geometryToLayer=Hu,Si.coordsToLatLng=Dd,Si.coordsToLatLngs=Wu,Si.latLngToCoords=Md,Si.latLngsToCoords=$u,Si.getFeature=uo,Si.asFeature=qu,Te.mergeOptions({boxZoom:!0});var Jg=ln.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(r),_e(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ie(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(be(this._box),ze(this._container,"leaflet-crosshair")),an(),Qs(),Ve(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",Jg),Te.mergeOptions({doubleClickZoom:!0});var e_=ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",e_),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var t_=ln.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Ln(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=de(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,E=(f+a+c)%r-a-c,N=Math.abs(g+c)<Math.abs(E+c)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,U=g.multiplyBy(N/E),$=U.distanceTo([0,0]),Y=Math.min(c.inertiaMaxSpeed,$),re=U.multiplyBy(Y/$),fe=Y/(c.inertiaDeceleration*N),xe=re.multiplyBy(-fe/2).round();!xe.x&&!xe.y?a.fire("moveend"):(xe=a._limitOffset(xe,a.options.maxBounds),D(function(){a.panBy(xe,{duration:fe,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",t_),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var n_=ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),_e(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=q(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(q(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Kn(r)}}});Te.addInitHook("addHandler","keyboard",n_),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var i_=ln.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Na(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Kn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(g/c)*c:g,N=r._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,N&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+N):r.setZoomAround(this._lastMousePos,a+N))}});Te.addInitHook("addHandler","scrollWheelZoom",i_);var N1=600;Te.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var r_=ln.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new M(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",st),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),N1),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ve(document,"touchend",st),Ve(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new M(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",r_),Te.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var s_=ln.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),st(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var N=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(N,this,!0),st(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",s_),Te.BoxZoom=Jg,Te.DoubleClickZoom=e_,Te.Drag=t_,Te.Keyboard=n_,Te.ScrollWheelZoom=i_,Te.TapHold=r_,Te.TouchZoom=s_,n.Bounds=ie,n.Browser=le,n.CRS=He,n.Canvas=Kg,n.Circle=Od,n.CircleMarker=Uu,n.Class=Me,n.Control=Qt,n.DivIcon=qg,n.DivOverlay=ei,n.DomEvent=us,n.DomUtil=Nd,n.Draggable=Ln,n.Evented=Gt,n.FeatureGroup=xi,n.GeoJSON=Si,n.GridLayer=Ha,n.Handler=ln,n.Icon=ao,n.ImageOverlay=Gu,n.LatLng=ge,n.LatLngBounds=Ee,n.Layer=On,n.LayerGroup=oo,n.LineUtil=wn,n.Map=Te,n.Marker=Bu,n.Mixin=zu,n.Path=ir,n.Point=M,n.PolyUtil=io,n.Polygon=lo,n.Polyline=Ii,n.Popup=Zu,n.PosAnimation=Da,n.Projection=Jn,n.Rectangle=Xg,n.Renderer=Ci,n.SVG=$a,n.SVGOverlay=$g,n.TileLayer=co,n.Tooltip=Ku,n.Transformation=va,n.Util=R,n.VideoOverlay=Wg,n.bind=l,n.bounds=ue,n.canvas=Qg,n.circle=v1,n.circleMarker=y1,n.control=Yn,n.divIcon=A1,n.extend=s,n.featureGroup=m1,n.geoJSON=Hg,n.geoJson=T1,n.gridLayer=k1,n.icon=g1,n.imageOverlay=x1,n.latLng=he,n.latLngBounds=de,n.layerGroup=p1,n.map=Js,n.marker=_1,n.point=q,n.polygon=E1,n.polyline=w1,n.popup=C1,n.rectangle=L1,n.setOptions=F,n.stamp=d,n.svg=Yg,n.svgOverlay=S1,n.tileLayer=Gg,n.tooltip=P1,n.transformation=Gi,n.version=i,n.videoOverlay=I1;var O1=window.L;n.noConflict=function(){return window.L=O1,this},window.L=n})})(Zp,Zp.exports);var _a=Zp.exports;const Kp=iw(_a);function Id(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Sd(t,e){return e==null?function(i,s){const o=G.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=G.useRef();o.current||(o.current=t(i,s));const l=G.useRef(i),{instance:h}=o.current;return G.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function u1(t,e){G.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function c1(t){return function(n){const i=zg(),s=t(xd(n,i),i);return r1(i.map,n.attribution),jg(s.current,n.eventHandlers),u1(s.current,i),s}}function LN(t,e){const n=G.useRef();G.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function NN(t){return function(n){const i=zg(),s=t(xd(n,i),i);return jg(s.current,n.eventHandlers),u1(s.current,i),LN(s.current,n),s}}function ON(t,e){const n=Sd(t,e),i=c1(n);return l1(i)}function DN(t,e){const n=Sd(t),i=bN(n,e);return kN(i)}function MN(t,e){const n=Sd(t,e),i=NN(n);return l1(i)}function VN(t,e){const n=Sd(t,e),i=c1(n);return RN(i)}function FN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Qp(){return Qp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qp.apply(this,arguments)}function zN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},v){const[T]=G.useState({className:s,id:o,style:h}),[A,V]=G.useState(null);G.useImperativeHandle(v,()=>(A==null?void 0:A.map)??null,[A]);const F=G.useCallback(k=>{if(k!==null&&A===null){const C=new _a.Map(k,_);n!=null&&p!=null?C.setView(n,p):t!=null&&C.fitBounds(t,e),d!=null&&C.whenReady(d),V(AN(C))}},[]);G.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const B=A?Cl.createElement(a1,{value:A},i):l??null;return Cl.createElement("div",Qp({},T,{ref:F}),B)}const jN=G.forwardRef(zN),h1=ON(function({position:e,...n},i){const s=new _a.Marker(e,n);return Id(s,s1(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),BN=MN(function({positions:e,...n},i){const s=new _a.Polygon(e,n);return Id(s,s1(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),d1=DN(function(e,n){const i=new _a.Popup(e,n.overlayContainer);return Id(i,n)},function(e,n,{position:i},s){G.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),UN=VN(function({url:e,...n},i){const s=new _a.TileLayer(e,xd(n,i));return Id(s,i)},function(e,n,i){FN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),HN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],WN=(t,e=3)=>{const n=[];for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},$N=(t,e)=>{const n=WN(t,5),i=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],_=p[0]-o,v=p[1]-l,T=Math.sqrt(_*_+v*v);if(T===0)continue;const A=_/T,V=v/T,F=Math.atan2(v,_)*(180/Math.PI);let B=0;if(F>=45&&F<=135){const C=1-Math.abs((F-90)/45);B+=100*C}if(Math.abs(F)>=135){const C=Math.abs(F),O=1-Math.abs((C-180)/45);B+=100*O}const k=Math.max(0,e-B);h.push([p[0]+A*k*i,p[1]+V*k*s])}return h},qN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],GN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],nw=(t,e)=>{const n=e?"red":"white";return Kp.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},ZN=({facility:t,onViewDetails:e})=>{var l,h;const n=G.useRef(null);G.useEffect(()=>{if(n.current){const d=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(nw(d,t.hit))}},[t.hit,t.type]);const i=d=>{switch(d){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}},s=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,o=((h=t.location)==null?void 0:h.longitude)??t.longitude??0;return w.jsx(h1,{ref:n,position:[s,o],icon:nw(i(t.type),t.hit),children:w.jsx(d1,{children:w.jsxs("div",{style:{color:"#000",minWidth:"200px"},children:[w.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),w.jsx("div",{style:{marginBottom:"8px"},children:w.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Type:"})," ",w.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),w.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[s.toFixed(4),", ",o.toFixed(4)]}),w.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#2563eb",onMouseOut:d=>d.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details "})]})})})},KN=()=>{const t=ed(),[e,n]=G.useState([]),[i,s]=G.useState("all"),[o,l]=G.useState("all"),[h,d]=G.useState(""),[p,_]=G.useState(0),[v,T]=G.useState(!0),[A,V]=G.useState(!0),[F,B]=G.useState(!0),[k,C]=G.useState(!0),[O,W]=G.useState(!0),[X,Z]=G.useState(!0);G.useEffect(()=>{(async()=>{try{if(!je){console.error("Firebase not initialized");return}const D=(await hr(cr(je,St.FACILITIES))).docs.map(z=>({id:parseInt(z.id),...z.data()})).filter(z=>!z.draft);n(D)}catch(b){console.error("Error fetching facilities:",b)}})()},[]);const P=x=>{t(`/facility/${x}`)},S=e.filter(x=>!(i!=="all"&&x.type!==i||x.type==="refinery"&&!v||x.type==="extraction"&&!A||x.type==="storage"&&!F||o==="hit"&&!x.hit||o==="operational"&&x.hit||x.capacity<p||h&&!x.name.toLowerCase().includes(h.toLowerCase())));return w.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"320px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[w.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),w.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[S.length," of ",e.length," facilities"]})]}),w.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),w.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:x=>d(x.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:x=>x.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:x=>x.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:x=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:x=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Min. Capacity"}),w.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px",marginBottom:"8px",fontWeight:"600"},children:[p.toLocaleString()," barrels/day"]}),w.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:x=>_(Number(x.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"5px"}})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Facility Types"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:v,onChange:x=>T(x.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#FF5733",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:A,onChange:x=>V(x.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#33FF57",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:F,onChange:x=>B(x.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#3357FF",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Weapon Ranges"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#10B981",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"500km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#F97316",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1000km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#EF4444",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1500km Range"})]})]})]})]})]}),w.jsx("div",{style:{flex:1,position:"relative"},children:w.jsxs(jN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[w.jsx(UN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),qN.map(x=>{if(x.range===500&&!k||x.range===1e3&&!O||x.range===1500&&!X)return null;const b=$N(HN,x.range);return w.jsx(BN,{positions:b,pathOptions:{color:x.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}},x.range)}),GN.map(x=>{let b;return x.name==="Moscow"?b=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${x.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):x.name==="Kyiv"&&x.colors&&(b=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${x.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${x.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),w.jsx(h1,{position:[x.lat,x.lon],icon:b,children:w.jsx(d1,{children:w.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:x.name})})},x.name)}),S.map(x=>w.jsx(ZN,{facility:x,onViewDetails:P},x.id))]})})]})},QN=()=>{var v,T;const{id:t}=CE(),e=ed(),[n,i]=G.useState(null),[s,o]=G.useState([]),[l,h]=G.useState(!0);if(G.useEffect(()=>{(async()=>{if(t)try{if(!je){console.error("Firebase not initialized"),h(!1);return}const V=ki(je,St.FACILITIES,t),F=await Ex(V);if(F.exists()){i({id:parseInt(F.id),...F.data()});const B=cr(je,St.HITS),k=Fc(B,zc("facilityId","==",parseInt(t)),ib("date","desc")),O=(await hr(k)).docs.map(W=>({id:W.data().id,...W.data()}));o(O)}else console.error("Facility not found");h(!1)}catch(V){console.error("Error fetching facility:",V),h(!1)}})()},[t]),l)return w.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[w.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),w.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((v=n.location)==null?void 0:v.latitude)??n.latitude??0,p=((T=n.location)==null?void 0:T.longitude)??n.longitude??0,_=A=>{switch(A){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[w.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Back to Map"}),w.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),w.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),w.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:w.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),w.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("span",{style:{color:_(n.type),fontSize:"28px"},children:""}),w.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),w.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),w.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),w.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),""]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),""]})]})]}),w.jsx("div",{style:{marginTop:"20px"},children:w.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps "})})]}),s.length>0&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),w.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),w.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((A,V)=>w.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-V}),w.jsxs("div",{children:[w.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(A.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),w.jsxs("div",{style:{fontSize:"13px",color:"#888"},children:["Expected repair time: ",w.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[A.expectedRepairTime," days"]})]})]})]}),A.videoLink&&w.jsx("a",{href:A.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:" Video"})]}),A.notes&&w.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:A.notes})]},A.id))})]})]})})]})},YN=()=>w.jsx(hP,{children:w.jsxs(lP,{children:[w.jsx(rl,{path:"/",element:w.jsx(KN,{})}),w.jsx(rl,{path:"/facility/:id",element:w.jsx(QN,{})}),w.jsx(rl,{path:"/admin",element:w.jsx(SN,{})}),w.jsx(rl,{path:"/admin/facility/:id",element:w.jsx(CN,{})})]})}),XN=Pf.createRoot(document.getElementById("root"));XN.render(w.jsx(Cl.StrictMode,{children:w.jsx(YN,{})}));
