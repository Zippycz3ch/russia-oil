function $1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var q1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u0={exports:{}},Fh={},c0={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),G1=Symbol.for("react.portal"),Z1=Symbol.for("react.fragment"),K1=Symbol.for("react.strict_mode"),Q1=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),J1=Symbol.for("react.forward_ref"),eI=Symbol.for("react.suspense"),tI=Symbol.for("react.memo"),nI=Symbol.for("react.lazy"),f_=Symbol.iterator;function rI(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var h0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d0=Object.assign,f0={};function ia(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||h0}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p0(){}p0.prototype=ia.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=f0,this.updater=n||h0}var Jp=Xp.prototype=new p0;Jp.constructor=Xp;d0(Jp,ia.prototype);Jp.isPureReactComponent=!0;var p_=Array.isArray,m0=Object.prototype.hasOwnProperty,em={current:null},g0={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)m0.call(e,r)&&!g0.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:iu,type:t,key:o,ref:l,props:s,_owner:em.current}}function iI(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tm(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function sI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var m_=/\/+/g;function Bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sI(""+t.key):e.toString(36)}function Ic(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case iu:case G1:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Bd(l,0):r,p_(s)?(n="",t!=null&&(n=t.replace(m_,"$&/")+"/"),Ic(s,e,n,"",function(p){return p})):s!=null&&(tm(s)&&(s=iI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(m_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",p_(t))for(var h=0;h<t.length;h++){o=t[h];var d=r+Bd(o,h);l+=Ic(o,e,n,d,s)}else if(d=rI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=r+Bd(o,h++),l+=Ic(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function tc(t,e,n){if(t==null)return t;var r=[],s=0;return Ic(t,r,"","",function(o){return e.call(n,o,s++)}),r}function oI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Sc={transition:null},aI={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:em};function y0(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:tc,forEach:function(t,e,n){tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tc(t,function(){e++}),e},toArray:function(t){return tc(t,function(e){return e})||[]},only:function(t){if(!tm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ia;Ie.Fragment=Z1;Ie.Profiler=Q1;Ie.PureComponent=Xp;Ie.StrictMode=K1;Ie.Suspense=eI;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aI;Ie.act=y0;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=em.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)m0.call(e,d)&&!g0.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:iu,type:t.type,key:s,ref:o,props:r,_owner:l}};Ie.createContext=function(t){return t={$$typeof:X1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y1,_context:t},t.Consumer=t};Ie.createElement=_0;Ie.createFactory=function(t){var e=_0.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:J1,render:t}};Ie.isValidElement=tm;Ie.lazy=function(t){return{$$typeof:nI,_payload:{_status:-1,_result:t},_init:oI}};Ie.memo=function(t,e){return{$$typeof:tI,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};Ie.unstable_act=y0;Ie.useCallback=function(t,e){return qt.current.useCallback(t,e)};Ie.useContext=function(t){return qt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return qt.current.useEffect(t,e)};Ie.useId=function(){return qt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return qt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Ie.useRef=function(t){return qt.current.useRef(t)};Ie.useState=function(t){return qt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return qt.current.useTransition()};Ie.version="18.3.1";c0.exports=Ie;var q=c0.exports;const Pl=l0(q),lI=$1({__proto__:null,default:Pl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI=q,cI=Symbol.for("react.element"),hI=Symbol.for("react.fragment"),dI=Object.prototype.hasOwnProperty,fI=uI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pI={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)dI.call(e,r)&&!pI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cI,type:t,key:o,ref:l,props:s,_owner:fI.current}}Fh.Fragment=hI;Fh.jsx=v0;Fh.jsxs=v0;u0.exports=Fh;var v=u0.exports,Af={},w0={exports:{}},fn={},x0={exports:{}},E0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var Y=$.length;$.push(le);e:for(;0<Y;){var ce=Y-1>>>1,me=$[ce];if(0<s(me,le))$[ce]=le,$[Y]=me,Y=ce;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var le=$[0],Y=$.pop();if(Y!==le){$[0]=Y;e:for(var ce=0,me=$.length,Ue=me>>>1;ce<Ue;){var Se=2*(ce+1)-1,xe=$[Se],he=Se+1,at=$[he];if(0>s(xe,Y))he<me&&0>s(at,xe)?($[ce]=at,$[he]=Y,ce=he):($[ce]=xe,$[Se]=Y,ce=Se);else if(he<me&&0>s(at,Y))$[ce]=at,$[he]=Y,ce=he;else break e}}return le}function s($,le){var Y=$.sortIndex-le.sortIndex;return Y!==0?Y:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,w=null,x=3,A=!1,F=!1,b=!1,z=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O($){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=$)r(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(p)}}function H($){if(b=!1,O($),!F)if(n(d)!==null)F=!0,Le(Q);else{var le=n(p);le!==null&&De(H,le.startTime-$)}}function Q($,le){F=!1,b&&(b=!1,S(P),P=-1),A=!0;var Y=x;try{for(O(le),w=n(d);w!==null&&(!(w.expirationTime>le)||$&&!V());){var ce=w.callback;if(typeof ce=="function"){w.callback=null,x=w.priorityLevel;var me=ce(w.expirationTime<=le);le=t.unstable_now(),typeof me=="function"?w.callback=me:w===n(d)&&r(d),O(le)}else r(d);w=n(d)}if(w!==null)var Ue=!0;else{var Se=n(p);Se!==null&&De(H,Se.startTime-le),Ue=!1}return Ue}finally{w=null,x=Y,A=!1}}var ee=!1,R=null,P=-1,N=5,D=-1;function V(){return!(t.unstable_now()-D<N)}function k(){if(R!==null){var $=t.unstable_now();D=$;var le=!0;try{le=R(!0,$)}finally{le?C():(ee=!1,R=null)}}else ee=!1}var C;if(typeof T=="function")C=function(){T(k)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,we=J.port2;J.port1.onmessage=k,C=function(){we.postMessage(null)}}else C=function(){z(k,0)};function Le($){R=$,ee||(ee=!0,C())}function De($,le){P=z(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){F||A||(F=!0,Le(Q))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var Y=x;x=le;try{return $()}finally{x=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=x;x=$;try{return le()}finally{x=Y}},t.unstable_scheduleCallback=function($,le,Y){var ce=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ce+Y:ce):Y=ce,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,$={id:_++,callback:le,priorityLevel:$,startTime:Y,expirationTime:me,sortIndex:-1},Y>ce?($.sortIndex=Y,e(p,$),n(d)===null&&$===n(p)&&(b?(S(P),P=-1):b=!0,De(H,Y-ce))):($.sortIndex=me,e(d,$),F||A||(F=!0,Le(Q))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var le=x;return function(){var Y=x;x=le;try{return $.apply(this,arguments)}finally{x=Y}}}})(E0);x0.exports=E0;var mI=x0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI=q,dn=mI;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,kl={};function bs(t,e){Wo(t,e),Wo(t+"Capture",e)}function Wo(t,e){for(kl[t]=e,t=0;t<e.length;t++)T0.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,_I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g_={},__={};function yI(t){return Rf.call(__,t)?!0:Rf.call(g_,t)?!1:_I.test(t)?__[t]=!0:(g_[t]=!0,!1)}function vI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wI(t,e,n,r){if(e===null||typeof e>"u"||vI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nm=/[\-:]([a-z])/g;function rm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nm,rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wI(e,n,s,r)&&(n=null),r||s===null?yI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=gI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),vo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),I0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),am=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),y_=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Ud;function nl(t){if(Ud===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ud=e&&e[1]||""}return`
`+Ud+t}var Wd=!1;function Hd(t,e){if(!t||Wd)return"";Wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nl(t):""}function xI(t){switch(t.tag){case 5:return nl(t.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return t=Hd(t.type,!1),t;case 11:return t=Hd(t.type.render,!1),t;case 1:return t=Hd(t.type,!0),t;default:return""}}function Of(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case vo:return"Portal";case bf:return"Profiler";case sm:return"StrictMode";case Lf:return"Suspense";case Nf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S0:return(t.displayName||"Context")+".Consumer";case I0:return(t._context.displayName||"Context")+".Provider";case om:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case am:return e=t.displayName||null,e!==null?e:Of(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return Of(t(e))}catch{}}return null}function EI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Of(e);case 8:return e===sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function P0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TI(t){var e=P0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rc(t){t._valueTracker||(t._valueTracker=TI(t))}function k0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=P0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mf(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A0(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Df(t,e){A0(t,e);var n=Ni(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vf(t,e.type,Ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vf(t,e,n){(e!=="number"||Kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ni(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ff(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(rl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ni(n)}}function R0(t,e){var n=Ni(e.value),r=Ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function E_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ic,L0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},II=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(t){II.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dl[e]=dl[t]})});function N0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dl.hasOwnProperty(t)&&dl[t]?(""+e).trim():e+"px"}function O0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=N0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SI=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(SI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Bf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function lm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wf=null,No=null,Oo=null;function T_(t){if(t=au(t)){if(typeof Wf!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Wh(e),Wf(t.stateNode,t.type,e))}}function M0(t){No?Oo?Oo.push(t):Oo=[t]:No=t}function D0(){if(No){var t=No,e=Oo;if(Oo=No=null,T_(t),e)for(t=0;t<e.length;t++)T_(e[t])}}function V0(t,e){return t(e)}function F0(){}var $d=!1;function z0(t,e,n){if($d)return t(e,n);$d=!0;try{return V0(t,e,n)}finally{$d=!1,(No!==null||Oo!==null)&&(F0(),D0())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=Wh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Hf=!1;if(Fr)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Hf=!1}function CI(t,e,n,r,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var fl=!1,Qc=null,Yc=!1,$f=null,PI={onError:function(t){fl=!0,Qc=t}};function kI(t,e,n,r,s,o,l,h,d){fl=!1,Qc=null,CI.apply(PI,arguments)}function AI(t,e,n,r,s,o,l,h,d){if(kI.apply(this,arguments),fl){if(fl){var p=Qc;fl=!1,Qc=null}else throw Error(X(198));Yc||(Yc=!0,$f=p)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I_(t){if(Ls(t)!==t)throw Error(X(188))}function RI(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return I_(s),t;if(o===r)return I_(s),e;o=o.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,r=o;break}if(h===r){l=!0,r=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=s;break}if(h===r){l=!0,r=o,n=s;break}h=h.sibling}if(!l)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function B0(t){return t=RI(t),t!==null?U0(t):null}function U0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U0(t);if(e!==null)return e;t=t.sibling}return null}var W0=dn.unstable_scheduleCallback,S_=dn.unstable_cancelCallback,bI=dn.unstable_shouldYield,LI=dn.unstable_requestPaint,st=dn.unstable_now,NI=dn.unstable_getCurrentPriorityLevel,um=dn.unstable_ImmediatePriority,H0=dn.unstable_UserBlockingPriority,Xc=dn.unstable_NormalPriority,OI=dn.unstable_LowPriority,$0=dn.unstable_IdlePriority,zh=null,lr=null;function MI(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:FI,DI=Math.log,VI=Math.LN2;function FI(t){return t>>>=0,t===0?32:31-(DI(t)/VI|0)|0}var sc=64,oc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?r=il(h):(o&=l,o!==0&&(r=il(o)))}else l=n&~s,l!==0?r=il(l):o!==0&&(r=il(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),s=1<<n,r|=t[n],e&=~s;return r}function zI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Hn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&r)&&(s[l]=zI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q0(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function qd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function BI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Hn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Be=0;function G0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z0,hm,K0,Q0,Y0,Gf=!1,ac=[],vi=null,wi=null,xi=null,bl=new Map,Ll=new Map,ui=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Qa(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&hm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WI(t,e,n,r,s){switch(e){case"focusin":return vi=Qa(vi,t,e,n,r,s),!0;case"dragenter":return wi=Qa(wi,t,e,n,r,s),!0;case"mouseover":return xi=Qa(xi,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return bl.set(o,Qa(bl.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ll.set(o,Qa(Ll.get(o)||null,t,e,n,r,s)),!0}return!1}function X0(t){var e=fs(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=j0(n),e!==null){t.blockedOn=e,Y0(t.priority,function(){K0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uf=r,n.target.dispatchEvent(r),Uf=null}else return e=au(n),e!==null&&hm(e),t.blockedOn=n,!1;e.shift()}return!0}function P_(t,e,n){Cc(t)&&n.delete(e)}function HI(){Gf=!1,vi!==null&&Cc(vi)&&(vi=null),wi!==null&&Cc(wi)&&(wi=null),xi!==null&&Cc(xi)&&(xi=null),bl.forEach(P_),Ll.forEach(P_)}function Ya(t,e){t.blockedOn===e&&(t.blockedOn=null,Gf||(Gf=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,HI)))}function Nl(t){function e(s){return Ya(s,t)}if(0<ac.length){Ya(ac[0],t);for(var n=1;n<ac.length;n++){var r=ac[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&Ya(vi,t),wi!==null&&Ya(wi,t),xi!==null&&Ya(xi,t),bl.forEach(e),Ll.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)X0(n),n.blockedOn===null&&ui.shift()}var Mo=qr.ReactCurrentBatchConfig,eh=!0;function $I(t,e,n,r){var s=Be,o=Mo.transition;Mo.transition=null;try{Be=1,dm(t,e,n,r)}finally{Be=s,Mo.transition=o}}function qI(t,e,n,r){var s=Be,o=Mo.transition;Mo.transition=null;try{Be=4,dm(t,e,n,r)}finally{Be=s,Mo.transition=o}}function dm(t,e,n,r){if(eh){var s=Zf(t,e,n,r);if(s===null)nf(t,e,r,th,n),C_(t,r);else if(WI(s,t,e,n,r))r.stopPropagation();else if(C_(t,r),e&4&&-1<UI.indexOf(t)){for(;s!==null;){var o=au(s);if(o!==null&&Z0(o),o=Zf(t,e,n,r),o===null&&nf(t,e,r,th,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else nf(t,e,r,null,n)}}var th=null;function Zf(t,e,n,r){if(th=null,t=lm(r),t=fs(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return th=t,null}function J0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NI()){case um:return 1;case H0:return 4;case Xc:case OI:return 16;case $0:return 536870912;default:return 16}default:return 16}}var mi=null,fm=null,Pc=null;function ew(){if(Pc)return Pc;var t,e=fm,n=e.length,r,s="value"in mi?mi.value:mi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[o-r];r++);return Pc=s.slice(t,1<r?1-r:void 0)}function kc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function k_(){return!1}function pn(t){function e(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lc:k_,this.isPropagationStopped=k_,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pm=pn(sa),ou=Je({},sa,{view:0,detail:0}),GI=pn(ou),Gd,Zd,Xa,jh=Je({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xa&&(Xa&&t.type==="mousemove"?(Gd=t.screenX-Xa.screenX,Zd=t.screenY-Xa.screenY):Zd=Gd=0,Xa=t),Gd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),A_=pn(jh),ZI=Je({},jh,{dataTransfer:0}),KI=pn(ZI),QI=Je({},ou,{relatedTarget:0}),Kd=pn(QI),YI=Je({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),XI=pn(YI),JI=Je({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eS=pn(JI),tS=Je({},sa,{data:0}),R_=pn(tS),nS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iS[t])?!!e[t]:!1}function mm(){return sS}var oS=Je({},ou,{key:function(t){if(t.key){var e=nS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(t){return t.type==="keypress"?kc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aS=pn(oS),lS=Je({},jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b_=pn(lS),uS=Je({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),cS=pn(uS),hS=Je({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),dS=pn(hS),fS=Je({},jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pS=pn(fS),mS=[9,13,27,32],gm=Fr&&"CompositionEvent"in window,pl=null;Fr&&"documentMode"in document&&(pl=document.documentMode);var gS=Fr&&"TextEvent"in window&&!pl,tw=Fr&&(!gm||pl&&8<pl&&11>=pl),L_=" ",N_=!1;function nw(t,e){switch(t){case"keyup":return mS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function _S(t,e){switch(t){case"compositionend":return rw(e);case"keypress":return e.which!==32?null:(N_=!0,L_);case"textInput":return t=e.data,t===L_&&N_?null:t;default:return null}}function yS(t,e){if(xo)return t==="compositionend"||!gm&&nw(t,e)?(t=ew(),Pc=fm=mi=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tw&&e.locale!=="ko"?null:e.data;default:return null}}var vS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vS[t.type]:e==="textarea"}function iw(t,e,n,r){M0(r),e=nh(e,"onChange"),0<e.length&&(n=new pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ml=null,Ol=null;function wS(t){mw(t,0)}function Bh(t){var e=Io(t);if(k0(e))return t}function xS(t,e){if(t==="change")return e}var sw=!1;if(Fr){var Qd;if(Fr){var Yd="oninput"in document;if(!Yd){var M_=document.createElement("div");M_.setAttribute("oninput","return;"),Yd=typeof M_.oninput=="function"}Qd=Yd}else Qd=!1;sw=Qd&&(!document.documentMode||9<document.documentMode)}function D_(){ml&&(ml.detachEvent("onpropertychange",ow),Ol=ml=null)}function ow(t){if(t.propertyName==="value"&&Bh(Ol)){var e=[];iw(e,Ol,t,lm(t)),z0(wS,e)}}function ES(t,e,n){t==="focusin"?(D_(),ml=e,Ol=n,ml.attachEvent("onpropertychange",ow)):t==="focusout"&&D_()}function TS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(Ol)}function IS(t,e){if(t==="click")return Bh(e)}function SS(t,e){if(t==="input"||t==="change")return Bh(e)}function CS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:CS;function Ml(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rf.call(e,s)||!Gn(t[s],e[s]))return!1}return!0}function V_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F_(t,e){var n=V_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=V_(n)}}function aw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lw(){for(var t=window,e=Kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kc(t.document)}return e}function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PS(t){var e=lw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aw(n.ownerDocument.documentElement,n)){if(r!==null&&_m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=F_(n,o);var l=F_(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kS=Fr&&"documentMode"in document&&11>=document.documentMode,Eo=null,Kf=null,gl=null,Qf=!1;function z_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qf||Eo==null||Eo!==Kc(r)||(r=Eo,"selectionStart"in r&&_m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Ml(gl,r)||(gl=r,r=nh(Kf,"onSelect"),0<r.length&&(e=new pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Eo)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Xd={},uw={};Fr&&(uw=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Uh(t){if(Xd[t])return Xd[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uw)return Xd[t]=e[n];return t}var cw=Uh("animationend"),hw=Uh("animationiteration"),dw=Uh("animationstart"),fw=Uh("transitionend"),pw=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(t,e){pw.set(t,e),bs(e,[t])}for(var Jd=0;Jd<j_.length;Jd++){var ef=j_[Jd],AS=ef.toLowerCase(),RS=ef[0].toUpperCase()+ef.slice(1);Bi(AS,"on"+RS)}Bi(cw,"onAnimationEnd");Bi(hw,"onAnimationIteration");Bi(dw,"onAnimationStart");Bi("dblclick","onDoubleClick");Bi("focusin","onFocus");Bi("focusout","onBlur");Bi(fw,"onTransitionEnd");Wo("onMouseEnter",["mouseout","mouseover"]);Wo("onMouseLeave",["mouseout","mouseover"]);Wo("onPointerEnter",["pointerout","pointerover"]);Wo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function B_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AI(r,e,void 0,t),t.currentTarget=null}function mw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;B_(s,h,p),o=d}else for(l=0;l<r.length;l++){if(h=r[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;B_(s,h,p),o=d}}}if(Yc)throw t=$f,Yc=!1,$f=null,t}function qe(t,e){var n=e[tp];n===void 0&&(n=e[tp]=new Set);var r=t+"__bubble";n.has(r)||(gw(e,t,2,!1),n.add(r))}function tf(t,e,n){var r=0;e&&(r|=4),gw(n,t,r,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[cc]){t[cc]=!0,T0.forEach(function(n){n!=="selectionchange"&&(bS.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,tf("selectionchange",!1,e))}}function gw(t,e,n,r){switch(J0(e)){case 1:var s=$I;break;case 4:s=qI;break;default:s=dm}n=s.bind(null,e,n,t),s=void 0,!Hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nf(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=fs(h),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}h=h.parentNode}}r=r.return}z0(function(){var p=o,_=lm(n),w=[];e:{var x=pw.get(t);if(x!==void 0){var A=pm,F=t;switch(t){case"keypress":if(kc(n)===0)break e;case"keydown":case"keyup":A=aS;break;case"focusin":F="focus",A=Kd;break;case"focusout":F="blur",A=Kd;break;case"beforeblur":case"afterblur":A=Kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=KI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=cS;break;case cw:case hw:case dw:A=XI;break;case fw:A=dS;break;case"scroll":A=GI;break;case"wheel":A=pS;break;case"copy":case"cut":case"paste":A=eS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=b_}var b=(e&4)!==0,z=!b&&t==="scroll",S=b?x!==null?x+"Capture":null:x;b=[];for(var T=p,O;T!==null;){O=T;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,S!==null&&(H=Rl(T,S),H!=null&&b.push(Vl(T,H,O)))),z)break;T=T.return}0<b.length&&(x=new A(x,F,null,n,_),w.push({event:x,listeners:b}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",x&&n!==Uf&&(F=n.relatedTarget||n.fromElement)&&(fs(F)||F[zr]))break e;if((A||x)&&(x=_.window===_?_:(x=_.ownerDocument)?x.defaultView||x.parentWindow:window,A?(F=n.relatedTarget||n.toElement,A=p,F=F?fs(F):null,F!==null&&(z=Ls(F),F!==z||F.tag!==5&&F.tag!==6)&&(F=null)):(A=null,F=p),A!==F)){if(b=A_,H="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(b=b_,H="onPointerLeave",S="onPointerEnter",T="pointer"),z=A==null?x:Io(A),O=F==null?x:Io(F),x=new b(H,T+"leave",A,n,_),x.target=z,x.relatedTarget=O,H=null,fs(_)===p&&(b=new b(S,T+"enter",F,n,_),b.target=O,b.relatedTarget=z,H=b),z=H,A&&F)t:{for(b=A,S=F,T=0,O=b;O;O=fo(O))T++;for(O=0,H=S;H;H=fo(H))O++;for(;0<T-O;)b=fo(b),T--;for(;0<O-T;)S=fo(S),O--;for(;T--;){if(b===S||S!==null&&b===S.alternate)break t;b=fo(b),S=fo(S)}b=null}else b=null;A!==null&&U_(w,x,A,b,!1),F!==null&&z!==null&&U_(w,z,F,b,!0)}}e:{if(x=p?Io(p):window,A=x.nodeName&&x.nodeName.toLowerCase(),A==="select"||A==="input"&&x.type==="file")var Q=xS;else if(O_(x))if(sw)Q=SS;else{Q=TS;var ee=ES}else(A=x.nodeName)&&A.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(Q=IS);if(Q&&(Q=Q(t,p))){iw(w,Q,n,_);break e}ee&&ee(t,x,p),t==="focusout"&&(ee=x._wrapperState)&&ee.controlled&&x.type==="number"&&Vf(x,"number",x.value)}switch(ee=p?Io(p):window,t){case"focusin":(O_(ee)||ee.contentEditable==="true")&&(Eo=ee,Kf=p,gl=null);break;case"focusout":gl=Kf=Eo=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,z_(w,n,_);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":z_(w,n,_)}var R;if(gm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else xo?nw(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(tw&&n.locale!=="ko"&&(xo||P!=="onCompositionStart"?P==="onCompositionEnd"&&xo&&(R=ew()):(mi=_,fm="value"in mi?mi.value:mi.textContent,xo=!0)),ee=nh(p,P),0<ee.length&&(P=new R_(P,t,null,n,_),w.push({event:P,listeners:ee}),R?P.data=R:(R=rw(n),R!==null&&(P.data=R)))),(R=gS?_S(t,n):yS(t,n))&&(p=nh(p,"onBeforeInput"),0<p.length&&(_=new R_("onBeforeInput","beforeinput",null,n,_),w.push({event:_,listeners:p}),_.data=R))}mw(w,e)})}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rl(t,n),o!=null&&r.unshift(Vl(t,o,s)),o=Rl(t,e),o!=null&&r.push(Vl(t,o,s))),t=t.return}return r}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U_(t,e,n,r,s){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===r)break;h.tag===5&&p!==null&&(h=p,s?(d=Rl(n,o),d!=null&&l.unshift(Vl(n,d,h))):s||(d=Rl(n,o),d!=null&&l.push(Vl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var LS=/\r\n?/g,NS=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(LS,`
`).replace(NS,"")}function hc(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(X(425))}function rh(){}var Yf=null,Xf=null;function Jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ep=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,H_=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof H_<"u"?function(t){return H_.resolve(null).then(t).catch(DS)}:ep;function DS(t){setTimeout(function(){throw t})}function rf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nl(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oa=Math.random().toString(36).slice(2),ar="__reactFiber$"+oa,Fl="__reactProps$"+oa,zr="__reactContainer$"+oa,tp="__reactEvents$"+oa,VS="__reactListeners$"+oa,FS="__reactHandles$"+oa;function fs(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$_(t);t!==null;){if(n=t[ar])return n;t=$_(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[ar]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Wh(t){return t[Fl]||null}var np=[],So=-1;function Ui(t){return{current:t}}function Ze(t){0>So||(t.current=np[So],np[So]=null,So--)}function $e(t,e){So++,np[So]=t.current,t.current=e}var Oi={},zt=Ui(Oi),nn=Ui(!1),xs=Oi;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function ih(){Ze(nn),Ze(zt)}function q_(t,e,n){if(zt.current!==Oi)throw Error(X(168));$e(zt,e),$e(nn,n)}function _w(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,EI(t)||"Unknown",s));return Je({},n,r)}function sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,xs=zt.current,$e(zt,t),$e(nn,nn.current),!0}function G_(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=_w(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,Ze(nn),Ze(zt),$e(zt,t)):Ze(nn),$e(nn,n)}var br=null,Hh=!1,sf=!1;function yw(t){br===null?br=[t]:br.push(t)}function zS(t){Hh=!0,yw(t)}function Wi(){if(!sf&&br!==null){sf=!0;var t=0,e=Be;try{var n=br;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Hh=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),W0(um,Wi),s}finally{Be=e,sf=!1}}return null}var Co=[],Po=0,oh=null,ah=0,Tn=[],In=0,Es=null,Lr=1,Nr="";function cs(t,e){Co[Po++]=ah,Co[Po++]=oh,oh=t,ah=e}function vw(t,e,n){Tn[In++]=Lr,Tn[In++]=Nr,Tn[In++]=Es,Es=t;var r=Lr;t=Nr;var s=32-Hn(r)-1;r&=~(1<<s),n+=1;var o=32-Hn(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Lr=1<<32-Hn(e)+s|n<<s|r,Nr=o+t}else Lr=1<<o|n<<s|r,Nr=t}function ym(t){t.return!==null&&(cs(t,1),vw(t,1,0))}function vm(t){for(;t===oh;)oh=Co[--Po],Co[Po]=null,ah=Co[--Po],Co[Po]=null;for(;t===Es;)Es=Tn[--In],Tn[In]=null,Nr=Tn[--In],Tn[In]=null,Lr=Tn[--In],Tn[In]=null}var hn=null,un=null,Ke=!1,zn=null;function ww(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Z_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Lr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function rp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(Ke){var e=un;if(e){var n=e;if(!Z_(t,e)){if(rp(t))throw Error(X(418));e=Ei(n.nextSibling);var r=hn;e&&Z_(t,e)?ww(r,n):(t.flags=t.flags&-4097|2,Ke=!1,hn=t)}}else{if(rp(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ke=!1,hn=t}}}function K_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function dc(t){if(t!==hn)return!1;if(!Ke)return K_(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jf(t.type,t.memoizedProps)),e&&(e=un)){if(rp(t))throw xw(),Error(X(418));for(;e;)ww(t,e),e=Ei(e.nextSibling)}if(K_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?Ei(t.stateNode.nextSibling):null;return!0}function xw(){for(var t=un;t;)t=Ei(t.nextSibling)}function $o(){un=hn=null,Ke=!1}function wm(t){zn===null?zn=[t]:zn.push(t)}var jS=qr.ReactCurrentBatchConfig;function Ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function fc(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q_(t){var e=t._init;return e(t._payload)}function Ew(t){function e(S,T){if(t){var O=S.deletions;O===null?(S.deletions=[T],S.flags|=16):O.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Ci(S,T),S.index=0,S.sibling=null,S}function o(S,T,O){return S.index=O,t?(O=S.alternate,O!==null?(O=O.index,O<T?(S.flags|=2,T):O):(S.flags|=2,T)):(S.flags|=1048576,T)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function h(S,T,O,H){return T===null||T.tag!==6?(T=df(O,S.mode,H),T.return=S,T):(T=s(T,O),T.return=S,T)}function d(S,T,O,H){var Q=O.type;return Q===wo?_(S,T,O.props.children,H,O.key):T!==null&&(T.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ai&&Q_(Q)===T.type)?(H=s(T,O.props),H.ref=Ja(S,T,O),H.return=S,H):(H=Mc(O.type,O.key,O.props,null,S.mode,H),H.ref=Ja(S,T,O),H.return=S,H)}function p(S,T,O,H){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=ff(O,S.mode,H),T.return=S,T):(T=s(T,O.children||[]),T.return=S,T)}function _(S,T,O,H,Q){return T===null||T.tag!==7?(T=ys(O,S.mode,H,Q),T.return=S,T):(T=s(T,O),T.return=S,T)}function w(S,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return T=df(""+T,S.mode,O),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nc:return O=Mc(T.type,T.key,T.props,null,S.mode,O),O.ref=Ja(S,null,T),O.return=S,O;case vo:return T=ff(T,S.mode,O),T.return=S,T;case ai:var H=T._init;return w(S,H(T._payload),O)}if(rl(T)||Za(T))return T=ys(T,S.mode,O,null),T.return=S,T;fc(S,T)}return null}function x(S,T,O,H){var Q=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Q!==null?null:h(S,T,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case nc:return O.key===Q?d(S,T,O,H):null;case vo:return O.key===Q?p(S,T,O,H):null;case ai:return Q=O._init,x(S,T,Q(O._payload),H)}if(rl(O)||Za(O))return Q!==null?null:_(S,T,O,H,null);fc(S,O)}return null}function A(S,T,O,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number")return S=S.get(O)||null,h(T,S,""+H,Q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case nc:return S=S.get(H.key===null?O:H.key)||null,d(T,S,H,Q);case vo:return S=S.get(H.key===null?O:H.key)||null,p(T,S,H,Q);case ai:var ee=H._init;return A(S,T,O,ee(H._payload),Q)}if(rl(H)||Za(H))return S=S.get(O)||null,_(T,S,H,Q,null);fc(T,H)}return null}function F(S,T,O,H){for(var Q=null,ee=null,R=T,P=T=0,N=null;R!==null&&P<O.length;P++){R.index>P?(N=R,R=null):N=R.sibling;var D=x(S,R,O[P],H);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(S,R),T=o(D,T,P),ee===null?Q=D:ee.sibling=D,ee=D,R=N}if(P===O.length)return n(S,R),Ke&&cs(S,P),Q;if(R===null){for(;P<O.length;P++)R=w(S,O[P],H),R!==null&&(T=o(R,T,P),ee===null?Q=R:ee.sibling=R,ee=R);return Ke&&cs(S,P),Q}for(R=r(S,R);P<O.length;P++)N=A(R,S,P,O[P],H),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?P:N.key),T=o(N,T,P),ee===null?Q=N:ee.sibling=N,ee=N);return t&&R.forEach(function(V){return e(S,V)}),Ke&&cs(S,P),Q}function b(S,T,O,H){var Q=Za(O);if(typeof Q!="function")throw Error(X(150));if(O=Q.call(O),O==null)throw Error(X(151));for(var ee=Q=null,R=T,P=T=0,N=null,D=O.next();R!==null&&!D.done;P++,D=O.next()){R.index>P?(N=R,R=null):N=R.sibling;var V=x(S,R,D.value,H);if(V===null){R===null&&(R=N);break}t&&R&&V.alternate===null&&e(S,R),T=o(V,T,P),ee===null?Q=V:ee.sibling=V,ee=V,R=N}if(D.done)return n(S,R),Ke&&cs(S,P),Q;if(R===null){for(;!D.done;P++,D=O.next())D=w(S,D.value,H),D!==null&&(T=o(D,T,P),ee===null?Q=D:ee.sibling=D,ee=D);return Ke&&cs(S,P),Q}for(R=r(S,R);!D.done;P++,D=O.next())D=A(R,S,P,D.value,H),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?P:D.key),T=o(D,T,P),ee===null?Q=D:ee.sibling=D,ee=D);return t&&R.forEach(function(k){return e(S,k)}),Ke&&cs(S,P),Q}function z(S,T,O,H){if(typeof O=="object"&&O!==null&&O.type===wo&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case nc:e:{for(var Q=O.key,ee=T;ee!==null;){if(ee.key===Q){if(Q=O.type,Q===wo){if(ee.tag===7){n(S,ee.sibling),T=s(ee,O.props.children),T.return=S,S=T;break e}}else if(ee.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ai&&Q_(Q)===ee.type){n(S,ee.sibling),T=s(ee,O.props),T.ref=Ja(S,ee,O),T.return=S,S=T;break e}n(S,ee);break}else e(S,ee);ee=ee.sibling}O.type===wo?(T=ys(O.props.children,S.mode,H,O.key),T.return=S,S=T):(H=Mc(O.type,O.key,O.props,null,S.mode,H),H.ref=Ja(S,T,O),H.return=S,S=H)}return l(S);case vo:e:{for(ee=O.key;T!==null;){if(T.key===ee)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){n(S,T.sibling),T=s(T,O.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=ff(O,S.mode,H),T.return=S,S=T}return l(S);case ai:return ee=O._init,z(S,T,ee(O._payload),H)}if(rl(O))return F(S,T,O,H);if(Za(O))return b(S,T,O,H);fc(S,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,O),T.return=S,S=T):(n(S,T),T=df(O,S.mode,H),T.return=S,S=T),l(S)):n(S,T)}return z}var qo=Ew(!0),Tw=Ew(!1),lh=Ui(null),uh=null,ko=null,xm=null;function Em(){xm=ko=uh=null}function Tm(t){var e=lh.current;Ze(lh),t._currentValue=e}function sp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){uh=t,xm=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(xm!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(uh===null)throw Error(X(308));ko=t,uh.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var ps=null;function Im(t){ps===null?ps=[t]:ps.push(t)}function Iw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Im(e)):(n.next=s.next,s.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function Sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,jr(t,n)}return s=r.interleaved,s===null?(e.next=e,Im(r)):(e.next=s.next,s.next=e),r.interleaved=e,jr(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cm(t,n)}}function Y_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ch(t,e,n,r){var s=t.updateQueue;li=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,_=p=d=null,h=o;do{var x=h.lane,A=h.eventTime;if((r&x)===x){_!==null&&(_=_.next={eventTime:A,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var F=t,b=h;switch(x=e,A=n,b.tag){case 1:if(F=b.payload,typeof F=="function"){w=F.call(A,w,x);break e}w=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=b.payload,x=typeof F=="function"?F.call(A,w,x):F,x==null)break e;w=Je({},w,x);break e;case 2:li=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[h]:x.push(h))}else A={eventTime:A,lane:x,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=A,d=w):_=_.next=A,l|=x;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;x=h,h=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(_===null&&(d=w),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Is|=l,t.lanes=l,t.memoizedState=w}}function X_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var lu={},ur=Ui(lu),zl=Ui(lu),jl=Ui(lu);function ms(t){if(t===lu)throw Error(X(174));return t}function Cm(t,e){switch($e(jl,e),$e(zl,t),$e(ur,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zf(e,t)}Ze(ur),$e(ur,e)}function Go(){Ze(ur),Ze(zl),Ze(jl)}function Cw(t){ms(jl.current);var e=ms(ur.current),n=zf(e,t.type);e!==n&&($e(zl,t),$e(ur,n))}function Pm(t){zl.current===t&&(Ze(ur),Ze(zl))}var Ye=Ui(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function km(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var Rc=qr.ReactCurrentDispatcher,af=qr.ReactCurrentBatchConfig,Ts=0,Xe=null,pt=null,Tt=null,dh=!1,_l=!1,Bl=0,BS=0;function Nt(){throw Error(X(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function Rm(t,e,n,r,s,o){if(Ts=o,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?$S:qS,t=n(r,s),_l){o=0;do{if(_l=!1,Bl=0,25<=o)throw Error(X(301));o+=1,Tt=pt=null,e.updateQueue=null,Rc.current=GS,t=n(r,s)}while(_l)}if(Rc.current=fh,e=pt!==null&&pt.next!==null,Ts=0,Tt=pt=Xe=null,dh=!1,e)throw Error(X(300));return t}function bm(){var t=Bl!==0;return Bl=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Rn(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Tt===null?Xe.memoizedState:Tt.next;if(e!==null)Tt=e,pt=t;else{if(t===null)throw Error(X(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Ul(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((Ts&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var w={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=w,l=r):d=d.next=w,Xe.lanes|=_,Is|=_}p=p.next}while(p!==null&&p!==o);d===null?l=r:d.next=h,Gn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Xe.lanes|=o,Is|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Gn(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Pw(){}function kw(t,e){var n=Xe,r=Rn(),s=e(),o=!Gn(r.memoizedState,s);if(o&&(r.memoizedState=s,tn=!0),r=r.queue,Lm(bw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,Rw.bind(null,n,r,s,e),void 0,null),It===null)throw Error(X(349));Ts&30||Aw(n,e,s)}return s}function Aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rw(t,e,n,r){e.value=n,e.getSnapshot=r,Lw(e)&&Nw(t)}function bw(t,e,n){return n(function(){Lw(e)&&Nw(t)})}function Lw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function Nw(t){var e=jr(t,1);e!==null&&$n(e,t,1,-1)}function J_(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=HS.bind(null,Xe,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ow(){return Rn().memoizedState}function bc(t,e,n,r){var s=sr();Xe.flags|=t,s.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function $h(t,e,n,r){var s=Rn();r=r===void 0?null:r;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,r!==null&&Am(r,l.deps)){s.memoizedState=Wl(e,n,o,r);return}}Xe.flags|=t,s.memoizedState=Wl(1|e,n,o,r)}function ey(t,e){return bc(8390656,8,t,e)}function Lm(t,e){return $h(2048,8,t,e)}function Mw(t,e){return $h(4,2,t,e)}function Dw(t,e){return $h(4,4,t,e)}function Vw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fw(t,e,n){return n=n!=null?n.concat([t]):null,$h(4,4,Vw.bind(null,e,t),n)}function Nm(){}function zw(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jw(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bw(t,e,n){return Ts&21?(Gn(n,e)||(n=q0(),Xe.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function US(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=af.transition;af.transition={};try{t(!1),e()}finally{Be=n,af.transition=r}}function Uw(){return Rn().memoizedState}function WS(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ww(t))Hw(e,n);else if(n=Iw(t,e,n,r),n!==null){var s=$t();$n(n,t,r,s),$w(n,e,r)}}function HS(t,e,n){var r=Si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ww(t))Hw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Gn(h,l)){var d=e.interleaved;d===null?(s.next=s,Im(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Iw(t,e,s,r),n!==null&&(s=$t(),$n(n,t,r,s),$w(n,e,r))}}function Ww(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Hw(t,e){_l=dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $w(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cm(t,n)}}var fh={readContext:An,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},$S={readContext:An,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:ey,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bc(4194308,4,Vw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WS.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:J_,useDebugValue:Nm,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=J_(!1),e=t[0];return t=US.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,s=sr();if(Ke){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),It===null)throw Error(X(349));Ts&30||Aw(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,ey(bw.bind(null,r,o,t),[t]),r.flags|=2048,Wl(9,Rw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sr(),e=It.identifierPrefix;if(Ke){var n=Nr,r=Lr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qS={readContext:An,useCallback:zw,useContext:An,useEffect:Lm,useImperativeHandle:Fw,useInsertionEffect:Mw,useLayoutEffect:Dw,useMemo:jw,useReducer:lf,useRef:Ow,useState:function(){return lf(Ul)},useDebugValue:Nm,useDeferredValue:function(t){var e=Rn();return Bw(e,pt.memoizedState,t)},useTransition:function(){var t=lf(Ul)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Pw,useSyncExternalStore:kw,useId:Uw,unstable_isNewReconciler:!1},GS={readContext:An,useCallback:zw,useContext:An,useEffect:Lm,useImperativeHandle:Fw,useInsertionEffect:Mw,useLayoutEffect:Dw,useMemo:jw,useReducer:uf,useRef:Ow,useState:function(){return uf(Ul)},useDebugValue:Nm,useDeferredValue:function(t){var e=Rn();return pt===null?e.memoizedState=t:Bw(e,pt.memoizedState,t)},useTransition:function(){var t=uf(Ul)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Pw,useSyncExternalStore:kw,useId:Uw,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function op(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qh={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Si(t),o=Dr(r,s);o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,s),e!==null&&($n(e,t,s,r),Ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Si(t),o=Dr(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,s),e!==null&&($n(e,t,s,r),Ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Si(t),s=Dr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ti(t,s,r),e!==null&&($n(e,t,r,n),Ac(e,t,r))}};function ty(t,e,n,r,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,o):!0}function qw(t,e,n){var r=!1,s=Oi,o=e.contextType;return typeof o=="object"&&o!==null?o=An(o):(s=rn(e)?xs:zt.current,r=e.contextTypes,o=(r=r!=null)?Ho(t,s):Oi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ny(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qh.enqueueReplaceState(e,e.state,null)}function ap(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sm(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=An(o):(o=rn(e)?xs:zt.current,s.context=Ho(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(op(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qh.enqueueReplaceState(s,s.state,null),ch(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",r=e;do n+=xI(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function cf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZS=typeof WeakMap=="function"?WeakMap:Map;function Gw(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mh||(mh=!0,yp=r),lp(t,e)},n}function Zw(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){lp(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ry(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=lC.bind(null,t,e,n),e.then(t,t))}function iy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var KS=qr.ReactCurrentOwner,tn=!1;function Ht(t,e,n,r){e.child=t===null?Tw(e,null,n,r):qo(e,t.child,n,r)}function oy(t,e,n,r,s){n=n.render;var o=e.ref;return Do(e,s),r=Rm(t,e,n,r,o,s),n=bm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(Ke&&n&&ym(e),e.flags|=1,Ht(t,e,r,s),e.child)}function ay(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Bm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kw(t,e,o,r,s)):(t=Mc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(l,r)&&t.ref===e.ref)return Br(t,e,s)}return e.flags|=1,t=Ci(o,r),t.ref=e.ref,t.return=e,e.child=t}function Kw(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ml(o,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Br(t,e,s)}return up(t,e,n,r,s)}function Qw(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ro,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Ro,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,$e(Ro,ln),ln|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,$e(Ro,ln),ln|=r;return Ht(t,e,s,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function up(t,e,n,r,s){var o=rn(n)?xs:zt.current;return o=Ho(e,o),Do(e,s),n=Rm(t,e,n,r,o,s),r=bm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(Ke&&r&&ym(e),e.flags|=1,Ht(t,e,n,s),e.child)}function ly(t,e,n,r,s){if(rn(n)){var o=!0;sh(e)}else o=!1;if(Do(e,s),e.stateNode===null)Lc(t,e),qw(e,n,r),ap(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=An(p):(p=rn(n)?xs:zt.current,p=Ho(e,p));var _=n.getDerivedStateFromProps,w=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||d!==p)&&ny(e,l,r,p),li=!1;var x=e.memoizedState;l.state=x,ch(e,r,l,s),d=e.memoizedState,h!==r||x!==d||nn.current||li?(typeof _=="function"&&(op(e,n,_,r),d=e.memoizedState),(h=li||ty(e,n,h,r,x,d,p))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Sw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,w=e.pendingProps,x=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=An(d):(d=rn(n)?xs:zt.current,d=Ho(e,d));var A=n.getDerivedStateFromProps;(_=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||x!==d)&&ny(e,l,r,d),li=!1,x=e.memoizedState,l.state=x,ch(e,r,l,s);var F=e.memoizedState;h!==w||x!==F||nn.current||li?(typeof A=="function"&&(op(e,n,A,r),F=e.memoizedState),(p=li||ty(e,n,p,r,x,F,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=F),l.props=r,l.state=F,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return cp(t,e,n,r,o,s)}function cp(t,e,n,r,s,o){Yw(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&G_(e,n,!1),Br(t,e,o);r=e.stateNode,KS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=qo(e,t.child,null,o),e.child=qo(e,null,h,o)):Ht(t,e,h,o),e.memoizedState=r.state,s&&G_(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q_(t,e.context,!1),Cm(t,e.containerInfo)}function uy(t,e,n,r,s){return $o(),wm(s),e.flags|=256,Ht(t,e,n,r),e.child}var hp={dehydrated:null,treeContext:null,retryLane:0};function dp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jw(t,e,n){var r=e.pendingProps,s=Ye.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ye,s&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Kh(l,r,0,null),t=ys(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=dp(n),e.memoizedState=hp,t):Om(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return QS(t,e,l,r,h,s,n);if(o){o=r.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ci(s,d),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Ci(h,o):(o=ys(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?dp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=hp,r}return o=t.child,t=o.sibling,r=Ci(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Om(t,e){return e=Kh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pc(t,e,n,r){return r!==null&&wm(r),qo(e,t.child,null,n),t=Om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QS(t,e,n,r,s,o,l){if(n)return e.flags&256?(e.flags&=-257,r=cf(Error(X(422))),pc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Kh({mode:"visible",children:r.children},s,0,null),o=ys(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&qo(e,t.child,null,l),e.child.memoizedState=dp(l),e.memoizedState=hp,o);if(!(e.mode&1))return pc(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(X(419)),r=cf(o,r,void 0),pc(t,e,l,r)}if(h=(l&t.childLanes)!==0,tn||h){if(r=It,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,jr(t,s),$n(r,t,s,-1))}return jm(),r=cf(Error(X(421))),pc(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uC.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,un=Ei(s.nextSibling),hn=e,Ke=!0,zn=null,t!==null&&(Tn[In++]=Lr,Tn[In++]=Nr,Tn[In++]=Es,Lr=t.id,Nr=t.overflow,Es=e),e=Om(e,r.children),e.flags|=4096,e)}function cy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sp(t.return,e,n)}function hf(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ex(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Ht(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cy(t,n,e);else if(t.tag===19)cy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hf(e,!0,n,null,o);break;case"together":hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YS(t,e,n){switch(e.tag){case 3:Xw(e),$o();break;case 5:Cw(e);break;case 1:rn(e.type)&&sh(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(lh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?Jw(t,e,n):($e(Ye,Ye.current&1),t=Br(t,e,n),t!==null?t.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ex(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return Br(t,e,n)}var tx,fp,nx,rx;tx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fp=function(){};nx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ms(ur.current);var o=null;switch(n){case"input":s=Mf(t,s),r=Mf(t,r),o=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),o=[];break;case"textarea":s=Ff(t,s),r=Ff(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rh)}jf(n,r);var l;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(kl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var d=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(kl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&qe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};rx=function(t,e,n,r){n!==r&&(e.flags|=4)};function el(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XS(t,e,n){var r=e.pendingProps;switch(vm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&ih(),Ot(e),null;case 3:return r=e.stateNode,Go(),Ze(nn),Ze(zt),km(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(xp(zn),zn=null))),fp(t,e),Ot(e),null;case 5:Pm(e);var s=ms(jl.current);if(n=e.type,t!==null&&e.stateNode!=null)nx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Ot(e),null}if(t=ms(ur.current),dc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ar]=e,r[Fl]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(s=0;s<sl.length;s++)qe(sl[s],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":v_(r,o),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qe("invalid",r);break;case"textarea":x_(r,o),qe("invalid",r)}jf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&hc(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&hc(r.textContent,h,t),s=["children",""+h]):kl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&qe("scroll",r)}switch(n){case"input":rc(r),w_(r,o,!0);break;case"textarea":rc(r),E_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ar]=e,t[Fl]=r,tx(t,e,!1,!1),e.stateNode=t;e:{switch(l=Bf(n,r),n){case"dialog":qe("cancel",t),qe("close",t),s=r;break;case"iframe":case"object":case"embed":qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<sl.length;s++)qe(sl[s],t);s=r;break;case"source":qe("error",t),s=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=r;break;case"details":qe("toggle",t),s=r;break;case"input":v_(t,r),s=Mf(t,r),qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),qe("invalid",t);break;case"textarea":x_(t,r),s=Ff(t,r),qe("invalid",t);break;default:s=r}jf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?O0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&L0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Al(t,d):typeof d=="number"&&Al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&qe("scroll",t):d!=null&&im(t,o,d,l))}switch(n){case"input":rc(t),w_(t,r,!1);break;case"textarea":rc(t),E_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ni(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Lo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)rx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=ms(jl.current),ms(ur.current),dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(o=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:hc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Ot(e),null;case 13:if(Ze(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&un!==null&&e.mode&1&&!(e.flags&128))xw(),$o(),e.flags|=98560,o=!1;else if(o=dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[ar]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else zn!==null&&(xp(zn),zn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?mt===0&&(mt=3):jm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Go(),fp(t,e),t===null&&Dl(e.stateNode.containerInfo),Ot(e),null;case 10:return Tm(e.type._context),Ot(e),null;case 17:return rn(e.type)&&ih(),Ot(e),null;case 19:if(Ze(Ye),o=e.memoizedState,o===null)return Ot(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)el(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=hh(t),l!==null){for(e.flags|=128,el(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>Ko&&(e.flags|=128,r=!0,el(o,!1),e.lanes=4194304)}else{if(!r)if(t=hh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),el(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ke)return Ot(e),null}else 2*st()-o.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,r=!0,el(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Ye.current,$e(Ye,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return zm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function JS(t,e){switch(vm(e),e.tag){case 1:return rn(e.type)&&ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Ze(nn),Ze(zt),km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pm(e),null;case 13:if(Ze(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));$o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(Ye),null;case 4:return Go(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var mc=!1,Vt=!1,eC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function pp(t,e,n){try{n()}catch(r){nt(t,e,r)}}var hy=!1;function tC(t,e){if(Yf=eh,t=lw(),_m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,w=t,x=null;t:for(;;){for(var A;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||r!==0&&w.nodeType!==3||(d=l+r),w.nodeType===3&&(l+=w.nodeValue.length),(A=w.firstChild)!==null;)x=w,w=A;for(;;){if(w===t)break t;if(x===n&&++p===s&&(h=l),x===o&&++_===r&&(d=l),(A=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=A}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xf={focusedElem:t,selectionRange:n},eh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var b=F.memoizedProps,z=F.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:Vn(e.type,b),z);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(H){nt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return F=hy,hy=!1,F}function yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&pp(e,n,o)}s=s.next}while(s!==r)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ix(t){var e=t.alternate;e!==null&&(t.alternate=null,ix(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[Fl],delete e[tp],delete e[VS],delete e[FS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sx(t){return t.tag===5||t.tag===3||t.tag===4}function dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rh));else if(r!==4&&(t=t.child,t!==null))for(gp(t,e,n),t=t.sibling;t!==null;)gp(t,e,n),t=t.sibling}function _p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}var Ct=null,Fn=!1;function si(t,e,n){for(n=n.child;n!==null;)ox(t,e,n),n=n.sibling}function ox(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:Vt||Ao(n,e);case 6:var r=Ct,s=Fn;Ct=null,si(t,e,n),Ct=r,Fn=s,Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?rf(t.parentNode,n):t.nodeType===1&&rf(t,n),Nl(t)):rf(Ct,n.stateNode));break;case 4:r=Ct,s=Fn,Ct=n.stateNode.containerInfo,Fn=!0,si(t,e,n),Ct=r,Fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&pp(n,e,l),s=s.next}while(s!==r)}si(t,e,n);break;case 1:if(!Vt&&(Ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){nt(n,e,h)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,si(t,e,n),Vt=r):si(t,e,n);break;default:si(t,e,n)}}function fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eC),e.forEach(function(r){var s=cC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Ct=h.stateNode,Fn=!1;break e;case 3:Ct=h.stateNode.containerInfo,Fn=!0;break e;case 4:Ct=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Ct===null)throw Error(X(160));ox(o,l,s),Ct=null,Fn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){nt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ax(e,t),e=e.sibling}function ax(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ir(t),r&4){try{yl(3,t,t.return),Gh(3,t)}catch(b){nt(t,t.return,b)}try{yl(5,t,t.return)}catch(b){nt(t,t.return,b)}}break;case 1:Dn(e,t),ir(t),r&512&&n!==null&&Ao(n,n.return);break;case 5:if(Dn(e,t),ir(t),r&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(b){nt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&A0(s,o),Bf(h,l);var p=Bf(h,o);for(l=0;l<d.length;l+=2){var _=d[l],w=d[l+1];_==="style"?O0(s,w):_==="dangerouslySetInnerHTML"?L0(s,w):_==="children"?Al(s,w):im(s,_,w,p)}switch(h){case"input":Df(s,o);break;case"textarea":R0(s,o);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?Lo(s,!!o.multiple,A,!1):x!==!!o.multiple&&(o.defaultValue!=null?Lo(s,!!o.multiple,o.defaultValue,!0):Lo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Fl]=o}catch(b){nt(t,t.return,b)}}break;case 6:if(Dn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(b){nt(t,t.return,b)}}break;case 3:if(Dn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(b){nt(t,t.return,b)}break;case 4:Dn(e,t),ir(t);break;case 13:Dn(e,t),ir(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Vm=st())),r&4&&fy(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(p=Vt)||_,Dn(e,t),Vt=p):Dn(e,t),ir(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(oe=t,_=t.child;_!==null;){for(w=oe=_;oe!==null;){switch(x=oe,A=x.child,x.tag){case 0:case 11:case 14:case 15:yl(4,x,x.return);break;case 1:Ao(x,x.return);var F=x.stateNode;if(typeof F.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(b){nt(r,n,b)}}break;case 5:Ao(x,x.return);break;case 22:if(x.memoizedState!==null){my(w);continue}}A!==null?(A.return=x,oe=A):my(w)}_=_.sibling}e:for(_=null,w=t;;){if(w.tag===5){if(_===null){_=w;try{s=w.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=N0("display",l))}catch(b){nt(t,t.return,b)}}}else if(w.tag===6){if(_===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(b){nt(t,t.return,b)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;_===w&&(_=null),w=w.return}_===w&&(_=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Dn(e,t),ir(t),r&4&&fy(t);break;case 21:break;default:Dn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sx(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Al(s,""),r.flags&=-33);var o=dy(t);_p(t,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,h=dy(t);gp(t,h,l);break;default:throw Error(X(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nC(t,e,n){oe=t,lx(t)}function lx(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||mc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Vt;h=mc;var p=Vt;if(mc=l,(Vt=d)&&!p)for(oe=s;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?gy(s):d!==null?(d.return=l,oe=d):gy(s);for(;o!==null;)oe=o,lx(o),o=o.sibling;oe=s,mc=h,Vt=p}py(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):py(t)}}function py(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Gh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&X_(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var w=_.dehydrated;w!==null&&Nl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vt||e.flags&512&&mp(e)}catch(x){nt(e,e.return,x)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function my(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function gy(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(d){nt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){nt(e,s,d)}}var o=e.return;try{mp(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{mp(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var rC=Math.ceil,ph=qr.ReactCurrentDispatcher,Mm=qr.ReactCurrentOwner,kn=qr.ReactCurrentBatchConfig,Ne=0,It=null,ht=null,At=0,ln=0,Ro=Ui(0),mt=0,Hl=null,Is=0,Zh=0,Dm=0,vl=null,Jt=null,Vm=0,Ko=1/0,Rr=null,mh=!1,yp=null,Ii=null,gc=!1,gi=null,gh=0,wl=0,vp=null,Nc=-1,Oc=0;function $t(){return Ne&6?st():Nc!==-1?Nc:Nc=st()}function Si(t){return t.mode&1?Ne&2&&At!==0?At&-At:jS.transition!==null?(Oc===0&&(Oc=q0()),Oc):(t=Be,t!==0||(t=window.event,t=t===void 0?16:J0(t.type)),t):1}function $n(t,e,n,r){if(50<wl)throw wl=0,vp=null,Error(X(185));su(t,n,r),(!(Ne&2)||t!==It)&&(t===It&&(!(Ne&2)&&(Zh|=n),mt===4&&ci(t,At)),sn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Ko=st()+500,Hh&&Wi()))}function sn(t,e){var n=t.callbackNode;jI(t,e);var r=Jc(t,t===It?At:0);if(r===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?zS(_y.bind(null,t)):yw(_y.bind(null,t)),MS(function(){!(Ne&6)&&Wi()}),n=null;else{switch(G0(r)){case 1:n=um;break;case 4:n=H0;break;case 16:n=Xc;break;case 536870912:n=$0;break;default:n=Xc}n=gx(n,ux.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ux(t,e){if(Nc=-1,Oc=0,Ne&6)throw Error(X(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var r=Jc(t,t===It?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_h(t,r);else{e=r;var s=Ne;Ne|=2;var o=hx();(It!==t||At!==e)&&(Rr=null,Ko=st()+500,_s(t,e));do try{oC();break}catch(h){cx(t,h)}while(!0);Em(),ph.current=o,Ne=s,ht!==null?e=0:(It=null,At=0,e=mt)}if(e!==0){if(e===2&&(s=qf(t),s!==0&&(r=s,e=wp(t,s))),e===1)throw n=Hl,_s(t,0),ci(t,r),sn(t,st()),n;if(e===6)ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!iC(s)&&(e=_h(t,r),e===2&&(o=qf(t),o!==0&&(r=o,e=wp(t,o))),e===1))throw n=Hl,_s(t,0),ci(t,r),sn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:hs(t,Jt,Rr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=Vm+500-st(),10<e)){if(Jc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ep(hs.bind(null,t,Jt,Rr),e);break}hs(t,Jt,Rr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-Hn(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rC(r/1960))-r,10<r){t.timeoutHandle=ep(hs.bind(null,t,Jt,Rr),r);break}hs(t,Jt,Rr);break;case 5:hs(t,Jt,Rr);break;default:throw Error(X(329))}}}return sn(t,st()),t.callbackNode===n?ux.bind(null,t):null}function wp(t,e){var n=vl;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=_h(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&xp(e)),t}function xp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function iC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Gn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~Dm,e&=~Zh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function _y(t){if(Ne&6)throw Error(X(327));Vo();var e=Jc(t,0);if(!(e&1))return sn(t,st()),null;var n=_h(t,e);if(t.tag!==0&&n===2){var r=qf(t);r!==0&&(e=r,n=wp(t,r))}if(n===1)throw n=Hl,_s(t,0),ci(t,e),sn(t,st()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,Jt,Rr),sn(t,st()),null}function Fm(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Ko=st()+500,Hh&&Wi())}}function Ss(t){gi!==null&&gi.tag===0&&!(Ne&6)&&Vo();var e=Ne;Ne|=1;var n=kn.transition,r=Be;try{if(kn.transition=null,Be=1,t)return t()}finally{Be=r,kn.transition=n,Ne=e,!(Ne&6)&&Wi()}}function zm(){ln=Ro.current,Ze(Ro)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OS(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(vm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ih();break;case 3:Go(),Ze(nn),Ze(zt),km();break;case 5:Pm(r);break;case 4:Go();break;case 13:Ze(Ye);break;case 19:Ze(Ye);break;case 10:Tm(r.type._context);break;case 22:case 23:zm()}n=n.return}if(It=t,ht=t=Ci(t.current,null),At=ln=e,mt=0,Hl=null,Dm=Zh=Is=0,Jt=vl=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}ps=null}return t}function cx(t,e){do{var n=ht;try{if(Em(),Rc.current=fh,dh){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dh=!1}if(Ts=0,Tt=pt=Xe=null,_l=!1,Bl=0,Mm.current=null,n===null||n.return===null){mt=1,Hl=e,ht=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,w=_.tag;if(!(_.mode&1)&&(w===0||w===11||w===15)){var x=_.alternate;x?(_.updateQueue=x.updateQueue,_.memoizedState=x.memoizedState,_.lanes=x.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=iy(l);if(A!==null){A.flags&=-257,sy(A,l,h,o,e),A.mode&1&&ry(o,p,e),e=A,d=p;var F=e.updateQueue;if(F===null){var b=new Set;b.add(d),e.updateQueue=b}else F.add(d);break e}else{if(!(e&1)){ry(o,p,e),jm();break e}d=Error(X(426))}}else if(Ke&&h.mode&1){var z=iy(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),sy(z,l,h,o,e),wm(Zo(d,h));break e}}o=d=Zo(d,h),mt!==4&&(mt=2),vl===null?vl=[o]:vl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=Gw(o,d,e);Y_(o,S);break e;case 1:h=d;var T=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ii===null||!Ii.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=Zw(o,h,e);Y_(o,H);break e}}o=o.return}while(o!==null)}fx(n)}catch(Q){e=Q,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function hx(){var t=ph.current;return ph.current=fh,t===null?fh:t}function jm(){(mt===0||mt===3||mt===2)&&(mt=4),It===null||!(Is&268435455)&&!(Zh&268435455)||ci(It,At)}function _h(t,e){var n=Ne;Ne|=2;var r=hx();(It!==t||At!==e)&&(Rr=null,_s(t,e));do try{sC();break}catch(s){cx(t,s)}while(!0);if(Em(),Ne=n,ph.current=r,ht!==null)throw Error(X(261));return It=null,At=0,mt}function sC(){for(;ht!==null;)dx(ht)}function oC(){for(;ht!==null&&!bI();)dx(ht)}function dx(t){var e=mx(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?fx(t):ht=e,Mm.current=null}function fx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JS(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=XS(n,e,ln),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function hs(t,e,n){var r=Be,s=kn.transition;try{kn.transition=null,Be=1,aC(t,e,n,r)}finally{kn.transition=s,Be=r}return null}function aC(t,e,n,r){do Vo();while(gi!==null);if(Ne&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(BI(t,o),t===It&&(ht=It=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,gx(Xc,function(){return Vo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var l=Be;Be=1;var h=Ne;Ne|=4,Mm.current=null,tC(t,n),ax(n,t),PS(Xf),eh=!!Yf,Xf=Yf=null,t.current=n,nC(n),LI(),Ne=h,Be=l,kn.transition=o}else t.current=n;if(gc&&(gc=!1,gi=t,gh=s),o=t.pendingLanes,o===0&&(Ii=null),MI(n.stateNode),sn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mh)throw mh=!1,t=yp,yp=null,t;return gh&1&&t.tag!==0&&Vo(),o=t.pendingLanes,o&1?t===vp?wl++:(wl=0,vp=t):wl=0,Wi(),null}function Vo(){if(gi!==null){var t=G0(gh),e=kn.transition,n=Be;try{if(kn.transition=null,Be=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,gh=0,Ne&6)throw Error(X(331));var s=Ne;for(Ne|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var _=oe;switch(_.tag){case 0:case 11:case 15:yl(8,_,o)}var w=_.child;if(w!==null)w.return=_,oe=w;else for(;oe!==null;){_=oe;var x=_.sibling,A=_.return;if(ix(_),_===p){oe=null;break}if(x!==null){x.return=A,oe=x;break}oe=A}}}var F=o.alternate;if(F!==null){var b=F.child;if(b!==null){F.child=null;do{var z=b.sibling;b.sibling=null,b=z}while(b!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yl(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,oe=S;break e}oe=o.return}}var T=t.current;for(oe=T;oe!==null;){l=oe;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,oe=O;else e:for(l=T;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Gh(9,h)}}catch(Q){nt(h,h.return,Q)}if(h===l){oe=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,oe=H;break e}oe=h.return}}if(Ne=s,Wi(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(zh,t)}catch{}r=!0}return r}finally{Be=n,kn.transition=e}}return!1}function yy(t,e,n){e=Zo(n,e),e=Gw(t,e,1),t=Ti(t,e,1),e=$t(),t!==null&&(su(t,1,e),sn(t,e))}function nt(t,e,n){if(t.tag===3)yy(t,t,n);else for(;e!==null;){if(e.tag===3){yy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=Zo(n,t),t=Zw(e,t,1),e=Ti(e,t,1),t=$t(),e!==null&&(su(e,1,t),sn(e,t));break}}e=e.return}}function lC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>st()-Vm?_s(t,0):Dm|=n),sn(t,e)}function px(t,e){e===0&&(t.mode&1?(e=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):e=1);var n=$t();t=jr(t,e),t!==null&&(su(t,e,n),sn(t,n))}function uC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),px(t,n)}function cC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),px(t,n)}var mx;mx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,YS(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ke&&e.flags&1048576&&vw(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lc(t,e),t=e.pendingProps;var s=Ho(e,zt.current);Do(e,n),s=Rm(null,e,r,t,s,n);var o=bm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(o=!0,sh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sm(e),s.updater=qh,e.stateNode=s,s._reactInternals=e,ap(e,r,t,n),e=cp(null,e,r,!0,o,n)):(e.tag=0,Ke&&o&&ym(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dC(r),t=Vn(r,t),s){case 0:e=up(null,e,r,t,n);break e;case 1:e=ly(null,e,r,t,n);break e;case 11:e=oy(null,e,r,t,n);break e;case 14:e=ay(null,e,r,Vn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),up(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),ly(t,e,r,s,n);case 3:e:{if(Xw(e),t===null)throw Error(X(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Sw(t,e),ch(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Zo(Error(X(423)),e),e=uy(t,e,r,n,s);break e}else if(r!==s){s=Zo(Error(X(424)),e),e=uy(t,e,r,n,s);break e}else for(un=Ei(e.stateNode.containerInfo.firstChild),hn=e,Ke=!0,zn=null,n=Tw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),r===s){e=Br(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return Cw(e),t===null&&ip(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Jf(r,s)?l=null:o!==null&&Jf(r,o)&&(e.flags|=32),Yw(t,e),Ht(t,e,l,n),e.child;case 6:return t===null&&ip(e),null;case 13:return Jw(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qo(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),oy(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,$e(lh,r._currentValue),r._currentValue=l,o!==null)if(Gn(o.value,l)){if(o.children===s.children&&!nn.current){e=Br(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Dr(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),sp(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(X(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),sp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Do(e,n),s=An(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=Vn(r,e.pendingProps),s=Vn(r.type,s),ay(t,e,r,s,n);case 15:return Kw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Lc(t,e),e.tag=1,rn(r)?(t=!0,sh(e)):t=!1,Do(e,n),qw(e,r,s),ap(e,r,s,n),cp(null,e,r,!0,t,n);case 19:return ex(t,e,n);case 22:return Qw(t,e,n)}throw Error(X(156,e.tag))};function gx(t,e){return W0(t,e)}function hC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new hC(t,e,n,r)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dC(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===om)return 11;if(t===am)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mc(t,e,n,r,s,o){var l=2;if(r=t,typeof t=="function")Bm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case wo:return ys(n.children,s,o,e);case sm:l=8,s|=8;break;case bf:return t=Pn(12,n,e,s|2),t.elementType=bf,t.lanes=o,t;case Lf:return t=Pn(13,n,e,s),t.elementType=Lf,t.lanes=o,t;case Nf:return t=Pn(19,n,e,s),t.elementType=Nf,t.lanes=o,t;case C0:return Kh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I0:l=10;break e;case S0:l=9;break e;case om:l=11;break e;case am:l=14;break e;case ai:l=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Pn(l,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function ys(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Kh(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=C0,t.lanes=n,t.stateNode={isHidden:!1},t}function df(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function ff(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qd(0),this.expirationTimes=qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Um(t,e,n,r,s,o,l,h,d){return t=new fC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(o),t}function pC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _x(t){if(!t)return Oi;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(rn(n))return _w(t,n,e)}return e}function yx(t,e,n,r,s,o,l,h,d){return t=Um(n,r,!0,t,s,o,l,h,d),t.context=_x(null),n=t.current,r=$t(),s=Si(n),o=Dr(r,s),o.callback=e??null,Ti(n,o,s),t.current.lanes=s,su(t,s,r),sn(t,r),t}function Qh(t,e,n,r){var s=e.current,o=$t(),l=Si(s);return n=_x(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(s,e,l),t!==null&&($n(t,s,l,o),Ac(t,s,l)),l}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wm(t,e){vy(t,e),(t=t.alternate)&&vy(t,e)}function mC(){return null}var vx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hm(t){this._internalRoot=t}Yh.prototype.render=Hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Qh(t,e,null,null)};Yh.prototype.unmount=Hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){Qh(null,t,null,null)}),e[zr]=null}};function Yh(t){this._internalRoot=t}Yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&X0(t)}};function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wy(){}function gC(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var p=yh(l);o.call(p)}}var l=yx(e,r,t,0,null,!1,!1,"",wy);return t._reactRootContainer=l,t[zr]=l.current,Dl(t.nodeType===8?t.parentNode:t),Ss(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=yh(d);h.call(p)}}var d=Um(t,0,!1,null,null,!1,!1,"",wy);return t._reactRootContainer=d,t[zr]=d.current,Dl(t.nodeType===8?t.parentNode:t),Ss(function(){Qh(e,d,n,r)}),d}function Jh(t,e,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=yh(l);h.call(d)}}Qh(e,l,t,s)}else l=gC(n,e,t,s,r);return yh(l)}Z0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(cm(e,n|1),sn(e,st()),!(Ne&6)&&(Ko=st()+500,Wi()))}break;case 13:Ss(function(){var r=jr(t,1);if(r!==null){var s=$t();$n(r,t,1,s)}}),Wm(t,1)}};hm=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=$t();$n(e,t,134217728,n)}Wm(t,134217728)}};K0=function(t){if(t.tag===13){var e=Si(t),n=jr(t,e);if(n!==null){var r=$t();$n(n,t,e,r)}Wm(t,e)}};Q0=function(){return Be};Y0=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Wf=function(t,e,n){switch(e){case"input":if(Df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wh(r);if(!s)throw Error(X(90));k0(r),Df(r,s)}}}break;case"textarea":R0(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};V0=Fm;F0=Ss;var _C={usingClientEntryPoint:!1,Events:[au,Io,Wh,M0,D0,Fm]},tl={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yC={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B0(t),t===null?null:t.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||mC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{zh=_c.inject(yC),lr=_c}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_C;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(e))throw Error(X(200));return pC(t,e,null,n)};fn.createRoot=function(t,e){if(!$m(t))throw Error(X(299));var n=!1,r="",s=vx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Um(t,1,!1,null,null,n,!1,r,s),t[zr]=e.current,Dl(t.nodeType===8?t.parentNode:t),new Hm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=B0(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return Ss(t)};fn.hydrate=function(t,e,n){if(!Xh(e))throw Error(X(200));return Jh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!$m(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=vx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=yx(e,null,t,1,n??null,s,!1,o,l),t[zr]=e.current,Dl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yh(e)};fn.render=function(t,e,n){if(!Xh(e))throw Error(X(200));return Jh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(X(40));return t._reactRootContainer?(Ss(function(){Jh(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};fn.unstable_batchedUpdates=Fm;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xh(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Jh(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function wx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wx)}catch(t){console.error(t)}}wx(),w0.exports=fn;var xx=w0.exports,xy=xx;Af.createRoot=xy.createRoot,Af.hydrateRoot=xy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const Ey="popstate";function vC(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:l,hash:h}=r.location;return Ep("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tx(s)}return xC(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ex(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wC(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function Ep(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?aa(e):e,{state:n,key:e&&e.key||r||wC()})}function Tx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function aa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,h=_i.Pop,d=null,p=_();p==null&&(p=0,l.replaceState($l({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function w(){h=_i.Pop;let z=_(),S=z==null?null:z-p;p=z,d&&d({action:h,location:b.location,delta:S})}function x(z,S){h=_i.Push;let T=Ep(b.location,z,S);p=_()+1;let O=Ty(T,p),H=b.createHref(T);try{l.pushState(O,"",H)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(H)}o&&d&&d({action:h,location:b.location,delta:1})}function A(z,S){h=_i.Replace;let T=Ep(b.location,z,S);p=_();let O=Ty(T,p),H=b.createHref(T);l.replaceState(O,"",H),o&&d&&d({action:h,location:b.location,delta:0})}function F(z){let S=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof z=="string"?z:Tx(z);return T=T.replace(/ $/,"%20"),gt(S,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,S)}let b={get action(){return h},get location(){return t(s,l)},listen(z){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ey,w),d=z,()=>{s.removeEventListener(Ey,w),d=null}},createHref(z){return e(s,z)},createURL:F,encodeLocation(z){let S=F(z);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:x,replace:A,go(z){return l.go(z)}};return b}var Iy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iy||(Iy={}));function EC(t,e,n){return n===void 0&&(n="/"),TC(t,e,n)}function TC(t,e,n,r){let s=typeof e=="string"?aa(e):e,o=Cx(s.pathname||"/",n);if(o==null)return null;let l=Ix(t);IC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=DC(o);h=NC(l[d],p)}return h}function Ix(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(gt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=vs([r,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Ix(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:bC(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of Sx(o.path))s(o,l,d)}),e}function Sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Sx(r.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function IC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SC=/^:[\w-]+$/,CC=3,PC=2,kC=1,AC=10,RC=-2,Sy=t=>t==="*";function bC(t,e){let n=t.split("/"),r=n.length;return n.some(Sy)&&(r+=RC),e&&(r+=PC),n.filter(s=>!Sy(s)).reduce((s,o)=>s+(SC.test(o)?CC:o===""?kC:AC),r)}function LC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function NC(t,e,n){let{routesMeta:r}=t,s={},o="/",l=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",w=OC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),x=d.route;if(!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:vs([o,w.pathname]),pathnameBase:UC(vs([o,w.pathnameBase])),route:x}),w.pathnameBase!=="/"&&(o=vs([o,w.pathnameBase]))}return l}function OC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,_,w)=>{let{paramName:x,isOptional:A}=_;if(x==="*"){let b=h[w]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const F=h[w];return A&&!F?p[x]=void 0:p[x]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function MC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ex(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ex(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function VC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?aa(t):t;return{pathname:n?n.startsWith("/")?n:FC(n,e):e,search:WC(r),hash:HC(s)}}function FC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jC(t,e){let n=zC(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function BC(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=aa(t):(s=$l({},t),gt(!s.pathname||!s.pathname.includes("?"),pf("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),pf("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),pf("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),w-=1;s.pathname=x.join("/")}h=w>=0?e[w]:"/"}let d=VC(s,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),UC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $C(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Px=["post","put","patch","delete"];new Set(Px);const qC=["get",...Px];new Set(qC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}const qm=q.createContext(null),GC=q.createContext(null),ed=q.createContext(null),td=q.createContext(null),Ns=q.createContext({outlet:null,matches:[],isDataRoute:!1}),kx=q.createContext(null);function nd(){return q.useContext(td)!=null}function Ax(){return nd()||gt(!1),q.useContext(td).location}function Rx(t){q.useContext(ed).static||q.useLayoutEffect(t)}function uu(){let{isDataRoute:t}=q.useContext(Ns);return t?oP():ZC()}function ZC(){nd()||gt(!1);let t=q.useContext(qm),{basename:e,future:n,navigator:r}=q.useContext(ed),{matches:s}=q.useContext(Ns),{pathname:o}=Ax(),l=JSON.stringify(jC(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return Rx(()=>{h.current=!0}),q.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let w=BC(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:vs([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,l,o,t])}function Gm(){let{matches:t}=q.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function KC(t,e){return QC(t,e)}function QC(t,e,n,r){nd()||gt(!1);let{navigator:s}=q.useContext(ed),{matches:o}=q.useContext(Ns),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=Ax(),_;if(e){var w;let z=typeof e=="string"?aa(e):e;d==="/"||(w=z.pathname)!=null&&w.startsWith(d)||gt(!1),_=z}else _=p;let x=_.pathname||"/",A=x;if(d!=="/"){let z=d.replace(/^\//,"").split("/");A="/"+x.replace(/^\//,"").split("/").slice(z.length).join("/")}let F=EC(t,{pathname:A}),b=tP(F&&F.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:vs([d,s.encodeLocation?s.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?d:vs([d,s.encodeLocation?s.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,n,r);return e&&b?q.createElement(td.Provider,{value:{location:ql({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:_i.Pop}},b):b}function YC(){let t=sP(),e=$C(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,null)}const XC=q.createElement(YC,null);class JC extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Ns.Provider,{value:this.props.routeContext},q.createElement(kx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eP(t){let{routeContext:e,match:n,children:r}=t,s=q.useContext(qm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Ns.Provider,{value:e},r)}function tP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let _=l.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);_>=0||gt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=_),w.route.id){let{loaderData:x,errors:A}=n,F=w.route.loader&&x[w.route.id]===void 0&&(!A||A[w.route.id]===void 0);if(w.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,w,x)=>{let A,F=!1,b=null,z=null;n&&(A=h&&w.route.id?h[w.route.id]:void 0,b=w.route.errorElement||XC,d&&(p<0&&x===0?(aP("route-fallback"),F=!0,z=null):p===x&&(F=!0,z=w.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,x+1)),T=()=>{let O;return A?O=b:F?O=z:w.route.Component?O=q.createElement(w.route.Component,null):w.route.element?O=w.route.element:O=_,q.createElement(eP,{match:w,routeContext:{outlet:_,matches:S,isDataRoute:n!=null},children:O})};return n&&(w.route.ErrorBoundary||w.route.errorElement||x===0)?q.createElement(JC,{location:n.location,revalidation:n.revalidation,component:b,error:A,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}var bx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bx||{}),Lx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lx||{});function nP(t){let e=q.useContext(qm);return e||gt(!1),e}function rP(t){let e=q.useContext(GC);return e||gt(!1),e}function iP(t){let e=q.useContext(Ns);return e||gt(!1),e}function Nx(t){let e=iP(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function sP(){var t;let e=q.useContext(kx),n=rP(),r=Nx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oP(){let{router:t}=nP(bx.UseNavigateStable),e=Nx(Lx.UseNavigateStable),n=q.useRef(!1);return Rx(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ql({fromRouteId:e},o)))},[t,e])}const Cy={};function aP(t,e,n){Cy[t]||(Cy[t]=!0)}function lP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function po(t){gt(!1)}function uP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_i.Pop,navigator:o,static:l=!1,future:h}=t;nd()&&gt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:ql({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof r=="string"&&(r=aa(r));let{pathname:_="/",search:w="",hash:x="",state:A=null,key:F="default"}=r,b=q.useMemo(()=>{let z=Cx(_,d);return z==null?null:{location:{pathname:z,search:w,hash:x,state:A,key:F},navigationType:s}},[d,_,w,x,A,F,s]);return b==null?null:q.createElement(ed.Provider,{value:p},q.createElement(td.Provider,{children:n,value:b}))}function cP(t){let{children:e,location:n}=t;return KC(Tp(e),n)}new Promise(()=>{});function Tp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(r,s)=>{if(!q.isValidElement(r))return;let o=[...e,s];if(r.type===q.Fragment){n.push.apply(n,Tp(r.props.children,o));return}r.type!==po&&gt(!1),!r.props.index||!r.props.children||gt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Tp(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hP="6";try{window.__reactRouterVersion=hP}catch{}const dP="startTransition",Py=lI[dP];function fP(t){let{basename:e,children:n,future:r,window:s}=t,o=q.useRef();o.current==null&&(o.current=vC({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},_=q.useCallback(w=>{p&&Py?Py(()=>d(w)):d(w)},[d,p]);return q.useLayoutEffect(()=>l.listen(_),[l,_]),q.useEffect(()=>lP(r),[r]),q.createElement(uP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ky||(ky={}));var Ay;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ay||(Ay={}));const pP=()=>{};var Ry={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,_=o>>2,w=(o&3)<<4|h>>4;let x=(h&15)<<2|p>>6,A=p&63;d||(A=64,l||(x=64)),r.push(n[_],n[w],n[x],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ox(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||w==null)throw new gP;const x=o<<2|h>>4;if(r.push(x),p!==64){const A=h<<4&240|p>>2;if(r.push(A),w!==64){const F=p<<6&192|w;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _P=function(t){const e=Ox(t);return Mx.encodeByteArray(e,!0)},vh=function(t){return _P(t).replace(/\./g,"")},Dx=function(t){try{return Mx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=()=>yP().__FIREBASE_DEFAULTS__,wP=()=>{if(typeof process>"u"||typeof Ry>"u")return;const t=Ry.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Dx(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return pP()||vP()||wP()||xP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vx=t=>{var e,n;return(n=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},EP=t=>{const e=Vx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fx=()=>{var t;return(t=rd())==null?void 0:t.config},zx=t=>{var e;return(e=rd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vh(JSON.stringify(n)),vh(JSON.stringify(l)),""].join(".")}const xl={};function SP(){const t={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?t.emulator.push(e):t.prod.push(e);return t}function CP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let by=!1;function Bx(t,e){if(typeof window>"u"||typeof document>"u"||!la(window.location.host)||xl[t]===e||xl[t]||by)return;xl[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=SP().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,A){x.setAttribute("width","24"),x.setAttribute("id",A),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{by=!0,l()},x}function _(x,A){x.setAttribute("id",A),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=CP(r),A=n("text"),F=document.getElementById(A)||document.createElement("span"),b=n("learnmore"),z=document.getElementById(b)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const O=x.element;h(O),_(z,b);const H=p();d(T,S),O.append(T,F,z,H),document.body.appendChild(O)}o?(F.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function kP(){var e;const t=(e=rd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LP(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NP(){return!kP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OP(){try{return typeof indexedDB=="object"}catch{return!1}}function MP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DP,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?VP(o,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Gr(s,h,r)}}function VP(t,e){return t.replace(FP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FP=/\{\$([^}]+)}/g;function zP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(Ly(o)&&Ly(l)){if(!Cs(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function al(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jP(t,e){const n=new BP(t,e);return n.subscribe.bind(n)}class BP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mf),s.error===void 0&&(s.error=mf),s.complete===void 0&&(s.complete=mf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($P(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HP(t){return t===ds?void 0:t}function $P(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const GP={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},ZP=Ce.INFO,KP={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},QP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=ZP,this._logHandler=QP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const YP=(t,e)=>e.some(n=>t instanceof n);let Ny,Oy;function XP(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JP(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ux=new WeakMap,Ip=new WeakMap,Wx=new WeakMap,gf=new WeakMap,Km=new WeakMap;function ek(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Ux.set(n,t)}).catch(()=>{}),Km.set(e,t),e}function tk(t){if(Ip.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ip.set(t,e)}let Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nk(t){Sp=t(Sp)}function rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_f(this),e,...n);return Wx.set(r,e.sort?e.sort():[e]),Pi(r)}:JP().includes(t)?function(...e){return t.apply(_f(this),e),Pi(Ux.get(this))}:function(...e){return Pi(t.apply(_f(this),e))}}function ik(t){return typeof t=="function"?rk(t):(t instanceof IDBTransaction&&tk(t),YP(t,XP())?new Proxy(t,Sp):t)}function Pi(t){if(t instanceof IDBRequest)return ek(t);if(gf.has(t))return gf.get(t);const e=ik(t);return e!==t&&(gf.set(t,e),Km.set(e,t)),e}const _f=t=>Km.get(t);function sk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Pi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Pi(l.result),d.oldVersion,d.newVersion,Pi(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const ok=["get","getKey","getAll","getAllKeys","count"],ak=["put","add","delete","clear"],yf=new Map;function My(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ak.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ok.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return yf.set(e,o),o}nk(t=>({...t,get:(e,n,r)=>My(e,n)||t.get(e,n,r),has:(e,n)=>!!My(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cp="@firebase/app",Dy="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Zm("@firebase/app"),ck="@firebase/app-compat",hk="@firebase/analytics-compat",dk="@firebase/analytics",fk="@firebase/app-check-compat",pk="@firebase/app-check",mk="@firebase/auth",gk="@firebase/auth-compat",_k="@firebase/database",yk="@firebase/data-connect",vk="@firebase/database-compat",wk="@firebase/functions",xk="@firebase/functions-compat",Ek="@firebase/installations",Tk="@firebase/installations-compat",Ik="@firebase/messaging",Sk="@firebase/messaging-compat",Ck="@firebase/performance",Pk="@firebase/performance-compat",kk="@firebase/remote-config",Ak="@firebase/remote-config-compat",Rk="@firebase/storage",bk="@firebase/storage-compat",Lk="@firebase/firestore",Nk="@firebase/ai",Ok="@firebase/firestore-compat",Mk="firebase",Dk="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",Vk={[Cp]:"fire-core",[ck]:"fire-core-compat",[dk]:"fire-analytics",[hk]:"fire-analytics-compat",[pk]:"fire-app-check",[fk]:"fire-app-check-compat",[mk]:"fire-auth",[gk]:"fire-auth-compat",[_k]:"fire-rtdb",[yk]:"fire-data-connect",[vk]:"fire-rtdb-compat",[wk]:"fire-fn",[xk]:"fire-fn-compat",[Ek]:"fire-iid",[Tk]:"fire-iid-compat",[Ik]:"fire-fcm",[Sk]:"fire-fcm-compat",[Ck]:"fire-perf",[Pk]:"fire-perf-compat",[kk]:"fire-rc",[Ak]:"fire-rc-compat",[Rk]:"fire-gcs",[bk]:"fire-gcs-compat",[Lk]:"fire-fst",[Ok]:"fire-fst-compat",[Nk]:"fire-vertex","fire-js":"fire-js",[Mk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,Fk=new Map,kp=new Map;function Vy(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qo(t){const e=t.name;if(kp.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,t);for(const n of wh.values())Vy(n,t);for(const n of Fk.values())Vy(n,t);return!0}function Qm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new cu("app","Firebase",zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=Dk;function Hx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Pp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ki.create("bad-app-name",{appName:String(s)});if(n||(n=Fx()),!n)throw ki.create("no-options");const o=wh.get(s);if(o){if(Cs(n,o.options)&&Cs(r,o.config))return o;throw ki.create("duplicate-app",{appName:s})}const l=new qP(s);for(const d of kp.values())l.addComponent(d);const h=new jk(n,r,l);return wh.set(s,h),h}function $x(t=Pp){const e=wh.get(t);if(!e&&t===Pp&&Fx())return Hx();if(!e)throw ki.create("no-app",{appName:t});return e}function Ai(t,e,n){let r=Vk[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(l.join(" "));return}Qo(new Ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="firebase-heartbeat-database",Uk=1,Gl="firebase-heartbeat-store";let vf=null;function qx(){return vf||(vf=sk(Bk,Uk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),vf}async function Wk(t){try{const n=(await qx()).transaction(Gl),r=await n.objectStore(Gl).get(Gx(t));return await n.done,r}catch(e){if(e instanceof Gr)Ur.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function Fy(t,e){try{const r=(await qx()).transaction(Gl,"readwrite");await r.objectStore(Gl).put(e,Gx(t)),await r.done}catch(n){if(n instanceof Gr)Ur.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(r.message)}}}function Gx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1024,$k=30;class qk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>$k){const l=Kk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:s}=Gk(this._heartbeatsCache.heartbeats),o=vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ur.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function Gk(t,e=Hk){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),jy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OP()?MP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jy(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function Kk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){Qo(new Ps("platform-logger",e=>new lk(e),"PRIVATE")),Qo(new Ps("heartbeat",e=>new qk(e),"PRIVATE")),Ai(Cp,Dy,t),Ai(Cp,Dy,"esm2020"),Ai("fire-js","")}Qk("");var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,Zx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,P){function N(){}N.prototype=P.prototype,R.F=P.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(D,V,k){for(var C=Array(arguments.length-2),J=2;J<arguments.length;J++)C[J-2]=arguments[J];return P.prototype[V].apply(D,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,P,N){N||(N=0);const D=Array(16);if(typeof P=="string")for(var V=0;V<16;++V)D[V]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(V=0;V<16;++V)D[V]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=R.g[0],N=R.g[1],V=R.g[2];let k=R.g[3],C;C=P+(k^N&(V^k))+D[0]+3614090360&4294967295,P=N+(C<<7&4294967295|C>>>25),C=k+(V^P&(N^V))+D[1]+3905402710&4294967295,k=P+(C<<12&4294967295|C>>>20),C=V+(N^k&(P^N))+D[2]+606105819&4294967295,V=k+(C<<17&4294967295|C>>>15),C=N+(P^V&(k^P))+D[3]+3250441966&4294967295,N=V+(C<<22&4294967295|C>>>10),C=P+(k^N&(V^k))+D[4]+4118548399&4294967295,P=N+(C<<7&4294967295|C>>>25),C=k+(V^P&(N^V))+D[5]+1200080426&4294967295,k=P+(C<<12&4294967295|C>>>20),C=V+(N^k&(P^N))+D[6]+2821735955&4294967295,V=k+(C<<17&4294967295|C>>>15),C=N+(P^V&(k^P))+D[7]+4249261313&4294967295,N=V+(C<<22&4294967295|C>>>10),C=P+(k^N&(V^k))+D[8]+1770035416&4294967295,P=N+(C<<7&4294967295|C>>>25),C=k+(V^P&(N^V))+D[9]+2336552879&4294967295,k=P+(C<<12&4294967295|C>>>20),C=V+(N^k&(P^N))+D[10]+4294925233&4294967295,V=k+(C<<17&4294967295|C>>>15),C=N+(P^V&(k^P))+D[11]+2304563134&4294967295,N=V+(C<<22&4294967295|C>>>10),C=P+(k^N&(V^k))+D[12]+1804603682&4294967295,P=N+(C<<7&4294967295|C>>>25),C=k+(V^P&(N^V))+D[13]+4254626195&4294967295,k=P+(C<<12&4294967295|C>>>20),C=V+(N^k&(P^N))+D[14]+2792965006&4294967295,V=k+(C<<17&4294967295|C>>>15),C=N+(P^V&(k^P))+D[15]+1236535329&4294967295,N=V+(C<<22&4294967295|C>>>10),C=P+(V^k&(N^V))+D[1]+4129170786&4294967295,P=N+(C<<5&4294967295|C>>>27),C=k+(N^V&(P^N))+D[6]+3225465664&4294967295,k=P+(C<<9&4294967295|C>>>23),C=V+(P^N&(k^P))+D[11]+643717713&4294967295,V=k+(C<<14&4294967295|C>>>18),C=N+(k^P&(V^k))+D[0]+3921069994&4294967295,N=V+(C<<20&4294967295|C>>>12),C=P+(V^k&(N^V))+D[5]+3593408605&4294967295,P=N+(C<<5&4294967295|C>>>27),C=k+(N^V&(P^N))+D[10]+38016083&4294967295,k=P+(C<<9&4294967295|C>>>23),C=V+(P^N&(k^P))+D[15]+3634488961&4294967295,V=k+(C<<14&4294967295|C>>>18),C=N+(k^P&(V^k))+D[4]+3889429448&4294967295,N=V+(C<<20&4294967295|C>>>12),C=P+(V^k&(N^V))+D[9]+568446438&4294967295,P=N+(C<<5&4294967295|C>>>27),C=k+(N^V&(P^N))+D[14]+3275163606&4294967295,k=P+(C<<9&4294967295|C>>>23),C=V+(P^N&(k^P))+D[3]+4107603335&4294967295,V=k+(C<<14&4294967295|C>>>18),C=N+(k^P&(V^k))+D[8]+1163531501&4294967295,N=V+(C<<20&4294967295|C>>>12),C=P+(V^k&(N^V))+D[13]+2850285829&4294967295,P=N+(C<<5&4294967295|C>>>27),C=k+(N^V&(P^N))+D[2]+4243563512&4294967295,k=P+(C<<9&4294967295|C>>>23),C=V+(P^N&(k^P))+D[7]+1735328473&4294967295,V=k+(C<<14&4294967295|C>>>18),C=N+(k^P&(V^k))+D[12]+2368359562&4294967295,N=V+(C<<20&4294967295|C>>>12),C=P+(N^V^k)+D[5]+4294588738&4294967295,P=N+(C<<4&4294967295|C>>>28),C=k+(P^N^V)+D[8]+2272392833&4294967295,k=P+(C<<11&4294967295|C>>>21),C=V+(k^P^N)+D[11]+1839030562&4294967295,V=k+(C<<16&4294967295|C>>>16),C=N+(V^k^P)+D[14]+4259657740&4294967295,N=V+(C<<23&4294967295|C>>>9),C=P+(N^V^k)+D[1]+2763975236&4294967295,P=N+(C<<4&4294967295|C>>>28),C=k+(P^N^V)+D[4]+1272893353&4294967295,k=P+(C<<11&4294967295|C>>>21),C=V+(k^P^N)+D[7]+4139469664&4294967295,V=k+(C<<16&4294967295|C>>>16),C=N+(V^k^P)+D[10]+3200236656&4294967295,N=V+(C<<23&4294967295|C>>>9),C=P+(N^V^k)+D[13]+681279174&4294967295,P=N+(C<<4&4294967295|C>>>28),C=k+(P^N^V)+D[0]+3936430074&4294967295,k=P+(C<<11&4294967295|C>>>21),C=V+(k^P^N)+D[3]+3572445317&4294967295,V=k+(C<<16&4294967295|C>>>16),C=N+(V^k^P)+D[6]+76029189&4294967295,N=V+(C<<23&4294967295|C>>>9),C=P+(N^V^k)+D[9]+3654602809&4294967295,P=N+(C<<4&4294967295|C>>>28),C=k+(P^N^V)+D[12]+3873151461&4294967295,k=P+(C<<11&4294967295|C>>>21),C=V+(k^P^N)+D[15]+530742520&4294967295,V=k+(C<<16&4294967295|C>>>16),C=N+(V^k^P)+D[2]+3299628645&4294967295,N=V+(C<<23&4294967295|C>>>9),C=P+(V^(N|~k))+D[0]+4096336452&4294967295,P=N+(C<<6&4294967295|C>>>26),C=k+(N^(P|~V))+D[7]+1126891415&4294967295,k=P+(C<<10&4294967295|C>>>22),C=V+(P^(k|~N))+D[14]+2878612391&4294967295,V=k+(C<<15&4294967295|C>>>17),C=N+(k^(V|~P))+D[5]+4237533241&4294967295,N=V+(C<<21&4294967295|C>>>11),C=P+(V^(N|~k))+D[12]+1700485571&4294967295,P=N+(C<<6&4294967295|C>>>26),C=k+(N^(P|~V))+D[3]+2399980690&4294967295,k=P+(C<<10&4294967295|C>>>22),C=V+(P^(k|~N))+D[10]+4293915773&4294967295,V=k+(C<<15&4294967295|C>>>17),C=N+(k^(V|~P))+D[1]+2240044497&4294967295,N=V+(C<<21&4294967295|C>>>11),C=P+(V^(N|~k))+D[8]+1873313359&4294967295,P=N+(C<<6&4294967295|C>>>26),C=k+(N^(P|~V))+D[15]+4264355552&4294967295,k=P+(C<<10&4294967295|C>>>22),C=V+(P^(k|~N))+D[6]+2734768916&4294967295,V=k+(C<<15&4294967295|C>>>17),C=N+(k^(V|~P))+D[13]+1309151649&4294967295,N=V+(C<<21&4294967295|C>>>11),C=P+(V^(N|~k))+D[4]+4149444226&4294967295,P=N+(C<<6&4294967295|C>>>26),C=k+(N^(P|~V))+D[11]+3174756917&4294967295,k=P+(C<<10&4294967295|C>>>22),C=V+(P^(k|~N))+D[2]+718787259&4294967295,V=k+(C<<15&4294967295|C>>>17),C=N+(k^(V|~P))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+P&4294967295,R.g[1]=R.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.v=function(R,P){P===void 0&&(P=R.length);const N=P-this.blockSize,D=this.C;let V=this.h,k=0;for(;k<P;){if(V==0)for(;k<=N;)s(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<P;)if(D[V++]=R.charCodeAt(k++),V==this.blockSize){s(this,D),V=0;break}}else for(;k<P;)if(D[V++]=R[k++],V==this.blockSize){s(this,D),V=0;break}}this.h=V,this.o+=P},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var P=1;P<R.length-8;++P)R[P]=0;P=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=P&255,P/=256;for(this.v(R),R=Array(16),P=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)R[P++]=this.g[N]>>>D&255;return R};function o(R,P){var N=h;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=P(R)}function l(R,P){this.h=P;const N=[];let D=!0;for(let V=R.length-1;V>=0;V--){const k=R[V]|0;D&&k==P||(N[V]=k,D=!1)}this.g=N}var h={};function d(R){return-128<=R&&R<128?o(R,function(P){return new l([P|0],P<0?-1:0)}):new l([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return z(p(-R));const P=[];let N=1;for(let D=0;R>=N;D++)P[D]=R/N|0,N*=4294967296;return new l(P,0)}function _(R,P){if(R.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(R.charAt(0)=="-")return z(_(R.substring(1),P));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(P,8));let D=w;for(let k=0;k<R.length;k+=8){var V=Math.min(8,R.length-k);const C=parseInt(R.substring(k,k+V),P);V<8?(V=p(Math.pow(P,V)),D=D.j(V).add(p(C))):(D=D.j(N),D=D.add(p(C)))}return D}var w=d(0),x=d(1),A=d(16777216);t=l.prototype,t.m=function(){if(b(this))return-z(this).m();let R=0,P=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);R+=(D>=0?D:4294967296+D)*P,P*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(b(this))return"-"+z(this).toString(R);const P=p(Math.pow(R,6));var N=this;let D="";for(;;){const V=H(N,P).g;N=S(N,V.j(P));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=V,F(N))return k+D;for(;k.length<6;)k="0"+k;D=k+D}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let P=0;P<R.g.length;P++)if(R.g[P]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=S(this,R),b(R)?-1:F(R)?0:1};function z(R){const P=R.g.length,N=[];for(let D=0;D<P;D++)N[D]=~R.g[D];return new l(N,~R.h).add(x)}t.abs=function(){return b(this)?z(this):this},t.add=function(R){const P=Math.max(this.g.length,R.g.length),N=[];let D=0;for(let V=0;V<=P;V++){let k=D+(this.i(V)&65535)+(R.i(V)&65535),C=(k>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);D=C>>>16,k&=65535,C&=65535,N[V]=C<<16|k}return new l(N,N[N.length-1]&-2147483648?-1:0)};function S(R,P){return R.add(z(P))}t.j=function(R){if(F(this)||F(R))return w;if(b(this))return b(R)?z(this).j(z(R)):z(z(this).j(R));if(b(R))return z(this.j(z(R)));if(this.l(A)<0&&R.l(A)<0)return p(this.m()*R.m());const P=this.g.length+R.g.length,N=[];for(var D=0;D<2*P;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<R.g.length;V++){const k=this.i(D)>>>16,C=this.i(D)&65535,J=R.i(V)>>>16,we=R.i(V)&65535;N[2*D+2*V]+=C*we,T(N,2*D+2*V),N[2*D+2*V+1]+=k*we,T(N,2*D+2*V+1),N[2*D+2*V+1]+=C*J,T(N,2*D+2*V+1),N[2*D+2*V+2]+=k*J,T(N,2*D+2*V+2)}for(R=0;R<P;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=P;R<2*P;R++)N[R]=0;return new l(N,0)};function T(R,P){for(;(R[P]&65535)!=R[P];)R[P+1]+=R[P]>>>16,R[P]&=65535,P++}function O(R,P){this.g=R,this.h=P}function H(R,P){if(F(P))throw Error("division by zero");if(F(R))return new O(w,w);if(b(R))return P=H(z(R),P),new O(z(P.g),z(P.h));if(b(P))return P=H(R,z(P)),new O(z(P.g),P.h);if(R.g.length>30){if(b(R)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var N=x,D=P;D.l(R)<=0;)N=Q(N),D=Q(D);var V=ee(N,1),k=ee(D,1);for(D=ee(D,2),N=ee(N,2);!F(D);){var C=k.add(D);C.l(R)<=0&&(V=V.add(N),k=C),D=ee(D,1),N=ee(N,1)}return P=S(R,V.j(P)),new O(V,P)}for(V=w;R.l(P)>=0;){for(N=Math.max(1,Math.floor(R.m()/P.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),k=p(N),C=k.j(P);b(C)||C.l(R)>0;)N-=D,k=p(N),C=k.j(P);F(k)&&(k=x),V=V.add(k),R=S(R,C)}return new O(V,R)}t.B=function(R){return H(this,R).h},t.and=function(R){const P=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<P;D++)N[D]=this.i(D)&R.i(D);return new l(N,this.h&R.h)},t.or=function(R){const P=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<P;D++)N[D]=this.i(D)|R.i(D);return new l(N,this.h|R.h)},t.xor=function(R){const P=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<P;D++)N[D]=this.i(D)^R.i(D);return new l(N,this.h^R.h)};function Q(R){const P=R.g.length+1,N=[];for(let D=0;D<P;D++)N[D]=R.i(D)<<1|R.i(D-1)>>>31;return new l(N,R.h)}function ee(R,P){const N=P>>5;P%=32;const D=R.g.length-N,V=[];for(let k=0;k<D;k++)V[k]=P>0?R.i(k+N)>>>P|R.i(k+N+1)<<32-P:R.i(k+N);return new l(V,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Ri=l}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kx,ll,Qx,Dc,Ap,Yx,Xx,Jx;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var y=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in y))break e;y=y[j]}u=u[u.length-1],I=y[u],m=m(I),m!=I&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var y=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&y.push([I,m[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){return p=d,p.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function w(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,j,U){for(var te=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)te[_e-2]=arguments[_e];return m.prototype[j].apply(I,te)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function A(u){const m=u.length;if(m>0){const y=Array(m);for(let I=0;I<m;I++)y[I]=u[I];return y}return[]}function F(u,m){for(let I=1;I<arguments.length;I++){const j=arguments[I];var y=typeof j;if(y=y!="object"?y:j?Array.isArray(j)?"array":y:"null",y=="array"||y=="object"&&typeof j.length=="number"){y=u.length||0;const U=j.length||0;u.length=y+U;for(let te=0;te<U;te++)u[y+te]=j[te]}else u.push(j)}}class b{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function z(u){l.setTimeout(()=>{throw u},0)}function S(){var u=R;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class T{constructor(){this.h=this.g=null}add(m,y){const I=O.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var O=new b(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,ee=!1,R=new T,P=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(N)}};function N(){for(var u;u=S();){try{u.h.call(u.g)}catch(y){z(y)}var m=O;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ee=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function J(u,m){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(J,V),J.prototype.init=function(u,m){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Le=0;function De(u,m,y,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=j,this.key=++Le,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,m,y){for(const I in u)m.call(y,u[I],I,u)}function Y(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function ce(u){const m={};for(const y in u)m[y]=u[y];return m}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ue(u,m){let y,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(y in I)u[y]=I[y];for(let U=0;U<me.length;U++)y=me[U],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,m,y,I,j){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const te=he(u,m,I,j);return te>-1?(m=u[te],y||(m.fa=!1)):(m=new De(m,this.src,U,!!I,j),m.fa=y,u.push(m)),m};function xe(u,m){const y=m.type;if(y in u.g){var I=u.g[y],j=Array.prototype.indexOf.call(I,m,void 0),U;(U=j>=0)&&Array.prototype.splice.call(I,j,1),U&&($(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function he(u,m,y,I){for(let j=0;j<u.length;++j){const U=u[j];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==I)return j}return-1}var at="closure_lm_"+(Math.random()*1e6|0),mn={};function va(u,m,y,I,j){if(Array.isArray(m)){for(let U=0;U<m.length;U++)va(u,m[U],y,I,j);return null}return y=Ki(y),u&&u[we]?u.J(m,y,h(I)?!!I.capture:!1,j):wa(u,m,y,!1,I,j)}function wa(u,m,y,I,j,U){if(!m)throw Error("Invalid event type");const te=h(j)?!!j.capture:!!j;let _e=Fs(u);if(_e||(u[at]=_e=new Se(u)),y=_e.add(m,y,I,te,U),y.proxy)return y;if(I=xa(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)k||(j=te),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(xu(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xa(){function u(y){return m.call(u.src,u.listener,y)}const m=Eu;return u}function Zr(u,m,y,I,j){if(Array.isArray(m))for(var U=0;U<m.length;U++)Zr(u,m[U],y,I,j);else I=h(I)?!!I.capture:!!I,y=Ki(y),u&&u[we]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],y=he(m,y,I,j),y>-1&&($(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=Fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=he(m,y,I,j)),(y=u>-1?m[u]:null)&&Gi(y))}function Gi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[we])xe(m.i,u);else{var y=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(y,I,u.capture):m.detachEvent?m.detachEvent(xu(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=Fs(m))?(xe(y,u),y.h==0&&(y.src=null,m[at]=null)):$(u)}}}function xu(u){return u in mn?mn[u]:mn[u]="on"+u}function Eu(u,m){if(u.da)u=!0;else{m=new J(m,this);const y=u.listener,I=u.ha||u.src;u.fa&&Gi(u),u=y.call(I,m)}return u}function Fs(u){return u=u[at],u instanceof Se?u:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ki(u){return typeof u=="function"?u:(u[Zi]||(u[Zi]=function(m){return u.handleEvent(m)}),u[Zi])}function yt(){D.call(this),this.i=new Se(this),this.M=this,this.G=null}w(yt,D),yt.prototype[we]=!0,yt.prototype.removeEventListener=function(u,m,y,I){Zr(this,u,m,y,I)};function vt(u,m){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new V(m,u);else if(m instanceof V)m.target=m.target||u;else{var j=m;m=new V(I,u),Ue(m,j)}j=!0;let U,te;if(y)for(te=y.length-1;te>=0;te--)U=m.g=y[te],j=Kr(U,I,!0,m)&&j;if(U=m.g=u,j=Kr(U,I,!0,m)&&j,j=Kr(U,I,!1,m)&&j,y)for(te=0;te<y.length;te++)U=m.g=y[te],j=Kr(U,I,!1,m)&&j}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let I=0;I<y.length;I++)$(y[I]);delete u.g[m],u.h--}}this.G=null},yt.prototype.J=function(u,m,y,I){return this.i.add(String(u),m,!1,y,I)},yt.prototype.K=function(u,m,y,I){return this.i.add(String(u),m,!0,y,I)};function Kr(u,m,y,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let U=0;U<m.length;++U){const te=m[U];if(te&&!te.da&&te.capture==y){const _e=te.listener,Me=te.ha||te.src;te.fa&&xe(u.i,te),j=_e.call(Me,I)!==!1&&j}}return j&&!I.defaultPrevented}function Tu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function Ea(u){u.g=Tu(()=>{u.g=null,u.i&&(u.i=!1,Ea(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class kd extends D{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(u){D.call(this),this.h=u,this.g={}}w(Qi,D);var zs=[];function Ta(u){le(u.g,function(m,y){this.g.hasOwnProperty(y)&&Gi(m)},u),u.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),Ta(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=l.JSON.stringify,Ad=l.JSON.parse,Iu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Ia(){}function Su(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yi(){V.call(this,"d")}w(Yi,V);function Bs(){V.call(this,"c")}w(Bs,V);var yr={},Yr=null;function Us(){return Yr=Yr||new yt}yr.Ia="serverreachability";function Cu(u){V.call(this,yr.Ia,u)}w(Cu,V);function Xr(u){const m=Us();vt(m,new Cu(m))}yr.STAT_EVENT="statevent";function Sa(u,m){V.call(this,yr.STAT_EVENT,u),this.stat=m}w(Sa,V);function wt(u){const m=Us();vt(m,new Sa(m,u))}yr.Ja="timingevent";function Pu(u,m){V.call(this,yr.Ja,u),this.size=m}w(Pu,V);function Xi(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Ji(){this.g=!0}Ji.prototype.ua=function(){this.g=!1};function Rd(u,m,y,I,j,U){u.info(function(){if(u.g)if(U){var te="",_e=U.split("&");for(let Fe=0;Fe<_e.length;Fe++){var Me=_e[Fe].split("=");if(Me.length>1){const rt=Me[0];Me=Me[1];const wn=rt.split("_");te=wn.length>=2&&wn[1]=="type"?te+(rt+"="+Me+"&"):te+(rt+"=redacted&")}}}else te=null;else te=U;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+y+`
`+te})}function bd(u,m,y,I,j,U,te){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+y+`
`+U+" "+te})}function Jr(u,m,y,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ld(u,y)+(I?" "+I:"")})}function Ca(u,m){u.info(function(){return"TIMEOUT: "+m})}Ji.prototype.info=function(){};function Ld(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var y=U[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let te=1;te<I.length;te++)I[te]=""}}}}return js(U)}catch{return m}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ku={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Au;function Zt(){}w(Zt,Ia),Zt.prototype.g=function(){return new XMLHttpRequest},Au=new Zt;function ae(u){return encodeURIComponent(String(u))}function Ru(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function bn(u,m,y,I){this.j=u,this.i=m,this.l=y,this.S=I||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pa}function Pa(){this.i=null,this.g="",this.h=!1}var ka={},es={};function Hs(u,m,y){u.M=1,u.A=We(Bt(m)),u.u=y,u.R=!0,vr(u,null)}function vr(u,m){u.F=Date.now(),$s(u),u.B=Bt(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),Qs(y.i,"t",I),u.C=0,y=u.j.L,u.h=new Pa,u.g=Ua(u.j,y?m:null,!u.u),u.P>0&&(u.O=new kd(p(u.Y,u,u.g),u.P)),m=u.V,y=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(zs[0]=j.toString()),j=zs);for(let U=0;U<j.length;U++){const te=va(y,j[U],I||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?ce(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Xr(),Rd(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const _e=Jn(this.g),Me=this.g.ya(),Fe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Ma(this.g)))){this.K||_e!=4||Me==7||(Me==8||Fe<=0?Xr(3):Xr(2)),qs(this);var m=this.g.ca();this.X=m;var y=bu(this);if(this.o=m==200,bd(this.i,this.v,this.B,this.l,this.S,_e,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var U=I;break t}}U=null}if(u=U)Jr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Aa(this,u);else{this.o=!1,this.m=3,wt(12),gn(this),ts(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<y.length;)if(rt=Nd(this,y),rt==es){_e==4&&(this.m=4,wt(14),u=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==ka){this.m=4,wt(15),Jr(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Jr(this.i,this.l,rt,null),Aa(this,rt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||y.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)Jr(this.i,this.l,y,"[Invalid Chunked Response]"),gn(this),ts(this);else if(y.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ja(te),te.P=!0,wt(11))}}else Jr(this.i,this.l,y,null),Aa(this,y);_e==4&&gn(this),this.o&&!this.K&&(_e==4?an(this.j,this):(this.o=!1,$s(this)))}else Da(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),gn(this),ts(this)}}}catch{}finally{}};function bu(u){if(!Lu(u))return u.g.la();const m=Ma(u.g);if(m==="")return"";let y="";const I=m.length,j=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gn(u),ts(u),"";u.h.i=new l.TextDecoder}for(let U=0;U<I;U++)u.h.h=!0,y+=u.h.i.decode(m[U],{stream:!(j&&U==I-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function Lu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nd(u,m){var y=u.C,I=m.indexOf(`
`,y);return I==-1?es:(y=Number(m.substring(y,I)),isNaN(y)?ka:(I+=1,I+y>m.length?es:(m=m.slice(I,I+y),u.C=I+y,m)))}bn.prototype.cancel=function(){this.K=!0,gn(this)};function $s(u){u.T=Date.now()+u.H,Nu(u,u.H)}function Nu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xi(p(u.aa,u),m)}function qs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Xr(),wt(17)),gn(this),this.m=2,ts(this)):Nu(this,this.T-u)};function ts(u){u.j.I==0||u.K||an(u.j,u)}function gn(u){qs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ta(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Aa(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ns(y.h,u))){if(!u.L&&ns(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)to(y),Js(y);else break e;za(y),wt(18)}}else y.xa=j[1],0<y.xa-y.K&&j[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Xi(p(y.Va,y),6e3));Du(y.h)<=1&&y.ta&&(y.ta=void 0)}else tr(y,11)}else if((u.L||y.g==u)&&to(y),!C(m))for(j=y.Ba.g.parse(m),m=0;m<j.length;m++){let Fe=j[m];const rt=Fe[0];if(!(rt<=y.K))if(y.K=rt,Fe=Fe[1],y.I==2)if(Fe[0]=="c"){y.M=Fe[1],y.ba=Fe[2];const wn=Fe[3];wn!=null&&(y.ka=wn,y.j.info("VER="+y.ka));const On=Fe[4];On!=null&&(y.za=On,y.j.info("SVER="+y.za));const xn=Fe[5];xn!=null&&typeof xn=="number"&&xn>0&&(I=1.5*xn,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const nr=u.g;if(nr){const io=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var U=I.h;U.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(wr(U,U.h),U.h=null))}if(I.G){const so=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(I.wa=so,se(I.J,I.G,so))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var te=u;if(I.na=Ba(I,I.L?I.ba:null,I.W),te.L){Ra(I.h,te);var _e=te,Me=I.O;Me&&(_e.H=Me),_e.D&&(qs(_e),$s(_e)),I.g=te}else Fa(I);y.i.length>0&&er(y)}else Fe[0]!="stop"&&Fe[0]!="close"||tr(y,7);else y.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?tr(y,7):Ee(y):Fe[0]!="noop"&&y.l&&y.l.qa(Fe),y.A=0)}}Xr(4)}catch{}}var Od=class{constructor(u,m){this.g=u,this.map=m}};function Ou(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Du(u){return u.h?1:u.g?u.g.size:0}function ns(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wr(u,m){u.g?u.g.add(m):u.h=m}function Ra(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ou.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ba(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return A(u.i)}var ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ae(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let j,U=null;I>=0?(j=u[y].substring(0,I),U=u[y].substring(I+1)):j=u[y],m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Oe(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Oe?(this.l=u.l,_n(this,u.j),this.o=u.o,this.g=u.g,yn(this,u.u),this.h=u.h,rs(this,is(u.i)),this.m=u.m):u&&(m=String(u).match(ei))?(this.l=!1,_n(this,m[1]||"",!0),this.o=xr(m[2]||""),this.g=xr(m[3]||"",!0),yn(this,m[4]),this.h=xr(m[5]||"",!0),rs(this,m[6]||"",!0),this.m=xr(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}Oe.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qn(m,Vu,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qn(m,Vu,!0),"@"),u.push(ae(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Qn(y,y.charAt(0)=="/"?Er:Gs,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Qn(y,Tr)),u.join("")},Oe.prototype.resolve=function(u){const m=Bt(this);let y=!!u.j;y?_n(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var I=u.h;if(y)yn(m,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=m.h.lastIndexOf("/");j!=-1&&(I=m.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const U=[];for(let te=0;te<j.length;){const _e=j[te++];_e=="."?I&&te==j.length&&U.push(""):_e==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&te==j.length&&U.push("")):(U.push(_e),I=!0)}I=U.join("/")}else I=j}return y?m.h=I:y=u.i.toString()!=="",y?rs(m,is(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Bt(u){return new Oe(u)}function _n(u,m,y){u.j=y?xr(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function yn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function rs(u,m,y){m instanceof Ln?(u.i=m,La(u.i,u.l)):(y||(m=Qn(m,tt)),u.i=new Ln(m,u.l))}function se(u,m,y){u.i.set(m,y)}function We(u){return se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xr(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Kt),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vu=/[#\/\?@]/g,Gs=/[#\?:]/g,Er=/[#\?]/g,tt=/[#\?@]/g,Tr=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function on(u){u.g||(u.g=new Map,u.h=0,u.i&&Ae(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Ln.prototype,t.add=function(u,m){on(this),this.i=null,u=Yn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Zs(u,m){on(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ti(u,m){return on(u),m=Yn(u,m),u.g.has(m)}t.forEach=function(u,m){on(this),this.g.forEach(function(y,I){y.forEach(function(j){u.call(m,j,I,this)},this)},this)};function Ks(u,m){on(u);let y=[];if(typeof m=="string")ti(u,m)&&(y=y.concat(u.g.get(Yn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return on(this),this.i=null,u=Yn(this,u),ti(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Ks(this,u),u.length>0?String(u[0]):m):m};function Qs(u,m,y){Zs(u,m),y.length>0&&(u.i=null,u.g.set(Yn(u,m),A(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var y=m[I];const j=ae(y);y=Ks(this,y);for(let U=0;U<y.length;U++){let te=j;y[U]!==""&&(te+="="+ae(y[U])),u.push(te)}}return this.i=u.join("&")};function is(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function La(u,m){m&&!u.j&&(on(u),u.i=null,u.g.forEach(function(y,I){const j=I.toLowerCase();I!=j&&(Zs(this,I),Qs(this,j,y))},u)),u.j=m}function Ys(u,m){const y=new Ji;if(l.Image){const I=new Image;I.onload=_(vn,y,"TestLoadImage: loaded",!0,m,I),I.onerror=_(vn,y,"TestLoadImage: error",!1,m,I),I.onabort=_(vn,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=_(vn,y,"TestLoadImage: timeout",!1,m,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Fu(u,m){const y=new Ji,I=new AbortController,j=setTimeout(()=>{I.abort(),vn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(U=>{clearTimeout(j),U.ok?vn(y,"TestPingServer: ok",!0,m):vn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),vn(y,"TestPingServer: error",!1,m)})}function vn(u,m,y,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(y)}catch{}}function Md(){this.g=new Iu}function ge(u){this.i=u.Sb||null,this.h=u.ab||!1}w(ge,Ia),ge.prototype.g=function(){return new Ut(this.i,this.h)};function Ut(u,m){yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ut,yt),t=Ut.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ir(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;je(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function je(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ni(this):Ir(this),this.readyState==3&&je(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ni(this))},t.Na=function(u){this.g&&(this.response=u,ni(this))},t.ga=function(){this.g&&ni(this)};function ni(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ir(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ir(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xs(u){let m="";return le(u,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function ss(u,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Xs(y),typeof u=="string"?y!=null&&ae(y):se(u,m,y))}function Ve(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Ve,yt);var Na=/^https?$/i,os=["POST","PUT"];t=Ve.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Au.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){lt(this,U);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)y.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())y.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),j=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(os,m,void 0)>=0)||I||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,te]of y)this.g.setRequestHeader(U,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){lt(this,U)}};function lt(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Xn(u),as(u)}function Xn(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Oa(this):this.Xa())},t.Xa=function(){Oa(this)};function Oa(u){if(u.h&&typeof o<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=U===0){let te=String(u.D).match(ei)[1]||null;!te&&l.self&&l.self.location&&(te=l.self.location.protocol.slice(0,-1)),I=!Na.test(te?te.toLowerCase():"")}y=I}if(y)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var j=Jn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Xn(u)}}finally{as(u)}}}}function as(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||vt(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ad(m)}};function Ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(C(u[I]))continue;var y=Ru(u[I]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[j]||[];m[j]=U,U.push(y)}Y(m,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Va(u){this.za=0,this.i=[],this.j=new Ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ls("baseRetryDelayMs",5e3,u),this.Za=ls("retryDelaySeedMs",1e4,u),this.Ta=ls("forwardChannelMaxRetries",2,u),this.va=ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ou(u&&u.concurrentRequestLimit),this.Ba=new Md,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Va.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,I){wt(0),this.W=u,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=Ba(this,null,this.W),er(this)};function Ee(u){if(Qt(u),u.I==3){var m=u.V++,y=Bt(u.J);if(se(y,"SID",u.M),se(y,"RID",m),se(y,"TYPE","terminate"),Sr(u,y),m=new bn(u,u.j,m),m.M=2,m.A=We(Bt(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.A,y=!0),y||(m.g=Ua(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$s(m)}Nn(u)}function Js(u){u.g&&(ja(u),u.g.cancel(),u.g=null)}function Qt(u){Js(u),u.v&&(l.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function er(u){if(!Mu(u.h)&&!u.m){u.m=!0;var m=u.Ea;Q||P(),ee||(Q(),ee=!0),R.add(m,u),u.D=0}}function zu(u,m){return Du(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xi(p(u.Ea,u,m),Uu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new bn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=ce(U),Ue(U,this.U)):U=this.U),this.u!==null||this.R||(j.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Bu(this,j,m),y=Bt(this.J),se(y,"RID",u),se(y,"CVER",22),this.G&&se(y,"X-HTTP-Session-Id",this.G),Sr(this,y),U&&(this.R?m="headers="+ae(Xs(U))+"&"+m:this.u&&ss(y,this.u,U)),wr(this.h,j),this.Ra&&se(y,"TYPE","init"),this.S?(se(y,"$req",m),se(y,"SID","null"),j.U=!0,Hs(j,y,null)):Hs(j,y,m),this.I=2}}else this.I==3&&(u?ju(this,u):this.i.length==0||Mu(this.h)||ju(this))};function ju(u,m){var y;m?y=m.l:y=u.V++;const I=Bt(u.J);se(I,"SID",u.M),se(I,"RID",y),se(I,"AID",u.K),Sr(u,I),u.u&&u.o&&ss(I,u.u,u.o),y=new bn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Bu(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),wr(u.h,y),Hs(y,I,m)}function Sr(u,m){u.H&&le(u.H,function(y,I){se(m,I,y)}),u.l&&le({},function(y,I){se(m,I,y)})}function Bu(u,m,y){y=Math.min(u.i.length,y);const I=u.l?p(u.l.Ka,u.l,u):null;e:{var j=u.i;let _e=-1;for(;;){const Me=["count="+y];_e==-1?y>0?(_e=j[0].g,Me.push("ofs="+_e)):_e=0:Me.push("ofs="+_e);let Fe=!0;for(let rt=0;rt<y;rt++){var U=j[rt].g;const wn=j[rt].map;if(U-=_e,U<0)_e=Math.max(0,j[rt].g-100),Fe=!1;else try{U="req"+U+"_"||"";try{var te=wn instanceof Map?wn:Object.entries(wn);for(const[On,xn]of te){let nr=xn;h(xn)&&(nr=js(xn)),Me.push(U+On+"="+encodeURIComponent(nr))}}catch(On){throw Me.push(U+"type="+encodeURIComponent("_badmap")),On}}catch{I&&I(wn)}}if(Fe){te=Me.join("&");break e}}te=void 0}return u=u.i.splice(0,y),m.G=u,te}function Fa(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Q||P(),ee||(Q(),ee=!0),R.add(m,u),u.A=0}}function za(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xi(p(u.Da,u),Uu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xi(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Js(this),eo(this))};function ja(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function eo(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Bt(u.na);se(m,"RID","rpc"),se(m,"SID",u.M),se(m,"AID",u.K),se(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&se(m,"TO",u.ia),se(m,"TYPE","xmlhttp"),Sr(u,m),u.u&&u.o&&ss(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=We(Bt(m)),y.u=null,y.R=!0,vr(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Js(this),za(this),wt(19))};function to(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function an(u,m){var y=null;if(u.g==m){to(u),ja(u),u.g=null;var I=2}else if(ns(u.h,m))y=m.G,Ra(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;I=Us(),vt(I,new Pu(I,y)),er(u)}else Fa(u);else if(j=m.m,j==3||j==0&&m.X>0||!(I==1&&zu(u,m)||I==2&&za(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),j){case 1:tr(u,5);break;case 4:tr(u,10);break;case 3:tr(u,6);break;default:tr(u,2)}}}function Uu(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function tr(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.bb,u),I=u.Ua;const j=!I;I=new Oe(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_n(I,"https"),We(I),j?Ys(I.toString(),y):Fu(I.toString(),y)}else wt(2);u.I=0,u.l&&u.l.pa(m),Nn(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Nn(u){if(u.I=0,u.ja=[],u.l){const m=ba(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.oa()}}function Ba(u,m,y){var I=y instanceof Oe?Bt(y):new Oe(y);if(I.g!="")m&&(I.g=m+"."+I.g),yn(I,I.u);else{var j=l.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const U=new Oe(null);I&&_n(U,I),m&&(U.g=m),j&&yn(U,j),y&&(U.h=y),I=U}return y=u.G,m=u.wa,y&&m&&se(I,y,m),se(I,"VER",u.ka),Sr(u,I),I}function Ua(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ve(new ge({ab:y})):new Ve(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function no(){}t=no.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ro(){}ro.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){yt.call(this),this.g=new Va(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}w(Lt,yt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ee(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=js(u),u=y);m.i.push(new Od(m.Ya++,u)),m.I==3&&er(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ee(this.g),delete this.g,Lt.Z.N.call(this)};function Wa(u){Yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Wa,Yi);function Wu(){Bs.call(this),this.status=1}w(Wu,Bs);function ri(u){this.g=u}w(ri,no),ri.prototype.ra=function(){vt(this.g,"a")},ri.prototype.qa=function(u){vt(this.g,new Wa(u))},ri.prototype.pa=function(u){vt(this.g,new Wu)},ri.prototype.oa=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Jx=function(){return new ro},Xx=function(){return Us()},Yx=yr,Ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Dc=Ws,ku.COMPLETE="complete",Qx=ku,Su.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",yt.prototype.listen=yt.prototype.J,ll=Su,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,Kx=Ve}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",Wy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Zm("@firebase/firestore");function mo(){return ks.logLevel}function ie(t,...e){if(ks.logLevel<=Ce.DEBUG){const n=e.map(Ym);ks.debug(`Firestore (${ca}): ${t}`,...n)}}function Wr(t,...e){if(ks.logLevel<=Ce.ERROR){const n=e.map(Ym);ks.error(`Firestore (${ca}): ${t}`,...n)}}function Yo(t,...e){if(ks.logLevel<=Ce.WARN){const n=e.map(Ym);ks.warn(`Firestore (${ca}): ${t}`,...n)}}function Ym(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eE(t,r,n)}function eE(t,e,n){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wr(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||eE(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class Xk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Jk{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new tE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class eA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rA(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function Rp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return wf(s)===wf(o)?Pe(s,o):wf(s)?1:-1}return Pe(t.length,e.length)}const iA=55296,sA=57343;function wf(t){const e=t.charCodeAt(0);return e>=iA&&e<=sA}function Xo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=or.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Pe(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),s=or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?or.extractNumericId(e).compare(or.extractNumericId(n)):Rp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class He extends or{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const oA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends or{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return oA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$y}static keyField(){return new kt([$y])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(o(),s++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aA(t,e,n,r){if(e===!0&&r===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qy(t){if(!ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!rE(t))throw new ne(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ne(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-62135596800,Ky=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ky);return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zy)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ky}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:ft("string",Ge._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ge(0,0))}static max(){return new ye(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function lA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Mi(s,ue.empty(),e)}function uA(t){return new Mi(t.readTime,t.key,Zl)}class Mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mi(ye.min(),ue.empty(),Zl)}static max(){return new Mi(ye.max(),ue.empty(),Zl)}}function cA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==hA)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>r(d))}),l=!0,o===s&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(s=>s?Z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&r(l)},_=>s(_))}})}static doWhile(e,n){return new Z((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function fA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function da(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=-1;function od(t){return t==null}function xh(t){return t===0&&1/t==-1/0}function pA(t){return typeof t=="number"&&Number.isInteger(t)&&!xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="";function mA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qy(e)),e=gA(t.get(n),e);return Qy(e)}function gA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case iE:n+="";break;default:n+=o}}return n}function Qy(t){return t+iE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Pt(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xy(this.data.getIterator())}getIteratorFrom(e){return new Xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new _t(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oE("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const _A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=_A.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vi(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="server_timestamp",lE="__type__",uE="__previous_value__",cE="__local_write_time__";function eg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lE])==null?void 0:r.stringValue)===aE}function ad(t){const e=t.mapValue.fields[uE];return eg(e)?ad(e):e}function Kl(t){const e=Di(t.mapValue.fields[cE].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s,o,l,h,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const Eh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="__type__",vA="__max__",wc={mapValue:{}},dE="__vector__",Th="value";function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eg(t)?4:xA(t)?9007199254740991:wA(t)?10:11:pe(28295,{value:t})}function _r(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Di(s.timestampValue),h=Di(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Vi(s.bytesValue).isEqual(Vi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return it(s.geoPointValue.latitude)===it(o.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return it(s.integerValue)===it(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=it(s.doubleValue),h=it(o.doubleValue);return l===h?xh(l)===xh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Yy(l)!==Yy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!_r(l[d],h[d])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function Yl(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=it(o.integerValue||o.doubleValue),d=it(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Jy(t.timestampValue,e.timestampValue);case 4:return Jy(Kl(t),Kl(e));case 5:return Rp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Vi(o),d=Vi(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Pe(h[p],d[p]);if(_!==0)return _}return Pe(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Pe(it(o.latitude),it(l.latitude));return h!==0?h:Pe(it(o.longitude),it(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ev(t.arrayValue,e.arrayValue);case 10:return function(o,l){var x,A,F,b;const h=o.fields||{},d=l.fields||{},p=(x=h[Th])==null?void 0:x.arrayValue,_=(A=d[Th])==null?void 0:A.arrayValue,w=Pe(((F=p==null?void 0:p.values)==null?void 0:F.length)||0,((b=_==null?void 0:_.values)==null?void 0:b.length)||0);return w!==0?w:ev(p,_)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===wc.mapValue&&l===wc.mapValue)return 0;if(o===wc.mapValue)return 1;if(l===wc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let w=0;w<d.length&&w<_.length;++w){const x=Rp(d[w],_[w]);if(x!==0)return x;const A=Jo(h[d[w]],p[_[w]]);if(A!==0)return A}return Pe(d.length,_.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function Jy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Di(t),r=Di(e),s=Pe(n.seconds,r.seconds);return s!==0?s:Pe(n.nanos,r.nanos)}function ev(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Jo(n[s],r[s]);if(o)return o}return Pe(n.length,r.length)}function ea(t){return bp(t)}function bp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=bp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${bp(n.fields[l])}`;return s+"}"}(t.mapValue):pe(61005,{value:t})}function Vc(t){switch(Fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(t);return e?16+Vc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Vc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hi(r.fields,(o,l)=>{s+=o.length+Vc(l)}),s}(t.mapValue);default:throw pe(13486,{value:t})}}function tv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lp(t){return!!t&&"integerValue"in t}function tg(t){return!!t&&"arrayValue"in t}function nv(t){return!!t&&"nullValue"in t}function rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fc(t){return!!t&&"mapValue"in t}function wA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[hE])==null?void 0:r.stringValue)===dE}function El(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=El(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=El(t.arrayValue.values[n]);return e}return{...t}}function xA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=h.popLast()}l?r[h.lastSegment()]=El(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new en(El(this.value))}}function fE(t){const e=[];return Hi(t.fields,(n,r)=>{const s=new kt([n]);if(Fc(r)){const o=fE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ft(e,0,ye.min(),ye.min(),ye.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ye.min(),ye.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ye.min(),ye.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function iv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(l.referenceValue),n.key):r=Jo(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function EA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{}class dt extends pE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IA(e,n,r):n==="array-contains"?new PA(e,r):n==="in"?new kA(e,r):n==="not-in"?new AA(e,r):n==="array-contains-any"?new RA(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SA(e,r):new CA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends pE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return mE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mE(t){return t.op==="and"}function gE(t){return TA(t)&&mE(t)}function TA(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function Np(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(gE(t))return t.filters.map(e=>Np(e)).join(",");{const e=t.filters.map(n=>Np(n)).join(",");return`${t.op}(${e})`}}function _E(t,e){return t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.field.isEqual(s.field)&&_r(r.value,s.value)}(t,e):t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,h)=>o&&_E(l,s.filters[h]),!0):!1}(t,e):void pe(19439)}function yE(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(yE).join(" ,")+"}"}(t):"Filter"}class IA extends dt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class SA extends dt{constructor(e,n){super(e,"in",n),this.keys=vE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CA extends dt{constructor(e,n){super(e,"not-in",n),this.keys=vE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class PA extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tg(n)&&Yl(n.arrayValue,this.value)}}class kA extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class AA extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class RA extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n=null,r=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function ov(t,e=null,n=[],r=[],s=null,o=null,l=null){return new bA(t,e,n,r,s,o,l)}function ng(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Np(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ea(r)).join(",")),e.Te=n}return e.Te}function rg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_E(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function Op(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LA(t,e,n,r,s,o,l,h){return new fa(t,e,n,r,s,o,l,h)}function ig(t){return new fa(t)}function av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wE(t){return t.collectionGroup!==null}function Tl(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new _t(kt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xl(o,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new Xl(kt.keyField(),r))}return e.Ie}function cr(t){const e=ve(t);return e.Ee||(e.Ee=NA(e,Tl(t))),e.Ee}function NA(t,e){if(t.limitType==="F")return ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xl(s.field,o)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mp(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dp(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return rg(cr(t),cr(e))&&t.limitType===e.limitType}function xE(t){return`${ng(cr(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yE(s)).join(", ")}]`),od(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Tl(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,h,d){const p=iv(l,h,d);return l.inclusive?p<=0:p<0}(r.startAt,Tl(r),s)||r.endAt&&!function(l,h,d){const p=iv(l,h,d);return l.inclusive?p>=0:p>0}(r.endAt,Tl(r),s))}(t,e)}function OA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EE(t){return(e,n)=>{let r=!1;for(const s of Tl(t)){const o=MA(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function MA(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Jo(d,p):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new et(ue.comparator);function Hr(){return DA}const TE=new et(ue.comparator);function ul(...t){let e=TE;for(const n of t)e=e.insert(n.key,n);return e}function IE(t){let e=TE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Il()}function SE(){return Il()}function Il(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const VA=new et(ue.comparator),FA=new _t(ue.comparator);function ke(...t){let e=FA;for(const n of t)e=e.add(n);return e}const zA=new _t(Pe);function jA(){return zA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function CE(t){return{integerValue:""+t}}function BA(t,e){return pA(e)?CE(e):sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function UA(t,e,n){return t instanceof Sh?function(s,o){const l={fields:{[lE]:{stringValue:aE},[cE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&eg(o)&&(o=ad(o)),o&&(l.fields[uE]=o),{mapValue:l}}(n,e):t instanceof Jl?kE(t,e):t instanceof eu?AE(t,e):function(s,o){const l=PE(s,o),h=lv(l)+lv(s.Ae);return Lp(l)&&Lp(s.Ae)?CE(h):sg(s.serializer,h)}(t,e)}function WA(t,e,n){return t instanceof Jl?kE(t,e):t instanceof eu?AE(t,e):n}function PE(t,e){return t instanceof Ch?function(r){return Lp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Sh extends cd{}class Jl extends cd{constructor(e){super(),this.elements=e}}function kE(t,e){const n=RE(e);for(const r of t.elements)n.some(s=>_r(s,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends cd{constructor(e){super(),this.elements=e}}function AE(t,e){let n=RE(e);for(const r of t.elements)n=n.filter(s=>!_r(s,r));return{arrayValue:{values:n}}}class Ch extends cd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lv(t){return it(t.integerValue||t.doubleValue)}function RE(t){return tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jl&&s instanceof Jl||r instanceof eu&&s instanceof eu?Xo(r.elements,s.elements,_r):r instanceof Ch&&s instanceof Ch?_r(r.Ae,s.Ae):r instanceof Sh&&s instanceof Sh}(t.transform,e.transform)}class $A{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function bE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new og(t.key,qn.none()):new fu(t.key,t.data,qn.none());{const n=t.data,r=en.empty();let s=new _t(kt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new $i(t.key,r,new cn(s.toArray()),qn.none())}}function qA(t,e,n){t instanceof fu?function(s,o,l){const h=s.value.clone(),d=cv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(s,o,l){if(!zc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=cv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(LE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Sl(t,e,n,r){return t instanceof fu?function(o,l,h,d){if(!zc(o.precondition,l))return h;const p=o.value.clone(),_=hv(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(o,l,h,d){if(!zc(o.precondition,l))return h;const p=hv(o.fieldTransforms,d,l),_=l.data;return _.setAll(LE(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(o,l,h){return zc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function GA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=PE(r.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(r.field,o))}return n||null}function uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xo(r,s,(o,l)=>HA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fu extends hd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $i extends hd{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cv(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);r.set(o.field,WA(l,h,n[s]))}return r}function hv(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,UA(o,l,e))}return r}class og extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZA extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qA(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=bE(l,h);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,r)=>uv(n,r))&&Xo(this.baseMutations,e.baseMutations,(n,r)=>uv(n,r))}}class ag{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return VA}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new ag(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Re;function XA(t){switch(t){case G.OK:return pe(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function NE(t){if(t===void 0)return Wr("GRPC error has no .code"),G.UNKNOWN;switch(t){case ct.OK:return G.OK;case ct.CANCELLED:return G.CANCELLED;case ct.UNKNOWN:return G.UNKNOWN;case ct.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ct.INTERNAL:return G.INTERNAL;case ct.UNAVAILABLE:return G.UNAVAILABLE;case ct.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ct.NOT_FOUND:return G.NOT_FOUND;case ct.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ct.ABORTED:return G.ABORTED;case ct.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ct.DATA_LOSS:return G.DATA_LOSS;default:return pe(39323,{code:t})}}(Re=ct||(ct={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Ri([4294967295,4294967295],0);function dv(t){const e=JA().encode(t),n=new Zx;return n.update(e),new Uint8Array(n.digest())}function fv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([s,o],0)]}class lg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cl(`Invalid padding: ${n}`);if(r<0)throw new cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ri.fromNumber(r)));return s.compare(eR)===1&&(s=new Ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dv(e),[r,s]=fv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new lg(o,s,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=dv(e),[r,s]=fv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dd(ye.min(),s,new et(Pe),Hr(),ke())}}class pu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pu(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class OE{constructor(e,n){this.targetId=e,this.Ce=n}}class ME{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pv{constructor(){this.ve=0,this.Fe=mv(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),r=ke();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pe(38017,{changeType:o})}}),new pu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hr(),this.Je=xc(),this.He=xc(),this.Ye=new et(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Op(o))if(r===0){const l=new ue(o.path);this.et(n,l,Ft.newNoDocument(l,ye.min()))}else ze(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Vi(r).toUint8Array()}catch(d){if(d instanceof oE)return Yo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new lg(l,s,o)}catch(d){return Yo(d instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Op(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ft.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=ke();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new dd(e,n,this.Ye,this.je,r);return this.je=Hr(),this.Je=xc(),this.He=xc(),this.Ye=new et(Pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xc(){return new et(ue.comparator)}function mv(){return new et(ue.comparator)}const nR={asc:"ASCENDING",desc:"DESCENDING"},rR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iR={and:"AND",or:"OR"};class sR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vp(t,e){return t.useProto3Json||od(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oR(t,e){return Ph(t,e.toTimestamp())}function hr(t){return ze(!!t,49232),ye.fromTimestamp(function(n){const r=Di(n);return new Ge(r.seconds,r.nanos)}(t))}function ug(t,e){return Fp(t,e).canonicalString()}function Fp(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VE(t){const e=He.fromString(t);return ze(UE(e),10190,{key:e.toString()}),e}function zp(t,e){return ug(t.databaseId,e.path)}function xf(t,e){const n=VE(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(zE(n))}function FE(t,e){return ug(t.databaseId,e)}function aR(t){const e=VE(t);return e.length===4?He.emptyPath():zE(e)}function jp(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zE(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gv(t,e,n){return{name:zp(t,e),fields:n.value.mapValue.fields}}function lR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(ze(_===void 0||typeof _=="string",58123),bt.fromBase64String(_||"")):(ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),bt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?G.UNKNOWN:NE(p.code);return new ne(_,p.message||"")}(l);n=new ME(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xf(t,r.document.name),o=hr(r.document.updateTime),l=r.document.createTime?hr(r.document.createTime):ye.min(),h=new en({mapValue:{fields:r.document.fields}}),d=Ft.newFoundDocument(s,o,l,h),p=r.targetIds||[],_=r.removedTargetIds||[];n=new jc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xf(t,r.document),o=r.readTime?hr(r.readTime):ye.min(),l=Ft.newNoDocument(s,o),h=r.removedTargetIds||[];n=new jc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xf(t,r.document),o=r.removedTargetIds||[];n=new jc([],o,s,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new YA(s,o),h=r.targetId;n=new OE(h,l)}}return n}function uR(t,e){let n;if(e instanceof fu)n={update:gv(t,e.key,e.value)};else if(e instanceof og)n={delete:zp(t,e.key)};else if(e instanceof $i)n={update:gv(t,e.key,e.data),updateMask:yR(e.fieldMask)};else{if(!(e instanceof ZA))return pe(16599,{Vt:e.type});n={verify:zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Sh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ch)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw pe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:oR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(t,e.precondition)),n}function cR(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?hr(s.updateTime):hr(o);return l.isEqual(ye.min())&&(l=hr(o)),new $A(l,s.transformResults||[])}(n,e))):[]}function hR(t,e){return{documents:[FE(t,e.path)]}}function dR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=FE(t,s);const o=function(p){if(p.length!==0)return BE(Zn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(x){return{field:_o(x.field),direction:mR(x.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Vp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function fR(t){let e=aR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const _=n.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(w){const x=jE(w);return x instanceof Zn&&gE(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(x=>function(F){return new Xl(yo(F.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(x))}(n.orderBy));let h=null;n.limit&&(h=function(w){let x;return x=typeof w=="object"?w.value:w,od(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(w){const x=!!w.before,A=w.values||[];return new Ih(A,x)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const x=!w.before,A=w.values||[];return new Ih(A,x)}(n.endAt)),LA(e,s,l,o,h,"F",d,p)}function pR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yo(n.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=yo(n.unaryFilter.field);return dt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return dt.create(yo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>jE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function mR(t){return nR[t]}function gR(t){return rR[t]}function _R(t){return iR[t]}function _o(t){return{fieldPath:t.canonicalString()}}function yo(t){return kt.fromServerFormat(t.fieldPath)}function BE(t){return t instanceof dt?function(n){if(n.op==="=="){if(rv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(nv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(nv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:gR(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(s=>BE(s));return r.length===1?r[0]:{compositeFilter:{op:_R(n.op),filters:r}}}(t):pe(54877,{filter:t})}function yR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,s,o=ye.min(),l=ye.min(),h=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.yt=e}}function wR(t){const e=fR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.Cn=new ER}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Mi.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class ER{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(He.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(WE,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ta(0)}static cr(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",TR=1048576;function vv([t,e],[n,r]){const s=Pe(t,n);return s===0?Pe(e,r):s}class IR{constructor(e){this.Ir=e,this.buffer=new _t(vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){da(n)?ie(yv,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}}class CR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(sd.ce);const r=new IR(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(_v)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,h=Date.now(),this.removeTargets(e,r,n))).next(w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),mo()<=Ce.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function PR(t,e){return new CR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sl(r.mutation,s,cn.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=ul();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,s){let o=Hr();const l=Il(),h=function(){return Il()}();return n.forEach((d,p)=>{const _=r.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof $i)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Sl(_.mutation,p,_.mutation.getFieldMask(),Ge.now())):l.set(p.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>h.set(p,new AR(_,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Il();let s=new et((l,h)=>l-h),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=r.get(d)||cn.empty();_=h.applyToLocalView(p,_),r.set(d,_);const w=(s.get(h.batchId)||ke()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,w=SE();_.forEach(x=>{if(!o.has(x)){const A=bE(n.get(x),r.get(x));A!==null&&w.set(x,A),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return Z.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return ue.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):Z.resolve(gs());let h=Zl,d=o;return l.next(p=>Z.forEach(p,(_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next(x=>{d=d.insert(_,x)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,ke())).next(_=>({batchId:h,changes:IE(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=ul();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const p=function(w,x){return new fa(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(_=>{_.forEach((w,x)=>{l=l.insert(w,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Ft.newInvalidDocument(_)))});let h=ul();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Sl(_.mutation,p,cn.empty(),Ge.now()),ud(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:wR(s.bundledQuery),readTime:hr(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.overlays=new et(ue.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return Z.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const s=gs(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new et((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let _=o.get(p.largestBatchId);_===null&&(_=gs(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=gs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=s)););return Z.resolve(h)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new QA(n,r));let o=this.qr.get(n);o===void 0&&(o=ke(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Qr=new _t(Et.$r),this.Ur=new _t(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new He([])),r=new Et(n,e),s=new Et(n,e+1),o=[];return this.Ur.forEachInRange([r,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new He([])),r=new Et(n,e),s=new Et(n,e+1);let o=ke();return this.Ur.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Et.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new KA(o,n,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Et(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Jm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Pe);return n.forEach(s=>{const o=new Et(s,0),l=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ue.isDocumentKey(o)||(o=o.child(""));const l=new Et(new ue(o),0);let h=new _t(Pe);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),Z.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,s=>{const o=new Et(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.ri=e,this.docs=function(){return new et(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ft.newInvalidDocument(s))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Hr();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||cA(uA(_),r)<=0||(s.has(_.key)||ud(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,r,s){pe(9500)}ii(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DR(this)}getSize(e){return Z.resolve(this.size)}}class DR extends kR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.persistence=e,this.si=new Os(n=>ng(n),rg),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new cg,this.targetCount=0,this.ai=ta.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ta(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.ui={},this.overlays={},this.ci=new sd(0),this.li=!1,this.li=!0,this.hi=new NR,this.referenceDelegate=e(this),this.Pi=new VR(this),this.indexManager=new xR,this.remoteDocumentCache=function(s){return new MR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vR(n),this.Ii=new bR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new OR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new FR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class FR extends dA{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new cg,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,r=>{const s=ue.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new Os(r=>mA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=PR(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?Z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,ye.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ke(),s=ke();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new dg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return NP()?8:fA(jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new zR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(mo()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(mo()<=Ce.DEBUG&&ie("QueryEngine","Query:",go(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(mo()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):Z.resolve())}ys(e,n){if(av(n))return Z.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dp(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ke(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Dp(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,r,s){return av(n)||s.isEqual(ye.min())?Z.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?Z.resolve(null):(mo()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),go(n)),this.vs(e,l,n,lA(s,Zl)).next(h=>h))})}Ds(e,n){let r=new _t(EE(e));return n.forEach((s,o)=>{ud(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return mo()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,Mi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",BR=3e8;class UR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(Pe),this.xs=new Os(o=>ng(o),rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function WR(t,e,n,r){return new UR(t,e,n,r)}async function $E(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let d=ke();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(r,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function HR(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const w=p.batch,x=w.keys();let A=Z.resolve();return x.forEach(F=>{A=A.next(()=>_.getEntry(d,F)).next(b=>{const z=p.docVersions.get(F);ze(z!==null,48541),b.version.compareTo(z)<0&&(w.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),_.addEntry(b)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=ke();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qE(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function $R(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((_,w)=>{const x=s.get(w);if(!x)return;h.push(n.Pi.removeMatchingKeys(o,_.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(o,_.addedDocuments,w)));let A=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),s=s.insert(w,A),function(b,z,S){return b.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=BR?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(x,A,_)&&h.push(n.Pi.updateTargetData(o,A))});let d=Hr(),p=ke();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(qR(o,l,e.documentUpdates).next(_=>{d=_.ks,p=_.qs})),!r.isEqual(ye.min())){const _=n.Pi.getLastRemoteSnapshotVersion(o).next(w=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function qR(t,e,n){let r=ke(),s=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Hr();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ye.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie(fg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function GR(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZR(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,Z.resolve(s)):n.Pi.allocateTargetId(r).next(l=>(s=new yi(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Bp(t,e,n){const r=ve(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!da(l))throw l;ie(fg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function wv(t,e,n){const r=ve(t);let s=ye.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const w=ve(d),x=w.xs.get(_);return x!==void 0?Z.resolve(w.Ms.get(x)):w.Pi.getTargetData(p,_)}(r,l,cr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:ye.min(),n?o:ke())).next(h=>(KR(r,OA(e),h),{documents:h,Qs:o})))}function KR(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class xv{constructor(){this.activeTargetIds=jA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QR{constructor(){this.Mo=new xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Tv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function Up(){return Ec===null?Ec=function(){return 268435456+Math.round(2147483648*Math.random())}():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="RestConnection",XR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Eh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=Up(),h=this.zo(e,n.toUriEncodedString());ie(Ef,`Sending RPC '${e}' ${l}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),_=la(p);return this.Jo(e,h,d,r,_).then(w=>(ie(Ef,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Yo(Ef,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=XR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class tb extends JR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=Up();return new Promise((h,d)=>{const p=new Kx;p.setWithCredentials(!0),p.listenOnce(Qx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Dc.NO_ERROR:const w=p.getResponseJson();ie(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Dc.TIMEOUT:ie(Mt,`RPC '${e}' ${l} timed out`),d(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:const x=p.getStatus();if(ie(Mt,`RPC '${e}' ${l} failed with status:`,x,"response text:",p.getResponseText()),x>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const F=A==null?void 0:A.error;if(F&&F.status&&F.message){const b=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(T)>=0?T:G.UNKNOWN}(F.status);d(new ne(b,F.message))}else d(new ne(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ne(G.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ie(Mt,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(s);ie(Mt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",_,r,15)})}T_(e,n,r){const s=Up(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Jx(),h=Xx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const _=o.join("");ie(Mt,`Creating RPC '${e}' stream ${s}: ${_}`,d);const w=l.createWebChannel(_,d);this.I_(w);let x=!1,A=!1;const F=new eb({Yo:z=>{A?ie(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(x||(ie(Mt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ie(Mt,`RPC '${e}' stream ${s} sending:`,z),w.send(z))},Zo:()=>w.close()}),b=(z,S,T)=>{z.listen(S,O=>{try{T(O)}catch(H){setTimeout(()=>{throw H},0)}})};return b(w,ll.EventType.OPEN,()=>{A||(ie(Mt,`RPC '${e}' stream ${s} transport opened.`),F.o_())}),b(w,ll.EventType.CLOSE,()=>{A||(A=!0,ie(Mt,`RPC '${e}' stream ${s} transport closed`),F.a_(),this.E_(w))}),b(w,ll.EventType.ERROR,z=>{A||(A=!0,Yo(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,z.name,"Message:",z.message),F.a_(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),b(w,ll.EventType.MESSAGE,z=>{var S;if(!A){const T=z.data[0];ze(!!T,16349);const O=T,H=(O==null?void 0:O.error)||((S=O[0])==null?void 0:S.error);if(H){ie(Mt,`RPC '${e}' stream ${s} received error:`,H);const Q=H.status;let ee=function(N){const D=ct[N];if(D!==void 0)return NE(D)}(Q),R=H.message;ee===void 0&&(ee=G.INTERNAL,R="Unknown error status: "+Q+" with message "+H.message),A=!0,F.a_(new ne(ee,R)),w.close()}else ie(Mt,`RPC '${e}' stream ${s} received:`,T),F.u_(T)}}),b(h,Yx.STAT_EVENT,z=>{z.stat===Ap.PROXY?ie(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===Ap.NOPROXY&&ie(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){return new sR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="PersistentStream";class ZE{constructor(e,n,r,s,o,l,h,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Wr(n.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ne(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nb extends ZE{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lR(this.serializer,e),r=function(o){if(!("targetChange"in o))return ye.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ye.min():l.readTime?hr(l.readTime):ye.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Op(d)?{documents:hR(o,d)}:{query:dR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=DE(o,l.resumeToken);const p=Vp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ye.min())>0){h.readTime=Ph(o,l.snapshotVersion.toTimestamp());const p=Vp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=pR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.q_(n)}}class rb extends ZE{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cR(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{}class sb extends ib{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Fp(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Fp(n,r),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ob{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class ab{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Ms(this)&&(ie(As,"Restarting streams for network reachability change."),await async function(d){const p=ve(d);p.Ea.add(4),await mu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await pd(p)}(this))})}),this.Ra=new ob(r,s)}}async function pd(t){if(Ms(t))for(const e of t.da)await e(!0)}async function mu(t){for(const e of t.da)await e(!1)}function KE(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?gg(n):pa(n).O_()&&mg(n,e))}function pg(t,e){const n=ve(t),r=pa(n);n.Ia.delete(e),r.O_()&&QE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ms(n)&&n.Ra.set("Unknown"))}function mg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).Y_(e)}function QE(t,e){t.Va.Ue(e),pa(t).Z_(e)}function gg(t){t.Va=new tR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Ra.ua()}function _g(t){return Ms(t)&&!pa(t).x_()&&t.Ia.size>0}function Ms(t){return ve(t).Ea.size===0}function YE(t){t.Va=void 0}async function lb(t){t.Ra.set("Online")}async function ub(t){t.Ia.forEach((e,n)=>{mg(t,e)})}async function cb(t,e){YE(t),_g(t)?(t.Ra.ha(e),gg(t)):t.Ra.set("Unknown")}async function hb(t,e,n){if(t.Ra.set("Online"),e instanceof ME&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(r){ie(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ah(t,r)}else if(e instanceof jc?t.Va.Ze(e):e instanceof OE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await qE(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(bt.EMPTY_BYTE_STRING,_.snapshotVersion)),QE(o,d);const w=new yi(_.target,d,p,_.sequenceNumber);mg(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ie(As,"Failed to raise snapshot:",r),await Ah(t,r)}}async function Ah(t,e,n){if(!da(e))throw e;t.Ea.add(1),await mu(t),t.Ra.set("Offline"),n||(n=()=>qE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(As,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pd(t)})}function XE(t,e){return e().catch(n=>Ah(t,n,e))}async function md(t){const e=ve(t),n=zi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jm;for(;db(e);)try{const s=await GR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,fb(e,s)}catch(s){await Ah(e,s)}JE(e)&&eT(e)}function db(t){return Ms(t)&&t.Ta.length<10}function fb(t,e){t.Ta.push(e);const n=zi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function JE(t){return Ms(t)&&!zi(t).x_()&&t.Ta.length>0}function eT(t){zi(t).start()}async function pb(t){zi(t).ra()}async function mb(t){const e=zi(t);for(const n of t.Ta)e.ea(n.mutations)}async function gb(t,e,n){const r=t.Ta.shift(),s=ag.from(r,e,n);await XE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await md(t)}async function _b(t,e){e&&zi(t).X_&&await async function(r,s){if(function(l){return XA(l)&&l!==G.ABORTED}(s.code)){const o=r.Ta.shift();zi(r).B_(),await XE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await md(r)}}(t,e),JE(t)&&eT(t)}async function Sv(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ie(As,"RemoteStore received new credentials");const r=Ms(n);n.Ea.add(3),await mu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pd(n)}async function yb(t,e){const n=ve(t);e?(n.Ea.delete(2),await pd(n)):e||(n.Ea.add(2),await mu(n),n.Ra.set("Unknown"))}function pa(t){return t.ma||(t.ma=function(n,r,s){const o=ve(n);return o.sa(),new nb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:lb.bind(null,t),t_:ub.bind(null,t),r_:cb.bind(null,t),H_:hb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_g(t)?gg(t):t.Ra.set("Unknown")):(await t.ma.stop(),YE(t))})),t.ma}function zi(t){return t.fa||(t.fa=function(n,r,s){const o=ve(n);return o.sa(),new rb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pb.bind(null,t),r_:_b.bind(null,t),ta:mb.bind(null,t),na:gb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await md(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(As,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,h=new yg(e,n,l,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(t,e){if(Wr("AsyncQueue",`${e}: ${t}`),da(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new et(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class na{constructor(e,n,r,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new na(e,n,Fo.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wb{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),o=s.queries;s.queries=Pv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(r)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Pv(){return new Os(t=>xE(t),ld)}async function tT(t,e){const n=ve(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new vb,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=vg(l,`Initialization of query '${go(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&wg(n)}async function nT(t,e){const n=ve(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xb(t,e){const n=ve(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&wg(n)}function Eb(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function wg(t){t.Ca.forEach(e=>{e.next()})}var Wp,kv;(kv=Wp||(Wp={})).Ma="default",kv.Cache="cache";class rT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.key=e}}class sT{constructor(e){this.key=e}}class Tb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=EE(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Cv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,w)=>{const x=s.get(_),A=ud(this.query,w)?w:null,F=!!x&&this.mutatedKeys.has(x.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let z=!1;x&&A?x.data.isEqual(A.data)?F!==b&&(r.track({type:3,doc:A}),z=!0):this.su(x,A)||(r.track({type:2,doc:A}),z=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!x&&A?(r.track({type:0,doc:A}),z=!0):x&&!A&&(r.track({type:1,doc:x}),z=!0,(d||p)&&(h=!0)),z&&(A?(l=l.add(A),o=b?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((_,w)=>function(A,F){const b=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:z})}};return b(A)-b(F)}(_.type,w.type)||this.eu(_.doc,w.doc)),this.ou(r),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new na(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new iT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xg="SyncEngine";class Ib{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sb{constructor(e){this.key=e,this.hu=!1}}class Cb{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Os(h=>xE(h),ld),this.Iu=new Map,this.Eu=new Set,this.du=new et(ue.comparator),this.Au=new Map,this.Ru=new cg,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Pb(t,e,n=!0){const r=hT(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await oT(r,e,n,!0),s}async function kb(t,e){const n=hT(t);await oT(n,e,!0,!1)}async function oT(t,e,n,r){const s=await ZR(t.localStore,cr(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await Ab(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&KE(t.remoteStore,s),h}async function Ab(t,e,n,r,s){t.pu=(w,x,A)=>async function(b,z,S,T){let O=z.view.ru(S);O.Cs&&(O=await wv(b.localStore,z.query,!1).then(({documents:R})=>z.view.ru(R,O)));const H=T&&T.targetChanges.get(z.targetId),Q=T&&T.targetMismatches.get(z.targetId)!=null,ee=z.view.applyChanges(O,b.isPrimaryClient,H,Q);return Rv(b,z.targetId,ee.au),ee.snapshot}(t,w,x,A);const o=await wv(t.localStore,e,!0),l=new Tb(e,o.Qs),h=l.ru(o.documents),d=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Rv(t,n,p.au);const _=new Ib(e,n,l);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function Rb(t,e,n){const r=ve(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(l=>!ld(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pg(r.remoteStore,s.targetId),Hp(r,s.targetId)}).catch(ha)):(Hp(r,s.targetId),await Bp(r.localStore,s.targetId,!0))}async function bb(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pg(n.remoteStore,r.targetId))}async function Lb(t,e,n){const r=zb(t);try{const s=await function(l,h){const d=ve(l),p=Ge.now(),_=h.reduce((A,F)=>A.add(F.key),ke());let w,x;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let F=Hr(),b=ke();return d.Ns.getEntries(A,_).next(z=>{F=z,F.forEach((S,T)=>{T.isValidDocument()||(b=b.add(S))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,F)).next(z=>{w=z;const S=[];for(const T of h){const O=GA(T,w.get(T.key).overlayedDocument);O!=null&&S.push(new $i(T.key,O,fE(O.value.mapValue),qn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,S,h)}).next(z=>{x=z;const S=z.applyToLocalDocumentSet(w,b);return d.documentOverlayCache.saveOverlays(A,z.batchId,S)})}).then(()=>({batchId:x.batchId,changes:IE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new et(Pe)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(r,s.batchId,n),await gu(r,s.changes),await md(r.remoteStore)}catch(s){const o=vg(s,"Failed to persist write");n.reject(o)}}async function aT(t,e){const n=ve(t);try{const r=await $R(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ze(l.hu,14607):s.removedDocuments.size>0&&(ze(l.hu,42227),l.hu=!1))}),await gu(n,r,e)}catch(r){await ha(r)}}function Av(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ve(l);d.onlineState=h;let p=!1;d.queries.forEach((_,w)=>{for(const x of w.Sa)x.va(h)&&(p=!0)}),p&&wg(d)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Nb(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new et(ue.comparator);l=l.insert(o,Ft.newNoDocument(o,ye.min()));const h=ke().add(o),d=new dd(ye.min(),new Map,new et(Pe),l,h);await aT(r,d),r.du=r.du.remove(o),r.Au.delete(e),Eg(r)}else await Bp(r.localStore,e,!1).then(()=>Hp(r,e,n)).catch(ha)}async function Ob(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await HR(n.localStore,e);uT(n,r,null),lT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gu(n,s)}catch(s){await ha(s)}}async function Mb(t,e,n){const r=ve(t);try{const s=await function(l,h){const d=ve(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(w=>(ze(w!==null,37113),_=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(r.localStore,e);uT(r,e,n),lT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gu(r,s)}catch(s){await ha(s)}}function lT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uT(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Hp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||cT(t,r)})}function cT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Eg(t))}function Rv(t,e,n){for(const r of n)r instanceof iT?(t.Ru.addReference(r.key,e),Db(t,r)):r instanceof sT?(ie(xg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||cT(t,r.key)):pe(19791,{wu:r})}function Db(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(xg,"New document in limbo: "+n),t.Eu.add(r),Eg(t))}function Eg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(He.fromString(e)),r=t.fu.next();t.Au.set(r,new Sb(n)),t.du=t.du.insert(n,r),KE(t.remoteStore,new yi(cr(ig(n.path)),r,"TargetPurposeLimboResolution",sd.ce))}}async function gu(t,e,n){const r=ve(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,d)=>{l.push(r.pu(d,e,n).then(p=>{var _;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){s.push(p);const w=dg.As(d.targetId,p);o.push(w)}}))}),await Promise.all(l),r.Pu.H_(s),await async function(d,p){const _=ve(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(p,x=>Z.forEach(x.Es,A=>_.persistence.referenceDelegate.addReference(w,x.targetId,A)).next(()=>Z.forEach(x.ds,A=>_.persistence.referenceDelegate.removeReference(w,x.targetId,A)))))}catch(w){if(!da(w))throw w;ie(fg,"Failed to update sequence numbers: "+w)}for(const w of p){const x=w.targetId;if(!w.fromCache){const A=_.Ms.get(x),F=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(F);_.Ms=_.Ms.insert(x,b)}}}(r.localStore,o))}async function Vb(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ie(xg,"User change. New user:",e.toKey());const r=await $E(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne(G.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(n,r.Ls)}}function Fb(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let s=ke();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function hT(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nb.bind(null,e),e.Pu.H_=xb.bind(null,e.eventManager),e.Pu.yu=Eb.bind(null,e.eventManager),e}function zb(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ob.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mb.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WR(this.persistence,new jR,e.initialUser,this.serializer)}Cu(e){return new HE(hg.mi,this.serializer)}Du(e){return new QR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class jb extends Rh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof kh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new HE(r=>kh.mi(r,n),this.serializer)}}class $p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Av(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vb.bind(null,this.syncEngine),await yb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wb}()}createDatastore(e){const n=fd(e.databaseInfo.databaseId),r=function(o){return new tb(o)}(e.databaseInfo);return function(o,l,h,d){return new sb(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,h){return new ab(r,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return Tv.v()?new Tv:new YR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,_){const w=new Cb(s,o,l,h,d,p);return _&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ve(s);ie(As,"RemoteStore shutting down."),o.Ea.add(5),await mu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$p.provider={build:()=>new $p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class Bb{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ie(ji,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ie(ji,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),ie(ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $E(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ub(t);ie(ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sv(e.remoteStore,s)),t._onlineComponents=e}async function Ub(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(ji,"Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new Rh)}}else ie(ji,"Using default OfflineComponentProvider"),await If(t,new jb(void 0));return t._offlineComponents}async function fT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(ji,"Using user provided OnlineComponentProvider"),await bv(t,t._uninitializedComponentsProvider._online)):(ie(ji,"Using default OnlineComponentProvider"),await bv(t,new $p))),t._onlineComponents}function Wb(t){return fT(t).then(e=>e.syncEngine)}async function pT(t){const e=await fT(t),n=e.eventManager;return n.onListen=Pb.bind(null,e.syncEngine),n.onUnlisten=Rb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bb.bind(null,e.syncEngine),n}function Hb(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new dT({next:x=>{_.Nu(),l.enqueueAndForget(()=>nT(o,w));const A=x.docs.has(h);!A&&x.fromCache?p.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&x.fromCache&&d&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new rT(ig(h.path),_,{includeMetadataChanges:!0,qa:!0});return tT(o,w)}(await pT(t),t.asyncQueue,e,n,r)),r.promise}function $b(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new dT({next:x=>{_.Nu(),l.enqueueAndForget(()=>nT(o,w)),x.fromCache&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new rT(h,_,{includeMetadataChanges:!0,qa:!0});return tT(o,w)}(await pT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firestore.googleapis.com",Nv=!0;class Ov{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gT,this.ssl=Nv}else this.host=e.host,this.ssl=e.ssl??Nv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TR)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yk;switch(r.type){case"firstParty":return new tA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),Lv.delete(n),r.terminate())}(this),Promise.resolve()}}function qb(t,e,n,r={}){var p;t=gr(t,gd);const s=la(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(jx(`https://${h}`),Bx("Firestore",!0)),o.host!==gT&&o.host!==h&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:r};if(!Cs(d,l)&&(t._setSettings(d),r.mockUserToken)){let _,w;if(typeof r.mockUserToken=="string")_=r.mockUserToken,w=Dt.MOCK_USER;else{_=IP(r.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Dt(x)}t._authCredentials=new Xk(new tE(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,ot._jsonSchema))return new ot(e,r||null,new ue(He.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:ft("string",ot._jsonSchemaVersion),referencePath:ft("string")};class bi extends Ds{constructor(e,n,r){super(e,n,ig(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ue(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function Bn(t,e,...n){if(t=St(t),nE("collection","path",e),t instanceof gd){const r=He.fromString(e,...n);return Gy(r),new bi(t,null,r)}{if(!(t instanceof ot||t instanceof bi))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return Gy(r),new bi(t.firestore,null,r)}}function Sn(t,e,...n){if(t=St(t),arguments.length===1&&(e=Xm.newId()),nE("doc","path",e),t instanceof gd){const r=He.fromString(e,...n);return qy(r),new ot(t,null,new ue(r))}{if(!(t instanceof ot||t instanceof bi))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return qy(r),new ot(t.firestore,t instanceof bi?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="AsyncQueue";class Dv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GE(this,"async_queue_retry"),this._c=()=>{const r=Tf();r&&ie(Mv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;ie(Mv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Vv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=yg.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&pe(47125,{Pc:Vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Vv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ma extends gd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Dv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dv(e),this._firestoreClient=void 0,await e}}}function Gb(t,e){const n=typeof t=="object"?t:$x(),r=typeof t=="string"?t:Eh,s=Qm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=EP("firestore");o&&qb(s,...o)}return s}function Tg(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zb(t),t._firestoreClient}function Zb(t){var r,s,o;const e=t._freezeSettings(),n=function(h,d,p,_){return new yA(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,mT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Bb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(bt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:ft("string",Cn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(du(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:ft("string",dr._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fr(e.vectorValues);throw new ne(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:ft("string",fr._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=/^__.*__$/;class Qb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new fu(e,this.data,n,this.fieldTransforms)}}class _T{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class Sg{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yT(this.Ac)&&Kb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Yb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fd(e)}Cc(e,n,r,s=!1){return new Sg({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cg(t){const e=t._freezeSettings(),n=fd(t._databaseId);return new Yb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xb(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Pg("Data must be an object, but it was:",l,r);const h=vT(r,l);let d,p;if(o.merge)d=new cn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const w of o.mergeFields){const x=qp(e,w,n);if(!l.contains(x))throw new ne(G.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xT(_,x)||_.push(x)}d=new cn(_),p=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,p=l.fieldTransforms;return new Qb(new en(h),d,p)}class yd extends Ig{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}function Jb(t,e,n,r){const s=t.Cc(1,e,n);Pg("Data must be an object, but it was:",s,r);const o=[],l=en.empty();Hi(r,(d,p)=>{const _=kg(e,d,n);p=St(p);const w=s.yc(_);if(p instanceof yd)o.push(_);else{const x=_u(p,w);x!=null&&(o.push(_),l.set(_,x))}});const h=new cn(o);return new _T(l,h,s.fieldTransforms)}function e2(t,e,n,r,s,o){const l=t.Cc(1,e,n),h=[qp(e,r,n)],d=[s];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(qp(e,o[x])),d.push(o[x+1]);const p=[],_=en.empty();for(let x=h.length-1;x>=0;--x)if(!xT(p,h[x])){const A=h[x];let F=d[x];F=St(F);const b=l.yc(A);if(F instanceof yd)p.push(A);else{const z=_u(F,b);z!=null&&(p.push(A),_.set(A,z))}}const w=new cn(p);return new _T(_,w,l.fieldTransforms)}function t2(t,e,n,r=!1){return _u(n,t.Cc(r?4:3,e))}function _u(t,e){if(wT(t=St(t)))return Pg("Unsupported field value:",e,t),vT(t,e);if(t instanceof Ig)return function(r,s){if(!yT(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const h of r){let d=_u(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:Ph(s.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,o)}}if(r instanceof dr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cn)return{bytesValue:DE(s.serializer,r._byteString)};if(r instanceof ot){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ug(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fr)return function(l,h){return{mapValue:{fields:{[hE]:{stringValue:dE},[Th]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return sg(h.serializer,p)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${id(r)}`)}(t,e)}function vT(t,e){const n={};return sE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,s)=>{const o=_u(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function wT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof dr||t instanceof Cn||t instanceof ot||t instanceof Ig||t instanceof fr)}function Pg(t,e,n){if(!wT(n)||!rE(n)){const r=id(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function qp(t,e,n){if((e=St(e))instanceof _d)return e._internalPath;if(typeof e=="string")return kg(t,e);throw bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const n2=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(n2)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _d(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bh(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ne(G.INVALID_ARGUMENT,h+t+d)}function xT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r2 extends ET{data(){return super.data()}}function vd(t,e){return typeof e=="string"?kg(t,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class TT extends Ag{}function Bc(t,e,...n){let r=[];e instanceof Ag&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof Rg).length,h=o.filter(d=>d instanceof wd).length;if(l>1||l>0&&h>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class wd extends TT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wd(e,n,r)}_apply(e){const n=this._parse(e);return IT(e._query,n),new Ds(e.firestore,e.converter,Mp(e._query,n))}_parse(e){const n=Cg(e.firestore);return function(o,l,h,d,p,_,w){let x;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zv(w,_);const F=[];for(const b of w)F.push(Fv(d,o,b));x={arrayValue:{values:F}}}else x=Fv(d,o,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zv(w,_),x=t2(h,l,w,_==="in"||_==="not-in");return dt.create(p,_,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uc(t,e,n){const r=e,s=vd("where",t);return wd._create(s,r,n)}class Rg extends Ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)IT(l,d),l=Mp(l,d)}(e._query,n),new Ds(e.firestore,e.converter,Mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends TT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(o,l)}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new fa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function s2(t,e="asc"){const n=e,r=vd("orderBy",t);return bg._create(r,n)}function Fv(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!ue.isDocumentKey(r))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tv(t,new ue(r))}if(n instanceof ot)return tv(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function zv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IT(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o2{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[Th].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>it(l.doubleValue));return new fr(n)}convertGeoPoint(e){return new dr(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Di(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);ze(UE(r),9688,{name:e});const s=new Ql(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return s.isEqual(n)||Wr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends ET{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:ft("string",ws._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Wc extends ws{data(e={}){return super.data(e)}}class zo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wc(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:l2(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){t=gr(t,ot);const e=gr(t.firestore,ma);return Hb(Tg(e),t._key).then(n=>u2(e,t,n))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:ft("string",zo._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class ST extends o2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Un(t){t=gr(t,Ds);const e=gr(t.firestore,ma),n=Tg(e),r=new ST(e);return i2(t._query),$b(n,t._query).then(s=>new zo(e,r,t,s))}function Ng(t,e,n){t=gr(t,ot);const r=gr(t.firestore,ma),s=a2(t.converter,e);return Og(r,[Xb(Cg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function tu(t,e,n,...r){t=gr(t,ot);const s=gr(t.firestore,ma),o=Cg(s);let l;return l=typeof(e=St(e))=="string"||e instanceof _d?e2(o,"updateDoc",t._key,e,n,r):Jb(o,"updateDoc",t._key,e),Og(s,[l.toMutation(t._key,qn.exists(!0))])}function Sf(t){return Og(gr(t.firestore,ma),[new og(t._key,qn.none())])}function Og(t,e){return function(r,s){const o=new Vr;return r.asyncQueue.enqueueAndForget(async()=>Lb(await Wb(r),s,o)),o.promise}(Tg(t),e)}function u2(t,e,n){const r=n.docs.get(e._key),s=new ST(t);return new ws(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ca=s})(ua),Qo(new Ps("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new ma(new Jk(r.getProvider("auth-internal")),new nA(l,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(p.options.projectId,_)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ai(Uy,Wy,e),Ai(Uy,Wy,"esm2020")})();function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c2=CT,PT=new cu("auth","Firebase",CT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Zm("@firebase/auth");function h2(t,...e){Lh.logLevel<=Ce.WARN&&Lh.warn(`Auth (${ua}): ${t}`,...e)}function Hc(t,...e){Lh.logLevel<=Ce.ERROR&&Lh.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw Mg(t,...e)}function pr(t,...e){return Mg(t,...e)}function kT(t,e,n){const r={...c2(),[e]:n};return new cu("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return kT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PT.create(t,...e)}function fe(t,e,...n){if(!t)throw Mg(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function $r(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function d2(){return jv()==="http:"||jv()==="https:"}function jv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d2()||RP()||"connection"in navigator)?navigator.onLine:!0}function p2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,$r(n>e,"Short delay should be less than long delay!"),this.isMobile=PP()||bP()}get(){return f2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){$r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_2=new yu(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qi(t,e,n,r,s={}){return RT(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=hu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return AP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&la(t.emulatorConfig.host)&&(p.credentials="include"),AT.fetch()(await bT(t,t.config.apiHost,n,h),p)})}async function RT(t,e,n){t._canInitEmulator=!1;const r={...m2,...e};try{const s=new v2(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Tc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Tc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Tc(t,"user-disabled",l);const _=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kT(t,_,p);Kn(t,_)}}catch(s){if(s instanceof Gr)throw s;Kn(t,"network-request-failed",{message:String(s)})}}async function xd(t,e,n,r,s={}){const o=await qi(t,e,n,r,s);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function bT(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?Dg(t.config,s):`${t.config.apiScheme}://${s}`;return g2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function y2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),_2.get())})}}function Tc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class w2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return y2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x2(t,e){return qi(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function Nh(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T2(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=Vg(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Cl(Cf(s.auth_time)),issuedAtTime:Cl(Cf(s.iat)),expirationTime:Cl(Cf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Cf(t){return Number(t)*1e3}function Vg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Dx(n);return s?JSON.parse(s):(Hc("Failed to decode base64 JWT payload"),null)}catch(s){return Hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Uv(t){const e=Vg(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gr&&I2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(t){var w;const e=t.auth,n=await t.getIdToken(),r=await nu(t,Nh(e,{idToken:n}));fe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?LT(s.providerUserInfo):[],l=P2(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Zp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function C2(t){const e=St(t);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function LT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e){const n=await RT(t,{},async()=>{const r=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await bT(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&la(t.emulatorConfig.host)&&(d.credentials="include"),AT.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A2(t,e){return qi(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=Uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await k2(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new jo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new S2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T2(this,e)}reload(){return C2(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await nu(this,E2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:A,providerData:F,stsTokenManager:b}=n;fe(w&&b,e,"internal-error");const z=jo.fromJSON(this.name,b);fe(typeof w=="string",e,"internal-error"),oi(r,e.name),oi(s,e.name),fe(typeof x=="boolean",e,"internal-error"),fe(typeof A=="boolean",e,"internal-error"),oi(o,e.name),oi(l,e.name),oi(h,e.name),oi(d,e.name),oi(p,e.name),oi(_,e.name);const S=new Wn({uid:w,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:A,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:_});return F&&Array.isArray(F)&&(S.providerData=F.map(T=>({...T}))),d&&(S._redirectEventId=d),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new jo;s.updateFromServerResponse(n);const o=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Oh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?LT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new jo;h.updateFromIdToken(r);const d=new Wn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Zp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;function Mr(t){$r(t instanceof Function,"Expected a class definition");let e=Wv.get(t);return e?($r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NT.type="NONE";const Hv=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class Bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=$c(this.userKey,s.apiKey,o),this.fullPersistenceKey=$c("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bo(Mr(Hv),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Mr(Hv);const l=$c(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let w;if(typeof _=="string"){const x=await Nh(e,{idToken:_}).catch(()=>{});if(!x)break;w=await Wn._fromGetAccountInfoResponse(e,x,_)}else w=Wn._fromJSON(e,_);p!==o&&(h=w),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Bo(o,e,r):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Bo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zT(e))return"Blackberry";if(jT(e))return"Webos";if(MT(e))return"Safari";if((e.includes("chrome/")||DT(e))&&!e.includes("edge/"))return"Chrome";if(FT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OT(t=jt()){return/firefox\//i.test(t)}function MT(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DT(t=jt()){return/crios\//i.test(t)}function VT(t=jt()){return/iemobile/i.test(t)}function FT(t=jt()){return/android/i.test(t)}function zT(t=jt()){return/blackberry/i.test(t)}function jT(t=jt()){return/webos/i.test(t)}function Fg(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function R2(t=jt()){var e;return Fg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function b2(){return LP()&&document.documentMode===10}function BT(t=jt()){return Fg(t)||FT(t)||jT(t)||zT(t)||/windows phone/i.test(t)||VT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e=[]){let n;switch(t){case"Browser":n=$v(jt());break;case"Worker":n=`${$v(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class M2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??O2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new L2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mr(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Li(this));const n=e?St(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N2(this),n=new M2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&h2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ga(t){return St(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=jP(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V2(t){Ed=t}function WT(t){return Ed.loadJS(t)}function F2(){return Ed.recaptchaEnterpriseScript}function z2(){return Ed.gapiScript}function j2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class B2{constructor(){this.enterprise=new U2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class U2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const W2="recaptcha-enterprise",HT="NO_RECAPTCHA";class H2{constructor(e){this.type=W2,this.auth=ga(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{x2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new w2(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Bv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(HT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new B2().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&Bv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=F2();d.length!==0&&(d+=h),WT(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Gv(t,e,n,r=!1,s=!1){const o=new H2(t);let l;if(s)l=HT;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Zv(t,e,n,r,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Gv(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Gv(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t,e){const n=Qm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Cs(o,e??{}))return s;Kn(s,"already-initialized")}return n.initialize({options:e})}function q2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G2(t,e,n){const r=ga(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=$T(e),{host:l,port:h}=Z2(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},_=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Cs(p,r.config.emulator)&&Cs(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,la(l)?(jx(`${o}//${l}${d}`),Bx("Auth",!0)):K2()}function $T(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z2(t){const e=$T(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Kv(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Kv(l)}}}function Kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function K2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Q2(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){return xd(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return xd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function J2(t,e){return xd(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends zg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ru(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ru(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zv(e,n,"signInWithPassword",Y2);case"emailLink":return X2(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zv(e,r,"signUpPassword",Q2);case"emailLink":return J2(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e){return xd(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="http://localhost";class Rs extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new Rs(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Uo(e,n)}buildRequest(){const e={requestUri:eL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nL(t){const e=ol(al(t)).link,n=e?ol(al(e)).deep_link_id:null,r=ol(al(t)).deep_link_id;return(r?ol(al(r)).link:null)||r||n||e||t}class jg{constructor(e){const n=ol(al(e)),r=n.apiKey??null,s=n.oobCode??null,o=tL(n.mode??null);fe(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nL(e);try{return new jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jg.parseLink(n);return fe(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends qT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends vu{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return di.credential(n,r)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends vu{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends vu{constructor(){super("twitter.com")}static credential(e,n){return Rs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Wn._fromIdTokenResponse(e,r,s),l=Qv(r);return new ra({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qv(r);return new ra({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Gr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mh(e,n,r,s)}}function GT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(t,o,e,r):o})}async function rL(t,e,n=!1){const r=await nu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ra._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(Li(r));const s="reauthenticate";try{const o=await nu(t,GT(r,s,e,t),n);fe(o.idToken,r,"internal-error");const l=Vg(o.idToken);fe(l,r,"internal-error");const{sub:h}=l;return fe(t.uid===h,r,"user-mismatch"),ra._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e,n=!1){if(jn(t.app))return Promise.reject(Li(t));const r="signIn",s=await GT(t,r,e),o=await ra._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function sL(t,e){return ZT(ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t){const e=ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function aL(t,e,n){return jn(t.app)?Promise.reject(Li(t)):sL(St(t),_a.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oL(t),r})}function lL(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function uL(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function cL(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function hL(t){return St(t).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=1e3,fL=10;class QT extends KT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);b2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},dL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QT.type="LOCAL";const pL=QT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends KT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YT.type="SESSION";const XT=YT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Td(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await mL(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Bg("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function _L(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function yL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wL(){return JT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",xL=1,Vh="firebaseLocalStorage",t1="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(t,e){return t.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function EL(){const t=indexedDB.deleteDatabase(e1);return new wu(t).toPromise()}function Kp(){const t=indexedDB.open(e1,xL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vh,{keyPath:t1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vh)?e(r):(r.close(),await EL(),e(await Kp()))})})}async function Yv(t,e,n){const r=Id(t,!0).put({[t1]:e,value:n});return new wu(r).toPromise()}async function TL(t,e){const n=Id(t,!1).get(e),r=await new wu(n).toPromise();return r===void 0?null:r.value}function Xv(t,e){const n=Id(t,!0).delete(e);return new wu(n).toPromise()}const IL=800,SL=3;class n1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(wL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await yL(),!this.activeServiceWorker)return;this.sender=new gL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await Yv(e,Dh,"1"),await Xv(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Id(s,!1).getAll();return new wu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n1.type="LOCAL";const CL=n1;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){return e?Mr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kL(t){return ZT(t.auth,new Ug(t),t.bypassAuthState)}function AL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),iL(n,new Ug(t),t.bypassAuthState)}async function RL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),rL(n,new Ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kL;case"linkViaPopup":case"linkViaRedirect":return RL;case"reauthViaPopup":case"reauthViaRedirect":return AL;default:Kn(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new yu(2e3,1e4);class bo extends r1{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bL.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="pendingRedirect",qc=new Map;class NL extends r1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const r=await OL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OL(t,e){const n=VL(e),r=DL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ML(t,e){qc.set(t._key(),e)}function DL(t){return Mr(t._redirectPersistence)}function VL(t){return $c(LL,t.config.apiKey,t.name)}async function FL(t,e,n=!1){if(jn(t.app))return Promise.reject(Li(t));const r=ga(t),s=PL(r,e),l=await new NL(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=10*60*1e3;class jL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!i1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;async function $L(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UL(t);for(const n of e)try{if(qL(n))return}catch{}Kn(t,"unauthorized-domain")}function qL(t){const e=Gp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!HL.test(n))return!1;if(WL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new yu(3e4,6e4);function e0(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZL(t){return new Promise((e,n)=>{var s,o,l;function r(){e0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e0(),n(pr(t,"network-request-failed"))},timeout:GL.get()})}if((o=(s=mr().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=mr().gapi)!=null&&l.load)r();else{const h=j2("iframefcb");return mr()[h]=()=>{gapi.load?r():n(pr(t,"network-request-failed"))},WT(`${z2()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function KL(t){return Gc=Gc||ZL(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new yu(5e3,15e3),YL="__/auth/iframe",XL="emulator/auth/iframe",JL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tN(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dg(e,XL):`https://${t.config.authDomain}/${YL}`,r={apiKey:e.apiKey,appName:t.name,v:ua},s=eN.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${hu(r).slice(1)}`}async function nN(t){const e=await KL(t),n=mr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:tN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JL,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=pr(t,"network-request-failed"),h=mr().setTimeout(()=>{o(l)},QL.get());function d(){mr().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iN=500,sN=600,oN="_blank",aN="http://localhost";class t0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(t,e,n,r=iN,s=sN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...rN,width:r.toString(),height:s.toString(),top:o,left:l},p=jt().toLowerCase();n&&(h=DT(p)?oN:n),OT(p)&&(e=e||aN,d.scrollbars="yes");const _=Object.entries(d).reduce((x,[A,F])=>`${x}${A}=${F},`,"");if(R2(p)&&h!=="_self")return uN(e||"",h),new t0(null);const w=window.open(e||"",h,_);fe(w,t,"popup-blocked");try{w.focus()}catch{}return new t0(w)}function uN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",hN="emulator/auth/handler",dN=encodeURIComponent("fac");async function n0(t,e,n,r,s,o){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ua,eventId:s};if(e instanceof qT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",zP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))l[_]=w}if(e instanceof vu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${dN}=${encodeURIComponent(d)}`:"";return`${fN(t)}?${hu(h).slice(1)}${p}`}function fN({config:t}){return t.emulator?Dg(t,hN):`https://${t.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class pN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XT,this._completeRedirectFn=FL,this._overrideRedirectResult=ML}async _openPopup(e,n,r,s){var l;$r((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await n0(e,n,r,Gp(),s);return lN(e,o,Bg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await n0(e,n,r,Gp(),s);return _L(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):($r(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await nN(e),r=new jL(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Pf];o!==void 0&&n(!!o),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$L(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BT()||MT()||Fg()}}const mN=pN;var r0="@firebase/auth",i0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(t){Qo(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UT(t)},p=new D2(r,s,o,d);return q2(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qo(new Ps("auth-internal",e=>{const n=ga(e.getProvider("auth").getImmediate());return(r=>new gN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(r0,i0,_N(t)),Ai(r0,i0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=5*60,wN=zx("authIdTokenMaxAge")||vN;let s0=null;const xN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wN)return;const s=n==null?void 0:n.token;s0!==s&&(s0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function EN(t=$x()){const e=Qm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$2(t,{popupRedirectResolver:mN,persistence:[CL,pL,XT]}),r=zx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=xN(o.toString());uL(n,l,()=>l(n.currentUser)),lL(n,h=>l(h))}}const s=Vx("auth");return s&&G2(n,`http://${s}`),n}function TN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}V2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=pr("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",TN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");var IN="firebase",SN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(IN,SN,"app");const CN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},s1=Hx(CN),be=Gb(s1),kf=EN(s1),Qe={FACILITIES:"facilities",HITS:"hits"},PN=()=>{var V;const[t,e]=q.useState(!1),[n,r]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[_,w]=q.useState([]),[x,A]=q.useState(!1),[F,b]=q.useState(null),[z,S]=q.useState(null),[T,O]=q.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),H=uu();q.useEffect(()=>{const k=cL(kf,C=>{C?(e(!0),h(null)):e(!1)});return()=>k()},[]),q.useEffect(()=>{t&&Q()},[t]);const Q=async()=>{A(!0),b(null);try{if(!be)throw new Error("Firebase not initialized");const k=await Un(Bn(be,Qe.FACILITIES)),C=await Promise.all(k.docs.map(async J=>{var Se,xe;const we=Bc(Bn(be,Qe.HITS),Uc("facilityId","==",parseInt(J.id))),De=(await Un(we)).docs.map(he=>({id:parseInt(he.id),...he.data()})),$=J.data(),le=((Se=$.location)==null?void 0:Se.latitude)??$.latitude,Y=((xe=$.location)==null?void 0:xe.longitude)??$.longitude,me=De.filter(he=>!he.draft).reduce((he,at)=>he+(at.damagePercentage||0),0),Ue=Math.max(0,$.capacity*(1-me/100));return{id:parseInt(J.id),name:$.name,type:$.type,capacity:$.capacity,gasCapacity:$.gasCapacity,currentProduction:Ue,latitude:le,longitude:Y,status:$.status,hit:$.hit,draft:$.draft??!1,hits:De}}));w(C)}catch(k){console.error("Error fetching facilities:",k),b("Failed to load facilities from Firebase.")}finally{A(!1)}},ee=async k=>{k.preventDefault(),h(null),A(!0);try{await aL(kf,n,s)}catch(C){console.error("Login error:",C),C.code==="auth/invalid-credential"?h("Invalid email or password"):C.code==="auth/user-not-found"?h("No account found with this email"):C.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{A(!1)}},R=async()=>{try{await hL(kf),H("/")}catch(k){console.error("Logout error:",k)}},P=async k=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!be)throw new Error("Firebase not initialized");const C=Bc(Bn(be,Qe.HITS),Uc("facilityId","==",k)),J=await Un(C);for(const we of J.docs)await Sf(we.ref);await Sf(Sn(be,Qe.FACILITIES,k.toString())),Q()}catch(C){console.error("Error deleting facility:",C),alert("Failed to delete facility")}},N=async(k,C)=>{var J;C.preventDefault();try{if(!be)throw new Error("Firebase not initialized");const De=(await Un(Bn(be,Qe.HITS))).docs.reduce((Y,ce)=>{const me=parseInt(ce.id);return me>Y?me:Y},0)+1,$={id:De,facilityId:k,date:T.date,severity:T.severity,damagePercentage:T.damagePercentage||0,mediaLinks:(J=T.mediaLinks)==null?void 0:J.filter(Y=>Y.trim()!==""),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!0};await Ng(Sn(be,Qe.HITS,De.toString()),$);const le=Sn(be,Qe.FACILITIES,k.toString());await tu(le,{hit:!0}),S(null),O({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),Q()}catch(we){console.error("Error adding hit:",we),alert("Failed to add hit record")}},D=async(k,C)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!be)throw new Error("Firebase not initialized");await Sf(Sn(be,Qe.HITS,C.toString()));const J=Bc(Bn(be,Qe.HITS),Uc("facilityId","==",k));if((await Un(J)).empty){const Le=Sn(be,Qe.FACILITIES,k.toString());await tu(Le,{hit:!1})}Q()}catch(J){console.error("Error deleting hit:",J),alert("Failed to delete hit record")}};return t?v.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[v.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[v.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[v.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),v.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),v.jsx("button",{onClick:R,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),v.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[v.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[v.jsx("span",{style:{fontSize:"20px"},children:"🏭"}),v.jsx("span",{children:"Facilities"})]}),v.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[v.jsx("span",{style:{fontSize:"20px"},children:"💥"}),v.jsx("span",{children:"Hit Records"})]})]}),v.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:v.jsx("button",{onClick:()=>H("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"🗺️ View Map"})})]}),v.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),v.jsxs("p",{style:{color:"#999"},children:["Total: ",_.length," facilities"]})]}),v.jsx("button",{onClick:()=>H("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),x&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),F&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!x&&!F&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Normal Production"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Current Production"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),v.jsx("tbody",{children:_.map(k=>{var C,J;return v.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[v.jsx("td",{style:{padding:"15px"},children:k.id}),v.jsx("td",{style:{padding:"15px"},children:k.name}),v.jsx("td",{style:{padding:"15px"},children:k.type}),v.jsxs("td",{style:{padding:"15px"},children:[((C=k.capacity)==null?void 0:C.toLocaleString())||0," bbl/day"]}),v.jsx("td",{style:{padding:"15px"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsxs("span",{style:{color:k.currentProduction===k.capacity?"#4CAF50":"#FF9800"},children:[((J=k.currentProduction)==null?void 0:J.toLocaleString())||0," bbl/day"]}),k.currentProduction!==k.capacity&&v.jsxs("span",{style:{fontSize:"11px",color:"#f44336",backgroundColor:"#331111",padding:"2px 6px",borderRadius:"3px"},children:["-",((1-(k.currentProduction||0)/k.capacity)*100).toFixed(0),"%"]})]})}),v.jsx("td",{style:{padding:"15px"},children:k.gasCapacity?k.gasCapacity.toLocaleString()+" million m³/year":"-"}),v.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:k.latitude!=null&&k.longitude!=null?`${k.latitude.toFixed(4)}, ${k.longitude.toFixed(4)}`:"N/A"}),v.jsx("td",{style:{padding:"15px"},children:v.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:k.hit?"#f44336":"#4CAF50",color:"#fff"},children:k.status})}),v.jsx("td",{style:{padding:"15px"},children:v.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:k.draft?"#ff9800":"#4CAF50",color:"#fff"},children:k.draft?"DRAFT":"Published"})}),v.jsxs("td",{style:{padding:"15px"},children:[v.jsx("button",{onClick:()=>H(`/admin/facility/${k.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),v.jsx("button",{onClick:()=>P(k.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},k.id)})})]}),_.length===0&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),v.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),v.jsx("button",{onClick:()=>H("/admin/hit/new"),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"+ Add New Hit"})]}),z===-1&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[v.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),v.jsxs("form",{onSubmit:k=>{k.preventDefault();const C=parseInt(k.target.facilityId.value);N(C,k)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),v.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[v.jsx("option",{value:"",children:"-- Choose a facility --"}),_.map(k=>v.jsxs("option",{value:k.id,children:[k.name," (",k.type,") ",k.hits&&k.hits.length>0?`- ${k.hits.length} existing hit${k.hits.length>1?"s":""}`:""]},k.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),v.jsx("input",{type:"date",required:!0,value:T.date,onChange:k=>O({...T,date:k.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),v.jsxs("select",{value:T.severity,onChange:k=>O({...T,severity:k.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:k=>{const C=Number(k.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,C))})},placeholder:"0-100",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:k=>O({...T,expectedRepairTime:Number(k.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(V=T.mediaLinks)==null?void 0:V.map((k,C)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:k,onChange:J=>{const we=[...T.mediaLinks||[]];we[C]=J.target.value,O({...T,mediaLinks:we})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),C>0&&v.jsx("button",{type:"button",onClick:()=>{var we;const J=(we=T.mediaLinks)==null?void 0:we.filter((Le,De)=>De!==C);O({...T,mediaLinks:J})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},C)),v.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),v.jsx("textarea",{value:T.notes,onChange:k=>O({...T,notes:k.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),v.jsx("div",{style:{gridColumn:"1 / -1"},children:v.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"💥 Add Hit Record"})})]})]}),x&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),F&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!x&&!F&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{display:"grid",gap:"20px"},children:_.filter(k=>k.hits&&k.hits.length>0).map(k=>{var C;return v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[v.jsxs("div",{children:[v.jsx("h2",{style:{margin:0,color:"#dc2626"},children:k.name}),v.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[k.type," • ",k.hits.length," hit record",k.hits.length!==1?"s":""]})]}),v.jsx("button",{onClick:()=>S(z===k.id?null:k.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:z===k.id?"Cancel":"+ Add Hit"})]}),z===k.id&&v.jsxs("form",{onSubmit:J=>N(k.id,J),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),v.jsx("input",{type:"date",required:!0,value:T.date,onChange:J=>O({...T,date:J.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),v.jsxs("select",{value:T.severity,onChange:J=>O({...T,severity:J.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:J=>{const we=Number(J.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,we))})},placeholder:"0-100",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:J=>O({...T,expectedRepairTime:Number(J.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(C=T.mediaLinks)==null?void 0:C.map((J,we)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:J,onChange:Le=>{const De=[...T.mediaLinks||[]];De[we]=Le.target.value,O({...T,mediaLinks:De})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),we>0&&v.jsx("button",{type:"button",onClick:()=>{var De;const Le=(De=T.mediaLinks)==null?void 0:De.filter(($,le)=>le!==we);O({...T,mediaLinks:Le})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},we)),v.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),v.jsx("textarea",{value:T.notes,onChange:J=>O({...T,notes:J.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),v.jsx("div",{style:{gridColumn:"1 / -1"},children:v.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:"💥 Save Hit Record"})})]}),k.hits&&k.hits.length>0&&v.jsx("div",{style:{display:"grid",gap:"10px"},children:k.hits.map(J=>v.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),v.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",J.id]})]}),v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),v.jsx("div",{style:{color:"#fff"},children:new Date(J.date).toLocaleDateString()})]}),J.severity&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),v.jsx("div",{style:{color:"#fff",backgroundColor:J.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:J.severity})]}),J.damagePercentage!=null&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Production Impact"}),v.jsxs("div",{style:{color:"#f44336",fontWeight:"bold",fontSize:"14px"},children:["-",J.damagePercentage,"%"]})]}),J.expectedRepairTime&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),v.jsxs("div",{style:{color:"#FF9800"},children:[J.expectedRepairTime," days"]})]}),J.draft&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Status"}),v.jsx("div",{style:{color:"#000",backgroundColor:"#ff9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:"DRAFT"})]})]}),J.mediaLinks&&J.mediaLinks.length>0&&v.jsxs("div",{style:{marginTop:"10px"},children:[v.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:J.mediaLinks.map((we,Le)=>v.jsxs("a",{href:we,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[we.includes("youtube")||we.includes("youtu.be")||we.includes("video")?"📹":"📷"," Media ",Le+1]},Le))})]}),!J.mediaLinks&&J.videoLink&&v.jsx("div",{style:{marginTop:"10px"},children:v.jsx("a",{href:J.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:"🎥 View Video"})}),J.notes&&v.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[v.jsx("strong",{children:"Notes:"})," ",J.notes]})]}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsx("button",{onClick:()=>H(`/admin/hit/${J.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),v.jsx("button",{onClick:()=>D(k.id,J.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},J.id))})]},k.id)})}),_.filter(k=>k.hits&&k.hits.length>0).length===0&&v.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[v.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"💥"}),v.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),v.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[v.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&v.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),v.jsxs("form",{onSubmit:ee,children:[v.jsxs("div",{style:{marginBottom:"20px"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),v.jsx("input",{type:"email",value:n,onChange:k=>r(k.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{marginBottom:"30px"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),v.jsx("input",{type:"password",value:s,onChange:k=>o(k.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),v.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},kN=()=>{const{id:t}=Gm(),e=uu(),[n,r]=q.useState(!1),[s,o]=q.useState(null),[l,h]=q.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});q.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var _,w;r(!0);try{if(!be)throw new Error("Firebase not initialized");const x=Sn(be,Qe.FACILITIES,t),A=await Lg(x);if(A.exists()){const F=A.data(),b=((_=F.location)==null?void 0:_.latitude)??F.latitude,z=((w=F.location)==null?void 0:w.longitude)??F.longitude;h({id:parseInt(A.id),name:F.name,type:F.type,capacity:F.capacity,gasCapacity:F.gasCapacity,latitude:b,longitude:z,status:F.status,hit:F.hit,description:F.description||"",draft:F.draft??!1})}else o("Facility not found")}catch(x){console.error("Error fetching facility:",x),o("Failed to load facility")}finally{r(!1)}},p=async(_=!1)=>{r(!0),o(null);try{if(!be)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),r(!1);return}let w=t;(!t||t==="new")&&(w=((await Un(Bn(be,Qe.FACILITIES))).docs.reduce((z,S)=>{const T=parseInt(S.id);return T>z?T:z},0)+1).toString());const x={id:parseInt(w),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},hit:l.hit??!1,draft:_?!1:l.draft??!0};l.status&&(x.status=l.status),l.gasCapacity!==void 0&&l.gasCapacity!==null&&(x.gasCapacity=l.gasCapacity),l.description&&(x.description=l.description);const A=Sn(be,Qe.FACILITIES,w);t&&t!=="new"?await tu(A,x):await Ng(A,x),alert(_?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(w){console.error("Error saving facility:",w),o("Failed to save facility")}finally{r(!1)}};return n&&t&&t!=="new"?v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:v.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[v.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),s&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:s}),l.draft&&v.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:"⚠️ This facility is in DRAFT mode and is not visible on the public map"}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),v.jsx("input",{type:"text",value:l.name,onChange:_=>h({...l,name:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),v.jsxs("select",{value:l.type,onChange:_=>h({...l,type:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[v.jsx("option",{value:"refinery",children:"Refinery"}),v.jsx("option",{value:"extraction",children:"Extraction"}),v.jsx("option",{value:"storage",children:"Storage"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),v.jsxs("select",{value:l.status,onChange:_=>h({...l,status:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[v.jsx("option",{value:"operational",children:"Operational"}),v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"offline",children:"Offline"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),v.jsx("input",{type:"number",value:l.capacity,onChange:_=>h({...l,capacity:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m³/year)"}),v.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:_=>h({...l,gasCapacity:_.target.value?Number(_.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),v.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:_=>h({...l,latitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),v.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:_=>h({...l,longitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),v.jsx("textarea",{value:l.description,onChange:_=>h({...l,description:_.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),v.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),v.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})},AN=()=>{var F;const{id:t}=Gm(),e=uu(),[n,r]=q.useState(!1),[s,o]=q.useState([]),[l,h]=q.useState({id:0,facilityId:0,date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0});q.useEffect(()=>{d(),t&&t!=="new"&&p(parseInt(t))},[t]);const d=async()=>{try{if(!be)throw new Error("Firebase not initialized");const z=(await Un(Bn(be,Qe.FACILITIES))).docs.map(S=>({id:parseInt(S.id),name:S.data().name,type:S.data().type}));o(z)}catch(b){console.error("Error fetching facilities:",b),alert("Failed to load facilities")}},p=async b=>{r(!0);try{if(!be)throw new Error("Firebase not initialized");const z=Sn(be,Qe.HITS,b.toString()),S=await Lg(z);if(S.exists()){const T=S.data();h({id:b,facilityId:T.facilityId,date:T.date,severity:T.severity||"damaged",damagePercentage:T.damagePercentage||0,mediaLinks:T.mediaLinks||(T.videoLink?[T.videoLink]:[""]),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!1})}else alert("Hit record not found"),e("/admin")}catch(z){console.error("Error fetching hit:",z),alert("Failed to load hit record")}finally{r(!1)}},_=async(b=!1)=>{var z;if(!l.facilityId){alert("Please select a facility");return}if(!l.date){alert("Please enter a date");return}r(!0);try{if(!be)throw new Error("Firebase not initialized");const S={facilityId:l.facilityId,date:l.date,severity:l.severity,damagePercentage:l.damagePercentage||0,mediaLinks:(z=l.mediaLinks)==null?void 0:z.filter(T=>T.trim()!==""),expectedRepairTime:l.expectedRepairTime,notes:l.notes,draft:b?!1:l.draft};if(t==="new"){const H=(await Un(Bn(be,Qe.HITS))).docs.reduce((ee,R)=>{const P=parseInt(R.id);return P>ee?P:ee},0)+1;await Ng(Sn(be,Qe.HITS,H.toString()),{...S,id:H});const Q=Sn(be,Qe.FACILITIES,l.facilityId.toString());await tu(Q,{hit:!0}),alert("Hit record created successfully!")}else{const T=Sn(be,Qe.HITS,t);await tu(T,S),alert("Hit record updated successfully!")}e("/admin")}catch(S){console.error("Error saving hit:",S),alert("Failed to save hit record")}finally{r(!1)}},w=()=>{h({...l,mediaLinks:[...l.mediaLinks||[],""]})},x=b=>{var z;h({...l,mediaLinks:(z=l.mediaLinks)==null?void 0:z.filter((S,T)=>T!==b)})},A=(b,z)=>{const S=[...l.mediaLinks||[]];S[b]=z,h({...l,mediaLinks:S})};return v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",padding:"20px"},children:v.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{margin:0,marginBottom:"5px"},children:t==="new"?"💥 Add New Hit Record":"✏️ Edit Hit Record"}),v.jsx("p",{style:{margin:0,color:"#999"},children:t==="new"?"Record a new strike on a facility":`Editing Hit #${t}`})]}),v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"← Back to Admin"})]}),n&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading..."}),!n&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Facility *"}),v.jsxs("select",{value:l.facilityId,onChange:b=>h({...l,facilityId:parseInt(b.target.value)}),disabled:t!=="new",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:t!=="new"?"not-allowed":"pointer"},children:[v.jsx("option",{value:0,children:"-- Select a facility --"}),s.map(b=>v.jsxs("option",{value:b.id,children:[b.name," (",b.type,")"]},b.id))]}),t!=="new"&&v.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"12px"},children:"Facility cannot be changed after creation"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Date *"}),v.jsx("input",{type:"date",value:l.date,onChange:b=>h({...l,date:b.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Severity *"}),v.jsxs("select",{value:l.severity,onChange:b=>h({...l,severity:b.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]})]}),v.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",value:l.damagePercentage||0,onChange:b=>{const z=Number(b.target.value);h({...l,damagePercentage:Math.min(100,Math.max(0,z))})},placeholder:"0-100",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),v.jsx("p",{style:{margin:"6px 0 0 0",color:"#666",fontSize:"12px"},children:"Percentage of facility capacity affected by this hit"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:l.expectedRepairTime||"",onChange:b=>h({...l,expectedRepairTime:b.target.value?Number(b.target.value):void 0}),placeholder:"e.g., 30",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Media Links (Videos/Photos)"}),(F=l.mediaLinks)==null?void 0:F.map((b,z)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:b,onChange:S=>A(z,S.target.value),placeholder:"https://...",style:{flex:1,padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),z>0&&v.jsx("button",{type:"button",onClick:()=>x(z),style:{padding:"12px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Remove"})]},z)),v.jsx("button",{type:"button",onClick:w,style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginTop:"10px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Notes"}),v.jsx("textarea",{value:l.notes,onChange:b=>h({...l,notes:b.target.value}),rows:5,placeholder:"Describe the damage, impact, and any other relevant details...",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]})]}),l.draft&&v.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ff9800",color:"#000",borderRadius:"4px",fontWeight:"600",textAlign:"center"},children:"⚠️ This hit record is in DRAFT mode and will not affect production calculations"}),v.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"15px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"12px 24px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),v.jsx("button",{onClick:()=>_(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#ff9800",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":"📝 Save as Draft"}),v.jsx("button",{onClick:()=>_(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":t==="new"?"💥 Publish Hit Record":"✓ Publish"})]})]})]})})};function o1(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const RN=1;function bN(t){return Object.freeze({__version:RN,map:t})}function a1(t,e){return Object.freeze({...t,...e})}const l1=q.createContext(null),u1=l1.Provider;function Wg(){const t=q.useContext(l1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function c1(t){function e(n,r){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(r,()=>s),n.children==null?null:Pl.createElement(u1,{value:o},n.children)}return q.forwardRef(e)}function LN(t){function e(n,r){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(r,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?xx.createPortal(n.children,h):null}return q.forwardRef(e)}function NN(t){function e(n,r){const{instance:s}=t(n).current;return q.useImperativeHandle(r,()=>s),null}return q.forwardRef(e)}function Hg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Sd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function ON(t,e){return function(r,s){const o=Wg(),l=t(Sd(r,o),o);return o1(o.map,r.attribution),Hg(l.current,r.eventHandlers),e(l.current,o,r,s),l}}var Qp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(q1,function(n){var r="1.9.4";function s(i){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)i[a]=g[a]}return i}var o=Object.create||function(){function i(){}return function(a){return i.prototype=a,new i}}();function l(i,a){var c=Array.prototype.slice;if(i.bind)return i.bind.apply(i,c.call(arguments,1));var f=c.call(arguments,2);return function(){return i.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function p(i,a,c){var f,g,E,M;return M=function(){f=!1,g&&(E.apply(c,g),g=!1)},E=function(){f?g=arguments:(i.apply(c,arguments),setTimeout(M,a),f=!0)},E}function _(i,a,c){var f=a[1],g=a[0],E=f-g;return i===f&&c?i:((i-g)%E+E)%E+g}function w(){return!1}function x(i,a){if(a===!1)return i;var c=Math.pow(10,a===void 0?6:a);return Math.round(i*c)/c}function A(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function F(i){return A(i).split(/\s+/)}function b(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var c in a)i.options[c]=a[c];return i.options}function z(i,a,c){var f=[];for(var g in i)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(i[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function T(i,a){return i.replace(S,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function H(i,a){for(var c=0;c<i.length;c++)if(i[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var R=0;function P(i){var a=+new Date,c=Math.max(0,16-(a-R));return R=a+c,window.setTimeout(i,c)}var N=window.requestAnimationFrame||ee("RequestAnimationFrame")||P,D=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function V(i,a,c){if(c&&N===P)i.call(a);else return N.call(window,l(i,a))}function k(i){i&&D.call(window,i)}var C={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:w,formatNum:x,trim:A,splitWords:F,setOptions:b,getParamString:z,template:T,isArray:O,indexOf:H,emptyImageUrl:Q,requestFn:N,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:k};function J(){}J.extend=function(i){var a=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return i.statics&&s(a,i.statics),i.includes&&(we(i.includes),s.apply(null,[f].concat(i.includes))),s(f,i),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,M=f._initHooks.length;E<M;E++)f._initHooks[E].call(this)}},a},J.include=function(i){var a=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},J.mergeOptions=function(i){return s(this.prototype.options,i),this},J.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),c=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function we(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=O(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Le={on:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a);else{i=F(i);for(var g=0,E=i.length;g<E;g++)this._on(i[g],a,c)}return this},off:function(i,a,c){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],a);else{i=F(i);for(var g=arguments.length===1,E=0,M=i.length;E<M;E++)g?this._off(i[E]):this._off(i[E],a,c)}return this},_on:function(i,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(g)}},_off:function(i,a,c){var f,g,E;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,E=f.length;g<E;g++)f[g].fn=w;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var M=this._listens(i,a,c);if(M!==!1){var B=f[M];this._firingCount&&(B.fn=w,this._events[i]=f=f.slice()),f.splice(M,1)}}},fire:function(i,a,c){if(!this.listens(i,c))return this;var f=s({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[i];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,M=g.length;E<M;E++){var B=g[E],W=B.fn;B.once&&this.off(i,W,B.ctx),W.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(i,a,c,f){typeof i!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var E=this._events&&this._events[i];if(E&&E.length&&this._listens(i,g,c)!==!1)return!0;if(f){for(var M in this._eventParents)if(this._eventParents[M].listens(i,a,c,f))return!0}return!1},_listens:function(i,a,c){if(!this._events)return!1;var f=this._events[i]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,E=f.length;g<E;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a,!0);else{i=F(i);for(var g=0,E=i.length;g<E;g++)this._on(i[g],a,c,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[d(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[d(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};Le.addEventListener=Le.on,Le.removeEventListener=Le.clearAllEventListeners=Le.off,Le.addOneTimeEventListener=Le.once,Le.fireEvent=Le.fire,Le.hasEventListeners=Le.listens;var De=J.extend(Le);function $(i,a,c){this.x=c?Math.round(i):i,this.y=c?Math.round(a):a}var le=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(Y(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Y(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new $(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new $(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(i){i=Y(i);var a=i.x-this.x,c=i.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(i){return i=Y(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Y(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Y(i,a,c){return i instanceof $?i:O(i)?new $(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new $(i.x,i.y):new $(i,a,c)}function ce(i,a){if(i)for(var c=a?[i,a]:i,f=0,g=c.length;f<g;f++)this.extend(c[f])}ce.prototype={extend:function(i){var a,c;if(!i)return this;if(i instanceof $||typeof i[0]=="number"||"x"in i)a=c=Y(i);else if(i=me(i),a=i.min,c=i.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(i){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,c;return typeof i[0]=="number"||i instanceof $?i=Y(i):i=me(i),i instanceof ce?(a=i.min,c=i.max):a=c=i,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(i){i=me(i);var a=this.min,c=this.max,f=i.min,g=i.max,E=g.x>=a.x&&f.x<=c.x,M=g.y>=a.y&&f.y<=c.y;return E&&M},overlaps:function(i){i=me(i);var a=this.min,c=this.max,f=i.min,g=i.max,E=g.x>a.x&&f.x<c.x,M=g.y>a.y&&f.y<c.y;return E&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*i,g=Math.abs(a.y-c.y)*i;return me(Y(a.x-f,a.y-g),Y(c.x+f,c.y+g))},equals:function(i){return i?(i=me(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function me(i,a){return!i||i instanceof ce?i:new ce(i,a)}function Ue(i,a){if(i)for(var c=a?[i,a]:i,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ue.prototype={extend:function(i){var a=this._southWest,c=this._northEast,f,g;if(i instanceof xe)f=i,g=i;else if(i instanceof Ue){if(f=i._southWest,g=i._northEast,!f||!g)return this}else return i?this.extend(he(i)||Se(i)):this;return!a&&!c?(this._southWest=new xe(f.lat,f.lng),this._northEast=new xe(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(i){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*i,g=Math.abs(a.lng-c.lng)*i;return new Ue(new xe(a.lat-f,a.lng-g),new xe(c.lat+f,c.lng+g))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof xe||"lat"in i?i=he(i):i=Se(i);var a=this._southWest,c=this._northEast,f,g;return i instanceof Ue?(f=i.getSouthWest(),g=i.getNorthEast()):f=g=i,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(i){i=Se(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),g=i.getNorthEast(),E=g.lat>=a.lat&&f.lat<=c.lat,M=g.lng>=a.lng&&f.lng<=c.lng;return E&&M},overlaps:function(i){i=Se(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),g=i.getNorthEast(),E=g.lat>a.lat&&f.lat<c.lat,M=g.lng>a.lng&&f.lng<c.lng;return E&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=Se(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(i,a){return i instanceof Ue?i:new Ue(i,a)}function xe(i,a,c){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,c!==void 0&&(this.alt=+c)}xe.prototype={equals:function(i,a){if(!i)return!1;i=he(i);var c=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return c<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+x(this.lat,i)+", "+x(this.lng,i)+")"},distanceTo:function(i){return mn.distance(this,he(i))},wrap:function(){return mn.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Se([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function he(i,a,c){return i instanceof xe?i:O(i)&&typeof i[0]!="object"?i.length===3?new xe(i[0],i[1],i[2]):i.length===2?new xe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new xe(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new xe(i,a,c)}var at={latLngToPoint:function(i,a){var c=this.projection.project(i),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(i,a){var c=this.scale(a),f=this.transformation.untransform(i,c);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(i),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ce(f,g)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?_(i.lng,this.wrapLng,!0):i.lng,c=this.wrapLat?_(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new xe(c,a,f)},wrapLatLngBounds:function(i){var a=i.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return i;var E=i.getSouthWest(),M=i.getNorthEast(),B=new xe(E.lat-f,E.lng-g),W=new xe(M.lat-f,M.lng-g);return new Ue(B,W)}},mn=s({},at,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var c=Math.PI/180,f=i.lat*c,g=a.lat*c,E=Math.sin((a.lat-i.lat)*c/2),M=Math.sin((a.lng-i.lng)*c/2),B=E*E+Math.cos(f)*Math.cos(g)*M*M,W=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*W}}),va=6378137,wa={R:va,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,i.lat),-c),g=Math.sin(f*a);return new $(this.R*i.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(i){var a=180/Math.PI;return new xe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:function(){var i=va*Math.PI;return new ce([-i,-i],[i,i])}()};function xa(i,a,c,f){if(O(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=c,this._d=f}xa.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new $((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function Zr(i,a,c,f){return new xa(i,a,c,f)}var Gi=s({},mn,{code:"EPSG:3857",projection:wa,transformation:function(){var i=.5/(Math.PI*wa.R);return Zr(i,.5,-i,.5)}()}),xu=s({},Gi,{code:"EPSG:900913"});function Eu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Fs(i,a){var c="",f,g,E,M,B,W;for(f=0,E=i.length;f<E;f++){for(B=i[f],g=0,M=B.length;g<M;g++)W=B[g],c+=(g?"L":"M")+W.x+" "+W.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var Zi=document.documentElement.style,Ki="ActiveXObject"in window,yt=Ki&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Kr=Zt("webkit"),Tu=Zt("android"),Ea=Zt("android 2")||Zt("android 3"),kd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qi=Tu&&Zt("Google")&&kd<537&&!("AudioNode"in window),zs=!!window.opera,Ta=!vt&&Zt("chrome"),js=Zt("gecko")&&!Kr&&!zs&&!Ki,Ad=!Ta&&Zt("safari"),Iu=Zt("phantom"),Ia="OTransition"in Zi,Su=navigator.platform.indexOf("Win")===0,Qr=Ki&&"transition"in Zi,Yi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ea,Bs="MozPerspective"in Zi,yr=!window.L_DISABLE_3D&&(Qr||Yi||Bs)&&!Ia&&!Iu,Yr=typeof orientation<"u"||Zt("mobile"),Us=Yr&&Kr,Cu=Yr&&Yi,Xr=!window.PointerEvent&&window.MSPointerEvent,Sa=!!(window.PointerEvent||Xr),wt="ontouchstart"in window||!!window.TouchEvent,Pu=!window.L_NO_TOUCH&&(wt||Sa),Xi=Yr&&zs,Ji=Yr&&js,Rd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,bd=function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return i}(),Jr=function(){return!!document.createElement("canvas").getContext}(),Ca=!!(document.createElementNS&&Eu("svg").createSVGRect),Ld=!!Ca&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ws=!Ca&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),ku=navigator.platform.indexOf("Mac")===0,Au=navigator.platform.indexOf("Linux")===0;function Zt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ae={ie:Ki,ielt9:yt,edge:vt,webkit:Kr,android:Tu,android23:Ea,androidStock:Qi,opera:zs,chrome:Ta,gecko:js,safari:Ad,phantom:Iu,opera12:Ia,win:Su,ie3d:Qr,webkit3d:Yi,gecko3d:Bs,any3d:yr,mobile:Yr,mobileWebkit:Us,mobileWebkit3d:Cu,msPointer:Xr,pointer:Sa,touch:Pu,touchNative:wt,mobileOpera:Xi,mobileGecko:Ji,retina:Rd,passiveEvents:bd,canvas:Jr,svg:Ca,vml:Ws,inlineSvg:Ld,mac:ku,linux:Au},Ru=ae.msPointer?"MSPointerDown":"pointerdown",bn=ae.msPointer?"MSPointerMove":"pointermove",Pa=ae.msPointer?"MSPointerUp":"pointerup",ka=ae.msPointer?"MSPointerCancel":"pointercancel",es={touchstart:Ru,touchmove:bn,touchend:Pa,touchcancel:ka},Hs={touchstart:Aa,touchmove:gn,touchend:gn,touchcancel:gn},vr={},bu=!1;function Lu(i,a,c){return a==="touchstart"&&ts(),Hs[a]?(c=Hs[a].bind(this,c),i.addEventListener(es[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function Nd(i,a,c){if(!es[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(es[a],c,!1)}function $s(i){vr[i.pointerId]=i}function Nu(i){vr[i.pointerId]&&(vr[i.pointerId]=i)}function qs(i){delete vr[i.pointerId]}function ts(){bu||(document.addEventListener(Ru,$s,!0),document.addEventListener(bn,Nu,!0),document.addEventListener(Pa,qs,!0),document.addEventListener(ka,qs,!0),bu=!0)}function gn(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in vr)a.touches.push(vr[c]);a.changedTouches=[a],i(a)}}function Aa(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&lt(a),gn(i,a)}function Od(i){var a={},c,f;for(f in i)c=i[f],a[f]=c&&c.bind?c.bind(i):c;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ou=200;function Mu(i,a){i.addEventListener("dblclick",a);var c=0,f;function g(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var M=Oa(E);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Ou?(f++,f===2&&a(Od(E))):f=1,c=B}}}return i.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Du(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var ns=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wr=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ra=wr==="webkitTransition"||wr==="OTransition"?wr+"End":"transitionend";function ba(i){return typeof i=="string"?document.getElementById(i):i}function ei(i,a){var c=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);c=f?f[a]:null}return c==="auto"?null:c}function Ae(i,a,c){var f=document.createElement(i);return f.className=a||"",c&&c.appendChild(f),f}function Oe(i){var a=i.parentNode;a&&a.removeChild(i)}function Bt(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function _n(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function yn(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function rs(i,a){if(i.classList!==void 0)return i.classList.contains(a);var c=Qn(i);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function se(i,a){if(i.classList!==void 0)for(var c=F(a),f=0,g=c.length;f<g;f++)i.classList.add(c[f]);else if(!rs(i,a)){var E=Qn(i);xr(i,(E?E+" ":"")+a)}}function We(i,a){i.classList!==void 0?i.classList.remove(a):xr(i,A((" "+Qn(i)+" ").replace(" "+a+" "," ")))}function xr(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function Qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Kt(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&Vu(i,a)}function Vu(i,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=i.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):i.style.filter+=" progid:"+f+"(opacity="+a+")"}function Gs(i){for(var a=document.documentElement.style,c=0;c<i.length;c++)if(i[c]in a)return i[c];return!1}function Er(i,a,c){var f=a||new $(0,0);i.style[ns]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function tt(i,a){i._leaflet_pos=a,ae.any3d?Er(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Tr(i){return i._leaflet_pos||new $(0,0)}var Ln,on,Zs;if("onselectstart"in document)Ln=function(){ge(window,"selectstart",lt)},on=function(){je(window,"selectstart",lt)};else{var ti=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ln=function(){if(ti){var i=document.documentElement.style;Zs=i[ti],i[ti]="none"}},on=function(){ti&&(document.documentElement.style[ti]=Zs,Zs=void 0)}}function Ks(){ge(window,"dragstart",lt)}function Qs(){je(window,"dragstart",lt)}var is,Yn;function La(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ys(),is=i,Yn=i.style.outlineStyle,i.style.outlineStyle="none",ge(window,"keydown",Ys))}function Ys(){is&&(is.style.outlineStyle=Yn,is=void 0,Yn=void 0,je(window,"keydown",Ys))}function Fu(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function vn(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var Md={__proto__:null,TRANSFORM:ns,TRANSITION:wr,TRANSITION_END:Ra,get:ba,getStyle:ei,create:Ae,remove:Oe,empty:Bt,toFront:_n,toBack:yn,hasClass:rs,addClass:se,removeClass:We,setClass:xr,getClass:Qn,setOpacity:Kt,testProp:Gs,setTransform:Er,setPosition:tt,getPosition:Tr,get disableTextSelection(){return Ln},get enableTextSelection(){return on},disableImageDrag:Ks,enableImageDrag:Qs,preventOutline:La,restoreOutline:Ys,getSizedParentNode:Fu,getScale:vn};function ge(i,a,c,f){if(a&&typeof a=="object")for(var g in a)Xs(i,g,a[g],c);else{a=F(a);for(var E=0,M=a.length;E<M;E++)Xs(i,a[E],c,f)}return this}var Ut="_leaflet_events";function je(i,a,c,f){if(arguments.length===1)ni(i),delete i[Ut];else if(a&&typeof a=="object")for(var g in a)ss(i,g,a[g],c);else if(a=F(a),arguments.length===2)ni(i,function(B){return H(a,B)!==-1});else for(var E=0,M=a.length;E<M;E++)ss(i,a[E],c,f);return this}function ni(i,a){for(var c in i[Ut]){var f=c.split(/\d/)[0];(!a||a(f))&&ss(i,f,null,null,c)}}var Ir={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(i,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(i[Ut]&&i[Ut][g])return this;var E=function(B){return c.call(f||i,B||window.event)},M=E;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?E=Lu(i,a,E):ae.touch&&a==="dblclick"?E=Mu(i,E):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(Ir[a]||a,E,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(B){B=B||window.event,Da(i,B)&&M(B)},i.addEventListener(Ir[a],E,!1)):i.addEventListener(a,M,!1):i.attachEvent("on"+a,E),i[Ut]=i[Ut]||{},i[Ut][g]=E}function ss(i,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var E=i[Ut]&&i[Ut][g];if(!E)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?Nd(i,a,E):ae.touch&&a==="dblclick"?Du(i,E):"removeEventListener"in i?i.removeEventListener(Ir[a]||a,E,!1):i.detachEvent("on"+a,E),i[Ut][g]=null}function Ve(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Na(i){return Xs(i,"wheel",Ve),this}function os(i){return ge(i,"mousedown touchstart dblclick contextmenu",Ve),i._leaflet_disable_click=!0,this}function lt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xn(i){return lt(i),Ve(i),this}function Oa(i){if(i.composedPath)return i.composedPath();for(var a=[],c=i.target;c;)a.push(c),c=c.parentNode;return a}function as(i,a){if(!a)return new $(i.clientX,i.clientY);var c=vn(a),f=c.boundingClientRect;return new $((i.clientX-f.left)/c.x-a.clientLeft,(i.clientY-f.top)/c.y-a.clientTop)}var Jn=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ma(i){return ae.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Jn:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Da(i,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==i;)c=c.parentNode}catch{return!1}return c!==i}var ls={__proto__:null,on:ge,off:je,stopPropagation:Ve,disableScrollPropagation:Na,disableClickPropagation:os,preventDefault:lt,stop:Xn,getPropagationPath:Oa,getMousePosition:as,getWheelDelta:Ma,isExternalTarget:Da,addListener:ge,removeListener:je},Va=De.extend({run:function(i,a,c,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Tr(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var c=this._startPos.add(this._offset.multiplyBy(i));a&&c._round(),tt(this._el,c),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ee=De.extend({options:{crs:Gi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=b(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(he(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wr&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,Ra,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(he(i),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,c.zoom):this._tryAnimatedPan(i,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),E=i instanceof $?i:this.latLngToContainerPoint(i),M=E.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(M));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():Se(i);var c=Y(a.paddingTopLeft||a.padding||[0,0]),f=Y(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(i,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:i.getCenter(),zoom:g};var E=f.subtract(c).divideBy(2),M=this.project(i.getSouthWest(),g),B=this.project(i.getNorthEast(),g),W=this.unproject(M.add(B).divideBy(2).add(E),g);return{center:W,zoom:g}},fitBounds:function(i,a){if(i=Se(i),!i.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(i,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=Y(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Va,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(i,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(i),E=this.getSize(),M=this._zoom;i=he(i),a=a===void 0?M:a;var B=Math.max(E.x,E.y),W=B*this.getZoomScale(M,a),K=g.distanceTo(f)||1,re=1.42,de=re*re;function Te(ut){var ec=ut?-1:1,B1=ut?W:B,U1=W*W-B*B+ec*de*de*K*K,W1=2*B1*de*K,jd=U1/W1,d_=Math.sqrt(jd*jd+1)-jd,H1=d_<1e-9?-18:Math.log(d_);return H1}function Wt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function xt(ut){return(Math.exp(ut)+Math.exp(-ut))/2}function En(ut){return Wt(ut)/xt(ut)}var Yt=Te(0);function ho(ut){return B*(xt(Yt)/xt(Yt+re*ut))}function V1(ut){return B*(xt(Yt)*En(Yt+re*ut)-Wt(Yt))/de}function F1(ut){return 1-Math.pow(1-ut,1.5)}var z1=Date.now(),c_=(Te(1)-Yt)/re,j1=c.duration?1e3*c.duration:1e3*c_*.8;function h_(){var ut=(Date.now()-z1)/j1,ec=F1(ut)*c_;ut<=1?(this._flyToFrame=V(h_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(V1(ec)/K)),M),this.getScaleZoom(B/ho(ec),M),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),h_.call(this),this},flyToBounds:function(i,a){var c=this._getBoundsCenterZoom(i,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(i){return i=Se(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Se(i));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var c=Y(a.paddingTopLeft||a.padding||[0,0]),f=Y(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(i),M=this.getPixelBounds(),B=me([M.min.add(c),M.max.subtract(f)]),W=B.getSize();if(!B.contains(E)){this._enforcingBounds=!0;var K=E.subtract(B.getCenter()),re=B.extend(E).getSize().subtract(W);g.x+=K.x<0?-re.x:re.x,g.y+=K.y<0?-re.y:re.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),E=f.subtract(g);return!E.x&&!E.y?this:(i.animate&&i.pan?this.panBy(E):(i.pan&&this._rawPanBy(E),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,i):navigator.geolocation.getCurrentPosition(a,c,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,c=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,c=i.coords.longitude,f=new xe(a,c),g=f.toBounds(i.coords.accuracy*2),E=this._locateOptions;if(E.setView){var M=this.getBoundsZoom(g);this.setView(f,E.maxZoom?Math.min(M,E.maxZoom):M)}var B={latlng:f,bounds:g,timestamp:i.timestamp};for(var W in i.coords)typeof i.coords[W]=="number"&&(B[W]=i.coords[W]);this.fire("locationfound",B)}},addHandler:function(i,a){if(!a)return this;var c=this[i]=new a(this);return this._handlers.push(c),this.options[i]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Oe(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var c="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Ae("div",c,a||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),c=this.unproject(i.getTopRight());return new Ue(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,c){i=Se(i),c=Y(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),M=i.getNorthWest(),B=i.getSouthEast(),W=this.getSize().subtract(c),K=me(this.project(B,f),this.project(M,f)).getSize(),re=ae.any3d?this.options.zoomSnap:1,de=W.x/K.x,Te=W.y/K.y,Wt=a?Math.max(de,Te):Math.min(de,Te);return f=this.getScaleZoom(Wt,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(g,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var c=this._getTopLeftPoint(i,a);return new ce(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(i)/c.scale(a)},getScaleZoom:function(i,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(i*c.scale(a));return isNaN(f)?1/0:f},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(he(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Y(i),a)},layerPointToLatLng:function(i){var a=Y(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(he(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(he(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Se(i))},distance:function(i,a){return this.options.crs.distance(he(i),he(a))},containerPointToLayerPoint:function(i){return Y(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Y(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(Y(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(i)))},mouseEventToContainerPoint:function(i){return as(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=ba(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(i,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ei(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(i.markerPane,"leaflet-zoom-hide"),se(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,c){tt(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(i,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){tt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[d(this._container)]=this;var a=i?je:ge;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",E=i.target||i.srcElement,M=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){M=!0;break}if(f&&f.listens(a,!0)&&(g&&!Da(E,i)||(c.push(f),g))||E===this._container)break;E=E.parentNode}return!c.length&&!M&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var c=i.type;c==="mousedown"&&La(a),this._fireDOMEvent(i,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,c){if(i.type==="click"){var f=s({},i);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(i,a);if(c){for(var E=[],M=0;M<c.length;M++)c[M].listens(a,!0)&&E.push(c[M]);g=E.concat(g)}if(g.length){a==="contextmenu"&&lt(i);var B=g[0],W={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);W.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(i),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=K?B.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<g.length;M++)if(g[M].fire(a,W,!0),W.originalEvent._stopped||g[M].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Tr(this._mapPane)||new $(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var c=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var c=this.getSize()._divideBy(2);return this.project(i,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(i,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return me([this.project(i.getSouthWest(),a)._subtract(f),this.project(i.getNorthWest(),a)._subtract(f),this.project(i.getSouthEast(),a)._subtract(f),this.project(i.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,c){if(!c)return i;var f=this.project(i,a),g=this.getSize().divideBy(2),E=new ce(f.subtract(g),f.add(g)),M=this._getBoundsOffset(E,c,a);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(f.add(M),a)},_limitOffset:function(i,a){if(!a)return i;var c=this.getPixelBounds(),f=new ce(c.min.add(i),c.max.add(i));return i.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(i,a,c){var f=me(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(i.min),E=f.max.subtract(i.max),M=this._rebound(g.x,-E.x),B=this._rebound(g.y,-E.y);return new $(M,B)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(a,Math.min(c,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var c=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var i=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var c=ns,f=this._proxy.style[c];Er(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();Er(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(i)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(i,a){return new Ee(i,a)}var Qt=J.extend({options:{position:"topright"},initialize:function(i){b(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),c=this.getPosition(),f=i._controlCorners[c];return se(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),er=function(i){return new Qt(i)};Ee.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ae("div",a+"control-container",this._container);function f(g,E){var M=a+g+" "+a+E;i[g+E]=Ae("div",M,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Oe(this._controlCorners[i]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(i,a,c){b(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Qt.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=Ae("div",i),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),os(a),Na(a);var f=this._section=Ae("section",i+"-list");c&&(this._map.on("click",this.collapse,this),ge(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ae("a",i+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ge(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){lt(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ae("div",i+"-base",f),this._separator=Ae("div",i+"-separator",f),this._overlaysList=Ae("div",i+"-overlays",f),a.appendChild(f)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,c){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bt(this._baseLayersList),Bt(this._overlaysList),this._layerControlInputs=[];var i,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,i=i||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&g>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(d(i.target)),c=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(i,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(i){var a=document.createElement("label"),c=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(i.layer),ge(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+i.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(g);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var E=i.length-1;E>=0;E--)a=i[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,c,f=this._map.getZoom(),g=i.length-1;g>=0;g--)a=i[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ge(i,"click",lt),this.expand();var a=this;setTimeout(function(){je(i,"click",lt),a._preventClick=!1})}}),ju=function(i,a,c){return new zu(i,a,c)},Sr=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",c=Ae("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,c,f,g){var E=Ae("a",c,f);return E.innerHTML=i,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),os(E),ge(E,"click",Xn),ge(E,"click",g,this),ge(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";We(this._zoomInButton,a),We(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(se(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(se(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sr,this.addControl(this.zoomControl))});var Bu=function(i){return new Sr(i)},Fa=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",c=Ae("div",a),f=this.options;return this._addScales(f,a+"-line",c),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),c},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,c){i.metric&&(this._mScale=Ae("div",a,c)),i.imperial&&(this._iScale=Ae("div",a,c))},_update:function(){var i=this._map,a=i.getSize().y/2,c=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/i)},_updateImperial:function(i){var a=i*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(i,a,c){i.style.width=Math.round(this.options.maxWidth*c)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),c=i/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),za=function(i){return new Fa(i)},ja='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eo=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?ja+" ":"")+"Leaflet</a>"},initialize:function(i){b(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),os(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),i.length&&c.push(i.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new eo().addTo(this)});var to=function(i){return new eo(i)};Qt.Layers=zu,Qt.Zoom=Sr,Qt.Scale=Fa,Qt.Attribution=eo,er.layers=ju,er.zoom=Bu,er.scale=za,er.attribution=to;var an=J.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(i,a){return i.addHandler(a,this),this};var Uu={Events:Le},tr=ae.touch?"touchstart mousedown":"mousedown",Nn=De.extend({options:{clickTolerance:3},initialize:function(i,a,c,f){b(this,f),this._element=i,this._dragStartTarget=a||i,this._preventOutline=c},enable:function(){this._enabled||(ge(this._dragStartTarget,tr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nn._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,tr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!rs(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Nn._dragging===this&&this.finishDrag();return}if(!(Nn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Nn._dragging=this,this._preventOutline&&La(this._element),Ks(),Ln(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,c=Fu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=Tr(this._element),this._parentScale=vn(c);var f=i.type==="mousedown";ge(document,f?"mousemove":"touchmove",this._onMove,this),ge(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,lt(i),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),tt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),Qs(),on();var a=this._moved&&this._moving;this._moving=!1,Nn._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ba(i,a,c){var f,g=[1,4,2,8],E,M,B,W,K,re,de,Te;for(E=0,re=i.length;E<re;E++)i[E]._code=U(i[E],a);for(B=0;B<4;B++){for(de=g[B],f=[],E=0,re=i.length,M=re-1;E<re;M=E++)W=i[E],K=i[M],W._code&de?K._code&de||(Te=j(K,W,de,a,c),Te._code=U(Te,a),f.push(Te)):(K._code&de&&(Te=j(K,W,de,a,c),Te._code=U(Te,a),f.push(Te)),f.push(W));i=f}return i}function Ua(i,a){var c,f,g,E,M,B,W,K,re;if(!i||i.length===0)throw new Error("latlngs not passed");Me(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var de=he([0,0]),Te=Se(i),Wt=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());Wt<1700&&(de=no(i));var xt=i.length,En=[];for(c=0;c<xt;c++){var Yt=he(i[c]);En.push(a.project(he([Yt.lat-de.lat,Yt.lng-de.lng])))}for(B=W=K=0,c=0,f=xt-1;c<xt;f=c++)g=En[c],E=En[f],M=g.y*E.x-E.y*g.x,W+=(g.x+E.x)*M,K+=(g.y+E.y)*M,B+=M*3;B===0?re=En[0]:re=[W/B,K/B];var ho=a.unproject(Y(re));return he([ho.lat+de.lat,ho.lng+de.lng])}function no(i){for(var a=0,c=0,f=0,g=0;g<i.length;g++){var E=he(i[g]);a+=E.lat,c+=E.lng,f++}return he([a/f,c/f])}var ro={__proto__:null,clipPolygon:Ba,polygonCenter:Ua,centroid:no};function Lt(i,a){if(!a||!i.length)return i.slice();var c=a*a;return i=m(i,c),i=ri(i,c),i}function Wa(i,a,c){return Math.sqrt(_e(i,a,c,!0))}function Wu(i,a,c){return _e(i,a,c)}function ri(i,a){var c=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(i,g,a,0,c-1);var E,M=[];for(E=0;E<c;E++)g[E]&&M.push(i[E]);return M}function u(i,a,c,f,g){var E=0,M,B,W;for(B=f+1;B<=g-1;B++)W=_e(i[B],i[f],i[g],!0),W>E&&(M=B,E=W);E>c&&(a[M]=1,u(i,a,c,f,M),u(i,a,c,M,g))}function m(i,a){for(var c=[i[0]],f=1,g=0,E=i.length;f<E;f++)te(i[f],i[g])>a&&(c.push(i[f]),g=f);return g<E-1&&c.push(i[E-1]),c}var y;function I(i,a,c,f,g){var E=f?y:U(i,c),M=U(a,c),B,W,K;for(y=M;;){if(!(E|M))return[i,a];if(E&M)return!1;B=E||M,W=j(i,a,B,c,g),K=U(W,c),B===E?(i=W,E=K):(a=W,M=K)}}function j(i,a,c,f,g){var E=a.x-i.x,M=a.y-i.y,B=f.min,W=f.max,K,re;return c&8?(K=i.x+E*(W.y-i.y)/M,re=W.y):c&4?(K=i.x+E*(B.y-i.y)/M,re=B.y):c&2?(K=W.x,re=i.y+M*(W.x-i.x)/E):c&1&&(K=B.x,re=i.y+M*(B.x-i.x)/E),new $(K,re,g)}function U(i,a){var c=0;return i.x<a.min.x?c|=1:i.x>a.max.x&&(c|=2),i.y<a.min.y?c|=4:i.y>a.max.y&&(c|=8),c}function te(i,a){var c=a.x-i.x,f=a.y-i.y;return c*c+f*f}function _e(i,a,c,f){var g=a.x,E=a.y,M=c.x-g,B=c.y-E,W=M*M+B*B,K;return W>0&&(K=((i.x-g)*M+(i.y-E)*B)/W,K>1?(g=c.x,E=c.y):K>0&&(g+=M*K,E+=B*K)),M=i.x-g,B=i.y-E,f?M*M+B*B:new $(g,E)}function Me(i){return!O(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Fe(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Me(i)}function rt(i,a){var c,f,g,E,M,B,W,K;if(!i||i.length===0)throw new Error("latlngs not passed");Me(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var re=he([0,0]),de=Se(i),Te=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Te<1700&&(re=no(i));var Wt=i.length,xt=[];for(c=0;c<Wt;c++){var En=he(i[c]);xt.push(a.project(he([En.lat-re.lat,En.lng-re.lng])))}for(c=0,f=0;c<Wt-1;c++)f+=xt[c].distanceTo(xt[c+1])/2;if(f===0)K=xt[0];else for(c=0,E=0;c<Wt-1;c++)if(M=xt[c],B=xt[c+1],g=M.distanceTo(B),E+=g,E>f){W=(E-f)/g,K=[B.x-W*(B.x-M.x),B.y-W*(B.y-M.y)];break}var Yt=a.unproject(Y(K));return he([Yt.lat+re.lat,Yt.lng+re.lng])}var wn={__proto__:null,simplify:Lt,pointToSegmentDistance:Wa,closestPointOnSegment:Wu,clipSegment:I,_getEdgeIntersection:j,_getBitCode:U,_sqClosestPointOnSegment:_e,isFlat:Me,_flat:Fe,polylineCenter:rt},On={project:function(i){return new $(i.lng,i.lat)},unproject:function(i){return new xe(i.y,i.x)},bounds:new ce([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,c=this.R,f=i.lat*a,g=this.R_MINOR/c,E=Math.sqrt(1-g*g),M=E*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-M)/(1+M),E/2);return f=-c*Math.log(Math.max(B,1e-10)),new $(i.lng*a*c,f)},unproject:function(i){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),E=Math.exp(-i.y/c),M=Math.PI/2-2*Math.atan(E),B=0,W=.1,K;B<15&&Math.abs(W)>1e-7;B++)K=g*Math.sin(M),K=Math.pow((1-K)/(1+K),g/2),W=Math.PI/2-2*Math.atan(E*K)-M,M+=W;return new xe(M*a,i.x*a/c)}},nr={__proto__:null,LonLat:On,Mercator:xn,SphericalMercator:wa},io=s({},mn,{code:"EPSG:3395",projection:xn,transformation:function(){var i=.5/(Math.PI*xn.R);return Zr(i,.5,-i,.5)}()}),so=s({},mn,{code:"EPSG:4326",projection:On,transformation:Zr(1/180,1,-1/180,.5)}),m1=s({},at,{projection:On,transformation:Zr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var c=a.lng-i.lng,f=a.lat-i.lat;return Math.sqrt(c*c+f*f)},infinite:!0});at.Earth=mn,at.EPSG3395=io,at.EPSG3857=Gi,at.EPSG900913=xu,at.EPSG4326=so,at.Simple=m1;var Mn=De.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[d(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[d(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=d(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return d(i)in this._layers},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},_addLayers:function(i){i=i?O(i)?i:[i]:[];for(var a=0,c=i.length;a<c;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[d(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=d(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;i=g.minZoom===void 0?i:Math.min(i,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oo=Mn.extend({initialize:function(i,a){b(this,a),this._layers={};var c,f;if(i)for(c=0,f=i.length;c<f;c++)this.addLayer(i[c])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[i]&&f[i].apply(f,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return d(i)}}),g1=function(i,a){return new oo(i,a)},Cr=oo.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),oo.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),oo.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ue;for(var a in this._layers){var c=this._layers[a];i.extend(c.getBounds?c.getBounds():c.getLatLng())}return i}}),_1=function(i,a){return new Cr(i,a)},ao=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){b(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var c=this._getIconUrl(i);if(!c){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=Y(f),E=Y(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(c.className||""),E&&(i.style.marginLeft=-E.x+"px",i.style.marginTop=-E.y+"px"),g&&(i.style.width=g.x+"px",i.style.height=g.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return ae.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function y1(i){return new ao(i)}var Ha=ao.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ha.imagePath!="string"&&(Ha.imagePath=this._detectIconPath()),(this.options.imagePath||Ha.imagePath)+ao.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(c,f,g){var E=f.exec(c);return E&&E[g]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ae("div","leaflet-default-icon-path",document.body),a=ei(i,"background-image")||ei(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),$g=an.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Nn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=Tr(a._icon),M=c.getPixelBounds(),B=c.getPixelOrigin(),W=me(M.min._subtract(B).add(g),M.max._subtract(B).subtract(g));if(!W.contains(E)){var K=Y((Math.max(W.max.x,E.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,E.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,E.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,E.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),tt(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=V(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,c=a._shadow,f=Tr(a._icon),g=a._map.layerPointToLatLng(f);c&&tt(c,f),a._latlng=g,i.latlng=g,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Hu=Mn.extend({options:{icon:new Ha,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){b(this,a),this._latlng=he(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=he(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=i.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(c.title=i.title),c.tagName==="IMG"&&(c.alt=i.alt||"")),se(c,a),i.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(c,"focus",this._panOnFocus,this);var g=i.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(se(g,a),g.alt=""),this._shadow=g,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&tt(this._icon,i),this._shadow&&tt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$g)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $g(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Kt(this._icon,i),this._shadow&&Kt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,c=a.iconSize?Y(a.iconSize):Y(0,0),f=a.iconAnchor?Y(a.iconAnchor):Y(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function v1(i,a){return new Hu(i,a)}var ii=Mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return b(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$u=ii.extend({options:{fill:!0,radius:10},initialize:function(i,a){b(this,a),this._latlng=he(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=he(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return ii.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,c=this._clickTolerance(),f=[i+c,a+c];this._pxBounds=new ce(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function w1(i,a){return new $u(i,a)}var Dd=$u.extend({initialize:function(i,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),b(this,a),this._latlng=he(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ue(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ii.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===mn.distance){var g=Math.PI/180,E=this._mRadius/mn.R/g,M=c.project([a+E,i]),B=c.project([a-E,i]),W=M.add(B).divideBy(2),K=c.unproject(W).lat,re=Math.acos((Math.cos(E*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(re)||re===0)&&(re=E/Math.cos(Math.PI/180*a)),this._point=W.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:W.x-c.project([K,i-re]).x,this._radiusY=W.y-M.y}else{var de=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(de).x}this._updateBounds()}});function x1(i,a,c){return new Dd(i,a,c)}var Pr=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){b(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,c=null,f=_e,g,E,M=0,B=this._parts.length;M<B;M++)for(var W=this._parts[M],K=1,re=W.length;K<re;K++){g=W[K-1],E=W[K];var de=f(i,g,E,!0);de<a&&(a=de,c=f(i,g,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=he(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ue,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Me(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],c=Me(i),f=0,g=i.length;f<g;f++)c?(a[f]=he(i[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(i[f]);return a},_project:function(){var i=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new $(i,i);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,c){var f=i[0]instanceof xe,g=i.length,E,M;if(f){for(M=[],E=0;E<g;E++)M[E]=this._map.latLngToLayerPoint(i[E]),c.extend(M[E]);a.push(M)}else for(E=0;E<g;E++)this._projectLatlngs(i[E],a,c)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,E,M,B,W;for(c=0,g=0,E=this._rings.length;c<E;c++)for(W=this._rings[c],f=0,M=W.length;f<M-1;f++)B=I(W[f],W[f+1],i,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==W[f+1]||f===M-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,c=0,f=i.length;c<f;c++)i[c]=Lt(i[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var c,f,g,E,M,B,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(c=0,E=this._parts.length;c<E;c++)for(B=this._parts[c],f=0,M=B.length,g=M-1;f<M;g=f++)if(!(!a&&f===0)&&Wa(i,B[g],B[f])<=W)return!0;return!1}});function E1(i,a){return new Pr(i,a)}Pr._flat=Fe;var lo=Pr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ua(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=Pr.prototype._convertLatLngs.call(this,i),c=a.length;return c>=2&&a[0]instanceof xe&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(i){Pr.prototype._setLatLngs.call(this,i),Me(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Me(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(i=new ce(i.min.subtract(c),i.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,E;f<g;f++)E=Ba(this._rings[f],i,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,c,f,g,E,M,B,W,K;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(E=0,W=this._parts.length;E<W;E++)for(c=this._parts[E],M=0,K=c.length,B=K-1;M<K;B=M++)f=c[M],g=c[B],f.y>i.y!=g.y>i.y&&i.x<(g.x-f.x)*(i.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Pr.prototype._containsPoint.call(this,i,!0)}});function T1(i,a){return new lo(i,a)}var kr=Cr.extend({initialize:function(i,a){b(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=O(i)?i:i.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(i))return this;var M=qu(i,E);return M?(M.feature=Ku(i),M.defaultOptions=M.options,this.resetStyle(M),E.onEachFeature&&E.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function qu(i,a){var c=i.type==="Feature"?i.geometry:i,f=c?c.coordinates:null,g=[],E=a&&a.pointToLayer,M=a&&a.coordsToLatLng||Vd,B,W,K,re;if(!f&&!c)return null;switch(c.type){case"Point":return B=M(f),qg(E,i,B,a);case"MultiPoint":for(K=0,re=f.length;K<re;K++)B=M(f[K]),g.push(qg(E,i,B,a));return new Cr(g);case"LineString":case"MultiLineString":return W=Gu(f,c.type==="LineString"?0:1,M),new Pr(W,a);case"Polygon":case"MultiPolygon":return W=Gu(f,c.type==="Polygon"?1:2,M),new lo(W,a);case"GeometryCollection":for(K=0,re=c.geometries.length;K<re;K++){var de=qu({geometry:c.geometries[K],type:"Feature",properties:i.properties},a);de&&g.push(de)}return new Cr(g);case"FeatureCollection":for(K=0,re=c.features.length;K<re;K++){var Te=qu(c.features[K],a);Te&&g.push(Te)}return new Cr(g);default:throw new Error("Invalid GeoJSON object.")}}function qg(i,a,c,f){return i?i(a,c):new Hu(c,f&&f.markersInheritOptions&&f)}function Vd(i){return new xe(i[1],i[0],i[2])}function Gu(i,a,c){for(var f=[],g=0,E=i.length,M;g<E;g++)M=a?Gu(i[g],a-1,c):(c||Vd)(i[g]),f.push(M);return f}function Fd(i,a){return i=he(i),i.alt!==void 0?[x(i.lng,a),x(i.lat,a),x(i.alt,a)]:[x(i.lng,a),x(i.lat,a)]}function Zu(i,a,c,f){for(var g=[],E=0,M=i.length;E<M;E++)g.push(a?Zu(i[E],Me(i[E])?0:a-1,c,f):Fd(i[E],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function uo(i,a){return i.feature?s({},i.feature,{geometry:a}):Ku(a)}function Ku(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var zd={toGeoJSON:function(i){return uo(this,{type:"Point",coordinates:Fd(this.getLatLng(),i)})}};Hu.include(zd),Dd.include(zd),$u.include(zd),Pr.include({toGeoJSON:function(i){var a=!Me(this._latlngs),c=Zu(this._latlngs,a?1:0,!1,i);return uo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),lo.include({toGeoJSON:function(i){var a=!Me(this._latlngs),c=a&&!Me(this._latlngs[0]),f=Zu(this._latlngs,c?2:a?1:0,!0,i);return a||(f=[f]),uo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),oo.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(i).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(i);if(c)f.push(E.geometry);else{var M=Ku(E);M.type==="FeatureCollection"?f.push.apply(f,M.features):f.push(M)}}}),c?uo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Gg(i,a){return new kr(i,a)}var I1=Gg,Qu=Mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,c){this._url=i,this._bounds=Se(a),b(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&_n(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Se(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:Ae("img");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Er(this._image,c,a)},_reset:function(){var i=this._image,a=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();tt(i,a.min),i.style.width=c.x+"px",i.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),S1=function(i,a,c){return new Qu(i,a,c)},Zg=Qu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:Ae("video");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),i){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var M=Ae("source");M.src=this._url[E],a.appendChild(M)}}});function C1(i,a,c){return new Zg(i,a,c)}var Kg=Qu.extend({_initImage:function(){var i=this._image=this._url;se(i,"leaflet-image-layer"),this._zoomAnimated&&se(i,"leaflet-zoom-animated"),this.options.className&&se(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function P1(i,a,c){return new Kg(i,a,c)}var rr=Mn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof xe||O(i))?(this._latlng=he(i),b(this,a)):(b(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=he(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_n(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof Cr){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=Y(this.options.offset),c=this._getAnchor();this._zoomAnimated?tt(this._container,i.add(c)):a=a.add(i).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(i,a,c,f){var g=a;return g instanceof i||(g=new i(f).setContent(a)),c&&g.setLatLng(c),g}}),Mn.include({_initOverlay:function(i,a,c,f){var g=c;return g instanceof i?(b(g,f),g._source=this):(g=a&&!f?a:new i(f,this),g.setContent(c)),g}});var Yu=rr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,rr.prototype.openOn.call(this,i)},onAdd:function(i){rr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Ve))},onRemove:function(i){rr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Ve))},getEvents:function(){var i=rr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=Ae("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ae("div",i+"-content-wrapper",a);if(this._contentNode=Ae("div",i+"-content",c),os(a),Na(this._contentNode),ge(a,"contextmenu",Ve),this._tipContainer=Ae("div",i+"-tip-container",a),this._tip=Ae("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ae("a",i+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ge(f,"click",function(g){lt(g),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var c=i.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=i.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",se(i,E)):We(i,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),c=this._getAnchor();tt(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(ei(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(Tr(this._container));var E=i.layerPointToContainerPoint(g),M=Y(this.options.autoPanPadding),B=Y(this.options.autoPanPaddingTopLeft||M),W=Y(this.options.autoPanPaddingBottomRight||M),K=i.getSize(),re=0,de=0;E.x+f+W.x>K.x&&(re=E.x+f-K.x+W.x),E.x-re-B.x<0&&(re=E.x-B.x),E.y+c+W.y>K.y&&(de=E.y+c-K.y+W.y),E.y-de-B.y<0&&(de=E.y-B.y),(re||de)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([re,de]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),k1=function(i,a){return new Yu(i,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(i,a,c){return this._initOverlay(Yu,i,a,c).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Mn.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Yu,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Cr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xn(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Xu=rr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){rr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){rr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=rr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,c,f=this._map,g=this._container,E=f.latLngToContainerPoint(f.getCenter()),M=f.layerPointToContainerPoint(i),B=this.options.direction,W=g.offsetWidth,K=g.offsetHeight,re=Y(this.options.offset),de=this._getAnchor();B==="top"?(a=W/2,c=K):B==="bottom"?(a=W/2,c=0):B==="center"?(a=W/2,c=K/2):B==="right"?(a=0,c=K/2):B==="left"?(a=W,c=K/2):M.x<E.x?(B="right",a=0,c=K/2):(B="left",a=W+(re.x+de.x)*2,c=K/2),i=i.subtract(Y(a,c,!0)).add(re).add(de),We(g,"leaflet-tooltip-right"),We(g,"leaflet-tooltip-left"),We(g,"leaflet-tooltip-top"),We(g,"leaflet-tooltip-bottom"),se(g,"leaflet-tooltip-"+B),tt(g,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Kt(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),A1=function(i,a){return new Xu(i,a)};Ee.include({openTooltip:function(i,a,c){return this._initOverlay(Xu,i,a,c).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Mn.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xu,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Cr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(ge(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ge(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,c,f;this._tooltip.options.sticky&&i.originalEvent&&(c=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Qg=ao.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Bt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=Y(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function R1(i){return new Qg(i)}ao.Default=Ha;var $a=Mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){b(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Oe(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof $?i:new $(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,c=-i(-1/0,1/0),f=0,g=a.length,E;f<g;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=i(c,+E));isFinite(c)&&(this.options.zIndex=c+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Kt(this._container,this.options.opacity);var i=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var E=Math.min(1,(i-g.loaded)/200);Kt(g.el,E),E<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(k(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===i?(this._levels[c].el.style.zIndex=a-Math.abs(i-c),this._onUpdateLevel(c)):(Oe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[i],g=this._map;return f||(f=this._levels[i]={},f.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,g.getCenter(),g.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Oe(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,c,f){var g=Math.floor(i/2),E=Math.floor(a/2),M=c-1,B=new $(+g,+E);B.z=+M;var W=this._tileCoordsToKey(B),K=this._tiles[W];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),M>f?this._retainParent(g,E,M,f):!1)},_retainChildren:function(i,a,c,f){for(var g=2*i;g<2*i+2;g++)for(var E=2*a;E<2*a+2;E++){var M=new $(g,E);M.z=c+1;var B=this._tileCoordsToKey(M),W=this._tiles[B];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);c+1<f&&this._retainChildren(g,E,c+1,f)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(i),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],i,a)},_setZoomTransform:function(i,a,c){var f=this._map.getZoomScale(c,i.zoom),g=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Er(i.el,g,f):tt(i.el,g)},_resetGrid:function(){var i=this._map,a=i.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(i.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(i.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(i,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new ce(g.subtract(E),g.add(E))},_update:function(i){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),g=this._pxBoundsToTileRange(f),E=g.getCenter(),M=[],B=this.options.keepBuffer,W=new ce(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var re=this._tiles[K].coords;(re.z!==this._tileZoom||!W.contains(new $(re.x,re.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(i,c);return}for(var de=g.min.y;de<=g.max.y;de++)for(var Te=g.min.x;Te<=g.max.x;Te++){var Wt=new $(Te,de);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var xt=this._tiles[this._tileCoordsToKey(Wt)];xt?xt.current=!0:M.push(Wt)}}if(M.sort(function(Yt,ho){return Yt.distanceTo(E)-ho.distanceTo(E)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var En=document.createDocumentFragment();for(Te=0;Te<M.length;Te++)this._addTile(M[Te],En);this._level.el.appendChild(En)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(i.x<c.min.x||i.x>c.max.x)||!a.wrapLat&&(i.y<c.min.y||i.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return Se(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,c=this.getTileSize(),f=i.scaleBy(c),g=f.add(c),E=a.unproject(f,i.z),M=a.unproject(g,i.z);return[E,M]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),c=new Ue(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(i){var a=this._tiles[i];a&&(Oe(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){se(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=w,i.onmousemove=w,ae.ielt9&&this.options.opacity<1&&Kt(i,this.options.opacity)},_addTile:function(i,a){var c=this._getTilePos(i),f=this._tileCoordsToKey(i),g=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(g),this.createTile.length<2&&V(l(this._tileReady,this,i,null,g)),tt(g,c),this._tiles[f]={el:g,coords:i,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:i})},_tileReady:function(i,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:i});var f=this._tileCoordsToKey(i);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),k(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(se(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new $(this._wrapX?_(i.x,this._wrapX):i.x,this._wrapY?_(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new ce(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function b1(i){return new $a(i)}var co=$a.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=b(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var c=document.createElement("img");return ge(c,"load",l(this._tileOnLoad,this,a,c)),ge(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(i),c},getTileUrl:function(i){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=c),a["-y"]=c}return T(this._url,s(a,this.options))},_tileOnLoad:function(i,a){ae.ielt9?setTimeout(l(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),i(c,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(i=a-i),i+f},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Q;var c=this._tiles[i].coords;Oe(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",Q),$a.prototype._removeTile.call(this,i)},_tileReady:function(i,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return $a.prototype._tileReady.call(this,i,a,c)}});function Yg(i,a){return new co(i,a)}var Xg=co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=b(this,a);var g=a.detectRetina&&ae.retina?2:1,E=this.getTileSize();c.width=E.x*g,c.height=E.y*g,this.wmsParams=c},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,co.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),c=this._crs,f=me(c.project(a[0]),c.project(a[1])),g=f.min,E=f.max,M=(this._wmsVersion>=1.3&&this._crs===so?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),B=co.prototype.getTileUrl.call(this,i);return B+z(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,a){return s(this.wmsParams,i),a||this.redraw(),this}});function L1(i,a){return new Xg(i,a)}co.WMS=Xg,Yg.wms=L1;var Ar=Mn.extend({options:{padding:.1},initialize:function(i){b(this,i),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),E=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(i,a));ae.any3d?Er(this._container,E,c):tt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new ce(c,c.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jg=Ar.extend({options:{tolerance:0},getEvents:function(){var i=Ar.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ge(i,"mousemove",this._onMouseMove,this),ge(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,Oe(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var i=this._bounds,a=this._container,c=i.getSize(),f=ae.retina?2:1;tt(a,i.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[d(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete i._order,delete this._layers[d(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}i.options._dashArray=c}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var c,f,g,E,M=i._parts,B=M.length,W=this._ctx;if(B){for(W.beginPath(),c=0;c<B;c++){for(f=0,g=M[c].length;f<g;f++)E=M[c][f],W[f?"lineTo":"moveTo"](E.x,E.y);a&&W.closePath()}this._fillStroke(W,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,c=this._ctx,f=Math.max(Math.round(i._radius),1),g=(Math.max(Math.round(i._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,i)}},_fillStroke:function(i,a){var c=a.options;c.fill&&(i.globalAlpha=c.fillOpacity,i.fillStyle=c.fillColor||c.color,i.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=c.opacity,i.lineWidth=c.weight,i.strokeStyle=c.color,i.lineCap=c.lineCap,i.lineJoin=c.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(We(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(se(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,c){this._map._fireDOMEvent(a,c||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function e_(i){return ae.canvas?new Jg(i):null}var qa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),N1={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ar.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=qa("shape");se(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=qa("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;Oe(a),i.removeInteractiveTarget(a),delete this._layers[d(i)]},_updateStyle:function(i){var a=i._stroke,c=i._fill,f=i.options,g=i._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=i._stroke=qa("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),i._stroke=null),f.fill?(c||(c=i._fill=qa("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),c=Math.round(i._radius),f=Math.round(i._radiusY||c);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){_n(i._container)},_bringToBack:function(i){yn(i._container)}},Ju=ae.vml?qa:Eu,Ga=Ar.extend({_initContainer:function(){this._container=Ju("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ju("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var i=this._bounds,a=i.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),tt(c,i.min),c.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Ju("path");i.options.className&&se(a,i.options.className),i.options.interactive&&se(a,"leaflet-interactive"),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Oe(i._path),i.removeInteractiveTarget(i._path),delete this._layers[d(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,c=i.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,Fs(i._parts,a))},_updateCircle:function(i){var a=i._point,c=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",E=i._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(i,E)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){_n(i._path)},_bringToBack:function(i){yn(i._path)}});ae.vml&&Ga.include(N1);function t_(i){return ae.svg||ae.vml?new Ga(i):null}Ee.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&e_(i)||t_(i)}});var n_=lo.extend({initialize:function(i,a){lo.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Se(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function O1(i,a){return new n_(i,a)}Ga.create=Ju,Ga.pointsToPath=Fs,kr.geometryToLayer=qu,kr.coordsToLatLng=Vd,kr.coordsToLatLngs=Gu,kr.latLngToCoords=Fd,kr.latLngsToCoords=Zu,kr.getFeature=uo,kr.asFeature=Ku,Ee.mergeOptions({boxZoom:!0});var r_=an.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ln(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(i),ge(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new ce(this._point,this._startPoint),c=a.getSize();tt(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Oe(this._box),We(this._container,"leaflet-crosshair")),on(),Qs(),je(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",r_),Ee.mergeOptions({doubleClickZoom:!0});var i_=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=i.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(i.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",i_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var s_=an.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Nn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Se(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%i+a-c,E=(f+a+c)%i-a-c,M=Math.abs(g+c)<Math.abs(E+c)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var a=this._map,c=a.options,f=!c.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,M=c.easeLinearity,B=g.multiplyBy(M/E),W=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,W),re=B.multiplyBy(K/W),de=K/(c.inertiaDeceleration*M),Te=re.multiplyBy(-de/2).round();!Te.x&&!Te.y?a.fire("moveend"):(Te=a._limitOffset(Te,a.options.maxBounds),V(function(){a.panBy(Te,{duration:de,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",s_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var o_=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ge(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,c=i.scrollTop||a.scrollTop,f=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*i,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[i,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,i];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=i;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-i},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],i.shiftKey&&(f=Y(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(Y(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Xn(i)}}});Ee.addInitHook("addHandler","keyboard",o_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var a_=an.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=Ma(i),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Xn(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),c=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(g/c)*c:g,M=i._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+M):i.setZoomAround(this._lastMousePos,a+M))}});Ee.addInitHook("addHandler","scrollWheelZoom",a_);var M1=600;Ee.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var l_=an.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",lt),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),M1),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){je(document,"touchend",lt),je(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var c=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",l_),Ee.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var u_=an.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),lt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var M=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(M,this,!0),lt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,k(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",u_),Ee.BoxZoom=r_,Ee.DoubleClickZoom=i_,Ee.Drag=s_,Ee.Keyboard=o_,Ee.ScrollWheelZoom=a_,Ee.TapHold=l_,Ee.TouchZoom=u_,n.Bounds=ce,n.Browser=ae,n.CRS=at,n.Canvas=Jg,n.Circle=Dd,n.CircleMarker=$u,n.Class=J,n.Control=Qt,n.DivIcon=Qg,n.DivOverlay=rr,n.DomEvent=ls,n.DomUtil=Md,n.Draggable=Nn,n.Evented=De,n.FeatureGroup=Cr,n.GeoJSON=kr,n.GridLayer=$a,n.Handler=an,n.Icon=ao,n.ImageOverlay=Qu,n.LatLng=xe,n.LatLngBounds=Ue,n.Layer=Mn,n.LayerGroup=oo,n.LineUtil=wn,n.Map=Ee,n.Marker=Hu,n.Mixin=Uu,n.Path=ii,n.Point=$,n.PolyUtil=ro,n.Polygon=lo,n.Polyline=Pr,n.Popup=Yu,n.PosAnimation=Va,n.Projection=nr,n.Rectangle=n_,n.Renderer=Ar,n.SVG=Ga,n.SVGOverlay=Kg,n.TileLayer=co,n.Tooltip=Xu,n.Transformation=xa,n.Util=C,n.VideoOverlay=Zg,n.bind=l,n.bounds=me,n.canvas=e_,n.circle=x1,n.circleMarker=w1,n.control=er,n.divIcon=R1,n.extend=s,n.featureGroup=_1,n.geoJSON=Gg,n.geoJson=I1,n.gridLayer=b1,n.icon=y1,n.imageOverlay=S1,n.latLng=he,n.latLngBounds=Se,n.layerGroup=g1,n.map=Js,n.marker=v1,n.point=Y,n.polygon=T1,n.polyline=E1,n.popup=k1,n.rectangle=O1,n.setOptions=b,n.stamp=d,n.svg=t_,n.svgOverlay=P1,n.tileLayer=Yg,n.tooltip=A1,n.transformation=Zr,n.version=r,n.videoOverlay=C1;var D1=window.L;n.noConflict=function(){return window.L=D1,this},window.L=n})})(Qp,Qp.exports);var ya=Qp.exports;const Zc=l0(ya);function Cd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Pd(t,e){return e==null?function(r,s){const o=q.useRef();return o.current||(o.current=t(r,s)),o}:function(r,s){const o=q.useRef();o.current||(o.current=t(r,s));const l=q.useRef(r),{instance:h}=o.current;return q.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,s]),o}}function h1(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function d1(t){return function(n){const r=Wg(),s=t(Sd(n,r),r);return o1(r.map,n.attribution),Hg(s.current,n.eventHandlers),h1(s.current,r),s}}function MN(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function DN(t){return function(n){const r=Wg(),s=t(Sd(n,r),r);return Hg(s.current,n.eventHandlers),h1(s.current,r),MN(s.current,n),s}}function VN(t,e){const n=Pd(t,e),r=d1(n);return c1(r)}function FN(t,e){const n=Pd(t),r=ON(n,e);return LN(r)}function zN(t,e){const n=Pd(t,e),r=DN(n);return c1(r)}function jN(t,e){const n=Pd(t,e),r=d1(n);return NN(r)}function BN(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Yp(){return Yp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yp.apply(this,arguments)}function UN({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},w){const[x]=q.useState({className:s,id:o,style:h}),[A,F]=q.useState(null);q.useImperativeHandle(w,()=>(A==null?void 0:A.map)??null,[A]);const b=q.useCallback(S=>{if(S!==null&&A===null){const T=new ya.Map(S,_);n!=null&&p!=null?T.setView(n,p):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),F(bN(T))}},[]);q.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const z=A?Pl.createElement(u1,{value:A},r):l??null;return Pl.createElement("div",Yp({},x,{ref:b}),z)}const WN=q.forwardRef(UN),f1=VN(function({position:e,...n},r){const s=new ya.Marker(e,n);return Cd(s,a1(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),HN=zN(function({positions:e,...n},r){const s=new ya.Polygon(e,n);return Cd(s,a1(r,{overlayContainer:s}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),p1=FN(function(e,n){const r=new ya.Popup(e,n.overlayContainer);return Cd(r,n)},function(e,n,{position:r},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,r])}),$N=jN(function({url:e,...n},r){const s=new ya.TileLayer(e,Sd(n,r));return Cd(s,r)},function(e,n,r){BN(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),qN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"},{name:"2000km Range",range:2e3,color:"#3B82F6"}],GN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],ZN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],KN=(t,e=3)=>{const n=[];for(let r=0;r<t.length-1;r++){const s=t[r],o=t[r+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},QN=(t,e)=>{const n=KN(t,5),r=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],_=p[0]-o,w=p[1]-l,x=Math.sqrt(_*_+w*w);if(x===0)continue;const A=_/x,F=w/x,b=Math.atan2(w,_)*(180/Math.PI);let z=0;if(b>=45&&b<=90){const T=1-Math.abs((b-67.5)/22.5);z+=100*T}if(b>=45&&b<=135){const T=1-Math.abs((b-90)/45);z+=300*T}if(Math.abs(b)>=135){const T=Math.abs(b),O=1-Math.abs((T-180)/45);z+=300*O}if(b>=90&&b<=180){const T=1-Math.abs((b-135)/45);z+=300*T}const S=Math.max(0,e-z);h.push([p[0]+A*S*r,p[1]+F*S*s])}return h},o0=t=>{switch(t==null?void 0:t.toLowerCase().trim()){case"refinery":return"#1cc5b7ff";case"extraction":return"#8B5CF6";case"storage":return"#F59E0B";default:return"#FFC300"}},a0=(t,e=0)=>{let n="white",r=2;return e>=80?(n="#000000",r=3):e>=40?(n="#DC2626",r=3):e>0&&(n="#F59E0B",r=3),Zc.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: ${r}px solid ${n}; box-sizing: border-box;"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},YN=t=>t.name==="Moscow"&&t.color?Zc.divIcon({className:"capital-marker",html:`<div style="
                width: 24px; 
                height: 24px; 
                display: flex;
                align-items: center;
                justify-content: center;
                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
            ">
                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                          fill="${t.color}" 
                          stroke="white" 
                          stroke-width="2"/>
                </svg>
            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):t.name==="Kyiv"&&t.colors?Zc.divIcon({className:"capital-marker",html:`<div style="
                width: 24px; 
                height: 24px; 
                display: flex;
                align-items: center;
                justify-content: center;
                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
            ">
                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                    <defs>
                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="70%" style="stop-color:${t.colors.top};stop-opacity:1" />
                            <stop offset="70%" style="stop-color:${t.colors.bottom};stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                          fill="url(#ukraineFlag)"/>
                </svg>
            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):Zc.divIcon({className:"capital-marker",html:"<div></div>",iconSize:[0,0]}),XN=({facility:t,onViewDetails:e})=>{var l,h;const n=q.useRef(null);q.useEffect(()=>{if(n.current){const d=o0(t.type);n.current.setIcon(a0(d,t.damagePercentage||0))}},[t.damagePercentage,t.type]);const r=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,s=((h=t.location)==null?void 0:h.longitude)??t.longitude??0,o=o0(t.type);return v.jsx(f1,{ref:n,position:[r,s],icon:a0(o,t.damagePercentage||0),children:v.jsx(p1,{children:v.jsxs("div",{style:{backgroundColor:"#1a1a2e",color:"#e2e8f0",minWidth:"200px",padding:"4px",borderRadius:"8px"},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"white"},children:t.name}),v.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"6px",alignItems:"center"},children:[v.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"}),t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:"#f59e0b",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600"},children:["-",t.damagePercentage,"%"]})]}),v.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[v.jsx("strong",{children:"Type:"})," ",v.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),v.jsxs("div",{style:{margin:"10px 0"},children:[v.jsx("p",{style:{margin:"0 0 5px 0",fontSize:"13px",fontWeight:"bold"},children:"Production:"}),v.jsxs("p",{style:{margin:"2px 0 2px 10px",fontSize:"13px"},children:[v.jsx("strong",{children:"Oil:"})," ",t.capacity.toLocaleString()," bbl/day",t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"6px"},children:["→ ",Math.round(t.capacity*(1-t.damagePercentage/100)).toLocaleString()," bbl/day"]})]}),t.gasCapacity&&v.jsxs("p",{style:{margin:"2px 0 2px 10px",fontSize:"13px"},children:[v.jsx("strong",{children:"Gas:"})," ",t.gasCapacity.toLocaleString()," m³/year",t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"6px"},children:["→ ",Math.round(t.gasCapacity*(1-t.damagePercentage/100)).toLocaleString()," m³/year"]})]})]}),v.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#94a3b8"},children:[r.toFixed(4),", ",s.toFixed(4)]}),v.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#0057B7",color:"#FFD700",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#004494",onMouseOut:d=>d.currentTarget.style.backgroundColor="#0057B7",children:"View Full Details →"})]})})})},us=({color:t,damagePercentage:e=0})=>{let n="white",r=2;return e>=80?(n="#000000",r=3):e>=40?(n="#DC2626",r=3):e>0&&(n="#F59E0B",r=3),v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:t,borderRadius:"50%",border:`${r}px solid ${n}`,boxSizing:"border-box"}})},JN=({filteredCount:t,totalCount:e,filterState:n})=>{const{searchTerm:r,setSearchTerm:s,filterHitStatus:o,setFilterHitStatus:l,minCapacity:h,setMinCapacity:d,minGasCapacity:p,setMinGasCapacity:_,showRefinery:w,setShowRefinery:x,showExtraction:A,setShowExtraction:F,showStorage:b,setShowStorage:z}=n;return v.jsxs("div",{style:{width:"280px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[v.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[v.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),v.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[t," of ",e," facilities"]})]}),v.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),v.jsx("input",{type:"text",placeholder:"Search by name...",value:r,onChange:S=>s(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="#FFD700",onBlur:S=>S.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:S=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#0057B7"}}),v.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:S=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#0057B7"}}),v.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),v.jsxs("div",{style:{marginBottom:"12px"},children:[v.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:[v.jsx("span",{children:"Min. Oil"}),v.jsxs("span",{style:{color:"#9ca3af",fontSize:"11px"},children:[h.toLocaleString()," bbl/d"]})]}),v.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:h,onChange:S=>d(Number(S.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#0057B7",height:"4px"}})]}),v.jsxs("div",{style:{marginBottom:"12px"},children:[v.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:[v.jsx("span",{children:"Min. Gas"}),v.jsxs("span",{style:{color:"#9ca3af",fontSize:"11px"},children:[p.toLocaleString()," m³/yr"]})]}),v.jsx("input",{type:"range",min:"0",max:"30000000000",step:"1000000000",value:p,onChange:S=>_(Number(S.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#0057B7",height:"4px"}})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"6px"},children:"Facility Types"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:w,onChange:S=>x(S.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#0057B7"}}),v.jsx(us,{color:"#1cc5b7ff"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:A,onChange:S=>F(S.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#0057B7"}}),v.jsx(us,{color:"#8B5CF6"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:b,onChange:S=>z(S.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#0057B7"}}),v.jsx(us,{color:"#F59E0B"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"4px"},children:"Damage Level"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px"},children:[v.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx(us,{color:"#1cc5b7ff",damagePercentage:0}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"0%"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx(us,{color:"#1cc5b7ff",damagePercentage:20}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1-39%"})]})]}),v.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx(us,{color:"#1cc5b7ff",damagePercentage:50}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"40-79%"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx(us,{color:"#1cc5b7ff",damagePercentage:90}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"80-100%"})]})]})]})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"6px"},children:"Weapon Ranges (km)"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"4px",flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#10B981",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"500"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#F97316",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1000"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#EF4444",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1500"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#3B82F6",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"2000"})]})]})]})]})]})},eO=()=>{const t=uu(),[e,n]=q.useState([]),[r,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,_]=q.useState(0),[w,x]=q.useState(0),[A,F]=q.useState(!0),[b,z]=q.useState(!0),[S,T]=q.useState(!0),[O,H]=q.useState(!0),[Q,ee]=q.useState(!0),[R,P]=q.useState(!0),[N,D]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!be){console.error("Firebase not initialized");return}const J=await Un(Bn(be,Qe.FACILITIES)),we=await Un(Bn(be,Qe.HITS)),Le=J.docs.map(De=>{const $=De.data(),le=parseInt(De.id),ce=we.docs.map(me=>me.data()).filter(me=>me.facilityId===le&&!me.draft).reduce((me,Ue)=>me+(Ue.damagePercentage||0),0);return{id:le,...$,damagePercentage:ce}}).filter(De=>!De.draft);n(Le)}catch(J){console.error("Error fetching facilities:",J)}})()},[]);const V=C=>{t(`/facility/${C}`)},k=e.filter(C=>!(r!=="all"&&C.type!==r||C.type==="refinery"&&!A||C.type==="extraction"&&!b||C.type==="storage"&&!S||o==="hit"&&!C.hit||o==="operational"&&C.hit||C.capacity<p||C.gasCapacity&&C.gasCapacity<w||h&&!C.name.toLowerCase().includes(h.toLowerCase())));return v.jsxs("div",{style:{display:"flex",width:"100%",height:"calc(100vh - 60px)",maxHeight:"900px",backgroundColor:"#0a0a0a",overflow:"hidden",margin:"20px auto"},children:[v.jsx(JN,{filteredCount:k.length,totalCount:e.length,filterState:{searchTerm:h,setSearchTerm:d,filterHitStatus:o,setFilterHitStatus:l,minCapacity:p,setMinCapacity:_,minGasCapacity:w,setMinGasCapacity:x,showRefinery:A,setShowRefinery:F,showExtraction:b,setShowExtraction:z,showStorage:S,setShowStorage:T}}),v.jsx("div",{style:{flex:1,position:"relative"},children:v.jsxs(WN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[v.jsx($N,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),qN.map(C=>{if(C.range===500&&!O||C.range===1e3&&!Q||C.range===1500&&!R||C.range===2e3&&!N)return null;const J=QN(ZN,C.range);return v.jsx(HN,{positions:J,pathOptions:{color:C.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0,dashArray:"10, 15"}},C.range)}),GN.map(C=>{const J=YN(C);return v.jsx(f1,{position:[C.lat,C.lon],icon:J,children:v.jsx(p1,{children:v.jsx("div",{style:{backgroundColor:"#1a1a2e",color:"white",fontWeight:"bold",padding:"4px",borderRadius:"8px"},children:C.name})})},C.name)}),k.map(C=>v.jsx(XN,{facility:C,onViewDetails:V},C.id))]})})]})},tO=()=>{var w,x;const{id:t}=Gm(),e=uu(),[n,r]=q.useState(null),[s,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!be){console.error("Firebase not initialized"),h(!1);return}const F=Sn(be,Qe.FACILITIES,t),b=await Lg(F);if(b.exists()){r({id:parseInt(b.id),...b.data()});const z=Bn(be,Qe.HITS),S=Bc(z,Uc("facilityId","==",parseInt(t)),s2("date","desc")),O=(await Un(S)).docs.map(H=>({id:H.data().id,...H.data()})).filter(H=>!H.draft);o(O)}else console.error("Facility not found");h(!1)}catch(F){console.error("Error fetching facility:",F),h(!1)}})()},[t]),l)return v.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return v.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[v.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),v.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((w=n.location)==null?void 0:w.latitude)??n.latitude??0,p=((x=n.location)==null?void 0:x.longitude)??n.longitude??0,_=A=>{switch(A){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return v.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[v.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:"← Back to Map"}),v.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),v.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),v.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:v.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),v.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[v.jsx("span",{style:{color:_(n.type),fontSize:"28px"},children:"●"}),v.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),v.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),v.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),v.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),v.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[v.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),v.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[v.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),v.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),"°"]})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),v.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),"°"]})]})]}),v.jsx("div",{style:{marginTop:"20px"},children:v.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps →"})})]}),s.length>0&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[v.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Hit Records"}),v.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((A,F)=>v.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[v.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-F}),v.jsxs("div",{children:[v.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Hit on ",new Date(A.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),v.jsxs("div",{style:{fontSize:"13px",color:"#888",display:"flex",gap:"12px",flexWrap:"wrap"},children:[A.severity&&v.jsxs("span",{children:["Severity: ",v.jsx("span",{style:{color:A.severity==="destroyed"?"#f44336":"#FF9800",fontWeight:"600",textTransform:"uppercase"},children:A.severity})]}),A.damagePercentage!=null&&v.jsxs("span",{children:["Impact: ",v.jsxs("span",{style:{color:"#f44336",fontWeight:"600"},children:["-",A.damagePercentage,"%"]})]}),A.expectedRepairTime&&v.jsxs("span",{children:["Repair: ",v.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[A.expectedRepairTime," days"]})]})]})]})]})}),(A.mediaLinks&&A.mediaLinks.length>0||A.videoLink)&&v.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:A.mediaLinks&&A.mediaLinks.length>0?A.mediaLinks.map((b,z)=>v.jsxs("a",{href:b,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",display:"inline-block"},children:[b.includes("youtube")||b.includes("youtu.be")||b.includes("video")?"📹":"📷"," Media ",z+1]},z)):A.videoLink&&v.jsx("a",{href:A.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"📹 Video"})}),A.notes&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:A.notes})]},A.id))})]})]})})]})},nO=()=>v.jsx(fP,{children:v.jsxs(cP,{children:[v.jsx(po,{path:"/",element:v.jsx(eO,{})}),v.jsx(po,{path:"/facility/:id",element:v.jsx(tO,{})}),v.jsx(po,{path:"/admin",element:v.jsx(PN,{})}),v.jsx(po,{path:"/admin/facility/:id",element:v.jsx(kN,{})}),v.jsx(po,{path:"/admin/hit/:id",element:v.jsx(AN,{})})]})}),rO=Af.createRoot(document.getElementById("root"));rO.render(v.jsx(Pl.StrictMode,{children:v.jsx(nO,{})}));
