function HT(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var $T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l0={exports:{}},Vh={},u0={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),qT=Symbol.for("react.portal"),GT=Symbol.for("react.fragment"),ZT=Symbol.for("react.strict_mode"),KT=Symbol.for("react.profiler"),QT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),XT=Symbol.for("react.forward_ref"),JT=Symbol.for("react.suspense"),eI=Symbol.for("react.memo"),tI=Symbol.for("react.lazy"),f_=Symbol.iterator;function nI(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var c0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,d0={};function ra(t,e,n){this.props=t,this.context=e,this.refs=d0,this.updater=n||c0}ra.prototype.isReactComponent={};ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f0(){}f0.prototype=ra.prototype;function Yp(t,e,n){this.props=t,this.context=e,this.refs=d0,this.updater=n||c0}var Xp=Yp.prototype=new f0;Xp.constructor=Yp;h0(Xp,ra.prototype);Xp.isPureReactComponent=!0;var p_=Array.isArray,p0=Object.prototype.hasOwnProperty,Jp={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)p0.call(e,i)&&!m0.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:iu,type:t,key:o,ref:l,props:s,_owner:Jp.current}}function iI(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function em(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function rI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var m_=/\/+/g;function Fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rI(""+t.key):e.toString(36)}function Ic(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case iu:case qT:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Fd(l,0):i,p_(s)?(n="",t!=null&&(n=t.replace(m_,"$&/")+"/"),Ic(s,e,n,"",function(p){return p})):s!=null&&(em(s)&&(s=iI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(m_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",p_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Fd(o,h);l+=Ic(o,e,n,d,s)}else if(d=nI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Fd(o,h++),l+=Ic(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function tc(t,e,n){if(t==null)return t;var i=[],s=0;return Ic(t,i,"","",function(o){return e.call(n,o,s++)}),i}function sI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Sc={transition:null},oI={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:Jp};function _0(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:tc,forEach:function(t,e,n){tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tc(t,function(){e++}),e},toArray:function(t){return tc(t,function(e){return e})||[]},only:function(t){if(!em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=ra;Ce.Fragment=GT;Ce.Profiler=KT;Ce.PureComponent=Yp;Ce.StrictMode=ZT;Ce.Suspense=JT;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oI;Ce.act=_0;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=h0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Jp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)p0.call(e,d)&&!m0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:iu,type:t.type,key:s,ref:o,props:i,_owner:l}};Ce.createContext=function(t){return t={$$typeof:YT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QT,_context:t},t.Consumer=t};Ce.createElement=g0;Ce.createFactory=function(t){var e=g0.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:XT,render:t}};Ce.isValidElement=em;Ce.lazy=function(t){return{$$typeof:tI,_payload:{_status:-1,_result:t},_init:sI}};Ce.memo=function(t,e){return{$$typeof:eI,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};Ce.unstable_act=_0;Ce.useCallback=function(t,e){return qt.current.useCallback(t,e)};Ce.useContext=function(t){return qt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return qt.current.useEffect(t,e)};Ce.useId=function(){return qt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return qt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Ce.useRef=function(t){return qt.current.useRef(t)};Ce.useState=function(t){return qt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return qt.current.useTransition()};Ce.version="18.3.1";u0.exports=Ce;var q=u0.exports;const Cl=a0(q),aI=HT({__proto__:null,default:Cl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=q,uI=Symbol.for("react.element"),cI=Symbol.for("react.fragment"),hI=Object.prototype.hasOwnProperty,dI=lI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fI={key:!0,ref:!0,__self:!0,__source:!0};function y0(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)hI.call(e,i)&&!fI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:uI,type:t,key:o,ref:l,props:s,_owner:dI.current}}Vh.Fragment=cI;Vh.jsx=y0;Vh.jsxs=y0;l0.exports=Vh;var v=l0.exports,Pf={},v0={exports:{}},fn={},w0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ue){var X=$.length;$.push(ue);e:for(;0<X;){var he=X-1>>>1,Ee=$[he];if(0<s(Ee,ue))$[he]=ue,$[X]=Ee,X=he;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ue=$[0],X=$.pop();if(X!==ue){$[0]=X;e:for(var he=0,Ee=$.length,Ue=Ee>>>1;he<Ue;){var xe=2*(he+1)-1,Te=$[xe],de=xe+1,at=$[de];if(0>s(Te,X))de<Ee&&0>s(at,Te)?($[he]=at,$[de]=X,he=de):($[he]=Te,$[xe]=X,he=xe);else if(de<Ee&&0>s(at,X))$[he]=at,$[de]=X,he=de;else break e}}return ue}function s($,ue){var X=$.sortIndex-ue.sortIndex;return X!==0?X:$.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,w=null,E=3,k=!1,z=!1,N=!1,F=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O($){for(var ue=n(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=$)i(p),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(p)}}function H($){if(N=!1,O($),!z)if(n(d)!==null)z=!0,ve(Y);else{var ue=n(p);ue!==null&&Re(H,ue.startTime-$)}}function Y($,ue){z=!1,N&&(N=!1,A(S),S=-1),k=!0;var X=E;try{for(O(ue),w=n(d);w!==null&&(!(w.expirationTime>ue)||$&&!V());){var he=w.callback;if(typeof he=="function"){w.callback=null,E=w.priorityLevel;var Ee=he(w.expirationTime<=ue);ue=t.unstable_now(),typeof Ee=="function"?w.callback=Ee:w===n(d)&&i(d),O(ue)}else i(d);w=n(d)}if(w!==null)var Ue=!0;else{var xe=n(p);xe!==null&&Re(H,xe.startTime-ue),Ue=!1}return Ue}finally{w=null,E=X,k=!1}}var ee=!1,R=null,S=-1,b=5,D=-1;function V(){return!(t.unstable_now()-D<b)}function C(){if(R!==null){var $=t.unstable_now();D=$;var ue=!0;try{ue=R(!0,$)}finally{ue?P():(ee=!1,R=null)}}else ee=!1}var P;if(typeof T=="function")P=function(){T(C)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,G=te.port2;te.port1.onmessage=C,P=function(){G.postMessage(null)}}else P=function(){F(C,0)};function ve($){R=$,ee||(ee=!0,P())}function Re($,ue){S=F(function(){$(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){z||k||(z=!0,ve(Y))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var X=E;E=ue;try{return $()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=E;E=$;try{return ue()}finally{E=X}},t.unstable_scheduleCallback=function($,ue,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=X+Ee,$={id:_++,callback:ue,priorityLevel:$,startTime:X,expirationTime:Ee,sortIndex:-1},X>he?($.sortIndex=X,e(p,$),n(d)===null&&$===n(p)&&(N?(A(S),S=-1):N=!0,Re(H,X-he))):($.sortIndex=Ee,e(d,$),z||k||(z=!0,ve(Y))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var ue=E;return function(){var X=E;E=ue;try{return $.apply(this,arguments)}finally{E=X}}}})(x0);w0.exports=x0;var pI=w0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI=q,dn=pI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,Pl={};function Rs(t,e){Wo(t,e),Wo(t+"Capture",e)}function Wo(t,e){for(Pl[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,gI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g_={},__={};function _I(t){return kf.call(__,t)?!0:kf.call(g_,t)?!1:gI.test(t)?__[t]=!0:(g_[t]=!0,!1)}function yI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vI(t,e,n,i){if(e===null||typeof e>"u"||yI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,i){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vI(e,n,s,i)&&(n=null),i||s===null?_I(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var qi=mI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),vo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),I0=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),y_=Symbol.iterator;function Ga(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,jd;function tl(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Bd=!1;function Ud(t,e){if(!t||Bd)return"";Bd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Bd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tl(t):""}function wI(t){switch(t.tag){case 5:return tl(t.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case vo:return"Portal";case Af:return"Profiler";case rm:return"StrictMode";case Rf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case om:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function xI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EI(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=EI(t))}function P0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=C0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nf(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k0(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Of(t,e){k0(t,e);var n=Nr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mf(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mf(t,e,n){(e!=="number"||Zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nl=Array.isArray;function Lo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Df(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(nl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function A0(t,e){var n=Nr(e.value),i=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function E_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,b0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TI=["Webkit","ms","Moz","O"];Object.keys(hl).forEach(function(t){TI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hl[e]=hl[t]})});function L0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hl.hasOwnProperty(t)&&hl[t]?(""+e).trim():e+"px"}function N0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=L0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var II=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zf(t,e){if(e){if(II[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bf=null,No=null,Oo=null;function T_(t){if(t=ou(t)){if(typeof Bf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Uh(e),Bf(t.stateNode,t.type,e))}}function O0(t){No?Oo?Oo.push(t):Oo=[t]:No=t}function M0(){if(No){var t=No,e=Oo;if(Oo=No=null,T_(t),e)for(t=0;t<e.length;t++)T_(e[t])}}function D0(t,e){return t(e)}function V0(){}var Wd=!1;function z0(t,e,n){if(Wd)return t(e,n);Wd=!0;try{return D0(t,e,n)}finally{Wd=!1,(No!==null||Oo!==null)&&(V0(),M0())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var i=Uh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Uf=!1;if(zi)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Uf=!1}function SI(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var dl=!1,Kc=null,Qc=!1,Wf=null,CI={onError:function(t){dl=!0,Kc=t}};function PI(t,e,n,i,s,o,l,h,d){dl=!1,Kc=null,SI.apply(CI,arguments)}function kI(t,e,n,i,s,o,l,h,d){if(PI.apply(this,arguments),dl){if(dl){var p=Kc;dl=!1,Kc=null}else throw Error(J(198));Qc||(Qc=!0,Wf=p)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I_(t){if(bs(t)!==t)throw Error(J(188))}function AI(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return I_(s),t;if(o===i)return I_(s),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function j0(t){return t=AI(t),t!==null?B0(t):null}function B0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=B0(t);if(e!==null)return e;t=t.sibling}return null}var U0=dn.unstable_scheduleCallback,S_=dn.unstable_cancelCallback,RI=dn.unstable_shouldYield,bI=dn.unstable_requestPaint,st=dn.unstable_now,LI=dn.unstable_getCurrentPriorityLevel,lm=dn.unstable_ImmediatePriority,W0=dn.unstable_UserBlockingPriority,Yc=dn.unstable_NormalPriority,NI=dn.unstable_LowPriority,H0=dn.unstable_IdlePriority,zh=null,li=null;function OI(t){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:VI,MI=Math.log,DI=Math.LN2;function VI(t){return t>>>=0,t===0?32:31-(MI(t)/DI|0)|0}var sc=64,oc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=il(h):(o&=l,o!==0&&(i=il(o)))}else l=n&~s,l!==0?i=il(l):o!==0&&(i=il(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Hn(e),s=1<<n,i|=t[n],e&=~s;return i}function zI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Hn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=zI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $0(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function Hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Hn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Hn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Be=0;function q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,cm,Z0,K0,Q0,$f=!1,ac=[],vr=null,wr=null,xr=null,Rl=new Map,bl=new Map,ur=[],BI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Ka(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ou(e),e!==null&&cm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UI(t,e,n,i,s){switch(e){case"focusin":return vr=Ka(vr,t,e,n,i,s),!0;case"dragenter":return wr=Ka(wr,t,e,n,i,s),!0;case"mouseover":return xr=Ka(xr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Rl.set(o,Ka(Rl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,bl.set(o,Ka(bl.get(o)||null,t,e,n,i,s)),!0}return!1}function Y0(t){var e=ds(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=F0(n),e!==null){t.blockedOn=e,Q0(t.priority,function(){Z0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);jf=i,n.target.dispatchEvent(i),jf=null}else return e=ou(n),e!==null&&cm(e),t.blockedOn=n,!1;e.shift()}return!0}function P_(t,e,n){Cc(t)&&n.delete(e)}function WI(){$f=!1,vr!==null&&Cc(vr)&&(vr=null),wr!==null&&Cc(wr)&&(wr=null),xr!==null&&Cc(xr)&&(xr=null),Rl.forEach(P_),bl.forEach(P_)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,WI)))}function Ll(t){function e(s){return Qa(s,t)}if(0<ac.length){Qa(ac[0],t);for(var n=1;n<ac.length;n++){var i=ac[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vr!==null&&Qa(vr,t),wr!==null&&Qa(wr,t),xr!==null&&Qa(xr,t),Rl.forEach(e),bl.forEach(e),n=0;n<ur.length;n++)i=ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Y0(n),n.blockedOn===null&&ur.shift()}var Mo=qi.ReactCurrentBatchConfig,Jc=!0;function HI(t,e,n,i){var s=Be,o=Mo.transition;Mo.transition=null;try{Be=1,hm(t,e,n,i)}finally{Be=s,Mo.transition=o}}function $I(t,e,n,i){var s=Be,o=Mo.transition;Mo.transition=null;try{Be=4,hm(t,e,n,i)}finally{Be=s,Mo.transition=o}}function hm(t,e,n,i){if(Jc){var s=qf(t,e,n,i);if(s===null)ef(t,e,i,eh,n),C_(t,i);else if(UI(s,t,e,n,i))i.stopPropagation();else if(C_(t,i),e&4&&-1<BI.indexOf(t)){for(;s!==null;){var o=ou(s);if(o!==null&&G0(o),o=qf(t,e,n,i),o===null&&ef(t,e,i,eh,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else ef(t,e,i,null,n)}}var eh=null;function qf(t,e,n,i){if(eh=null,t=am(i),t=ds(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eh=t,null}function X0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LI()){case lm:return 1;case W0:return 4;case Yc:case NI:return 16;case H0:return 536870912;default:return 16}default:return 16}}var mr=null,dm=null,Pc=null;function J0(){if(Pc)return Pc;var t,e=dm,n=e.length,i,s="value"in mr?mr.value:mr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Pc=s.slice(t,1<i?1-i:void 0)}function kc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function k_(){return!1}function pn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lc:k_,this.isPropagationStopped=k_,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=pn(sa),su=Je({},sa,{view:0,detail:0}),qI=pn(su),$d,qd,Ya,Fh=Je({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?($d=t.screenX-Ya.screenX,qd=t.screenY-Ya.screenY):qd=$d=0,Ya=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),A_=pn(Fh),GI=Je({},Fh,{dataTransfer:0}),ZI=pn(GI),KI=Je({},su,{relatedTarget:0}),Gd=pn(KI),QI=Je({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),YI=pn(QI),XI=Je({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JI=pn(XI),eS=Je({},sa,{data:0}),R_=pn(eS),tS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iS[t])?!!e[t]:!1}function pm(){return rS}var sS=Je({},su,{key:function(t){if(t.key){var e=tS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(t){return t.type==="keypress"?kc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oS=pn(sS),aS=Je({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b_=pn(aS),lS=Je({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),uS=pn(lS),cS=Je({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),hS=pn(cS),dS=Je({},Fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fS=pn(dS),pS=[9,13,27,32],mm=zi&&"CompositionEvent"in window,fl=null;zi&&"documentMode"in document&&(fl=document.documentMode);var mS=zi&&"TextEvent"in window&&!fl,ew=zi&&(!mm||fl&&8<fl&&11>=fl),L_=" ",N_=!1;function tw(t,e){switch(t){case"keyup":return pS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function gS(t,e){switch(t){case"compositionend":return nw(e);case"keypress":return e.which!==32?null:(N_=!0,L_);case"textInput":return t=e.data,t===L_&&N_?null:t;default:return null}}function _S(t,e){if(xo)return t==="compositionend"||!mm&&tw(t,e)?(t=J0(),Pc=dm=mr=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ew&&e.locale!=="ko"?null:e.data;default:return null}}var yS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yS[t.type]:e==="textarea"}function iw(t,e,n,i){O0(i),e=th(e,"onChange"),0<e.length&&(n=new fm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pl=null,Nl=null;function vS(t){pw(t,0)}function jh(t){var e=Io(t);if(P0(e))return t}function wS(t,e){if(t==="change")return e}var rw=!1;if(zi){var Zd;if(zi){var Kd="oninput"in document;if(!Kd){var M_=document.createElement("div");M_.setAttribute("oninput","return;"),Kd=typeof M_.oninput=="function"}Zd=Kd}else Zd=!1;rw=Zd&&(!document.documentMode||9<document.documentMode)}function D_(){pl&&(pl.detachEvent("onpropertychange",sw),Nl=pl=null)}function sw(t){if(t.propertyName==="value"&&jh(Nl)){var e=[];iw(e,Nl,t,am(t)),z0(vS,e)}}function xS(t,e,n){t==="focusin"?(D_(),pl=e,Nl=n,pl.attachEvent("onpropertychange",sw)):t==="focusout"&&D_()}function ES(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jh(Nl)}function TS(t,e){if(t==="click")return jh(e)}function IS(t,e){if(t==="input"||t==="change")return jh(e)}function SS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:SS;function Ol(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!kf.call(e,s)||!Gn(t[s],e[s]))return!1}return!0}function V_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=V_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=V_(n)}}function ow(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ow(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aw(){for(var t=window,e=Zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zc(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CS(t){var e=aw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ow(n.ownerDocument.documentElement,n)){if(i!==null&&gm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=z_(n,o);var l=z_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PS=zi&&"documentMode"in document&&11>=document.documentMode,Eo=null,Gf=null,ml=null,Zf=!1;function F_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Eo==null||Eo!==Zc(i)||(i=Eo,"selectionStart"in i&&gm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ml&&Ol(ml,i)||(ml=i,i=th(Gf,"onSelect"),0<i.length&&(e=new fm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Eo)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Qd={},lw={};zi&&(lw=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Bh(t){if(Qd[t])return Qd[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lw)return Qd[t]=e[n];return t}var uw=Bh("animationend"),cw=Bh("animationiteration"),hw=Bh("animationstart"),dw=Bh("transitionend"),fw=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){fw.set(t,e),Rs(e,[t])}for(var Yd=0;Yd<j_.length;Yd++){var Xd=j_[Yd],kS=Xd.toLowerCase(),AS=Xd[0].toUpperCase()+Xd.slice(1);Br(kS,"on"+AS)}Br(uw,"onAnimationEnd");Br(cw,"onAnimationIteration");Br(hw,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(dw,"onTransitionEnd");Wo("onMouseEnter",["mouseout","mouseover"]);Wo("onMouseLeave",["mouseout","mouseover"]);Wo("onPointerEnter",["pointerout","pointerover"]);Wo("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RS=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function B_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,kI(i,e,void 0,t),t.currentTarget=null}function pw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;B_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;B_(s,h,p),o=d}}}if(Qc)throw t=Wf,Qc=!1,Wf=null,t}function qe(t,e){var n=e[Jf];n===void 0&&(n=e[Jf]=new Set);var i=t+"__bubble";n.has(i)||(mw(e,t,2,!1),n.add(i))}function Jd(t,e,n){var i=0;e&&(i|=4),mw(n,t,i,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function Ml(t){if(!t[cc]){t[cc]=!0,E0.forEach(function(n){n!=="selectionchange"&&(RS.has(n)||Jd(n,!1,t),Jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,Jd("selectionchange",!1,e))}}function mw(t,e,n,i){switch(X0(e)){case 1:var s=HI;break;case 4:s=$I;break;default:s=hm}n=s.bind(null,e,n,t),s=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ef(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ds(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}z0(function(){var p=o,_=am(n),w=[];e:{var E=fw.get(t);if(E!==void 0){var k=fm,z=t;switch(t){case"keypress":if(kc(n)===0)break e;case"keydown":case"keyup":k=oS;break;case"focusin":z="focus",k=Gd;break;case"focusout":z="blur",k=Gd;break;case"beforeblur":case"afterblur":k=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=ZI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=uS;break;case uw:case cw:case hw:k=YI;break;case dw:k=hS;break;case"scroll":k=qI;break;case"wheel":k=fS;break;case"copy":case"cut":case"paste":k=JI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=b_}var N=(e&4)!==0,F=!N&&t==="scroll",A=N?E!==null?E+"Capture":null:E;N=[];for(var T=p,O;T!==null;){O=T;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,A!==null&&(H=Al(T,A),H!=null&&N.push(Dl(T,H,O)))),F)break;T=T.return}0<N.length&&(E=new k(E,z,null,n,_),w.push({event:E,listeners:N}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&n!==jf&&(z=n.relatedTarget||n.fromElement)&&(ds(z)||z[Fi]))break e;if((k||E)&&(E=_.window===_?_:(E=_.ownerDocument)?E.defaultView||E.parentWindow:window,k?(z=n.relatedTarget||n.toElement,k=p,z=z?ds(z):null,z!==null&&(F=bs(z),z!==F||z.tag!==5&&z.tag!==6)&&(z=null)):(k=null,z=p),k!==z)){if(N=A_,H="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(N=b_,H="onPointerLeave",A="onPointerEnter",T="pointer"),F=k==null?E:Io(k),O=z==null?E:Io(z),E=new N(H,T+"leave",k,n,_),E.target=F,E.relatedTarget=O,H=null,ds(_)===p&&(N=new N(A,T+"enter",z,n,_),N.target=O,N.relatedTarget=F,H=N),F=H,k&&z)t:{for(N=k,A=z,T=0,O=N;O;O=fo(O))T++;for(O=0,H=A;H;H=fo(H))O++;for(;0<T-O;)N=fo(N),T--;for(;0<O-T;)A=fo(A),O--;for(;T--;){if(N===A||A!==null&&N===A.alternate)break t;N=fo(N),A=fo(A)}N=null}else N=null;k!==null&&U_(w,E,k,N,!1),z!==null&&F!==null&&U_(w,F,z,N,!0)}}e:{if(E=p?Io(p):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var Y=wS;else if(O_(E))if(rw)Y=IS;else{Y=ES;var ee=xS}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Y=TS);if(Y&&(Y=Y(t,p))){iw(w,Y,n,_);break e}ee&&ee(t,E,p),t==="focusout"&&(ee=E._wrapperState)&&ee.controlled&&E.type==="number"&&Mf(E,"number",E.value)}switch(ee=p?Io(p):window,t){case"focusin":(O_(ee)||ee.contentEditable==="true")&&(Eo=ee,Gf=p,ml=null);break;case"focusout":ml=Gf=Eo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,F_(w,n,_);break;case"selectionchange":if(PS)break;case"keydown":case"keyup":F_(w,n,_)}var R;if(mm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else xo?tw(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ew&&n.locale!=="ko"&&(xo||S!=="onCompositionStart"?S==="onCompositionEnd"&&xo&&(R=J0()):(mr=_,dm="value"in mr?mr.value:mr.textContent,xo=!0)),ee=th(p,S),0<ee.length&&(S=new R_(S,t,null,n,_),w.push({event:S,listeners:ee}),R?S.data=R:(R=nw(n),R!==null&&(S.data=R)))),(R=mS?gS(t,n):_S(t,n))&&(p=th(p,"onBeforeInput"),0<p.length&&(_=new R_("onBeforeInput","beforeinput",null,n,_),w.push({event:_,listeners:p}),_.data=R))}pw(w,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function th(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Al(t,n),o!=null&&i.unshift(Dl(t,o,s)),o=Al(t,e),o!=null&&i.push(Dl(t,o,s))),t=t.return}return i}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=Al(n,o),d!=null&&l.unshift(Dl(n,d,h))):s||(d=Al(n,o),d!=null&&l.push(Dl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var bS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(bS,`
`).replace(LS,"")}function hc(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(J(425))}function nh(){}var Kf=null,Qf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,NS=typeof clearTimeout=="function"?clearTimeout:void 0,H_=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof H_<"u"?function(t){return H_.resolve(null).then(t).catch(MS)}:Xf;function MS(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ll(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ll(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oa=Math.random().toString(36).slice(2),ai="__reactFiber$"+oa,Vl="__reactProps$"+oa,Fi="__reactContainer$"+oa,Jf="__reactEvents$"+oa,DS="__reactListeners$"+oa,VS="__reactHandles$"+oa;function ds(t){var e=t[ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fi]||n[ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$_(t);t!==null;){if(n=t[ai])return n;t=$_(t)}return e}t=n,n=t.parentNode}return null}function ou(t){return t=t[ai]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Uh(t){return t[Vl]||null}var ep=[],So=-1;function Ur(t){return{current:t}}function Ze(t){0>So||(t.current=ep[So],ep[So]=null,So--)}function $e(t,e){So++,ep[So]=t.current,t.current=e}var Or={},Ft=Ur(Or),nn=Ur(!1),ws=Or;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Or;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function ih(){Ze(nn),Ze(Ft)}function q_(t,e,n){if(Ft.current!==Or)throw Error(J(168));$e(Ft,e),$e(nn,n)}function gw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(J(108,xI(t)||"Unknown",s));return Je({},n,i)}function rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,ws=Ft.current,$e(Ft,t),$e(nn,nn.current),!0}function G_(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=gw(t,e,ws),i.__reactInternalMemoizedMergedChildContext=t,Ze(nn),Ze(Ft),$e(Ft,t)):Ze(nn),$e(nn,n)}var bi=null,Wh=!1,nf=!1;function _w(t){bi===null?bi=[t]:bi.push(t)}function zS(t){Wh=!0,_w(t)}function Wr(){if(!nf&&bi!==null){nf=!0;var t=0,e=Be;try{var n=bi;for(Be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}bi=null,Wh=!1}catch(s){throw bi!==null&&(bi=bi.slice(t+1)),U0(lm,Wr),s}finally{Be=e,nf=!1}}return null}var Co=[],Po=0,sh=null,oh=0,Tn=[],In=0,xs=null,Li=1,Ni="";function us(t,e){Co[Po++]=oh,Co[Po++]=sh,sh=t,oh=e}function yw(t,e,n){Tn[In++]=Li,Tn[In++]=Ni,Tn[In++]=xs,xs=t;var i=Li;t=Ni;var s=32-Hn(i)-1;i&=~(1<<s),n+=1;var o=32-Hn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Li=1<<32-Hn(e)+s|n<<s|i,Ni=o+t}else Li=1<<o|n<<s|i,Ni=t}function _m(t){t.return!==null&&(us(t,1),yw(t,1,0))}function ym(t){for(;t===sh;)sh=Co[--Po],Co[Po]=null,oh=Co[--Po],Co[Po]=null;for(;t===xs;)xs=Tn[--In],Tn[In]=null,Ni=Tn[--In],Tn[In]=null,Li=Tn[--In],Tn[In]=null}var hn=null,un=null,Ke=!1,Fn=null;function vw(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Z_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xs!==null?{id:Li,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function np(t){if(Ke){var e=un;if(e){var n=e;if(!Z_(t,e)){if(tp(t))throw Error(J(418));e=Er(n.nextSibling);var i=hn;e&&Z_(t,e)?vw(i,n):(t.flags=t.flags&-4097|2,Ke=!1,hn=t)}}else{if(tp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ke=!1,hn=t}}}function K_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function dc(t){if(t!==hn)return!1;if(!Ke)return K_(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=un)){if(tp(t))throw ww(),Error(J(418));for(;e;)vw(t,e),e=Er(e.nextSibling)}if(K_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?Er(t.stateNode.nextSibling):null;return!0}function ww(){for(var t=un;t;)t=Er(t.nextSibling)}function $o(){un=hn=null,Ke=!1}function vm(t){Fn===null?Fn=[t]:Fn.push(t)}var FS=qi.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function fc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q_(t){var e=t._init;return e(t._payload)}function xw(t){function e(A,T){if(t){var O=A.deletions;O===null?(A.deletions=[T],A.flags|=16):O.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function i(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function s(A,T){return A=Cr(A,T),A.index=0,A.sibling=null,A}function o(A,T,O){return A.index=O,t?(O=A.alternate,O!==null?(O=O.index,O<T?(A.flags|=2,T):O):(A.flags|=2,T)):(A.flags|=1048576,T)}function l(A){return t&&A.alternate===null&&(A.flags|=2),A}function h(A,T,O,H){return T===null||T.tag!==6?(T=cf(O,A.mode,H),T.return=A,T):(T=s(T,O),T.return=A,T)}function d(A,T,O,H){var Y=O.type;return Y===wo?_(A,T,O.props.children,H,O.key):T!==null&&(T.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ar&&Q_(Y)===T.type)?(H=s(T,O.props),H.ref=Xa(A,T,O),H.return=A,H):(H=Mc(O.type,O.key,O.props,null,A.mode,H),H.ref=Xa(A,T,O),H.return=A,H)}function p(A,T,O,H){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=hf(O,A.mode,H),T.return=A,T):(T=s(T,O.children||[]),T.return=A,T)}function _(A,T,O,H,Y){return T===null||T.tag!==7?(T=_s(O,A.mode,H,Y),T.return=A,T):(T=s(T,O),T.return=A,T)}function w(A,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return T=cf(""+T,A.mode,O),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nc:return O=Mc(T.type,T.key,T.props,null,A.mode,O),O.ref=Xa(A,null,T),O.return=A,O;case vo:return T=hf(T,A.mode,O),T.return=A,T;case ar:var H=T._init;return w(A,H(T._payload),O)}if(nl(T)||Ga(T))return T=_s(T,A.mode,O,null),T.return=A,T;fc(A,T)}return null}function E(A,T,O,H){var Y=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:h(A,T,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case nc:return O.key===Y?d(A,T,O,H):null;case vo:return O.key===Y?p(A,T,O,H):null;case ar:return Y=O._init,E(A,T,Y(O._payload),H)}if(nl(O)||Ga(O))return Y!==null?null:_(A,T,O,H,null);fc(A,O)}return null}function k(A,T,O,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return A=A.get(O)||null,h(T,A,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case nc:return A=A.get(H.key===null?O:H.key)||null,d(T,A,H,Y);case vo:return A=A.get(H.key===null?O:H.key)||null,p(T,A,H,Y);case ar:var ee=H._init;return k(A,T,O,ee(H._payload),Y)}if(nl(H)||Ga(H))return A=A.get(O)||null,_(T,A,H,Y,null);fc(T,H)}return null}function z(A,T,O,H){for(var Y=null,ee=null,R=T,S=T=0,b=null;R!==null&&S<O.length;S++){R.index>S?(b=R,R=null):b=R.sibling;var D=E(A,R,O[S],H);if(D===null){R===null&&(R=b);break}t&&R&&D.alternate===null&&e(A,R),T=o(D,T,S),ee===null?Y=D:ee.sibling=D,ee=D,R=b}if(S===O.length)return n(A,R),Ke&&us(A,S),Y;if(R===null){for(;S<O.length;S++)R=w(A,O[S],H),R!==null&&(T=o(R,T,S),ee===null?Y=R:ee.sibling=R,ee=R);return Ke&&us(A,S),Y}for(R=i(A,R);S<O.length;S++)b=k(R,A,S,O[S],H),b!==null&&(t&&b.alternate!==null&&R.delete(b.key===null?S:b.key),T=o(b,T,S),ee===null?Y=b:ee.sibling=b,ee=b);return t&&R.forEach(function(V){return e(A,V)}),Ke&&us(A,S),Y}function N(A,T,O,H){var Y=Ga(O);if(typeof Y!="function")throw Error(J(150));if(O=Y.call(O),O==null)throw Error(J(151));for(var ee=Y=null,R=T,S=T=0,b=null,D=O.next();R!==null&&!D.done;S++,D=O.next()){R.index>S?(b=R,R=null):b=R.sibling;var V=E(A,R,D.value,H);if(V===null){R===null&&(R=b);break}t&&R&&V.alternate===null&&e(A,R),T=o(V,T,S),ee===null?Y=V:ee.sibling=V,ee=V,R=b}if(D.done)return n(A,R),Ke&&us(A,S),Y;if(R===null){for(;!D.done;S++,D=O.next())D=w(A,D.value,H),D!==null&&(T=o(D,T,S),ee===null?Y=D:ee.sibling=D,ee=D);return Ke&&us(A,S),Y}for(R=i(A,R);!D.done;S++,D=O.next())D=k(R,A,S,D.value,H),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?S:D.key),T=o(D,T,S),ee===null?Y=D:ee.sibling=D,ee=D);return t&&R.forEach(function(C){return e(A,C)}),Ke&&us(A,S),Y}function F(A,T,O,H){if(typeof O=="object"&&O!==null&&O.type===wo&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case nc:e:{for(var Y=O.key,ee=T;ee!==null;){if(ee.key===Y){if(Y=O.type,Y===wo){if(ee.tag===7){n(A,ee.sibling),T=s(ee,O.props.children),T.return=A,A=T;break e}}else if(ee.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ar&&Q_(Y)===ee.type){n(A,ee.sibling),T=s(ee,O.props),T.ref=Xa(A,ee,O),T.return=A,A=T;break e}n(A,ee);break}else e(A,ee);ee=ee.sibling}O.type===wo?(T=_s(O.props.children,A.mode,H,O.key),T.return=A,A=T):(H=Mc(O.type,O.key,O.props,null,A.mode,H),H.ref=Xa(A,T,O),H.return=A,A=H)}return l(A);case vo:e:{for(ee=O.key;T!==null;){if(T.key===ee)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){n(A,T.sibling),T=s(T,O.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=hf(O,A.mode,H),T.return=A,A=T}return l(A);case ar:return ee=O._init,F(A,T,ee(O._payload),H)}if(nl(O))return z(A,T,O,H);if(Ga(O))return N(A,T,O,H);fc(A,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,T!==null&&T.tag===6?(n(A,T.sibling),T=s(T,O),T.return=A,A=T):(n(A,T),T=cf(O,A.mode,H),T.return=A,A=T),l(A)):n(A,T)}return F}var qo=xw(!0),Ew=xw(!1),ah=Ur(null),lh=null,ko=null,wm=null;function xm(){wm=ko=lh=null}function Em(t){var e=ah.current;Ze(ah),t._currentValue=e}function ip(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){lh=t,wm=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(wm!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(lh===null)throw Error(J(308));ko=t,lh.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var fs=null;function Tm(t){fs===null?fs=[t]:fs.push(t)}function Tw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Tm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ji(t,i)}function ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ji(t,n)}return s=i.interleaved,s===null?(e.next=e,Tm(i)):(e.next=s.next,s.next=e),i.interleaved=e,ji(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}function Y_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uh(t,e,n,i){var s=t.updateQueue;lr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,_=p=d=null,h=o;do{var E=h.lane,k=h.eventTime;if((i&E)===E){_!==null&&(_=_.next={eventTime:k,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var z=t,N=h;switch(E=e,k=n,N.tag){case 1:if(z=N.payload,typeof z=="function"){w=z.call(k,w,E);break e}w=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=N.payload,E=typeof z=="function"?z.call(k,w,E):z,E==null)break e;w=Je({},w,E);break e;case 2:lr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else k={eventTime:k,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=k,d=w):_=_.next=k,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(_===null&&(d=w),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ts|=l,t.lanes=l,t.memoizedState=w}}function X_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(J(191,s));s.call(i)}}}var au={},ui=Ur(au),zl=Ur(au),Fl=Ur(au);function ps(t){if(t===au)throw Error(J(174));return t}function Sm(t,e){switch($e(Fl,e),$e(zl,t),$e(ui,au),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}Ze(ui),$e(ui,e)}function Go(){Ze(ui),Ze(zl),Ze(Fl)}function Sw(t){ps(Fl.current);var e=ps(ui.current),n=Vf(e,t.type);e!==n&&($e(zl,t),$e(ui,n))}function Cm(t){zl.current===t&&(Ze(ui),Ze(zl))}var Ye=Ur(0);function ch(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function Pm(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var Rc=qi.ReactCurrentDispatcher,sf=qi.ReactCurrentBatchConfig,Es=0,Xe=null,pt=null,Tt=null,hh=!1,gl=!1,jl=0,jS=0;function Nt(){throw Error(J(321))}function km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function Am(t,e,n,i,s,o){if(Es=o,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?HS:$S,t=n(i,s),gl){o=0;do{if(gl=!1,jl=0,25<=o)throw Error(J(301));o+=1,Tt=pt=null,e.updateQueue=null,Rc.current=qS,t=n(i,s)}while(gl)}if(Rc.current=dh,e=pt!==null&&pt.next!==null,Es=0,Tt=pt=Xe=null,hh=!1,e)throw Error(J(300));return t}function Rm(){var t=jl!==0;return jl=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Rn(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Tt===null?Xe.memoizedState:Tt.next;if(e!==null)Tt=e,pt=t;else{if(t===null)throw Error(J(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Tt===null?Xe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Bl(t,e){return typeof e=="function"?e(t):e}function of(t){var e=Rn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=pt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((Es&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var w={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=w,l=i):d=d.next=w,Xe.lanes|=_,Ts|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,Gn(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Xe.lanes|=o,Ts|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function af(t){var e=Rn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Gn(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Cw(){}function Pw(t,e){var n=Xe,i=Rn(),s=e(),o=!Gn(i.memoizedState,s);if(o&&(i.memoizedState=s,tn=!0),i=i.queue,bm(Rw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Ul(9,Aw.bind(null,n,i,s,e),void 0,null),It===null)throw Error(J(349));Es&30||kw(n,e,s)}return s}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Aw(t,e,n,i){e.value=n,e.getSnapshot=i,bw(e)&&Lw(t)}function Rw(t,e,n){return n(function(){bw(e)&&Lw(t)})}function bw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function Lw(t){var e=ji(t,1);e!==null&&$n(e,t,1,-1)}function J_(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=WS.bind(null,Xe,t),[e.memoizedState,t]}function Ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Nw(){return Rn().memoizedState}function bc(t,e,n,i){var s=si();Xe.flags|=t,s.memoizedState=Ul(1|e,n,void 0,i===void 0?null:i)}function Hh(t,e,n,i){var s=Rn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&km(i,l.deps)){s.memoizedState=Ul(e,n,o,i);return}}Xe.flags|=t,s.memoizedState=Ul(1|e,n,o,i)}function ey(t,e){return bc(8390656,8,t,e)}function bm(t,e){return Hh(2048,8,t,e)}function Ow(t,e){return Hh(4,2,t,e)}function Mw(t,e){return Hh(4,4,t,e)}function Dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vw(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,Dw.bind(null,e,t),n)}function Lm(){}function zw(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&km(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Fw(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&km(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return Es&21?(Gn(n,e)||(n=$0(),Xe.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function BS(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var i=sf.transition;sf.transition={};try{t(!1),e()}finally{Be=n,sf.transition=i}}function Bw(){return Rn().memoizedState}function US(t,e,n){var i=Sr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Uw(t))Ww(e,n);else if(n=Tw(t,e,n,i),n!==null){var s=$t();$n(n,t,i,s),Hw(n,e,i)}}function WS(t,e,n){var i=Sr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uw(t))Ww(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Gn(h,l)){var d=e.interleaved;d===null?(s.next=s,Tm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Tw(t,e,s,i),n!==null&&(s=$t(),$n(n,t,i,s),Hw(n,e,i))}}function Uw(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Ww(t,e){gl=hh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}var dh={readContext:An,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},HS={readContext:An,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:ey,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bc(4194308,4,Dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var n=si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=US.bind(null,Xe,t),[i.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:J_,useDebugValue:Lm,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=J_(!1),e=t[0];return t=BS.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Xe,s=si();if(Ke){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),It===null)throw Error(J(349));Es&30||kw(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,ey(Rw.bind(null,i,o,t),[t]),i.flags|=2048,Ul(9,Aw.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=si(),e=It.identifierPrefix;if(Ke){var n=Ni,i=Li;n=(i&~(1<<32-Hn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$S={readContext:An,useCallback:zw,useContext:An,useEffect:bm,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Mw,useMemo:Fw,useReducer:of,useRef:Nw,useState:function(){return of(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=Rn();return jw(e,pt.memoizedState,t)},useTransition:function(){var t=of(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Pw,useId:Bw,unstable_isNewReconciler:!1},qS={readContext:An,useCallback:zw,useContext:An,useEffect:bm,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Mw,useMemo:Fw,useReducer:af,useRef:Nw,useState:function(){return af(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=Rn();return pt===null?e.memoizedState=t:jw(e,pt.memoizedState,t)},useTransition:function(){var t=af(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Pw,useId:Bw,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Sr(t),o=Di(i,s);o.payload=e,n!=null&&(o.callback=n),e=Tr(t,o,s),e!==null&&($n(e,t,s,i),Ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Sr(t),o=Di(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Tr(t,o,s),e!==null&&($n(e,t,s,i),Ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),i=Sr(t),s=Di(n,i);s.tag=2,e!=null&&(s.callback=e),e=Tr(t,s,i),e!==null&&($n(e,t,i,n),Ac(e,t,i))}};function ty(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,i)||!Ol(s,o):!0}function $w(t,e,n){var i=!1,s=Or,o=e.contextType;return typeof o=="object"&&o!==null?o=An(o):(s=rn(e)?ws:Ft.current,i=e.contextTypes,o=(i=i!=null)?Ho(t,s):Or),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ny(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function sp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Im(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=An(o):(o=rn(e)?ws:Ft.current,s.context=Ho(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$h.enqueueReplaceState(s,s.state,null),uh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",i=e;do n+=wI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GS=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=Di(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ph||(ph=!0,gp=i),op(t,e)},n}function Gw(t,e,n){n=Di(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){op(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){op(t,e),typeof i!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function iy(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new GS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=aC.bind(null,t,e,n),e.then(t,t))}function ry(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Di(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var ZS=qi.ReactCurrentOwner,tn=!1;function Ht(t,e,n,i){e.child=t===null?Ew(e,null,n,i):qo(e,t.child,n,i)}function oy(t,e,n,i,s){n=n.render;var o=e.ref;return Do(e,s),i=Am(t,e,n,i,o,s),n=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Ke&&n&&_m(e),e.flags|=1,Ht(t,e,i,s),e.child)}function ay(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!jm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Zw(t,e,o,i,s)):(t=Mc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(l,i)&&t.ref===e.ref)return Bi(t,e,s)}return e.flags|=1,t=Cr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Zw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ol(o,i)&&t.ref===e.ref)if(tn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Bi(t,e,s)}return ap(t,e,n,i,s)}function Kw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Ro,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Ro,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(Ro,ln),ln|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(Ro,ln),ln|=i;return Ht(t,e,s,n),e.child}function Qw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,n,i,s){var o=rn(n)?ws:Ft.current;return o=Ho(e,o),Do(e,s),n=Am(t,e,n,i,o,s),i=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Ke&&i&&_m(e),e.flags|=1,Ht(t,e,n,s),e.child)}function ly(t,e,n,i,s){if(rn(n)){var o=!0;rh(e)}else o=!1;if(Do(e,s),e.stateNode===null)Lc(t,e),$w(e,n,i),sp(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=An(p):(p=rn(n)?ws:Ft.current,p=Ho(e,p));var _=n.getDerivedStateFromProps,w=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&ny(e,l,i,p),lr=!1;var E=e.memoizedState;l.state=E,uh(e,i,l,s),d=e.memoizedState,h!==i||E!==d||nn.current||lr?(typeof _=="function"&&(rp(e,n,_,i),d=e.memoizedState),(h=lr||ty(e,n,h,i,E,d,p))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Iw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,w=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=An(d):(d=rn(n)?ws:Ft.current,d=Ho(e,d));var k=n.getDerivedStateFromProps;(_=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||E!==d)&&ny(e,l,i,d),lr=!1,E=e.memoizedState,l.state=E,uh(e,i,l,s);var z=e.memoizedState;h!==w||E!==z||nn.current||lr?(typeof k=="function"&&(rp(e,n,k,i),z=e.memoizedState),(p=lr||ty(e,n,p,i,E,z,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,z,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,z,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=z),l.props=i,l.state=z,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return lp(t,e,n,i,o,s)}function lp(t,e,n,i,s,o){Qw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&G_(e,n,!1),Bi(t,e,o);i=e.stateNode,ZS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=qo(e,t.child,null,o),e.child=qo(e,null,h,o)):Ht(t,e,h,o),e.memoizedState=i.state,s&&G_(e,n,!0),e.child}function Yw(t){var e=t.stateNode;e.pendingContext?q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q_(t,e.context,!1),Sm(t,e.containerInfo)}function uy(t,e,n,i,s){return $o(),vm(s),e.flags|=256,Ht(t,e,n,i),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xw(t,e,n){var i=e.pendingProps,s=Ye.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ye,s&1),t===null)return np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Zh(l,i,0,null),t=_s(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=cp(n),e.memoizedState=up,t):Nm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return KS(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Cr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Cr(h,o):(o=_s(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?cp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=up,i}return o=t.child,t=o.sibling,i=Cr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Nm(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pc(t,e,n,i){return i!==null&&vm(i),qo(e,t.child,null,n),t=Nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KS(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=lf(Error(J(422))),pc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Zh({mode:"visible",children:i.children},s,0,null),o=_s(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&qo(e,t.child,null,l),e.child.memoizedState=cp(l),e.memoizedState=up,o);if(!(e.mode&1))return pc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(J(419)),i=lf(o,i,void 0),pc(t,e,l,i)}if(h=(l&t.childLanes)!==0,tn||h){if(i=It,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ji(t,s),$n(i,t,s,-1))}return Fm(),i=lf(Error(J(421))),pc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lC.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,un=Er(s.nextSibling),hn=e,Ke=!0,Fn=null,t!==null&&(Tn[In++]=Li,Tn[In++]=Ni,Tn[In++]=xs,Li=t.id,Ni=t.overflow,xs=e),e=Nm(e,i.children),e.flags|=4096,e)}function cy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ip(t.return,e,n)}function uf(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Jw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ht(t,e,i.children,n),i=Ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cy(t,n,e);else if(t.tag===19)cy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(Ye,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ch(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ch(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uf(e,!0,n,null,o);break;case"together":uf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QS(t,e,n){switch(e.tag){case 3:Yw(e),$o();break;case 5:Sw(e);break;case 1:rn(e.type)&&rh(e);break;case 4:Sm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;$e(ah,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?Xw(t,e,n):($e(Ye,Ye.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Jw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ye,Ye.current),i)break;return null;case 22:case 23:return e.lanes=0,Kw(t,e,n)}return Bi(t,e,n)}var ex,hp,tx,nx;ex=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hp=function(){};tx=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ps(ui.current);var o=null;switch(n){case"input":s=Nf(t,s),i=Nf(t,i),o=[];break;case"select":s=Je({},s,{value:void 0}),i=Je({},i,{value:void 0}),o=[];break;case"textarea":s=Df(t,s),i=Df(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nh)}zf(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Pl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&qe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};nx=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ja(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function YS(t,e,n){var i=e.pendingProps;switch(ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&ih(),Ot(e),null;case 3:return i=e.stateNode,Go(),Ze(nn),Ze(Ft),Pm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(vp(Fn),Fn=null))),hp(t,e),Ot(e),null;case 5:Cm(e);var s=ps(Fl.current);if(n=e.type,t!==null&&e.stateNode!=null)tx(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Ot(e),null}if(t=ps(ui.current),dc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ai]=e,i[Vl]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(s=0;s<rl.length;s++)qe(rl[s],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":v_(i,o),qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},qe("invalid",i);break;case"textarea":x_(i,o),qe("invalid",i)}zf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&hc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&hc(i.textContent,h,t),s=["children",""+h]):Pl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&qe("scroll",i)}switch(n){case"input":ic(i),w_(i,o,!0);break;case"textarea":ic(i),E_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=nh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ai]=e,t[Vl]=i,ex(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ff(n,i),n){case"dialog":qe("cancel",t),qe("close",t),s=i;break;case"iframe":case"object":case"embed":qe("load",t),s=i;break;case"video":case"audio":for(s=0;s<rl.length;s++)qe(rl[s],t);s=i;break;case"source":qe("error",t),s=i;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=i;break;case"details":qe("toggle",t),s=i;break;case"input":v_(t,i),s=Nf(t,i),qe("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Je({},i,{value:void 0}),qe("invalid",t);break;case"textarea":x_(t,i),s=Df(t,i),qe("invalid",t);break;default:s=i}zf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?N0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&b0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&kl(t,d):typeof d=="number"&&kl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&qe("scroll",t):d!=null&&im(t,o,d,l))}switch(n){case"input":ic(t),w_(t,i,!1);break;case"textarea":ic(t),E_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Nr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Lo(t,!!i.multiple,o,!1):i.defaultValue!=null&&Lo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)nx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=ps(Fl.current),ps(ui.current),dc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ai]=e,(o=i.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:hc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ai]=e,e.stateNode=i}return Ot(e),null;case 13:if(Ze(Ye),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&un!==null&&e.mode&1&&!(e.flags&128))ww(),$o(),e.flags|=98560,o=!1;else if(o=dc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[ai]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else Fn!==null&&(vp(Fn),Fn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?mt===0&&(mt=3):Fm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Go(),hp(t,e),t===null&&Ml(e.stateNode.containerInfo),Ot(e),null;case 10:return Em(e.type._context),Ot(e),null;case 17:return rn(e.type)&&ih(),Ot(e),null;case 19:if(Ze(Ye),o=e.memoizedState,o===null)return Ot(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ja(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ch(t),l!==null){for(e.flags|=128,Ja(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>Ko&&(e.flags|=128,i=!0,Ja(o,!1),e.lanes=4194304)}else{if(!i)if(t=ch(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ke)return Ot(e),null}else 2*st()-o.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,i=!0,Ja(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Ye.current,$e(Ye,i?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return zm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ln&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function XS(t,e){switch(ym(e),e.tag){case 1:return rn(e.type)&&ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Ze(nn),Ze(Ft),Pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cm(e),null;case 13:if(Ze(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));$o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(Ye),null;case 4:return Go(),null;case 10:return Em(e.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var mc=!1,Vt=!1,JS=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function dp(t,e,n){try{n()}catch(i){nt(t,e,i)}}var hy=!1;function eC(t,e){if(Kf=Jc,t=aw(),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,w=t,E=null;t:for(;;){for(var k;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(d=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(k=w.firstChild)!==null;)E=w,w=k;for(;;){if(w===t)break t;if(E===n&&++p===s&&(h=l),E===o&&++_===i&&(d=l),(k=w.nextSibling)!==null)break;w=E,E=w.parentNode}w=k}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qf={focusedElem:t,selectionRange:n},Jc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var N=z.memoizedProps,F=z.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?N:Vn(e.type,N),F);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(H){nt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return z=hy,hy=!1,z}function _l(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&dp(e,n,o)}s=s.next}while(s!==i)}}function qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ix(t){var e=t.alternate;e!==null&&(t.alternate=null,ix(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ai],delete e[Vl],delete e[Jf],delete e[DS],delete e[VS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rx(t){return t.tag===5||t.tag===3||t.tag===4}function dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nh));else if(i!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}var Ct=null,zn=!1;function sr(t,e,n){for(n=n.child;n!==null;)sx(t,e,n),n=n.sibling}function sx(t,e,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:Vt||Ao(n,e);case 6:var i=Ct,s=zn;Ct=null,sr(t,e,n),Ct=i,zn=s,Ct!==null&&(zn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(zn?(t=Ct,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),Ll(t)):tf(Ct,n.stateNode));break;case 4:i=Ct,s=zn,Ct=n.stateNode.containerInfo,zn=!0,sr(t,e,n),Ct=i,zn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&dp(n,e,l),s=s.next}while(s!==i)}sr(t,e,n);break;case 1:if(!Vt&&(Ao(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){nt(n,e,h)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(Vt=(i=Vt)||n.memoizedState!==null,sr(t,e,n),Vt=i):sr(t,e,n);break;default:sr(t,e,n)}}function fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JS),e.forEach(function(i){var s=uC.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Ct=h.stateNode,zn=!1;break e;case 3:Ct=h.stateNode.containerInfo,zn=!0;break e;case 4:Ct=h.stateNode.containerInfo,zn=!0;break e}h=h.return}if(Ct===null)throw Error(J(160));sx(o,l,s),Ct=null,zn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){nt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ox(e,t),e=e.sibling}function ox(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ri(t),i&4){try{_l(3,t,t.return),qh(3,t)}catch(N){nt(t,t.return,N)}try{_l(5,t,t.return)}catch(N){nt(t,t.return,N)}}break;case 1:Dn(e,t),ri(t),i&512&&n!==null&&Ao(n,n.return);break;case 5:if(Dn(e,t),ri(t),i&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(N){nt(t,t.return,N)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&k0(s,o),Ff(h,l);var p=Ff(h,o);for(l=0;l<d.length;l+=2){var _=d[l],w=d[l+1];_==="style"?N0(s,w):_==="dangerouslySetInnerHTML"?b0(s,w):_==="children"?kl(s,w):im(s,_,w,p)}switch(h){case"input":Of(s,o);break;case"textarea":A0(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Lo(s,!!o.multiple,k,!1):E!==!!o.multiple&&(o.defaultValue!=null?Lo(s,!!o.multiple,o.defaultValue,!0):Lo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Vl]=o}catch(N){nt(t,t.return,N)}}break;case 6:if(Dn(e,t),ri(t),i&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(N){nt(t,t.return,N)}}break;case 3:if(Dn(e,t),ri(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(N){nt(t,t.return,N)}break;case 4:Dn(e,t),ri(t);break;case 13:Dn(e,t),ri(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Dm=st())),i&4&&fy(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(p=Vt)||_,Dn(e,t),Vt=p):Dn(e,t),ri(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(ae=t,_=t.child;_!==null;){for(w=ae=_;ae!==null;){switch(E=ae,k=E.child,E.tag){case 0:case 11:case 14:case 15:_l(4,E,E.return);break;case 1:Ao(E,E.return);var z=E.stateNode;if(typeof z.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,z.props=e.memoizedProps,z.state=e.memoizedState,z.componentWillUnmount()}catch(N){nt(i,n,N)}}break;case 5:Ao(E,E.return);break;case 22:if(E.memoizedState!==null){my(w);continue}}k!==null?(k.return=E,ae=k):my(w)}_=_.sibling}e:for(_=null,w=t;;){if(w.tag===5){if(_===null){_=w;try{s=w.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=L0("display",l))}catch(N){nt(t,t.return,N)}}}else if(w.tag===6){if(_===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(N){nt(t,t.return,N)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;_===w&&(_=null),w=w.return}_===w&&(_=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Dn(e,t),ri(t),i&4&&fy(t);break;case 21:break;default:Dn(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rx(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(kl(s,""),i.flags&=-33);var o=dy(t);mp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=dy(t);pp(t,h,l);break;default:throw Error(J(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tC(t,e,n){ae=t,ax(t)}function ax(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||mc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Vt;h=mc;var p=Vt;if(mc=l,(Vt=d)&&!p)for(ae=s;ae!==null;)l=ae,d=l.child,l.tag===22&&l.memoizedState!==null?gy(s):d!==null?(d.return=l,ae=d):gy(s);for(;o!==null;)ae=o,ax(o),o=o.sibling;ae=s,mc=h,Vt=p}py(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):py(t)}}function py(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||qh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Vt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&X_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var w=_.dehydrated;w!==null&&Ll(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Vt||e.flags&512&&fp(e)}catch(E){nt(e,e.return,E)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function my(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function gy(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qh(4,e)}catch(d){nt(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){nt(e,s,d)}}var o=e.return;try{fp(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{fp(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){ae=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ae=h;break}ae=e.return}}var nC=Math.ceil,fh=qi.ReactCurrentDispatcher,Om=qi.ReactCurrentOwner,kn=qi.ReactCurrentBatchConfig,Oe=0,It=null,ht=null,At=0,ln=0,Ro=Ur(0),mt=0,Wl=null,Ts=0,Gh=0,Mm=0,yl=null,Jt=null,Dm=0,Ko=1/0,Ri=null,ph=!1,gp=null,Ir=null,gc=!1,gr=null,mh=0,vl=0,_p=null,Nc=-1,Oc=0;function $t(){return Oe&6?st():Nc!==-1?Nc:Nc=st()}function Sr(t){return t.mode&1?Oe&2&&At!==0?At&-At:FS.transition!==null?(Oc===0&&(Oc=$0()),Oc):(t=Be,t!==0||(t=window.event,t=t===void 0?16:X0(t.type)),t):1}function $n(t,e,n,i){if(50<vl)throw vl=0,_p=null,Error(J(185));ru(t,n,i),(!(Oe&2)||t!==It)&&(t===It&&(!(Oe&2)&&(Gh|=n),mt===4&&cr(t,At)),sn(t,i),n===1&&Oe===0&&!(e.mode&1)&&(Ko=st()+500,Wh&&Wr()))}function sn(t,e){var n=t.callbackNode;FI(t,e);var i=Xc(t,t===It?At:0);if(i===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?zS(_y.bind(null,t)):_w(_y.bind(null,t)),OS(function(){!(Oe&6)&&Wr()}),n=null;else{switch(q0(i)){case 1:n=lm;break;case 4:n=W0;break;case 16:n=Yc;break;case 536870912:n=H0;break;default:n=Yc}n=mx(n,lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lx(t,e){if(Nc=-1,Oc=0,Oe&6)throw Error(J(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var i=Xc(t,t===It?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=gh(t,i);else{e=i;var s=Oe;Oe|=2;var o=cx();(It!==t||At!==e)&&(Ri=null,Ko=st()+500,gs(t,e));do try{sC();break}catch(h){ux(t,h)}while(!0);xm(),fh.current=o,Oe=s,ht!==null?e=0:(It=null,At=0,e=mt)}if(e!==0){if(e===2&&(s=Hf(t),s!==0&&(i=s,e=yp(t,s))),e===1)throw n=Wl,gs(t,0),cr(t,i),sn(t,st()),n;if(e===6)cr(t,i);else{if(s=t.current.alternate,!(i&30)&&!iC(s)&&(e=gh(t,i),e===2&&(o=Hf(t),o!==0&&(i=o,e=yp(t,o))),e===1))throw n=Wl,gs(t,0),cr(t,i),sn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:cs(t,Jt,Ri);break;case 3:if(cr(t,i),(i&130023424)===i&&(e=Dm+500-st(),10<e)){if(Xc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xf(cs.bind(null,t,Jt,Ri),e);break}cs(t,Jt,Ri);break;case 4:if(cr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Hn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nC(i/1960))-i,10<i){t.timeoutHandle=Xf(cs.bind(null,t,Jt,Ri),i);break}cs(t,Jt,Ri);break;case 5:cs(t,Jt,Ri);break;default:throw Error(J(329))}}}return sn(t,st()),t.callbackNode===n?lx.bind(null,t):null}function yp(t,e){var n=yl;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=gh(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&vp(e)),t}function vp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function iC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Gn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~Mm,e&=~Gh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),i=1<<n;t[n]=-1,e&=~i}}function _y(t){if(Oe&6)throw Error(J(327));Vo();var e=Xc(t,0);if(!(e&1))return sn(t,st()),null;var n=gh(t,e);if(t.tag!==0&&n===2){var i=Hf(t);i!==0&&(e=i,n=yp(t,i))}if(n===1)throw n=Wl,gs(t,0),cr(t,e),sn(t,st()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Jt,Ri),sn(t,st()),null}function Vm(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Ko=st()+500,Wh&&Wr())}}function Is(t){gr!==null&&gr.tag===0&&!(Oe&6)&&Vo();var e=Oe;Oe|=1;var n=kn.transition,i=Be;try{if(kn.transition=null,Be=1,t)return t()}finally{Be=i,kn.transition=n,Oe=e,!(Oe&6)&&Wr()}}function zm(){ln=Ro.current,Ze(Ro)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NS(n)),ht!==null)for(n=ht.return;n!==null;){var i=n;switch(ym(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ih();break;case 3:Go(),Ze(nn),Ze(Ft),Pm();break;case 5:Cm(i);break;case 4:Go();break;case 13:Ze(Ye);break;case 19:Ze(Ye);break;case 10:Em(i.type._context);break;case 22:case 23:zm()}n=n.return}if(It=t,ht=t=Cr(t.current,null),At=ln=e,mt=0,Wl=null,Mm=Gh=Ts=0,Jt=yl=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}fs=null}return t}function ux(t,e){do{var n=ht;try{if(xm(),Rc.current=dh,hh){for(var i=Xe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}hh=!1}if(Es=0,Tt=pt=Xe=null,gl=!1,jl=0,Om.current=null,n===null||n.return===null){mt=1,Wl=e,ht=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,w=_.tag;if(!(_.mode&1)&&(w===0||w===11||w===15)){var E=_.alternate;E?(_.updateQueue=E.updateQueue,_.memoizedState=E.memoizedState,_.lanes=E.lanes):(_.updateQueue=null,_.memoizedState=null)}var k=ry(l);if(k!==null){k.flags&=-257,sy(k,l,h,o,e),k.mode&1&&iy(o,p,e),e=k,d=p;var z=e.updateQueue;if(z===null){var N=new Set;N.add(d),e.updateQueue=N}else z.add(d);break e}else{if(!(e&1)){iy(o,p,e),Fm();break e}d=Error(J(426))}}else if(Ke&&h.mode&1){var F=ry(l);if(F!==null){!(F.flags&65536)&&(F.flags|=256),sy(F,l,h,o,e),vm(Zo(d,h));break e}}o=d=Zo(d,h),mt!==4&&(mt=2),yl===null?yl=[o]:yl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=qw(o,d,e);Y_(o,A);break e;case 1:h=d;var T=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ir===null||!Ir.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=Gw(o,h,e);Y_(o,H);break e}}o=o.return}while(o!==null)}dx(n)}catch(Y){e=Y,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function cx(){var t=fh.current;return fh.current=dh,t===null?dh:t}function Fm(){(mt===0||mt===3||mt===2)&&(mt=4),It===null||!(Ts&268435455)&&!(Gh&268435455)||cr(It,At)}function gh(t,e){var n=Oe;Oe|=2;var i=cx();(It!==t||At!==e)&&(Ri=null,gs(t,e));do try{rC();break}catch(s){ux(t,s)}while(!0);if(xm(),Oe=n,fh.current=i,ht!==null)throw Error(J(261));return It=null,At=0,mt}function rC(){for(;ht!==null;)hx(ht)}function sC(){for(;ht!==null&&!RI();)hx(ht)}function hx(t){var e=px(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?dx(t):ht=e,Om.current=null}function dx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XS(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=YS(n,e,ln),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function cs(t,e,n){var i=Be,s=kn.transition;try{kn.transition=null,Be=1,oC(t,e,n,i)}finally{kn.transition=s,Be=i}return null}function oC(t,e,n,i){do Vo();while(gr!==null);if(Oe&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(jI(t,o),t===It&&(ht=It=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,mx(Yc,function(){return Vo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var l=Be;Be=1;var h=Oe;Oe|=4,Om.current=null,eC(t,n),ox(n,t),CS(Qf),Jc=!!Kf,Qf=Kf=null,t.current=n,tC(n),bI(),Oe=h,Be=l,kn.transition=o}else t.current=n;if(gc&&(gc=!1,gr=t,mh=s),o=t.pendingLanes,o===0&&(Ir=null),OI(n.stateNode),sn(t,st()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(ph)throw ph=!1,t=gp,gp=null,t;return mh&1&&t.tag!==0&&Vo(),o=t.pendingLanes,o&1?t===_p?vl++:(vl=0,_p=t):vl=0,Wr(),null}function Vo(){if(gr!==null){var t=q0(mh),e=kn.transition,n=Be;try{if(kn.transition=null,Be=16>t?16:t,gr===null)var i=!1;else{if(t=gr,gr=null,mh=0,Oe&6)throw Error(J(331));var s=Oe;for(Oe|=4,ae=t.current;ae!==null;){var o=ae,l=o.child;if(ae.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(ae=p;ae!==null;){var _=ae;switch(_.tag){case 0:case 11:case 15:_l(8,_,o)}var w=_.child;if(w!==null)w.return=_,ae=w;else for(;ae!==null;){_=ae;var E=_.sibling,k=_.return;if(ix(_),_===p){ae=null;break}if(E!==null){E.return=k,ae=E;break}ae=k}}}var z=o.alternate;if(z!==null){var N=z.child;if(N!==null){z.child=null;do{var F=N.sibling;N.sibling=null,N=F}while(N!==null)}}ae=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ae=l;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_l(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,ae=A;break e}ae=o.return}}var T=t.current;for(ae=T;ae!==null;){l=ae;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ae=O;else e:for(l=T;ae!==null;){if(h=ae,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:qh(9,h)}}catch(Y){nt(h,h.return,Y)}if(h===l){ae=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ae=H;break e}ae=h.return}}if(Oe=s,Wr(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(zh,t)}catch{}i=!0}return i}finally{Be=n,kn.transition=e}}return!1}function yy(t,e,n){e=Zo(n,e),e=qw(t,e,1),t=Tr(t,e,1),e=$t(),t!==null&&(ru(t,1,e),sn(t,e))}function nt(t,e,n){if(t.tag===3)yy(t,t,n);else for(;e!==null;){if(e.tag===3){yy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ir===null||!Ir.has(i))){t=Zo(n,t),t=Gw(e,t,1),e=Tr(e,t,1),t=$t(),e!==null&&(ru(e,1,t),sn(e,t));break}}e=e.return}}function aC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>st()-Dm?gs(t,0):Mm|=n),sn(t,e)}function fx(t,e){e===0&&(t.mode&1?(e=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):e=1);var n=$t();t=ji(t,e),t!==null&&(ru(t,e,n),sn(t,n))}function lC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fx(t,n)}function uC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),fx(t,n)}var px;px=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,QS(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ke&&e.flags&1048576&&yw(e,oh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lc(t,e),t=e.pendingProps;var s=Ho(e,Ft.current);Do(e,n),s=Am(null,e,i,t,s,n);var o=Rm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(i)?(o=!0,rh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Im(e),s.updater=$h,e.stateNode=s,s._reactInternals=e,sp(e,i,t,n),e=lp(null,e,i,!0,o,n)):(e.tag=0,Ke&&o&&_m(e),Ht(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Lc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=hC(i),t=Vn(i,t),s){case 0:e=ap(null,e,i,t,n);break e;case 1:e=ly(null,e,i,t,n);break e;case 11:e=oy(null,e,i,t,n);break e;case 14:e=ay(null,e,i,Vn(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),ap(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),ly(t,e,i,s,n);case 3:e:{if(Yw(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Iw(t,e),uh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Zo(Error(J(423)),e),e=uy(t,e,i,n,s);break e}else if(i!==s){s=Zo(Error(J(424)),e),e=uy(t,e,i,n,s);break e}else for(un=Er(e.stateNode.containerInfo.firstChild),hn=e,Ke=!0,Fn=null,n=Ew(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),i===s){e=Bi(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return Sw(e),t===null&&np(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Yf(i,s)?l=null:o!==null&&Yf(i,o)&&(e.flags|=32),Qw(t,e),Ht(t,e,l,n),e.child;case 6:return t===null&&np(e),null;case 13:return Xw(t,e,n);case 4:return Sm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=qo(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),oy(t,e,i,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,$e(ah,i._currentValue),i._currentValue=l,o!==null)if(Gn(o.value,l)){if(o.children===s.children&&!nn.current){e=Bi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Di(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ip(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(J(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ip(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Do(e,n),s=An(s),i=i(s),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,s=Vn(i,e.pendingProps),s=Vn(i.type,s),ay(t,e,i,s,n);case 15:return Zw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),Lc(t,e),e.tag=1,rn(i)?(t=!0,rh(e)):t=!1,Do(e,n),$w(e,i,s),sp(e,i,s,n),lp(null,e,i,!0,t,n);case 19:return Jw(t,e,n);case 22:return Kw(t,e,n)}throw Error(J(156,e.tag))};function mx(t,e){return U0(t,e)}function cC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,i){return new cC(t,e,n,i)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hC(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sm)return 11;if(t===om)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")jm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case wo:return _s(n.children,s,o,e);case rm:l=8,s|=8;break;case Af:return t=Pn(12,n,e,s|2),t.elementType=Af,t.lanes=o,t;case Rf:return t=Pn(13,n,e,s),t.elementType=Rf,t.lanes=o,t;case bf:return t=Pn(19,n,e,s),t.elementType=bf,t.lanes=o,t;case S0:return Zh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:l=10;break e;case I0:l=9;break e;case sm:l=11;break e;case om:l=14;break e;case ar:l=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Pn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function _s(t,e,n,i){return t=Pn(7,t,i,e),t.lanes=n,t}function Zh(t,e,n,i){return t=Pn(22,t,i,e),t.elementType=S0,t.lanes=n,t.stateNode={isHidden:!1},t}function cf(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function hf(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dC(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(t,e,n,i,s,o,l,h,d){return t=new dC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(o),t}function fC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function gx(t){if(!t)return Or;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(rn(n))return gw(t,n,e)}return e}function _x(t,e,n,i,s,o,l,h,d){return t=Bm(n,i,!0,t,s,o,l,h,d),t.context=gx(null),n=t.current,i=$t(),s=Sr(n),o=Di(i,s),o.callback=e??null,Tr(n,o,s),t.current.lanes=s,ru(t,s,i),sn(t,i),t}function Kh(t,e,n,i){var s=e.current,o=$t(),l=Sr(s);return n=gx(n),e.context===null?e.context=n:e.pendingContext=n,e=Di(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Tr(s,e,l),t!==null&&($n(t,s,l,o),Ac(t,s,l)),l}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Um(t,e){vy(t,e),(t=t.alternate)&&vy(t,e)}function pC(){return null}var yx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wm(t){this._internalRoot=t}Qh.prototype.render=Wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Kh(t,e,null,null)};Qh.prototype.unmount=Wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Kh(null,t,null,null)}),e[Fi]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=K0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&Y0(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wy(){}function mC(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=_h(l);o.call(p)}}var l=_x(e,i,t,0,null,!1,!1,"",wy);return t._reactRootContainer=l,t[Fi]=l.current,Ml(t.nodeType===8?t.parentNode:t),Is(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=_h(d);h.call(p)}}var d=Bm(t,0,!1,null,null,!1,!1,"",wy);return t._reactRootContainer=d,t[Fi]=d.current,Ml(t.nodeType===8?t.parentNode:t),Is(function(){Kh(e,d,n,i)}),d}function Xh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=_h(l);h.call(d)}}Kh(e,l,t,s)}else l=mC(n,e,t,s,i);return _h(l)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(um(e,n|1),sn(e,st()),!(Oe&6)&&(Ko=st()+500,Wr()))}break;case 13:Is(function(){var i=ji(t,1);if(i!==null){var s=$t();$n(i,t,1,s)}}),Um(t,1)}};cm=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var n=$t();$n(e,t,134217728,n)}Um(t,134217728)}};Z0=function(t){if(t.tag===13){var e=Sr(t),n=ji(t,e);if(n!==null){var i=$t();$n(n,t,e,i)}Um(t,e)}};K0=function(){return Be};Q0=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Bf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Uh(i);if(!s)throw Error(J(90));P0(i),Of(i,s)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};D0=Vm;V0=Is;var gC={usingClientEntryPoint:!1,Events:[ou,Io,Uh,O0,M0,Vm]},el={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_C={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j0(t),t===null?null:t.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||pC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{zh=_c.inject(_C),li=_c}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(J(200));return fC(t,e,null,n)};fn.createRoot=function(t,e){if(!Hm(t))throw Error(J(299));var n=!1,i="",s=yx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bm(t,1,!1,null,null,n,!1,i,s),t[Fi]=e.current,Ml(t.nodeType===8?t.parentNode:t),new Wm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=j0(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return Is(t)};fn.hydrate=function(t,e,n){if(!Yh(e))throw Error(J(200));return Xh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=yx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=_x(e,null,t,1,n??null,s,!1,o,l),t[Fi]=e.current,Ml(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qh(e)};fn.render=function(t,e,n){if(!Yh(e))throw Error(J(200));return Xh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Yh(t))throw Error(J(40));return t._reactRootContainer?(Is(function(){Xh(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};fn.unstable_batchedUpdates=Vm;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Yh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Xh(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function vx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vx)}catch(t){console.error(t)}}vx(),v0.exports=fn;var wx=v0.exports,xy=wx;Pf.createRoot=xy.createRoot,Pf.hydrateRoot=xy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hl.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const Ey="popstate";function yC(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return wp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Ex(s)}return wC(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vC(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function wp(t,e,n,i){return n===void 0&&(n=null),Hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?aa(e):e,{state:n,key:e&&e.key||i||vC()})}function Ex(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function aa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function wC(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=_r.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(Hl({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function w(){h=_r.Pop;let F=_(),A=F==null?null:F-p;p=F,d&&d({action:h,location:N.location,delta:A})}function E(F,A){h=_r.Push;let T=wp(N.location,F,A);p=_()+1;let O=Ty(T,p),H=N.createHref(T);try{l.pushState(O,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(H)}o&&d&&d({action:h,location:N.location,delta:1})}function k(F,A){h=_r.Replace;let T=wp(N.location,F,A);p=_();let O=Ty(T,p),H=N.createHref(T);l.replaceState(O,"",H),o&&d&&d({action:h,location:N.location,delta:0})}function z(F){let A=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof F=="string"?F:Ex(F);return T=T.replace(/ $/,"%20"),gt(A,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,A)}let N={get action(){return h},get location(){return t(s,l)},listen(F){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ey,w),d=F,()=>{s.removeEventListener(Ey,w),d=null}},createHref(F){return e(s,F)},createURL:z,encodeLocation(F){let A=z(F);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:E,replace:k,go(F){return l.go(F)}};return N}var Iy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iy||(Iy={}));function xC(t,e,n){return n===void 0&&(n="/"),EC(t,e,n)}function EC(t,e,n,i){let s=typeof e=="string"?aa(e):e,o=Sx(s.pathname||"/",n);if(o==null)return null;let l=Tx(t);TC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=MC(o);h=LC(l[d],p)}return h}function Tx(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(gt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=ys([i,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Tx(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:RC(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of Ix(o.path))s(o,l,d)}),e}function Ix(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=Ix(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function TC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const IC=/^:[\w-]+$/,SC=3,CC=2,PC=1,kC=10,AC=-2,Sy=t=>t==="*";function RC(t,e){let n=t.split("/"),i=n.length;return n.some(Sy)&&(i+=AC),e&&(i+=CC),n.filter(s=>!Sy(s)).reduce((s,o)=>s+(IC.test(o)?SC:o===""?PC:kC),i)}function bC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function LC(t,e,n){let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",w=NC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),E=d.route;if(!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:ys([o,w.pathname]),pathnameBase:BC(ys([o,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(o=ys([o,w.pathnameBase]))}return l}function NC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=OC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,_,w)=>{let{paramName:E,isOptional:k}=_;if(E==="*"){let N=h[w]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const z=h[w];return k&&!z?p[E]=void 0:p[E]=(z||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function OC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function MC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function DC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?aa(t):t;return{pathname:n?n.startsWith("/")?n:VC(n,e):e,search:UC(i),hash:WC(s)}}function VC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function df(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FC(t,e){let n=zC(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function jC(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=aa(t):(s=Hl({},t),gt(!s.pathname||!s.pathname.includes("?"),df("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),df("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),df("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let w=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),w-=1;s.pathname=E.join("/")}h=w>=0?e[w]:"/"}let d=DC(s,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),BC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Cx=["post","put","patch","delete"];new Set(Cx);const $C=["get",...Cx];new Set($C);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$l.apply(this,arguments)}const $m=q.createContext(null),qC=q.createContext(null),Jh=q.createContext(null),ed=q.createContext(null),Ls=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Px=q.createContext(null);function td(){return q.useContext(ed)!=null}function kx(){return td()||gt(!1),q.useContext(ed).location}function Ax(t){q.useContext(Jh).static||q.useLayoutEffect(t)}function lu(){let{isDataRoute:t}=q.useContext(Ls);return t?sP():GC()}function GC(){td()||gt(!1);let t=q.useContext($m),{basename:e,future:n,navigator:i}=q.useContext(Jh),{matches:s}=q.useContext(Ls),{pathname:o}=kx(),l=JSON.stringify(FC(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return Ax(()=>{h.current=!0}),q.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let w=jC(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ys([e,w.pathname])),(_.replace?i.replace:i.push)(w,_.state,_)},[e,i,l,o,t])}function qm(){let{matches:t}=q.useContext(Ls),e=t[t.length-1];return e?e.params:{}}function ZC(t,e){return KC(t,e)}function KC(t,e,n,i){td()||gt(!1);let{navigator:s}=q.useContext(Jh),{matches:o}=q.useContext(Ls),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=kx(),_;if(e){var w;let F=typeof e=="string"?aa(e):e;d==="/"||(w=F.pathname)!=null&&w.startsWith(d)||gt(!1),_=F}else _=p;let E=_.pathname||"/",k=E;if(d!=="/"){let F=d.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(F.length).join("/")}let z=xC(t,{pathname:k}),N=eP(z&&z.map(F=>Object.assign({},F,{params:Object.assign({},h,F.params),pathname:ys([d,s.encodeLocation?s.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?d:ys([d,s.encodeLocation?s.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),o,n,i);return e&&N?q.createElement(ed.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:_r.Pop}},N):N}function QC(){let t=rP(),e=HC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,null)}const YC=q.createElement(QC,null);class XC extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Ls.Provider,{value:this.props.routeContext},q.createElement(Px.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JC(t){let{routeContext:e,match:n,children:i}=t,s=q.useContext($m);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Ls.Provider,{value:e},i)}function eP(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let _=l.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);_>=0||gt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=_),w.route.id){let{loaderData:E,errors:k}=n,z=w.route.loader&&E[w.route.id]===void 0&&(!k||k[w.route.id]===void 0);if(w.route.lazy||z){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,w,E)=>{let k,z=!1,N=null,F=null;n&&(k=h&&w.route.id?h[w.route.id]:void 0,N=w.route.errorElement||YC,d&&(p<0&&E===0?(oP("route-fallback"),z=!0,F=null):p===E&&(z=!0,F=w.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,E+1)),T=()=>{let O;return k?O=N:z?O=F:w.route.Component?O=q.createElement(w.route.Component,null):w.route.element?O=w.route.element:O=_,q.createElement(JC,{match:w,routeContext:{outlet:_,matches:A,isDataRoute:n!=null},children:O})};return n&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?q.createElement(XC,{location:n.location,revalidation:n.revalidation,component:N,error:k,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):T()},null)}var Rx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Rx||{}),bx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bx||{});function tP(t){let e=q.useContext($m);return e||gt(!1),e}function nP(t){let e=q.useContext(qC);return e||gt(!1),e}function iP(t){let e=q.useContext(Ls);return e||gt(!1),e}function Lx(t){let e=iP(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function rP(){var t;let e=q.useContext(Px),n=nP(),i=Lx();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function sP(){let{router:t}=tP(Rx.UseNavigateStable),e=Lx(bx.UseNavigateStable),n=q.useRef(!1);return Ax(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$l({fromRouteId:e},o)))},[t,e])}const Cy={};function oP(t,e,n){Cy[t]||(Cy[t]=!0)}function aP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function po(t){gt(!1)}function lP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=_r.Pop,navigator:o,static:l=!1,future:h}=t;td()&&gt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:$l({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=aa(i));let{pathname:_="/",search:w="",hash:E="",state:k=null,key:z="default"}=i,N=q.useMemo(()=>{let F=Sx(_,d);return F==null?null:{location:{pathname:F,search:w,hash:E,state:k,key:z},navigationType:s}},[d,_,w,E,k,z,s]);return N==null?null:q.createElement(Jh.Provider,{value:p},q.createElement(ed.Provider,{children:n,value:N}))}function uP(t){let{children:e,location:n}=t;return ZC(xp(e),n)}new Promise(()=>{});function xp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(i,s)=>{if(!q.isValidElement(i))return;let o=[...e,s];if(i.type===q.Fragment){n.push.apply(n,xp(i.props.children,o));return}i.type!==po&&gt(!1),!i.props.index||!i.props.children||gt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=xp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const cP="6";try{window.__reactRouterVersion=cP}catch{}const hP="startTransition",Py=aI[hP];function dP(t){let{basename:e,children:n,future:i,window:s}=t,o=q.useRef();o.current==null&&(o.current=yC({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},_=q.useCallback(w=>{p&&Py?Py(()=>d(w)):d(w)},[d,p]);return q.useLayoutEffect(()=>l.listen(_),[l,_]),q.useEffect(()=>aP(i),[i]),q.createElement(lP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ky||(ky={}));var Ay;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ay||(Ay={}));const fP=()=>{};var Ry={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ox={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,_=o>>2,w=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,k=p&63;d||(k=64,l||(E=64)),i.push(n[_],n[w],n[E],n[k])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||w==null)throw new mP;const E=o<<2|h>>4;if(i.push(E),p!==64){const k=h<<4&240|p>>2;if(i.push(k),w!==64){const z=p<<6&192|w;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gP=function(t){const e=Nx(t);return Ox.encodeByteArray(e,!0)},yh=function(t){return gP(t).replace(/\./g,"")},Mx=function(t){try{return Ox.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=()=>_P().__FIREBASE_DEFAULTS__,vP=()=>{if(typeof process>"u"||typeof Ry>"u")return;const t=Ry.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mx(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return fP()||yP()||vP()||wP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Dx=t=>{var e,n;return(n=(e=nd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},xP=t=>{const e=Dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Vx=()=>{var t;return(t=nd())==null?void 0:t.config},zx=t=>{var e;return(e=nd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yh(JSON.stringify(n)),yh(JSON.stringify(l)),""].join(".")}const wl={};function IP(){const t={prod:[],emulator:[]};for(const e of Object.keys(wl))wl[e]?t.emulator.push(e):t.prod.push(e);return t}function SP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let by=!1;function jx(t,e){if(typeof window>"u"||typeof document>"u"||!la(window.location.host)||wl[t]===e||wl[t]||by)return;wl[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=IP().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,k){E.setAttribute("width","24"),E.setAttribute("id",k),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{by=!0,l()},E}function _(E,k){E.setAttribute("id",k),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=SP(i),k=n("text"),z=document.getElementById(k)||document.createElement("span"),N=n("learnmore"),F=document.getElementById(N)||document.createElement("a"),A=n("preprendIcon"),T=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const O=E.element;h(O),_(F,N);const H=p();d(T,A),O.append(T,z,F,H),document.body.appendChild(O)}o?(z.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function PP(){var e;const t=(e=nd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bP(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LP(){return!PP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NP(){try{return typeof indexedDB=="object"}catch{return!1}}function OP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="FirebaseError";class Gi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=MP,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?DP(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Gi(s,h,i)}}function DP(t,e){return t.replace(VP,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const VP=/\{\$([^}]+)}/g;function zP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Ly(o)&&Ly(l)){if(!Ss(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ol(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FP(t,e){const n=new jP(t,e);return n.subscribe.bind(n)}class jP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");BP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new EP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(t){return t===hs?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const qP={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},GP=Pe.INFO,ZP={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},KP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=ZP[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=GP,this._logHandler=KP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const QP=(t,e)=>e.some(n=>t instanceof n);let Ny,Oy;function YP(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XP(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bx=new WeakMap,Ep=new WeakMap,Ux=new WeakMap,pf=new WeakMap,Zm=new WeakMap;function JP(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Bx.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function ek(t){if(Ep.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ep.set(t,e)}let Tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ux.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tk(t){Tp=t(Tp)}function nk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(mf(this),e,...n);return Ux.set(i,e.sort?e.sort():[e]),Pr(i)}:XP().includes(t)?function(...e){return t.apply(mf(this),e),Pr(Bx.get(this))}:function(...e){return Pr(t.apply(mf(this),e))}}function ik(t){return typeof t=="function"?nk(t):(t instanceof IDBTransaction&&ek(t),QP(t,YP())?new Proxy(t,Tp):t)}function Pr(t){if(t instanceof IDBRequest)return JP(t);if(pf.has(t))return pf.get(t);const e=ik(t);return e!==t&&(pf.set(t,e),Zm.set(e,t)),e}const mf=t=>Zm.get(t);function rk(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Pr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Pr(l.result),d.oldVersion,d.newVersion,Pr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const sk=["get","getKey","getAll","getAllKeys","count"],ok=["put","add","delete","clear"],gf=new Map;function My(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=ok.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||sk.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return gf.set(e,o),o}tk(t=>({...t,get:(e,n,i)=>My(e,n)||t.get(e,n,i),has:(e,n)=>!!My(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",Dy="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Gm("@firebase/app"),uk="@firebase/app-compat",ck="@firebase/analytics-compat",hk="@firebase/analytics",dk="@firebase/app-check-compat",fk="@firebase/app-check",pk="@firebase/auth",mk="@firebase/auth-compat",gk="@firebase/database",_k="@firebase/data-connect",yk="@firebase/database-compat",vk="@firebase/functions",wk="@firebase/functions-compat",xk="@firebase/installations",Ek="@firebase/installations-compat",Tk="@firebase/messaging",Ik="@firebase/messaging-compat",Sk="@firebase/performance",Ck="@firebase/performance-compat",Pk="@firebase/remote-config",kk="@firebase/remote-config-compat",Ak="@firebase/storage",Rk="@firebase/storage-compat",bk="@firebase/firestore",Lk="@firebase/ai",Nk="@firebase/firestore-compat",Ok="firebase",Mk="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",Dk={[Ip]:"fire-core",[uk]:"fire-core-compat",[hk]:"fire-analytics",[ck]:"fire-analytics-compat",[fk]:"fire-app-check",[dk]:"fire-app-check-compat",[pk]:"fire-auth",[mk]:"fire-auth-compat",[gk]:"fire-rtdb",[_k]:"fire-data-connect",[yk]:"fire-rtdb-compat",[vk]:"fire-fn",[wk]:"fire-fn-compat",[xk]:"fire-iid",[Ek]:"fire-iid-compat",[Tk]:"fire-fcm",[Ik]:"fire-fcm-compat",[Sk]:"fire-perf",[Ck]:"fire-perf-compat",[Pk]:"fire-rc",[kk]:"fire-rc-compat",[Ak]:"fire-gcs",[Rk]:"fire-gcs-compat",[bk]:"fire-fst",[Nk]:"fire-fst-compat",[Lk]:"fire-vertex","fire-js":"fire-js",[Ok]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,Vk=new Map,Cp=new Map;function Vy(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qo(t){const e=t.name;if(Cp.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,t);for(const n of vh.values())Vy(n,t);for(const n of Vk.values())Vy(n,t);return!0}function Km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new uu("app","Firebase",zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=Mk;function Wx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Sp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=Vx()),!n)throw kr.create("no-options");const o=vh.get(s);if(o){if(Ss(n,o.options)&&Ss(i,o.config))return o;throw kr.create("duplicate-app",{appName:s})}const l=new $P(s);for(const d of Cp.values())l.addComponent(d);const h=new Fk(n,i,l);return vh.set(s,h),h}function Hx(t=Sp){const e=vh.get(t);if(!e&&t===Sp&&Vx())return Wx();if(!e)throw kr.create("no-app",{appName:t});return e}function Ar(t,e,n){let i=Dk[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(l.join(" "));return}Qo(new Cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="firebase-heartbeat-database",Bk=1,ql="firebase-heartbeat-store";let _f=null;function $x(){return _f||(_f=rk(jk,Bk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),_f}async function Uk(t){try{const n=(await $x()).transaction(ql),i=await n.objectStore(ql).get(qx(t));return await n.done,i}catch(e){if(e instanceof Gi)Ui.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function zy(t,e){try{const i=(await $x()).transaction(ql,"readwrite");await i.objectStore(ql).put(e,qx(t)),await i.done}catch(n){if(n instanceof Gi)Ui.warn(n.message);else{const i=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(i.message)}}}function qx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1024,Hk=30;class $k{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Fy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Hk){const l=Zk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fy(),{heartbeatsToSend:i,unsentEntries:s}=qk(this._heartbeatsCache.heartbeats),o=yh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ui.warn(n),""}}}function Fy(){return new Date().toISOString().substring(0,10)}function qk(t,e=Wk){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),jy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Gk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NP()?OP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jy(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}function Zk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){Qo(new Cs("platform-logger",e=>new ak(e),"PRIVATE")),Qo(new Cs("heartbeat",e=>new $k(e),"PRIVATE")),Ar(Ip,Dy,t),Ar(Ip,Dy,"esm2020"),Ar("fire-js","")}Kk("");var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,Gx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function b(){}b.prototype=S.prototype,R.F=S.prototype,R.prototype=new b,R.prototype.constructor=R,R.D=function(D,V,C){for(var P=Array(arguments.length-2),te=2;te<arguments.length;te++)P[te-2]=arguments[te];return S.prototype[V].apply(D,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,S,b){b||(b=0);const D=Array(16);if(typeof S=="string")for(var V=0;V<16;++V)D[V]=S.charCodeAt(b++)|S.charCodeAt(b++)<<8|S.charCodeAt(b++)<<16|S.charCodeAt(b++)<<24;else for(V=0;V<16;++V)D[V]=S[b++]|S[b++]<<8|S[b++]<<16|S[b++]<<24;S=R.g[0],b=R.g[1],V=R.g[2];let C=R.g[3],P;P=S+(C^b&(V^C))+D[0]+3614090360&4294967295,S=b+(P<<7&4294967295|P>>>25),P=C+(V^S&(b^V))+D[1]+3905402710&4294967295,C=S+(P<<12&4294967295|P>>>20),P=V+(b^C&(S^b))+D[2]+606105819&4294967295,V=C+(P<<17&4294967295|P>>>15),P=b+(S^V&(C^S))+D[3]+3250441966&4294967295,b=V+(P<<22&4294967295|P>>>10),P=S+(C^b&(V^C))+D[4]+4118548399&4294967295,S=b+(P<<7&4294967295|P>>>25),P=C+(V^S&(b^V))+D[5]+1200080426&4294967295,C=S+(P<<12&4294967295|P>>>20),P=V+(b^C&(S^b))+D[6]+2821735955&4294967295,V=C+(P<<17&4294967295|P>>>15),P=b+(S^V&(C^S))+D[7]+4249261313&4294967295,b=V+(P<<22&4294967295|P>>>10),P=S+(C^b&(V^C))+D[8]+1770035416&4294967295,S=b+(P<<7&4294967295|P>>>25),P=C+(V^S&(b^V))+D[9]+2336552879&4294967295,C=S+(P<<12&4294967295|P>>>20),P=V+(b^C&(S^b))+D[10]+4294925233&4294967295,V=C+(P<<17&4294967295|P>>>15),P=b+(S^V&(C^S))+D[11]+2304563134&4294967295,b=V+(P<<22&4294967295|P>>>10),P=S+(C^b&(V^C))+D[12]+1804603682&4294967295,S=b+(P<<7&4294967295|P>>>25),P=C+(V^S&(b^V))+D[13]+4254626195&4294967295,C=S+(P<<12&4294967295|P>>>20),P=V+(b^C&(S^b))+D[14]+2792965006&4294967295,V=C+(P<<17&4294967295|P>>>15),P=b+(S^V&(C^S))+D[15]+1236535329&4294967295,b=V+(P<<22&4294967295|P>>>10),P=S+(V^C&(b^V))+D[1]+4129170786&4294967295,S=b+(P<<5&4294967295|P>>>27),P=C+(b^V&(S^b))+D[6]+3225465664&4294967295,C=S+(P<<9&4294967295|P>>>23),P=V+(S^b&(C^S))+D[11]+643717713&4294967295,V=C+(P<<14&4294967295|P>>>18),P=b+(C^S&(V^C))+D[0]+3921069994&4294967295,b=V+(P<<20&4294967295|P>>>12),P=S+(V^C&(b^V))+D[5]+3593408605&4294967295,S=b+(P<<5&4294967295|P>>>27),P=C+(b^V&(S^b))+D[10]+38016083&4294967295,C=S+(P<<9&4294967295|P>>>23),P=V+(S^b&(C^S))+D[15]+3634488961&4294967295,V=C+(P<<14&4294967295|P>>>18),P=b+(C^S&(V^C))+D[4]+3889429448&4294967295,b=V+(P<<20&4294967295|P>>>12),P=S+(V^C&(b^V))+D[9]+568446438&4294967295,S=b+(P<<5&4294967295|P>>>27),P=C+(b^V&(S^b))+D[14]+3275163606&4294967295,C=S+(P<<9&4294967295|P>>>23),P=V+(S^b&(C^S))+D[3]+4107603335&4294967295,V=C+(P<<14&4294967295|P>>>18),P=b+(C^S&(V^C))+D[8]+1163531501&4294967295,b=V+(P<<20&4294967295|P>>>12),P=S+(V^C&(b^V))+D[13]+2850285829&4294967295,S=b+(P<<5&4294967295|P>>>27),P=C+(b^V&(S^b))+D[2]+4243563512&4294967295,C=S+(P<<9&4294967295|P>>>23),P=V+(S^b&(C^S))+D[7]+1735328473&4294967295,V=C+(P<<14&4294967295|P>>>18),P=b+(C^S&(V^C))+D[12]+2368359562&4294967295,b=V+(P<<20&4294967295|P>>>12),P=S+(b^V^C)+D[5]+4294588738&4294967295,S=b+(P<<4&4294967295|P>>>28),P=C+(S^b^V)+D[8]+2272392833&4294967295,C=S+(P<<11&4294967295|P>>>21),P=V+(C^S^b)+D[11]+1839030562&4294967295,V=C+(P<<16&4294967295|P>>>16),P=b+(V^C^S)+D[14]+4259657740&4294967295,b=V+(P<<23&4294967295|P>>>9),P=S+(b^V^C)+D[1]+2763975236&4294967295,S=b+(P<<4&4294967295|P>>>28),P=C+(S^b^V)+D[4]+1272893353&4294967295,C=S+(P<<11&4294967295|P>>>21),P=V+(C^S^b)+D[7]+4139469664&4294967295,V=C+(P<<16&4294967295|P>>>16),P=b+(V^C^S)+D[10]+3200236656&4294967295,b=V+(P<<23&4294967295|P>>>9),P=S+(b^V^C)+D[13]+681279174&4294967295,S=b+(P<<4&4294967295|P>>>28),P=C+(S^b^V)+D[0]+3936430074&4294967295,C=S+(P<<11&4294967295|P>>>21),P=V+(C^S^b)+D[3]+3572445317&4294967295,V=C+(P<<16&4294967295|P>>>16),P=b+(V^C^S)+D[6]+76029189&4294967295,b=V+(P<<23&4294967295|P>>>9),P=S+(b^V^C)+D[9]+3654602809&4294967295,S=b+(P<<4&4294967295|P>>>28),P=C+(S^b^V)+D[12]+3873151461&4294967295,C=S+(P<<11&4294967295|P>>>21),P=V+(C^S^b)+D[15]+530742520&4294967295,V=C+(P<<16&4294967295|P>>>16),P=b+(V^C^S)+D[2]+3299628645&4294967295,b=V+(P<<23&4294967295|P>>>9),P=S+(V^(b|~C))+D[0]+4096336452&4294967295,S=b+(P<<6&4294967295|P>>>26),P=C+(b^(S|~V))+D[7]+1126891415&4294967295,C=S+(P<<10&4294967295|P>>>22),P=V+(S^(C|~b))+D[14]+2878612391&4294967295,V=C+(P<<15&4294967295|P>>>17),P=b+(C^(V|~S))+D[5]+4237533241&4294967295,b=V+(P<<21&4294967295|P>>>11),P=S+(V^(b|~C))+D[12]+1700485571&4294967295,S=b+(P<<6&4294967295|P>>>26),P=C+(b^(S|~V))+D[3]+2399980690&4294967295,C=S+(P<<10&4294967295|P>>>22),P=V+(S^(C|~b))+D[10]+4293915773&4294967295,V=C+(P<<15&4294967295|P>>>17),P=b+(C^(V|~S))+D[1]+2240044497&4294967295,b=V+(P<<21&4294967295|P>>>11),P=S+(V^(b|~C))+D[8]+1873313359&4294967295,S=b+(P<<6&4294967295|P>>>26),P=C+(b^(S|~V))+D[15]+4264355552&4294967295,C=S+(P<<10&4294967295|P>>>22),P=V+(S^(C|~b))+D[6]+2734768916&4294967295,V=C+(P<<15&4294967295|P>>>17),P=b+(C^(V|~S))+D[13]+1309151649&4294967295,b=V+(P<<21&4294967295|P>>>11),P=S+(V^(b|~C))+D[4]+4149444226&4294967295,S=b+(P<<6&4294967295|P>>>26),P=C+(b^(S|~V))+D[11]+3174756917&4294967295,C=S+(P<<10&4294967295|P>>>22),P=V+(S^(C|~b))+D[2]+718787259&4294967295,V=C+(P<<15&4294967295|P>>>17),P=b+(C^(V|~S))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+C&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const b=S-this.blockSize,D=this.C;let V=this.h,C=0;for(;C<S;){if(V==0)for(;C<=b;)s(this,R,C),C+=this.blockSize;if(typeof R=="string"){for(;C<S;)if(D[V++]=R.charCodeAt(C++),V==this.blockSize){s(this,D),V=0;break}}else for(;C<S;)if(D[V++]=R[C++],V==this.blockSize){s(this,D),V=0;break}}this.h=V,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var b=R.length-8;b<R.length;++b)R[b]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,b=0;b<4;++b)for(let D=0;D<32;D+=8)R[S++]=this.g[b]>>>D&255;return R};function o(R,S){var b=h;return Object.prototype.hasOwnProperty.call(b,R)?b[R]:b[R]=S(R)}function l(R,S){this.h=S;const b=[];let D=!0;for(let V=R.length-1;V>=0;V--){const C=R[V]|0;D&&C==S||(b[V]=C,D=!1)}this.g=b}var h={};function d(R){return-128<=R&&R<128?o(R,function(S){return new l([S|0],S<0?-1:0)}):new l([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return F(p(-R));const S=[];let b=1;for(let D=0;R>=b;D++)S[D]=R/b|0,b*=4294967296;return new l(S,0)}function _(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return F(_(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=p(Math.pow(S,8));let D=w;for(let C=0;C<R.length;C+=8){var V=Math.min(8,R.length-C);const P=parseInt(R.substring(C,C+V),S);V<8?(V=p(Math.pow(S,V)),D=D.j(V).add(p(P))):(D=D.j(b),D=D.add(p(P)))}return D}var w=d(0),E=d(1),k=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-F(this).m();let R=0,S=1;for(let b=0;b<this.g.length;b++){const D=this.i(b);R+=(D>=0?D:4294967296+D)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(N(this))return"-"+F(this).toString(R);const S=p(Math.pow(R,6));var b=this;let D="";for(;;){const V=H(b,S).g;b=A(b,V.j(S));let C=((b.g.length>0?b.g[0]:b.h)>>>0).toString(R);if(b=V,z(b))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=A(this,R),N(R)?-1:z(R)?0:1};function F(R){const S=R.g.length,b=[];for(let D=0;D<S;D++)b[D]=~R.g[D];return new l(b,~R.h).add(E)}t.abs=function(){return N(this)?F(this):this},t.add=function(R){const S=Math.max(this.g.length,R.g.length),b=[];let D=0;for(let V=0;V<=S;V++){let C=D+(this.i(V)&65535)+(R.i(V)&65535),P=(C>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);D=P>>>16,C&=65535,P&=65535,b[V]=P<<16|C}return new l(b,b[b.length-1]&-2147483648?-1:0)};function A(R,S){return R.add(F(S))}t.j=function(R){if(z(this)||z(R))return w;if(N(this))return N(R)?F(this).j(F(R)):F(F(this).j(R));if(N(R))return F(this.j(F(R)));if(this.l(k)<0&&R.l(k)<0)return p(this.m()*R.m());const S=this.g.length+R.g.length,b=[];for(var D=0;D<2*S;D++)b[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<R.g.length;V++){const C=this.i(D)>>>16,P=this.i(D)&65535,te=R.i(V)>>>16,G=R.i(V)&65535;b[2*D+2*V]+=P*G,T(b,2*D+2*V),b[2*D+2*V+1]+=C*G,T(b,2*D+2*V+1),b[2*D+2*V+1]+=P*te,T(b,2*D+2*V+1),b[2*D+2*V+2]+=C*te,T(b,2*D+2*V+2)}for(R=0;R<S;R++)b[R]=b[2*R+1]<<16|b[2*R];for(R=S;R<2*S;R++)b[R]=0;return new l(b,0)};function T(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function O(R,S){this.g=R,this.h=S}function H(R,S){if(z(S))throw Error("division by zero");if(z(R))return new O(w,w);if(N(R))return S=H(F(R),S),new O(F(S.g),F(S.h));if(N(S))return S=H(R,F(S)),new O(F(S.g),S.h);if(R.g.length>30){if(N(R)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var b=E,D=S;D.l(R)<=0;)b=Y(b),D=Y(D);var V=ee(b,1),C=ee(D,1);for(D=ee(D,2),b=ee(b,2);!z(D);){var P=C.add(D);P.l(R)<=0&&(V=V.add(b),C=P),D=ee(D,1),b=ee(b,1)}return S=A(R,V.j(S)),new O(V,S)}for(V=w;R.l(S)>=0;){for(b=Math.max(1,Math.floor(R.m()/S.m())),D=Math.ceil(Math.log(b)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=p(b),P=C.j(S);N(P)||P.l(R)>0;)b-=D,C=p(b),P=C.j(S);z(C)&&(C=E),V=V.add(C),R=A(R,P)}return new O(V,R)}t.B=function(R){return H(this,R).h},t.and=function(R){const S=Math.max(this.g.length,R.g.length),b=[];for(let D=0;D<S;D++)b[D]=this.i(D)&R.i(D);return new l(b,this.h&R.h)},t.or=function(R){const S=Math.max(this.g.length,R.g.length),b=[];for(let D=0;D<S;D++)b[D]=this.i(D)|R.i(D);return new l(b,this.h|R.h)},t.xor=function(R){const S=Math.max(this.g.length,R.g.length),b=[];for(let D=0;D<S;D++)b[D]=this.i(D)^R.i(D);return new l(b,this.h^R.h)};function Y(R){const S=R.g.length+1,b=[];for(let D=0;D<S;D++)b[D]=R.i(D)<<1|R.i(D-1)>>>31;return new l(b,R.h)}function ee(R,S){const b=S>>5;S%=32;const D=R.g.length-b,V=[];for(let C=0;C<D;C++)V[C]=S>0?R.i(C+b)>>>S|R.i(C+b+1)<<32-S:R.i(C+b);return new l(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Gx=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Rr=l}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zx,al,Kx,Dc,Pp,Qx,Yx,Xx;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in y))break e;y=y[j]}u=u[u.length-1],I=y[u],m=m(I),m!=I&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var y=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&y.push([I,m[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){return p=d,p.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function w(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,j,U){for(var ne=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ne[_e-2]=arguments[_e];return m.prototype[j].apply(I,ne)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const m=u.length;if(m>0){const y=Array(m);for(let I=0;I<m;I++)y[I]=u[I];return y}return[]}function z(u,m){for(let I=1;I<arguments.length;I++){const j=arguments[I];var y=typeof j;if(y=y!="object"?y:j?Array.isArray(j)?"array":y:"null",y=="array"||y=="object"&&typeof j.length=="number"){y=u.length||0;const U=j.length||0;u.length=y+U;for(let ne=0;ne<U;ne++)u[y+ne]=j[ne]}else u.push(j)}}class N{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function F(u){l.setTimeout(()=>{throw u},0)}function A(){var u=R;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class T{constructor(){this.h=this.g=null}add(m,y){const I=O.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var O=new N(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,ee=!1,R=new T,S=()=>{const u=Promise.resolve(void 0);Y=()=>{u.then(b)}};function b(){for(var u;u=A();){try{u.h.call(u.g)}catch(y){F(y)}var m=O;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ee=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function te(u,m){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(te,V),te.prototype.init=function(u,m){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),ve=0;function Re(u,m,y,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=j,this.key=++ve,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,m,y){for(const I in u)m.call(y,u[I],I,u)}function X(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function he(u){const m={};for(const y in u)m[y]=u[y];return m}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ue(u,m){let y,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(y in I)u[y]=I[y];for(let U=0;U<Ee.length;U++)y=Ee[U],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,m,y,I,j){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const ne=de(u,m,I,j);return ne>-1?(m=u[ne],y||(m.fa=!1)):(m=new Re(m,this.src,U,!!I,j),m.fa=y,u.push(m)),m};function Te(u,m){const y=m.type;if(y in u.g){var I=u.g[y],j=Array.prototype.indexOf.call(I,m,void 0),U;(U=j>=0)&&Array.prototype.splice.call(I,j,1),U&&($(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function de(u,m,y,I){for(let j=0;j<u.length;++j){const U=u[j];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==I)return j}return-1}var at="closure_lm_"+(Math.random()*1e6|0),mn={};function ya(u,m,y,I,j){if(Array.isArray(m)){for(let U=0;U<m.length;U++)ya(u,m[U],y,I,j);return null}return y=Kr(y),u&&u[G]?u.J(m,y,h(I)?!!I.capture:!1,j):va(u,m,y,!1,I,j)}function va(u,m,y,I,j,U){if(!m)throw Error("Invalid event type");const ne=h(j)?!!j.capture:!!j;let _e=zs(u);if(_e||(u[at]=_e=new xe(u)),y=_e.add(m,y,I,ne,U),y.proxy)return y;if(I=wa(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)C||(j=ne),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(xu(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function wa(){function u(y){return m.call(u.src,u.listener,y)}const m=Eu;return u}function Zi(u,m,y,I,j){if(Array.isArray(m))for(var U=0;U<m.length;U++)Zi(u,m[U],y,I,j);else I=h(I)?!!I.capture:!!I,y=Kr(y),u&&u[G]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],y=de(m,y,I,j),y>-1&&($(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=de(m,y,I,j)),(y=u>-1?m[u]:null)&&Gr(y))}function Gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[G])Te(m.i,u);else{var y=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(y,I,u.capture):m.detachEvent?m.detachEvent(xu(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=zs(m))?(Te(y,u),y.h==0&&(y.src=null,m[at]=null)):$(u)}}}function xu(u){return u in mn?mn[u]:mn[u]="on"+u}function Eu(u,m){if(u.da)u=!0;else{m=new te(m,this);const y=u.listener,I=u.ha||u.src;u.fa&&Gr(u),u=y.call(I,m)}return u}function zs(u){return u=u[at],u instanceof xe?u:null}var Zr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Kr(u){return typeof u=="function"?u:(u[Zr]||(u[Zr]=function(m){return u.handleEvent(m)}),u[Zr])}function yt(){D.call(this),this.i=new xe(this),this.M=this,this.G=null}w(yt,D),yt.prototype[G]=!0,yt.prototype.removeEventListener=function(u,m,y,I){Zi(this,u,m,y,I)};function vt(u,m){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new V(m,u);else if(m instanceof V)m.target=m.target||u;else{var j=m;m=new V(I,u),Ue(m,j)}j=!0;let U,ne;if(y)for(ne=y.length-1;ne>=0;ne--)U=m.g=y[ne],j=Ki(U,I,!0,m)&&j;if(U=m.g=u,j=Ki(U,I,!0,m)&&j,j=Ki(U,I,!1,m)&&j,y)for(ne=0;ne<y.length;ne++)U=m.g=y[ne],j=Ki(U,I,!1,m)&&j}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let I=0;I<y.length;I++)$(y[I]);delete u.g[m],u.h--}}this.G=null},yt.prototype.J=function(u,m,y,I){return this.i.add(String(u),m,!1,y,I)},yt.prototype.K=function(u,m,y,I){return this.i.add(String(u),m,!0,y,I)};function Ki(u,m,y,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let U=0;U<m.length;++U){const ne=m[U];if(ne&&!ne.da&&ne.capture==y){const _e=ne.listener,De=ne.ha||ne.src;ne.fa&&Te(u.i,ne),j=_e.call(De,I)!==!1&&j}}return j&&!I.defaultPrevented}function Tu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function xa(u){u.g=Tu(()=>{u.g=null,u.i&&(u.i=!1,xa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cd extends D{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(u){D.call(this),this.h=u,this.g={}}w(Qr,D);var Fs=[];function Ea(u){ue(u.g,function(m,y){this.g.hasOwnProperty(y)&&Gr(m)},u),u.g={}}Qr.prototype.N=function(){Qr.Z.N.call(this),Ea(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=l.JSON.stringify,Pd=l.JSON.parse,Iu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Ta(){}function Su(){}var Qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yr(){V.call(this,"d")}w(Yr,V);function Bs(){V.call(this,"c")}w(Bs,V);var yi={},Yi=null;function Us(){return Yi=Yi||new yt}yi.Ia="serverreachability";function Cu(u){V.call(this,yi.Ia,u)}w(Cu,V);function Xi(u){const m=Us();vt(m,new Cu(m))}yi.STAT_EVENT="statevent";function Ia(u,m){V.call(this,yi.STAT_EVENT,u),this.stat=m}w(Ia,V);function wt(u){const m=Us();vt(m,new Ia(m,u))}yi.Ja="timingevent";function Pu(u,m){V.call(this,yi.Ja,u),this.size=m}w(Pu,V);function Xr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function kd(u,m,y,I,j,U){u.info(function(){if(u.g)if(U){var ne="",_e=U.split("&");for(let ze=0;ze<_e.length;ze++){var De=_e[ze].split("=");if(De.length>1){const it=De[0];De=De[1];const wn=it.split("_");ne=wn.length>=2&&wn[1]=="type"?ne+(it+"="+De+"&"):ne+(it+"=redacted&")}}}else ne=null;else ne=U;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+y+`
`+ne})}function Ad(u,m,y,I,j,U,ne){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+y+`
`+U+" "+ne})}function Ji(u,m,y,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Rd(u,y)+(I?" "+I:"")})}function Sa(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Rd(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var y=U[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ne=1;ne<I.length;ne++)I[ne]=""}}}}return js(U)}catch{return m}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ku={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Au;function Zt(){}w(Zt,Ta),Zt.prototype.g=function(){return new XMLHttpRequest},Au=new Zt;function le(u){return encodeURIComponent(String(u))}function Ru(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function bn(u,m,y,I){this.j=u,this.i=m,this.l=y,this.S=I||1,this.V=new Qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var Pa={},es={};function Hs(u,m,y){u.M=1,u.A=We(Bt(m)),u.u=y,u.R=!0,vi(u,null)}function vi(u,m){u.F=Date.now(),$s(u),u.B=Bt(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),Qs(y.i,"t",I),u.C=0,y=u.j.L,u.h=new Ca,u.g=Ba(u.j,y?m:null,!u.u),u.P>0&&(u.O=new Cd(p(u.Y,u,u.g),u.P)),m=u.V,y=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(Fs[0]=j.toString()),j=Fs);for(let U=0;U<j.length;U++){const ne=ya(y,j[U],I||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?he(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Xi(),kd(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const _e=Jn(this.g),De=this.g.ya(),ze=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Oa(this.g)))){this.K||_e!=4||De==7||(De==8||ze<=0?Xi(3):Xi(2)),qs(this);var m=this.g.ca();this.X=m;var y=bu(this);if(this.o=m==200,Ad(this.i,this.v,this.B,this.l,this.S,_e,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(I)){var U=I;break t}}U=null}if(u=U)Ji(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ka(this,u);else{this.o=!1,this.m=3,wt(12),gn(this),ts(this);break e}}if(this.R){u=!0;let it;for(;!this.K&&this.C<y.length;)if(it=bd(this,y),it==es){_e==4&&(this.m=4,wt(14),u=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(it==Pa){this.m=4,wt(15),Ji(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Ji(this.i,this.l,it,null),ka(this,it);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||y.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)Ji(this.i,this.l,y,"[Invalid Chunked Response]"),gn(this),ts(this);else if(y.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Fa(ne),ne.P=!0,wt(11))}}else Ji(this.i,this.l,y,null),ka(this,y);_e==4&&gn(this),this.o&&!this.K&&(_e==4?an(this.j,this):(this.o=!1,$s(this)))}else Ma(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),gn(this),ts(this)}}}catch{}finally{}};function bu(u){if(!Lu(u))return u.g.la();const m=Oa(u.g);if(m==="")return"";let y="";const I=m.length,j=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gn(u),ts(u),"";u.h.i=new l.TextDecoder}for(let U=0;U<I;U++)u.h.h=!0,y+=u.h.i.decode(m[U],{stream:!(j&&U==I-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function Lu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bd(u,m){var y=u.C,I=m.indexOf(`
`,y);return I==-1?es:(y=Number(m.substring(y,I)),isNaN(y)?Pa:(I+=1,I+y>m.length?es:(m=m.slice(I,I+y),u.C=I+y,m)))}bn.prototype.cancel=function(){this.K=!0,gn(this)};function $s(u){u.T=Date.now()+u.H,Nu(u,u.H)}function Nu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xr(p(u.aa,u),m)}function qs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Sa(this.i,this.B),this.M!=2&&(Xi(),wt(17)),gn(this),this.m=2,ts(this)):Nu(this,this.T-u)};function ts(u){u.j.I==0||u.K||an(u.j,u)}function gn(u){qs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ea(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ka(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ns(y.h,u))){if(!u.L&&ns(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)to(y),Js(y);else break e;za(y),wt(18)}}else y.xa=j[1],0<y.xa-y.K&&j[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Xr(p(y.Va,y),6e3));Du(y.h)<=1&&y.ta&&(y.ta=void 0)}else ti(y,11)}else if((u.L||y.g==u)&&to(y),!P(m))for(j=y.Ba.g.parse(m),m=0;m<j.length;m++){let ze=j[m];const it=ze[0];if(!(it<=y.K))if(y.K=it,ze=ze[1],y.I==2)if(ze[0]=="c"){y.M=ze[1],y.ba=ze[2];const wn=ze[3];wn!=null&&(y.ka=wn,y.j.info("VER="+y.ka));const On=ze[4];On!=null&&(y.za=On,y.j.info("SVER="+y.za));const xn=ze[5];xn!=null&&typeof xn=="number"&&xn>0&&(I=1.5*xn,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const ni=u.g;if(ni){const ro=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var U=I.h;U.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(wi(U,U.h),U.h=null))}if(I.G){const so=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(I.wa=so,oe(I.J,I.G,so))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var ne=u;if(I.na=ja(I,I.L?I.ba:null,I.W),ne.L){Aa(I.h,ne);var _e=ne,De=I.O;De&&(_e.H=De),_e.D&&(qs(_e),$s(_e)),I.g=ne}else Va(I);y.i.length>0&&ei(y)}else ze[0]!="stop"&&ze[0]!="close"||ti(y,7);else y.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ti(y,7):Ie(y):ze[0]!="noop"&&y.l&&y.l.qa(ze),y.A=0)}}Xi(4)}catch{}}var Ld=class{constructor(u,m){this.g=u,this.map=m}};function Ou(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Du(u){return u.h?1:u.g?u.g.size:0}function ns(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wi(u,m){u.g?u.g.add(m):u.h=m}function Aa(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ou.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ra(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return k(u.i)}var er=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function be(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let j,U=null;I>=0?(j=u[y].substring(0,I),U=u[y].substring(I+1)):j=u[y],m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Me(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Me?(this.l=u.l,_n(this,u.j),this.o=u.o,this.g=u.g,yn(this,u.u),this.h=u.h,is(this,rs(u.i)),this.m=u.m):u&&(m=String(u).match(er))?(this.l=!1,_n(this,m[1]||"",!0),this.o=xi(m[2]||""),this.g=xi(m[3]||"",!0),yn(this,m[4]),this.h=xi(m[5]||"",!0),is(this,m[6]||"",!0),this.m=xi(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}Me.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qn(m,Vu,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qn(m,Vu,!0),"@"),u.push(le(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Qn(y,y.charAt(0)=="/"?Ei:Gs,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Qn(y,Ti)),u.join("")},Me.prototype.resolve=function(u){const m=Bt(this);let y=!!u.j;y?_n(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var I=u.h;if(y)yn(m,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=m.h.lastIndexOf("/");j!=-1&&(I=m.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const U=[];for(let ne=0;ne<j.length;){const _e=j[ne++];_e=="."?I&&ne==j.length&&U.push(""):_e==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&ne==j.length&&U.push("")):(U.push(_e),I=!0)}I=U.join("/")}else I=j}return y?m.h=I:y=u.i.toString()!=="",y?is(m,rs(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Bt(u){return new Me(u)}function _n(u,m,y){u.j=y?xi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function yn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function is(u,m,y){m instanceof Ln?(u.i=m,ba(u.i,u.l)):(y||(m=Qn(m,tt)),u.i=new Ln(m,u.l))}function oe(u,m,y){u.i.set(m,y)}function We(u){return oe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Kt),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vu=/[#\/\?@]/g,Gs=/[#\?:]/g,Ei=/[#\?]/g,tt=/[#\?@]/g,Ti=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function on(u){u.g||(u.g=new Map,u.h=0,u.i&&be(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Ln.prototype,t.add=function(u,m){on(this),this.i=null,u=Yn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Zs(u,m){on(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function tr(u,m){return on(u),m=Yn(u,m),u.g.has(m)}t.forEach=function(u,m){on(this),this.g.forEach(function(y,I){y.forEach(function(j){u.call(m,j,I,this)},this)},this)};function Ks(u,m){on(u);let y=[];if(typeof m=="string")tr(u,m)&&(y=y.concat(u.g.get(Yn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return on(this),this.i=null,u=Yn(this,u),tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Ks(this,u),u.length>0?String(u[0]):m):m};function Qs(u,m,y){Zs(u,m),y.length>0&&(u.i=null,u.g.set(Yn(u,m),k(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var y=m[I];const j=le(y);y=Ks(this,y);for(let U=0;U<y.length;U++){let ne=j;y[U]!==""&&(ne+="="+le(y[U])),u.push(ne)}}return this.i=u.join("&")};function rs(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ba(u,m){m&&!u.j&&(on(u),u.i=null,u.g.forEach(function(y,I){const j=I.toLowerCase();I!=j&&(Zs(this,I),Qs(this,j,y))},u)),u.j=m}function Ys(u,m){const y=new Jr;if(l.Image){const I=new Image;I.onload=_(vn,y,"TestLoadImage: loaded",!0,m,I),I.onerror=_(vn,y,"TestLoadImage: error",!1,m,I),I.onabort=_(vn,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=_(vn,y,"TestLoadImage: timeout",!1,m,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function zu(u,m){const y=new Jr,I=new AbortController,j=setTimeout(()=>{I.abort(),vn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(U=>{clearTimeout(j),U.ok?vn(y,"TestPingServer: ok",!0,m):vn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),vn(y,"TestPingServer: error",!1,m)})}function vn(u,m,y,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(y)}catch{}}function Nd(){this.g=new Iu}function ge(u){this.i=u.Sb||null,this.h=u.ab||!1}w(ge,Ta),ge.prototype.g=function(){return new Ut(this.i,this.h)};function Ut(u,m){yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ut,yt),t=Ut.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ii(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;je(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function je(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?nr(this):Ii(this),this.readyState==3&&je(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,nr(this))},t.Na=function(u){this.g&&(this.response=u,nr(this))},t.ga=function(){this.g&&nr(this)};function nr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ii(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ii(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xs(u){let m="";return ue(u,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function ss(u,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Xs(y),typeof u=="string"?y!=null&&le(y):oe(u,m,y))}function Ve(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Ve,yt);var La=/^https?$/i,os=["POST","PUT"];t=Ve.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Au.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){lt(this,U);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)y.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())y.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),j=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(os,m,void 0)>=0)||I||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ne]of y)this.g.setRequestHeader(U,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){lt(this,U)}};function lt(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Xn(u),as(u)}function Xn(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Na(this):this.Xa())},t.Xa=function(){Na(this)};function Na(u){if(u.h&&typeof o<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=U===0){let ne=String(u.D).match(er)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),I=!La.test(ne?ne.toLowerCase():"")}y=I}if(y)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var j=Jn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Xn(u)}}finally{as(u)}}}}function as(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||vt(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pd(m)}};function Oa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ma(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(P(u[I]))continue;var y=Ru(u[I]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[j]||[];m[j]=U,U.push(y)}X(m,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Da(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ls("baseRetryDelayMs",5e3,u),this.Za=ls("retryDelaySeedMs",1e4,u),this.Ta=ls("forwardChannelMaxRetries",2,u),this.va=ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ou(u&&u.concurrentRequestLimit),this.Ba=new Nd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Da.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,I){wt(0),this.W=u,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=ja(this,null,this.W),ei(this)};function Ie(u){if(Qt(u),u.I==3){var m=u.V++,y=Bt(u.J);if(oe(y,"SID",u.M),oe(y,"RID",m),oe(y,"TYPE","terminate"),Si(u,y),m=new bn(u,u.j,m),m.M=2,m.A=We(Bt(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.A,y=!0),y||(m.g=Ba(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$s(m)}Nn(u)}function Js(u){u.g&&(Fa(u),u.g.cancel(),u.g=null)}function Qt(u){Js(u),u.v&&(l.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function ei(u){if(!Mu(u.h)&&!u.m){u.m=!0;var m=u.Ea;Y||S(),ee||(Y(),ee=!0),R.add(m,u),u.D=0}}function Fu(u,m){return Du(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xr(p(u.Ea,u,m),Uu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new bn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=he(U),Ue(U,this.U)):U=this.U),this.u!==null||this.R||(j.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Bu(this,j,m),y=Bt(this.J),oe(y,"RID",u),oe(y,"CVER",22),this.G&&oe(y,"X-HTTP-Session-Id",this.G),Si(this,y),U&&(this.R?m="headers="+le(Xs(U))+"&"+m:this.u&&ss(y,this.u,U)),wi(this.h,j),this.Ra&&oe(y,"TYPE","init"),this.S?(oe(y,"$req",m),oe(y,"SID","null"),j.U=!0,Hs(j,y,null)):Hs(j,y,m),this.I=2}}else this.I==3&&(u?ju(this,u):this.i.length==0||Mu(this.h)||ju(this))};function ju(u,m){var y;m?y=m.l:y=u.V++;const I=Bt(u.J);oe(I,"SID",u.M),oe(I,"RID",y),oe(I,"AID",u.K),Si(u,I),u.u&&u.o&&ss(I,u.u,u.o),y=new bn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Bu(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),wi(u.h,y),Hs(y,I,m)}function Si(u,m){u.H&&ue(u.H,function(y,I){oe(m,I,y)}),u.l&&ue({},function(y,I){oe(m,I,y)})}function Bu(u,m,y){y=Math.min(u.i.length,y);const I=u.l?p(u.l.Ka,u.l,u):null;e:{var j=u.i;let _e=-1;for(;;){const De=["count="+y];_e==-1?y>0?(_e=j[0].g,De.push("ofs="+_e)):_e=0:De.push("ofs="+_e);let ze=!0;for(let it=0;it<y;it++){var U=j[it].g;const wn=j[it].map;if(U-=_e,U<0)_e=Math.max(0,j[it].g-100),ze=!1;else try{U="req"+U+"_"||"";try{var ne=wn instanceof Map?wn:Object.entries(wn);for(const[On,xn]of ne){let ni=xn;h(xn)&&(ni=js(xn)),De.push(U+On+"="+encodeURIComponent(ni))}}catch(On){throw De.push(U+"type="+encodeURIComponent("_badmap")),On}}catch{I&&I(wn)}}if(ze){ne=De.join("&");break e}}ne=void 0}return u=u.i.splice(0,y),m.G=u,ne}function Va(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Y||S(),ee||(Y(),ee=!0),R.add(m,u),u.A=0}}function za(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xr(p(u.Da,u),Uu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xr(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Js(this),eo(this))};function Fa(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function eo(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Bt(u.na);oe(m,"RID","rpc"),oe(m,"SID",u.M),oe(m,"AID",u.K),oe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&oe(m,"TO",u.ia),oe(m,"TYPE","xmlhttp"),Si(u,m),u.u&&u.o&&ss(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=We(Bt(m)),y.u=null,y.R=!0,vi(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Js(this),za(this),wt(19))};function to(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function an(u,m){var y=null;if(u.g==m){to(u),Fa(u),u.g=null;var I=2}else if(ns(u.h,m))y=m.G,Aa(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;I=Us(),vt(I,new Pu(I,y)),ei(u)}else Va(u);else if(j=m.m,j==3||j==0&&m.X>0||!(I==1&&Fu(u,m)||I==2&&za(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),j){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function Uu(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function ti(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.bb,u),I=u.Ua;const j=!I;I=new Me(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_n(I,"https"),We(I),j?Ys(I.toString(),y):zu(I.toString(),y)}else wt(2);u.I=0,u.l&&u.l.pa(m),Nn(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Nn(u){if(u.I=0,u.ja=[],u.l){const m=Ra(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ja,m),z(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function ja(u,m,y){var I=y instanceof Me?Bt(y):new Me(y);if(I.g!="")m&&(I.g=m+"."+I.g),yn(I,I.u);else{var j=l.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const U=new Me(null);I&&_n(U,I),m&&(U.g=m),j&&yn(U,j),y&&(U.h=y),I=U}return y=u.G,m=u.wa,y&&m&&oe(I,y,m),oe(I,"VER",u.ka),Si(u,I),I}function Ba(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ve(new ge({ab:y})):new Ve(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function no(){}t=no.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function io(){}io.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){yt.call(this),this.g=new Da(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ir(this)}w(Lt,yt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ie(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=js(u),u=y);m.i.push(new Ld(m.Ya++,u)),m.I==3&&ei(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ie(this.g),delete this.g,Lt.Z.N.call(this)};function Ua(u){Yr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Ua,Yr);function Wu(){Bs.call(this),this.status=1}w(Wu,Bs);function ir(u){this.g=u}w(ir,no),ir.prototype.ra=function(){vt(this.g,"a")},ir.prototype.qa=function(u){vt(this.g,new Ua(u))},ir.prototype.pa=function(u){vt(this.g,new Wu)},ir.prototype.oa=function(){vt(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Xx=function(){return new io},Yx=function(){return Us()},Qx=yi,Pp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Dc=Ws,ku.COMPLETE="complete",Kx=ku,Su.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",yt.prototype.listen=yt.prototype.J,al=Su,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,Zx=Ve}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",Wy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Gm("@firebase/firestore");function mo(){return Ps.logLevel}function se(t,...e){if(Ps.logLevel<=Pe.DEBUG){const n=e.map(Qm);Ps.debug(`Firestore (${ca}): ${t}`,...n)}}function Wi(t,...e){if(Ps.logLevel<=Pe.ERROR){const n=e.map(Qm);Ps.error(`Firestore (${ca}): ${t}`,...n)}}function Yo(t,...e){if(Ps.logLevel<=Pe.WARN){const n=e.map(Qm);Ps.warn(`Firestore (${ca}): ${t}`,...n)}}function Qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Jx(t,i,n)}function Jx(t,e,n){let i=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Wi(i),new Error(i)}function Fe(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||Jx(e,s,i)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class Yk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xk{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vi)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new eE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class Jk{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Jk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nA(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function ke(t,e){return t<e?-1:t>e?1:0}function kp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return yf(s)===yf(o)?ke(s,o):yf(s)?1:-1}return ke(t.length,e.length)}const iA=55296,rA=57343;function yf(t){const e=t.charCodeAt(0);return e>=iA&&e<=rA}function Xo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="__name__";class oi{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=oi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ke(e.length,n.length)}static compareSegments(e,n){const i=oi.isNumericId(e),s=oi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?oi.extractNumericId(e).compare(oi.extractNumericId(n)):kp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class He extends oi{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const sA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends oi{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return sA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$y}static keyField(){return new kt([$y])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ie(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ie(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(He.fromString(e))}static fromName(e){return new ce(He.fromString(e).popFirst(5))}static empty(){return new ce(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){if(!n)throw new ie(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oA(t,e,n,i){if(e===!0&&i===!0)throw new ie(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qy(t){if(!ce.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(ce.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new ie(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!nE(t))throw new ie(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ie(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-62135596800,Ky=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Ky);return new Ge(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zy)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ky}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:ft("string",Ge._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ge(0,0))}static max(){return new ye(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function aA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Mr(s,ce.empty(),e)}function lA(t){return new Mr(t.readTime,t.key,Gl)}class Mr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Mr(ye.min(),ce.empty(),Gl)}static max(){return new Mr(ye.max(),ce.empty(),Gl)}}function uA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==cA)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(s=>s?K.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&i(l)},_=>s(_))}})}static doWhile(e,n){return new K((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function dA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function da(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=-1;function sd(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function fA(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="";function pA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qy(e)),e=mA(t.get(n),e);return Qy(e)}function mA(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case iE:n+="";break;default:n+=o}}return n}function Qy(t){return t+iE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Pt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xy(this.data.getIterator())}getIteratorFrom(e){return new Xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new _t(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new sE("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const gA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=gA.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="server_timestamp",aE="__type__",lE="__previous_value__",uE="__local_write_time__";function Jm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aE])==null?void 0:i.stringValue)===oE}function od(t){const e=t.mapValue.fields[lE];return Jm(e)?od(e):e}function Zl(t){const e=Dr(t.mapValue.fields[uE].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,i,s,o,l,h,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const xh="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",yA="__max__",wc={mapValue:{}},hE="__vector__",Eh="value";function zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jm(t)?4:wA(t)?9007199254740991:vA(t)?10:11:me(28295,{value:t})}function _i(t,e){if(t===e)return!0;const n=zr(t);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Dr(s.timestampValue),h=Dr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Vr(s.bytesValue).isEqual(Vr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return rt(s.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return rt(s.integerValue)===rt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=rt(s.doubleValue),h=rt(o.doubleValue);return l===h?wh(l)===wh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Yy(l)!==Yy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!_i(l[d],h[d])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Ql(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=zr(t),i=zr(e);if(n!==i)return ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=rt(o.integerValue||o.doubleValue),d=rt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Jy(t.timestampValue,e.timestampValue);case 4:return Jy(Zl(t),Zl(e));case 5:return kp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Vr(o),d=Vr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=ke(h[p],d[p]);if(_!==0)return _}return ke(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=ke(rt(o.latitude),rt(l.latitude));return h!==0?h:ke(rt(o.longitude),rt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ev(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,k,z,N;const h=o.fields||{},d=l.fields||{},p=(E=h[Eh])==null?void 0:E.arrayValue,_=(k=d[Eh])==null?void 0:k.arrayValue,w=ke(((z=p==null?void 0:p.values)==null?void 0:z.length)||0,((N=_==null?void 0:_.values)==null?void 0:N.length)||0);return w!==0?w:ev(p,_)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===wc.mapValue&&l===wc.mapValue)return 0;if(o===wc.mapValue)return 1;if(l===wc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let w=0;w<d.length&&w<_.length;++w){const E=kp(d[w],_[w]);if(E!==0)return E;const k=Jo(h[d[w]],p[_[w]]);if(k!==0)return k}return ke(d.length,_.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function Jy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Dr(t),i=Dr(e),s=ke(n.seconds,i.seconds);return s!==0?s:ke(n.nanos,i.nanos)}function ev(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Jo(n[s],i[s]);if(o)return o}return ke(n.length,i.length)}function ea(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Ap(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Ap(n.fields[l])}`;return s+"}"}(t.mapValue):me(61005,{value:t})}function Vc(t){switch(zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(t);return e?16+Vc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Vc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Hr(i.fields,(o,l)=>{s+=o.length+Vc(l)}),s}(t.mapValue);default:throw me(13486,{value:t})}}function tv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rp(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function nv(t){return!!t&&"nullValue"in t}function iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zc(t){return!!t&&"mapValue"in t}function vA(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cE])==null?void 0:i.stringValue)===hE}function xl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return{...t}}function wA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=kt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=xl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];zc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Hr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new en(xl(this.value))}}function dE(t){const e=[];return Hr(t.fields,(n,i)=>{const s=new kt([n]);if(zc(i)){const o=dE(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new zt(e,0,ye.min(),ye.min(),ye.min(),en.empty(),0)}static newFoundDocument(e,n,i,s){return new zt(e,1,n,ye.min(),i,s,0)}static newNoDocument(e,n){return new zt(e,2,n,ye.min(),ye.min(),en.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ye.min(),ye.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.position=e,this.inclusive=n}}function rv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(l.referenceValue),n.key):i=Jo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function xA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class dt extends fE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new TA(e,n,i):n==="array-contains"?new CA(e,i):n==="in"?new PA(e,i):n==="not-in"?new kA(e,i):n==="array-contains-any"?new AA(e,i):new dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new IA(e,i):new SA(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends fE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return pE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pE(t){return t.op==="and"}function mE(t){return EA(t)&&pE(t)}function EA(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function bp(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(mE(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function gE(t,e){return t instanceof dt?function(i,s){return s instanceof dt&&i.op===s.op&&i.field.isEqual(s.field)&&_i(i.value,s.value)}(t,e):t instanceof Zn?function(i,s){return s instanceof Zn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&gE(l,s.filters[h]),!0):!1}(t,e):void me(19439)}function _E(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(_E).join(" ,")+"}"}(t):"Filter"}class TA extends dt{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class IA extends dt{constructor(e,n){super(e,"in",n),this.keys=yE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SA extends dt{constructor(e,n){super(e,"not-in",n),this.keys=yE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class CA extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Ql(n.arrayValue,this.value)}}class PA extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class kA extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class AA extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function ov(t,e=null,n=[],i=[],s=null,o=null,l=null){return new RA(t,e,n,i,s,o,l)}function tg(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ea(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ea(i)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function Lp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bA(t,e,n,i,s,o,l,h){return new fa(t,e,n,i,s,o,l,h)}function ig(t){return new fa(t)}function av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vE(t){return t.collectionGroup!==null}function El(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new _t(kt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yl(o,i))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new Yl(kt.keyField(),i))}return e.Ie}function ci(t){const e=we(t);return e.Ee||(e.Ee=LA(e,El(t))),e.Ee}function LA(t,e){if(t.limitType==="F")return ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Yl(s.field,o)});const n=t.endAt?new Th(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Th(t.startAt.position,t.startAt.inclusive):null;return ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Np(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Op(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return ng(ci(t),ci(e))&&t.limitType===e.limitType}function wE(t){return`${tg(ci(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>_E(s)).join(", ")}]`),sd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${i})`}(ci(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of El(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=rv(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,El(i),s)||i.endAt&&!function(l,h,d){const p=rv(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,El(i),s))}(t,e)}function NA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xE(t){return(e,n)=>{let i=!1;for(const s of El(t)){const o=OA(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function OA(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Jo(d,p):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new et(ce.comparator);function Hi(){return MA}const EE=new et(ce.comparator);function ll(...t){let e=EE;for(const n of t)e=e.insert(n.key,n);return e}function TE(t){let e=EE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ms(){return Tl()}function IE(){return Tl()}function Tl(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const DA=new et(ce.comparator),VA=new _t(ce.comparator);function Ae(...t){let e=VA;for(const n of t)e=e.add(n);return e}const zA=new _t(ke);function FA(){return zA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function SE(t){return{integerValue:""+t}}function jA(t,e){return fA(e)?SE(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function BA(t,e,n){return t instanceof Ih?function(s,o){const l={fields:{[aE]:{stringValue:oE},[uE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jm(o)&&(o=od(o)),o&&(l.fields[lE]=o),{mapValue:l}}(n,e):t instanceof Xl?PE(t,e):t instanceof Jl?kE(t,e):function(s,o){const l=CE(s,o),h=lv(l)+lv(s.Ae);return Rp(l)&&Rp(s.Ae)?SE(h):rg(s.serializer,h)}(t,e)}function UA(t,e,n){return t instanceof Xl?PE(t,e):t instanceof Jl?kE(t,e):n}function CE(t,e){return t instanceof Sh?function(i){return Rp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ih extends ud{}class Xl extends ud{constructor(e){super(),this.elements=e}}function PE(t,e){const n=AE(e);for(const i of t.elements)n.some(s=>_i(s,i))||n.push(i);return{arrayValue:{values:n}}}class Jl extends ud{constructor(e){super(),this.elements=e}}function kE(t,e){let n=AE(e);for(const i of t.elements)n=n.filter(s=>!_i(s,i));return{arrayValue:{values:n}}}class Sh extends ud{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lv(t){return rt(t.integerValue||t.doubleValue)}function AE(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WA(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Xl&&s instanceof Xl||i instanceof Jl&&s instanceof Jl?Xo(i.elements,s.elements,_i):i instanceof Sh&&s instanceof Sh?_i(i.Ae,s.Ae):i instanceof Ih&&s instanceof Ih}(t.transform,e.transform)}class HA{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function RE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sg(t.key,qn.none()):new du(t.key,t.data,qn.none());{const n=t.data,i=en.empty();let s=new _t(kt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new $r(t.key,i,new cn(s.toArray()),qn.none())}}function $A(t,e,n){t instanceof du?function(s,o,l){const h=s.value.clone(),d=cv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,o,l){if(!Fc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=cv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(bE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,i){return t instanceof du?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=o.value.clone(),_=hv(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof $r?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=hv(o.fieldTransforms,d,l),_=l.data;return _.setAll(bE(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return Fc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function qA(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=CE(i.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(i.field,o))}return n||null}function uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Xo(i,s,(o,l)=>WA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends cd{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends cd{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function cv(t,e,n){const i=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,UA(l,h,n[s]))}return i}function hv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,BA(o,l,e))}return i}class sg extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GA extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&$A(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=IE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=RE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ye.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,i)=>uv(n,i))&&Xo(this.baseMutations,e.baseMutations,(n,i)=>uv(n,i))}}class og{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Fe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return DA}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new og(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Le;function YA(t){switch(t){case Z.OK:return me(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function LE(t){if(t===void 0)return Wi("GRPC error has no .code"),Z.UNKNOWN;switch(t){case ct.OK:return Z.OK;case ct.CANCELLED:return Z.CANCELLED;case ct.UNKNOWN:return Z.UNKNOWN;case ct.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ct.INTERNAL:return Z.INTERNAL;case ct.UNAVAILABLE:return Z.UNAVAILABLE;case ct.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ct.NOT_FOUND:return Z.NOT_FOUND;case ct.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ct.ABORTED:return Z.ABORTED;case ct.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ct.DATA_LOSS:return Z.DATA_LOSS;default:return me(39323,{code:t})}}(Le=ct||(ct={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Rr([4294967295,4294967295],0);function dv(t){const e=XA().encode(t),n=new Gx;return n.update(e),new Uint8Array(n.digest())}function fv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rr([n,i],0),new Rr([s,o],0)]}class ag{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ul(`Invalid padding: ${n}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ul(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Rr.fromNumber(i)));return s.compare(JA)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dv(e),[i,s]=fv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ag(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=dv(e),[i,s]=fv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hd(ye.min(),s,new et(ke),Hi(),Ae())}}class fu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fu(i,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class NE{constructor(e,n){this.targetId=e,this.Ce=n}}class OE{constructor(e,n,i=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class pv{constructor(){this.ve=0,this.Fe=mv(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),i=Ae();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:me(38017,{changeType:o})}}),new fu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.Je=xc(),this.He=xc(),this.Ye=new et(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Lp(o))if(i===0){const l=new ce(o.path);this.et(n,l,zt.newNoDocument(l,ye.min()))}else Fe(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Vr(i).toUint8Array()}catch(d){if(d instanceof sE)return Yo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ag(l,s,o)}catch(d){return Yo(d instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Lp(h.target)){const d=new ce(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,zt.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Ae();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new hd(e,n,this.Ye,this.je,i);return this.je=Hi(),this.Je=xc(),this.He=xc(),this.Ye=new et(ke),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xc(){return new et(ce.comparator)}function mv(){return new et(ce.comparator)}const tR={asc:"ASCENDING",desc:"DESCENDING"},nR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iR={and:"AND",or:"OR"};class rR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mp(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ME(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sR(t,e){return Ch(t,e.toTimestamp())}function hi(t){return Fe(!!t,49232),ye.fromTimestamp(function(n){const i=Dr(n);return new Ge(i.seconds,i.nanos)}(t))}function lg(t,e){return Dp(t,e).canonicalString()}function Dp(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DE(t){const e=He.fromString(t);return Fe(BE(e),10190,{key:e.toString()}),e}function Vp(t,e){return lg(t.databaseId,e.path)}function vf(t,e){const n=DE(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(zE(n))}function VE(t,e){return lg(t.databaseId,e)}function oR(t){const e=DE(t);return e.length===4?He.emptyPath():zE(e)}function zp(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zE(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gv(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function aR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(Fe(_===void 0||typeof _=="string",58123),bt.fromBase64String(_||"")):(Fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),bt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?Z.UNKNOWN:LE(p.code);return new ie(_,p.message||"")}(l);n=new OE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=vf(t,i.document.name),o=hi(i.document.updateTime),l=i.document.createTime?hi(i.document.createTime):ye.min(),h=new en({mapValue:{fields:i.document.fields}}),d=zt.newFoundDocument(s,o,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new jc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=vf(t,i.document),o=i.readTime?hi(i.readTime):ye.min(),l=zt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new jc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=vf(t,i.document),o=i.removedTargetIds||[];n=new jc([],o,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new QA(s,o),h=i.targetId;n=new NE(h,l)}}return n}function lR(t,e){let n;if(e instanceof du)n={update:gv(t,e.key,e.value)};else if(e instanceof sg)n={delete:Vp(t,e.key)};else if(e instanceof $r)n={update:gv(t,e.key,e.data),updateMask:_R(e.fieldMask)};else{if(!(e instanceof GA))return me(16599,{Vt:e.type});n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Ih)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Sh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw me(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:sR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function uR(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?hi(s.updateTime):hi(o);return l.isEqual(ye.min())&&(l=hi(o)),new HA(l,s.transformResults||[])}(n,e))):[]}function cR(t,e){return{documents:[VE(t,e.path)]}}function hR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VE(t,s);const o=function(p){if(p.length!==0)return jE(Zn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(E){return{field:_o(E.field),direction:pR(E.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Mp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function dR(t){let e=oR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Fe(i===1,65062);const _=n.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(w){const E=FE(w);return E instanceof Zn&&mE(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(E=>function(z){return new Yl(yo(z.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(w){let E;return E=typeof w=="object"?w.value:w,sd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(w){const E=!!w.before,k=w.values||[];return new Th(k,E)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const E=!w.before,k=w.values||[];return new Th(k,E)}(n.endAt)),bA(e,s,l,o,h,"F",d,p)}function fR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=yo(n.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yo(n.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=yo(n.unaryFilter.field);return dt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return dt.create(yo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(i=>FE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function pR(t){return tR[t]}function mR(t){return nR[t]}function gR(t){return iR[t]}function _o(t){return{fieldPath:t.canonicalString()}}function yo(t){return kt.fromServerFormat(t.fieldPath)}function jE(t){return t instanceof dt?function(n){if(n.op==="=="){if(iv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(nv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(nv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:mR(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const i=n.getFilters().map(s=>jE(s));return i.length===1?i[0]:{compositeFilter:{op:gR(n.op),filters:i}}}(t):me(54877,{filter:t})}function _R(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i,s,o=ye.min(),l=ye.min(),h=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.yt=e}}function vR(t){const e=dR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.Cn=new xR}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Mr.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class xR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new _t(He.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new _t(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(UE,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ta(0)}static cr(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",ER=1048576;function vv([t,e],[n,i]){const s=ke(t,n);return s===0?ke(e,i):s}class TR{constructor(e){this.Ir=e,this.buffer=new _t(vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();vv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IR{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){da(n)?se(yv,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}}class SR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(rd.ce);const i=new TR(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(_v)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(i=w,h=Date.now(),this.removeTargets(e,i,n))).next(w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(p=Date.now(),mo()<=Pe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function CR(t,e){return new SR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Il(i.mutation,s,cn.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ae()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=ll();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Hi();const l=Tl(),h=function(){return Tl()}();return n.forEach((d,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof $r)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Il(_.mutation,p,_.mutation.getFieldMask(),Ge.now())):l.set(p.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>h.set(p,new kR(_,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=Tl();let s=new et((l,h)=>l-h),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||cn.empty();_=h.applyToLocalView(p,_),i.set(d,_);const w=(s.get(h.batchId)||Ae()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,w=IE();_.forEach(E=>{if(!o.has(E)){const k=RE(n.get(E),i.get(E));k!==null&&w.set(E,k),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return K.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):K.resolve(ms());let h=Gl,d=o;return l.next(p=>K.forEach(p,(_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(_)?K.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{d=d.insert(_,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ae())).next(_=>({batchId:h,changes:TE(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let s=ll();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=ll();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(w,E){return new fa(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((w,E)=>{l=l.insert(w,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,zt.newInvalidDocument(_)))});let h=ll();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Il(_.mutation,p,cn.empty(),Ge.now()),ld(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hi(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:vR(s.bundledQuery),readTime:hi(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.overlays=new et(ce.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ms();return K.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const s=ms(),o=n.length+1,l=new ce(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new et((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=ms(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=ms(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=s)););return K.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new KA(n,i));let o=this.qr.get(n);o===void 0&&(o=Ae(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new _t(Et.$r),this.Ur=new _t(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Et(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ce(new He([])),i=new Et(n,e),s=new Et(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new He([])),i=new Et(n,e),s=new Et(n,e+1);let o=Ae();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Et(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Et.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new ZA(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Et(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _t(ke);return n.forEach(s=>{const o=new Et(s,0),l=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const l=new Et(new ce(o),0);let h=new _t(ke);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),K.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,s=>{const o=new Et(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Et(n,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.ri=e,this.docs=function(){return new et(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let i=Hi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():zt.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Hi();const l=n.path,h=new ce(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||uA(lA(_),i)<=0||(s.has(_.key)||ld(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,s){me(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new MR(this)}getSize(e){return K.resolve(this.size)}}class MR extends PR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.persistence=e,this.si=new Ns(n=>tg(n),ng),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=ta.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ta(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.ui={},this.overlays={},this.ci=new rd(0),this.li=!1,this.li=!0,this.hi=new LR,this.referenceDelegate=e(this),this.Pi=new DR(this),this.indexManager=new wR,this.remoteDocumentCache=function(s){return new OR(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new yR(n),this.Ii=new RR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new NR(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const s=new VR(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class VR extends hA{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const s=ce.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ph{constructor(e,n){this.persistence=e,this.pi=new Ns(i=>pA(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=CR(this,n)}static mi(e,n){return new Ph(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?K.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ye.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ae(),s=Ae();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new hg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return LP()?8:dA(jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new zR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(mo()<=Pe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(mo()<=Pe.DEBUG&&se("QueryEngine","Query:",go(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(mo()<=Pe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):K.resolve())}ys(e,n){if(av(n))return K.resolve(null);let i=ci(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Op(n,null,"F"),i=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ae(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Op(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,i,s){return av(n)||s.isEqual(ye.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?K.resolve(null):(mo()<=Pe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),go(n)),this.vs(e,l,n,aA(s,Gl)).next(h=>h))})}Ds(e,n){let i=new _t(xE(e));return n.forEach((s,o)=>{ld(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return mo()<=Pe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",jR=3e8;class BR{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(ke),this.xs=new Ns(o=>tg(o),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UR(t,e,n,i){return new BR(t,e,n,i)}async function HE(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ae();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function WR(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const w=p.batch,E=w.keys();let k=K.resolve();return E.forEach(z=>{k=k.next(()=>_.getEntry(d,z)).next(N=>{const F=p.docVersions.get(z);Fe(F!==null,48541),N.version.compareTo(F)<0&&(w.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),_.addEntry(N)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ae();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function $E(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function HR(t,e){const n=we(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((_,w)=>{const E=s.get(w);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,_.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(o,_.addedDocuments,w)));let k=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),s=s.insert(w,k),function(N,F,A){return N.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=jR?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(E,k,_)&&h.push(n.Pi.updateTargetData(o,k))});let d=Hi(),p=Ae();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push($R(o,l,e.documentUpdates).next(_=>{d=_.ks,p=_.qs})),!i.isEqual(ye.min())){const _=n.Pi.getLastRemoteSnapshotVersion(o).next(w=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function $R(t,e,n){let i=Ae(),s=Ae();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Hi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ye.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):se(dg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function qR(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function GR(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,K.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new yr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Fp(t,e,n){const i=we(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!da(l))throw l;se(dg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function wv(t,e,n){const i=we(t);let s=ye.min(),o=Ae();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const w=we(d),E=w.xs.get(_);return E!==void 0?K.resolve(w.Ms.get(E)):w.Pi.getTargetData(p,_)}(i,l,ci(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:ye.min(),n?o:Ae())).next(h=>(ZR(i,NA(e),h),{documents:h,Qs:o})))}function ZR(t,e,n){let i=t.Os.get(e)||ye.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class xv{constructor(){this.activeTargetIds=FA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KR{constructor(){this.Mo=new xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Tv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function jp(){return Ec===null?Ec=function(){return 268435456+Math.round(2147483648*Math.random())}():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===xh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=jp(),h=this.zo(e,n.toUriEncodedString());se(wf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),_=la(p);return this.Jo(e,h,d,i,_).then(w=>(se(wf,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Yo(wf,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",i),w})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=YR[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class eb extends XR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=jp();return new Promise((h,d)=>{const p=new Zx;p.setWithCredentials(!0),p.listenOnce(Kx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Dc.NO_ERROR:const w=p.getResponseJson();se(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Dc.TIMEOUT:se(Mt,`RPC '${e}' ${l} timed out`),d(new ie(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:const E=p.getStatus();if(se(Mt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const N=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(T)>=0?T:Z.UNKNOWN}(z.status);d(new ie(N,z.message))}else d(new ie(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ie(Z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{se(Mt,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(s);se(Mt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",_,i,15)})}T_(e,n,i){const s=jp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Xx(),h=Yx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");se(Mt,`Creating RPC '${e}' stream ${s}: ${_}`,d);const w=l.createWebChannel(_,d);this.I_(w);let E=!1,k=!1;const z=new JR({Yo:F=>{k?se(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(E||(se(Mt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),E=!0),se(Mt,`RPC '${e}' stream ${s} sending:`,F),w.send(F))},Zo:()=>w.close()}),N=(F,A,T)=>{F.listen(A,O=>{try{T(O)}catch(H){setTimeout(()=>{throw H},0)}})};return N(w,al.EventType.OPEN,()=>{k||(se(Mt,`RPC '${e}' stream ${s} transport opened.`),z.o_())}),N(w,al.EventType.CLOSE,()=>{k||(k=!0,se(Mt,`RPC '${e}' stream ${s} transport closed`),z.a_(),this.E_(w))}),N(w,al.EventType.ERROR,F=>{k||(k=!0,Yo(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,F.name,"Message:",F.message),z.a_(new ie(Z.UNAVAILABLE,"The operation could not be completed")))}),N(w,al.EventType.MESSAGE,F=>{var A;if(!k){const T=F.data[0];Fe(!!T,16349);const O=T,H=(O==null?void 0:O.error)||((A=O[0])==null?void 0:A.error);if(H){se(Mt,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let ee=function(b){const D=ct[b];if(D!==void 0)return LE(D)}(Y),R=H.message;ee===void 0&&(ee=Z.INTERNAL,R="Unknown error status: "+Y+" with message "+H.message),k=!0,z.a_(new ie(ee,R)),w.close()}else se(Mt,`RPC '${e}' stream ${s} received:`,T),z.u_(T)}}),N(h,Qx.STAT_EVENT,F=>{F.stat===Pp.PROXY?se(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Pp.NOPROXY&&se(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{z.__()},0),z}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new rR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="PersistentStream";class GE{constructor(e,n,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Wi(n.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ie(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tb extends GE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aR(this.serializer,e),i=function(o){if(!("targetChange"in o))return ye.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ye.min():l.readTime?hi(l.readTime):ye.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=zp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Lp(d)?{documents:cR(o,d)}:{query:hR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=ME(o,l.resumeToken);const p=Mp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ye.min())>0){h.readTime=Ch(o,l.snapshotVersion.toTimestamp());const p=Mp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=fR(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=zp(this.serializer),n.removeTarget=e,this.q_(n)}}class nb extends GE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uR(e.writeResults,e.commitTime),i=hi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=zp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>lR(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{}class rb extends ib{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Dp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(Z.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Dp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(Z.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wi(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class ob{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Os(this)&&(se(ks,"Restarting streams for network reachability change."),await async function(d){const p=we(d);p.Ea.add(4),await pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await fd(p)}(this))})}),this.Ra=new sb(i,s)}}async function fd(t){if(Os(t))for(const e of t.da)await e(!0)}async function pu(t){for(const e of t.da)await e(!1)}function ZE(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gg(n)?mg(n):pa(n).O_()&&pg(n,e))}function fg(t,e){const n=we(t),i=pa(n);n.Ia.delete(e),i.O_()&&KE(n,e),n.Ia.size===0&&(i.O_()?i.L_():Os(n)&&n.Ra.set("Unknown"))}function pg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).Y_(e)}function KE(t,e){t.Va.Ue(e),pa(t).Z_(e)}function mg(t){t.Va=new eR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Ra.ua()}function gg(t){return Os(t)&&!pa(t).x_()&&t.Ia.size>0}function Os(t){return we(t).Ea.size===0}function QE(t){t.Va=void 0}async function ab(t){t.Ra.set("Online")}async function lb(t){t.Ia.forEach((e,n)=>{pg(t,e)})}async function ub(t,e){QE(t),gg(t)?(t.Ra.ha(e),mg(t)):t.Ra.set("Unknown")}async function cb(t,e,n){if(t.Ra.set("Online"),e instanceof OE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){se(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kh(t,i)}else if(e instanceof jc?t.Va.Ze(e):e instanceof NE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const i=await $E(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(bt.EMPTY_BYTE_STRING,_.snapshotVersion)),KE(o,d);const w=new yr(_.target,d,p,_.sequenceNumber);pg(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){se(ks,"Failed to raise snapshot:",i),await kh(t,i)}}async function kh(t,e,n){if(!da(e))throw e;t.Ea.add(1),await pu(t),t.Ra.set("Offline"),n||(n=()=>$E(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fd(t)})}function YE(t,e){return e().catch(n=>kh(t,n,e))}async function pd(t){const e=we(t),n=Fr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;hb(e);)try{const s=await qR(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,db(e,s)}catch(s){await kh(e,s)}XE(e)&&JE(e)}function hb(t){return Os(t)&&t.Ta.length<10}function db(t,e){t.Ta.push(e);const n=Fr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XE(t){return Os(t)&&!Fr(t).x_()&&t.Ta.length>0}function JE(t){Fr(t).start()}async function fb(t){Fr(t).ra()}async function pb(t){const e=Fr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mb(t,e,n){const i=t.Ta.shift(),s=og.from(i,e,n);await YE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pd(t)}async function gb(t,e){e&&Fr(t).X_&&await async function(i,s){if(function(l){return YA(l)&&l!==Z.ABORTED}(s.code)){const o=i.Ta.shift();Fr(i).B_(),await YE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pd(i)}}(t,e),XE(t)&&JE(t)}async function Sv(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(ks,"RemoteStore received new credentials");const i=Os(n);n.Ea.add(3),await pu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fd(n)}async function _b(t,e){const n=we(t);e?(n.Ea.delete(2),await fd(n)):e||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function pa(t){return t.ma||(t.ma=function(n,i,s){const o=we(n);return o.sa(),new tb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:ab.bind(null,t),t_:lb.bind(null,t),r_:ub.bind(null,t),H_:cb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gg(t)?mg(t):t.Ra.set("Unknown")):(await t.ma.stop(),QE(t))})),t.ma}function Fr(t){return t.fa||(t.fa=function(n,i,s){const o=we(n);return o.sa(),new nb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fb.bind(null,t),r_:gb.bind(null,t),ta:pb.bind(null,t),na:mb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new _g(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Wi("AsyncQueue",`${e}: ${t}`),da(t))return new ie(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=ll(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new et(ce.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class na{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new na(e,n,zo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vb{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=we(n),o=s.queries;s.queries=Pv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ie(Z.ABORTED,"Firestore shutting down"))}}function Pv(){return new Ns(t=>wE(t),ad)}async function e1(t,e){const n=we(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new yb,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=yg(l,`Initialization of query '${go(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&vg(n)}async function t1(t,e){const n=we(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function wb(t,e){const n=we(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&vg(n)}function xb(t,e,n){const i=we(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function vg(t){t.Ca.forEach(e=>{e.next()})}var Bp,kv;(kv=Bp||(Bp={})).Ma="default",kv.Cache="cache";class n1{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.key=e}}class r1{constructor(e){this.key=e}}class Eb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=xE(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Cv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,w)=>{const E=s.get(_),k=ld(this.query,w)?w:null,z=!!E&&this.mutatedKeys.has(E.key),N=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let F=!1;E&&k?E.data.isEqual(k.data)?z!==N&&(i.track({type:3,doc:k}),F=!0):this.su(E,k)||(i.track({type:2,doc:k}),F=!0,(d&&this.eu(k,d)>0||p&&this.eu(k,p)<0)&&(h=!0)):!E&&k?(i.track({type:0,doc:k}),F=!0):E&&!k&&(i.track({type:1,doc:E}),F=!0,(d||p)&&(h=!0)),F&&(k?(l=l.add(k),o=N?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((_,w)=>function(k,z){const N=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:F})}};return N(k)-N(z)}(_.type,w.type)||this.eu(_.doc,w.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new na(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new r1(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new i1(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wg="SyncEngine";class Tb{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Ib{constructor(e){this.key=e,this.hu=!1}}class Sb{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ns(h=>wE(h),ad),this.Iu=new Map,this.Eu=new Set,this.du=new et(ce.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Cb(t,e,n=!0){const i=c1(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await s1(i,e,n,!0),s}async function Pb(t,e){const n=c1(t);await s1(n,e,!0,!1)}async function s1(t,e,n,i){const s=await GR(t.localStore,ci(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await kb(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&ZE(t.remoteStore,s),h}async function kb(t,e,n,i,s){t.pu=(w,E,k)=>async function(N,F,A,T){let O=F.view.ru(A);O.Cs&&(O=await wv(N.localStore,F.query,!1).then(({documents:R})=>F.view.ru(R,O)));const H=T&&T.targetChanges.get(F.targetId),Y=T&&T.targetMismatches.get(F.targetId)!=null,ee=F.view.applyChanges(O,N.isPrimaryClient,H,Y);return Rv(N,F.targetId,ee.au),ee.snapshot}(t,w,E,k);const o=await wv(t.localStore,e,!0),l=new Eb(e,o.Qs),h=l.ru(o.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Rv(t,n,p.au);const _=new Tb(e,n,l);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function Ab(t,e,n){const i=we(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!ad(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Fp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&fg(i.remoteStore,s.targetId),Up(i,s.targetId)}).catch(ha)):(Up(i,s.targetId),await Fp(i.localStore,s.targetId,!0))}async function Rb(t,e){const n=we(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fg(n.remoteStore,i.targetId))}async function bb(t,e,n){const i=zb(t);try{const s=await function(l,h){const d=we(l),p=Ge.now(),_=h.reduce((k,z)=>k.add(z.key),Ae());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let z=Hi(),N=Ae();return d.Ns.getEntries(k,_).next(F=>{z=F,z.forEach((A,T)=>{T.isValidDocument()||(N=N.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,z)).next(F=>{w=F;const A=[];for(const T of h){const O=qA(T,w.get(T.key).overlayedDocument);O!=null&&A.push(new $r(T.key,O,dE(O.value.mapValue),qn.exists(!0)))}return d.mutationQueue.addMutationBatch(k,p,A,h)}).next(F=>{E=F;const A=F.applyToLocalDocumentSet(w,N);return d.documentOverlayCache.saveOverlays(k,F.batchId,A)})}).then(()=>({batchId:E.batchId,changes:TE(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new et(ke)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(i,s.batchId,n),await mu(i,s.changes),await pd(i.remoteStore)}catch(s){const o=yg(s,"Failed to persist write");n.reject(o)}}async function o1(t,e){const n=we(t);try{const i=await HR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Fe(l.hu,14607):s.removedDocuments.size>0&&(Fe(l.hu,42227),l.hu=!1))}),await mu(n,i,e)}catch(i){await ha(i)}}function Av(t,e,n){const i=we(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=we(l);d.onlineState=h;let p=!1;d.queries.forEach((_,w)=>{for(const E of w.Sa)E.va(h)&&(p=!0)}),p&&vg(d)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Lb(t,e,n){const i=we(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new et(ce.comparator);l=l.insert(o,zt.newNoDocument(o,ye.min()));const h=Ae().add(o),d=new hd(ye.min(),new Map,new et(ke),l,h);await o1(i,d),i.du=i.du.remove(o),i.Au.delete(e),xg(i)}else await Fp(i.localStore,e,!1).then(()=>Up(i,e,n)).catch(ha)}async function Nb(t,e){const n=we(t),i=e.batch.batchId;try{const s=await WR(n.localStore,e);l1(n,i,null),a1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mu(n,s)}catch(s){await ha(s)}}async function Ob(t,e,n){const i=we(t);try{const s=await function(l,h){const d=we(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(w=>(Fe(w!==null,37113),_=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,e);l1(i,e,n),a1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mu(i,s)}catch(s){await ha(s)}}function a1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function l1(t,e,n){const i=we(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||u1(t,i)})}function u1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xg(t))}function Rv(t,e,n){for(const i of n)i instanceof i1?(t.Ru.addReference(i.key,e),Mb(t,i)):i instanceof r1?(se(wg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||u1(t,i.key)):me(19791,{wu:i})}function Mb(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(se(wg,"New document in limbo: "+n),t.Eu.add(i),xg(t))}function xg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(He.fromString(e)),i=t.fu.next();t.Au.set(i,new Ib(n)),t.du=t.du.insert(n,i),ZE(t.remoteStore,new yr(ci(ig(n.path)),i,"TargetPurposeLimboResolution",rd.ce))}}async function mu(t,e,n){const i=we(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var _;if((p||n)&&i.isPrimaryClient){const w=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){s.push(p);const w=hg.As(d.targetId,p);o.push(w)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,p){const _=we(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>K.forEach(p,E=>K.forEach(E.Es,k=>_.persistence.referenceDelegate.addReference(w,E.targetId,k)).next(()=>K.forEach(E.ds,k=>_.persistence.referenceDelegate.removeReference(w,E.targetId,k)))))}catch(w){if(!da(w))throw w;se(dg,"Failed to update sequence numbers: "+w)}for(const w of p){const E=w.targetId;if(!w.fromCache){const k=_.Ms.get(E),z=k.snapshotVersion,N=k.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(E,N)}}}(i.localStore,o))}async function Db(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se(wg,"User change. New user:",e.toKey());const i=await HE(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ie(Z.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mu(n,i.Ls)}}function Vb(t,e){const n=we(t),i=n.Au.get(e);if(i&&i.hu)return Ae().add(i.key);{let s=Ae();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function c1(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lb.bind(null,e),e.Pu.H_=wb.bind(null,e.eventManager),e.Pu.yu=xb.bind(null,e.eventManager),e}function zb(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ob.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UR(this.persistence,new FR,e.initialUser,this.serializer)}Cu(e){return new WE(cg.mi,this.serializer)}Du(e){return new KR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class Fb extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof Ph,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IR(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new WE(i=>Ph.mi(i,n),this.serializer)}}class Wp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Db.bind(null,this.syncEngine),await _b(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vb}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(o){return new eb(o)}(e.databaseInfo);return function(o,l,h,d){return new rb(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new ob(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return Tv.v()?new Tv:new QR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,_){const w=new Sb(s,o,l,h,d,p);return _&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=we(s);se(ks,"RemoteStore shutting down."),o.Ea.add(5),await pu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Wp.provider={build:()=>new Wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class jb{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{se(jr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(se(jr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=yg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ef(t,e){t.asyncQueue.verifyOperationInProgress(),se(jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await HE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bb(t);se(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Sv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Sv(e.remoteStore,s)),t._onlineComponents=e}async function Bb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(jr,"Using user provided OfflineComponentProvider");try{await Ef(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await Ef(t,new Ah)}}else se(jr,"Using default OfflineComponentProvider"),await Ef(t,new Fb(void 0));return t._offlineComponents}async function d1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(jr,"Using user provided OnlineComponentProvider"),await bv(t,t._uninitializedComponentsProvider._online)):(se(jr,"Using default OnlineComponentProvider"),await bv(t,new Wp))),t._onlineComponents}function Ub(t){return d1(t).then(e=>e.syncEngine)}async function f1(t){const e=await d1(t),n=e.eventManager;return n.onListen=Cb.bind(null,e.syncEngine),n.onUnlisten=Ab.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rb.bind(null,e.syncEngine),n}function Wb(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new h1({next:E=>{_.Nu(),l.enqueueAndForget(()=>t1(o,w));const k=E.docs.has(h);!k&&E.fromCache?p.reject(new ie(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&E.fromCache&&d&&d.source==="server"?p.reject(new ie(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new n1(ig(h.path),_,{includeMetadataChanges:!0,qa:!0});return e1(o,w)}(await f1(t),t.asyncQueue,e,n,i)),i.promise}function Hb(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new h1({next:E=>{_.Nu(),l.enqueueAndForget(()=>t1(o,w)),E.fromCache&&d.source==="server"?p.reject(new ie(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new n1(h,_,{includeMetadataChanges:!0,qa:!0});return e1(o,w)}(await f1(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firestore.googleapis.com",Nv=!0;class Ov{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m1,this.ssl=Nv}else this.host=e.host,this.ssl=e.ssl??Nv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ER)throw new ie(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p1(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Qk;switch(i.type){case"firstParty":return new eA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Lv.get(n);i&&(se("ComponentProvider","Removing Datastore"),Lv.delete(n),i.terminate())}(this),Promise.resolve()}}function $b(t,e,n,i={}){var p;t=gi(t,md);const s=la(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(Fx(`https://${h}`),jx("Firestore",!0)),o.host!==m1&&o.host!==h&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!Ss(d,l)&&(t._setSettings(d),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=Dt.MOCK_USER;else{_=TP(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ie(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Dt(E)}t._authCredentials=new Yk(new eE(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(hu(n,ot._jsonSchema))return new ot(e,i||null,new ce(He.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:ft("string",ot._jsonSchemaVersion),referencePath:ft("string")};class br extends Ms{constructor(e,n,i){super(e,n,ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ce(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function Bn(t,e,...n){if(t=St(t),tE("collection","path",e),t instanceof md){const i=He.fromString(e,...n);return Gy(i),new br(t,null,i)}{if(!(t instanceof ot||t instanceof br))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return Gy(i),new br(t.firestore,null,i)}}function Sn(t,e,...n){if(t=St(t),arguments.length===1&&(e=Ym.newId()),tE("doc","path",e),t instanceof md){const i=He.fromString(e,...n);return qy(i),new ot(t,null,new ce(i))}{if(!(t instanceof ot||t instanceof br))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return qy(i),new ot(t.firestore,t instanceof br?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="AsyncQueue";class Dv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const i=xf();i&&se(Mv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;se(Mv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Wi("INTERNAL UNHANDLED ERROR: ",Vv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=_g.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:Vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Vv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ma extends md{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Dv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dv(e),this._firestoreClient=void 0,await e}}}function qb(t,e){const n=typeof t=="object"?t:Hx(),i=typeof t=="string"?t:xh,s=Km(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=xP("firestore");o&&$b(s,...o)}return s}function Eg(t){if(t._terminated)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Gb(t),t._firestoreClient}function Gb(t){var i,s,o;const e=t._freezeSettings(),n=function(h,d,p,_){return new _A(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,p1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(bt.fromBase64String(e))}catch(n){throw new ie(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:ft("string",Cn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(hu(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:ft("string",di._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fi(e.vectorValues);throw new ie(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:ft("string",fi._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^__.*__$/;class Kb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class g1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class Ig{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_1(this.Ac)&&Zb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Qb{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Cc(e,n,i,s=!1){return new Ig({Ac:e,methodName:n,Dc:i,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sg(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new Qb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yb(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Cg("Data must be an object, but it was:",l,i);const h=y1(i,l);let d,p;if(o.merge)d=new cn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const w of o.mergeFields){const E=Hp(e,w,n);if(!l.contains(E))throw new ie(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);w1(_,E)||_.push(E)}d=new cn(_),p=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,p=l.fieldTransforms;return new Kb(new en(h),d,p)}class _d extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function Xb(t,e,n,i){const s=t.Cc(1,e,n);Cg("Data must be an object, but it was:",s,i);const o=[],l=en.empty();Hr(i,(d,p)=>{const _=Pg(e,d,n);p=St(p);const w=s.yc(_);if(p instanceof _d)o.push(_);else{const E=gu(p,w);E!=null&&(o.push(_),l.set(_,E))}});const h=new cn(o);return new g1(l,h,s.fieldTransforms)}function Jb(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Hp(e,i,n)],d=[s];if(o.length%2!=0)throw new ie(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Hp(e,o[E])),d.push(o[E+1]);const p=[],_=en.empty();for(let E=h.length-1;E>=0;--E)if(!w1(p,h[E])){const k=h[E];let z=d[E];z=St(z);const N=l.yc(k);if(z instanceof _d)p.push(k);else{const F=gu(z,N);F!=null&&(p.push(k),_.set(k,F))}}const w=new cn(p);return new g1(_,w,l.fieldTransforms)}function e2(t,e,n,i=!1){return gu(n,t.Cc(i?4:3,e))}function gu(t,e){if(v1(t=St(t)))return Cg("Unsupported field value:",e,t),y1(t,e);if(t instanceof Tg)return function(i,s){if(!_1(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=gu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jA(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ge.fromDate(i);return{timestampValue:Ch(s.serializer,o)}}if(i instanceof Ge){const o=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ch(s.serializer,o)}}if(i instanceof di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cn)return{bytesValue:ME(s.serializer,i._byteString)};if(i instanceof ot){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof fi)return function(l,h){return{mapValue:{fields:{[cE]:{stringValue:hE},[Eh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return rg(h.serializer,p)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${id(i)}`)}(t,e)}function y1(t,e){const n={};return rE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,(i,s)=>{const o=gu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function v1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof di||t instanceof Cn||t instanceof ot||t instanceof Tg||t instanceof fi)}function Cg(t,e,n){if(!v1(n)||!nE(n)){const i=id(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Hp(t,e,n){if((e=St(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw Rh("Field path arguments must be of type string or ",t,!1,void 0,n)}const t2=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(t2)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ie(Z.INVALID_ARGUMENT,h+t+d)}function w1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n2 extends x1{data(){return super.data()}}function yd(t,e){return typeof e=="string"?Pg(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class E1 extends kg{}function Bc(t,e,...n){let i=[];e instanceof kg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Ag).length,h=o.filter(d=>d instanceof vd).length;if(l>1||l>0&&h>0)throw new ie(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class vd extends E1{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new vd(e,n,i)}_apply(e){const n=this._parse(e);return T1(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n))}_parse(e){const n=Sg(e.firestore);return function(o,l,h,d,p,_,w){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Fv(w,_);const z=[];for(const N of w)z.push(zv(d,o,N));E={arrayValue:{values:z}}}else E=zv(d,o,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Fv(w,_),E=e2(h,l,w,_==="in"||_==="not-in");return dt.create(p,_,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uc(t,e,n){const i=e,s=yd("where",t);return vd._create(s,i,n)}class Ag extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)T1(l,d),l=Np(l,d)}(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends E1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ie(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(o,l)}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new fa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function r2(t,e="asc"){const n=e,i=yd("orderBy",t);return Rg._create(i,n)}function zv(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new ie(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vE(e)&&n.indexOf("/")!==-1)throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(He.fromString(n));if(!ce.isDocumentKey(i))throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tv(t,new ce(i))}if(n instanceof ot)return tv(t,n._key);throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function Fv(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T1(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class s2{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Hr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[Eh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>rt(l.doubleValue));return new fi(n)}convertGeoPoint(e){return new di(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=od(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);Fe(BE(i),9688,{name:e});const s=new Kl(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return s.isEqual(n)||Wi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends x1{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(yd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:ft("string",vs._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class Wc extends vs{data(e={}){return super.data(e)}}class Fo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new cl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Wc(this._firestore,this._userDataWriter,i.key,i,new cl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:a2(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){t=gi(t,ot);const e=gi(t.firestore,ma);return Wb(Eg(e),t._key).then(n=>l2(e,t,n))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:ft("string",Fo._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class I1 extends s2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Un(t){t=gi(t,Ms);const e=gi(t.firestore,ma),n=Eg(e),i=new I1(e);return i2(t._query),Hb(n,t._query).then(s=>new Fo(e,i,t,s))}function Lg(t,e,n){t=gi(t,ot);const i=gi(t.firestore,ma),s=o2(t.converter,e);return Ng(i,[Yb(Sg(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function eu(t,e,n,...i){t=gi(t,ot);const s=gi(t.firestore,ma),o=Sg(s);let l;return l=typeof(e=St(e))=="string"||e instanceof gd?Jb(o,"updateDoc",t._key,e,n,i):Xb(o,"updateDoc",t._key,e),Ng(s,[l.toMutation(t._key,qn.exists(!0))])}function Tf(t){return Ng(gi(t.firestore,ma),[new sg(t._key,qn.none())])}function Ng(t,e){return function(i,s){const o=new Vi;return i.asyncQueue.enqueueAndForget(async()=>bb(await Ub(i),s,o)),o.promise}(Eg(t),e)}function l2(t,e,n){const i=n.docs.get(e._key),s=new I1(t);return new vs(t,s,e._key,i,new cl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ca=s})(ua),Qo(new Cs("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ma(new Xk(i.getProvider("auth-internal")),new tA(l,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(p.options.projectId,_)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ar(Uy,Wy,e),Ar(Uy,Wy,"esm2020")})();function S1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u2=S1,C1=new uu("auth","Firebase",S1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Gm("@firebase/auth");function c2(t,...e){bh.logLevel<=Pe.WARN&&bh.warn(`Auth (${ua}): ${t}`,...e)}function Hc(t,...e){bh.logLevel<=Pe.ERROR&&bh.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw Og(t,...e)}function pi(t,...e){return Og(t,...e)}function P1(t,e,n){const i={...u2(),[e]:n};return new uu("auth","Firebase",i).create(e,{appName:t.name})}function Lr(t){return P1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return C1.create(t,...e)}function pe(t,e,...n){if(!t)throw Og(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function $i(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function h2(){return jv()==="http:"||jv()==="https:"}function jv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h2()||AP()||"connection"in navigator)?navigator.onLine:!0}function f2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=CP()||RP()}get(){return d2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g2=new _u(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qr(t,e,n,i,s={}){return A1(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=cu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return kP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&la(t.emulatorConfig.host)&&(p.credentials="include"),k1.fetch()(await R1(t,t.config.apiHost,n,h),p)})}async function A1(t,e,n){t._canInitEmulator=!1;const i={...p2,...e};try{const s=new y2(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Tc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Tc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Tc(t,"user-disabled",l);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw P1(t,_,p);Kn(t,_)}}catch(s){if(s instanceof Gi)throw s;Kn(t,"network-request-failed",{message:String(s)})}}async function wd(t,e,n,i,s={}){const o=await qr(t,e,n,i,s);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function R1(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Mg(t.config,s):`${t.config.apiScheme}://${s}`;return m2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function _2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class y2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),g2.get())})}}function Tc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=pi(t,e,i);return s.customData._tokenResponse=n,s}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class v2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w2(t,e){return qr(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function Lh(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E2(t,e=!1){const n=St(t),i=await n.getIdToken(e),s=Dg(i);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Sl(If(s.auth_time)),issuedAtTime:Sl(If(s.iat)),expirationTime:Sl(If(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function Dg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Mx(n);return s?JSON.parse(s):(Hc("Failed to decode base64 JWT payload"),null)}catch(s){return Hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Uv(t){const e=Dg(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Gi&&T2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function T2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(t){var w;const e=t.auth,n=await t.getIdToken(),i=await tu(t,Lh(e,{idToken:n}));pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?b1(s.providerUserInfo):[],l=C2(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function S2(t){const e=St(t);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function b1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e){const n=await A1(t,{},async()=>{const i=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await R1(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&la(t.emulatorConfig.host)&&(d.credentials="include"),k1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k2(t,e){return qr(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await P2(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new jo;return i&&(pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new I2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E2(this,e)}reload(){return S2(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await tu(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:k,providerData:z,stsTokenManager:N}=n;pe(w&&N,e,"internal-error");const F=jo.fromJSON(this.name,N);pe(typeof w=="string",e,"internal-error"),or(i,e.name),or(s,e.name),pe(typeof E=="boolean",e,"internal-error"),pe(typeof k=="boolean",e,"internal-error"),or(o,e.name),or(l,e.name),or(h,e.name),or(d,e.name),or(p,e.name),or(_,e.name);const A=new Wn({uid:w,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:k,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:F,createdAt:p,lastLoginAt:_});return z&&Array.isArray(z)&&(A.providerData=z.map(T=>({...T}))),d&&(A._redirectEventId=d),A}static async _fromIdTokenResponse(e,n,i=!1){const s=new jo;s.updateFromServerResponse(n);const o=new Wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Nh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?b1(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new jo;h.updateFromIdToken(i);const d=new Wn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;function Mi(t){$i(t instanceof Function,"Expected a class definition");let e=Wv.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L1.type="NONE";const Hv=L1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class Bo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=$c(this.userKey,s.apiKey,o),this.fullPersistenceKey=$c("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lh(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Bo(Mi(Hv),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Mi(Hv);const l=$c(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let w;if(typeof _=="string"){const E=await Lh(e,{idToken:_}).catch(()=>{});if(!E)break;w=await Wn._fromGetAccountInfoResponse(e,E,_)}else w=Wn._fromJSON(e,_);p!==o&&(h=w),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Bo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Bo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z1(e))return"Blackberry";if(F1(e))return"Webos";if(O1(e))return"Safari";if((e.includes("chrome/")||M1(e))&&!e.includes("edge/"))return"Chrome";if(V1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function N1(t=jt()){return/firefox\//i.test(t)}function O1(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M1(t=jt()){return/crios\//i.test(t)}function D1(t=jt()){return/iemobile/i.test(t)}function V1(t=jt()){return/android/i.test(t)}function z1(t=jt()){return/blackberry/i.test(t)}function F1(t=jt()){return/webos/i.test(t)}function Vg(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A2(t=jt()){var e;return Vg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function R2(){return bP()&&document.documentMode===10}function j1(t=jt()){return Vg(t)||V1(t)||F1(t)||z1(t)||/windows phone/i.test(t)||D1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e=[]){let n;switch(t){case"Browser":n=$v(jt());break;case"Worker":n=`${$v(jt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e={}){return qr(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=6;class O2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??N2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new b2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lh(this,{idToken:e}),i=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Lr(this));const n=e?St(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L2(this),n=new O2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await k2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&c2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ga(t){return St(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FP(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D2(t){xd=t}function U1(t){return xd.loadJS(t)}function V2(){return xd.recaptchaEnterpriseScript}function z2(){return xd.gapiScript}function F2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class j2{constructor(){this.enterprise=new B2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class B2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const U2="recaptcha-enterprise",W1="NO_RECAPTCHA";class W2{constructor(e){this.type=U2,this.auth=ga(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{w2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new v2(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Bv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(W1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new j2().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Bv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=V2();d.length!==0&&(d+=h),U1(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Gv(t,e,n,i=!1,s=!1){const o=new W2(t);let l;if(s)l=W1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Zv(t,e,n,i,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Gv(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Gv(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e){const n=Km(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Ss(o,e??{}))return s;Kn(s,"already-initialized")}return n.initialize({options:e})}function $2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function q2(t,e,n){const i=ga(t);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=H1(e),{host:l,port:h}=G2(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},_=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(Ss(p,i.config.emulator)&&Ss(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,la(l)?(Fx(`${o}//${l}${d}`),jx("Auth",!0)):Z2()}function H1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G2(t){const e=H1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Kv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Kv(l)}}}function Kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function K2(t,e){return qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e){return wd(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function X2(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends zg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new nu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zv(e,n,"signInWithPassword",Q2);case"emailLink":return Y2(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zv(e,i,"signUpPassword",K2);case"emailLink":return X2(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e){return wd(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="http://localhost";class As extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new As(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Uo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Uo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Uo(e,n)}buildRequest(){const e={requestUri:J2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tL(t){const e=sl(ol(t)).link,n=e?sl(ol(e)).deep_link_id:null,i=sl(ol(t)).deep_link_id;return(i?sl(ol(i)).link:null)||i||n||e||t}class Fg{constructor(e){const n=sl(ol(e)),i=n.apiKey??null,s=n.oobCode??null,o=eL(n.mode??null);pe(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tL(e);try{return new Fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Fg.parseLink(n);return pe(i,"argument-error"),nu._fromEmailAndCode(e,i.code,i.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends $1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends yu{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return As._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return dr.credential(n,i)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends yu{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends yu{constructor(){super("twitter.com")}static credential(e,n){return As._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return pr.credential(n,i)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Wn._fromIdTokenResponse(e,i,s),l=Qv(i);return new ia({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Qv(i);return new ia({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends Gi{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Oh(e,n,i,s)}}function q1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(t,o,e,i):o})}async function nL(t,e,n=!1){const i=await tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ia._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t,e,n=!1){const{auth:i}=t;if(jn(i.app))return Promise.reject(Lr(i));const s="reauthenticate";try{const o=await tu(t,q1(i,s,e,t),n);pe(o.idToken,i,"internal-error");const l=Dg(o.idToken);pe(l,i,"internal-error");const{sub:h}=l;return pe(t.uid===h,i,"user-mismatch"),ia._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(t,e,n=!1){if(jn(t.app))return Promise.reject(Lr(t));const i="signIn",s=await q1(t,i,e),o=await ia._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function rL(t,e){return G1(ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t){const e=ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function oL(t,e,n){return jn(t.app)?Promise.reject(Lr(t)):rL(St(t),_a.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sL(t),i})}function aL(t,e,n,i){return St(t).onIdTokenChanged(e,n,i)}function lL(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function uL(t,e,n,i){return St(t).onAuthStateChanged(e,n,i)}function cL(t){return St(t).signOut()}const Mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=1e3,dL=10;class K1 extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);R2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dL):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},hL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}K1.type="LOCAL";const fL=K1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1 extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Q1.type="SESSION";const Y1=Q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await pL(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=jg("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const E=w;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return window}function gL(t){mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return typeof mi().WorkerGlobalScope<"u"&&typeof mi().importScripts=="function"}async function _L(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function vL(){return X1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebaseLocalStorageDb",wL=1,Dh="firebaseLocalStorage",eT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([Dh],e?"readwrite":"readonly").objectStore(Dh)}function xL(){const t=indexedDB.deleteDatabase(J1);return new vu(t).toPromise()}function Gp(){const t=indexedDB.open(J1,wL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Dh,{keyPath:eT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Dh)?e(i):(i.close(),await xL(),e(await Gp()))})})}async function Yv(t,e,n){const i=Td(t,!0).put({[eT]:e,value:n});return new vu(i).toPromise()}async function EL(t,e){const n=Td(t,!1).get(e),i=await new vu(n).toPromise();return i===void 0?null:i.value}function Xv(t,e){const n=Td(t,!0).delete(e);return new vu(n).toPromise()}const TL=800,IL=3;class tT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>IL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(vL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await _L(),!this.activeServiceWorker)return;this.sender=new mL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await Yv(e,Mh,"1"),await Xv(e,Mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Yv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>EL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Td(s,!1).getAll();return new vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tT.type="LOCAL";const SL=tT;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t,e){return e?Mi(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PL(t){return G1(t.auth,new Bg(t),t.bypassAuthState)}function kL(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),iL(n,new Bg(t),t.bypassAuthState)}async function AL(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),nL(n,new Bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PL;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return kL;default:Kn(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new _u(2e3,1e4);class bo extends nT{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RL.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="pendingRedirect",qc=new Map;class LL extends nT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const i=await NL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NL(t,e){const n=DL(e),i=ML(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function OL(t,e){qc.set(t._key(),e)}function ML(t){return Mi(t._redirectPersistence)}function DL(t){return $c(bL,t.config.apiKey,t.name)}async function VL(t,e,n=!1){if(jn(t.app))return Promise.reject(Lr(t));const i=ga(t),s=CL(i,e),l=await new LL(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=10*60*1e3;class FL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!iT(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(pi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e={}){return qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WL=/^https?/;async function HL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BL(t);for(const n of e)try{if($L(n))return}catch{}Kn(t,"unauthorized-domain")}function $L(t){const e=$p(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!WL.test(n))return!1;if(UL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new _u(3e4,6e4);function e0(){const t=mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GL(t){return new Promise((e,n)=>{var s,o,l;function i(){e0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e0(),n(pi(t,"network-request-failed"))},timeout:qL.get()})}if((o=(s=mi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=mi().gapi)!=null&&l.load)i();else{const h=F2("iframefcb");return mi()[h]=()=>{gapi.load?i():n(pi(t,"network-request-failed"))},U1(`${z2()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function ZL(t){return Gc=Gc||GL(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new _u(5e3,15e3),QL="__/auth/iframe",YL="emulator/auth/iframe",XL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,YL):`https://${t.config.authDomain}/${QL}`,i={apiKey:e.apiKey,appName:t.name,v:ua},s=JL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${cu(i).slice(1)}`}async function tN(t){const e=await ZL(t),n=mi().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:eN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=pi(t,"network-request-failed"),h=mi().setTimeout(()=>{o(l)},KL.get());function d(){mi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iN=500,rN=600,sN="_blank",oN="http://localhost";class t0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(t,e,n,i=iN,s=rN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...nN,width:i.toString(),height:s.toString(),top:o,left:l},p=jt().toLowerCase();n&&(h=M1(p)?sN:n),N1(p)&&(e=e||oN,d.scrollbars="yes");const _=Object.entries(d).reduce((E,[k,z])=>`${E}${k}=${z},`,"");if(A2(p)&&h!=="_self")return lN(e||"",h),new t0(null);const w=window.open(e||"",h,_);pe(w,t,"popup-blocked");try{w.focus()}catch{}return new t0(w)}function lN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="__/auth/handler",cN="emulator/auth/handler",hN=encodeURIComponent("fac");async function n0(t,e,n,i,s,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ua,eventId:s};if(e instanceof $1){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",zP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))l[_]=w}if(e instanceof yu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${hN}=${encodeURIComponent(d)}`:"";return`${dN(t)}?${cu(h).slice(1)}${p}`}function dN({config:t}){return t.emulator?Mg(t,cN):`https://${t.authDomain}/${uN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=VL,this._overrideRedirectResult=OL}async _openPopup(e,n,i,s){var l;$i((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await n0(e,n,i,$p(),s);return aN(e,o,jg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await n0(e,n,i,$p(),s);return gL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):($i(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await tN(e),i=new FL(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sf,{type:Sf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Sf];o!==void 0&&n(!!o),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j1()||O1()||Vg()}}const pN=fN;var i0="@firebase/auth",r0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _N(t){Qo(new Cs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B1(t)},p=new M2(i,s,o,d);return $2(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qo(new Cs("auth-internal",e=>{const n=ga(e.getProvider("auth").getImmediate());return(i=>new mN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(i0,r0,gN(t)),Ar(i0,r0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=5*60,vN=zx("authIdTokenMaxAge")||yN;let s0=null;const wN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>vN)return;const s=n==null?void 0:n.token;s0!==s&&(s0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xN(t=Hx()){const e=Km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=H2(t,{popupRedirectResolver:pN,persistence:[SL,fL,Y1]}),i=zx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=wN(o.toString());lL(n,l,()=>l(n.currentUser)),aL(n,h=>l(h))}}const s=Dx("auth");return s&&q2(n,`http://${s}`),n}function EN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}D2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=pi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",EN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_N("Browser");var TN="firebase",IN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(TN,IN,"app");const SN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},rT=Wx(SN),Ne=qb(rT),Cf=xN(rT),Qe={FACILITIES:"facilities",HITS:"hits"},CN=()=>{var V;const[t,e]=q.useState(!1),[n,i]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[_,w]=q.useState([]),[E,k]=q.useState(!1),[z,N]=q.useState(null),[F,A]=q.useState(null),[T,O]=q.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),H=lu();q.useEffect(()=>{const C=uL(Cf,P=>{P?(e(!0),h(null)):e(!1)});return()=>C()},[]),q.useEffect(()=>{t&&Y()},[t]);const Y=async()=>{k(!0),N(null);try{if(!Ne)throw new Error("Firebase not initialized");const C=await Un(Bn(Ne,Qe.FACILITIES)),P=await Promise.all(C.docs.map(async te=>{var xe,Te;const G=Bc(Bn(Ne,Qe.HITS),Uc("facilityId","==",parseInt(te.id))),Re=(await Un(G)).docs.map(de=>({id:parseInt(de.id),...de.data()})),$=te.data(),ue=((xe=$.location)==null?void 0:xe.latitude)??$.latitude,X=((Te=$.location)==null?void 0:Te.longitude)??$.longitude,Ee=Re.filter(de=>!de.draft).reduce((de,at)=>de+(at.damagePercentage||0),0),Ue=Math.max(0,$.capacity*(1-Ee/100));return{id:parseInt(te.id),name:$.name,type:$.type,capacity:$.capacity,gasCapacity:$.gasCapacity,currentProduction:Ue,latitude:ue,longitude:X,status:$.status,hit:$.hit,draft:$.draft??!1,hits:Re}}));w(P)}catch(C){console.error("Error fetching facilities:",C),N("Failed to load facilities from Firebase.")}finally{k(!1)}},ee=async C=>{C.preventDefault(),h(null),k(!0);try{await oL(Cf,n,s)}catch(P){console.error("Login error:",P),P.code==="auth/invalid-credential"?h("Invalid email or password"):P.code==="auth/user-not-found"?h("No account found with this email"):P.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{k(!1)}},R=async()=>{try{await cL(Cf),H("/")}catch(C){console.error("Logout error:",C)}},S=async C=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!Ne)throw new Error("Firebase not initialized");const P=Bc(Bn(Ne,Qe.HITS),Uc("facilityId","==",C)),te=await Un(P);for(const G of te.docs)await Tf(G.ref);await Tf(Sn(Ne,Qe.FACILITIES,C.toString())),Y()}catch(P){console.error("Error deleting facility:",P),alert("Failed to delete facility")}},b=async(C,P)=>{var te;P.preventDefault();try{if(!Ne)throw new Error("Firebase not initialized");const Re=(await Un(Bn(Ne,Qe.HITS))).docs.reduce((X,he)=>{const Ee=parseInt(he.id);return Ee>X?Ee:X},0)+1,$={id:Re,facilityId:C,date:T.date,severity:T.severity,damagePercentage:T.damagePercentage||0,mediaLinks:(te=T.mediaLinks)==null?void 0:te.filter(X=>X.trim()!==""),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!0};await Lg(Sn(Ne,Qe.HITS,Re.toString()),$);const ue=Sn(Ne,Qe.FACILITIES,C.toString());await eu(ue,{hit:!0}),A(null),O({date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0}),Y()}catch(G){console.error("Error adding hit:",G),alert("Failed to add hit record")}},D=async(C,P)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!Ne)throw new Error("Firebase not initialized");await Tf(Sn(Ne,Qe.HITS,P.toString()));const te=Bc(Bn(Ne,Qe.HITS),Uc("facilityId","==",C));if((await Un(te)).empty){const ve=Sn(Ne,Qe.FACILITIES,C.toString());await eu(ve,{hit:!1})}Y()}catch(te){console.error("Error deleting hit:",te),alert("Failed to delete hit record")}};return t?v.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[v.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[v.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[v.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),v.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),v.jsx("button",{onClick:R,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),v.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[v.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[v.jsx("span",{style:{fontSize:"20px"},children:"🏭"}),v.jsx("span",{children:"Facilities"})]}),v.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[v.jsx("span",{style:{fontSize:"20px"},children:"💥"}),v.jsx("span",{children:"Hit Records"})]})]}),v.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:v.jsx("button",{onClick:()=>H("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"🗺️ View Map"})})]}),v.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),v.jsxs("p",{style:{color:"#999"},children:["Total: ",_.length," facilities"]})]}),v.jsx("button",{onClick:()=>H("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),E&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),z&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:z}),!E&&!z&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Normal Production"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Current Production"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),v.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),v.jsx("tbody",{children:_.map(C=>{var P,te;return v.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[v.jsx("td",{style:{padding:"15px"},children:C.id}),v.jsx("td",{style:{padding:"15px"},children:C.name}),v.jsx("td",{style:{padding:"15px"},children:C.type}),v.jsxs("td",{style:{padding:"15px"},children:[((P=C.capacity)==null?void 0:P.toLocaleString())||0," bbl/day"]}),v.jsx("td",{style:{padding:"15px"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsxs("span",{style:{color:C.currentProduction===C.capacity?"#4CAF50":"#FF9800"},children:[((te=C.currentProduction)==null?void 0:te.toLocaleString())||0," bbl/day"]}),C.currentProduction!==C.capacity&&v.jsxs("span",{style:{fontSize:"11px",color:"#f44336",backgroundColor:"#331111",padding:"2px 6px",borderRadius:"3px"},children:["-",((1-(C.currentProduction||0)/C.capacity)*100).toFixed(0),"%"]})]})}),v.jsx("td",{style:{padding:"15px"},children:C.gasCapacity?C.gasCapacity.toLocaleString()+" million m³/year":"-"}),v.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:C.latitude!=null&&C.longitude!=null?`${C.latitude.toFixed(4)}, ${C.longitude.toFixed(4)}`:"N/A"}),v.jsx("td",{style:{padding:"15px"},children:v.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:C.hit?"#f44336":"#4CAF50",color:"#fff"},children:C.status})}),v.jsx("td",{style:{padding:"15px"},children:v.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:C.draft?"#ff9800":"#4CAF50",color:"#fff"},children:C.draft?"DRAFT":"Published"})}),v.jsxs("td",{style:{padding:"15px"},children:[v.jsx("button",{onClick:()=>H(`/admin/facility/${C.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),v.jsx("button",{onClick:()=>S(C.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},C.id)})})]}),_.length===0&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),v.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),v.jsx("button",{onClick:()=>H("/admin/hit/new"),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"+ Add New Hit"})]}),F===-1&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[v.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),v.jsxs("form",{onSubmit:C=>{C.preventDefault();const P=parseInt(C.target.facilityId.value);b(P,C)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),v.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[v.jsx("option",{value:"",children:"-- Choose a facility --"}),_.map(C=>v.jsxs("option",{value:C.id,children:[C.name," (",C.type,") ",C.hits&&C.hits.length>0?`- ${C.hits.length} existing hit${C.hits.length>1?"s":""}`:""]},C.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),v.jsx("input",{type:"date",required:!0,value:T.date,onChange:C=>O({...T,date:C.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),v.jsxs("select",{value:T.severity,onChange:C=>O({...T,severity:C.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:C=>{const P=Number(C.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,P))})},placeholder:"0-100",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:C=>O({...T,expectedRepairTime:Number(C.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(V=T.mediaLinks)==null?void 0:V.map((C,P)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:C,onChange:te=>{const G=[...T.mediaLinks||[]];G[P]=te.target.value,O({...T,mediaLinks:G})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),P>0&&v.jsx("button",{type:"button",onClick:()=>{var G;const te=(G=T.mediaLinks)==null?void 0:G.filter((ve,Re)=>Re!==P);O({...T,mediaLinks:te})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},P)),v.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),v.jsx("textarea",{value:T.notes,onChange:C=>O({...T,notes:C.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),v.jsx("div",{style:{gridColumn:"1 / -1"},children:v.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"💥 Add Hit Record"})})]})]}),E&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),z&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:z}),!E&&!z&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{display:"grid",gap:"20px"},children:_.filter(C=>C.hits&&C.hits.length>0).map(C=>{var P;return v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[v.jsxs("div",{children:[v.jsx("h2",{style:{margin:0,color:"#dc2626"},children:C.name}),v.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[C.type," • ",C.hits.length," hit record",C.hits.length!==1?"s":""]})]}),v.jsx("button",{onClick:()=>A(F===C.id?null:C.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:F===C.id?"Cancel":"+ Add Hit"})]}),F===C.id&&v.jsxs("form",{onSubmit:te=>b(C.id,te),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),v.jsx("input",{type:"date",required:!0,value:T.date,onChange:te=>O({...T,date:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),v.jsxs("select",{value:T.severity,onChange:te=>O({...T,severity:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",required:!0,value:T.damagePercentage||20,onChange:te=>{const G=Number(te.target.value);O({...T,damagePercentage:Math.min(100,Math.max(0,G))})},placeholder:"0-100",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:T.expectedRepairTime,onChange:te=>O({...T,expectedRepairTime:Number(te.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(P=T.mediaLinks)==null?void 0:P.map((te,G)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:te,onChange:ve=>{const Re=[...T.mediaLinks||[]];Re[G]=ve.target.value,O({...T,mediaLinks:Re})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),G>0&&v.jsx("button",{type:"button",onClick:()=>{var Re;const ve=(Re=T.mediaLinks)==null?void 0:Re.filter(($,ue)=>ue!==G);O({...T,mediaLinks:ve})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},G)),v.jsx("button",{type:"button",onClick:()=>O({...T,mediaLinks:[...T.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),v.jsx("textarea",{value:T.notes,onChange:te=>O({...T,notes:te.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),v.jsx("div",{style:{gridColumn:"1 / -1"},children:v.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:"💥 Save Hit Record"})})]}),C.hits&&C.hits.length>0&&v.jsx("div",{style:{display:"grid",gap:"10px"},children:C.hits.map(te=>v.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),v.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",te.id]})]}),v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),v.jsx("div",{style:{color:"#fff"},children:new Date(te.date).toLocaleDateString()})]}),te.severity&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),v.jsx("div",{style:{color:"#fff",backgroundColor:te.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:te.severity})]}),te.damagePercentage!=null&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Production Impact"}),v.jsxs("div",{style:{color:"#f44336",fontWeight:"bold",fontSize:"14px"},children:["-",te.damagePercentage,"%"]})]}),te.expectedRepairTime&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),v.jsxs("div",{style:{color:"#FF9800"},children:[te.expectedRepairTime," days"]})]}),te.draft&&v.jsxs("div",{children:[v.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Status"}),v.jsx("div",{style:{color:"#000",backgroundColor:"#ff9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:"DRAFT"})]})]}),te.mediaLinks&&te.mediaLinks.length>0&&v.jsxs("div",{style:{marginTop:"10px"},children:[v.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:te.mediaLinks.map((G,ve)=>v.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[G.includes("youtube")||G.includes("youtu.be")||G.includes("video")?"📹":"📷"," Media ",ve+1]},ve))})]}),!te.mediaLinks&&te.videoLink&&v.jsx("div",{style:{marginTop:"10px"},children:v.jsx("a",{href:te.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:"🎥 View Video"})}),te.notes&&v.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[v.jsx("strong",{children:"Notes:"})," ",te.notes]})]}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsx("button",{onClick:()=>H(`/admin/hit/${te.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),v.jsx("button",{onClick:()=>D(C.id,te.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},te.id))})]},C.id)})}),_.filter(C=>C.hits&&C.hits.length>0).length===0&&v.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[v.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"💥"}),v.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),v.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[v.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&v.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),v.jsxs("form",{onSubmit:ee,children:[v.jsxs("div",{style:{marginBottom:"20px"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),v.jsx("input",{type:"email",value:n,onChange:C=>i(C.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsxs("div",{style:{marginBottom:"30px"},children:[v.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),v.jsx("input",{type:"password",value:s,onChange:C=>o(C.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),v.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),v.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},PN=()=>{const{id:t}=qm(),e=lu(),[n,i]=q.useState(!1),[s,o]=q.useState(null),[l,h]=q.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});q.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var _,w;i(!0);try{if(!Ne)throw new Error("Firebase not initialized");const E=Sn(Ne,Qe.FACILITIES,t),k=await bg(E);if(k.exists()){const z=k.data(),N=((_=z.location)==null?void 0:_.latitude)??z.latitude,F=((w=z.location)==null?void 0:w.longitude)??z.longitude;h({id:parseInt(k.id),name:z.name,type:z.type,capacity:z.capacity,gasCapacity:z.gasCapacity,latitude:N,longitude:F,status:z.status,hit:z.hit,description:z.description||"",draft:z.draft??!1})}else o("Facility not found")}catch(E){console.error("Error fetching facility:",E),o("Failed to load facility")}finally{i(!1)}},p=async(_=!1)=>{i(!0),o(null);try{if(!Ne)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),i(!1);return}let w=t;(!t||t==="new")&&(w=((await Un(Bn(Ne,Qe.FACILITIES))).docs.reduce((F,A)=>{const T=parseInt(A.id);return T>F?T:F},0)+1).toString());const E={id:parseInt(w),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},hit:l.hit??!1,draft:_?!1:l.draft??!0};l.status&&(E.status=l.status),l.gasCapacity!==void 0&&l.gasCapacity!==null&&(E.gasCapacity=l.gasCapacity),l.description&&(E.description=l.description);const k=Sn(Ne,Qe.FACILITIES,w);t&&t!=="new"?await eu(k,E):await Lg(k,E),alert(_?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(w){console.error("Error saving facility:",w),o("Failed to save facility")}finally{i(!1)}};return n&&t&&t!=="new"?v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:v.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[v.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),s&&v.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:s}),l.draft&&v.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:"⚠️ This facility is in DRAFT mode and is not visible on the public map"}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),v.jsx("input",{type:"text",value:l.name,onChange:_=>h({...l,name:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),v.jsxs("select",{value:l.type,onChange:_=>h({...l,type:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[v.jsx("option",{value:"refinery",children:"Refinery"}),v.jsx("option",{value:"extraction",children:"Extraction"}),v.jsx("option",{value:"storage",children:"Storage"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),v.jsxs("select",{value:l.status,onChange:_=>h({...l,status:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[v.jsx("option",{value:"operational",children:"Operational"}),v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"offline",children:"Offline"})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),v.jsx("input",{type:"number",value:l.capacity,onChange:_=>h({...l,capacity:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m³/year)"}),v.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:_=>h({...l,gasCapacity:_.target.value?Number(_.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),v.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:_=>h({...l,latitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),v.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:_=>h({...l,longitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),v.jsx("textarea",{value:l.description,onChange:_=>h({...l,description:_.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),v.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),v.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})},kN=()=>{var z;const{id:t}=qm(),e=lu(),[n,i]=q.useState(!1),[s,o]=q.useState([]),[l,h]=q.useState({id:0,facilityId:0,date:new Date().toISOString().split("T")[0],severity:"damaged",damagePercentage:20,mediaLinks:[""],expectedRepairTime:30,notes:"",draft:!0});q.useEffect(()=>{d(),t&&t!=="new"&&p(parseInt(t))},[t]);const d=async()=>{try{if(!Ne)throw new Error("Firebase not initialized");const F=(await Un(Bn(Ne,Qe.FACILITIES))).docs.map(A=>({id:parseInt(A.id),name:A.data().name,type:A.data().type}));o(F)}catch(N){console.error("Error fetching facilities:",N),alert("Failed to load facilities")}},p=async N=>{i(!0);try{if(!Ne)throw new Error("Firebase not initialized");const F=Sn(Ne,Qe.HITS,N.toString()),A=await bg(F);if(A.exists()){const T=A.data();h({id:N,facilityId:T.facilityId,date:T.date,severity:T.severity||"damaged",damagePercentage:T.damagePercentage||0,mediaLinks:T.mediaLinks||(T.videoLink?[T.videoLink]:[""]),expectedRepairTime:T.expectedRepairTime,notes:T.notes,draft:T.draft??!1})}else alert("Hit record not found"),e("/admin")}catch(F){console.error("Error fetching hit:",F),alert("Failed to load hit record")}finally{i(!1)}},_=async(N=!1)=>{var F;if(!l.facilityId){alert("Please select a facility");return}if(!l.date){alert("Please enter a date");return}i(!0);try{if(!Ne)throw new Error("Firebase not initialized");const A={facilityId:l.facilityId,date:l.date,severity:l.severity,damagePercentage:l.damagePercentage||0,mediaLinks:(F=l.mediaLinks)==null?void 0:F.filter(T=>T.trim()!==""),expectedRepairTime:l.expectedRepairTime,notes:l.notes,draft:N?!1:l.draft};if(t==="new"){const H=(await Un(Bn(Ne,Qe.HITS))).docs.reduce((ee,R)=>{const S=parseInt(R.id);return S>ee?S:ee},0)+1;await Lg(Sn(Ne,Qe.HITS,H.toString()),{...A,id:H});const Y=Sn(Ne,Qe.FACILITIES,l.facilityId.toString());await eu(Y,{hit:!0}),alert("Hit record created successfully!")}else{const T=Sn(Ne,Qe.HITS,t);await eu(T,A),alert("Hit record updated successfully!")}e("/admin")}catch(A){console.error("Error saving hit:",A),alert("Failed to save hit record")}finally{i(!1)}},w=()=>{h({...l,mediaLinks:[...l.mediaLinks||[],""]})},E=N=>{var F;h({...l,mediaLinks:(F=l.mediaLinks)==null?void 0:F.filter((A,T)=>T!==N)})},k=(N,F)=>{const A=[...l.mediaLinks||[]];A[N]=F,h({...l,mediaLinks:A})};return v.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",padding:"20px"},children:v.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{margin:0,marginBottom:"5px"},children:t==="new"?"💥 Add New Hit Record":"✏️ Edit Hit Record"}),v.jsx("p",{style:{margin:0,color:"#999"},children:t==="new"?"Record a new strike on a facility":`Editing Hit #${t}`})]}),v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"← Back to Admin"})]}),n&&v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading..."}),!n&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Facility *"}),v.jsxs("select",{value:l.facilityId,onChange:N=>h({...l,facilityId:parseInt(N.target.value)}),disabled:t!=="new",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:t!=="new"?"not-allowed":"pointer"},children:[v.jsx("option",{value:0,children:"-- Select a facility --"}),s.map(N=>v.jsxs("option",{value:N.id,children:[N.name," (",N.type,")"]},N.id))]}),t!=="new"&&v.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"12px"},children:"Facility cannot be changed after creation"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Date *"}),v.jsx("input",{type:"date",value:l.date,onChange:N=>h({...l,date:N.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Severity *"}),v.jsxs("select",{value:l.severity,onChange:N=>h({...l,severity:N.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[v.jsx("option",{value:"damaged",children:"Damaged"}),v.jsx("option",{value:"destroyed",children:"Destroyed"})]})]})]}),v.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Damage to Production (%) *"}),v.jsx("input",{type:"number",min:"0",max:"100",value:l.damagePercentage||0,onChange:N=>{const F=Number(N.target.value);h({...l,damagePercentage:Math.min(100,Math.max(0,F))})},placeholder:"0-100",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),v.jsx("p",{style:{margin:"6px 0 0 0",color:"#666",fontSize:"12px"},children:"Percentage of facility capacity affected by this hit"})]}),v.jsxs("div",{children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Expected Repair Time (days)"}),v.jsx("input",{type:"number",value:l.expectedRepairTime||"",onChange:N=>h({...l,expectedRepairTime:N.target.value?Number(N.target.value):void 0}),placeholder:"e.g., 30",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Media Links (Videos/Photos)"}),(z=l.mediaLinks)==null?void 0:z.map((N,F)=>v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[v.jsx("input",{type:"url",value:N,onChange:A=>k(F,A.target.value),placeholder:"https://...",style:{flex:1,padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),F>0&&v.jsx("button",{type:"button",onClick:()=>E(F),style:{padding:"12px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Remove"})]},F)),v.jsx("button",{type:"button",onClick:w,style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginTop:"10px"},children:"+ Add Another Link"})]}),v.jsxs("div",{style:{gridColumn:"1 / -1"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Notes"}),v.jsx("textarea",{value:l.notes,onChange:N=>h({...l,notes:N.target.value}),rows:5,placeholder:"Describe the damage, impact, and any other relevant details...",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]})]}),l.draft&&v.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ff9800",color:"#000",borderRadius:"4px",fontWeight:"600",textAlign:"center"},children:"⚠️ This hit record is in DRAFT mode and will not affect production calculations"}),v.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"15px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>e("/admin"),style:{padding:"12px 24px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),v.jsx("button",{onClick:()=>_(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#ff9800",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":"📝 Save as Draft"}),v.jsx("button",{onClick:()=>_(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":t==="new"?"💥 Publish Hit Record":"✓ Publish"})]})]})]})})};function sT(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const AN=1;function RN(t){return Object.freeze({__version:AN,map:t})}function Ug(t,e){return Object.freeze({...t,...e})}const oT=q.createContext(null),aT=oT.Provider;function Wg(){const t=q.useContext(oT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function lT(t){function e(n,i){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(i,()=>s),n.children==null?null:Cl.createElement(aT,{value:o},n.children)}return q.forwardRef(e)}function bN(t){function e(n,i){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(i,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?wx.createPortal(n.children,h):null}return q.forwardRef(e)}function LN(t){function e(n,i){const{instance:s}=t(n).current;return q.useImperativeHandle(i,()=>s),null}return q.forwardRef(e)}function Hg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Id(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function NN(t,e){return function(i,s){const o=Wg(),l=t(Id(i,o),o);return sT(o.map,i.attribution),Hg(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Zp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})($T,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,x,M;return M=function(){f=!1,g&&(x.apply(c,g),g=!1)},x=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(M,a),f=!0)},x}function _(r,a,c){var f=a[1],g=a[0],x=f-g;return r===f&&c?r:((r-g)%x+x)%x+g}function w(){return!1}function E(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function k(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function z(r){return k(r).split(/\s+/)}function N(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function F(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function T(r,a){return r.replace(A,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function H(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var R=0;function S(r){var a=+new Date,c=Math.max(0,16-(a-R));return R=a+c,window.setTimeout(r,c)}var b=window.requestAnimationFrame||ee("RequestAnimationFrame")||S,D=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function V(r,a,c){if(c&&b===S)r.call(a);else return b.call(window,l(r,a))}function C(r){r&&D.call(window,r)}var P={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:w,formatNum:E,trim:k,splitWords:z,setOptions:N,getParamString:F,template:T,isArray:O,indexOf:H,emptyImageUrl:Y,requestFn:b,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:C};function te(){}te.extend=function(r){var a=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(G(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,M=f._initHooks.length;x<M;x++)f._initHooks[x].call(this)}},a},te.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},te.mergeOptions=function(r){return s(this.prototype.options,r),this},te.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function G(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ve={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=z(r);for(var g=0,x=r.length;g<x;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=z(r);for(var g=arguments.length===1,x=0,M=r.length;x<M;x++)g?this._off(r[x]):this._off(r[x],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,x;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,x=f.length;g<x;g++)f[g].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var M=this._listens(r,a,c);if(M!==!1){var B=f[M];this._firingCount&&(B.fn=w,this._events[r]=f=f.slice()),f.splice(M,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var x=0,M=g.length;x<M;x++){var B=g[x],W=B.fn;B.once&&this.off(r,W,B.ctx),W.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var x=this._events&&this._events[r];if(x&&x.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var M in this._eventParents)if(this._eventParents[M].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,x=f.length;g<x;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=z(r);for(var g=0,x=r.length;g<x;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ve.addEventListener=ve.on,ve.removeEventListener=ve.clearAllEventListeners=ve.off,ve.addOneTimeEventListener=ve.once,ve.fireEvent=ve.fire,ve.hasEventListeners=ve.listens;var Re=te.extend(ve);function $(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ue=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new $(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new $(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(r,a,c){return r instanceof $?r:O(r)?new $(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new $(r.x,r.y):new $(r,a,c)}function he(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}he.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof $||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=Ee(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof $?r=X(r):r=Ee(r),r instanceof he?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=Ee(r);var a=this.min,c=this.max,f=r.min,g=r.max,x=g.x>=a.x&&f.x<=c.x,M=g.y>=a.y&&f.y<=c.y;return x&&M},overlaps:function(r){r=Ee(r);var a=this.min,c=this.max,f=r.min,g=r.max,x=g.x>a.x&&f.x<c.x,M=g.y>a.y&&f.y<c.y;return x&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return Ee(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=Ee(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Ee(r,a){return!r||r instanceof he?r:new he(r,a)}function Ue(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ue.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof Te)f=r,g=r;else if(r instanceof Ue){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(de(r)||xe(r)):this;return!a&&!c?(this._southWest=new Te(f.lat,f.lng),this._northEast=new Te(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ue(new Te(a.lat-f,a.lng-g),new Te(c.lat+f,c.lng+g))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Te||"lat"in r?r=de(r):r=xe(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ue?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=xe(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),x=g.lat>=a.lat&&f.lat<=c.lat,M=g.lng>=a.lng&&f.lng<=c.lng;return x&&M},overlaps:function(r){r=xe(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),x=g.lat>a.lat&&f.lat<c.lat,M=g.lng>a.lng&&f.lng<c.lng;return x&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=xe(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function xe(r,a){return r instanceof Ue?r:new Ue(r,a)}function Te(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}Te.prototype={equals:function(r,a){if(!r)return!1;r=de(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return mn.distance(this,de(r))},wrap:function(){return mn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return xe([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function de(r,a,c){return r instanceof Te?r:O(r)&&typeof r[0]!="object"?r.length===3?new Te(r[0],r[1],r[2]):r.length===2?new Te(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Te(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new Te(r,a,c)}var at={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new he(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?_(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?_(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new Te(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var x=r.getSouthWest(),M=r.getNorthEast(),B=new Te(x.lat-f,x.lng-g),W=new Te(M.lat-f,M.lng-g);return new Ue(B,W)}},mn=s({},at,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,x=Math.sin((a.lat-r.lat)*c/2),M=Math.sin((a.lng-r.lng)*c/2),B=x*x+Math.cos(f)*Math.cos(g)*M*M,W=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*W}}),ya=6378137,va={R:ya,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new $(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new Te((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=ya*Math.PI;return new he([-r,-r],[r,r])}()};function wa(r,a,c,f){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}wa.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new $((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Zi(r,a,c,f){return new wa(r,a,c,f)}var Gr=s({},mn,{code:"EPSG:3857",projection:va,transformation:function(){var r=.5/(Math.PI*va.R);return Zi(r,.5,-r,.5)}()}),xu=s({},Gr,{code:"EPSG:900913"});function Eu(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function zs(r,a){var c="",f,g,x,M,B,W;for(f=0,x=r.length;f<x;f++){for(B=r[f],g=0,M=B.length;g<M;g++)W=B[g],c+=(g?"L":"M")+W.x+" "+W.y;c+=a?le.svg?"z":"x":""}return c||"M0 0"}var Zr=document.documentElement.style,Kr="ActiveXObject"in window,yt=Kr&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Ki=Zt("webkit"),Tu=Zt("android"),xa=Zt("android 2")||Zt("android 3"),Cd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qr=Tu&&Zt("Google")&&Cd<537&&!("AudioNode"in window),Fs=!!window.opera,Ea=!vt&&Zt("chrome"),js=Zt("gecko")&&!Ki&&!Fs&&!Kr,Pd=!Ea&&Zt("safari"),Iu=Zt("phantom"),Ta="OTransition"in Zr,Su=navigator.platform.indexOf("Win")===0,Qi=Kr&&"transition"in Zr,Yr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xa,Bs="MozPerspective"in Zr,yi=!window.L_DISABLE_3D&&(Qi||Yr||Bs)&&!Ta&&!Iu,Yi=typeof orientation<"u"||Zt("mobile"),Us=Yi&&Ki,Cu=Yi&&Yr,Xi=!window.PointerEvent&&window.MSPointerEvent,Ia=!!(window.PointerEvent||Xi),wt="ontouchstart"in window||!!window.TouchEvent,Pu=!window.L_NO_TOUCH&&(wt||Ia),Xr=Yi&&Fs,Jr=Yi&&js,kd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ad=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),Ji=function(){return!!document.createElement("canvas").getContext}(),Sa=!!(document.createElementNS&&Eu("svg").createSVGRect),Rd=!!Sa&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ws=!Sa&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),ku=navigator.platform.indexOf("Mac")===0,Au=navigator.platform.indexOf("Linux")===0;function Zt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var le={ie:Kr,ielt9:yt,edge:vt,webkit:Ki,android:Tu,android23:xa,androidStock:Qr,opera:Fs,chrome:Ea,gecko:js,safari:Pd,phantom:Iu,opera12:Ta,win:Su,ie3d:Qi,webkit3d:Yr,gecko3d:Bs,any3d:yi,mobile:Yi,mobileWebkit:Us,mobileWebkit3d:Cu,msPointer:Xi,pointer:Ia,touch:Pu,touchNative:wt,mobileOpera:Xr,mobileGecko:Jr,retina:kd,passiveEvents:Ad,canvas:Ji,svg:Sa,vml:Ws,inlineSvg:Rd,mac:ku,linux:Au},Ru=le.msPointer?"MSPointerDown":"pointerdown",bn=le.msPointer?"MSPointerMove":"pointermove",Ca=le.msPointer?"MSPointerUp":"pointerup",Pa=le.msPointer?"MSPointerCancel":"pointercancel",es={touchstart:Ru,touchmove:bn,touchend:Ca,touchcancel:Pa},Hs={touchstart:ka,touchmove:gn,touchend:gn,touchcancel:gn},vi={},bu=!1;function Lu(r,a,c){return a==="touchstart"&&ts(),Hs[a]?(c=Hs[a].bind(this,c),r.addEventListener(es[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function bd(r,a,c){if(!es[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(es[a],c,!1)}function $s(r){vi[r.pointerId]=r}function Nu(r){vi[r.pointerId]&&(vi[r.pointerId]=r)}function qs(r){delete vi[r.pointerId]}function ts(){bu||(document.addEventListener(Ru,$s,!0),document.addEventListener(bn,Nu,!0),document.addEventListener(Ca,qs,!0),document.addEventListener(Pa,qs,!0),bu=!0)}function gn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in vi)a.touches.push(vi[c]);a.changedTouches=[a],r(a)}}function ka(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&lt(a),gn(r,a)}function Ld(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ou=200;function Mu(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(x){if(x.detail!==1){f=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var M=Na(x);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Ou?(f++,f===2&&a(Ld(x))):f=1,c=B}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Du(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var ns=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Aa=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function Ra(r){return typeof r=="string"?document.getElementById(r):r}function er(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function be(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Me(r){var a=r.parentNode;a&&a.removeChild(r)}function Bt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function _n(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function yn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function is(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=Qn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function oe(r,a){if(r.classList!==void 0)for(var c=z(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!is(r,a)){var x=Qn(r);xi(r,(x?x+" ":"")+a)}}function We(r,a){r.classList!==void 0?r.classList.remove(a):xi(r,k((" "+Qn(r)+" ").replace(" "+a+" "," ")))}function xi(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function Qn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Kt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Vu(r,a)}function Vu(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function Gs(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Ei(r,a,c){var f=a||new $(0,0);r.style[ns]=(le.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function tt(r,a){r._leaflet_pos=a,le.any3d?Ei(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Ti(r){return r._leaflet_pos||new $(0,0)}var Ln,on,Zs;if("onselectstart"in document)Ln=function(){ge(window,"selectstart",lt)},on=function(){je(window,"selectstart",lt)};else{var tr=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ln=function(){if(tr){var r=document.documentElement.style;Zs=r[tr],r[tr]="none"}},on=function(){tr&&(document.documentElement.style[tr]=Zs,Zs=void 0)}}function Ks(){ge(window,"dragstart",lt)}function Qs(){je(window,"dragstart",lt)}var rs,Yn;function ba(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ys(),rs=r,Yn=r.style.outlineStyle,r.style.outlineStyle="none",ge(window,"keydown",Ys))}function Ys(){rs&&(rs.style.outlineStyle=Yn,rs=void 0,Yn=void 0,je(window,"keydown",Ys))}function zu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function vn(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Nd={__proto__:null,TRANSFORM:ns,TRANSITION:wi,TRANSITION_END:Aa,get:Ra,getStyle:er,create:be,remove:Me,empty:Bt,toFront:_n,toBack:yn,hasClass:is,addClass:oe,removeClass:We,setClass:xi,getClass:Qn,setOpacity:Kt,testProp:Gs,setTransform:Ei,setPosition:tt,getPosition:Ti,get disableTextSelection(){return Ln},get enableTextSelection(){return on},disableImageDrag:Ks,enableImageDrag:Qs,preventOutline:ba,restoreOutline:Ys,getSizedParentNode:zu,getScale:vn};function ge(r,a,c,f){if(a&&typeof a=="object")for(var g in a)Xs(r,g,a[g],c);else{a=z(a);for(var x=0,M=a.length;x<M;x++)Xs(r,a[x],c,f)}return this}var Ut="_leaflet_events";function je(r,a,c,f){if(arguments.length===1)nr(r),delete r[Ut];else if(a&&typeof a=="object")for(var g in a)ss(r,g,a[g],c);else if(a=z(a),arguments.length===2)nr(r,function(B){return H(a,B)!==-1});else for(var x=0,M=a.length;x<M;x++)ss(r,a[x],c,f);return this}function nr(r,a){for(var c in r[Ut]){var f=c.split(/\d/)[0];(!a||a(f))&&ss(r,f,null,null,c)}}var Ii={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[Ut]&&r[Ut][g])return this;var x=function(B){return c.call(f||r,B||window.event)},M=x;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?x=Lu(r,a,x):le.touch&&a==="dblclick"?x=Mu(r,x):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Ii[a]||a,x,le.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(x=function(B){B=B||window.event,Ma(r,B)&&M(B)},r.addEventListener(Ii[a],x,!1)):r.addEventListener(a,M,!1):r.attachEvent("on"+a,x),r[Ut]=r[Ut]||{},r[Ut][g]=x}function ss(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var x=r[Ut]&&r[Ut][g];if(!x)return this;!le.touchNative&&le.pointer&&a.indexOf("touch")===0?bd(r,a,x):le.touch&&a==="dblclick"?Du(r,x):"removeEventListener"in r?r.removeEventListener(Ii[a]||a,x,!1):r.detachEvent("on"+a,x),r[Ut][g]=null}function Ve(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function La(r){return Xs(r,"wheel",Ve),this}function os(r){return ge(r,"mousedown touchstart dblclick contextmenu",Ve),r._leaflet_disable_click=!0,this}function lt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Xn(r){return lt(r),Ve(r),this}function Na(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function as(r,a){if(!a)return new $(r.clientX,r.clientY);var c=vn(a),f=c.boundingClientRect;return new $((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Jn=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oa(r){return le.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Jn:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ma(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ls={__proto__:null,on:ge,off:je,stopPropagation:Ve,disableScrollPropagation:La,disableClickPropagation:os,preventDefault:lt,stop:Xn,getPropagationPath:Na,getMousePosition:as,getWheelDelta:Oa,isExternalTarget:Ma,addListener:ge,removeListener:je},Da=Re.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Ti(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),tt(this._el,c),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ie=Re.extend({options:{crs:Gr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=N(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(de(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,Aa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(de(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),x=r instanceof $?r:this.latLngToContainerPoint(r),M=x.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(M));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():xe(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var x=f.subtract(c).divideBy(2),M=this.project(r.getSouthWest(),g),B=this.project(r.getNorthEast(),g),W=this.unproject(M.add(B).divideBy(2).add(x),g);return{center:W,zoom:g}},fitBounds:function(r,a){if(r=xe(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!le.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),x=this.getSize(),M=this._zoom;r=de(r),a=a===void 0?M:a;var B=Math.max(x.x,x.y),W=B*this.getZoomScale(M,a),Q=g.distanceTo(f)||1,re=1.42,fe=re*re;function Se(ut){var ec=ut?-1:1,jT=ut?W:B,BT=W*W-B*B+ec*fe*fe*Q*Q,UT=2*jT*fe*Q,zd=BT/UT,d_=Math.sqrt(zd*zd+1)-zd,WT=d_<1e-9?-18:Math.log(d_);return WT}function Wt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function xt(ut){return(Math.exp(ut)+Math.exp(-ut))/2}function En(ut){return Wt(ut)/xt(ut)}var Yt=Se(0);function ho(ut){return B*(xt(Yt)/xt(Yt+re*ut))}function DT(ut){return B*(xt(Yt)*En(Yt+re*ut)-Wt(Yt))/fe}function VT(ut){return 1-Math.pow(1-ut,1.5)}var zT=Date.now(),c_=(Se(1)-Yt)/re,FT=c.duration?1e3*c.duration:1e3*c_*.8;function h_(){var ut=(Date.now()-zT)/FT,ec=VT(ut)*c_;ut<=1?(this._flyToFrame=V(h_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(DT(ec)/Q)),M),this.getScaleZoom(B/ho(ec),M),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),h_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=xe(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,xe(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),x=this.project(r),M=this.getPixelBounds(),B=Ee([M.min.add(c),M.max.subtract(f)]),W=B.getSize();if(!B.contains(x)){this._enforcingBounds=!0;var Q=x.subtract(B.getCenter()),re=B.extend(x).getSize().subtract(W);g.x+=Q.x<0?-re.x:re.x,g.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),x=f.subtract(g);return!x.x&&!x.y?this:(r.animate&&r.pan?this.panBy(x):(r.pan&&this._rawPanBy(x),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new Te(a,c),g=f.toBounds(r.coords.accuracy*2),x=this._locateOptions;if(x.setView){var M=this.getBoundsZoom(g);this.setView(f,x.maxZoom?Math.min(M,x.maxZoom):M)}var B={latlng:f,bounds:g,timestamp:r.timestamp};for(var W in r.coords)typeof r.coords[W]=="number"&&(B[W]=r.coords[W]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Me(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=be("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ue(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=xe(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),x=this.getMaxZoom(),M=r.getNorthWest(),B=r.getSouthEast(),W=this.getSize().subtract(c),Q=Ee(this.project(B,f),this.project(M,f)).getSize(),re=le.any3d?this.options.zoomSnap:1,fe=W.x/Q.x,Se=W.y/Q.y,Wt=a?Math.max(fe,Se):Math.min(fe,Se);return f=this.getScaleZoom(Wt,f),re&&(f=Math.round(f/(re/100))*(re/100),f=a?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(g,Math.min(x,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(de(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(de(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(de(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(xe(r))},distance:function(r,a){return this.options.crs.distance(de(r),de(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(r)))},mouseEventToContainerPoint:function(r){return as(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Ra(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,oe(r,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=er(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(r.markerPane,"leaflet-zoom-hide"),oe(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){tt(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){tt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?je:ge;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",x=r.target||r.srcElement,M=!1;x;){if(f=this._targets[d(x)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){M=!0;break}if(f&&f.listens(a,!0)&&(g&&!Ma(x,r)||(c.push(f),g))||x===this._container)break;x=x.parentNode}return!c.length&&!M&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ba(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var x=[],M=0;M<c.length;M++)c[M].listens(a,!0)&&x.push(c[M]);g=x.concat(g)}if(g.length){a==="contextmenu"&&lt(r);var B=g[0],W={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Q=B.getLatLng&&(!B._radius||B._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?B.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<g.length;M++)if(g[M].fire(a,W,!0),W.originalEvent._stopped||g[M].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Ti(this._mapPane)||new $(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return Ee([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),x=new he(f.subtract(g),f.add(g)),M=this._getBoundsOffset(x,c,a);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?r:this.unproject(f.add(M),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new he(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=Ee(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),x=f.max.subtract(r.max),M=this._rebound(g.x,-x.x),B=this._rebound(g.y,-x.y);return new $(M,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=le.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=ns,f=this._proxy.style[c];Ei(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Ei(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(r,a){return new Ie(r,a)}var Qt=te.extend({options:{position:"topright"},initialize:function(r){N(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return oe(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ei=function(r){return new Qt(r)};Ie.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=be("div",a+"control-container",this._container);function f(g,x){var M=a+g+" "+a+x;r[g+x]=be("div",M,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Me(this._controlCorners[r]);Me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){N(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Qt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=be("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),os(a),La(a);var f=this._section=be("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ge(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=be("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ge(g,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){lt(x),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=be("div",r+"-base",f),this._separator=be("div",r+"-separator",f),this._overlaysList=be("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bt(this._baseLayersList),Bt(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ge(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var x=document.createElement("span");a.appendChild(x),x.appendChild(f),x.appendChild(g);var M=r.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var x=r.length-1;x>=0;x--)a=r[x],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])&&this._map.removeLayer(g[x]);for(x=0;x<f.length;x++)this._map.hasLayer(f[x])||this._map.addLayer(f[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ge(r,"click",lt),this.expand();var a=this;setTimeout(function(){je(r,"click",lt),a._preventClick=!1})}}),ju=function(r,a,c){return new Fu(r,a,c)},Si=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=be("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var x=be("a",c,f);return x.innerHTML=r,x.href="#",x.title=a,x.setAttribute("role","button"),x.setAttribute("aria-label",a),os(x),ge(x,"click",Xn),ge(x,"click",g,this),ge(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";We(this._zoomInButton,a),We(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(oe(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(oe(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Si,this.addControl(this.zoomControl))});var Bu=function(r){return new Si(r)},Va=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=be("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=be("div",a,c)),r.imperial&&(this._iScale=be("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),za=function(r){return new Va(r)},Fa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eo=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Fa+" ":"")+"Leaflet</a>"},initialize:function(r){N(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=be("div","leaflet-control-attribution"),os(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new eo().addTo(this)});var to=function(r){return new eo(r)};Qt.Layers=Fu,Qt.Zoom=Si,Qt.Scale=Va,Qt.Attribution=eo,ei.layers=ju,ei.zoom=Bu,ei.scale=za,ei.attribution=to;var an=te.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(r,a){return r.addHandler(a,this),this};var Uu={Events:ve},ti=le.touch?"touchstart mousedown":"mousedown",Nn=Re.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){N(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ge(this._dragStartTarget,ti,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nn._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,ti,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!is(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Nn._dragging===this&&this.finishDrag();return}if(!(Nn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Nn._dragging=this,this._preventOutline&&ba(this._element),Ks(),Ln(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=zu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=Ti(this._element),this._parentScale=vn(c);var f=r.type==="mousedown";ge(document,f?"mousemove":"touchmove",this._onMove,this),ge(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,lt(r),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),tt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),Qs(),on();var a=this._moved&&this._moving;this._moving=!1,Nn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ja(r,a,c){var f,g=[1,4,2,8],x,M,B,W,Q,re,fe,Se;for(x=0,re=r.length;x<re;x++)r[x]._code=U(r[x],a);for(B=0;B<4;B++){for(fe=g[B],f=[],x=0,re=r.length,M=re-1;x<re;M=x++)W=r[x],Q=r[M],W._code&fe?Q._code&fe||(Se=j(Q,W,fe,a,c),Se._code=U(Se,a),f.push(Se)):(Q._code&fe&&(Se=j(Q,W,fe,a,c),Se._code=U(Se,a),f.push(Se)),f.push(W));r=f}return r}function Ba(r,a){var c,f,g,x,M,B,W,Q,re;if(!r||r.length===0)throw new Error("latlngs not passed");De(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var fe=de([0,0]),Se=xe(r),Wt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Wt<1700&&(fe=no(r));var xt=r.length,En=[];for(c=0;c<xt;c++){var Yt=de(r[c]);En.push(a.project(de([Yt.lat-fe.lat,Yt.lng-fe.lng])))}for(B=W=Q=0,c=0,f=xt-1;c<xt;f=c++)g=En[c],x=En[f],M=g.y*x.x-x.y*g.x,W+=(g.x+x.x)*M,Q+=(g.y+x.y)*M,B+=M*3;B===0?re=En[0]:re=[W/B,Q/B];var ho=a.unproject(X(re));return de([ho.lat+fe.lat,ho.lng+fe.lng])}function no(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var x=de(r[g]);a+=x.lat,c+=x.lng,f++}return de([a/f,c/f])}var io={__proto__:null,clipPolygon:ja,polygonCenter:Ba,centroid:no};function Lt(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=m(r,c),r=ir(r,c),r}function Ua(r,a,c){return Math.sqrt(_e(r,a,c,!0))}function Wu(r,a,c){return _e(r,a,c)}function ir(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var x,M=[];for(x=0;x<c;x++)g[x]&&M.push(r[x]);return M}function u(r,a,c,f,g){var x=0,M,B,W;for(B=f+1;B<=g-1;B++)W=_e(r[B],r[f],r[g],!0),W>x&&(M=B,x=W);x>c&&(a[M]=1,u(r,a,c,f,M),u(r,a,c,M,g))}function m(r,a){for(var c=[r[0]],f=1,g=0,x=r.length;f<x;f++)ne(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<x-1&&c.push(r[x-1]),c}var y;function I(r,a,c,f,g){var x=f?y:U(r,c),M=U(a,c),B,W,Q;for(y=M;;){if(!(x|M))return[r,a];if(x&M)return!1;B=x||M,W=j(r,a,B,c,g),Q=U(W,c),B===x?(r=W,x=Q):(a=W,M=Q)}}function j(r,a,c,f,g){var x=a.x-r.x,M=a.y-r.y,B=f.min,W=f.max,Q,re;return c&8?(Q=r.x+x*(W.y-r.y)/M,re=W.y):c&4?(Q=r.x+x*(B.y-r.y)/M,re=B.y):c&2?(Q=W.x,re=r.y+M*(W.x-r.x)/x):c&1&&(Q=B.x,re=r.y+M*(B.x-r.x)/x),new $(Q,re,g)}function U(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function ne(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function _e(r,a,c,f){var g=a.x,x=a.y,M=c.x-g,B=c.y-x,W=M*M+B*B,Q;return W>0&&(Q=((r.x-g)*M+(r.y-x)*B)/W,Q>1?(g=c.x,x=c.y):Q>0&&(g+=M*Q,x+=B*Q)),M=r.x-g,B=r.y-x,f?M*M+B*B:new $(g,x)}function De(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function ze(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),De(r)}function it(r,a){var c,f,g,x,M,B,W,Q;if(!r||r.length===0)throw new Error("latlngs not passed");De(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var re=de([0,0]),fe=xe(r),Se=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Se<1700&&(re=no(r));var Wt=r.length,xt=[];for(c=0;c<Wt;c++){var En=de(r[c]);xt.push(a.project(de([En.lat-re.lat,En.lng-re.lng])))}for(c=0,f=0;c<Wt-1;c++)f+=xt[c].distanceTo(xt[c+1])/2;if(f===0)Q=xt[0];else for(c=0,x=0;c<Wt-1;c++)if(M=xt[c],B=xt[c+1],g=M.distanceTo(B),x+=g,x>f){W=(x-f)/g,Q=[B.x-W*(B.x-M.x),B.y-W*(B.y-M.y)];break}var Yt=a.unproject(X(Q));return de([Yt.lat+re.lat,Yt.lng+re.lng])}var wn={__proto__:null,simplify:Lt,pointToSegmentDistance:Ua,closestPointOnSegment:Wu,clipSegment:I,_getEdgeIntersection:j,_getBitCode:U,_sqClosestPointOnSegment:_e,isFlat:De,_flat:ze,polylineCenter:it},On={project:function(r){return new $(r.lng,r.lat)},unproject:function(r){return new Te(r.y,r.x)},bounds:new he([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,x=Math.sqrt(1-g*g),M=x*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-M)/(1+M),x/2);return f=-c*Math.log(Math.max(B,1e-10)),new $(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),x=Math.exp(-r.y/c),M=Math.PI/2-2*Math.atan(x),B=0,W=.1,Q;B<15&&Math.abs(W)>1e-7;B++)Q=g*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),g/2),W=Math.PI/2-2*Math.atan(x*Q)-M,M+=W;return new Te(M*a,r.x*a/c)}},ni={__proto__:null,LonLat:On,Mercator:xn,SphericalMercator:va},ro=s({},mn,{code:"EPSG:3395",projection:xn,transformation:function(){var r=.5/(Math.PI*xn.R);return Zi(r,.5,-r,.5)}()}),so=s({},mn,{code:"EPSG:4326",projection:On,transformation:Zi(1/180,1,-1/180,.5)}),pT=s({},at,{projection:On,transformation:Zi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});at.Earth=mn,at.EPSG3395=ro,at.EPSG3857=Gr,at.EPSG900913=xu,at.EPSG4326=so,at.Simple=pT;var Mn=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oo=Mn.extend({initialize:function(r,a){N(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),mT=function(r,a){return new oo(r,a)},Ci=oo.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),oo.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),oo.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ue;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),gT=function(r,a){return new Ci(r,a)},ao=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){N(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),x=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),x&&(r.style.marginLeft=-x.x+"px",r.style.marginTop=-x.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return le.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function _T(r){return new ao(r)}var Wa=ao.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Wa.imagePath!="string"&&(Wa.imagePath=this._detectIconPath()),(this.options.imagePath||Wa.imagePath)+ao.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var x=f.exec(c);return x&&x[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=be("div","leaflet-default-icon-path",document.body),a=er(r,"background-image")||er(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),$g=an.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Nn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,x=Ti(a._icon),M=c.getPixelBounds(),B=c.getPixelOrigin(),W=Ee(M.min._subtract(B).add(g),M.max._subtract(B).subtract(g));if(!W.contains(x)){var Q=X((Math.max(W.max.x,x.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,x.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,x.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,x.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(f);c.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),tt(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=V(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=Ti(a._icon),g=a._map.layerPointToLatLng(f);c&&tt(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Hu=Mn.extend({options:{icon:new Wa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){N(this,a),this._latlng=de(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=de(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),oe(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),x=!1;g!==this._shadow&&(this._removeShadow(),x=!0),g&&(oe(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&x&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Me(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&tt(this._icon,r),this._shadow&&tt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$g)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $g(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Kt(this._icon,r),this._shadow&&Kt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yT(r,a){return new Hu(r,a)}var rr=Mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return N(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$u=rr.extend({options:{fill:!0,radius:10},initialize:function(r,a){N(this,a),this._latlng=de(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=de(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return rr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new he(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function vT(r,a){return new $u(r,a)}var Od=$u.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),N(this,a),this._latlng=de(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ue(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:rr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===mn.distance){var g=Math.PI/180,x=this._mRadius/mn.R/g,M=c.project([a+x,r]),B=c.project([a-x,r]),W=M.add(B).divideBy(2),Q=c.unproject(W).lat,re=Math.acos((Math.cos(x*g)-Math.sin(a*g)*Math.sin(Q*g))/(Math.cos(a*g)*Math.cos(Q*g)))/g;(isNaN(re)||re===0)&&(re=x/Math.cos(Math.PI/180*a)),this._point=W.subtract(c.getPixelOrigin()),this._radius=isNaN(re)?0:W.x-c.project([Q,r-re]).x,this._radiusY=W.y-M.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function wT(r,a,c){return new Od(r,a,c)}var Pi=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){N(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=_e,g,x,M=0,B=this._parts.length;M<B;M++)for(var W=this._parts[M],Q=1,re=W.length;Q<re;Q++){g=W[Q-1],x=W[Q];var fe=f(r,g,x,!0);fe<a&&(a=fe,c=f(r,g,x))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return it(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=de(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ue,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return De(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=De(r),f=0,g=r.length;f<g;f++)c?(a[f]=de(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new $(r,r);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof Te,g=r.length,x,M;if(f){for(M=[],x=0;x<g;x++)M[x]=this._map.latLngToLayerPoint(r[x]),c.extend(M[x]);a.push(M)}else for(x=0;x<g;x++)this._projectLatlngs(r[x],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,x,M,B,W;for(c=0,g=0,x=this._rings.length;c<x;c++)for(W=this._rings[c],f=0,M=W.length;f<M-1;f++)B=I(W[f],W[f+1],r,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==W[f+1]||f===M-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Lt(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,x,M,B,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,x=this._parts.length;c<x;c++)for(B=this._parts[c],f=0,M=B.length,g=M-1;f<M;g=f++)if(!(!a&&f===0)&&Ua(r,B[g],B[f])<=W)return!0;return!1}});function xT(r,a){return new Pi(r,a)}Pi._flat=ze;var lo=Pi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ba(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Pi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof Te&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Pi.prototype._setLatLngs.call(this,r),De(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return De(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(r=new he(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,x;f<g;f++)x=ja(this._rings[f],r,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,x,M,B,W,Q;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(x=0,W=this._parts.length;x<W;x++)for(c=this._parts[x],M=0,Q=c.length,B=Q-1;M<Q;B=M++)f=c[M],g=c[B],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Pi.prototype._containsPoint.call(this,r,!0)}});function ET(r,a){return new lo(r,a)}var ki=Ci.extend({initialize:function(r,a){N(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var x=this.options;if(x.filter&&!x.filter(r))return this;var M=qu(r,x);return M?(M.feature=Ku(r),M.defaultOptions=M.options,this.resetStyle(M),x.onEachFeature&&x.onEachFeature(r,M),this.addLayer(M)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function qu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],x=a&&a.pointToLayer,M=a&&a.coordsToLatLng||Md,B,W,Q,re;if(!f&&!c)return null;switch(c.type){case"Point":return B=M(f),qg(x,r,B,a);case"MultiPoint":for(Q=0,re=f.length;Q<re;Q++)B=M(f[Q]),g.push(qg(x,r,B,a));return new Ci(g);case"LineString":case"MultiLineString":return W=Gu(f,c.type==="LineString"?0:1,M),new Pi(W,a);case"Polygon":case"MultiPolygon":return W=Gu(f,c.type==="Polygon"?1:2,M),new lo(W,a);case"GeometryCollection":for(Q=0,re=c.geometries.length;Q<re;Q++){var fe=qu({geometry:c.geometries[Q],type:"Feature",properties:r.properties},a);fe&&g.push(fe)}return new Ci(g);case"FeatureCollection":for(Q=0,re=c.features.length;Q<re;Q++){var Se=qu(c.features[Q],a);Se&&g.push(Se)}return new Ci(g);default:throw new Error("Invalid GeoJSON object.")}}function qg(r,a,c,f){return r?r(a,c):new Hu(c,f&&f.markersInheritOptions&&f)}function Md(r){return new Te(r[1],r[0],r[2])}function Gu(r,a,c){for(var f=[],g=0,x=r.length,M;g<x;g++)M=a?Gu(r[g],a-1,c):(c||Md)(r[g]),f.push(M);return f}function Dd(r,a){return r=de(r),r.alt!==void 0?[E(r.lng,a),E(r.lat,a),E(r.alt,a)]:[E(r.lng,a),E(r.lat,a)]}function Zu(r,a,c,f){for(var g=[],x=0,M=r.length;x<M;x++)g.push(a?Zu(r[x],De(r[x])?0:a-1,c,f):Dd(r[x],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function uo(r,a){return r.feature?s({},r.feature,{geometry:a}):Ku(a)}function Ku(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Vd={toGeoJSON:function(r){return uo(this,{type:"Point",coordinates:Dd(this.getLatLng(),r)})}};Hu.include(Vd),Od.include(Vd),$u.include(Vd),Pi.include({toGeoJSON:function(r){var a=!De(this._latlngs),c=Zu(this._latlngs,a?1:0,!1,r);return uo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),lo.include({toGeoJSON:function(r){var a=!De(this._latlngs),c=a&&!De(this._latlngs[0]),f=Zu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),uo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),oo.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var x=g.toGeoJSON(r);if(c)f.push(x.geometry);else{var M=Ku(x);M.type==="FeatureCollection"?f.push.apply(f,M.features):f.push(M)}}}),c?uo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Gg(r,a){return new ki(r,a)}var TT=Gg,Qu=Mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=xe(a),N(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&_n(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=xe(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:be("img");if(oe(a,"leaflet-image-layer"),this._zoomAnimated&&oe(a,"leaflet-zoom-animated"),this.options.className&&oe(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Ei(this._image,c,a)},_reset:function(){var r=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();tt(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),IT=function(r,a,c){return new Qu(r,a,c)},Zg=Qu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:be("video");if(oe(a,"leaflet-image-layer"),this._zoomAnimated&&oe(a,"leaflet-zoom-animated"),this.options.className&&oe(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var M=be("source");M.src=this._url[x],a.appendChild(M)}}});function ST(r,a,c){return new Zg(r,a,c)}var Kg=Qu.extend({_initImage:function(){var r=this._image=this._url;oe(r,"leaflet-image-layer"),this._zoomAnimated&&oe(r,"leaflet-zoom-animated"),this.options.className&&oe(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function CT(r,a,c){return new Kg(r,a,c)}var ii=Mn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof Te||O(r))?(this._latlng=de(r),N(this,a)):(N(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Me,void 0,this._container),200)):Me(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=de(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_n(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ci){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?tt(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Mn.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(N(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Yu=ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ii.prototype.openOn.call(this,r)},onAdd:function(r){ii.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ve))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ve))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=be("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=be("div",r+"-content-wrapper",a);if(this._contentNode=be("div",r+"-content",c),os(a),La(this._contentNode),ge(a,"contextmenu",Ve),this._tipContainer=be("div",r+"-tip-container",a),this._tip=be("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=be("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ge(f,"click",function(g){lt(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,x="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",oe(r,x)):We(r,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();tt(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(er(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(Ti(this._container));var x=r.layerPointToContainerPoint(g),M=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||M),W=X(this.options.autoPanPaddingBottomRight||M),Q=r.getSize(),re=0,fe=0;x.x+f+W.x>Q.x&&(re=x.x+f-Q.x+W.x),x.x-re-B.x<0&&(re=x.x-B.x),x.y+c+W.y>Q.y&&(fe=x.y+c-Q.y+W.y),x.y-fe-B.y<0&&(fe=x.y-B.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),PT=function(r,a){return new Yu(r,a)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(r,a,c){return this._initOverlay(Yu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Mn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Yu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ci||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Xn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Xu=ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ii.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,x=f.latLngToContainerPoint(f.getCenter()),M=f.layerPointToContainerPoint(r),B=this.options.direction,W=g.offsetWidth,Q=g.offsetHeight,re=X(this.options.offset),fe=this._getAnchor();B==="top"?(a=W/2,c=Q):B==="bottom"?(a=W/2,c=0):B==="center"?(a=W/2,c=Q/2):B==="right"?(a=0,c=Q/2):B==="left"?(a=W,c=Q/2):M.x<x.x?(B="right",a=0,c=Q/2):(B="left",a=W+(re.x+fe.x)*2,c=Q/2),r=r.subtract(X(a,c,!0)).add(re).add(fe),We(g,"leaflet-tooltip-right"),We(g,"leaflet-tooltip-left"),We(g,"leaflet-tooltip-top"),We(g,"leaflet-tooltip-bottom"),oe(g,"leaflet-tooltip-"+B),tt(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Kt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kT=function(r,a){return new Xu(r,a)};Ie.include({openTooltip:function(r,a,c){return this._initOverlay(Xu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Mn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ci||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ge(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ge(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Qg=ao.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Bt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function AT(r){return new Qg(r)}ao.Default=Wa;var Ha=Mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){N(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Me(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof $?r:new $(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,x;f<g;f++)x=a[f].style.zIndex,a[f]!==this._container&&x&&(c=r(c,+x));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){Kt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var x=Math.min(1,(r-g.loaded)/200);Kt(g.el,x),x<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(C(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Me(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Me(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),x=Math.floor(a/2),M=c-1,B=new $(+g,+x);B.z=+M;var W=this._tileCoordsToKey(B),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>f?this._retainParent(g,x,M,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var x=2*a;x<2*a+2;x++){var M=new $(g,x);M.z=c+1;var B=this._tileCoordsToKey(M),W=this._tiles[B];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);c+1<f&&this._retainChildren(g,x,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var x=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||x)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();le.any3d?Ei(r.el,g,f):tt(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),x=a.getSize().divideBy(f*2);return new he(g.subtract(x),g.add(x))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),x=g.getCenter(),M=[],B=this.options.keepBuffer,W=new he(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!W.contains(new $(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var fe=g.min.y;fe<=g.max.y;fe++)for(var Se=g.min.x;Se<=g.max.x;Se++){var Wt=new $(Se,fe);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var xt=this._tiles[this._tileCoordsToKey(Wt)];xt?xt.current=!0:M.push(Wt)}}if(M.sort(function(Yt,ho){return Yt.distanceTo(x)-ho.distanceTo(x)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var En=document.createDocumentFragment();for(Se=0;Se<M.length;Se++)this._addTile(M[Se],En);this._level.el.appendChild(En)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return xe(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),x=a.unproject(f,r.z),M=a.unproject(g,r.z);return[x,M]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ue(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Me(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){oe(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,le.ielt9&&this.options.opacity<1&&Kt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&V(l(this._tileReady,this,r,null,g)),tt(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),C(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(oe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new $(this._wrapX?_(r.x,this._wrapX):r.x,this._wrapY?_(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new he(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function RT(r){return new Ha(r)}var co=Ha.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=N(this,a),a.detectRetina&&le.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ge(c,"load",l(this._tileOnLoad,this,a,c)),ge(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:le.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return T(this._url,s(a,this.options))},_tileOnLoad:function(r,a){le.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Y;var c=this._tiles[r].coords;Me(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),Ha.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Ha.prototype._tileReady.call(this,r,a,c)}});function Yg(r,a){return new co(r,a)}var Xg=co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=N(this,a);var g=a.detectRetina&&le.retina?2:1,x=this.getTileSize();c.width=x.x*g,c.height=x.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,co.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=Ee(c.project(a[0]),c.project(a[1])),g=f.min,x=f.max,M=(this._wmsVersion>=1.3&&this._crs===so?[g.y,g.x,x.y,x.x]:[g.x,g.y,x.x,x.y]).join(","),B=co.prototype.getTileUrl.call(this,r);return B+F(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function bT(r,a){return new Xg(r,a)}co.WMS=Xg,Yg.wms=bT;var Ai=Mn.extend({options:{padding:.1},initialize:function(r){N(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),x=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));le.any3d?Ei(this._container,x,c):tt(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jg=Ai.extend({options:{tolerance:0},getEvents:function(){var r=Ai.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ge(r,"mousemove",this._onMouseMove,this),ge(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,Me(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ai.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=le.retina?2:1;tt(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,x,M=r._parts,B=M.length,W=this._ctx;if(B){for(W.beginPath(),c=0;c<B;c++){for(f=0,g=M[c].length;f<g;f++)x=M[c][f],W[f?"lineTo":"moveTo"](x.x,x.y);a&&W.closePath()}this._fillStroke(W,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(We(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(oe(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function e_(r){return le.canvas?new Jg(r):null}var $a=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),LT={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ai.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=$a("shape");oe(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=$a("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Me(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=$a("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=$a("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){_n(r._container)},_bringToBack:function(r){yn(r._container)}},Ju=le.vml?$a:Eu,qa=Ai.extend({_initContainer:function(){this._container=Ju("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ju("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Me(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ai.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),tt(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Ju("path");r.options.className&&oe(a,r.options.className),r.options.interactive&&oe(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Me(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,zs(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",x=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,x)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){_n(r._path)},_bringToBack:function(r){yn(r._path)}});le.vml&&qa.include(LT);function t_(r){return le.svg||le.vml?new qa(r):null}Ie.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&e_(r)||t_(r)}});var n_=lo.extend({initialize:function(r,a){lo.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=xe(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function NT(r,a){return new n_(r,a)}qa.create=Ju,qa.pointsToPath=zs,ki.geometryToLayer=qu,ki.coordsToLatLng=Md,ki.coordsToLatLngs=Gu,ki.latLngToCoords=Dd,ki.latLngsToCoords=Zu,ki.getFeature=uo,ki.asFeature=Ku,Ie.mergeOptions({boxZoom:!0});var i_=an.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ln(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(r),ge(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new he(this._point,this._startPoint),c=a.getSize();tt(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Me(this._box),We(this._container,"leaflet-crosshair")),on(),Qs(),je(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",i_),Ie.mergeOptions({doubleClickZoom:!0});var r_=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ie.addInitHook("addHandler","doubleClickZoom",r_),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var s_=an.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Nn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=xe(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,x=(f+a+c)%r-a-c,M=Math.abs(g+c)<Math.abs(x+c)?g:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,M=c.easeLinearity,B=g.multiplyBy(M/x),W=B.distanceTo([0,0]),Q=Math.min(c.inertiaMaxSpeed,W),re=B.multiplyBy(Q/W),fe=Q/(c.inertiaDeceleration*M),Se=re.multiplyBy(-fe/2).round();!Se.x&&!Se.y?a.fire("moveend"):(Se=a._limitOffset(Se,a.options.maxBounds),V(function(){a.panBy(Se,{duration:fe,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",s_),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var o_=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ge(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Xn(r)}}});Ie.addInitHook("addHandler","keyboard",o_),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var a_=an.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Oa(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Xn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,x=c?Math.ceil(g/c)*c:g,M=r._limitZoom(a+(this._delta>0?x:-x))-a;this._delta=0,this._startTime=null,M&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+M):r.setZoomAround(this._lastMousePos,a+M))}});Ie.addInitHook("addHandler","scrollWheelZoom",a_);var OT=600;Ie.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var l_=an.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",lt),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),OT),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){je(document,"touchend",lt),je(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ie.addInitHook("addHandler","tapHold",l_),Ie.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var u_=an.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),lt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var x=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&x.x===0&&x.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var M=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(M,this,!0),lt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,C(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",u_),Ie.BoxZoom=i_,Ie.DoubleClickZoom=r_,Ie.Drag=s_,Ie.Keyboard=o_,Ie.ScrollWheelZoom=a_,Ie.TapHold=l_,Ie.TouchZoom=u_,n.Bounds=he,n.Browser=le,n.CRS=at,n.Canvas=Jg,n.Circle=Od,n.CircleMarker=$u,n.Class=te,n.Control=Qt,n.DivIcon=Qg,n.DivOverlay=ii,n.DomEvent=ls,n.DomUtil=Nd,n.Draggable=Nn,n.Evented=Re,n.FeatureGroup=Ci,n.GeoJSON=ki,n.GridLayer=Ha,n.Handler=an,n.Icon=ao,n.ImageOverlay=Qu,n.LatLng=Te,n.LatLngBounds=Ue,n.Layer=Mn,n.LayerGroup=oo,n.LineUtil=wn,n.Map=Ie,n.Marker=Hu,n.Mixin=Uu,n.Path=rr,n.Point=$,n.PolyUtil=io,n.Polygon=lo,n.Polyline=Pi,n.Popup=Yu,n.PosAnimation=Da,n.Projection=ni,n.Rectangle=n_,n.Renderer=Ai,n.SVG=qa,n.SVGOverlay=Kg,n.TileLayer=co,n.Tooltip=Xu,n.Transformation=wa,n.Util=P,n.VideoOverlay=Zg,n.bind=l,n.bounds=Ee,n.canvas=e_,n.circle=wT,n.circleMarker=vT,n.control=ei,n.divIcon=AT,n.extend=s,n.featureGroup=gT,n.geoJSON=Gg,n.geoJson=TT,n.gridLayer=RT,n.icon=_T,n.imageOverlay=IT,n.latLng=de,n.latLngBounds=xe,n.layerGroup=mT,n.map=Js,n.marker=yT,n.point=X,n.polygon=ET,n.polyline=xT,n.popup=PT,n.rectangle=NT,n.setOptions=N,n.stamp=d,n.svg=t_,n.svgOverlay=CT,n.tileLayer=Yg,n.tooltip=kT,n.transformation=Zi,n.version=i,n.videoOverlay=ST;var MT=window.L;n.noConflict=function(){return window.L=MT,this},window.L=n})})(Zp,Zp.exports);var Vs=Zp.exports;const Kp=a0(Vs);function wu(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Sd(t,e){return e==null?function(i,s){const o=q.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=q.useRef();o.current||(o.current=t(i,s));const l=q.useRef(i),{instance:h}=o.current;return q.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function uT(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function cT(t){return function(n){const i=Wg(),s=t(Id(n,i),i);return sT(i.map,n.attribution),Hg(s.current,n.eventHandlers),uT(s.current,i),s}}function ON(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function MN(t){return function(n){const i=Wg(),s=t(Id(n,i),i);return Hg(s.current,n.eventHandlers),uT(s.current,i),ON(s.current,n),s}}function DN(t,e){const n=Sd(t,e),i=cT(n);return lT(i)}function VN(t,e){const n=Sd(t),i=NN(n,e);return bN(i)}function hT(t,e){const n=Sd(t,e),i=MN(n);return lT(i)}function zN(t,e){const n=Sd(t,e),i=cT(n);return LN(i)}function FN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}const jN=hT(function({data:e,...n},i){const s=new Vs.GeoJSON(e,n);return wu(s,Ug(i,{overlayContainer:s}))},function(e,n,i){n.style!==i.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function Qp(){return Qp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qp.apply(this,arguments)}function BN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},w){const[E]=q.useState({className:s,id:o,style:h}),[k,z]=q.useState(null);q.useImperativeHandle(w,()=>(k==null?void 0:k.map)??null,[k]);const N=q.useCallback(A=>{if(A!==null&&k===null){const T=new Vs.Map(A,_);n!=null&&p!=null?T.setView(n,p):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),z(RN(T))}},[]);q.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const F=k?Cl.createElement(aT,{value:k},i):l??null;return Cl.createElement("div",Qp({},E,{ref:N}),F)}const UN=q.forwardRef(BN),dT=DN(function({position:e,...n},i){const s=new Vs.Marker(e,n);return wu(s,Ug(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),WN=hT(function({positions:e,...n},i){const s=new Vs.Polygon(e,n);return wu(s,Ug(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),fT=VN(function(e,n){const i=new Vs.Popup(e,n.overlayContainer);return wu(i,n)},function(e,n,{position:i},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),HN=zN(function({url:e,...n},i){const s=new Vs.TileLayer(e,Id(n,i));return wu(s,i)},function(e,n,i){FN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),$N=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],qN=(t,e=3)=>{const n=[];for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},GN=(t,e)=>{const n=qN(t,5),i=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],_=p[0]-o,w=p[1]-l,E=Math.sqrt(_*_+w*w);if(E===0)continue;const k=_/E,z=w/E,N=Math.atan2(w,_)*(180/Math.PI);let F=0;if(N>=45&&N<=90){const T=1-Math.abs((N-67.5)/22.5);F+=100*T}if(N>=45&&N<=135){const T=1-Math.abs((N-90)/45);F+=300*T}if(Math.abs(N)>=135){const T=Math.abs(N),O=1-Math.abs((T-180)/45);F+=300*O}if(N>=90&&N<=180){const T=1-Math.abs((N-135)/45);F+=300*T}const A=Math.max(0,e-F);h.push([p[0]+k*A*i,p[1]+z*A*s])}return h},ZN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"},{name:"2000km Range",range:2e3,color:"#3B82F6"}],KN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],o0=(t,e=0)=>{let n="white",i=2;return e>=80?(n="#000000",i=3):e>=40?(n="#DC2626",i=3):e>0&&(n="#F59E0B",i=3),Kp.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: ${i}px solid ${n}; box-sizing: border-box;"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},QN=({facility:t,onViewDetails:e})=>{var h,d;const n=q.useRef(null),i=p=>{switch(p==null?void 0:p.toLowerCase().trim()){case"refinery":return"#1cc5b7ff";case"extraction":return"#8B5CF6";case"storage":return"#F59E0B";default:return"#FFC300"}};q.useEffect(()=>{if(n.current){const p=i(t.type);n.current.setIcon(o0(p,t.damagePercentage||0))}},[t.damagePercentage,t.type]);const s=((h=t.location)==null?void 0:h.latitude)??t.latitude??0,o=((d=t.location)==null?void 0:d.longitude)??t.longitude??0,l=i(t.type);return v.jsx(dT,{ref:n,position:[s,o],icon:o0(l,t.damagePercentage||0),children:v.jsx(fT,{children:v.jsxs("div",{style:{color:"#000",minWidth:"200px"},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),v.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"6px",alignItems:"center"},children:[v.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"}),t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:"#f59e0b",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600"},children:["-",t.damagePercentage,"%"]})]}),v.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[v.jsx("strong",{children:"Type:"})," ",v.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),v.jsxs("div",{style:{margin:"10px 0"},children:[v.jsx("p",{style:{margin:"0 0 5px 0",fontSize:"13px",fontWeight:"bold"},children:"Production:"}),v.jsxs("p",{style:{margin:"2px 0 2px 10px",fontSize:"13px"},children:[v.jsx("strong",{children:"Oil:"})," ",t.capacity.toLocaleString()," bbl/day",t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"6px"},children:["→ ",Math.round(t.capacity*(1-t.damagePercentage/100)).toLocaleString()," bbl/day"]})]}),t.gasCapacity&&v.jsxs("p",{style:{margin:"2px 0 2px 10px",fontSize:"13px"},children:[v.jsx("strong",{children:"Gas:"})," ",t.gasCapacity.toLocaleString()," m³/year",t.hit&&t.damagePercentage&&t.damagePercentage>0&&v.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"6px"},children:["→ ",Math.round(t.gasCapacity*(1-t.damagePercentage/100)).toLocaleString()," m³/year"]})]})]}),v.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[s.toFixed(4),", ",o.toFixed(4)]}),v.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:p=>p.currentTarget.style.backgroundColor="#2563eb",onMouseOut:p=>p.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details →"})]})})})},YN=()=>{const t=lu(),[e,n]=q.useState([]),[i,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,_]=q.useState(0),[w,E]=q.useState(0),[k,z]=q.useState(null),[N,F]=q.useState(!0),[A,T]=q.useState(!0),[O,H]=q.useState(!0),[Y,ee]=q.useState(!0),[R,S]=q.useState(!0),[b,D]=q.useState(!0),[V,C]=q.useState(!0);q.useEffect(()=>{fetch("https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json").then(G=>G.json()).then(G=>{console.log("GeoJSON loaded:",G),z(G)}).catch(G=>console.error("Error loading countries GeoJSON:",G))},[]),q.useEffect(()=>{(async()=>{try{if(!Ne){console.error("Firebase not initialized");return}const ve=await Un(Bn(Ne,Qe.FACILITIES)),Re=await Un(Bn(Ne,Qe.HITS)),$=ve.docs.map(ue=>{const X=ue.data(),he=parseInt(ue.id),Ue=Re.docs.map(xe=>xe.data()).filter(xe=>xe.facilityId===he&&!xe.draft).reduce((xe,Te)=>xe+(Te.damagePercentage||0),0);return{id:he,...X,damagePercentage:Ue}}).filter(ue=>!ue.draft);n($)}catch(ve){console.error("Error fetching facilities:",ve)}})()},[]);const P=G=>{t(`/facility/${G}`)},te=e.filter(G=>!(i!=="all"&&G.type!==i||G.type==="refinery"&&!N||G.type==="extraction"&&!A||G.type==="storage"&&!O||o==="hit"&&!G.hit||o==="operational"&&G.hit||G.capacity<p||G.gasCapacity&&G.gasCapacity<w||h&&!G.name.toLowerCase().includes(h.toLowerCase())));return v.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[v.jsxs("div",{style:{width:"280px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[v.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[v.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),v.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[te.length," of ",e.length," facilities"]})]}),v.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),v.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:G=>d(G.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:G=>G.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:G=>G.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:G=>G.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:G=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),v.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:G=>G.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:G=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),v.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),v.jsxs("div",{style:{marginBottom:"12px"},children:[v.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:[v.jsx("span",{children:"Min. Oil"}),v.jsxs("span",{style:{color:"#9ca3af",fontSize:"11px"},children:[p.toLocaleString()," bbl/d"]})]}),v.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:G=>_(Number(G.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"4px"}})]}),v.jsxs("div",{style:{marginBottom:"12px"},children:[v.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:[v.jsx("span",{children:"Min. Gas"}),v.jsxs("span",{style:{color:"#9ca3af",fontSize:"11px"},children:[w.toLocaleString()," m³/yr"]})]}),v.jsx("input",{type:"range",min:"0",max:"30000000000",step:"1000000000",value:w,onChange:G=>E(Number(G.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"4px"}})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"6px"},children:"Facility Types"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:G=>G.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:N,onChange:G=>F(G.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#6b7280"}}),v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"50%"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:G=>G.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:A,onChange:G=>T(G.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#6b7280"}}),v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#8B5CF6",borderRadius:"50%"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:G=>G.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[v.jsx("input",{type:"checkbox",checked:O,onChange:G=>H(G.target.checked),style:{cursor:"pointer",width:"14px",height:"14px",accentColor:"#6b7280"}}),v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#F59E0B",borderRadius:"50%"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"4px"},children:"Damage Level"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px"},children:[v.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"50%",border:"2px solid white",boxSizing:"border-box"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"0%"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"50%",border:"3px solid #F59E0B",boxSizing:"border-box"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1-39%"})]})]}),v.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"50%",border:"3px solid #DC2626",boxSizing:"border-box"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"40-79%"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:"1"},children:[v.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#1cc5b7ff",borderRadius:"50%",border:"3px solid #000000",boxSizing:"border-box"}}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"80-100%"})]})]})]})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"12px",marginTop:"12px"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"6px"},children:"Weapon Ranges (km)"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"4px",flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#10B981",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"500"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#F97316",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1000"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#EF4444",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"1500"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{style:{color:"#3B82F6",fontSize:"14px"},children:"■"}),v.jsx("span",{style:{fontSize:"12px",color:"#cbd5e0",fontWeight:"500"},children:"2000"})]})]})]})]})]}),v.jsx("div",{style:{flex:1,position:"relative"},children:v.jsxs(UN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[v.jsx(HN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),k&&v.jsx(jN,{data:k,style:G=>{var $;const ve=($=G==null?void 0:G.properties)==null?void 0:$.name,Re=ve==="Ukraine";return console.log("Country:",ve,"isUkraine:",Re),{fillColor:Re?"#0057B7":"transparent",fillOpacity:Re?.3:0,color:Re?"#0057B7":"transparent",weight:Re?2:0,opacity:Re?1:0}}}),ZN.map(G=>{if(G.range===500&&!Y||G.range===1e3&&!R||G.range===1500&&!b||G.range===2e3&&!V)return null;const ve=GN($N,G.range);return v.jsx(WN,{positions:ve,pathOptions:{color:G.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0,dashArray:"10, 15"}},G.range)}),KN.map(G=>{let ve;return G.name==="Moscow"?ve=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${G.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):G.name==="Kyiv"&&G.colors&&(ve=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${G.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${G.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),v.jsx(dT,{position:[G.lat,G.lon],icon:ve,children:v.jsx(fT,{children:v.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:G.name})})},G.name)}),te.map(G=>v.jsx(QN,{facility:G,onViewDetails:P},G.id))]})})]})},XN=()=>{var w,E;const{id:t}=qm(),e=lu(),[n,i]=q.useState(null),[s,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!Ne){console.error("Firebase not initialized"),h(!1);return}const z=Sn(Ne,Qe.FACILITIES,t),N=await bg(z);if(N.exists()){i({id:parseInt(N.id),...N.data()});const F=Bn(Ne,Qe.HITS),A=Bc(F,Uc("facilityId","==",parseInt(t)),r2("date","desc")),O=(await Un(A)).docs.map(H=>({id:H.data().id,...H.data()})).filter(H=>!H.draft);o(O)}else console.error("Facility not found");h(!1)}catch(z){console.error("Error fetching facility:",z),h(!1)}})()},[t]),l)return v.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return v.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[v.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),v.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((w=n.location)==null?void 0:w.latitude)??n.latitude??0,p=((E=n.location)==null?void 0:E.longitude)??n.longitude??0,_=k=>{switch(k){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return v.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[v.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[v.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:"← Back to Map"}),v.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),v.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),v.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:v.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),v.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[v.jsx("span",{style:{color:_(n.type),fontSize:"28px"},children:"●"}),v.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),v.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),v.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),v.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),v.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[v.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),v.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[v.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),v.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),"°"]})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),v.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),"°"]})]})]}),v.jsx("div",{style:{marginTop:"20px"},children:v.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps →"})})]}),s.length>0&&v.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[v.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Hit Records"}),v.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((k,z)=>v.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[v.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-z}),v.jsxs("div",{children:[v.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Hit on ",new Date(k.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),v.jsxs("div",{style:{fontSize:"13px",color:"#888",display:"flex",gap:"12px",flexWrap:"wrap"},children:[k.severity&&v.jsxs("span",{children:["Severity: ",v.jsx("span",{style:{color:k.severity==="destroyed"?"#f44336":"#FF9800",fontWeight:"600",textTransform:"uppercase"},children:k.severity})]}),k.damagePercentage!=null&&v.jsxs("span",{children:["Impact: ",v.jsxs("span",{style:{color:"#f44336",fontWeight:"600"},children:["-",k.damagePercentage,"%"]})]}),k.expectedRepairTime&&v.jsxs("span",{children:["Repair: ",v.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[k.expectedRepairTime," days"]})]})]})]})]})}),(k.mediaLinks&&k.mediaLinks.length>0||k.videoLink)&&v.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:k.mediaLinks&&k.mediaLinks.length>0?k.mediaLinks.map((N,F)=>v.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",display:"inline-block"},children:[N.includes("youtube")||N.includes("youtu.be")||N.includes("video")?"📹":"📷"," Media ",F+1]},F)):k.videoLink&&v.jsx("a",{href:k.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"📹 Video"})}),k.notes&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:k.notes})]},k.id))})]})]})})]})},JN=()=>v.jsx(dP,{children:v.jsxs(uP,{children:[v.jsx(po,{path:"/",element:v.jsx(YN,{})}),v.jsx(po,{path:"/facility/:id",element:v.jsx(XN,{})}),v.jsx(po,{path:"/admin",element:v.jsx(CN,{})}),v.jsx(po,{path:"/admin/facility/:id",element:v.jsx(PN,{})}),v.jsx(po,{path:"/admin/hit/:id",element:v.jsx(kN,{})})]})}),eO=Pf.createRoot(document.getElementById("root"));eO.render(v.jsx(Cl.StrictMode,{children:v.jsx(JN,{})}));
