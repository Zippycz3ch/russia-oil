function Bx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sw={exports:{}},Oh={},ow={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ru=Symbol.for("react.element"),Hx=Symbol.for("react.portal"),Wx=Symbol.for("react.fragment"),$x=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Zx=Symbol.for("react.context"),Kx=Symbol.for("react.forward_ref"),Qx=Symbol.for("react.suspense"),Yx=Symbol.for("react.memo"),Xx=Symbol.for("react.lazy"),u_=Symbol.iterator;function Jx(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,uw={};function la(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||aw}la.prototype.isReactComponent={};la.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};la.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cw(){}cw.prototype=la.prototype;function Qp(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||aw}var Yp=Qp.prototype=new cw;Yp.constructor=Qp;lw(Yp,la.prototype);Yp.isPureReactComponent=!0;var c_=Array.isArray,hw=Object.prototype.hasOwnProperty,Xp={current:null},dw={key:!0,ref:!0,__self:!0,__source:!0};function fw(t,e,n){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)hw.call(e,r)&&!dw.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:ru,type:t,key:o,ref:l,props:s,_owner:Xp.current}}function eI(t,e){return{$$typeof:ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ru}function tI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h_=/\/+/g;function Vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tI(""+t.key):e.toString(36)}function wc(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ru:case Hx:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Vd(l,0):r,c_(s)?(n="",t!=null&&(n=t.replace(h_,"$&/")+"/"),wc(s,e,n,"",function(p){return p})):s!=null&&(Jp(s)&&(s=eI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(h_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",c_(t))for(var h=0;h<t.length;h++){o=t[h];var d=r+Vd(o,h);l+=wc(o,e,n,d,s)}else if(d=Jx(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=r+Vd(o,h++),l+=wc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Yu(t,e,n){if(t==null)return t;var r=[],s=0;return wc(t,r,"","",function(o){return e.call(n,o,s++)}),r}function nI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Ec={transition:null},rI={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Ec,ReactCurrentOwner:Xp};function pw(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!Jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=la;xe.Fragment=Wx;xe.Profiler=qx;xe.PureComponent=Qp;xe.StrictMode=$x;xe.Suspense=Qx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;xe.act=pw;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lw({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Xp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)hw.call(e,d)&&!dw.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:ru,type:t.type,key:s,ref:o,props:r,_owner:l}};xe.createContext=function(t){return t={$$typeof:Zx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Gx,_context:t},t.Consumer=t};xe.createElement=fw;xe.createFactory=function(t){var e=fw.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:Kx,render:t}};xe.isValidElement=Jp;xe.lazy=function(t){return{$$typeof:Xx,_payload:{_status:-1,_result:t},_init:nI}};xe.memo=function(t,e){return{$$typeof:Yx,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ec.transition;Ec.transition={};try{t()}finally{Ec.transition=e}};xe.unstable_act=pw;xe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};xe.useContext=function(t){return Gt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};xe.useId=function(){return Gt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};xe.useRef=function(t){return Gt.current.useRef(t)};xe.useState=function(t){return Gt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Gt.current.useTransition()};xe.version="18.3.1";ow.exports=xe;var q=ow.exports;const qo=iw(q),iI=Bx({__proto__:null,default:qo},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=q,oI=Symbol.for("react.element"),aI=Symbol.for("react.fragment"),lI=Object.prototype.hasOwnProperty,uI=sI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cI={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)lI.call(e,r)&&!cI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oI,type:t,key:o,ref:l,props:s,_owner:uI.current}}Oh.Fragment=aI;Oh.jsx=mw;Oh.jsxs=mw;sw.exports=Oh;var T=sw.exports,Pf={},gw={exports:{}},_n={},_w={exports:{}},yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,he){var ee=Z.length;Z.push(he);e:for(;0<ee;){var de=ee-1>>>1,we=Z[de];if(0<s(we,he))Z[de]=he,Z[ee]=we,ee=de;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var he=Z[0],ee=Z.pop();if(ee!==he){Z[0]=ee;e:for(var de=0,we=Z.length,$e=we>>>1;de<$e;){var H=2*(de+1)-1,te=Z[H],ie=H+1,Fe=Z[ie];if(0>s(te,ee))ie<we&&0>s(Fe,te)?(Z[de]=Fe,Z[ie]=ee,de=ie):(Z[de]=te,Z[H]=ee,de=H);else if(ie<we&&0>s(Fe,ee))Z[de]=Fe,Z[ie]=ee,de=ie;else break e}}return he}function s(Z,he){var ee=Z.sortIndex-he.sortIndex;return ee!==0?ee:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],y=1,v=null,E=3,k=!1,F=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Z){for(var he=n(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=Z)r(p),he.sortIndex=he.expirationTime,e(d,he);else break;he=n(p)}}function $(Z){if(V=!1,N(Z),!F)if(n(d)!==null)F=!0,et(X);else{var he=n(p);he!==null&&an($,he.startTime-Z)}}function X(Z,he){F=!1,V&&(V=!1,b(S),S=-1),k=!0;var ee=E;try{for(N(he),v=n(d);v!==null&&(!(v.expirationTime>he)||Z&&!O());){var de=v.callback;if(typeof de=="function"){v.callback=null,E=v.priorityLevel;var we=de(v.expirationTime<=he);he=t.unstable_now(),typeof we=="function"?v.callback=we:v===n(d)&&r(d),N(he)}else r(d);v=n(d)}if(v!==null)var $e=!0;else{var H=n(p);H!==null&&an($,H.startTime-he),$e=!1}return $e}finally{v=null,E=ee,k=!1}}var J=!1,C=null,S=-1,I=5,A=-1;function O(){return!(t.unstable_now()-A<I)}function D(){if(C!==null){var Z=t.unstable_now();A=Z;var he=!0;try{he=C(!0,Z)}finally{he?R():(J=!1,C=null)}}else J=!1}var R;if(typeof P=="function")R=function(){P(D)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,_t=be.port2;be.port1.onmessage=D,R=function(){_t.postMessage(null)}}else R=function(){B(D,0)};function et(Z){C=Z,J||(J=!0,R())}function an(Z,he){S=B(function(){Z(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){F||k||(F=!0,et(X))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var ee=E;E=he;try{return Z()}finally{E=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=E;E=Z;try{return he()}finally{E=ee}},t.unstable_scheduleCallback=function(Z,he,ee){var de=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,Z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ee+we,Z={id:y++,callback:he,priorityLevel:Z,startTime:ee,expirationTime:we,sortIndex:-1},ee>de?(Z.sortIndex=ee,e(p,Z),n(d)===null&&Z===n(p)&&(V?(b(S),S=-1):V=!0,an($,ee-de))):(Z.sortIndex=we,e(d,Z),F||k||(F=!0,et(X))),Z},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Z){var he=E;return function(){var ee=E;E=he;try{return Z.apply(this,arguments)}finally{E=ee}}}})(yw);_w.exports=yw;var hI=_w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI=q,gn=hI;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vw=new Set,Al={};function Ms(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(Al[t]=e,t=0;t<e.length;t++)vw.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cf=Object.prototype.hasOwnProperty,fI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d_={},f_={};function pI(t){return Cf.call(f_,t)?!0:Cf.call(d_,t)?!1:fI.test(t)?f_[t]=!0:(d_[t]=!0,!1)}function mI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gI(t,e,n,r){if(e===null||typeof e>"u"||mI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var em=/[\-:]([a-z])/g;function tm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(em,tm);Rt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(em,tm);Rt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(em,tm);Rt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function nm(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gI(e,n,s,r)&&(n=null),r||s===null?pI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zr=dI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),To=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),ww=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),im=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),ui=Symbol.for("react.lazy"),Tw=Symbol.for("react.offscreen"),p_=Symbol.iterator;function Ka(t){return t===null||typeof t!="object"?null:(t=p_&&t[p_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Fd;function rl(t){if(Fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fd=e&&e[1]||""}return`
`+Fd+t}var zd=!1;function jd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function _I(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=jd(t.type,!1),t;case 11:return t=jd(t.type.render,!1),t;case 1:return t=jd(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case To:return"Portal";case Af:return"Profiler";case rm:return"StrictMode";case kf:return"Suspense";case Rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ew:return(t.displayName||"Context")+".Consumer";case ww:return(t._context.displayName||"Context")+".Provider";case im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sm:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case ui:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function yI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vI(t){var e=xw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=vI(t))}function Iw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sw(t,e){e=e.checked,e!=null&&nm(t,"checked",e,!1)}function Nf(t,e){Sw(t,e);var n=Vi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Of(t,e.type,n):e.hasOwnProperty("defaultValue")&&Of(t,e.type,Vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Of(t,e,n){(e!=="number"||$c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var il=Array.isArray;function Mo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function __(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(il(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vi(n)}}function Pw(t,e){var n=Vi(e.value),r=Vi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ec,Aw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wI=["Webkit","ms","Moz","O"];Object.keys(fl).forEach(function(t){wI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fl[e]=fl[t]})});function kw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fl.hasOwnProperty(t)&&fl[t]?(""+e).trim():e+"px"}function Rw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var EI=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vf(t,e){if(e){if(EI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zf=null;function om(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,Do=null,Vo=null;function v_(t){if(t=ou(t)){if(typeof jf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=zh(e),jf(t.stateNode,t.type,e))}}function Lw(t){Do?Vo?Vo.push(t):Vo=[t]:Do=t}function bw(){if(Do){var t=Do,e=Vo;if(Vo=Do=null,v_(t),e)for(t=0;t<e.length;t++)v_(e[t])}}function Nw(t,e){return t(e)}function Ow(){}var Bd=!1;function Mw(t,e,n){if(Bd)return t(e,n);Bd=!0;try{return Nw(t,e,n)}finally{Bd=!1,(Do!==null||Vo!==null)&&(Ow(),bw())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Bf=!1;if(jr)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Bf=!1}function TI(t,e,n,r,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var pl=!1,qc=null,Gc=!1,Uf=null,xI={onError:function(t){pl=!0,qc=t}};function II(t,e,n,r,s,o,l,h,d){pl=!1,qc=null,TI.apply(xI,arguments)}function SI(t,e,n,r,s,o,l,h,d){if(II.apply(this,arguments),pl){if(pl){var p=qc;pl=!1,qc=null}else throw Error(Y(198));Gc||(Gc=!0,Uf=p)}}function Ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w_(t){if(Ds(t)!==t)throw Error(Y(188))}function PI(t){var e=t.alternate;if(!e){if(e=Ds(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return w_(s),t;if(o===r)return w_(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,r=o;break}if(h===r){l=!0,r=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=s;break}if(h===r){l=!0,r=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Vw(t){return t=PI(t),t!==null?Fw(t):null}function Fw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fw(t);if(e!==null)return e;t=t.sibling}return null}var zw=gn.unstable_scheduleCallback,E_=gn.unstable_cancelCallback,CI=gn.unstable_shouldYield,AI=gn.unstable_requestPaint,it=gn.unstable_now,kI=gn.unstable_getCurrentPriorityLevel,am=gn.unstable_ImmediatePriority,jw=gn.unstable_UserBlockingPriority,Zc=gn.unstable_NormalPriority,RI=gn.unstable_LowPriority,Bw=gn.unstable_IdlePriority,Mh=null,cr=null;function LI(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:OI,bI=Math.log,NI=Math.LN2;function OI(t){return t>>>=0,t===0?32:31-(bI(t)/NI|0)|0}var tc=64,nc=4194304;function sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?r=sl(h):(o&=l,o!==0&&(r=sl(o)))}else l=n&~s,l!==0?r=sl(l):o!==0&&(r=sl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),s=1<<n,r|=t[n],e&=~s;return r}function MI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-qn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&r)&&(s[l]=MI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uw(){var t=tc;return tc<<=1,!(tc&4194240)&&(tc=64),t}function Ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function VI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function lm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ve=0;function Hw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,um,$w,qw,Gw,Wf=!1,rc=[],xi=null,Ii=null,Si=null,Ll=new Map,bl=new Map,fi=[],FI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T_(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":Ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Ya(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ou(e),e!==null&&um(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zI(t,e,n,r,s){switch(e){case"focusin":return xi=Ya(xi,t,e,n,r,s),!0;case"dragenter":return Ii=Ya(Ii,t,e,n,r,s),!0;case"mouseover":return Si=Ya(Si,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return Ll.set(o,Ya(Ll.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,bl.set(o,Ya(bl.get(o)||null,t,e,n,r,s)),!0}return!1}function Zw(t){var e=_s(t.target);if(e!==null){var n=Ds(e);if(n!==null){if(e=n.tag,e===13){if(e=Dw(n),e!==null){t.blockedOn=e,Gw(t.priority,function(){$w(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$f(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zf=r,n.target.dispatchEvent(r),zf=null}else return e=ou(n),e!==null&&um(e),t.blockedOn=n,!1;e.shift()}return!0}function x_(t,e,n){Tc(t)&&n.delete(e)}function jI(){Wf=!1,xi!==null&&Tc(xi)&&(xi=null),Ii!==null&&Tc(Ii)&&(Ii=null),Si!==null&&Tc(Si)&&(Si=null),Ll.forEach(x_),bl.forEach(x_)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Wf||(Wf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,jI)))}function Nl(t){function e(s){return Xa(s,t)}if(0<rc.length){Xa(rc[0],t);for(var n=1;n<rc.length;n++){var r=rc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xi!==null&&Xa(xi,t),Ii!==null&&Xa(Ii,t),Si!==null&&Xa(Si,t),Ll.forEach(e),bl.forEach(e),n=0;n<fi.length;n++)r=fi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fi.length&&(n=fi[0],n.blockedOn===null);)Zw(n),n.blockedOn===null&&fi.shift()}var Fo=Zr.ReactCurrentBatchConfig,Qc=!0;function BI(t,e,n,r){var s=Ve,o=Fo.transition;Fo.transition=null;try{Ve=1,cm(t,e,n,r)}finally{Ve=s,Fo.transition=o}}function UI(t,e,n,r){var s=Ve,o=Fo.transition;Fo.transition=null;try{Ve=4,cm(t,e,n,r)}finally{Ve=s,Fo.transition=o}}function cm(t,e,n,r){if(Qc){var s=$f(t,e,n,r);if(s===null)Xd(t,e,r,Yc,n),T_(t,r);else if(zI(s,t,e,n,r))r.stopPropagation();else if(T_(t,r),e&4&&-1<FI.indexOf(t)){for(;s!==null;){var o=ou(s);if(o!==null&&Ww(o),o=$f(t,e,n,r),o===null&&Xd(t,e,r,Yc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Xd(t,e,r,null,n)}}var Yc=null;function $f(t,e,n,r){if(Yc=null,t=om(r),t=_s(t),t!==null)if(e=Ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yc=t,null}function Kw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kI()){case am:return 1;case jw:return 4;case Zc:case RI:return 16;case Bw:return 536870912;default:return 16}default:return 16}}var vi=null,hm=null,xc=null;function Qw(){if(xc)return xc;var t,e=hm,n=e.length,r,s="value"in vi?vi.value:vi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[o-r];r++);return xc=s.slice(t,1<r?1-r:void 0)}function Ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ic(){return!0}function I_(){return!1}function yn(t){function e(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ic:I_,this.isPropagationStopped=I_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),e}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dm=yn(ua),su=Qe({},ua,{view:0,detail:0}),HI=yn(su),Hd,Wd,Ja,Dh=Qe({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(Hd=t.screenX-Ja.screenX,Wd=t.screenY-Ja.screenY):Wd=Hd=0,Ja=t),Hd)},movementY:function(t){return"movementY"in t?t.movementY:Wd}}),S_=yn(Dh),WI=Qe({},Dh,{dataTransfer:0}),$I=yn(WI),qI=Qe({},su,{relatedTarget:0}),$d=yn(qI),GI=Qe({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),ZI=yn(GI),KI=Qe({},ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=yn(KI),YI=Qe({},ua,{data:0}),P_=yn(YI),XI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eS[t])?!!e[t]:!1}function fm(){return tS}var nS=Qe({},su,{key:function(t){if(t.key){var e=XI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(t){return t.type==="keypress"?Ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rS=yn(nS),iS=Qe({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C_=yn(iS),sS=Qe({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),oS=yn(sS),aS=Qe({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),lS=yn(aS),uS=Qe({},Dh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cS=yn(uS),hS=[9,13,27,32],pm=jr&&"CompositionEvent"in window,ml=null;jr&&"documentMode"in document&&(ml=document.documentMode);var dS=jr&&"TextEvent"in window&&!ml,Yw=jr&&(!pm||ml&&8<ml&&11>=ml),A_=" ",k_=!1;function Xw(t,e){switch(t){case"keyup":return hS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Io=!1;function fS(t,e){switch(t){case"compositionend":return Jw(e);case"keypress":return e.which!==32?null:(k_=!0,A_);case"textInput":return t=e.data,t===A_&&k_?null:t;default:return null}}function pS(t,e){if(Io)return t==="compositionend"||!pm&&Xw(t,e)?(t=Qw(),xc=hm=vi=null,Io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yw&&e.locale!=="ko"?null:e.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mS[t.type]:e==="textarea"}function e0(t,e,n,r){Lw(r),e=Xc(e,"onChange"),0<e.length&&(n=new dm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gl=null,Ol=null;function gS(t){h0(t,0)}function Vh(t){var e=Co(t);if(Iw(e))return t}function _S(t,e){if(t==="change")return e}var t0=!1;if(jr){var qd;if(jr){var Gd="oninput"in document;if(!Gd){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),Gd=typeof L_.oninput=="function"}qd=Gd}else qd=!1;t0=qd&&(!document.documentMode||9<document.documentMode)}function b_(){gl&&(gl.detachEvent("onpropertychange",n0),Ol=gl=null)}function n0(t){if(t.propertyName==="value"&&Vh(Ol)){var e=[];e0(e,Ol,t,om(t)),Mw(gS,e)}}function yS(t,e,n){t==="focusin"?(b_(),gl=e,Ol=n,gl.attachEvent("onpropertychange",n0)):t==="focusout"&&b_()}function vS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vh(Ol)}function wS(t,e){if(t==="click")return Vh(e)}function ES(t,e){if(t==="input"||t==="change")return Vh(e)}function TS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:TS;function Ml(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cf.call(e,s)||!Kn(t[s],e[s]))return!1}return!0}function N_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O_(t,e){var n=N_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N_(n)}}function r0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i0(){for(var t=window,e=$c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$c(t.document)}return e}function mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xS(t){var e=i0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r0(n.ownerDocument.documentElement,n)){if(r!==null&&mm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=O_(n,o);var l=O_(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IS=jr&&"documentMode"in document&&11>=document.documentMode,So=null,qf=null,_l=null,Gf=!1;function M_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gf||So==null||So!==$c(r)||(r=So,"selectionStart"in r&&mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_l&&Ml(_l,r)||(_l=r,r=Xc(qf,"onSelect"),0<r.length&&(e=new dm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Po={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Zd={},s0={};jr&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Fh(t){if(Zd[t])return Zd[t];if(!Po[t])return t;var e=Po[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s0)return Zd[t]=e[n];return t}var o0=Fh("animationend"),a0=Fh("animationiteration"),l0=Fh("animationstart"),u0=Fh("transitionend"),c0=new Map,D_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(t,e){c0.set(t,e),Ms(e,[t])}for(var Kd=0;Kd<D_.length;Kd++){var Qd=D_[Kd],SS=Qd.toLowerCase(),PS=Qd[0].toUpperCase()+Qd.slice(1);$i(SS,"on"+PS)}$i(o0,"onAnimationEnd");$i(a0,"onAnimationIteration");$i(l0,"onAnimationStart");$i("dblclick","onDoubleClick");$i("focusin","onFocus");$i("focusout","onBlur");$i(u0,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function V_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SI(r,e,void 0,t),t.currentTarget=null}function h0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,p),o=d}else for(l=0;l<r.length;l++){if(h=r[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,p),o=d}}}if(Gc)throw t=Uf,Gc=!1,Uf=null,t}function Ue(t,e){var n=e[Xf];n===void 0&&(n=e[Xf]=new Set);var r=t+"__bubble";n.has(r)||(d0(e,t,2,!1),n.add(r))}function Yd(t,e,n){var r=0;e&&(r|=4),d0(n,t,r,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[oc]){t[oc]=!0,vw.forEach(function(n){n!=="selectionchange"&&(CS.has(n)||Yd(n,!1,t),Yd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,Yd("selectionchange",!1,e))}}function d0(t,e,n,r){switch(Kw(e)){case 1:var s=BI;break;case 4:s=UI;break;default:s=cm}n=s.bind(null,e,n,t),s=void 0,!Bf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xd(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=_s(h),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}h=h.parentNode}}r=r.return}Mw(function(){var p=o,y=om(n),v=[];e:{var E=c0.get(t);if(E!==void 0){var k=dm,F=t;switch(t){case"keypress":if(Ic(n)===0)break e;case"keydown":case"keyup":k=rS;break;case"focusin":F="focus",k=$d;break;case"focusout":F="blur",k=$d;break;case"beforeblur":case"afterblur":k=$d;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=S_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=$I;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=oS;break;case o0:case a0:case l0:k=ZI;break;case u0:k=lS;break;case"scroll":k=HI;break;case"wheel":k=cS;break;case"copy":case"cut":case"paste":k=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=C_}var V=(e&4)!==0,B=!V&&t==="scroll",b=V?E!==null?E+"Capture":null:E;V=[];for(var P=p,N;P!==null;){N=P;var $=N.stateNode;if(N.tag===5&&$!==null&&(N=$,b!==null&&($=Rl(P,b),$!=null&&V.push(Vl(P,$,N)))),B)break;P=P.return}0<V.length&&(E=new k(E,F,null,n,y),v.push({event:E,listeners:V}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&n!==zf&&(F=n.relatedTarget||n.fromElement)&&(_s(F)||F[Br]))break e;if((k||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,k?(F=n.relatedTarget||n.toElement,k=p,F=F?_s(F):null,F!==null&&(B=Ds(F),F!==B||F.tag!==5&&F.tag!==6)&&(F=null)):(k=null,F=p),k!==F)){if(V=S_,$="onMouseLeave",b="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(V=C_,$="onPointerLeave",b="onPointerEnter",P="pointer"),B=k==null?E:Co(k),N=F==null?E:Co(F),E=new V($,P+"leave",k,n,y),E.target=B,E.relatedTarget=N,$=null,_s(y)===p&&(V=new V(b,P+"enter",F,n,y),V.target=N,V.relatedTarget=B,$=V),B=$,k&&F)t:{for(V=k,b=F,P=0,N=V;N;N=_o(N))P++;for(N=0,$=b;$;$=_o($))N++;for(;0<P-N;)V=_o(V),P--;for(;0<N-P;)b=_o(b),N--;for(;P--;){if(V===b||b!==null&&V===b.alternate)break t;V=_o(V),b=_o(b)}V=null}else V=null;k!==null&&F_(v,E,k,V,!1),F!==null&&B!==null&&F_(v,B,F,V,!0)}}e:{if(E=p?Co(p):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var X=_S;else if(R_(E))if(t0)X=ES;else{X=vS;var J=yS}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(X=wS);if(X&&(X=X(t,p))){e0(v,X,n,y);break e}J&&J(t,E,p),t==="focusout"&&(J=E._wrapperState)&&J.controlled&&E.type==="number"&&Of(E,"number",E.value)}switch(J=p?Co(p):window,t){case"focusin":(R_(J)||J.contentEditable==="true")&&(So=J,qf=p,_l=null);break;case"focusout":_l=qf=So=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,M_(v,n,y);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":M_(v,n,y)}var C;if(pm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Io?Xw(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Yw&&n.locale!=="ko"&&(Io||S!=="onCompositionStart"?S==="onCompositionEnd"&&Io&&(C=Qw()):(vi=y,hm="value"in vi?vi.value:vi.textContent,Io=!0)),J=Xc(p,S),0<J.length&&(S=new P_(S,t,null,n,y),v.push({event:S,listeners:J}),C?S.data=C:(C=Jw(n),C!==null&&(S.data=C)))),(C=dS?fS(t,n):pS(t,n))&&(p=Xc(p,"onBeforeInput"),0<p.length&&(y=new P_("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:p}),y.data=C))}h0(v,e)})}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rl(t,n),o!=null&&r.unshift(Vl(t,o,s)),o=Rl(t,e),o!=null&&r.push(Vl(t,o,s))),t=t.return}return r}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F_(t,e,n,r,s){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===r)break;h.tag===5&&p!==null&&(h=p,s?(d=Rl(n,o),d!=null&&l.unshift(Vl(n,d,h))):s||(d=Rl(n,o),d!=null&&l.push(Vl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var AS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function z_(t){return(typeof t=="string"?t:""+t).replace(AS,`
`).replace(kS,"")}function ac(t,e,n){if(e=z_(e),z_(t)!==e&&n)throw Error(Y(425))}function Jc(){}var Zf=null,Kf=null;function Qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,RS=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,LS=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(t){return j_.resolve(null).then(t).catch(bS)}:Yf;function bS(t){setTimeout(function(){throw t})}function Jd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nl(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ca=Math.random().toString(36).slice(2),ur="__reactFiber$"+ca,Fl="__reactProps$"+ca,Br="__reactContainer$"+ca,Xf="__reactEvents$"+ca,NS="__reactListeners$"+ca,OS="__reactHandles$"+ca;function _s(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Br]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B_(t);t!==null;){if(n=t[ur])return n;t=B_(t)}return e}t=n,n=t.parentNode}return null}function ou(t){return t=t[ur]||t[Br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function zh(t){return t[Fl]||null}var Jf=[],Ao=-1;function qi(t){return{current:t}}function We(t){0>Ao||(t.current=Jf[Ao],Jf[Ao]=null,Ao--)}function Be(t,e){Ao++,Jf[Ao]=t.current,t.current=e}var Fi={},jt=qi(Fi),rn=qi(!1),Ss=Fi;function Zo(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function sn(t){return t=t.childContextTypes,t!=null}function eh(){We(rn),We(jt)}function U_(t,e,n){if(jt.current!==Fi)throw Error(Y(168));Be(jt,e),Be(rn,n)}function f0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,yI(t)||"Unknown",s));return Qe({},n,r)}function th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,Ss=jt.current,Be(jt,t),Be(rn,rn.current),!0}function H_(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=f0(t,e,Ss),r.__reactInternalMemoizedMergedChildContext=t,We(rn),We(jt),Be(jt,t)):We(rn),Be(rn,n)}var Nr=null,jh=!1,ef=!1;function p0(t){Nr===null?Nr=[t]:Nr.push(t)}function MS(t){jh=!0,p0(t)}function Gi(){if(!ef&&Nr!==null){ef=!0;var t=0,e=Ve;try{var n=Nr;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,jh=!1}catch(s){throw Nr!==null&&(Nr=Nr.slice(t+1)),zw(am,Gi),s}finally{Ve=e,ef=!1}}return null}var ko=[],Ro=0,nh=null,rh=0,An=[],kn=0,Ps=null,Or=1,Mr="";function ps(t,e){ko[Ro++]=rh,ko[Ro++]=nh,nh=t,rh=e}function m0(t,e,n){An[kn++]=Or,An[kn++]=Mr,An[kn++]=Ps,Ps=t;var r=Or;t=Mr;var s=32-qn(r)-1;r&=~(1<<s),n+=1;var o=32-qn(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Or=1<<32-qn(e)+s|n<<s|r,Mr=o+t}else Or=1<<o|n<<s|r,Mr=t}function gm(t){t.return!==null&&(ps(t,1),m0(t,1,0))}function _m(t){for(;t===nh;)nh=ko[--Ro],ko[Ro]=null,rh=ko[--Ro],ko[Ro]=null;for(;t===Ps;)Ps=An[--kn],An[kn]=null,Mr=An[--kn],An[kn]=null,Or=An[--kn],An[kn]=null}var mn=null,fn=null,Ge=!1,Hn=null;function g0(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,fn=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:Or,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,fn=null,!0):!1;default:return!1}}function ep(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tp(t){if(Ge){var e=fn;if(e){var n=e;if(!W_(t,e)){if(ep(t))throw Error(Y(418));e=Pi(n.nextSibling);var r=mn;e&&W_(t,e)?g0(r,n):(t.flags=t.flags&-4097|2,Ge=!1,mn=t)}}else{if(ep(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ge=!1,mn=t}}}function $_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function lc(t){if(t!==mn)return!1;if(!Ge)return $_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qf(t.type,t.memoizedProps)),e&&(e=fn)){if(ep(t))throw _0(),Error(Y(418));for(;e;)g0(t,e),e=Pi(e.nextSibling)}if($_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=mn?Pi(t.stateNode.nextSibling):null;return!0}function _0(){for(var t=fn;t;)t=Pi(t.nextSibling)}function Ko(){fn=mn=null,Ge=!1}function ym(t){Hn===null?Hn=[t]:Hn.push(t)}var DS=Zr.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q_(t){var e=t._init;return e(t._payload)}function y0(t){function e(b,P){if(t){var N=b.deletions;N===null?(b.deletions=[P],b.flags|=16):N.push(P)}}function n(b,P){if(!t)return null;for(;P!==null;)e(b,P),P=P.sibling;return null}function r(b,P){for(b=new Map;P!==null;)P.key!==null?b.set(P.key,P):b.set(P.index,P),P=P.sibling;return b}function s(b,P){return b=Ri(b,P),b.index=0,b.sibling=null,b}function o(b,P,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<P?(b.flags|=2,P):N):(b.flags|=2,P)):(b.flags|=1048576,P)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function h(b,P,N,$){return P===null||P.tag!==6?(P=lf(N,b.mode,$),P.return=b,P):(P=s(P,N),P.return=b,P)}function d(b,P,N,$){var X=N.type;return X===xo?y(b,P,N.props.children,$,N.key):P!==null&&(P.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ui&&q_(X)===P.type)?($=s(P,N.props),$.ref=el(b,P,N),$.return=b,$):($=Lc(N.type,N.key,N.props,null,b.mode,$),$.ref=el(b,P,N),$.return=b,$)}function p(b,P,N,$){return P===null||P.tag!==4||P.stateNode.containerInfo!==N.containerInfo||P.stateNode.implementation!==N.implementation?(P=uf(N,b.mode,$),P.return=b,P):(P=s(P,N.children||[]),P.return=b,P)}function y(b,P,N,$,X){return P===null||P.tag!==7?(P=Ts(N,b.mode,$,X),P.return=b,P):(P=s(P,N),P.return=b,P)}function v(b,P,N){if(typeof P=="string"&&P!==""||typeof P=="number")return P=lf(""+P,b.mode,N),P.return=b,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Xu:return N=Lc(P.type,P.key,P.props,null,b.mode,N),N.ref=el(b,null,P),N.return=b,N;case To:return P=uf(P,b.mode,N),P.return=b,P;case ui:var $=P._init;return v(b,$(P._payload),N)}if(il(P)||Ka(P))return P=Ts(P,b.mode,N,null),P.return=b,P;uc(b,P)}return null}function E(b,P,N,$){var X=P!==null?P.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return X!==null?null:h(b,P,""+N,$);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xu:return N.key===X?d(b,P,N,$):null;case To:return N.key===X?p(b,P,N,$):null;case ui:return X=N._init,E(b,P,X(N._payload),$)}if(il(N)||Ka(N))return X!==null?null:y(b,P,N,$,null);uc(b,N)}return null}function k(b,P,N,$,X){if(typeof $=="string"&&$!==""||typeof $=="number")return b=b.get(N)||null,h(P,b,""+$,X);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Xu:return b=b.get($.key===null?N:$.key)||null,d(P,b,$,X);case To:return b=b.get($.key===null?N:$.key)||null,p(P,b,$,X);case ui:var J=$._init;return k(b,P,N,J($._payload),X)}if(il($)||Ka($))return b=b.get(N)||null,y(P,b,$,X,null);uc(P,$)}return null}function F(b,P,N,$){for(var X=null,J=null,C=P,S=P=0,I=null;C!==null&&S<N.length;S++){C.index>S?(I=C,C=null):I=C.sibling;var A=E(b,C,N[S],$);if(A===null){C===null&&(C=I);break}t&&C&&A.alternate===null&&e(b,C),P=o(A,P,S),J===null?X=A:J.sibling=A,J=A,C=I}if(S===N.length)return n(b,C),Ge&&ps(b,S),X;if(C===null){for(;S<N.length;S++)C=v(b,N[S],$),C!==null&&(P=o(C,P,S),J===null?X=C:J.sibling=C,J=C);return Ge&&ps(b,S),X}for(C=r(b,C);S<N.length;S++)I=k(C,b,S,N[S],$),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?S:I.key),P=o(I,P,S),J===null?X=I:J.sibling=I,J=I);return t&&C.forEach(function(O){return e(b,O)}),Ge&&ps(b,S),X}function V(b,P,N,$){var X=Ka(N);if(typeof X!="function")throw Error(Y(150));if(N=X.call(N),N==null)throw Error(Y(151));for(var J=X=null,C=P,S=P=0,I=null,A=N.next();C!==null&&!A.done;S++,A=N.next()){C.index>S?(I=C,C=null):I=C.sibling;var O=E(b,C,A.value,$);if(O===null){C===null&&(C=I);break}t&&C&&O.alternate===null&&e(b,C),P=o(O,P,S),J===null?X=O:J.sibling=O,J=O,C=I}if(A.done)return n(b,C),Ge&&ps(b,S),X;if(C===null){for(;!A.done;S++,A=N.next())A=v(b,A.value,$),A!==null&&(P=o(A,P,S),J===null?X=A:J.sibling=A,J=A);return Ge&&ps(b,S),X}for(C=r(b,C);!A.done;S++,A=N.next())A=k(C,b,S,A.value,$),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?S:A.key),P=o(A,P,S),J===null?X=A:J.sibling=A,J=A);return t&&C.forEach(function(D){return e(b,D)}),Ge&&ps(b,S),X}function B(b,P,N,$){if(typeof N=="object"&&N!==null&&N.type===xo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Xu:e:{for(var X=N.key,J=P;J!==null;){if(J.key===X){if(X=N.type,X===xo){if(J.tag===7){n(b,J.sibling),P=s(J,N.props.children),P.return=b,b=P;break e}}else if(J.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ui&&q_(X)===J.type){n(b,J.sibling),P=s(J,N.props),P.ref=el(b,J,N),P.return=b,b=P;break e}n(b,J);break}else e(b,J);J=J.sibling}N.type===xo?(P=Ts(N.props.children,b.mode,$,N.key),P.return=b,b=P):($=Lc(N.type,N.key,N.props,null,b.mode,$),$.ref=el(b,P,N),$.return=b,b=$)}return l(b);case To:e:{for(J=N.key;P!==null;){if(P.key===J)if(P.tag===4&&P.stateNode.containerInfo===N.containerInfo&&P.stateNode.implementation===N.implementation){n(b,P.sibling),P=s(P,N.children||[]),P.return=b,b=P;break e}else{n(b,P);break}else e(b,P);P=P.sibling}P=uf(N,b.mode,$),P.return=b,b=P}return l(b);case ui:return J=N._init,B(b,P,J(N._payload),$)}if(il(N))return F(b,P,N,$);if(Ka(N))return V(b,P,N,$);uc(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,P!==null&&P.tag===6?(n(b,P.sibling),P=s(P,N),P.return=b,b=P):(n(b,P),P=lf(N,b.mode,$),P.return=b,b=P),l(b)):n(b,P)}return B}var Qo=y0(!0),v0=y0(!1),ih=qi(null),sh=null,Lo=null,vm=null;function wm(){vm=Lo=sh=null}function Em(t){var e=ih.current;We(ih),t._currentValue=e}function np(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zo(t,e){sh=t,vm=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(vm!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(sh===null)throw Error(Y(308));Lo=t,sh.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var ys=null;function Tm(t){ys===null?ys=[t]:ys.push(t)}function w0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Tm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function xm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,Tm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function Sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lm(t,n)}}function G_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oh(t,e,n,r){var s=t.updateQueue;ci=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,y=p=d=null,h=o;do{var E=h.lane,k=h.eventTime;if((r&E)===E){y!==null&&(y=y.next={eventTime:k,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var F=t,V=h;switch(E=e,k=n,V.tag){case 1:if(F=V.payload,typeof F=="function"){v=F.call(k,v,E);break e}v=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=V.payload,E=typeof F=="function"?F.call(k,v,E):F,E==null)break e;v=Qe({},v,E);break e;case 2:ci=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else k={eventTime:k,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=k,d=v):y=y.next=k,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(y===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);As|=l,t.lanes=l,t.memoizedState=v}}function Z_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var au={},hr=qi(au),zl=qi(au),jl=qi(au);function vs(t){if(t===au)throw Error(Y(174));return t}function Im(t,e){switch(Be(jl,e),Be(zl,t),Be(hr,au),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}We(hr),Be(hr,e)}function Yo(){We(hr),We(zl),We(jl)}function T0(t){vs(jl.current);var e=vs(hr.current),n=Df(e,t.type);e!==n&&(Be(zl,t),Be(hr,n))}function Sm(t){zl.current===t&&(We(hr),We(zl))}var Ze=qi(0);function ah(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tf=[];function Pm(){for(var t=0;t<tf.length;t++)tf[t]._workInProgressVersionPrimary=null;tf.length=0}var Pc=Zr.ReactCurrentDispatcher,nf=Zr.ReactCurrentBatchConfig,Cs=0,Ke=null,ft=null,xt=null,lh=!1,yl=!1,Bl=0,VS=0;function Nt(){throw Error(Y(321))}function Cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function Am(t,e,n,r,s,o){if(Cs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?BS:US,t=n(r,s),yl){o=0;do{if(yl=!1,Bl=0,25<=o)throw Error(Y(301));o+=1,xt=ft=null,e.updateQueue=null,Pc.current=HS,t=n(r,s)}while(yl)}if(Pc.current=uh,e=ft!==null&&ft.next!==null,Cs=0,xt=ft=Ke=null,lh=!1,e)throw Error(Y(300));return t}function km(){var t=Bl!==0;return Bl=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ke.memoizedState=xt=t:xt=xt.next=t,xt}function On(){if(ft===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=xt===null?Ke.memoizedState:xt.next;if(e!==null)xt=e,ft=t;else{if(t===null)throw Error(Y(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},xt===null?Ke.memoizedState=xt=t:xt=xt.next=t}return xt}function Ul(t,e){return typeof e=="function"?e(t):e}function rf(t){var e=On(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var h=l=null,d=null,p=o;do{var y=p.lane;if((Cs&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var v={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=r):d=d.next=v,Ke.lanes|=y,As|=y}p=p.next}while(p!==null&&p!==o);d===null?l=r:d.next=h,Kn(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,As|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sf(t){var e=On(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Kn(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function x0(){}function I0(t,e){var n=Ke,r=On(),s=e(),o=!Kn(r.memoizedState,s);if(o&&(r.memoizedState=s,nn=!0),r=r.queue,Rm(C0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Hl(9,P0.bind(null,n,r,s,e),void 0,null),It===null)throw Error(Y(349));Cs&30||S0(n,e,s)}return s}function S0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P0(t,e,n,r){e.value=n,e.getSnapshot=r,A0(e)&&k0(t)}function C0(t,e,n){return n(function(){A0(e)&&k0(t)})}function A0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function k0(t){var e=Ur(t,1);e!==null&&Gn(e,t,1,-1)}function K_(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=jS.bind(null,Ke,t),[e.memoizedState,t]}function Hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function R0(){return On().memoizedState}function Cc(t,e,n,r){var s=ar();Ke.flags|=t,s.memoizedState=Hl(1|e,n,void 0,r===void 0?null:r)}function Bh(t,e,n,r){var s=On();r=r===void 0?null:r;var o=void 0;if(ft!==null){var l=ft.memoizedState;if(o=l.destroy,r!==null&&Cm(r,l.deps)){s.memoizedState=Hl(e,n,o,r);return}}Ke.flags|=t,s.memoizedState=Hl(1|e,n,o,r)}function Q_(t,e){return Cc(8390656,8,t,e)}function Rm(t,e){return Bh(2048,8,t,e)}function L0(t,e){return Bh(4,2,t,e)}function b0(t,e){return Bh(4,4,t,e)}function N0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O0(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4,4,N0.bind(null,e,t),n)}function Lm(){}function M0(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V0(t,e,n){return Cs&21?(Kn(n,e)||(n=Uw(),Ke.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function FS(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=nf.transition;nf.transition={};try{t(!1),e()}finally{Ve=n,nf.transition=r}}function F0(){return On().memoizedState}function zS(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z0(t))j0(e,n);else if(n=w0(t,e,n,r),n!==null){var s=qt();Gn(n,t,r,s),B0(n,e,r)}}function jS(t,e,n){var r=ki(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z0(t))j0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Kn(h,l)){var d=e.interleaved;d===null?(s.next=s,Tm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=w0(t,e,s,r),n!==null&&(s=qt(),Gn(n,t,r,s),B0(n,e,r))}}function z0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function j0(t,e){yl=lh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lm(t,n)}}var uh={readContext:Nn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},BS={readContext:Nn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:Q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,N0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zS.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:K_,useDebugValue:Lm,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=K_(!1),e=t[0];return t=FS.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,s=ar();if(Ge){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),It===null)throw Error(Y(349));Cs&30||S0(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Q_(C0.bind(null,r,o,t),[t]),r.flags|=2048,Hl(9,P0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ar(),e=It.identifierPrefix;if(Ge){var n=Mr,r=Or;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},US={readContext:Nn,useCallback:M0,useContext:Nn,useEffect:Rm,useImperativeHandle:O0,useInsertionEffect:L0,useLayoutEffect:b0,useMemo:D0,useReducer:rf,useRef:R0,useState:function(){return rf(Ul)},useDebugValue:Lm,useDeferredValue:function(t){var e=On();return V0(e,ft.memoizedState,t)},useTransition:function(){var t=rf(Ul)[0],e=On().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:I0,useId:F0,unstable_isNewReconciler:!1},HS={readContext:Nn,useCallback:M0,useContext:Nn,useEffect:Rm,useImperativeHandle:O0,useInsertionEffect:L0,useLayoutEffect:b0,useMemo:D0,useReducer:sf,useRef:R0,useState:function(){return sf(Ul)},useDebugValue:Lm,useDeferredValue:function(t){var e=On();return ft===null?e.memoizedState=t:V0(e,ft.memoizedState,t)},useTransition:function(){var t=sf(Ul)[0],e=On().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:I0,useId:F0,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uh={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=ki(t),o=Fr(r,s);o.payload=e,n!=null&&(o.callback=n),e=Ci(t,o,s),e!==null&&(Gn(e,t,s,r),Sc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=ki(t),o=Fr(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ci(t,o,s),e!==null&&(Gn(e,t,s,r),Sc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=ki(t),s=Fr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ci(t,s,r),e!==null&&(Gn(e,t,r,n),Sc(e,t,r))}};function Y_(t,e,n,r,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,o):!0}function U0(t,e,n){var r=!1,s=Fi,o=e.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(s=sn(e)?Ss:jt.current,r=e.contextTypes,o=(r=r!=null)?Zo(t,s):Fi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function X_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uh.enqueueReplaceState(e,e.state,null)}function ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xm(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Nn(o):(o=sn(e)?Ss:jt.current,s.context=Zo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uh.enqueueReplaceState(s,s.state,null),oh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xo(t,e){try{var n="",r=e;do n+=_I(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function of(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WS=typeof WeakMap=="function"?WeakMap:Map;function H0(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,mp=r),sp(t,e)},n}function W0(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){sp(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function J_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iP.bind(null,t,e,n),e.then(t,t))}function ey(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ty(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Ci(n,e,1))),n.lanes|=1),t)}var $S=Zr.ReactCurrentOwner,nn=!1;function $t(t,e,n,r){e.child=t===null?v0(e,null,n,r):Qo(e,t.child,n,r)}function ny(t,e,n,r,s){n=n.render;var o=e.ref;return zo(e,s),r=Am(t,e,n,r,o,s),n=km(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(Ge&&n&&gm(e),e.flags|=1,$t(t,e,r,s),e.child)}function ry(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!zm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,$0(t,e,o,r,s)):(t=Lc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(l,r)&&t.ref===e.ref)return Hr(t,e,s)}return e.flags|=1,t=Ri(o,r),t.ref=e.ref,t.return=e,e.child=t}function $0(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ml(o,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Hr(t,e,s)}return op(t,e,n,r,s)}function q0(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(No,dn),dn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(No,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Be(No,dn),dn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Be(No,dn),dn|=r;return $t(t,e,s,n),e.child}function G0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function op(t,e,n,r,s){var o=sn(n)?Ss:jt.current;return o=Zo(e,o),zo(e,s),n=Am(t,e,n,r,o,s),r=km(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(Ge&&r&&gm(e),e.flags|=1,$t(t,e,n,s),e.child)}function iy(t,e,n,r,s){if(sn(n)){var o=!0;th(e)}else o=!1;if(zo(e,s),e.stateNode===null)Ac(t,e),U0(e,n,r),ip(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Nn(p):(p=sn(n)?Ss:jt.current,p=Zo(e,p));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||d!==p)&&X_(e,l,r,p),ci=!1;var E=e.memoizedState;l.state=E,oh(e,r,l,s),d=e.memoizedState,h!==r||E!==d||rn.current||ci?(typeof y=="function"&&(rp(e,n,y,r),d=e.memoizedState),(h=ci||Y_(e,n,h,r,E,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=p,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,E0(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Bn(e.type,h),l.props=p,v=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Nn(d):(d=sn(n)?Ss:jt.current,d=Zo(e,d));var k=n.getDerivedStateFromProps;(y=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||E!==d)&&X_(e,l,r,d),ci=!1,E=e.memoizedState,l.state=E,oh(e,r,l,s);var F=e.memoizedState;h!==v||E!==F||rn.current||ci?(typeof k=="function"&&(rp(e,n,k,r),F=e.memoizedState),(p=ci||Y_(e,n,p,r,E,F,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=F),l.props=r,l.state=F,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return ap(t,e,n,r,o,s)}function ap(t,e,n,r,s,o){G0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&H_(e,n,!1),Hr(t,e,o);r=e.stateNode,$S.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,h,o)):$t(t,e,h,o),e.memoizedState=r.state,s&&H_(e,n,!0),e.child}function Z0(t){var e=t.stateNode;e.pendingContext?U_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U_(t,e.context,!1),Im(t,e.containerInfo)}function sy(t,e,n,r,s){return Ko(),ym(s),e.flags|=256,$t(t,e,n,r),e.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function up(t){return{baseLanes:t,cachePool:null,transitions:null}}function K0(t,e,n){var r=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Ze,s&1),t===null)return tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=$h(l,r,0,null),t=Ts(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=up(n),e.memoizedState=lp,t):bm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return qS(t,e,l,r,h,s,n);if(o){o=r.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ri(s,d),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Ri(h,o):(o=Ts(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?up(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=lp,r}return o=t.child,t=o.sibling,r=Ri(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bm(t,e){return e=$h({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,r){return r!==null&&ym(r),Qo(e,t.child,null,n),t=bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qS(t,e,n,r,s,o,l){if(n)return e.flags&256?(e.flags&=-257,r=of(Error(Y(422))),cc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=$h({mode:"visible",children:r.children},s,0,null),o=Ts(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Qo(e,t.child,null,l),e.child.memoizedState=up(l),e.memoizedState=lp,o);if(!(e.mode&1))return cc(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(Y(419)),r=of(o,r,void 0),cc(t,e,l,r)}if(h=(l&t.childLanes)!==0,nn||h){if(r=It,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ur(t,s),Gn(r,t,s,-1))}return Fm(),r=of(Error(Y(421))),cc(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sP.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,fn=Pi(s.nextSibling),mn=e,Ge=!0,Hn=null,t!==null&&(An[kn++]=Or,An[kn++]=Mr,An[kn++]=Ps,Or=t.id,Mr=t.overflow,Ps=e),e=bm(e,r.children),e.flags|=4096,e)}function oy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),np(t.return,e,n)}function af(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Q0(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if($t(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,n,e);else if(t.tag===19)oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ah(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),af(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ah(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}af(e,!0,n,null,o);break;case"together":af(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GS(t,e,n){switch(e.tag){case 3:Z0(e),Ko();break;case 5:T0(e);break;case 1:sn(e.type)&&th(e);break;case 4:Im(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Be(ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?K0(t,e,n):(Be(Ze,Ze.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);Be(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,q0(t,e,n)}return Hr(t,e,n)}var Y0,cp,X0,J0;Y0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cp=function(){};X0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vs(hr.current);var o=null;switch(n){case"input":s=bf(t,s),r=bf(t,r),o=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),o=[];break;case"textarea":s=Mf(t,s),r=Mf(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jc)}Vf(n,r);var l;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Al.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var d=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Al.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ue("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};J0=function(t,e,n,r){n!==r&&(e.flags|=4)};function tl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZS(t,e,n){var r=e.pendingProps;switch(_m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return sn(e.type)&&eh(),Ot(e),null;case 3:return r=e.stateNode,Yo(),We(rn),We(jt),Pm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(yp(Hn),Hn=null))),cp(t,e),Ot(e),null;case 5:Sm(e);var s=vs(jl.current);if(n=e.type,t!==null&&e.stateNode!=null)X0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ot(e),null}if(t=vs(hr.current),lc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ur]=e,r[Fl]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":m_(r,o),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",r);break;case"textarea":__(r,o),Ue("invalid",r)}Vf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&ac(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&ac(r.textContent,h,t),s=["children",""+h]):Al.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Ju(r),g_(r,o,!0);break;case"textarea":Ju(r),y_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Jc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ur]=e,t[Fl]=r,Y0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ff(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":m_(t,r),s=bf(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":__(t,r),s=Mf(t,r),Ue("invalid",t);break;default:s=r}Vf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Rw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Aw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&kl(t,d):typeof d=="number"&&kl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Al.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Ue("scroll",t):d!=null&&nm(t,o,d,l))}switch(n){case"input":Ju(t),g_(t,r,!1);break;case"textarea":Ju(t),y_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Mo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Mo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)J0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=vs(jl.current),vs(hr.current),lc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(o=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:ac(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return Ot(e),null;case 13:if(We(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&fn!==null&&e.mode&1&&!(e.flags&128))_0(),Ko(),e.flags|=98560,o=!1;else if(o=lc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[ur]=e}else Ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else Hn!==null&&(yp(Hn),Hn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?pt===0&&(pt=3):Fm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Yo(),cp(t,e),t===null&&Dl(e.stateNode.containerInfo),Ot(e),null;case 10:return Em(e.type._context),Ot(e),null;case 17:return sn(e.type)&&eh(),Ot(e),null;case 19:if(We(Ze),o=e.memoizedState,o===null)return Ot(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)tl(o,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ah(t),l!==null){for(e.flags|=128,tl(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Jo&&(e.flags|=128,r=!0,tl(o,!1),e.lanes=4194304)}else{if(!r)if(t=ah(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ge)return Ot(e),null}else 2*it()-o.renderingStartTime>Jo&&n!==1073741824&&(e.flags|=128,r=!0,tl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ze.current,Be(Ze,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function KS(t,e){switch(_m(e),e.tag){case 1:return sn(e.type)&&eh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yo(),We(rn),We(jt),Pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sm(e),null;case 13:if(We(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ze),null;case 4:return Yo(),null;case 10:return Em(e.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var hc=!1,Ft=!1,QS=typeof WeakSet=="function"?WeakSet:Set,le=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function hp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var ay=!1;function YS(t,e){if(Zf=Qc,t=i0(),mm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,y=0,v=t,E=null;t:for(;;){for(var k;v!==n||s!==0&&v.nodeType!==3||(h=l+s),v!==o||r!==0&&v.nodeType!==3||(d=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(k=v.firstChild)!==null;)E=v,v=k;for(;;){if(v===t)break t;if(E===n&&++p===s&&(h=l),E===o&&++y===r&&(d=l),(k=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=k}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kf={focusedElem:t,selectionRange:n},Qc=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var V=F.memoizedProps,B=F.memoizedState,b=e.stateNode,P=b.getSnapshotBeforeUpdate(e.elementType===e.type?V:Bn(e.type,V),B);b.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch($){Je(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return F=ay,ay=!1,F}function vl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&hp(e,n,o)}s=s.next}while(s!==r)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eE(t){var e=t.alternate;e!==null&&(t.alternate=null,eE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Fl],delete e[Xf],delete e[NS],delete e[OS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tE(t){return t.tag===5||t.tag===3||t.tag===4}function ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jc));else if(r!==4&&(t=t.child,t!==null))for(fp(t,e,n),t=t.sibling;t!==null;)fp(t,e,n),t=t.sibling}function pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}var Pt=null,Un=!1;function oi(t,e,n){for(n=n.child;n!==null;)nE(t,e,n),n=n.sibling}function nE(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Mh,n)}catch{}switch(n.tag){case 5:Ft||bo(n,e);case 6:var r=Pt,s=Un;Pt=null,oi(t,e,n),Pt=r,Un=s,Pt!==null&&(Un?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Un?(t=Pt,n=n.stateNode,t.nodeType===8?Jd(t.parentNode,n):t.nodeType===1&&Jd(t,n),Nl(t)):Jd(Pt,n.stateNode));break;case 4:r=Pt,s=Un,Pt=n.stateNode.containerInfo,Un=!0,oi(t,e,n),Pt=r,Un=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&hp(n,e,l),s=s.next}while(s!==r)}oi(t,e,n);break;case 1:if(!Ft&&(bo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){Je(n,e,h)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,oi(t,e,n),Ft=r):oi(t,e,n);break;default:oi(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QS),e.forEach(function(r){var s=oP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,Un=!1;break e;case 3:Pt=h.stateNode.containerInfo,Un=!0;break e;case 4:Pt=h.stateNode.containerInfo,Un=!0;break e}h=h.return}if(Pt===null)throw Error(Y(160));nE(o,l,s),Pt=null,Un=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){Je(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rE(e,t),e=e.sibling}function rE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(e,t),or(t),r&4){try{vl(3,t,t.return),Hh(3,t)}catch(V){Je(t,t.return,V)}try{vl(5,t,t.return)}catch(V){Je(t,t.return,V)}}break;case 1:jn(e,t),or(t),r&512&&n!==null&&bo(n,n.return);break;case 5:if(jn(e,t),or(t),r&512&&n!==null&&bo(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(V){Je(t,t.return,V)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Sw(s,o),Ff(h,l);var p=Ff(h,o);for(l=0;l<d.length;l+=2){var y=d[l],v=d[l+1];y==="style"?Rw(s,v):y==="dangerouslySetInnerHTML"?Aw(s,v):y==="children"?kl(s,v):nm(s,y,v,p)}switch(h){case"input":Nf(s,o);break;case"textarea":Pw(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Mo(s,!!o.multiple,k,!1):E!==!!o.multiple&&(o.defaultValue!=null?Mo(s,!!o.multiple,o.defaultValue,!0):Mo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Fl]=o}catch(V){Je(t,t.return,V)}}break;case 6:if(jn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(V){Je(t,t.return,V)}}break;case 3:if(jn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(V){Je(t,t.return,V)}break;case 4:jn(e,t),or(t);break;case 13:jn(e,t),or(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Mm=it())),r&4&&uy(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(p=Ft)||y,jn(e,t),Ft=p):jn(e,t),or(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(le=t,y=t.child;y!==null;){for(v=le=y;le!==null;){switch(E=le,k=E.child,E.tag){case 0:case 11:case 14:case 15:vl(4,E,E.return);break;case 1:bo(E,E.return);var F=E.stateNode;if(typeof F.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(V){Je(r,n,V)}}break;case 5:bo(E,E.return);break;case 22:if(E.memoizedState!==null){hy(v);continue}}k!==null?(k.return=E,le=k):hy(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=kw("display",l))}catch(V){Je(t,t.return,V)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(V){Je(t,t.return,V)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:jn(e,t),or(t),r&4&&uy(t);break;case 21:break;default:jn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tE(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var o=ly(t);pp(t,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,h=ly(t);fp(t,h,l);break;default:throw Error(Y(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XS(t,e,n){le=t,iE(t)}function iE(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||hc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Ft;h=hc;var p=Ft;if(hc=l,(Ft=d)&&!p)for(le=s;le!==null;)l=le,d=l.child,l.tag===22&&l.memoizedState!==null?dy(s):d!==null?(d.return=l,le=d):dy(s);for(;o!==null;)le=o,iE(o),o=o.sibling;le=s,hc=h,Ft=p}cy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,le=o):cy(t)}}function cy(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Z_(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Nl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ft||e.flags&512&&dp(e)}catch(E){Je(e,e.return,E)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function hy(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function dy(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(d){Je(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{dp(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{dp(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){le=null;break}var h=e.sibling;if(h!==null){h.return=e.return,le=h;break}le=e.return}}var JS=Math.ceil,ch=Zr.ReactCurrentDispatcher,Nm=Zr.ReactCurrentOwner,bn=Zr.ReactCurrentBatchConfig,ke=0,It=null,ct=null,kt=0,dn=0,No=qi(0),pt=0,Wl=null,As=0,Wh=0,Om=0,wl=null,en=null,Mm=0,Jo=1/0,br=null,hh=!1,mp=null,Ai=null,dc=!1,wi=null,dh=0,El=0,gp=null,kc=-1,Rc=0;function qt(){return ke&6?it():kc!==-1?kc:kc=it()}function ki(t){return t.mode&1?ke&2&&kt!==0?kt&-kt:DS.transition!==null?(Rc===0&&(Rc=Uw()),Rc):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Kw(t.type)),t):1}function Gn(t,e,n,r){if(50<El)throw El=0,gp=null,Error(Y(185));iu(t,n,r),(!(ke&2)||t!==It)&&(t===It&&(!(ke&2)&&(Wh|=n),pt===4&&pi(t,kt)),on(t,r),n===1&&ke===0&&!(e.mode&1)&&(Jo=it()+500,jh&&Gi()))}function on(t,e){var n=t.callbackNode;DI(t,e);var r=Kc(t,t===It?kt:0);if(r===0)n!==null&&E_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&E_(n),e===1)t.tag===0?MS(fy.bind(null,t)):p0(fy.bind(null,t)),LS(function(){!(ke&6)&&Gi()}),n=null;else{switch(Hw(r)){case 1:n=am;break;case 4:n=jw;break;case 16:n=Zc;break;case 536870912:n=Bw;break;default:n=Zc}n=dE(n,sE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sE(t,e){if(kc=-1,Rc=0,ke&6)throw Error(Y(327));var n=t.callbackNode;if(jo()&&t.callbackNode!==n)return null;var r=Kc(t,t===It?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fh(t,r);else{e=r;var s=ke;ke|=2;var o=aE();(It!==t||kt!==e)&&(br=null,Jo=it()+500,Es(t,e));do try{nP();break}catch(h){oE(t,h)}while(!0);wm(),ch.current=o,ke=s,ct!==null?e=0:(It=null,kt=0,e=pt)}if(e!==0){if(e===2&&(s=Hf(t),s!==0&&(r=s,e=_p(t,s))),e===1)throw n=Wl,Es(t,0),pi(t,r),on(t,it()),n;if(e===6)pi(t,r);else{if(s=t.current.alternate,!(r&30)&&!eP(s)&&(e=fh(t,r),e===2&&(o=Hf(t),o!==0&&(r=o,e=_p(t,o))),e===1))throw n=Wl,Es(t,0),pi(t,r),on(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:ms(t,en,br);break;case 3:if(pi(t,r),(r&130023424)===r&&(e=Mm+500-it(),10<e)){if(Kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yf(ms.bind(null,t,en,br),e);break}ms(t,en,br);break;case 4:if(pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-qn(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JS(r/1960))-r,10<r){t.timeoutHandle=Yf(ms.bind(null,t,en,br),r);break}ms(t,en,br);break;case 5:ms(t,en,br);break;default:throw Error(Y(329))}}}return on(t,it()),t.callbackNode===n?sE.bind(null,t):null}function _p(t,e){var n=wl;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=fh(t,e),t!==2&&(e=en,en=n,e!==null&&yp(e)),t}function yp(t){en===null?en=t:en.push.apply(en,t)}function eP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Kn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(t,e){for(e&=~Om,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function fy(t){if(ke&6)throw Error(Y(327));jo();var e=Kc(t,0);if(!(e&1))return on(t,it()),null;var n=fh(t,e);if(t.tag!==0&&n===2){var r=Hf(t);r!==0&&(e=r,n=_p(t,r))}if(n===1)throw n=Wl,Es(t,0),pi(t,e),on(t,it()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,en,br),on(t,it()),null}function Dm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Jo=it()+500,jh&&Gi())}}function ks(t){wi!==null&&wi.tag===0&&!(ke&6)&&jo();var e=ke;ke|=1;var n=bn.transition,r=Ve;try{if(bn.transition=null,Ve=1,t)return t()}finally{Ve=r,bn.transition=n,ke=e,!(ke&6)&&Gi()}}function Vm(){dn=No.current,We(No)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RS(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(_m(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eh();break;case 3:Yo(),We(rn),We(jt),Pm();break;case 5:Sm(r);break;case 4:Yo();break;case 13:We(Ze);break;case 19:We(Ze);break;case 10:Em(r.type._context);break;case 22:case 23:Vm()}n=n.return}if(It=t,ct=t=Ri(t.current,null),kt=dn=e,pt=0,Wl=null,Om=Wh=As=0,en=wl=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}ys=null}return t}function oE(t,e){do{var n=ct;try{if(wm(),Pc.current=uh,lh){for(var r=Ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lh=!1}if(Cs=0,xt=ft=Ke=null,yl=!1,Bl=0,Nm.current=null,n===null||n.return===null){pt=1,Wl=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=kt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=h,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var k=ey(l);if(k!==null){k.flags&=-257,ty(k,l,h,o,e),k.mode&1&&J_(o,p,e),e=k,d=p;var F=e.updateQueue;if(F===null){var V=new Set;V.add(d),e.updateQueue=V}else F.add(d);break e}else{if(!(e&1)){J_(o,p,e),Fm();break e}d=Error(Y(426))}}else if(Ge&&h.mode&1){var B=ey(l);if(B!==null){!(B.flags&65536)&&(B.flags|=256),ty(B,l,h,o,e),ym(Xo(d,h));break e}}o=d=Xo(d,h),pt!==4&&(pt=2),wl===null?wl=[o]:wl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=H0(o,d,e);G_(o,b);break e;case 1:h=d;var P=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ai===null||!Ai.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var $=W0(o,h,e);G_(o,$);break e}}o=o.return}while(o!==null)}uE(n)}catch(X){e=X,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function aE(){var t=ch.current;return ch.current=uh,t===null?uh:t}function Fm(){(pt===0||pt===3||pt===2)&&(pt=4),It===null||!(As&268435455)&&!(Wh&268435455)||pi(It,kt)}function fh(t,e){var n=ke;ke|=2;var r=aE();(It!==t||kt!==e)&&(br=null,Es(t,e));do try{tP();break}catch(s){oE(t,s)}while(!0);if(wm(),ke=n,ch.current=r,ct!==null)throw Error(Y(261));return It=null,kt=0,pt}function tP(){for(;ct!==null;)lE(ct)}function nP(){for(;ct!==null&&!CI();)lE(ct)}function lE(t){var e=hE(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?uE(t):ct=e,Nm.current=null}function uE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KS(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=ZS(n,e,dn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function ms(t,e,n){var r=Ve,s=bn.transition;try{bn.transition=null,Ve=1,rP(t,e,n,r)}finally{bn.transition=s,Ve=r}return null}function rP(t,e,n,r){do jo();while(wi!==null);if(ke&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(VI(t,o),t===It&&(ct=It=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dc||(dc=!0,dE(Zc,function(){return jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bn.transition,bn.transition=null;var l=Ve;Ve=1;var h=ke;ke|=4,Nm.current=null,YS(t,n),rE(n,t),xS(Kf),Qc=!!Zf,Kf=Zf=null,t.current=n,XS(n),AI(),ke=h,Ve=l,bn.transition=o}else t.current=n;if(dc&&(dc=!1,wi=t,dh=s),o=t.pendingLanes,o===0&&(Ai=null),LI(n.stateNode),on(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=mp,mp=null,t;return dh&1&&t.tag!==0&&jo(),o=t.pendingLanes,o&1?t===gp?El++:(El=0,gp=t):El=0,Gi(),null}function jo(){if(wi!==null){var t=Hw(dh),e=bn.transition,n=Ve;try{if(bn.transition=null,Ve=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,dh=0,ke&6)throw Error(Y(331));var s=ke;for(ke|=4,le=t.current;le!==null;){var o=le,l=o.child;if(le.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(le=p;le!==null;){var y=le;switch(y.tag){case 0:case 11:case 15:vl(8,y,o)}var v=y.child;if(v!==null)v.return=y,le=v;else for(;le!==null;){y=le;var E=y.sibling,k=y.return;if(eE(y),y===p){le=null;break}if(E!==null){E.return=k,le=E;break}le=k}}}var F=o.alternate;if(F!==null){var V=F.child;if(V!==null){F.child=null;do{var B=V.sibling;V.sibling=null,V=B}while(V!==null)}}le=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,le=l;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,le=b;break e}le=o.return}}var P=t.current;for(le=P;le!==null;){l=le;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,le=N;else e:for(l=P;le!==null;){if(h=le,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Hh(9,h)}}catch(X){Je(h,h.return,X)}if(h===l){le=null;break e}var $=h.sibling;if($!==null){$.return=h.return,le=$;break e}le=h.return}}if(ke=s,Gi(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Mh,t)}catch{}r=!0}return r}finally{Ve=n,bn.transition=e}}return!1}function py(t,e,n){e=Xo(n,e),e=H0(t,e,1),t=Ci(t,e,1),e=qt(),t!==null&&(iu(t,1,e),on(t,e))}function Je(t,e,n){if(t.tag===3)py(t,t,n);else for(;e!==null;){if(e.tag===3){py(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=Xo(n,t),t=W0(e,t,1),e=Ci(e,t,1),t=qt(),e!==null&&(iu(e,1,t),on(e,t));break}}e=e.return}}function iP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(kt&n)===n&&(pt===4||pt===3&&(kt&130023424)===kt&&500>it()-Mm?Es(t,0):Om|=n),on(t,e)}function cE(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var n=qt();t=Ur(t,e),t!==null&&(iu(t,e,n),on(t,n))}function sP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cE(t,n)}function oP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),cE(t,n)}var hE;hE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,GS(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Ge&&e.flags&1048576&&m0(e,rh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ac(t,e),t=e.pendingProps;var s=Zo(e,jt.current);zo(e,n),s=Am(null,e,r,t,s,n);var o=km();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(o=!0,th(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xm(e),s.updater=Uh,e.stateNode=s,s._reactInternals=e,ip(e,r,t,n),e=ap(null,e,r,!0,o,n)):(e.tag=0,Ge&&o&&gm(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lP(r),t=Bn(r,t),s){case 0:e=op(null,e,r,t,n);break e;case 1:e=iy(null,e,r,t,n);break e;case 11:e=ny(null,e,r,t,n);break e;case 14:e=ry(null,e,r,Bn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),op(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),iy(t,e,r,s,n);case 3:e:{if(Z0(e),t===null)throw Error(Y(387));r=e.pendingProps,o=e.memoizedState,s=o.element,E0(t,e),oh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Xo(Error(Y(423)),e),e=sy(t,e,r,n,s);break e}else if(r!==s){s=Xo(Error(Y(424)),e),e=sy(t,e,r,n,s);break e}else for(fn=Pi(e.stateNode.containerInfo.firstChild),mn=e,Ge=!0,Hn=null,n=v0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ko(),r===s){e=Hr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return T0(e),t===null&&tp(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Qf(r,s)?l=null:o!==null&&Qf(r,o)&&(e.flags|=32),G0(t,e),$t(t,e,l,n),e.child;case 6:return t===null&&tp(e),null;case 13:return K0(t,e,n);case 4:return Im(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qo(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),ny(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Be(ih,r._currentValue),r._currentValue=l,o!==null)if(Kn(o.value,l)){if(o.children===s.children&&!rn.current){e=Hr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Fr(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),np(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),np(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zo(e,n),s=Nn(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=Bn(r,e.pendingProps),s=Bn(r.type,s),ry(t,e,r,s,n);case 15:return $0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),Ac(t,e),e.tag=1,sn(r)?(t=!0,th(e)):t=!1,zo(e,n),U0(e,r,s),ip(e,r,s,n),ap(null,e,r,!0,t,n);case 19:return Q0(t,e,n);case 22:return q0(t,e,n)}throw Error(Y(156,e.tag))};function dE(t,e){return zw(t,e)}function aP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new aP(t,e,n,r)}function zm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lP(t){if(typeof t=="function")return zm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===im)return 11;if(t===sm)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,s,o){var l=2;if(r=t,typeof t=="function")zm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case xo:return Ts(n.children,s,o,e);case rm:l=8,s|=8;break;case Af:return t=Ln(12,n,e,s|2),t.elementType=Af,t.lanes=o,t;case kf:return t=Ln(13,n,e,s),t.elementType=kf,t.lanes=o,t;case Rf:return t=Ln(19,n,e,s),t.elementType=Rf,t.lanes=o,t;case Tw:return $h(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ww:l=10;break e;case Ew:l=9;break e;case im:l=11;break e;case sm:l=14;break e;case ui:l=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Ln(l,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Ts(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function $h(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Tw,t.lanes=n,t.stateNode={isHidden:!1},t}function lf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function uf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ud(0),this.expirationTimes=Ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jm(t,e,n,r,s,o,l,h,d){return t=new uP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ln(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xm(o),t}function cP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:To,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fE(t){if(!t)return Fi;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(sn(n))return f0(t,n,e)}return e}function pE(t,e,n,r,s,o,l,h,d){return t=jm(n,r,!0,t,s,o,l,h,d),t.context=fE(null),n=t.current,r=qt(),s=ki(n),o=Fr(r,s),o.callback=e??null,Ci(n,o,s),t.current.lanes=s,iu(t,s,r),on(t,r),t}function qh(t,e,n,r){var s=e.current,o=qt(),l=ki(s);return n=fE(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ci(s,e,l),t!==null&&(Gn(t,s,l,o),Sc(t,s,l)),l}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function my(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bm(t,e){my(t,e),(t=t.alternate)&&my(t,e)}function hP(){return null}var mE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Um(t){this._internalRoot=t}Gh.prototype.render=Um.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));qh(t,e,null,null)};Gh.prototype.unmount=Um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ks(function(){qh(null,t,null,null)}),e[Br]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fi.length&&e!==0&&e<fi[n].priority;n++);fi.splice(n,0,t),n===0&&Zw(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gy(){}function dP(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var p=ph(l);o.call(p)}}var l=pE(e,r,t,0,null,!1,!1,"",gy);return t._reactRootContainer=l,t[Br]=l.current,Dl(t.nodeType===8?t.parentNode:t),ks(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=ph(d);h.call(p)}}var d=jm(t,0,!1,null,null,!1,!1,"",gy);return t._reactRootContainer=d,t[Br]=d.current,Dl(t.nodeType===8?t.parentNode:t),ks(function(){qh(e,d,n,r)}),d}function Kh(t,e,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=ph(l);h.call(d)}}qh(e,l,t,s)}else l=dP(n,e,t,s,r);return ph(l)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sl(e.pendingLanes);n!==0&&(lm(e,n|1),on(e,it()),!(ke&6)&&(Jo=it()+500,Gi()))}break;case 13:ks(function(){var r=Ur(t,1);if(r!==null){var s=qt();Gn(r,t,1,s)}}),Bm(t,1)}};um=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=qt();Gn(e,t,134217728,n)}Bm(t,134217728)}};$w=function(t){if(t.tag===13){var e=ki(t),n=Ur(t,e);if(n!==null){var r=qt();Gn(n,t,e,r)}Bm(t,e)}};qw=function(){return Ve};Gw=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};jf=function(t,e,n){switch(e){case"input":if(Nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zh(r);if(!s)throw Error(Y(90));Iw(r),Nf(r,s)}}}break;case"textarea":Pw(t,n);break;case"select":e=n.value,e!=null&&Mo(t,!!n.multiple,e,!1)}};Nw=Dm;Ow=ks;var fP={usingClientEntryPoint:!1,Events:[ou,Co,zh,Lw,bw,Dm]},nl={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pP={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vw(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||hP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Mh=fc.inject(pP),cr=fc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(Y(200));return cP(t,e,null,n)};_n.createRoot=function(t,e){if(!Hm(t))throw Error(Y(299));var n=!1,r="",s=mE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jm(t,1,!1,null,null,n,!1,r,s),t[Br]=e.current,Dl(t.nodeType===8?t.parentNode:t),new Um(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Vw(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return ks(t)};_n.hydrate=function(t,e,n){if(!Zh(e))throw Error(Y(200));return Kh(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=mE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=pE(e,null,t,1,n??null,s,!1,o,l),t[Br]=e.current,Dl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gh(e)};_n.render=function(t,e,n){if(!Zh(e))throw Error(Y(200));return Kh(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(Y(40));return t._reactRootContainer?(ks(function(){Kh(null,null,t,!1,function(){t._reactRootContainer=null,t[Br]=null})}),!0):!1};_n.unstable_batchedUpdates=Dm;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Kh(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function gE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gE)}catch(t){console.error(t)}}gE(),gw.exports=_n;var _E=gw.exports,_y=_E;Pf.createRoot=_y.createRoot,Pf.hydrateRoot=_y.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var Ei;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ei||(Ei={}));const yy="popstate";function mP(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:l,hash:h}=r.location;return vp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vE(s)}return _P(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gP(){return Math.random().toString(36).substr(2,8)}function vy(t,e){return{usr:t.state,key:t.key,idx:e}}function vp(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ha(e):e,{state:n,key:e&&e.key||r||gP()})}function vE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ha(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _P(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,h=Ei.Pop,d=null,p=y();p==null&&(p=0,l.replaceState($l({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function v(){h=Ei.Pop;let B=y(),b=B==null?null:B-p;p=B,d&&d({action:h,location:V.location,delta:b})}function E(B,b){h=Ei.Push;let P=vp(V.location,B,b);p=y()+1;let N=vy(P,p),$=V.createHref(P);try{l.pushState(N,"",$)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign($)}o&&d&&d({action:h,location:V.location,delta:1})}function k(B,b){h=Ei.Replace;let P=vp(V.location,B,b);p=y();let N=vy(P,p),$=V.createHref(P);l.replaceState(N,"",$),o&&d&&d({action:h,location:V.location,delta:0})}function F(B){let b=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof B=="string"?B:vE(B);return P=P.replace(/ $/,"%20"),mt(b,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,b)}let V={get action(){return h},get location(){return t(s,l)},listen(B){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(yy,v),d=B,()=>{s.removeEventListener(yy,v),d=null}},createHref(B){return e(s,B)},createURL:F,encodeLocation(B){let b=F(B);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:E,replace:k,go(B){return l.go(B)}};return V}var wy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wy||(wy={}));function yP(t,e,n){return n===void 0&&(n="/"),vP(t,e,n)}function vP(t,e,n,r){let s=typeof e=="string"?ha(e):e,o=TE(s.pathname||"/",n);if(o==null)return null;let l=wE(t);wP(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=bP(o);h=kP(l[d],p)}return h}function wE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(mt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=xs([r,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),wE(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:CP(p,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of EE(o.path))s(o,l,d)}),e}function EE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=EE(r.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function wP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EP=/^:[\w-]+$/,TP=3,xP=2,IP=1,SP=10,PP=-2,Ey=t=>t==="*";function CP(t,e){let n=t.split("/"),r=n.length;return n.some(Ey)&&(r+=PP),e&&(r+=xP),n.filter(s=>!Ey(s)).reduce((s,o)=>s+(EP.test(o)?TP:o===""?IP:SP),r)}function AP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function kP(t,e,n){let{routesMeta:r}=t,s={},o="/",l=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=RP({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:xs([o,v.pathname]),pathnameBase:FP(xs([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=xs([o,v.pathnameBase]))}return l}function RP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,y,v)=>{let{paramName:E,isOptional:k}=y;if(E==="*"){let V=h[v]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const F=h[v];return k&&!F?p[E]=void 0:p[E]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function LP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function TE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ha(t):t;return{pathname:n?n.startsWith("/")?n:OP(n,e):e,search:zP(r),hash:jP(s)}}function OP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DP(t,e){let n=MP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function VP(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ha(t):(s=$l({},t),mt(!s.pathname||!s.pathname.includes("?"),cf("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),cf("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),cf("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}h=v>=0?e[v]:"/"}let d=NP(s,h),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}const xs=t=>t.join("/").replace(/\/\/+/g,"/"),FP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xE=["post","put","patch","delete"];new Set(xE);const UP=["get",...xE];new Set(UP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}const Wm=q.createContext(null),HP=q.createContext(null),Qh=q.createContext(null),Yh=q.createContext(null),Vs=q.createContext({outlet:null,matches:[],isDataRoute:!1}),IE=q.createContext(null);function Xh(){return q.useContext(Yh)!=null}function SE(){return Xh()||mt(!1),q.useContext(Yh).location}function PE(t){q.useContext(Qh).static||q.useLayoutEffect(t)}function $m(){let{isDataRoute:t}=q.useContext(Vs);return t?rC():WP()}function WP(){Xh()||mt(!1);let t=q.useContext(Wm),{basename:e,future:n,navigator:r}=q.useContext(Qh),{matches:s}=q.useContext(Vs),{pathname:o}=SE(),l=JSON.stringify(DP(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return PE(()=>{h.current=!0}),q.useCallback(function(p,y){if(y===void 0&&(y={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let v=VP(p,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:xs([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,l,o,t])}function $P(){let{matches:t}=q.useContext(Vs),e=t[t.length-1];return e?e.params:{}}function qP(t,e){return GP(t,e)}function GP(t,e,n,r){Xh()||mt(!1);let{navigator:s}=q.useContext(Qh),{matches:o}=q.useContext(Vs),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=SE(),y;if(e){var v;let B=typeof e=="string"?ha(e):e;d==="/"||(v=B.pathname)!=null&&v.startsWith(d)||mt(!1),y=B}else y=p;let E=y.pathname||"/",k=E;if(d!=="/"){let B=d.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(B.length).join("/")}let F=yP(t,{pathname:k}),V=XP(F&&F.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:xs([d,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?d:xs([d,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,n,r);return e&&V?q.createElement(Yh.Provider,{value:{location:ql({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Ei.Pop}},V):V}function ZP(){let t=nC(),e=BP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,null)}const KP=q.createElement(ZP,null);class QP extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Vs.Provider,{value:this.props.routeContext},q.createElement(IE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YP(t){let{routeContext:e,match:n,children:r}=t,s=q.useContext(Wm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Vs.Provider,{value:e},r)}function XP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);y>=0||mt(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:E,errors:k}=n,F=v.route.loader&&E[v.route.id]===void 0&&(!k||k[v.route.id]===void 0);if(v.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let k,F=!1,V=null,B=null;n&&(k=h&&v.route.id?h[v.route.id]:void 0,V=v.route.errorElement||KP,d&&(p<0&&E===0?(iC("route-fallback"),F=!0,B=null):p===E&&(F=!0,B=v.route.hydrateFallbackElement||null)));let b=e.concat(l.slice(0,E+1)),P=()=>{let N;return k?N=V:F?N=B:v.route.Component?N=q.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=y,q.createElement(YP,{match:v,routeContext:{outlet:y,matches:b,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(QP,{location:n.location,revalidation:n.revalidation,component:V,error:k,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}var CE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CE||{}),AE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AE||{});function JP(t){let e=q.useContext(Wm);return e||mt(!1),e}function eC(t){let e=q.useContext(HP);return e||mt(!1),e}function tC(t){let e=q.useContext(Vs);return e||mt(!1),e}function kE(t){let e=tC(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function nC(){var t;let e=q.useContext(IE),n=eC(),r=kE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rC(){let{router:t}=JP(CE.UseNavigateStable),e=kE(AE.UseNavigateStable),n=q.useRef(!1);return PE(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ql({fromRouteId:e},o)))},[t,e])}const Ty={};function iC(t,e,n){Ty[t]||(Ty[t]=!0)}function sC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bc(t){mt(!1)}function oC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ei.Pop,navigator:o,static:l=!1,future:h}=t;Xh()&&mt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:ql({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof r=="string"&&(r=ha(r));let{pathname:y="/",search:v="",hash:E="",state:k=null,key:F="default"}=r,V=q.useMemo(()=>{let B=TE(y,d);return B==null?null:{location:{pathname:B,search:v,hash:E,state:k,key:F},navigationType:s}},[d,y,v,E,k,F,s]);return V==null?null:q.createElement(Qh.Provider,{value:p},q.createElement(Yh.Provider,{children:n,value:V}))}function aC(t){let{children:e,location:n}=t;return qP(wp(e),n)}new Promise(()=>{});function wp(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(r,s)=>{if(!q.isValidElement(r))return;let o=[...e,s];if(r.type===q.Fragment){n.push.apply(n,wp(r.props.children,o));return}r.type!==bc&&mt(!1),!r.props.index||!r.props.children||mt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=wp(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lC="6";try{window.__reactRouterVersion=lC}catch{}const uC="startTransition",xy=iI[uC];function cC(t){let{basename:e,children:n,future:r,window:s}=t,o=q.useRef();o.current==null&&(o.current=mP({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},y=q.useCallback(v=>{p&&xy?xy(()=>d(v)):d(v)},[d,p]);return q.useLayoutEffect(()=>l.listen(y),[l,y]),q.useEffect(()=>sC(r),[r]),q.createElement(oC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}var Iy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var Sy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sy||(Sy={}));const hC=()=>{};var Py={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,k=p&63;d||(k=64,l||(E=64)),r.push(n[y],n[v],n[E],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new fC;const E=o<<2|h>>4;if(r.push(E),p!==64){const k=h<<4&240|p>>2;if(r.push(k),v!==64){const F=p<<6&192|v;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pC=function(t){const e=RE(t);return LE.encodeByteArray(e,!0)},mh=function(t){return pC(t).replace(/\./g,"")},bE=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=()=>mC().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof Py>"u")return;const t=Py.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bE(t[1]);return e&&JSON.parse(e)},Jh=()=>{try{return hC()||gC()||_C()||yC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NE=t=>{var e,n;return(n=(e=Jh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vC=t=>{const e=NE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},OE=()=>{var t;return(t=Jh())==null?void 0:t.config},ME=t=>{var e;return(e=Jh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mh(JSON.stringify(n)),mh(JSON.stringify(l)),""].join(".")}const Tl={};function TC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tl))Tl[e]?t.emulator.push(e):t.prod.push(e);return t}function xC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cy=!1;function VE(t,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||Tl[t]===e||Tl[t]||Cy)return;Tl[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=TC().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,k){E.setAttribute("width","24"),E.setAttribute("id",k),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Cy=!0,l()},E}function y(E,k){E.setAttribute("id",k),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=xC(r),k=n("text"),F=document.getElementById(k)||document.createElement("span"),V=n("learnmore"),B=document.getElementById(V)||document.createElement("a"),b=n("preprendIcon"),P=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const N=E.element;h(N),y(B,V);const $=p();d(P,b),N.append(P,F,B,$),document.body.appendChild(N)}o?(F.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function SC(){var e;const t=(e=Jh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kC(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RC(){return!SC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="FirebaseError";class Kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NC,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?OC(o,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Kr(s,h,r)}}function OC(t,e){return t.replace(MC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MC=/\{\$([^}]+)}/g;function DC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(Ay(o)&&Ay(l)){if(!Rs(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ay(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VC(t,e){const n=new FC(t,e);return n.subscribe.bind(n)}class FC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hf),s.error===void 0&&(s.error=hf),s.complete===void 0&&(s.complete=hf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UC(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BC(t){return t===gs?void 0:t}function UC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const WC={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},$C=Ie.INFO,qC={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},GC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=$C,this._logHandler=GC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const ZC=(t,e)=>e.some(n=>t instanceof n);let ky,Ry;function KC(){return ky||(ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QC(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,Ep=new WeakMap,zE=new WeakMap,df=new WeakMap,Gm=new WeakMap;function YC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Li(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),Gm.set(e,t),e}function XC(t){if(Ep.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ep.set(t,e)}let Tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JC(t){Tp=t(Tp)}function eA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ff(this),e,...n);return zE.set(r,e.sort?e.sort():[e]),Li(r)}:QC().includes(t)?function(...e){return t.apply(ff(this),e),Li(FE.get(this))}:function(...e){return Li(t.apply(ff(this),e))}}function tA(t){return typeof t=="function"?eA(t):(t instanceof IDBTransaction&&XC(t),ZC(t,KC())?new Proxy(t,Tp):t)}function Li(t){if(t instanceof IDBRequest)return YC(t);if(df.has(t))return df.get(t);const e=tA(t);return e!==t&&(df.set(t,e),Gm.set(e,t)),e}const ff=t=>Gm.get(t);function nA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Li(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Li(l.result),d.oldVersion,d.newVersion,Li(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const rA=["get","getKey","getAll","getAllKeys","count"],iA=["put","add","delete","clear"],pf=new Map;function Ly(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pf.get(e))return pf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return pf.set(e,o),o}JC(t=>({...t,get:(e,n,r)=>Ly(e,n)||t.get(e,n,r),has:(e,n)=>!!Ly(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xp="@firebase/app",by="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new qm("@firebase/app"),aA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",cA="@firebase/app-check-compat",hA="@firebase/app-check",dA="@firebase/auth",fA="@firebase/auth-compat",pA="@firebase/database",mA="@firebase/data-connect",gA="@firebase/database-compat",_A="@firebase/functions",yA="@firebase/functions-compat",vA="@firebase/installations",wA="@firebase/installations-compat",EA="@firebase/messaging",TA="@firebase/messaging-compat",xA="@firebase/performance",IA="@firebase/performance-compat",SA="@firebase/remote-config",PA="@firebase/remote-config-compat",CA="@firebase/storage",AA="@firebase/storage-compat",kA="@firebase/firestore",RA="@firebase/ai",LA="@firebase/firestore-compat",bA="firebase",NA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="[DEFAULT]",OA={[xp]:"fire-core",[aA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[cA]:"fire-app-check-compat",[dA]:"fire-auth",[fA]:"fire-auth-compat",[pA]:"fire-rtdb",[mA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[_A]:"fire-fn",[yA]:"fire-fn-compat",[vA]:"fire-iid",[wA]:"fire-iid-compat",[EA]:"fire-fcm",[TA]:"fire-fcm-compat",[xA]:"fire-perf",[IA]:"fire-perf-compat",[SA]:"fire-rc",[PA]:"fire-rc-compat",[CA]:"fire-gcs",[AA]:"fire-gcs-compat",[kA]:"fire-fst",[LA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[bA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,MA=new Map,Sp=new Map;function Ny(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ea(t){const e=t.name;if(Sp.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,t);for(const n of gh.values())Ny(n,t);for(const n of MA.values())Ny(n,t);return!0}function Zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new lu("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=NA;function jE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ip,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw bi.create("bad-app-name",{appName:String(s)});if(n||(n=OE()),!n)throw bi.create("no-options");const o=gh.get(s);if(o){if(Rs(n,o.options)&&Rs(r,o.config))return o;throw bi.create("duplicate-app",{appName:s})}const l=new HC(s);for(const d of Sp.values())l.addComponent(d);const h=new VA(n,r,l);return gh.set(s,h),h}function BE(t=Ip){const e=gh.get(t);if(!e&&t===Ip&&OE())return jE();if(!e)throw bi.create("no-app",{appName:t});return e}function Ni(t,e,n){let r=OA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(l.join(" "));return}ea(new Ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="firebase-heartbeat-database",zA=1,Gl="firebase-heartbeat-store";let mf=null;function UE(){return mf||(mf=nA(FA,zA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw bi.create("idb-open",{originalErrorMessage:t.message})})),mf}async function jA(t){try{const n=(await UE()).transaction(Gl),r=await n.objectStore(Gl).get(HE(t));return await n.done,r}catch(e){if(e instanceof Kr)Wr.warn(e.message);else{const n=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function Oy(t,e){try{const r=(await UE()).transaction(Gl,"readwrite");await r.objectStore(Gl).put(e,HE(t)),await r.done}catch(n){if(n instanceof Kr)Wr.warn(n.message);else{const r=bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(r.message)}}}function HE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=1024,UA=30;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $A(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=My();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>UA){const l=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=My(),{heartbeatsToSend:r,unsentEntries:s}=WA(this._heartbeatsCache.heartbeats),o=mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Wr.warn(n),""}}}function My(){return new Date().toISOString().substring(0,10)}function WA(t,e=BA){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Dy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?bC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return mh(JSON.stringify({version:2,heartbeats:t})).length}function qA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){ea(new Ls("platform-logger",e=>new sA(e),"PRIVATE")),ea(new Ls("heartbeat",e=>new HA(e),"PRIVATE")),Ni(xp,by,t),Ni(xp,by,"esm2020"),Ni("fire-js","")}GA("");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,WE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function I(){}I.prototype=S.prototype,C.F=S.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(A,O,D){for(var R=Array(arguments.length-2),be=2;be<arguments.length;be++)R[be-2]=arguments[be];return S.prototype[O].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,I){I||(I=0);const A=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)A[O]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(O=0;O<16;++O)A[O]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=C.g[0],I=C.g[1],O=C.g[2];let D=C.g[3],R;R=S+(D^I&(O^D))+A[0]+3614090360&4294967295,S=I+(R<<7&4294967295|R>>>25),R=D+(O^S&(I^O))+A[1]+3905402710&4294967295,D=S+(R<<12&4294967295|R>>>20),R=O+(I^D&(S^I))+A[2]+606105819&4294967295,O=D+(R<<17&4294967295|R>>>15),R=I+(S^O&(D^S))+A[3]+3250441966&4294967295,I=O+(R<<22&4294967295|R>>>10),R=S+(D^I&(O^D))+A[4]+4118548399&4294967295,S=I+(R<<7&4294967295|R>>>25),R=D+(O^S&(I^O))+A[5]+1200080426&4294967295,D=S+(R<<12&4294967295|R>>>20),R=O+(I^D&(S^I))+A[6]+2821735955&4294967295,O=D+(R<<17&4294967295|R>>>15),R=I+(S^O&(D^S))+A[7]+4249261313&4294967295,I=O+(R<<22&4294967295|R>>>10),R=S+(D^I&(O^D))+A[8]+1770035416&4294967295,S=I+(R<<7&4294967295|R>>>25),R=D+(O^S&(I^O))+A[9]+2336552879&4294967295,D=S+(R<<12&4294967295|R>>>20),R=O+(I^D&(S^I))+A[10]+4294925233&4294967295,O=D+(R<<17&4294967295|R>>>15),R=I+(S^O&(D^S))+A[11]+2304563134&4294967295,I=O+(R<<22&4294967295|R>>>10),R=S+(D^I&(O^D))+A[12]+1804603682&4294967295,S=I+(R<<7&4294967295|R>>>25),R=D+(O^S&(I^O))+A[13]+4254626195&4294967295,D=S+(R<<12&4294967295|R>>>20),R=O+(I^D&(S^I))+A[14]+2792965006&4294967295,O=D+(R<<17&4294967295|R>>>15),R=I+(S^O&(D^S))+A[15]+1236535329&4294967295,I=O+(R<<22&4294967295|R>>>10),R=S+(O^D&(I^O))+A[1]+4129170786&4294967295,S=I+(R<<5&4294967295|R>>>27),R=D+(I^O&(S^I))+A[6]+3225465664&4294967295,D=S+(R<<9&4294967295|R>>>23),R=O+(S^I&(D^S))+A[11]+643717713&4294967295,O=D+(R<<14&4294967295|R>>>18),R=I+(D^S&(O^D))+A[0]+3921069994&4294967295,I=O+(R<<20&4294967295|R>>>12),R=S+(O^D&(I^O))+A[5]+3593408605&4294967295,S=I+(R<<5&4294967295|R>>>27),R=D+(I^O&(S^I))+A[10]+38016083&4294967295,D=S+(R<<9&4294967295|R>>>23),R=O+(S^I&(D^S))+A[15]+3634488961&4294967295,O=D+(R<<14&4294967295|R>>>18),R=I+(D^S&(O^D))+A[4]+3889429448&4294967295,I=O+(R<<20&4294967295|R>>>12),R=S+(O^D&(I^O))+A[9]+568446438&4294967295,S=I+(R<<5&4294967295|R>>>27),R=D+(I^O&(S^I))+A[14]+3275163606&4294967295,D=S+(R<<9&4294967295|R>>>23),R=O+(S^I&(D^S))+A[3]+4107603335&4294967295,O=D+(R<<14&4294967295|R>>>18),R=I+(D^S&(O^D))+A[8]+1163531501&4294967295,I=O+(R<<20&4294967295|R>>>12),R=S+(O^D&(I^O))+A[13]+2850285829&4294967295,S=I+(R<<5&4294967295|R>>>27),R=D+(I^O&(S^I))+A[2]+4243563512&4294967295,D=S+(R<<9&4294967295|R>>>23),R=O+(S^I&(D^S))+A[7]+1735328473&4294967295,O=D+(R<<14&4294967295|R>>>18),R=I+(D^S&(O^D))+A[12]+2368359562&4294967295,I=O+(R<<20&4294967295|R>>>12),R=S+(I^O^D)+A[5]+4294588738&4294967295,S=I+(R<<4&4294967295|R>>>28),R=D+(S^I^O)+A[8]+2272392833&4294967295,D=S+(R<<11&4294967295|R>>>21),R=O+(D^S^I)+A[11]+1839030562&4294967295,O=D+(R<<16&4294967295|R>>>16),R=I+(O^D^S)+A[14]+4259657740&4294967295,I=O+(R<<23&4294967295|R>>>9),R=S+(I^O^D)+A[1]+2763975236&4294967295,S=I+(R<<4&4294967295|R>>>28),R=D+(S^I^O)+A[4]+1272893353&4294967295,D=S+(R<<11&4294967295|R>>>21),R=O+(D^S^I)+A[7]+4139469664&4294967295,O=D+(R<<16&4294967295|R>>>16),R=I+(O^D^S)+A[10]+3200236656&4294967295,I=O+(R<<23&4294967295|R>>>9),R=S+(I^O^D)+A[13]+681279174&4294967295,S=I+(R<<4&4294967295|R>>>28),R=D+(S^I^O)+A[0]+3936430074&4294967295,D=S+(R<<11&4294967295|R>>>21),R=O+(D^S^I)+A[3]+3572445317&4294967295,O=D+(R<<16&4294967295|R>>>16),R=I+(O^D^S)+A[6]+76029189&4294967295,I=O+(R<<23&4294967295|R>>>9),R=S+(I^O^D)+A[9]+3654602809&4294967295,S=I+(R<<4&4294967295|R>>>28),R=D+(S^I^O)+A[12]+3873151461&4294967295,D=S+(R<<11&4294967295|R>>>21),R=O+(D^S^I)+A[15]+530742520&4294967295,O=D+(R<<16&4294967295|R>>>16),R=I+(O^D^S)+A[2]+3299628645&4294967295,I=O+(R<<23&4294967295|R>>>9),R=S+(O^(I|~D))+A[0]+4096336452&4294967295,S=I+(R<<6&4294967295|R>>>26),R=D+(I^(S|~O))+A[7]+1126891415&4294967295,D=S+(R<<10&4294967295|R>>>22),R=O+(S^(D|~I))+A[14]+2878612391&4294967295,O=D+(R<<15&4294967295|R>>>17),R=I+(D^(O|~S))+A[5]+4237533241&4294967295,I=O+(R<<21&4294967295|R>>>11),R=S+(O^(I|~D))+A[12]+1700485571&4294967295,S=I+(R<<6&4294967295|R>>>26),R=D+(I^(S|~O))+A[3]+2399980690&4294967295,D=S+(R<<10&4294967295|R>>>22),R=O+(S^(D|~I))+A[10]+4293915773&4294967295,O=D+(R<<15&4294967295|R>>>17),R=I+(D^(O|~S))+A[1]+2240044497&4294967295,I=O+(R<<21&4294967295|R>>>11),R=S+(O^(I|~D))+A[8]+1873313359&4294967295,S=I+(R<<6&4294967295|R>>>26),R=D+(I^(S|~O))+A[15]+4264355552&4294967295,D=S+(R<<10&4294967295|R>>>22),R=O+(S^(D|~I))+A[6]+2734768916&4294967295,O=D+(R<<15&4294967295|R>>>17),R=I+(D^(O|~S))+A[13]+1309151649&4294967295,I=O+(R<<21&4294967295|R>>>11),R=S+(O^(I|~D))+A[4]+4149444226&4294967295,S=I+(R<<6&4294967295|R>>>26),R=D+(I^(S|~O))+A[11]+3174756917&4294967295,D=S+(R<<10&4294967295|R>>>22),R=O+(S^(D|~I))+A[2]+718787259&4294967295,O=D+(R<<15&4294967295|R>>>17),R=I+(D^(O|~S))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const I=S-this.blockSize,A=this.C;let O=this.h,D=0;for(;D<S;){if(O==0)for(;D<=I;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<S;)if(A[O++]=C.charCodeAt(D++),O==this.blockSize){s(this,A),O=0;break}}else for(;D<S;)if(A[O++]=C[D++],O==this.blockSize){s(this,A),O=0;break}}this.h=O,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)C[S++]=this.g[I]>>>A&255;return C};function o(C,S){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=S(C)}function l(C,S){this.h=S;const I=[];let A=!0;for(let O=C.length-1;O>=0;O--){const D=C[O]|0;A&&D==S||(I[O]=D,A=!1)}this.g=I}var h={};function d(C){return-128<=C&&C<128?o(C,function(S){return new l([S|0],S<0?-1:0)}):new l([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return B(p(-C));const S=[];let I=1;for(let A=0;C>=I;A++)S[A]=C/I|0,I*=4294967296;return new l(S,0)}function y(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return B(y(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(S,8));let A=v;for(let D=0;D<C.length;D+=8){var O=Math.min(8,C.length-D);const R=parseInt(C.substring(D,D+O),S);O<8?(O=p(Math.pow(S,O)),A=A.j(O).add(p(R))):(A=A.j(I),A=A.add(p(R)))}return A}var v=d(0),E=d(1),k=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-B(this).m();let C=0,S=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);C+=(A>=0?A:4294967296+A)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(F(this))return"0";if(V(this))return"-"+B(this).toString(C);const S=p(Math.pow(C,6));var I=this;let A="";for(;;){const O=$(I,S).g;I=b(I,O.j(S));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=O,F(I))return D+A;for(;D.length<6;)D="0"+D;A=D+A}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function F(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function V(C){return C.h==-1}t.l=function(C){return C=b(this,C),V(C)?-1:F(C)?0:1};function B(C){const S=C.g.length,I=[];for(let A=0;A<S;A++)I[A]=~C.g[A];return new l(I,~C.h).add(E)}t.abs=function(){return V(this)?B(this):this},t.add=function(C){const S=Math.max(this.g.length,C.g.length),I=[];let A=0;for(let O=0;O<=S;O++){let D=A+(this.i(O)&65535)+(C.i(O)&65535),R=(D>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);A=R>>>16,D&=65535,R&=65535,I[O]=R<<16|D}return new l(I,I[I.length-1]&-2147483648?-1:0)};function b(C,S){return C.add(B(S))}t.j=function(C){if(F(this)||F(C))return v;if(V(this))return V(C)?B(this).j(B(C)):B(B(this).j(C));if(V(C))return B(this.j(B(C)));if(this.l(k)<0&&C.l(k)<0)return p(this.m()*C.m());const S=this.g.length+C.g.length,I=[];for(var A=0;A<2*S;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let O=0;O<C.g.length;O++){const D=this.i(A)>>>16,R=this.i(A)&65535,be=C.i(O)>>>16,_t=C.i(O)&65535;I[2*A+2*O]+=R*_t,P(I,2*A+2*O),I[2*A+2*O+1]+=D*_t,P(I,2*A+2*O+1),I[2*A+2*O+1]+=R*be,P(I,2*A+2*O+1),I[2*A+2*O+2]+=D*be,P(I,2*A+2*O+2)}for(C=0;C<S;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=S;C<2*S;C++)I[C]=0;return new l(I,0)};function P(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function N(C,S){this.g=C,this.h=S}function $(C,S){if(F(S))throw Error("division by zero");if(F(C))return new N(v,v);if(V(C))return S=$(B(C),S),new N(B(S.g),B(S.h));if(V(S))return S=$(C,B(S)),new N(B(S.g),S.h);if(C.g.length>30){if(V(C)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var I=E,A=S;A.l(C)<=0;)I=X(I),A=X(A);var O=J(I,1),D=J(A,1);for(A=J(A,2),I=J(I,2);!F(A);){var R=D.add(A);R.l(C)<=0&&(O=O.add(I),D=R),A=J(A,1),I=J(I,1)}return S=b(C,O.j(S)),new N(O,S)}for(O=v;C.l(S)>=0;){for(I=Math.max(1,Math.floor(C.m()/S.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),D=p(I),R=D.j(S);V(R)||R.l(C)>0;)I-=A,D=p(I),R=D.j(S);F(D)&&(D=E),O=O.add(D),C=b(C,R)}return new N(O,C)}t.B=function(C){return $(this,C).h},t.and=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let A=0;A<S;A++)I[A]=this.i(A)&C.i(A);return new l(I,this.h&C.h)},t.or=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let A=0;A<S;A++)I[A]=this.i(A)|C.i(A);return new l(I,this.h|C.h)},t.xor=function(C){const S=Math.max(this.g.length,C.g.length),I=[];for(let A=0;A<S;A++)I[A]=this.i(A)^C.i(A);return new l(I,this.h^C.h)};function X(C){const S=C.g.length+1,I=[];for(let A=0;A<S;A++)I[A]=C.i(A)<<1|C.i(A-1)>>>31;return new l(I,C.h)}function J(C,S){const I=S>>5;S%=32;const A=C.g.length-I,O=[];for(let D=0;D<A;D++)O[D]=S>0?C.i(D+I)>>>S|C.i(D+I+1)<<32-S:C.i(D+I);return new l(O,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Oi=l}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,ul,qE,Nc,Pp,GE,ZE,KE;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pc=="object"&&pc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var _=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var z=u[x];if(!(z in _))break e;_=_[z]}u=u[u.length-1],x=_[u],m=m(x),m!=x&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var _=[],x;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&_.push([x,m[x]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,_){return u.call.apply(u.bind,arguments)}function p(u,m,_){return p=d,p.apply(null,arguments)}function y(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function v(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(x,z,U){for(var ne=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ne[_e-2]=arguments[_e];return m.prototype[z].apply(x,ne)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const m=u.length;if(m>0){const _=Array(m);for(let x=0;x<m;x++)_[x]=u[x];return _}return[]}function F(u,m){for(let x=1;x<arguments.length;x++){const z=arguments[x];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const U=z.length||0;u.length=_+U;for(let ne=0;ne<U;ne++)u[_+ne]=z[ne]}else u.push(z)}}class V{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function B(u){l.setTimeout(()=>{throw u},0)}function b(){var u=C;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class P{constructor(){this.h=this.g=null}add(m,_){const x=N.get();x.set(m,_),this.h?this.h.next=x:this.g=x,this.h=x}}var N=new V(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let X,J=!1,C=new P,S=()=>{const u=Promise.resolve(void 0);X=()=>{u.then(I)}};function I(){for(var u;u=b();){try{u.h.call(u.g)}catch(_){B(_)}var m=N;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,m),l.removeEventListener("test",_,m)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function be(u,m){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(be,O),be.prototype.init=function(u,m){const _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),et=0;function an(u,m,_,x,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!x,this.ha=z,this.key=++et,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function he(u,m,_){for(const x in u)m.call(_,u[x],x,u)}function ee(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function de(u){const m={};for(const _ in u)m[_]=u[_];return m}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(u,m){let _,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(_ in x)u[_]=x[_];for(let U=0;U<we.length;U++)_=we[U],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function H(u){this.src=u,this.g={},this.h=0}H.prototype.add=function(u,m,_,x,z){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const ne=ie(u,m,x,z);return ne>-1?(m=u[ne],_||(m.fa=!1)):(m=new an(m,this.src,U,!!x,z),m.fa=_,u.push(m)),m};function te(u,m){const _=m.type;if(_ in u.g){var x=u.g[_],z=Array.prototype.indexOf.call(x,m,void 0),U;(U=z>=0)&&Array.prototype.splice.call(x,z,1),U&&(Z(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ie(u,m,_,x){for(let z=0;z<u.length;++z){const U=u[z];if(!U.da&&U.listener==m&&U.capture==!!_&&U.ha==x)return z}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),tt={};function vn(u,m,_,x,z){if(Array.isArray(m)){for(let U=0;U<m.length;U++)vn(u,m[U],_,x,z);return null}return _=es(_),u&&u[_t]?u.J(m,_,h(x)?!!x.capture:!1,z):ot(u,m,_,!1,x,z)}function ot(u,m,_,x,z,U){if(!m)throw Error("Invalid event type");const ne=h(z)?!!z.capture:!!z;let _e=Us(u);if(_e||(u[Fe]=_e=new H(u)),_=_e.add(m,_,x,ne,U),_.proxy)return _;if(x=ln(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)D||(z=ne),z===void 0&&(z=!1),u.addEventListener(m.toString(),x,z);else if(u.attachEvent)u.attachEvent(Yi(m.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ln(){function u(_){return m.call(u.src,u.listener,_)}const m=Xi;return u}function wn(u,m,_,x,z){if(Array.isArray(m))for(var U=0;U<m.length;U++)wn(u,m[U],_,x,z);else x=h(x)?!!x.capture:!!x,_=es(_),u&&u[_t]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],_=ie(m,_,x,z),_>-1&&(Z(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=Us(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ie(m,_,x,z)),(_=u>-1?m[u]:null)&&un(_))}function un(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[_t])te(m.i,u);else{var _=u.type,x=u.proxy;m.removeEventListener?m.removeEventListener(_,x,u.capture):m.detachEvent?m.detachEvent(Yi(_),x):m.addListener&&m.removeListener&&m.removeListener(x),(_=Us(m))?(te(_,u),_.h==0&&(_.src=null,m[Fe]=null)):Z(u)}}}function Yi(u){return u in tt?tt[u]:tt[u]="on"+u}function Xi(u,m){if(u.da)u=!0;else{m=new be(m,this);const _=u.listener,x=u.ha||u.src;u.fa&&un(u),u=_.call(x,m)}return u}function Us(u){return u=u[Fe],u instanceof H?u:null}var Ji="__closure_events_fn_"+(Math.random()*1e9>>>0);function es(u){return typeof u=="function"?u:(u[Ji]||(u[Ji]=function(m){return u.handleEvent(m)}),u[Ji])}function yt(){A.call(this),this.i=new H(this),this.M=this,this.G=null}v(yt,A),yt.prototype[_t]=!0,yt.prototype.removeEventListener=function(u,m,_,x){wn(this,u,m,_,x)};function vt(u,m){var _,x=u.G;if(x)for(_=[];x;x=x.G)_.push(x);if(u=u.M,x=m.type||m,typeof m=="string")m=new O(m,u);else if(m instanceof O)m.target=m.target||u;else{var z=m;m=new O(x,u),$e(m,z)}z=!0;let U,ne;if(_)for(ne=_.length-1;ne>=0;ne--)U=m.g=_[ne],z=Qr(U,x,!0,m)&&z;if(U=m.g=u,z=Qr(U,x,!0,m)&&z,z=Qr(U,x,!1,m)&&z,_)for(ne=0;ne<_.length;ne++)U=m.g=_[ne],z=Qr(U,x,!1,m)&&z}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let x=0;x<_.length;x++)Z(_[x]);delete u.g[m],u.h--}}this.G=null},yt.prototype.J=function(u,m,_,x){return this.i.add(String(u),m,!1,_,x)},yt.prototype.K=function(u,m,_,x){return this.i.add(String(u),m,!0,_,x)};function Qr(u,m,_,x){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let U=0;U<m.length;++U){const ne=m[U];if(ne&&!ne.da&&ne.capture==_){const _e=ne.listener,Le=ne.ha||ne.src;ne.fa&&te(u.i,ne),z=_e.call(Le,x)!==!1&&z}}return z&&!x.defaultPrevented}function vu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function xa(u){u.g=vu(()=>{u.g=null,u.i&&(u.i=!1,xa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Id extends A{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(u){A.call(this),this.h=u,this.g={}}v(ts,A);var Hs=[];function Ia(u){he(u.g,function(m,_){this.g.hasOwnProperty(_)&&un(m)},u),u.g={}}ts.prototype.N=function(){ts.Z.N.call(this),Ia(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=l.JSON.stringify,Sd=l.JSON.parse,wu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Sa(){}function Eu(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ns(){O.call(this,"d")}v(ns,O);function $s(){O.call(this,"c")}v($s,O);var wr={},Xr=null;function qs(){return Xr=Xr||new yt}wr.Ia="serverreachability";function Tu(u){O.call(this,wr.Ia,u)}v(Tu,O);function Jr(u){const m=qs();vt(m,new Tu(m))}wr.STAT_EVENT="statevent";function Pa(u,m){O.call(this,wr.STAT_EVENT,u),this.stat=m}v(Pa,O);function wt(u){const m=qs();vt(m,new Pa(m,u))}wr.Ja="timingevent";function xu(u,m){O.call(this,wr.Ja,u),this.size=m}v(xu,O);function rs(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function Pd(u,m,_,x,z,U){u.info(function(){if(u.g)if(U){var ne="",_e=U.split("&");for(let Oe=0;Oe<_e.length;Oe++){var Le=_e[Oe].split("=");if(Le.length>1){const nt=Le[0];Le=Le[1];const Sn=nt.split("_");ne=Sn.length>=2&&Sn[1]=="type"?ne+(nt+"="+Le+"&"):ne+(nt+"=redacted&")}}}else ne=null;else ne=U;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+m+`
`+_+`
`+ne})}function Cd(u,m,_,x,z,U,ne){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+m+`
`+_+`
`+U+" "+ne})}function ei(u,m,_,x){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ad(u,_)+(x?" "+x:"")})}function Ca(u,m){u.info(function(){return"TIMEOUT: "+m})}is.prototype.info=function(){};function Ad(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var _=U[u];if(!(_.length<2)){var x=_[1];if(Array.isArray(x)&&!(x.length<1)){var z=x[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ne=1;ne<x.length;ne++)x[ne]=""}}}}return Ws(U)}catch{return m}}var Gs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Iu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Su;function Kt(){}v(Kt,Sa),Kt.prototype.g=function(){return new XMLHttpRequest},Su=new Kt;function ue(u){return encodeURIComponent(String(u))}function Pu(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Mn(u,m,_,x){this.j=u,this.i=m,this.l=_,this.S=x||1,this.V=new ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var ka={},ss={};function Zs(u,m,_){u.M=1,u.A=ze(Ut(m)),u.u=_,u.R=!0,Er(u,null)}function Er(u,m){u.F=Date.now(),Ks(u),u.B=Ut(u.A);var _=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),eo(_.i,"t",x),u.C=0,_=u.j.L,u.h=new Aa,u.g=Ha(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Id(p(u.Y,u,u.g),u.P)),m=u.V,_=u.g,x=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Hs[0]=z.toString()),z=Hs);for(let U=0;U<z.length;U++){const ne=vn(_,z[U],x||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Jr(),Pd(u.i,u.v,u.B,u.l,u.S,u.u)}Mn.prototype.ba=function(u){u=u.target;const m=this.O;m&&tr(u)==3?m.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const _e=tr(this.g),Le=this.g.ya(),Oe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Da(this.g)))){this.K||_e!=4||Le==7||(Le==8||Oe<=0?Jr(3):Jr(2)),Qs(this);var m=this.g.ca();this.X=m;var _=Cu(this);if(this.o=m==200,Cd(this.i,this.v,this.B,this.l,this.S,_e,m),this.o){if(this.U&&!this.L){t:{if(this.g){var x,z=this.g;if((x=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(x)){var U=x;break t}}U=null}if(u=U)ei(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ra(this,u);else{this.o=!1,this.m=3,wt(12),En(this),os(this);break e}}if(this.R){u=!0;let nt;for(;!this.K&&this.C<_.length;)if(nt=kd(this,_),nt==ss){_e==4&&(this.m=4,wt(14),u=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==ka){this.m=4,wt(15),ei(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ei(this.i,this.l,nt,null),Ra(this,nt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||_.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)ei(this.i,this.l,_,"[Invalid Chunked Response]"),En(this),os(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ba(ne),ne.P=!0,wt(11))}}else ei(this.i,this.l,_,null),Ra(this,_);_e==4&&En(this),this.o&&!this.K&&(_e==4?hn(this.j,this):(this.o=!1,Ks(this)))}else Va(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),En(this),os(this)}}}catch{}finally{}};function Cu(u){if(!Au(u))return u.g.la();const m=Da(u.g);if(m==="")return"";let _="";const x=m.length,z=tr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return En(u),os(u),"";u.h.i=new l.TextDecoder}for(let U=0;U<x;U++)u.h.h=!0,_+=u.h.i.decode(m[U],{stream:!(z&&U==x-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Au(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kd(u,m){var _=u.C,x=m.indexOf(`
`,_);return x==-1?ss:(_=Number(m.substring(_,x)),isNaN(_)?ka:(x+=1,x+_>m.length?ss:(m=m.slice(x,x+_),u.C=x+_,m)))}Mn.prototype.cancel=function(){this.K=!0,En(this)};function Ks(u){u.T=Date.now()+u.H,ku(u,u.H)}function ku(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=rs(p(u.aa,u),m)}function Qs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Jr(),wt(17)),En(this),this.m=2,os(this)):ku(this,this.T-u)};function os(u){u.j.I==0||u.K||hn(u.j,u)}function En(u){Qs(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ia(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ra(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||as(_.h,u))){if(!u.L&&as(_.h,u)&&_.I==3){try{var x=_.Ba.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)so(_),ro(_);else break e;ja(_),wt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=rs(p(_.Va,_),6e3));bu(_.h)<=1&&_.ta&&(_.ta=void 0)}else rr(_,11)}else if((u.L||_.g==u)&&so(_),!R(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Oe=z[m];const nt=Oe[0];if(!(nt<=_.K))if(_.K=nt,Oe=Oe[1],_.I==2)if(Oe[0]=="c"){_.M=Oe[1],_.ba=Oe[2];const Sn=Oe[3];Sn!=null&&(_.ka=Sn,_.j.info("VER="+_.ka));const Fn=Oe[4];Fn!=null&&(_.za=Fn,_.j.info("SVER="+_.za));const Pn=Oe[5];Pn!=null&&typeof Pn=="number"&&Pn>0&&(x=1.5*Pn,_.O=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const ir=u.g;if(ir){const lo=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var U=x.h;U.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Tr(U,U.h),U.h=null))}if(x.G){const uo=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(x.wa=uo,ae(x.J,x.G,uo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),x=_;var ne=u;if(x.na=Ua(x,x.L?x.ba:null,x.W),ne.L){La(x.h,ne);var _e=ne,Le=x.O;Le&&(_e.H=Le),_e.D&&(Qs(_e),Ks(_e)),x.g=ne}else za(x);_.i.length>0&&nr(_)}else Oe[0]!="stop"&&Oe[0]!="close"||rr(_,7);else _.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?rr(_,7):Ee(_):Oe[0]!="noop"&&_.l&&_.l.qa(Oe),_.A=0)}}Jr(4)}catch{}}var Rd=class{constructor(u,m){this.g=u,this.map=m}};function Ru(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bu(u){return u.h?1:u.g?u.g.size:0}function as(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Tr(u,m){u.g?u.g.add(m):u.h=m}function La(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ru.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ba(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return k(u.i)}var ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ce(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const x=u[_].indexOf("=");let z,U=null;x>=0?(z=u[_].substring(0,x),U=u[_].substring(x+1)):z=u[_],m(z,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Re(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Re?(this.l=u.l,Tn(this,u.j),this.o=u.o,this.g=u.g,xn(this,u.u),this.h=u.h,ls(this,us(u.i)),this.m=u.m):u&&(m=String(u).match(ti))?(this.l=!1,Tn(this,m[1]||"",!0),this.o=xr(m[2]||""),this.g=xr(m[3]||"",!0),xn(this,m[4]),this.h=xr(m[5]||"",!0),ls(this,m[6]||"",!0),this.m=xr(m[7]||"")):(this.l=!1,this.i=new Dn(null,this.l))}Re.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Xn(m,Nu,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Xn(m,Nu,!0),"@"),u.push(ue(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Xn(_,_.charAt(0)=="/"?Ir:Ys,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Xn(_,Sr)),u.join("")},Re.prototype.resolve=function(u){const m=Ut(this);let _=!!u.j;_?Tn(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var x=u.h;if(_)xn(m,u.u);else if(_=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var z=m.h.lastIndexOf("/");z!=-1&&(x=m.h.slice(0,z+1)+x)}if(z=x,z==".."||z==".")x="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){x=z.lastIndexOf("/",0)==0,z=z.split("/");const U=[];for(let ne=0;ne<z.length;){const _e=z[ne++];_e=="."?x&&ne==z.length&&U.push(""):_e==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),x&&ne==z.length&&U.push("")):(U.push(_e),x=!0)}x=U.join("/")}else x=z}return _?m.h=x:_=u.i.toString()!=="",_?ls(m,us(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Ut(u){return new Re(u)}function Tn(u,m,_){u.j=_?xr(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function xn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ls(u,m,_){m instanceof Dn?(u.i=m,Na(u.i,u.l)):(_||(m=Xn(m,Xe)),u.i=new Dn(m,u.l))}function ae(u,m,_){u.i.set(m,_)}function ze(u){return ae(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xr(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xn(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Qt),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Nu=/[#\/\?@]/g,Ys=/[#\?:]/g,Ir=/[#\?]/g,Xe=/[#\?@]/g,Sr=/#/g;function Dn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function cn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ce(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=Dn.prototype,t.add=function(u,m){cn(this),this.i=null,u=Jn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Xs(u,m){cn(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ni(u,m){return cn(u),m=Jn(u,m),u.g.has(m)}t.forEach=function(u,m){cn(this),this.g.forEach(function(_,x){_.forEach(function(z){u.call(m,z,x,this)},this)},this)};function Js(u,m){cn(u);let _=[];if(typeof m=="string")ni(u,m)&&(_=_.concat(u.g.get(Jn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}t.set=function(u,m){return cn(this),this.i=null,u=Jn(this,u),ni(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Js(this,u),u.length>0?String(u[0]):m):m};function eo(u,m,_){Xs(u,m),_.length>0&&(u.i=null,u.g.set(Jn(u,m),k(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let x=0;x<m.length;x++){var _=m[x];const z=ue(_);_=Js(this,_);for(let U=0;U<_.length;U++){let ne=z;_[U]!==""&&(ne+="="+ue(_[U])),u.push(ne)}}return this.i=u.join("&")};function us(u){const m=new Dn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Na(u,m){m&&!u.j&&(cn(u),u.i=null,u.g.forEach(function(_,x){const z=x.toLowerCase();x!=z&&(Xs(this,x),eo(this,z,_))},u)),u.j=m}function to(u,m){const _=new is;if(l.Image){const x=new Image;x.onload=y(In,_,"TestLoadImage: loaded",!0,m,x),x.onerror=y(In,_,"TestLoadImage: error",!1,m,x),x.onabort=y(In,_,"TestLoadImage: abort",!1,m,x),x.ontimeout=y(In,_,"TestLoadImage: timeout",!1,m,x),l.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else m(!1)}function Ou(u,m){const _=new is,x=new AbortController,z=setTimeout(()=>{x.abort(),In(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:x.signal}).then(U=>{clearTimeout(z),U.ok?In(_,"TestPingServer: ok",!0,m):In(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),In(_,"TestPingServer: error",!1,m)})}function In(u,m,_,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(_)}catch{}}function Ld(){this.g=new wu}function ge(u){this.i=u.Sb||null,this.h=u.ab||!1}v(ge,Sa),ge.prototype.g=function(){return new Ht(this.i,this.h)};function Ht(u,m){yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ht,yt),t=Ht.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pr(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;De(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function De(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ri(this):Pr(this),this.readyState==3&&De(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ri(this))},t.Na=function(u){this.g&&(this.response=u,ri(this))},t.ga=function(){this.g&&ri(this)};function ri(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pr(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ht.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function no(u){let m="";return he(u,function(_,x){m+=x,m+=":",m+=_,m+=`\r
`}),m}function cs(u,m,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=no(_),typeof u=="string"?_!=null&&ue(_):ae(u,m,_))}function Ne(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ne,yt);var Oa=/^https?$/i,hs=["POST","PUT"];t=Ne.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Su.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){at(this,U);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)_.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const U of x.keys())_.set(U,x.get(U));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(hs,m,void 0)>=0)||x||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ne]of _)this.g.setRequestHeader(U,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){at(this,U)}};function at(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,er(u),ds(u)}function er(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),ds(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ma(this):this.Xa())},t.Xa=function(){Ma(this)};function Ma(u){if(u.h&&typeof o<"u"){if(u.v&&tr(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),tr(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var x;if(x=U===0){let ne=String(u.D).match(ti)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),x=!Oa.test(ne?ne.toLowerCase():"")}_=x}if(_)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var z=tr(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",er(u)}}finally{ds(u)}}}}function ds(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||vt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return tr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Sd(m)}};function Da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Va(u){const m={};u=(u.g&&tr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(R(u[x]))continue;var _=Pu(u[x]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const U=m[z]||[];m[z]=U,U.push(_)}ee(m,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Fa(u){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,u),this.Za=fs("retryDelaySeedMs",1e4,u),this.Ta=fs("forwardChannelMaxRetries",2,u),this.va=fs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ru(u&&u.concurrentRequestLimit),this.Ba=new Ld,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fa.prototype,t.ka=8,t.I=1,t.connect=function(u,m,_,x){wt(0),this.W=u,this.H=m||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.J=Ua(this,null,this.W),nr(this)};function Ee(u){if(Yt(u),u.I==3){var m=u.V++,_=Ut(u.J);if(ae(_,"SID",u.M),ae(_,"RID",m),ae(_,"TYPE","terminate"),Cr(u,_),m=new Mn(u,u.j,m),m.M=2,m.A=ze(Ut(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=m.A,_=!0),_||(m.g=Ha(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ks(m)}Vn(u)}function ro(u){u.g&&(Ba(u),u.g.cancel(),u.g=null)}function Yt(u){ro(u),u.v&&(l.clearTimeout(u.v),u.v=null),so(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function nr(u){if(!Lu(u.h)&&!u.m){u.m=!0;var m=u.Ea;X||S(),J||(X(),J=!0),C.add(m,u),u.D=0}}function Mu(u,m){return bu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=rs(p(u.Ea,u,m),Fu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Mn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=de(U),$e(U,this.U)):U=this.U),this.u!==null||this.R||(z.J=U,U=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Vu(this,z,m),_=Ut(this.J),ae(_,"RID",u),ae(_,"CVER",22),this.G&&ae(_,"X-HTTP-Session-Id",this.G),Cr(this,_),U&&(this.R?m="headers="+ue(no(U))+"&"+m:this.u&&cs(_,this.u,U)),Tr(this.h,z),this.Ra&&ae(_,"TYPE","init"),this.S?(ae(_,"$req",m),ae(_,"SID","null"),z.U=!0,Zs(z,_,null)):Zs(z,_,m),this.I=2}}else this.I==3&&(u?Du(this,u):this.i.length==0||Lu(this.h)||Du(this))};function Du(u,m){var _;m?_=m.l:_=u.V++;const x=Ut(u.J);ae(x,"SID",u.M),ae(x,"RID",_),ae(x,"AID",u.K),Cr(u,x),u.u&&u.o&&cs(x,u.u,u.o),_=new Mn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Vu(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Tr(u.h,_),Zs(_,x,m)}function Cr(u,m){u.H&&he(u.H,function(_,x){ae(m,x,_)}),u.l&&he({},function(_,x){ae(m,x,_)})}function Vu(u,m,_){_=Math.min(u.i.length,_);const x=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let _e=-1;for(;;){const Le=["count="+_];_e==-1?_>0?(_e=z[0].g,Le.push("ofs="+_e)):_e=0:Le.push("ofs="+_e);let Oe=!0;for(let nt=0;nt<_;nt++){var U=z[nt].g;const Sn=z[nt].map;if(U-=_e,U<0)_e=Math.max(0,z[nt].g-100),Oe=!1;else try{U="req"+U+"_"||"";try{var ne=Sn instanceof Map?Sn:Object.entries(Sn);for(const[Fn,Pn]of ne){let ir=Pn;h(Pn)&&(ir=Ws(Pn)),Le.push(U+Fn+"="+encodeURIComponent(ir))}}catch(Fn){throw Le.push(U+"type="+encodeURIComponent("_badmap")),Fn}}catch{x&&x(Sn)}}if(Oe){ne=Le.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),m.G=u,ne}function za(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;X||S(),J||(X(),J=!0),C.add(m,u),u.A=0}}function ja(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=rs(p(u.Da,u),Fu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=rs(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ro(this),io(this))};function Ba(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function io(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ut(u.na);ae(m,"RID","rpc"),ae(m,"SID",u.M),ae(m,"AID",u.K),ae(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ae(m,"TO",u.ia),ae(m,"TYPE","xmlhttp"),Cr(u,m),u.u&&u.o&&cs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=ze(Ut(m)),_.u=null,_.R=!0,Er(_,u)}t.Va=function(){this.C!=null&&(this.C=null,ro(this),ja(this),wt(19))};function so(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function hn(u,m){var _=null;if(u.g==m){so(u),Ba(u),u.g=null;var x=2}else if(as(u.h,m))_=m.G,La(u.h,m),x=1;else return;if(u.I!=0){if(m.o)if(x==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;x=qs(),vt(x,new xu(x,_)),nr(u)}else za(u);else if(z=m.m,z==3||z==0&&m.X>0||!(x==1&&Mu(u,m)||x==2&&ja(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:rr(u,5);break;case 4:rr(u,10);break;case 3:rr(u,6);break;default:rr(u,2)}}}function Fu(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function rr(u,m){if(u.j.info("Error code "+m),m==2){var _=p(u.bb,u),x=u.Ua;const z=!x;x=new Re(x||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tn(x,"https"),ze(x),z?to(x.toString(),_):Ou(x.toString(),_)}else wt(2);u.I=0,u.l&&u.l.pa(m),Vn(u),Yt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Vn(u){if(u.I=0,u.ja=[],u.l){const m=ba(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function Ua(u,m,_){var x=_ instanceof Re?Ut(_):new Re(_);if(x.g!="")m&&(x.g=m+"."+x.g),xn(x,x.u);else{var z=l.location;x=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const U=new Re(null);x&&Tn(U,x),m&&(U.g=m),z&&xn(U,z),_&&(U.h=_),x=U}return _=u.G,m=u.wa,_&&m&&ae(x,_,m),ae(x,"VER",u.ka),Cr(u,x),x}function Ha(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ne(new ge({ab:_})):new Ne(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oo(){}t=oo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ao(){}ao.prototype.g=function(u,m){return new bt(u,m)};function bt(u,m){yt.call(this),this.g=new Fa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ii(this)}v(bt,yt),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Ee(this.g)},bt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ws(u),u=_);m.i.push(new Rd(m.Ya++,u)),m.I==3&&nr(m)},bt.prototype.N=function(){this.g.l=null,delete this.j,Ee(this.g),delete this.g,bt.Z.N.call(this)};function Wa(u){ns.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Wa,ns);function zu(){$s.call(this),this.status=1}v(zu,$s);function ii(u){this.g=u}v(ii,oo),ii.prototype.ra=function(){vt(this.g,"a")},ii.prototype.qa=function(u){vt(this.g,new Wa(u))},ii.prototype.pa=function(u){vt(this.g,new zu)},ii.prototype.oa=function(){vt(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,KE=function(){return new ao},ZE=function(){return qs()},GE=wr,Pp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Nc=Gs,Iu.COMPLETE="complete",qE=Iu,Eu.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",yt.prototype.listen=yt.prototype.J,ul=Eu,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,$E=Ne}).apply(typeof pc<"u"?pc:typeof self<"u"?self:typeof window<"u"?window:{});const Fy="@firebase/firestore",zy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new qm("@firebase/firestore");function yo(){return bs.logLevel}function oe(t,...e){if(bs.logLevel<=Ie.DEBUG){const n=e.map(Km);bs.debug(`Firestore (${pa}): ${t}`,...n)}}function $r(t,...e){if(bs.logLevel<=Ie.ERROR){const n=e.map(Km);bs.error(`Firestore (${pa}): ${t}`,...n)}}function ta(t,...e){if(bs.logLevel<=Ie.WARN){const n=e.map(Km);bs.warn(`Firestore (${pa}): ${t}`,...n)}}function Km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,QE(t,r,n)}function QE(t,e,n){let r=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function Me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||QE(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class KA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QA{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class YA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new YA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ek(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Cp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return gf(s)===gf(o)?Se(s,o):gf(s)?1:-1}return Se(t.length,e.length)}const tk=55296,nk=57343;function gf(t){const e=t.charCodeAt(0);return e>=tk&&e<=nk}function na(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="__name__";class lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=lr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Se(e.length,n.length)}static compareSegments(e,n){const r=lr.isNumericId(e),s=lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?lr.extractNumericId(e).compare(lr.extractNumericId(n)):Cp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class je extends lr{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends lr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===By}static keyField(){return new At([By])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new re(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new re(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new re(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(o(),s++)}if(o(),l)throw new re(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(je.fromString(e))}static fromName(e){return new ce(je.fromString(e).popFirst(5))}static empty(){return new ce(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e,n){if(!n)throw new re(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ik(t,e,n,r){if(e===!0&&r===!0)throw new re(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uy(t){if(!ce.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hy(t){if(ce.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ed(t);throw new re(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function cu(t,e){if(!JE(t))throw new re(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new re(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=-62135596800,$y=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$y);return new He(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wy)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$y}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:dt("string",He._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new He(0,0))}static max(){return new ye(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function sk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new zi(s,ce.empty(),e)}function ok(t){return new zi(t.readTime,t.key,Zl)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(ye.min(),ce.empty(),Zl)}static max(){return new zi(ye.max(),ce.empty(),Zl)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==lk)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>r(d))}),l=!0,o===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++h,h===o&&r(l)},y=>s(y))}})}static doWhile(e,n){return new K((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function ck(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}td.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=-1;function nd(t){return t==null}function _h(t){return t===0&&1/t==-1/0}function hk(t){return typeof t=="number"&&Number.isInteger(t)&&!_h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="";function dk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qy(e)),e=fk(t.get(n),e);return qy(e)}function fk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case eT:n+="";break;default:n+=o}}return n}function qy(t){return t+eT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mc(this.root,e,this.comparator,!0)}}class mc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=s??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Ct(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zy(this.data.getIterator())}getIteratorFrom(e){return new Zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new pn([])}unionWith(e){let n=new gt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nT("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=pk.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bi(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="server_timestamp",iT="__type__",sT="__previous_value__",oT="__local_write_time__";function Xm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iT])==null?void 0:r.stringValue)===rT}function rd(t){const e=t.mapValue.fields[sT];return Xm(e)?rd(e):e}function Kl(t){const e=ji(t.mapValue.fields[oT].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,r,s,o,l,h,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const yh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||yh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===yh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__type__",gk="__max__",gc={mapValue:{}},lT="__vector__",vh="value";function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xm(t)?4:yk(t)?9007199254740991:_k(t)?10:11:me(28295,{value:t})}function vr(t,e){if(t===e)return!0;const n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ji(s.timestampValue),h=ji(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Bi(s.bytesValue).isEqual(Bi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return rt(s.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return rt(s.integerValue)===rt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=rt(s.doubleValue),h=rt(o.doubleValue);return l===h?_h(l)===_h(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Gy(l)!==Gy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!vr(l[d],h[d])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Yl(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function ra(t,e){if(t===e)return 0;const n=Ui(t),r=Ui(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=rt(o.integerValue||o.doubleValue),d=rt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Ky(t.timestampValue,e.timestampValue);case 4:return Ky(Kl(t),Kl(e));case 5:return Cp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Bi(o),d=Bi(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Se(h[p],d[p]);if(y!==0)return y}return Se(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Se(rt(o.latitude),rt(l.latitude));return h!==0?h:Se(rt(o.longitude),rt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,k,F,V;const h=o.fields||{},d=l.fields||{},p=(E=h[vh])==null?void 0:E.arrayValue,y=(k=d[vh])==null?void 0:k.arrayValue,v=Se(((F=p==null?void 0:p.values)==null?void 0:F.length)||0,((V=y==null?void 0:y.values)==null?void 0:V.length)||0);return v!==0?v:Qy(p,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===gc.mapValue&&l===gc.mapValue)return 0;if(o===gc.mapValue)return 1;if(l===gc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const E=Cp(d[v],y[v]);if(E!==0)return E;const k=ra(h[d[v]],p[y[v]]);if(k!==0)return k}return Se(d.length,y.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function Ky(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=ji(t),r=ji(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function Qy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=ra(n[s],r[s]);if(o)return o}return Se(n.length,r.length)}function ia(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Ap(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Ap(n.fields[l])}`;return s+"}"}(t.mapValue):me(61005,{value:t})}function Oc(t){switch(Ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rd(t);return e?16+Oc(e):16;case 5:return 2*t.stringValue.length;case 6:return Bi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Oc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zi(r.fields,(o,l)=>{s+=o.length+Oc(l)}),s}(t.mapValue);default:throw me(13486,{value:t})}}function Yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kp(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function Xy(t){return!!t&&"nullValue"in t}function Jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mc(t){return!!t&&"mapValue"in t}function _k(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aT])==null?void 0:r.stringValue)===lT}function xl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return{...t}}function yk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=h.popLast()}l?r[h.lastSegment()]=xl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Mc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new tn(xl(this.value))}}function uT(t){const e=[];return Zi(t.fields,(n,r)=>{const s=new At([n]);if(Mc(r)){const o=uT(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,s,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new zt(e,0,ye.min(),ye.min(),ye.min(),tn.empty(),0)}static newFoundDocument(e,n,r,s){return new zt(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new zt(e,2,n,ye.min(),ye.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ye.min(),ye.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.position=e,this.inclusive=n}}function ev(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ce.comparator(ce.fromName(l.referenceValue),n.key):r=ra(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function vk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class ht extends cT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ek(e,n,r):n==="array-contains"?new Ik(e,r):n==="in"?new Sk(e,r):n==="not-in"?new Pk(e,r):n==="array-contains-any"?new Ck(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Tk(e,r):new xk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ra(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qn(e,n)}matches(e){return hT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hT(t){return t.op==="and"}function dT(t){return wk(t)&&hT(t)}function wk(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Rp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ia(t.value);if(dT(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function fT(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&vr(r.value,s.value)}(t,e):t instanceof Qn?function(r,s){return s instanceof Qn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,h)=>o&&fT(l,s.filters[h]),!0):!1}(t,e):void me(19439)}function pT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ia(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(pT).join(" ,")+"}"}(t):"Filter"}class Ek extends ht{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class Tk extends ht{constructor(e,n){super(e,"in",n),this.keys=mT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xk extends ht{constructor(e,n){super(e,"not-in",n),this.keys=mT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class Ik extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&Yl(n.arrayValue,this.value)}}class Sk extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class Pk extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class Ck extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n=null,r=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function nv(t,e=null,n=[],r=[],s=null,o=null,l=null){return new Ak(t,e,n,r,s,o,l)}function eg(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ia(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ia(r)).join(",")),e.Te=n}return e.Te}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tv(t.startAt,e.startAt)&&tv(t.endAt,e.endAt)}function Lp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n=null,r=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kk(t,e,n,r,s,o,l,h){return new _a(t,e,n,r,s,o,l,h)}function ng(t){return new _a(t)}function rv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gT(t){return t.collectionGroup!==null}function Il(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new gt(At.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xl(o,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new Xl(At.keyField(),r))}return e.Ie}function dr(t){const e=ve(t);return e.Ee||(e.Ee=Rk(e,Il(t))),e.Ee}function Rk(t,e){if(t.limitType==="F")return nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xl(s.field,o)});const n=t.endAt?new wh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wh(t.startAt.position,t.startAt.inclusive):null;return nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bp(t,e){const n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Np(t,e,n){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function id(t,e){return tg(dr(t),dr(e))&&t.limitType===e.limitType}function _T(t){return`${eg(dr(t))}|lt:${t.limitType}`}function vo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pT(s)).join(", ")}]`),nd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ia(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ia(s)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Il(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,h,d){const p=ev(l,h,d);return l.inclusive?p<=0:p<0}(r.startAt,Il(r),s)||r.endAt&&!function(l,h,d){const p=ev(l,h,d);return l.inclusive?p>=0:p>0}(r.endAt,Il(r),s))}(t,e)}function Lk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yT(t){return(e,n)=>{let r=!1;for(const s of Il(t)){const o=bk(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function bk(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?ra(d,p):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return tT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new Ye(ce.comparator);function qr(){return Nk}const vT=new Ye(ce.comparator);function cl(...t){let e=vT;for(const n of t)e=e.insert(n.key,n);return e}function wT(t){let e=vT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return Sl()}function ET(){return Sl()}function Sl(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ok=new Ye(ce.comparator),Mk=new gt(ce.comparator);function Pe(...t){let e=Mk;for(const n of t)e=e.add(n);return e}const Dk=new gt(Se);function Vk(){return Dk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function Fk(t,e){return hk(e)?TT(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function zk(t,e,n){return t instanceof Eh?function(s,o){const l={fields:{[iT]:{stringValue:rT},[oT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Xm(o)&&(o=rd(o)),o&&(l.fields[sT]=o),{mapValue:l}}(n,e):t instanceof Jl?IT(t,e):t instanceof eu?ST(t,e):function(s,o){const l=xT(s,o),h=iv(l)+iv(s.Ae);return kp(l)&&kp(s.Ae)?TT(h):rg(s.serializer,h)}(t,e)}function jk(t,e,n){return t instanceof Jl?IT(t,e):t instanceof eu?ST(t,e):n}function xT(t,e){return t instanceof Th?function(r){return kp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Eh extends od{}class Jl extends od{constructor(e){super(),this.elements=e}}function IT(t,e){const n=PT(e);for(const r of t.elements)n.some(s=>vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends od{constructor(e){super(),this.elements=e}}function ST(t,e){let n=PT(e);for(const r of t.elements)n=n.filter(s=>!vr(s,r));return{arrayValue:{values:n}}}class Th extends od{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iv(t){return rt(t.integerValue||t.doubleValue)}function PT(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Bk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jl&&s instanceof Jl||r instanceof eu&&s instanceof eu?na(r.elements,s.elements,vr):r instanceof Th&&s instanceof Th?vr(r.Ae,s.Ae):r instanceof Eh&&s instanceof Eh}(t.transform,e.transform)}class Uk{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ad{}function CT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ig(t.key,Zn.none()):new hu(t.key,t.data,Zn.none());{const n=t.data,r=tn.empty();let s=new gt(At.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ki(t.key,r,new pn(s.toArray()),Zn.none())}}function Hk(t,e,n){t instanceof hu?function(s,o,l){const h=s.value.clone(),d=ov(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Ki?function(s,o,l){if(!Dc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ov(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(AT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Pl(t,e,n,r){return t instanceof hu?function(o,l,h,d){if(!Dc(o.precondition,l))return h;const p=o.value.clone(),y=av(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ki?function(o,l,h,d){if(!Dc(o.precondition,l))return h;const p=av(o.fieldTransforms,d,l),y=l.data;return y.setAll(AT(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,h){return Dc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function Wk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=xT(r.transform,s||null);o!=null&&(n===null&&(n=tn.empty()),n.set(r.field,o))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&na(r,s,(o,l)=>Bk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends ad{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ki extends ad{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ov(t,e,n){const r=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);r.set(o.field,jk(l,h,n[s]))}return r}function av(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,zk(o,l,e))}return r}class ig extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $k extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Hk(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ET();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=CT(l,h);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,r)=>sv(n,r))&&na(this.baseMutations,e.baseMutations,(n,r)=>sv(n,r))}}class sg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Ok}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new sg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Ae;function Kk(t){switch(t){case G.OK:return me(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function kT(t){if(t===void 0)return $r("GRPC error has no .code"),G.UNKNOWN;switch(t){case ut.OK:return G.OK;case ut.CANCELLED:return G.CANCELLED;case ut.UNKNOWN:return G.UNKNOWN;case ut.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ut.INTERNAL:return G.INTERNAL;case ut.UNAVAILABLE:return G.UNAVAILABLE;case ut.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ut.NOT_FOUND:return G.NOT_FOUND;case ut.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ut.ABORTED:return G.ABORTED;case ut.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ut.DATA_LOSS:return G.DATA_LOSS;default:return me(39323,{code:t})}}(Ae=ut||(ut={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Oi([4294967295,4294967295],0);function lv(t){const e=Qk().encode(t),n=new WE;return n.update(e),new Uint8Array(n.digest())}function uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Oi([n,r],0),new Oi([s,o],0)]}class og{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hl(`Invalid padding: ${n}`);if(r<0)throw new hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Oi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Oi.fromNumber(r)));return s.compare(Yk)===1&&(s=new Oi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lv(e),[r,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new og(o,s,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=lv(e),[r,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ld(ye.min(),s,new Ye(Se),qr(),Pe())}}class du{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class RT{constructor(e,n){this.targetId=e,this.Ce=n}}class LT{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cv{constructor(){this.ve=0,this.Fe=hv(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),r=Pe();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:o})}}),new du(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=hv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xk{constructor(e){this.Ge=e,this.ze=new Map,this.je=qr(),this.Je=_c(),this.He=_c(),this.Ye=new Ye(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Lp(o))if(r===0){const l=new ce(o.path);this.et(n,l,zt.newNoDocument(l,ye.min()))}else Me(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Bi(r).toUint8Array()}catch(d){if(d instanceof nT)return ta("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new og(l,s,o)}catch(d){return ta(d instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Lp(h.target)){const d=new ce(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,zt.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=Pe();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new ld(e,n,this.Ye,this.je,r);return this.je=qr(),this.Je=_c(),this.He=_c(),this.Ye=new Ye(Se),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _c(){return new Ye(ce.comparator)}function hv(){return new Ye(ce.comparator)}const Jk={asc:"ASCENDING",desc:"DESCENDING"},eR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tR={and:"AND",or:"OR"};class nR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Op(t,e){return t.useProto3Json||nd(e)?e:{value:e}}function xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rR(t,e){return xh(t,e.toTimestamp())}function fr(t){return Me(!!t,49232),ye.fromTimestamp(function(n){const r=ji(n);return new He(r.seconds,r.nanos)}(t))}function ag(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NT(t){const e=je.fromString(t);return Me(FT(e),10190,{key:e.toString()}),e}function Dp(t,e){return ag(t.databaseId,e.path)}function _f(t,e){const n=NT(e);if(n.get(1)!==t.databaseId.projectId)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(MT(n))}function OT(t,e){return ag(t.databaseId,e)}function iR(t){const e=NT(t);return e.length===4?je.emptyPath():MT(e)}function Vp(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MT(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dv(t,e,n){return{name:Dp(t,e),fields:n.value.mapValue.fields}}function sR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Me(y===void 0||typeof y=="string",58123),Lt.fromBase64String(y||"")):(Me(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Lt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?G.UNKNOWN:kT(p.code);return new re(y,p.message||"")}(l);n=new LT(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_f(t,r.document.name),o=fr(r.document.updateTime),l=r.document.createTime?fr(r.document.createTime):ye.min(),h=new tn({mapValue:{fields:r.document.fields}}),d=zt.newFoundDocument(s,o,l,h),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Vc(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_f(t,r.document),o=r.readTime?fr(r.readTime):ye.min(),l=zt.newNoDocument(s,o),h=r.removedTargetIds||[];n=new Vc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_f(t,r.document),o=r.removedTargetIds||[];n=new Vc([],o,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Zk(s,o),h=r.targetId;n=new RT(h,l)}}return n}function oR(t,e){let n;if(e instanceof hu)n={update:dv(t,e.key,e.value)};else if(e instanceof ig)n={delete:Dp(t,e.key)};else if(e instanceof Ki)n={update:dv(t,e.key,e.data),updateMask:mR(e.fieldMask)};else{if(!(e instanceof $k))return me(16599,{Vt:e.type});n={verify:Dp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Eh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Th)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw me(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:rR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function aR(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?fr(s.updateTime):fr(o);return l.isEqual(ye.min())&&(l=fr(o)),new Uk(l,s.transformResults||[])}(n,e))):[]}function lR(t,e){return{documents:[OT(t,e.path)]}}function uR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OT(t,s);const o=function(p){if(p.length!==0)return VT(Qn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:wo(E.field),direction:dR(E.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Op(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function cR(t){let e=iR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Me(r===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(v){const E=DT(v);return E instanceof Qn&&dT(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(E=>function(F){return new Xl(Eo(F.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,nd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(v){const E=!!v.before,k=v.values||[];return new wh(k,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,k=v.values||[];return new wh(k,E)}(n.endAt)),kk(e,s,l,o,h,"F",d,p)}function hR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Eo(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Eo(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Eo(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Eo(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Eo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>DT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function dR(t){return Jk[t]}function fR(t){return eR[t]}function pR(t){return tR[t]}function wo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return At.fromServerFormat(t.fieldPath)}function VT(t){return t instanceof ht?function(n){if(n.op==="=="){if(Jy(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NAN"}};if(Xy(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jy(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NAN"}};if(Xy(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(n.field),op:fR(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const r=n.getFilters().map(s=>VT(s));return r.length===1?r[0]:{compositeFilter:{op:pR(n.op),filters:r}}}(t):me(54877,{filter:t})}function mR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,s,o=ye.min(),l=ye.min(),h=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.yt=e}}function _R(t){const e=cR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.Cn=new vR}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(zi.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class vR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gt(je.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zT=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(zT,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sa(0)}static cr(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="LruGarbageCollector",wR=1048576;function mv([t,e],[n,r]){const s=Se(t,n);return s===0?Se(e,r):s}class ER{constructor(e){this.Ir=e,this.buffer=new gt(mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(pv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?oe(pv,"Ignoring IndexedDB error during garbage collection: ",n):await ma(n)}await this.Vr(3e5)})}}class xR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(td.ce);const r=new ER(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),yo()<=Ie.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function IR(t,e){return new xR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pl(r.mutation,s,pn.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=cl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,s){let o=qr();const l=Sl(),h=function(){return Sl()}();return n.forEach((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Ki)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),Pl(y.mutation,p,y.mutation.getFieldMask(),He.now())):l.set(p.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>h.set(p,new PR(y,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Sl();let s=new Ye((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||pn.empty();y=h.applyToLocalView(p,y),r.set(d,y);const v=(s.get(h.batchId)||Pe()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=ET();y.forEach(E=>{if(!o.has(E)){const k=CT(n.get(E),r.get(E));k!==null&&v.set(E,k),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return K.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):K.resolve(ws());let h=Zl,d=o;return l.next(p=>K.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{d=d.insert(y,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Pe())).next(y=>({batchId:h,changes:wT(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=cl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=cl();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(v,E){return new _a(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,zt.newInvalidDocument(y)))});let h=cl();return l.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Pl(y.mutation,p,pn.empty(),He.now()),sd(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:_R(s.bundledQuery),readTime:fr(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.overlays=new Ye(ce.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return K.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),o=n.length+1,l=new ce(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Ye((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=ws(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=ws(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return K.resolve(h)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Gk(n,r));let o=this.qr.get(n);o===void 0&&(o=Pe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Qr=new gt(Tt.$r),this.Ur=new gt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new je([])),r=new Tt(n,e),s=new Tt(n,e+1),o=[];return this.Ur.forEachInRange([r,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new je([])),r=new Tt(n,e),s=new Tt(n,e+1);let o=Pe();return this.Ur.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Tt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(Tt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qk(o,n,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Tt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Se);return n.forEach(s=>{const o=new Tt(s,0),l=new Tt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ce.isDocumentKey(o)||(o=o.child(""));const l=new Tt(new ce(o),0);let h=new gt(Se);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),K.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,s=>{const o=new Tt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Tt(n,0),s=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.ri=e,this.docs=function(){return new Ye(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():zt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=qr();const l=n.path,h=new ce(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||ak(ok(y),r)<=0||(s.has(y.key)||sd(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,r,s){me(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NR(this)}getSize(e){return K.resolve(this.size)}}class NR extends SR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.persistence=e,this.si=new Fs(n=>eg(n),tg),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new lg,this.targetCount=0,this.ai=sa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.ui={},this.overlays={},this.ci=new td(0),this.li=!1,this.li=!0,this.hi=new RR,this.referenceDelegate=e(this),this.Pi=new OR(this),this.indexManager=new yR,this.remoteDocumentCache=function(s){return new bR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gR(n),this.Ii=new AR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new LR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new MR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class MR extends uk{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new lg,this.Vi=null}static mi(e){return new ug(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ih{constructor(e,n){this.persistence=e,this.pi=new Fs(r=>dk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=IR(this,n)}static mi(e,n){return new Ih(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?K.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,ye.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Pe(),s=Pe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new cg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RC()?8:ck(Bt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new DR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(yo()<=Ie.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(yo()<=Ie.DEBUG&&oe("QueryEngine","Query:",vo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(yo()<=Ie.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):K.resolve())}ys(e,n){if(rv(n))return K.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Np(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Pe(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Np(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,r,s){return rv(n)||s.isEqual(ye.min())?K.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?K.resolve(null):(yo()<=Ie.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vo(n)),this.vs(e,l,n,sk(s,Zl)).next(h=>h))})}Ds(e,n){let r=new gt(yT(e));return n.forEach((s,o)=>{sd(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return yo()<=Ie.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",vo(n)),this.ps.getDocumentsMatchingQuery(e,n,zi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",FR=3e8;class zR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Se),this.xs=new Fs(o=>eg(o),tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function jR(t,e,n,r){return new zR(t,e,n,r)}async function BT(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let d=Pe();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function BR(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,E=v.keys();let k=K.resolve();return E.forEach(F=>{k=k.next(()=>y.getEntry(d,F)).next(V=>{const B=p.docVersions.get(F);Me(B!==null,48541),V.version.compareTo(B)<0&&(v.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=Pe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function UT(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function UR(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((y,v)=>{const E=s.get(v);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,y.addedDocuments,v)));let k=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(Lt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),s=s.insert(v,k),function(V,B,b){return V.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=FR?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(E,k,y)&&h.push(n.Pi.updateTargetData(o,k))});let d=qr(),p=Pe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(HR(o,l,e.documentUpdates).next(y=>{d=y.ks,p=y.qs})),!r.isEqual(ye.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function HR(t,e,n){let r=Pe(),s=Pe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=qr();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ye.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):oe(hg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function WR(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ym),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $R(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,K.resolve(s)):n.Pi.allocateTargetId(r).next(l=>(s=new Ti(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Fp(t,e,n){const r=ve(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!ga(l))throw l;oe(hg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function gv(t,e,n){const r=ve(t);let s=ye.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const v=ve(d),E=v.xs.get(y);return E!==void 0?K.resolve(v.Ms.get(E)):v.Pi.getTargetData(p,y)}(r,l,dr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:ye.min(),n?o:Pe())).next(h=>(qR(r,Lk(e),h),{documents:h,Qs:o})))}function qR(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class _v{constructor(){this.activeTargetIds=Vk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GR{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="ConnectivityMonitor";class vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function zp(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="RestConnection",KR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===yh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=zp(),h=this.zo(e,n.toUriEncodedString());oe(yf,`Sending RPC '${e}' ${l}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),y=da(p);return this.Jo(e,h,d,r,y).then(v=>(oe(yf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw ta(yf,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=KR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class XR extends QR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=zp();return new Promise((h,d)=>{const p=new $E;p.setWithCredentials(!0),p.listenOnce(qE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Nc.NO_ERROR:const v=p.getResponseJson();oe(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Nc.TIMEOUT:oe(Mt,`RPC '${e}' ${l} timed out`),d(new re(G.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const E=p.getStatus();if(oe(Mt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const F=k==null?void 0:k.error;if(F&&F.status&&F.message){const V=function(b){const P=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(P)>=0?P:G.UNKNOWN}(F.status);d(new re(V,F.message))}else d(new re(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new re(G.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{oe(Mt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);oe(Mt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",y,r,15)})}T_(e,n,r){const s=zp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=KE(),h=ZE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=o.join("");oe(Mt,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=l.createWebChannel(y,d);this.I_(v);let E=!1,k=!1;const F=new YR({Yo:B=>{k?oe(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,B):(E||(oe(Mt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),oe(Mt,`RPC '${e}' stream ${s} sending:`,B),v.send(B))},Zo:()=>v.close()}),V=(B,b,P)=>{B.listen(b,N=>{try{P(N)}catch($){setTimeout(()=>{throw $},0)}})};return V(v,ul.EventType.OPEN,()=>{k||(oe(Mt,`RPC '${e}' stream ${s} transport opened.`),F.o_())}),V(v,ul.EventType.CLOSE,()=>{k||(k=!0,oe(Mt,`RPC '${e}' stream ${s} transport closed`),F.a_(),this.E_(v))}),V(v,ul.EventType.ERROR,B=>{k||(k=!0,ta(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),F.a_(new re(G.UNAVAILABLE,"The operation could not be completed")))}),V(v,ul.EventType.MESSAGE,B=>{var b;if(!k){const P=B.data[0];Me(!!P,16349);const N=P,$=(N==null?void 0:N.error)||((b=N[0])==null?void 0:b.error);if($){oe(Mt,`RPC '${e}' stream ${s} received error:`,$);const X=$.status;let J=function(I){const A=ut[I];if(A!==void 0)return kT(A)}(X),C=$.message;J===void 0&&(J=G.INTERNAL,C="Unknown error status: "+X+" with message "+$.message),k=!0,F.a_(new re(J,C)),v.close()}else oe(Mt,`RPC '${e}' stream ${s} received:`,P),F.u_(P)}}),V(h,GE.STAT_EVENT,B=>{B.stat===Pp.PROXY?oe(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):B.stat===Pp.NOPROXY&&oe(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){return new nR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="PersistentStream";class WT{constructor(e,n,r,s,o,l,h,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new re(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JR extends WT{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sR(this.serializer,e),r=function(o){if(!("targetChange"in o))return ye.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ye.min():l.readTime?fr(l.readTime):ye.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Vp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Lp(d)?{documents:lR(o,d)}:{query:uR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=bT(o,l.resumeToken);const p=Op(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ye.min())>0){h.readTime=xh(o,l.snapshotVersion.toTimestamp());const p=Op(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=hR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Vp(this.serializer),n.removeTarget=e,this.q_(n)}}class e2 extends WT{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aR(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Vp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{}class n2 extends t2{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Mp(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(G.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Mp(n,r),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(G.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($r(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class i2{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{zs(this)&&(oe(Ns,"Restarting streams for network reachability change."),await async function(d){const p=ve(d);p.Ea.add(4),await fu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await cd(p)}(this))})}),this.Ra=new r2(r,s)}}async function cd(t){if(zs(t))for(const e of t.da)await e(!0)}async function fu(t){for(const e of t.da)await e(!1)}function $T(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mg(n)?pg(n):ya(n).O_()&&fg(n,e))}function dg(t,e){const n=ve(t),r=ya(n);n.Ia.delete(e),r.O_()&&qT(n,e),n.Ia.size===0&&(r.O_()?r.L_():zs(n)&&n.Ra.set("Unknown"))}function fg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ya(t).Y_(e)}function qT(t,e){t.Va.Ue(e),ya(t).Z_(e)}function pg(t){t.Va=new Xk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ya(t).start(),t.Ra.ua()}function mg(t){return zs(t)&&!ya(t).x_()&&t.Ia.size>0}function zs(t){return ve(t).Ea.size===0}function GT(t){t.Va=void 0}async function s2(t){t.Ra.set("Online")}async function o2(t){t.Ia.forEach((e,n)=>{fg(t,e)})}async function a2(t,e){GT(t),mg(t)?(t.Ra.ha(e),pg(t)):t.Ra.set("Unknown")}async function l2(t,e,n){if(t.Ra.set("Online"),e instanceof LT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(r){oe(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sh(t,r)}else if(e instanceof Vc?t.Va.Ze(e):e instanceof RT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await UT(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(Lt.EMPTY_BYTE_STRING,y.snapshotVersion)),qT(o,d);const v=new Ti(y.target,d,p,y.sequenceNumber);fg(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){oe(Ns,"Failed to raise snapshot:",r),await Sh(t,r)}}async function Sh(t,e,n){if(!ga(e))throw e;t.Ea.add(1),await fu(t),t.Ra.set("Offline"),n||(n=()=>UT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Ns,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cd(t)})}function ZT(t,e){return e().catch(n=>Sh(t,n,e))}async function hd(t){const e=ve(t),n=Hi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ym;for(;u2(e);)try{const s=await WR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,c2(e,s)}catch(s){await Sh(e,s)}KT(e)&&QT(e)}function u2(t){return zs(t)&&t.Ta.length<10}function c2(t,e){t.Ta.push(e);const n=Hi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(t){return zs(t)&&!Hi(t).x_()&&t.Ta.length>0}function QT(t){Hi(t).start()}async function h2(t){Hi(t).ra()}async function d2(t){const e=Hi(t);for(const n of t.Ta)e.ea(n.mutations)}async function f2(t,e,n){const r=t.Ta.shift(),s=sg.from(r,e,n);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hd(t)}async function p2(t,e){e&&Hi(t).X_&&await async function(r,s){if(function(l){return Kk(l)&&l!==G.ABORTED}(s.code)){const o=r.Ta.shift();Hi(r).B_(),await ZT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await hd(r)}}(t,e),KT(t)&&QT(t)}async function Ev(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),oe(Ns,"RemoteStore received new credentials");const r=zs(n);n.Ea.add(3),await fu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cd(n)}async function m2(t,e){const n=ve(t);e?(n.Ea.delete(2),await cd(n)):e||(n.Ea.add(2),await fu(n),n.Ra.set("Unknown"))}function ya(t){return t.ma||(t.ma=function(n,r,s){const o=ve(n);return o.sa(),new JR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:s2.bind(null,t),t_:o2.bind(null,t),r_:a2.bind(null,t),H_:l2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),mg(t)?pg(t):t.Ra.set("Unknown")):(await t.ma.stop(),GT(t))})),t.ma}function Hi(t){return t.fa||(t.fa=function(n,r,s){const o=ve(n);return o.sa(),new e2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h2.bind(null,t),r_:p2.bind(null,t),ta:d2.bind(null,t),na:f2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await hd(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Ns,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,h=new gg(e,n,l,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(t,e){if($r("AsyncQueue",`${e}: ${t}`),ga(t))return new re(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=cl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.ga=new Ye(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new oa(e,n,Bo.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _2{constructor(){this.queries=xv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),o=s.queries;s.queries=xv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(r)})})(this,new re(G.ABORTED,"Firestore shutting down"))}}function xv(){return new Fs(t=>_T(t),id)}async function YT(t,e){const n=ve(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new g2,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=_g(l,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&yg(n)}async function XT(t,e){const n=ve(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y2(t,e){const n=ve(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&yg(n)}function v2(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function yg(t){t.Ca.forEach(e=>{e.next()})}var jp,Iv;(Iv=jp||(jp={})).Ma="default",Iv.Cache="cache";class JT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.key=e}}class t1{constructor(e){this.key=e}}class w2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=yT(e),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Tv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const E=s.get(y),k=sd(this.query,v)?v:null,F=!!E&&this.mutatedKeys.has(E.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let B=!1;E&&k?E.data.isEqual(k.data)?F!==V&&(r.track({type:3,doc:k}),B=!0):this.su(E,k)||(r.track({type:2,doc:k}),B=!0,(d&&this.eu(k,d)>0||p&&this.eu(k,p)<0)&&(h=!0)):!E&&k?(r.track({type:0,doc:k}),B=!0):E&&!k&&(r.track({type:1,doc:E}),B=!0,(d||p)&&(h=!0)),B&&(k?(l=l.add(k),o=V?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,v)=>function(k,F){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:B})}};return V(k)-V(F)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(r),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new oa(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new t1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new e1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vg="SyncEngine";class E2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class T2{constructor(e){this.key=e,this.hu=!1}}class x2{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Fs(h=>_T(h),id),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ce.comparator),this.Au=new Map,this.Ru=new lg,this.Vu={},this.mu=new Map,this.fu=sa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I2(t,e,n=!0){const r=a1(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await n1(r,e,n,!0),s}async function S2(t,e){const n=a1(t);await n1(n,e,!0,!1)}async function n1(t,e,n,r){const s=await $R(t.localStore,dr(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await P2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&$T(t.remoteStore,s),h}async function P2(t,e,n,r,s){t.pu=(v,E,k)=>async function(V,B,b,P){let N=B.view.ru(b);N.Cs&&(N=await gv(V.localStore,B.query,!1).then(({documents:C})=>B.view.ru(C,N)));const $=P&&P.targetChanges.get(B.targetId),X=P&&P.targetMismatches.get(B.targetId)!=null,J=B.view.applyChanges(N,V.isPrimaryClient,$,X);return Pv(V,B.targetId,J.au),J.snapshot}(t,v,E,k);const o=await gv(t.localStore,e,!0),l=new w2(e,o.Qs),h=l.ru(o.documents),d=du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);Pv(t,n,p.au);const y=new E2(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function C2(t,e,n){const r=ve(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(l=>!id(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&dg(r.remoteStore,s.targetId),Bp(r,s.targetId)}).catch(ma)):(Bp(r,s.targetId),await Fp(r.localStore,s.targetId,!0))}async function A2(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dg(n.remoteStore,r.targetId))}async function k2(t,e,n){const r=D2(t);try{const s=await function(l,h){const d=ve(l),p=He.now(),y=h.reduce((k,F)=>k.add(F.key),Pe());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let F=qr(),V=Pe();return d.Ns.getEntries(k,y).next(B=>{F=B,F.forEach((b,P)=>{P.isValidDocument()||(V=V.add(b))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,F)).next(B=>{v=B;const b=[];for(const P of h){const N=Wk(P,v.get(P.key).overlayedDocument);N!=null&&b.push(new Ki(P.key,N,uT(N.value.mapValue),Zn.exists(!0)))}return d.mutationQueue.addMutationBatch(k,p,b,h)}).next(B=>{E=B;const b=B.applyToLocalDocumentSet(v,V);return d.documentOverlayCache.saveOverlays(k,B.batchId,b)})}).then(()=>({batchId:E.batchId,changes:wT(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ye(Se)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(r,s.batchId,n),await pu(r,s.changes),await hd(r.remoteStore)}catch(s){const o=_g(s,"Failed to persist write");n.reject(o)}}async function r1(t,e){const n=ve(t);try{const r=await UR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Me(l.hu,14607):s.removedDocuments.size>0&&(Me(l.hu,42227),l.hu=!1))}),await pu(n,r,e)}catch(r){await ma(r)}}function Sv(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ve(l);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const E of v.Sa)E.va(h)&&(p=!0)}),p&&yg(d)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R2(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new Ye(ce.comparator);l=l.insert(o,zt.newNoDocument(o,ye.min()));const h=Pe().add(o),d=new ld(ye.min(),new Map,new Ye(Se),l,h);await r1(r,d),r.du=r.du.remove(o),r.Au.delete(e),wg(r)}else await Fp(r.localStore,e,!1).then(()=>Bp(r,e,n)).catch(ma)}async function L2(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await BR(n.localStore,e);s1(n,r,null),i1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,s)}catch(s){await ma(s)}}async function b2(t,e,n){const r=ve(t);try{const s=await function(l,h){const d=ve(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Me(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);s1(r,e,n),i1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,s)}catch(s){await ma(s)}}function i1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function s1(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Bp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||o1(t,r)})}function o1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(dg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),wg(t))}function Pv(t,e,n){for(const r of n)r instanceof e1?(t.Ru.addReference(r.key,e),N2(t,r)):r instanceof t1?(oe(vg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||o1(t,r.key)):me(19791,{wu:r})}function N2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(vg,"New document in limbo: "+n),t.Eu.add(r),wg(t))}function wg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(je.fromString(e)),r=t.fu.next();t.Au.set(r,new T2(n)),t.du=t.du.insert(n,r),$T(t.remoteStore,new Ti(dr(ng(n.path)),r,"TargetPurposeLimboResolution",td.ce))}}async function pu(t,e,n){const r=ve(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,d)=>{l.push(r.pu(d,e,n).then(p=>{var y;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=cg.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),r.Pu.H_(s),await async function(d,p){const y=ve(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>K.forEach(p,E=>K.forEach(E.Es,k=>y.persistence.referenceDelegate.addReference(v,E.targetId,k)).next(()=>K.forEach(E.ds,k=>y.persistence.referenceDelegate.removeReference(v,E.targetId,k)))))}catch(v){if(!ga(v))throw v;oe(hg,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const k=y.Ms.get(E),F=k.snapshotVersion,V=k.withLastLimboFreeSnapshotVersion(F);y.Ms=y.Ms.insert(E,V)}}}(r.localStore,o))}async function O2(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){oe(vg,"User change. New user:",e.toKey());const r=await BT(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new re(G.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ls)}}function M2(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let s=Pe();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function a1(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.Pu.H_=y2.bind(null,e.eventManager),e.Pu.yu=v2.bind(null,e.eventManager),e}function D2(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b2.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return jR(this.persistence,new VR,e.initialUser,this.serializer)}Cu(e){return new jT(ug.mi,this.serializer)}Du(e){return new GR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class V2 extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Ih,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new jT(r=>Ih.mi(r,n),this.serializer)}}class Up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O2.bind(null,this.syncEngine),await m2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _2}()}createDatastore(e){const n=ud(e.databaseInfo.databaseId),r=function(o){return new XR(o)}(e.databaseInfo);return function(o,l,h,d){return new n2(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,h){return new i2(r,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Sv(this.syncEngine,n,0),function(){return vv.v()?new vv:new ZR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,y){const v=new x2(s,o,l,h,d,p);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ve(s);oe(Ns,"RemoteStore shutting down."),o.Ea.add(5),await fu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="FirestoreClient";class F2{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{oe(Wi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(oe(Wi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_g(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wf(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Wi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await BT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z2(t);oe(Wi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ev(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ev(e.remoteStore,s)),t._onlineComponents=e}async function z2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Wi,"Using user provided OfflineComponentProvider");try{await wf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ta("Error using user provided cache. Falling back to memory cache: "+n),await wf(t,new Ph)}}else oe(Wi,"Using default OfflineComponentProvider"),await wf(t,new V2(void 0));return t._offlineComponents}async function u1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Wi,"Using user provided OnlineComponentProvider"),await Cv(t,t._uninitializedComponentsProvider._online)):(oe(Wi,"Using default OnlineComponentProvider"),await Cv(t,new Up))),t._onlineComponents}function j2(t){return u1(t).then(e=>e.syncEngine)}async function c1(t){const e=await u1(t),n=e.eventManager;return n.onListen=I2.bind(null,e.syncEngine),n.onUnlisten=C2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A2.bind(null,e.syncEngine),n}function B2(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new l1({next:E=>{y.Nu(),l.enqueueAndForget(()=>XT(o,v));const k=E.docs.has(h);!k&&E.fromCache?p.reject(new re(G.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&E.fromCache&&d&&d.source==="server"?p.reject(new re(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new JT(ng(h.path),y,{includeMetadataChanges:!0,qa:!0});return YT(o,v)}(await c1(t),t.asyncQueue,e,n,r)),r.promise}function U2(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const y=new l1({next:E=>{y.Nu(),l.enqueueAndForget(()=>XT(o,v)),E.fromCache&&d.source==="server"?p.reject(new re(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new JT(h,y,{includeMetadataChanges:!0,qa:!0});return YT(o,v)}(await c1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firestore.googleapis.com",kv=!0;class Rv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d1,this.ssl=kv}else this.host=e.host,this.ssl=e.ssl??kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wR)throw new re(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ik("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZA;switch(r.type){case"firstParty":return new XA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Av.get(n);r&&(oe("ComponentProvider","Removing Datastore"),Av.delete(n),r.terminate())}(this),Promise.resolve()}}function H2(t,e,n,r={}){var p;t=yr(t,dd);const s=da(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(DE(`https://${h}`),VE("Firestore",!0)),o.host!==d1&&o.host!==h&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:r};if(!Rs(d,l)&&(t._setSettings(d),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=Vt.MOCK_USER;else{y=EC(r.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new re(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Vt(E)}t._authCredentials=new KA(new YE(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cu(n,st._jsonSchema))return new st(e,r||null,new ce(je.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:dt("string",st._jsonSchemaVersion),referencePath:dt("string")};class Mi extends js{constructor(e,n,r){super(e,n,ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ce(e))}withConverter(e){return new Mi(this.firestore,e,this._path)}}function hi(t,e,...n){if(t=St(t),XE("collection","path",e),t instanceof dd){const r=je.fromString(e,...n);return Hy(r),new Mi(t,null,r)}{if(!(t instanceof st||t instanceof Mi))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Hy(r),new Mi(t.firestore,null,r)}}function li(t,e,...n){if(t=St(t),arguments.length===1&&(e=Qm.newId()),XE("doc","path",e),t instanceof dd){const r=je.fromString(e,...n);return Uy(r),new st(t,null,new ce(r))}{if(!(t instanceof st||t instanceof Mi))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Uy(r),new st(t.firestore,t instanceof Mi?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="AsyncQueue";class bv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HT(this,"async_queue_retry"),this._c=()=>{const r=vf();r&&oe(Lv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ga(e))throw e;oe(Lv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$r("INTERNAL UNHANDLED ERROR: ",Nv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=gg.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:Nv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class va extends dd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new bv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bv(e),this._firestoreClient=void 0,await e}}}function W2(t,e){const n=typeof t=="object"?t:BE(),r=typeof t=="string"?t:yh,s=Zm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=vC("firestore");o&&H2(s,...o)}return s}function Eg(t){if(t._terminated)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$2(t),t._firestoreClient}function $2(t){var r,s,o;const e=t._freezeSettings(),n=function(h,d,p,y){return new mk(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,h1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new F2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(n){throw new re(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:dt("string",Rn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(cu(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:dt("string",pr._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mr(e.vectorValues);throw new re(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:dt("string",mr._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=/^__.*__$/;class G2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class f1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class xg{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ch(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p1(this.Ac)&&q2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ud(e)}Cc(e,n,r,s=!1){return new xg({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(t){const e=t._freezeSettings(),n=ud(t._databaseId);return new Z2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function K2(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Sg("Data must be an object, but it was:",l,r);const h=m1(r,l);let d,p;if(o.merge)d=new pn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=Hp(e,v,n);if(!l.contains(E))throw new re(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);_1(y,E)||y.push(E)}d=new pn(y),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new G2(new tn(h),d,p)}class pd extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pd}}function Q2(t,e,n,r){const s=t.Cc(1,e,n);Sg("Data must be an object, but it was:",s,r);const o=[],l=tn.empty();Zi(r,(d,p)=>{const y=Pg(e,d,n);p=St(p);const v=s.yc(y);if(p instanceof pd)o.push(y);else{const E=mu(p,v);E!=null&&(o.push(y),l.set(y,E))}});const h=new pn(o);return new f1(l,h,s.fieldTransforms)}function Y2(t,e,n,r,s,o){const l=t.Cc(1,e,n),h=[Hp(e,r,n)],d=[s];if(o.length%2!=0)throw new re(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Hp(e,o[E])),d.push(o[E+1]);const p=[],y=tn.empty();for(let E=h.length-1;E>=0;--E)if(!_1(p,h[E])){const k=h[E];let F=d[E];F=St(F);const V=l.yc(k);if(F instanceof pd)p.push(k);else{const B=mu(F,V);B!=null&&(p.push(k),y.set(k,B))}}const v=new pn(p);return new f1(y,v,l.fieldTransforms)}function X2(t,e,n,r=!1){return mu(n,t.Cc(r?4:3,e))}function mu(t,e){if(g1(t=St(t)))return Sg("Unsupported field value:",e,t),m1(t,e);if(t instanceof Tg)return function(r,s){if(!p1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const h of r){let d=mu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Fk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=He.fromDate(r);return{timestampValue:xh(s.serializer,o)}}if(r instanceof He){const o=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xh(s.serializer,o)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:bT(s.serializer,r._byteString)};if(r instanceof st){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ag(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mr)return function(l,h){return{mapValue:{fields:{[aT]:{stringValue:lT},[vh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return rg(h.serializer,p)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ed(r)}`)}(t,e)}function m1(t,e){const n={};return tT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,s)=>{const o=mu(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function g1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof pr||t instanceof Rn||t instanceof st||t instanceof Tg||t instanceof mr)}function Sg(t,e,n){if(!g1(n)||!JE(n)){const r=ed(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Hp(t,e,n){if((e=St(e))instanceof fd)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw Ch("Field path arguments must be of type string or ",t,!1,void 0,n)}const J2=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(J2)>=0)throw Ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fd(...e.split("."))._internalPath}catch{throw Ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ch(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new re(G.INVALID_ARGUMENT,h+t+d)}function _1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eL extends y1{data(){return super.data()}}function md(t,e){return typeof e=="string"?Pg(t,e):e instanceof fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cg{}class v1 extends Cg{}function Fc(t,e,...n){let r=[];e instanceof Cg&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof Ag).length,h=o.filter(d=>d instanceof gd).length;if(l>1||l>0&&h>0)throw new re(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class gd extends v1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gd(e,n,r)}_apply(e){const n=this._parse(e);return w1(e._query,n),new js(e.firestore,e.converter,bp(e._query,n))}_parse(e){const n=Ig(e.firestore);return function(o,l,h,d,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new re(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Mv(v,y);const F=[];for(const V of v)F.push(Ov(d,o,V));E={arrayValue:{values:F}}}else E=Ov(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Mv(v,y),E=X2(h,l,v,y==="in"||y==="not-in");return ht.create(p,y,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zc(t,e,n){const r=e,s=md("where",t);return gd._create(s,r,n)}class Ag extends Cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)w1(l,d),l=bp(l,d)}(e._query,n),new js(e.firestore,e.converter,bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kg extends v1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(o,l)}(e._query,this._field,this._direction);return new js(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new _a(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nL(t,e="asc"){const n=e,r=md("orderBy",t);return kg._create(r,n)}function Ov(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new re(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!ce.isDocumentKey(r))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yy(t,new ce(r))}if(n instanceof st)return Yy(t,n._key);throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(n)}.`)}function Mv(t,e){if(!Array.isArray(t)||t.length===0)throw new re(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w1(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rL{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[vh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>rt(l.doubleValue));return new mr(n)}convertGeoPoint(e){return new pr(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=ji(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Me(FT(r),9688,{name:e});const s=new Ql(r.get(1),r.get(3)),o=new ce(r.popFirst(5));return s.isEqual(n)||$r(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Is extends y1{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Is._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Is._jsonSchemaVersion="firestore/documentSnapshot/1.0",Is._jsonSchema={type:dt("string",Is._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class jc extends Is{data(e={}){return super.data(e)}}class Uo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new dl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jc(this._firestore,this._userDataWriter,r.key,r,new dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new dl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new jc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new dl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:sL(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){t=yr(t,st);const e=yr(t.firestore,va);return B2(Eg(e),t._key).then(n=>aL(e,t,n))}Uo._jsonSchemaVersion="firestore/querySnapshot/1.0",Uo._jsonSchema={type:dt("string",Uo._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class E1 extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function di(t){t=yr(t,js);const e=yr(t.firestore,va),n=Eg(e),r=new E1(e);return tL(t._query),U2(n,t._query).then(s=>new Uo(e,r,t,s))}function Dv(t,e,n){t=yr(t,st);const r=yr(t.firestore,va),s=iL(t.converter,e);return Rg(r,[K2(Ig(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zn.none())])}function Ef(t,e,n,...r){t=yr(t,st);const s=yr(t.firestore,va),o=Ig(s);let l;return l=typeof(e=St(e))=="string"||e instanceof fd?Y2(o,"updateDoc",t._key,e,n,r):Q2(o,"updateDoc",t._key,e),Rg(s,[l.toMutation(t._key,Zn.exists(!0))])}function Tf(t){return Rg(yr(t.firestore,va),[new ig(t._key,Zn.none())])}function Rg(t,e){return function(r,s){const o=new zr;return r.asyncQueue.enqueueAndForget(async()=>k2(await j2(r),s,o)),o.promise}(Eg(t),e)}function aL(t,e,n){const r=n.docs.get(e._key),s=new E1(t);return new Is(t,s,e._key,r,new dl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pa=s})(fa),ea(new Ls("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new va(new QA(r.getProvider("auth-internal")),new JA(l,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(p.options.projectId,y)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ni(Fy,zy,e),Ni(Fy,zy,"esm2020")})();function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lL=T1,x1=new lu("auth","Firebase",T1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new qm("@firebase/auth");function uL(t,...e){Ah.logLevel<=Ie.WARN&&Ah.warn(`Auth (${fa}): ${t}`,...e)}function Bc(t,...e){Ah.logLevel<=Ie.ERROR&&Ah.error(`Auth (${fa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Lg(t,...e)}function gr(t,...e){return Lg(t,...e)}function I1(t,e,n){const r={...lL(),[e]:n};return new lu("auth","Firebase",r).create(e,{appName:t.name})}function Di(t){return I1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x1.create(t,...e)}function pe(t,e,...n){if(!t)throw Lg(e,...n)}function Dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bc(e),new Error(e)}function Gr(t,e){t||Dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cL(){return Vv()==="http:"||Vv()==="https:"}function Vv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cL()||CC()||"connection"in navigator)?navigator.onLine:!0}function dL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=IC()||AC()}get(){return hL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t,e){Gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mL=new gu(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qi(t,e,n,r,s={}){return P1(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=uu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return PC()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&da(t.emulatorConfig.host)&&(p.credentials="include"),S1.fetch()(await C1(t,t.config.apiHost,n,h),p)})}async function P1(t,e,n){t._canInitEmulator=!1;const r={...fL,...e};try{const s=new _L(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw vc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw vc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw vc(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw I1(t,y,p);Yn(t,y)}}catch(s){if(s instanceof Kr)throw s;Yn(t,"network-request-failed",{message:String(s)})}}async function _d(t,e,n,r,s={}){const o=await Qi(t,e,n,r,s);return"mfaPendingCredential"in o&&Yn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function C1(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?bg(t.config,s):`${t.config.apiScheme}://${s}`;return pL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function gL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),mL.get())})}}function vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gr(t,e,r);return s.customData._tokenResponse=n,s}function Fv(t){return t!==void 0&&t.enterprise!==void 0}class yL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vL(t,e){return Qi(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e){return Qi(t,"POST","/v1/accounts:delete",e)}async function kh(t,e){return Qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EL(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=Ng(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Cl(xf(s.auth_time)),issuedAtTime:Cl(xf(s.iat)),expirationTime:Cl(xf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function xf(t){return Number(t)*1e3}function Ng(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bc("JWT malformed, contained fewer than 3 sections"),null;try{const s=bE(n);return s?JSON.parse(s):(Bc("Failed to decode base64 JWT payload"),null)}catch(s){return Bc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zv(t){const e=Ng(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kr&&TL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var v;const e=t.auth,n=await t.getIdToken(),r=await tu(t,kh(e,{idToken:n}));pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?A1(s.providerUserInfo):[],l=SL(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new $p(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function IL(t){const e=St(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function A1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){const n=await P1(t,{},async()=>{const r=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await C1(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&da(t.emulatorConfig.host)&&(d.credentials="include"),S1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CL(t,e){return Qi(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await PL(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new Ho;return r&&(pe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new xL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $p(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EL(this,e)}reload(){return IL(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await tu(this,wL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:k,providerData:F,stsTokenManager:V}=n;pe(v&&V,e,"internal-error");const B=Ho.fromJSON(this.name,V);pe(typeof v=="string",e,"internal-error"),ai(r,e.name),ai(s,e.name),pe(typeof E=="boolean",e,"internal-error"),pe(typeof k=="boolean",e,"internal-error"),ai(o,e.name),ai(l,e.name),ai(h,e.name),ai(d,e.name),ai(p,e.name),ai(y,e.name);const b=new $n({uid:v,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:k,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:B,createdAt:p,lastLoginAt:y});return F&&Array.isArray(F)&&(b.providerData=F.map(P=>({...P}))),d&&(b._redirectEventId=d),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ho;s.updateFromServerResponse(n);const o=new $n({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?A1(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Ho;h.updateFromIdToken(r);const d=new $n({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new $p(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;function Vr(t){Gr(t instanceof Function,"Expected a class definition");let e=jv.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}k1.type="NONE";const Bv=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Wo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Uc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Uc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kh(this.auth,{idToken:e}).catch(()=>{});return n?$n._fromGetAccountInfoResponse(this.auth,n,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wo(Vr(Bv),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Vr(Bv);const l=Uc(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(l);if(y){let v;if(typeof y=="string"){const E=await kh(e,{idToken:y}).catch(()=>{});if(!E)break;v=await $n._fromGetAccountInfoResponse(e,E,y)}else v=$n._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Wo(o,e,r):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Wo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M1(e))return"Blackberry";if(D1(e))return"Webos";if(L1(e))return"Safari";if((e.includes("chrome/")||b1(e))&&!e.includes("edge/"))return"Chrome";if(O1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function R1(t=Bt()){return/firefox\//i.test(t)}function L1(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b1(t=Bt()){return/crios\//i.test(t)}function N1(t=Bt()){return/iemobile/i.test(t)}function O1(t=Bt()){return/android/i.test(t)}function M1(t=Bt()){return/blackberry/i.test(t)}function D1(t=Bt()){return/webos/i.test(t)}function Og(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AL(t=Bt()){var e;return Og(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kL(){return kC()&&document.documentMode===10}function V1(t=Bt()){return Og(t)||O1(t)||D1(t)||M1(t)||/windows phone/i.test(t)||N1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e=[]){let n;switch(t){case"Browser":n=Uv(Bt());break;case"Worker":n=`${Uv(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e={}){return Qi(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=6;class NL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??bL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hv(this),this.idTokenSubscription=new Hv(this),this.beforeStateQueue=new RL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kh(this,{idToken:e}),r=await $n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Wn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Di(this));const n=e?St(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LL(this),n=new NL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&uL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wa(t){return St(t)}class Hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ML(t){yd=t}function z1(t){return yd.loadJS(t)}function DL(){return yd.recaptchaEnterpriseScript}function VL(){return yd.gapiScript}function FL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zL{constructor(){this.enterprise=new jL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BL="recaptcha-enterprise",j1="NO_RECAPTCHA";class UL{constructor(e){this.type=BL,this.auth=wa(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{vL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new yL(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Fv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(j1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zL().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&Fv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=DL();d.length!==0&&(d+=h),z1(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Wv(t,e,n,r=!1,s=!1){const o=new UL(t);let l;if(s)l=j1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function $v(t,e,n,r,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Wv(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Wv(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t,e){const n=Zm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Rs(o,e??{}))return s;Yn(s,"already-initialized")}return n.initialize({options:e})}function WL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $L(t,e,n){const r=wa(t);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=B1(e),{host:l,port:h}=qL(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(Rs(p,r.config.emulator)&&Rs(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,da(l)?(DE(`${o}//${l}${d}`),VE("Auth",!0)):GL()}function B1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qL(t){const e=B1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:qv(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:qv(l)}}}function qv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,n){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function ZL(t,e){return Qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return _d(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e){return _d(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function YL(t,e){return _d(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Mg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $v(e,n,"signInWithPassword",KL);case"emailLink":return QL(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $v(e,r,"signUpPassword",ZL);case"emailLink":return YL(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e){return _d(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="http://localhost";class Os extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new Os(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:XL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eb(t){const e=al(ll(t)).link,n=e?al(ll(e)).deep_link_id:null,r=al(ll(t)).deep_link_id;return(r?al(ll(r)).link:null)||r||n||e||t}class Dg{constructor(e){const n=al(ll(e)),r=n.apiKey??null,s=n.oobCode??null,o=JL(n.mode??null);pe(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eb(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.providerId=Ea.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dg.parseLink(n);return pe(r,"argument-error"),nu._fromEmailAndCode(e,r.code,r.tenantId)}}Ea.PROVIDER_ID="password";Ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends U1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends _u{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Os._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gi.credential(n,r)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends _u{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends _u{constructor(){super("twitter.com")}static credential(e,n){return Os._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yi.credential(n,r)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await $n._fromIdTokenResponse(e,r,s),l=Gv(r);return new aa({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Gv(r);return new aa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Gv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Kr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Lh(e,n,r,s)}}function H1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(t,o,e,r):o})}async function tb(t,e,n=!1){const r=await tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return aa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e,n=!1){const{auth:r}=t;if(Wn(r.app))return Promise.reject(Di(r));const s="reauthenticate";try{const o=await tu(t,H1(r,s,e,t),n);pe(o.idToken,r,"internal-error");const l=Ng(o.idToken);pe(l,r,"internal-error");const{sub:h}=l;return pe(t.uid===h,r,"user-mismatch"),aa._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Yn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(t,e,n=!1){if(Wn(t.app))return Promise.reject(Di(t));const r="signIn",s=await H1(t,r,e),o=await aa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function rb(t,e){return W1(wa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(t){const e=wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sb(t,e,n){return Wn(t.app)?Promise.reject(Di(t)):rb(St(t),Ea.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ib(t),r})}function ob(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function ab(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function lb(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function ub(t){return St(t).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=1e3,hb=10;class q1 extends $1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);kL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hb):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q1.type="LOCAL";const db=q1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends $1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G1.type="SESSION";const Z1=G1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await fb(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Vg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function mb(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function gb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _b(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yb(){return K1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",vb=1,Nh="firebaseLocalStorage",Y1="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wd(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function wb(){const t=indexedDB.deleteDatabase(Q1);return new yu(t).toPromise()}function qp(){const t=indexedDB.open(Q1,vb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nh,{keyPath:Y1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await wb(),e(await qp()))})})}async function Zv(t,e,n){const r=wd(t,!0).put({[Y1]:e,value:n});return new yu(r).toPromise()}async function Eb(t,e){const n=wd(t,!1).get(e),r=await new yu(n).toPromise();return r===void 0?null:r.value}function Kv(t,e){const n=wd(t,!0).delete(e);return new yu(n).toPromise()}const Tb=800,xb=3;class X1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(yb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await gb(),!this.activeServiceWorker)return;this.sender=new pb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_b()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qp();return await Zv(e,bh,"1"),await Kv(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Eb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=wd(s,!1).getAll();return new yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X1.type="LOCAL";const Ib=X1;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e){return e?Vr(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Pb(t){return W1(t.auth,new Fg(t),t.bypassAuthState)}function Cb(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),nb(n,new Fg(t),t.bypassAuthState)}async function Ab(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),tb(n,new Fg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pb;case"linkViaPopup":case"linkViaRedirect":return Ab;case"reauthViaPopup":case"reauthViaRedirect":return Cb;default:Yn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new gu(2e3,1e4);class Oo extends J1{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kb.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="pendingRedirect",Hc=new Map;class Lb extends J1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const r=await bb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bb(t,e){const n=Mb(e),r=Ob(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Nb(t,e){Hc.set(t._key(),e)}function Ob(t){return Vr(t._redirectPersistence)}function Mb(t){return Uc(Rb,t.config.apiKey,t.name)}async function Db(t,e,n=!1){if(Wn(t.app))return Promise.reject(Di(t));const r=wa(t),s=Sb(r,e),l=await new Lb(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=10*60*1e3;class Fb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ex(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qv(e))}saveEventToCache(e){this.cachedEventUids.add(Qv(e)),this.lastProcessedEventTime=Date.now()}}function Qv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ex({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ex(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e={}){return Qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ub=/^https?/;async function Hb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jb(t);for(const n of e)try{if(Wb(n))return}catch{}Yn(t,"unauthorized-domain")}function Wb(t){const e=Wp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!Ub.test(n))return!1;if(Bb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new gu(3e4,6e4);function Yv(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qb(t){return new Promise((e,n)=>{var s,o,l;function r(){Yv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yv(),n(gr(t,"network-request-failed"))},timeout:$b.get()})}if((o=(s=_r().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=_r().gapi)!=null&&l.load)r();else{const h=FL("iframefcb");return _r()[h]=()=>{gapi.load?r():n(gr(t,"network-request-failed"))},z1(`${VL()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function Gb(t){return Wc=Wc||qb(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new gu(5e3,15e3),Kb="__/auth/iframe",Qb="emulator/auth/iframe",Yb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jb(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bg(e,Qb):`https://${t.config.authDomain}/${Kb}`,r={apiKey:e.apiKey,appName:t.name,v:fa},s=Xb.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${uu(r).slice(1)}`}async function eN(t){const e=await Gb(t),n=_r().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:Jb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yb,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=gr(t,"network-request-failed"),h=_r().setTimeout(()=>{o(l)},Zb.get());function d(){_r().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,rN=600,iN="_blank",sN="http://localhost";class Xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oN(t,e,n,r=nN,s=rN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...tN,width:r.toString(),height:s.toString(),top:o,left:l},p=Bt().toLowerCase();n&&(h=b1(p)?iN:n),R1(p)&&(e=e||sN,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[k,F])=>`${E}${k}=${F},`,"");if(AL(p)&&h!=="_self")return aN(e||"",h),new Xv(null);const v=window.open(e||"",h,y);pe(v,t,"popup-blocked");try{v.focus()}catch{}return new Xv(v)}function aN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="__/auth/handler",uN="emulator/auth/handler",cN=encodeURIComponent("fac");async function Jv(t,e,n,r,s,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fa,eventId:s};if(e instanceof U1){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",DC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof _u){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),p=d?`#${cN}=${encodeURIComponent(d)}`:"";return`${hN(t)}?${uu(h).slice(1)}${p}`}function hN({config:t}){return t.emulator?bg(t,uN):`https://${t.authDomain}/${lN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="webStorageSupport";class dN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z1,this._completeRedirectFn=Db,this._overrideRedirectResult=Nb}async _openPopup(e,n,r,s){var l;Gr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Jv(e,n,r,Wp(),s);return oN(e,o,Vg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Jv(e,n,r,Wp(),s);return mb(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Gr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eN(e),r=new Fb(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(If,{type:If},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[If];o!==void 0&&n(!!o),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return V1()||L1()||Og()}}const fN=dN;var ew="@firebase/auth",tw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gN(t){ea(new Ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;pe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},p=new OL(r,s,o,d);return WL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ea(new Ls("auth-internal",e=>{const n=wa(e.getProvider("auth").getImmediate());return(r=>new pN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(ew,tw,mN(t)),Ni(ew,tw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=5*60,yN=ME("authIdTokenMaxAge")||_N;let nw=null;const vN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yN)return;const s=n==null?void 0:n.token;nw!==s&&(nw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wN(t=BE()){const e=Zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HL(t,{popupRedirectResolver:fN,persistence:[Ib,db,Z1]}),r=ME("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=vN(o.toString());ab(n,l,()=>l(n.currentUser)),ob(n,h=>l(h))}}const s=NE("auth");return s&&$L(n,`http://${s}`),n}function EN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ML({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=gr("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",EN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gN("Browser");var TN="firebase",xN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(TN,xN,"app");const IN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},tx=jE(IN),qe=W2(tx),Sf=wN(tx),Dt={FACILITIES:"facilities",HITS:"hits"},SN=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[y,v]=q.useState([]),[E,k]=q.useState(!1),[F,V]=q.useState(null),[B,b]=q.useState(null),[P,N]=q.useState({}),[$,X]=q.useState(!1),[J,C]=q.useState(null),[S,I]=q.useState(null),[A,O]=q.useState({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),[D,R]=q.useState({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),be=$m();q.useEffect(()=>{const H=lb(Sf,te=>{te?(e(!0),h(null)):e(!1)});return()=>H()},[]),q.useEffect(()=>{t&&_t()},[t]);const _t=async()=>{k(!0),V(null);try{if(!qe)throw new Error("Firebase not initialized");const H=await di(hi(qe,Dt.FACILITIES)),te=await Promise.all(H.docs.map(async ie=>{var un,Yi;const Fe=Fc(hi(qe,Dt.HITS),zc("facilityId","==",parseInt(ie.id))),vn=(await di(Fe)).docs.map(Xi=>({id:parseInt(Xi.id),...Xi.data()})),ot=ie.data(),ln=((un=ot.location)==null?void 0:un.latitude)??ot.latitude,wn=((Yi=ot.location)==null?void 0:Yi.longitude)??ot.longitude;return{id:parseInt(ie.id),name:ot.name,type:ot.type,capacity:ot.capacity,gasCapacity:ot.gasCapacity,latitude:ln,longitude:wn,status:ot.status,hit:ot.hit,hits:vn}}));v(te)}catch(H){console.error("Error fetching facilities:",H),V("Failed to load facilities from Firebase.")}finally{k(!1)}},et=async H=>{H.preventDefault(),h(null),k(!0);try{await sb(Sf,n,s)}catch(te){console.error("Login error:",te),te.code==="auth/invalid-credential"?h("Invalid email or password"):te.code==="auth/user-not-found"?h("No account found with this email"):te.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{k(!1)}},an=async()=>{try{await ub(Sf),be("/")}catch(H){console.error("Logout error:",H)}},Z=async H=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!qe)throw new Error("Firebase not initialized");const te=Fc(hi(qe,Dt.HITS),zc("facilityId","==",H)),ie=await di(te);for(const Fe of ie.docs)await Tf(Fe.ref);await Tf(li(qe,Dt.FACILITIES,H.toString())),_t()}catch(te){console.error("Error deleting facility:",te),alert("Failed to delete facility")}},he=H=>{b(H.id),N(H)},ee=async()=>{if(B)try{if(!qe)throw new Error("Firebase not initialized");const H={name:P.name,type:P.type,capacity:P.capacity,gasCapacity:P.gasCapacity,status:P.status,hit:P.hit};P.latitude!==void 0&&P.longitude!==void 0&&(H.location={latitude:P.latitude,longitude:P.longitude});const te=li(qe,Dt.FACILITIES,B.toString());await Ef(te,H),b(null),N({}),_t()}catch(H){console.error("Error updating facility:",H),alert("Failed to update facility")}},de=async H=>{H.preventDefault();try{if(!qe)throw new Error("Firebase not initialized");const Fe=(await di(hi(qe,Dt.FACILITIES))).docs.reduce((vn,ot)=>{const ln=parseInt(ot.id);return ln>vn?ln:vn},0)+1,tt={id:Fe,name:D.name,type:D.type,capacity:D.capacity,location:{latitude:D.latitude,longitude:D.longitude},status:D.status,hit:!1,hits:[]};D.gasCapacity&&(tt.gasCapacity=D.gasCapacity),await Dv(li(qe,Dt.FACILITIES,Fe.toString()),tt),X(!1),R({name:"",type:"Refinery",capacity:0,latitude:0,longitude:0,status:"OPERATIONAL",hit:!1}),_t()}catch(te){console.error("Error adding facility:",te),alert("Failed to add facility")}},we=async(H,te)=>{te.preventDefault();try{if(!qe)throw new Error("Firebase not initialized");const tt=(await di(hi(qe,Dt.HITS))).docs.reduce((ln,wn)=>{const un=parseInt(wn.id);return un>ln?un:ln},0)+1,vn={...A,id:tt,facilityId:H};await Dv(li(qe,Dt.HITS,tt.toString()),vn);const ot=li(qe,Dt.FACILITIES,H.toString());await Ef(ot,{hit:!0}),C(null),O({date:new Date().toISOString().split("T")[0],videoLink:"",expectedRepairTime:0,notes:""}),_t()}catch(ie){console.error("Error adding hit:",ie),alert("Failed to add hit record")}},$e=async(H,te)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!qe)throw new Error("Firebase not initialized");await Tf(li(qe,Dt.HITS,te.toString()));const ie=Fc(hi(qe,Dt.HITS),zc("facilityId","==",H));if((await di(ie)).empty){const tt=li(qe,Dt.FACILITIES,H.toString());await Ef(tt,{hit:!1})}_t()}catch(ie){console.error("Error deleting hit:",ie),alert("Failed to delete hit record")}};return t?T.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[T.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[T.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[T.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),T.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),T.jsx("button",{onClick:an,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),T.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[T.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[T.jsx("span",{style:{fontSize:"20px"},children:""}),T.jsx("span",{children:"Facilities"})]}),T.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[T.jsx("span",{style:{fontSize:"20px"},children:""}),T.jsx("span",{children:"Hit Records"})]})]}),T.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:T.jsx("button",{onClick:()=>be("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" View Map"})})]}),T.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[T.jsxs("div",{children:[T.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),T.jsxs("p",{style:{color:"#999"},children:["Total: ",y.length," facilities"]})]}),T.jsx("button",{onClick:()=>X(!$),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:$?"Cancel":"+ Add Facility"})]}),$&&T.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #333"},children:[T.jsx("h2",{style:{marginBottom:"20px"},children:"Add New Facility"}),T.jsxs("form",{onSubmit:de,style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Name"}),T.jsx("input",{type:"text",required:!0,value:D.name,onChange:H=>R({...D,name:H.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Type"}),T.jsxs("select",{value:D.type,onChange:H=>R({...D,type:H.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[T.jsx("option",{value:"Refinery",children:"Refinery"}),T.jsx("option",{value:"Extraction",children:"Extraction"}),T.jsx("option",{value:"Storage",children:"Storage"})]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Capacity (barrels/day)"}),T.jsx("input",{type:"number",required:!0,value:D.capacity,onChange:H=>R({...D,capacity:Number(H.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Gas Capacity (million m/year) - Optional"}),T.jsx("input",{type:"number",value:D.gasCapacity||"",onChange:H=>R({...D,gasCapacity:H.target.value?Number(H.target.value):void 0}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Status"}),T.jsxs("select",{value:D.status,onChange:H=>R({...D,status:H.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[T.jsx("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),T.jsx("option",{value:"HIT",children:"HIT"})]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Latitude"}),T.jsx("input",{type:"number",step:"any",required:!0,value:D.latitude,onChange:H=>R({...D,latitude:Number(H.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Longitude"}),T.jsx("input",{type:"number",step:"any",required:!0,value:D.longitude,onChange:H=>R({...D,longitude:Number(H.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsx("div",{style:{gridColumn:"1 / -1"},children:T.jsx("button",{type:"submit",style:{padding:"10px 30px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Create Facility"})})]})]}),E&&T.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),F&&T.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!E&&!F&&T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[T.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[T.jsx("thead",{children:T.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Oil Capacity"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),T.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),T.jsx("tbody",{children:y.map(H=>{var te;return T.jsx(qo.Fragment,{children:T.jsx("tr",{style:{borderBottom:"1px solid #333"},children:B===H.id?T.jsxs(T.Fragment,{children:[T.jsx("td",{style:{padding:"15px"},children:H.id}),T.jsx("td",{style:{padding:"15px"},children:T.jsx("input",{type:"text",value:P.name,onChange:ie=>N({...P,name:ie.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),T.jsx("td",{style:{padding:"15px"},children:T.jsxs("select",{value:P.type,onChange:ie=>N({...P,type:ie.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[T.jsx("option",{value:"Refinery",children:"Refinery"}),T.jsx("option",{value:"Extraction",children:"Extraction"}),T.jsx("option",{value:"Storage",children:"Storage"})]})}),T.jsx("td",{style:{padding:"15px"},children:T.jsx("input",{type:"number",value:P.capacity,onChange:ie=>N({...P,capacity:Number(ie.target.value)}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),T.jsx("td",{style:{padding:"15px"},children:T.jsx("input",{type:"number",value:P.gasCapacity||"",onChange:ie=>N({...P,gasCapacity:ie.target.value?Number(ie.target.value):void 0}),placeholder:"Optional",style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})}),T.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:H.latitude!=null&&H.longitude!=null?`${H.latitude.toFixed(4)}, ${H.longitude.toFixed(4)}`:"N/A"}),T.jsx("td",{style:{padding:"15px"},children:T.jsxs("select",{value:P.status,onChange:ie=>N({...P,status:ie.target.value}),style:{width:"100%",padding:"5px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[T.jsx("option",{value:"OPERATIONAL",children:"OPERATIONAL"}),T.jsx("option",{value:"HIT",children:"HIT"})]})}),T.jsxs("td",{style:{padding:"15px"},children:[T.jsx("button",{onClick:ee,style:{padding:"5px 15px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px"},children:"Save"}),T.jsx("button",{onClick:()=>b(null),style:{padding:"5px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("td",{style:{padding:"15px"},children:H.id}),T.jsx("td",{style:{padding:"15px"},children:H.name}),T.jsx("td",{style:{padding:"15px"},children:H.type}),T.jsx("td",{style:{padding:"15px"},children:((te=H.capacity)==null?void 0:te.toLocaleString())||0}),T.jsx("td",{style:{padding:"15px"},children:H.gasCapacity?H.gasCapacity.toLocaleString():"-"}),T.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:H.latitude!=null&&H.longitude!=null?`${H.latitude.toFixed(4)}, ${H.longitude.toFixed(4)}`:"N/A"}),T.jsx("td",{style:{padding:"15px"},children:T.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:H.hit?"#f44336":"#4CAF50",color:"#fff"},children:H.status})}),T.jsxs("td",{style:{padding:"15px"},children:[T.jsx("button",{onClick:()=>he(H),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),T.jsx("button",{onClick:()=>Z(H.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})})},H.id)})})]}),y.length===0&&T.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[T.jsxs("div",{children:[T.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),T.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),T.jsx("button",{onClick:()=>C(J===-1?null:-1),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:J===-1?"Cancel":"+ Add New Hit"})]}),J===-1&&T.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[T.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),T.jsxs("form",{onSubmit:H=>{H.preventDefault();const te=parseInt(H.target.facilityId.value);we(te,H)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),T.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[T.jsx("option",{value:"",children:"-- Choose a facility --"}),y.map(H=>T.jsxs("option",{value:H.id,children:[H.name," (",H.type,") ",H.hits&&H.hits.length>0?`- ${H.hits.length} existing hit${H.hits.length>1?"s":""}`:""]},H.id))]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),T.jsx("input",{type:"date",required:!0,value:A.date,onChange:H=>O({...A,date:H.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),T.jsx("input",{type:"number",value:A.expectedRepairTime,onChange:H=>O({...A,expectedRepairTime:Number(H.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Video Link"}),T.jsx("input",{type:"url",value:A.videoLink,onChange:H=>O({...A,videoLink:H.target.value}),placeholder:"https://...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),T.jsx("textarea",{value:A.notes,onChange:H=>O({...A,notes:H.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),T.jsx("div",{style:{gridColumn:"1 / -1"},children:T.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Add Hit Record"})})]})]}),E&&T.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),F&&T.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!E&&!F&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{display:"grid",gap:"20px"},children:y.filter(H=>H.hits&&H.hits.length>0).map(H=>T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[T.jsxs("div",{children:[T.jsx("h2",{style:{margin:0,color:"#dc2626"},children:H.name}),T.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[H.type,"  ",H.hits.length," hit record",H.hits.length!==1?"s":""]})]}),T.jsx("button",{onClick:()=>C(J===H.id?null:H.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:J===H.id?"Cancel":"+ Add Hit"})]}),J===H.id&&T.jsxs("form",{onSubmit:te=>we(H.id,te),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),T.jsx("input",{type:"date",required:!0,value:A.date,onChange:te=>O({...A,date:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),T.jsx("input",{type:"number",value:A.expectedRepairTime,onChange:te=>O({...A,expectedRepairTime:Number(te.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Video Link"}),T.jsx("input",{type:"url",value:A.videoLink,onChange:te=>O({...A,videoLink:te.target.value}),placeholder:"https://...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),T.jsx("textarea",{value:A.notes,onChange:te=>O({...A,notes:te.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),T.jsx("div",{style:{gridColumn:"1 / -1"},children:T.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:" Save Hit Record"})})]}),H.hits&&H.hits.length>0&&T.jsx("div",{style:{display:"grid",gap:"10px"},children:H.hits.map(te=>T.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),T.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",te.id]})]}),T.jsxs("div",{children:[T.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),T.jsx("div",{style:{color:"#fff"},children:new Date(te.date).toLocaleDateString()})]}),te.expectedRepairTime&&T.jsxs("div",{children:[T.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),T.jsxs("div",{style:{color:"#FF9800"},children:[te.expectedRepairTime," days"]})]})]}),te.videoLink&&T.jsx("div",{style:{marginTop:"10px"},children:T.jsx("a",{href:te.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:" View Video"})}),te.notes&&T.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[T.jsx("strong",{children:"Notes:"})," ",te.notes]})]}),T.jsx("button",{onClick:()=>$e(H.id,te.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})},te.id))})]},H.id))}),y.filter(H=>H.hits&&H.hits.length>0).length===0&&T.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[T.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),T.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),T.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):T.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[T.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&T.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),T.jsxs("form",{onSubmit:et,children:[T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),T.jsx("input",{type:"email",value:n,onChange:H=>r(H.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsxs("div",{style:{marginBottom:"30px"},children:[T.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),T.jsx("input",{type:"password",value:s,onChange:H=>o(H.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),T.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),T.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})};function nx(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const PN=1;function CN(t){return Object.freeze({__version:PN,map:t})}function rx(t,e){return Object.freeze({...t,...e})}const ix=q.createContext(null),sx=ix.Provider;function zg(){const t=q.useContext(ix);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function ox(t){function e(n,r){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(r,()=>s),n.children==null?null:qo.createElement(sx,{value:o},n.children)}return q.forwardRef(e)}function AN(t){function e(n,r){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(r,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?_E.createPortal(n.children,h):null}return q.forwardRef(e)}function kN(t){function e(n,r){const{instance:s}=t(n).current;return q.useImperativeHandle(r,()=>s),null}return q.forwardRef(e)}function jg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Ed(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function RN(t,e){return function(r,s){const o=zg(),l=t(Ed(r,o),o);return nx(o.map,r.attribution),jg(l.current,r.eventHandlers),e(l.current,o,r,s),l}}var Gp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ux,function(n){var r="1.9.4";function s(i){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)i[a]=g[a]}return i}var o=Object.create||function(){function i(){}return function(a){return i.prototype=a,new i}}();function l(i,a){var c=Array.prototype.slice;if(i.bind)return i.bind.apply(i,c.call(arguments,1));var f=c.call(arguments,2);return function(){return i.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function p(i,a,c){var f,g,w,M;return M=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(i.apply(c,arguments),setTimeout(M,a),f=!0)},w}function y(i,a,c){var f=a[1],g=a[0],w=f-g;return i===f&&c?i:((i-g)%w+w)%w+g}function v(){return!1}function E(i,a){if(a===!1)return i;var c=Math.pow(10,a===void 0?6:a);return Math.round(i*c)/c}function k(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function F(i){return k(i).split(/\s+/)}function V(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var c in a)i.options[c]=a[c];return i.options}function B(i,a,c){var f=[];for(var g in i)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(i[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function P(i,a){return i.replace(b,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function $(i,a){for(var c=0;c<i.length;c++)if(i[c]===a)return c;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var C=0;function S(i){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(i,c)}var I=window.requestAnimationFrame||J("RequestAnimationFrame")||S,A=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function O(i,a,c){if(c&&I===S)i.call(a);else return I.call(window,l(i,a))}function D(i){i&&A.call(window,i)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:y,falseFn:v,formatNum:E,trim:k,splitWords:F,setOptions:V,getParamString:B,template:P,isArray:N,indexOf:$,emptyImageUrl:X,requestFn:I,cancelFn:A,requestAnimFrame:O,cancelAnimFrame:D};function be(){}be.extend=function(i){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return i.statics&&s(a,i.statics),i.includes&&(_t(i.includes),s.apply(null,[f].concat(i.includes))),s(f,i),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,M=f._initHooks.length;w<M;w++)f._initHooks[w].call(this)}},a},be.include=function(i){var a=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},be.mergeOptions=function(i){return s(this.prototype.options,i),this},be.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),c=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function _t(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=N(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var et={on:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a);else{i=F(i);for(var g=0,w=i.length;g<w;g++)this._on(i[g],a,c)}return this},off:function(i,a,c){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],a);else{i=F(i);for(var g=arguments.length===1,w=0,M=i.length;w<M;w++)g?this._off(i[w]):this._off(i[w],a,c)}return this},_on:function(i,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(g)}},_off:function(i,a,c){var f,g,w;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=v;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var M=this._listens(i,a,c);if(M!==!1){var j=f[M];this._firingCount&&(j.fn=v,this._events[i]=f=f.slice()),f.splice(M,1)}}},fire:function(i,a,c){if(!this.listens(i,c))return this;var f=s({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[i];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,M=g.length;w<M;w++){var j=g[w],W=j.fn;j.once&&this.off(i,W,j.ctx),W.call(j.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(i,a,c,f){typeof i!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[i];if(w&&w.length&&this._listens(i,g,c)!==!1)return!0;if(f){for(var M in this._eventParents)if(this._eventParents[M].listens(i,a,c,f))return!0}return!1},_listens:function(i,a,c){if(!this._events)return!1;var f=this._events[i]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(i,a,c){if(typeof i=="object")for(var f in i)this._on(f,i[f],a,!0);else{i=F(i);for(var g=0,w=i.length;g<w;g++)this._on(i[g],a,c,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[d(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[d(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};et.addEventListener=et.on,et.removeEventListener=et.clearAllEventListeners=et.off,et.addOneTimeEventListener=et.once,et.fireEvent=et.fire,et.hasEventListeners=et.listens;var an=be.extend(et);function Z(i,a,c){this.x=c?Math.round(i):i,this.y=c?Math.round(a):a}var he=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(i){return this.clone()._add(ee(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ee(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new Z(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new Z(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(i){i=ee(i);var a=i.x-this.x,c=i.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(i){return i=ee(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ee(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function ee(i,a,c){return i instanceof Z?i:N(i)?new Z(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new Z(i.x,i.y):new Z(i,a,c)}function de(i,a){if(i)for(var c=a?[i,a]:i,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(i){var a,c;if(!i)return this;if(i instanceof Z||typeof i[0]=="number"||"x"in i)a=c=ee(i);else if(i=we(i),a=i.min,c=i.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(i){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,c;return typeof i[0]=="number"||i instanceof Z?i=ee(i):i=we(i),i instanceof de?(a=i.min,c=i.max):a=c=i,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(i){i=we(i);var a=this.min,c=this.max,f=i.min,g=i.max,w=g.x>=a.x&&f.x<=c.x,M=g.y>=a.y&&f.y<=c.y;return w&&M},overlaps:function(i){i=we(i);var a=this.min,c=this.max,f=i.min,g=i.max,w=g.x>a.x&&f.x<c.x,M=g.y>a.y&&f.y<c.y;return w&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*i,g=Math.abs(a.y-c.y)*i;return we(ee(a.x-f,a.y-g),ee(c.x+f,c.y+g))},equals:function(i){return i?(i=we(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function we(i,a){return!i||i instanceof de?i:new de(i,a)}function $e(i,a){if(i)for(var c=a?[i,a]:i,f=0,g=c.length;f<g;f++)this.extend(c[f])}$e.prototype={extend:function(i){var a=this._southWest,c=this._northEast,f,g;if(i instanceof te)f=i,g=i;else if(i instanceof $e){if(f=i._southWest,g=i._northEast,!f||!g)return this}else return i?this.extend(ie(i)||H(i)):this;return!a&&!c?(this._southWest=new te(f.lat,f.lng),this._northEast=new te(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(i){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*i,g=Math.abs(a.lng-c.lng)*i;return new $e(new te(a.lat-f,a.lng-g),new te(c.lat+f,c.lng+g))},getCenter:function(){return new te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new te(this.getNorth(),this.getWest())},getSouthEast:function(){return new te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof te||"lat"in i?i=ie(i):i=H(i);var a=this._southWest,c=this._northEast,f,g;return i instanceof $e?(f=i.getSouthWest(),g=i.getNorthEast()):f=g=i,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(i){i=H(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),g=i.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,M=g.lng>=a.lng&&f.lng<=c.lng;return w&&M},overlaps:function(i){i=H(i);var a=this._southWest,c=this._northEast,f=i.getSouthWest(),g=i.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,M=g.lng>a.lng&&f.lng<c.lng;return w&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=H(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function H(i,a){return i instanceof $e?i:new $e(i,a)}function te(i,a,c){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,c!==void 0&&(this.alt=+c)}te.prototype={equals:function(i,a){if(!i)return!1;i=ie(i);var c=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return c<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return tt.distance(this,ie(i))},wrap:function(){return tt.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,c=a/Math.cos(Math.PI/180*this.lat);return H([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new te(this.lat,this.lng,this.alt)}};function ie(i,a,c){return i instanceof te?i:N(i)&&typeof i[0]!="object"?i.length===3?new te(i[0],i[1],i[2]):i.length===2?new te(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new te(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new te(i,a,c)}var Fe={latLngToPoint:function(i,a){var c=this.projection.project(i),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(i,a){var c=this.scale(a),f=this.transformation.untransform(i,c);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(i),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?y(i.lng,this.wrapLng,!0):i.lng,c=this.wrapLat?y(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new te(c,a,f)},wrapLatLngBounds:function(i){var a=i.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return i;var w=i.getSouthWest(),M=i.getNorthEast(),j=new te(w.lat-f,w.lng-g),W=new te(M.lat-f,M.lng-g);return new $e(j,W)}},tt=s({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var c=Math.PI/180,f=i.lat*c,g=a.lat*c,w=Math.sin((a.lat-i.lat)*c/2),M=Math.sin((a.lng-i.lng)*c/2),j=w*w+Math.cos(f)*Math.cos(g)*M*M,W=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*W}}),vn=6378137,ot={R:vn,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,i.lat),-c),g=Math.sin(f*a);return new Z(this.R*i.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(i){var a=180/Math.PI;return new te((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:function(){var i=vn*Math.PI;return new de([-i,-i],[i,i])}()};function ln(i,a,c,f){if(N(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=c,this._d=f}ln.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new Z((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function wn(i,a,c,f){return new ln(i,a,c,f)}var un=s({},tt,{code:"EPSG:3857",projection:ot,transformation:function(){var i=.5/(Math.PI*ot.R);return wn(i,.5,-i,.5)}()}),Yi=s({},un,{code:"EPSG:900913"});function Xi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Us(i,a){var c="",f,g,w,M,j,W;for(f=0,w=i.length;f<w;f++){for(j=i[f],g=0,M=j.length;g<M;g++)W=j[g],c+=(g?"L":"M")+W.x+" "+W.y;c+=a?ue.svg?"z":"x":""}return c||"M0 0"}var Ji=document.documentElement.style,es="ActiveXObject"in window,yt=es&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Qr=Kt("webkit"),vu=Kt("android"),xa=Kt("android 2")||Kt("android 3"),Id=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ts=vu&&Kt("Google")&&Id<537&&!("AudioNode"in window),Hs=!!window.opera,Ia=!vt&&Kt("chrome"),Ws=Kt("gecko")&&!Qr&&!Hs&&!es,Sd=!Ia&&Kt("safari"),wu=Kt("phantom"),Sa="OTransition"in Ji,Eu=navigator.platform.indexOf("Win")===0,Yr=es&&"transition"in Ji,ns="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xa,$s="MozPerspective"in Ji,wr=!window.L_DISABLE_3D&&(Yr||ns||$s)&&!Sa&&!wu,Xr=typeof orientation<"u"||Kt("mobile"),qs=Xr&&Qr,Tu=Xr&&ns,Jr=!window.PointerEvent&&window.MSPointerEvent,Pa=!!(window.PointerEvent||Jr),wt="ontouchstart"in window||!!window.TouchEvent,xu=!window.L_NO_TOUCH&&(wt||Pa),rs=Xr&&Hs,is=Xr&&Ws,Pd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cd=function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return i}(),ei=function(){return!!document.createElement("canvas").getContext}(),Ca=!!(document.createElementNS&&Xi("svg").createSVGRect),Ad=!!Ca&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gs=!Ca&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Iu=navigator.platform.indexOf("Mac")===0,Su=navigator.platform.indexOf("Linux")===0;function Kt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ue={ie:es,ielt9:yt,edge:vt,webkit:Qr,android:vu,android23:xa,androidStock:ts,opera:Hs,chrome:Ia,gecko:Ws,safari:Sd,phantom:wu,opera12:Sa,win:Eu,ie3d:Yr,webkit3d:ns,gecko3d:$s,any3d:wr,mobile:Xr,mobileWebkit:qs,mobileWebkit3d:Tu,msPointer:Jr,pointer:Pa,touch:xu,touchNative:wt,mobileOpera:rs,mobileGecko:is,retina:Pd,passiveEvents:Cd,canvas:ei,svg:Ca,vml:Gs,inlineSvg:Ad,mac:Iu,linux:Su},Pu=ue.msPointer?"MSPointerDown":"pointerdown",Mn=ue.msPointer?"MSPointerMove":"pointermove",Aa=ue.msPointer?"MSPointerUp":"pointerup",ka=ue.msPointer?"MSPointerCancel":"pointercancel",ss={touchstart:Pu,touchmove:Mn,touchend:Aa,touchcancel:ka},Zs={touchstart:Ra,touchmove:En,touchend:En,touchcancel:En},Er={},Cu=!1;function Au(i,a,c){return a==="touchstart"&&os(),Zs[a]?(c=Zs[a].bind(this,c),i.addEventListener(ss[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function kd(i,a,c){if(!ss[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(ss[a],c,!1)}function Ks(i){Er[i.pointerId]=i}function ku(i){Er[i.pointerId]&&(Er[i.pointerId]=i)}function Qs(i){delete Er[i.pointerId]}function os(){Cu||(document.addEventListener(Pu,Ks,!0),document.addEventListener(Mn,ku,!0),document.addEventListener(Aa,Qs,!0),document.addEventListener(ka,Qs,!0),Cu=!0)}function En(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Er)a.touches.push(Er[c]);a.changedTouches=[a],i(a)}}function Ra(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&at(a),En(i,a)}function Rd(i){var a={},c,f;for(f in i)c=i[f],a[f]=c&&c.bind?c.bind(i):c;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ru=200;function Lu(i,a){i.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var M=Ma(w);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var j=Date.now();j-c<=Ru?(f++,f===2&&a(Rd(w))):f=1,c=j}}}return i.addEventListener("click",g),{dblclick:a,simDblclick:g}}function bu(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var as=Ys(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Tr=Ys(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),La=Tr==="webkitTransition"||Tr==="OTransition"?Tr+"End":"transitionend";function ba(i){return typeof i=="string"?document.getElementById(i):i}function ti(i,a){var c=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);c=f?f[a]:null}return c==="auto"?null:c}function Ce(i,a,c){var f=document.createElement(i);return f.className=a||"",c&&c.appendChild(f),f}function Re(i){var a=i.parentNode;a&&a.removeChild(i)}function Ut(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Tn(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function xn(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function ls(i,a){if(i.classList!==void 0)return i.classList.contains(a);var c=Xn(i);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ae(i,a){if(i.classList!==void 0)for(var c=F(a),f=0,g=c.length;f<g;f++)i.classList.add(c[f]);else if(!ls(i,a)){var w=Xn(i);xr(i,(w?w+" ":"")+a)}}function ze(i,a){i.classList!==void 0?i.classList.remove(a):xr(i,k((" "+Xn(i)+" ").replace(" "+a+" "," ")))}function xr(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function Xn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Qt(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&Nu(i,a)}function Nu(i,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=i.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):i.style.filter+=" progid:"+f+"(opacity="+a+")"}function Ys(i){for(var a=document.documentElement.style,c=0;c<i.length;c++)if(i[c]in a)return i[c];return!1}function Ir(i,a,c){var f=a||new Z(0,0);i.style[as]=(ue.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(i,a){i._leaflet_pos=a,ue.any3d?Ir(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Sr(i){return i._leaflet_pos||new Z(0,0)}var Dn,cn,Xs;if("onselectstart"in document)Dn=function(){ge(window,"selectstart",at)},cn=function(){De(window,"selectstart",at)};else{var ni=Ys(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Dn=function(){if(ni){var i=document.documentElement.style;Xs=i[ni],i[ni]="none"}},cn=function(){ni&&(document.documentElement.style[ni]=Xs,Xs=void 0)}}function Js(){ge(window,"dragstart",at)}function eo(){De(window,"dragstart",at)}var us,Jn;function Na(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(to(),us=i,Jn=i.style.outlineStyle,i.style.outlineStyle="none",ge(window,"keydown",to))}function to(){us&&(us.style.outlineStyle=Jn,us=void 0,Jn=void 0,De(window,"keydown",to))}function Ou(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function In(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var Ld={__proto__:null,TRANSFORM:as,TRANSITION:Tr,TRANSITION_END:La,get:ba,getStyle:ti,create:Ce,remove:Re,empty:Ut,toFront:Tn,toBack:xn,hasClass:ls,addClass:ae,removeClass:ze,setClass:xr,getClass:Xn,setOpacity:Qt,testProp:Ys,setTransform:Ir,setPosition:Xe,getPosition:Sr,get disableTextSelection(){return Dn},get enableTextSelection(){return cn},disableImageDrag:Js,enableImageDrag:eo,preventOutline:Na,restoreOutline:to,getSizedParentNode:Ou,getScale:In};function ge(i,a,c,f){if(a&&typeof a=="object")for(var g in a)no(i,g,a[g],c);else{a=F(a);for(var w=0,M=a.length;w<M;w++)no(i,a[w],c,f)}return this}var Ht="_leaflet_events";function De(i,a,c,f){if(arguments.length===1)ri(i),delete i[Ht];else if(a&&typeof a=="object")for(var g in a)cs(i,g,a[g],c);else if(a=F(a),arguments.length===2)ri(i,function(j){return $(a,j)!==-1});else for(var w=0,M=a.length;w<M;w++)cs(i,a[w],c,f);return this}function ri(i,a){for(var c in i[Ht]){var f=c.split(/\d/)[0];(!a||a(f))&&cs(i,f,null,null,c)}}var Pr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function no(i,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(i[Ht]&&i[Ht][g])return this;var w=function(j){return c.call(f||i,j||window.event)},M=w;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?w=Au(i,a,w):ue.touch&&a==="dblclick"?w=Lu(i,w):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(Pr[a]||a,w,ue.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(j){j=j||window.event,Va(i,j)&&M(j)},i.addEventListener(Pr[a],w,!1)):i.addEventListener(a,M,!1):i.attachEvent("on"+a,w),i[Ht]=i[Ht]||{},i[Ht][g]=w}function cs(i,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=i[Ht]&&i[Ht][g];if(!w)return this;!ue.touchNative&&ue.pointer&&a.indexOf("touch")===0?kd(i,a,w):ue.touch&&a==="dblclick"?bu(i,w):"removeEventListener"in i?i.removeEventListener(Pr[a]||a,w,!1):i.detachEvent("on"+a,w),i[Ht][g]=null}function Ne(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Oa(i){return no(i,"wheel",Ne),this}function hs(i){return ge(i,"mousedown touchstart dblclick contextmenu",Ne),i._leaflet_disable_click=!0,this}function at(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function er(i){return at(i),Ne(i),this}function Ma(i){if(i.composedPath)return i.composedPath();for(var a=[],c=i.target;c;)a.push(c),c=c.parentNode;return a}function ds(i,a){if(!a)return new Z(i.clientX,i.clientY);var c=In(a),f=c.boundingClientRect;return new Z((i.clientX-f.left)/c.x-a.clientLeft,(i.clientY-f.top)/c.y-a.clientTop)}var tr=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Da(i){return ue.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/tr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Va(i,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==i;)c=c.parentNode}catch{return!1}return c!==i}var fs={__proto__:null,on:ge,off:De,stopPropagation:Ne,disableScrollPropagation:Oa,disableClickPropagation:hs,preventDefault:at,stop:er,getPropagationPath:Ma,getMousePosition:ds,getWheelDelta:Da,isExternalTarget:Va,addListener:ge,removeListener:De},Fa=an.extend({run:function(i,a,c,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Sr(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var c=this._startPos.add(this._offset.multiplyBy(i));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ee=an.extend({options:{crs:un,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ie(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Tr&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,La,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(ie(i),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,c.zoom):this._tryAnimatedPan(i,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=i instanceof Z?i:this.latLngToContainerPoint(i),M=w.subtract(g).multiplyBy(1-1/f),j=this.containerPointToLatLng(g.add(M));return this.setView(j,a,{zoom:c})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():H(i);var c=ee(a.paddingTopLeft||a.padding||[0,0]),f=ee(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(i,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:i.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),M=this.project(i.getSouthWest(),g),j=this.project(i.getNorthEast(),g),W=this.unproject(M.add(j).divideBy(2).add(w),g);return{center:W,zoom:g}},fitBounds:function(i,a){if(i=H(i),!i.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(i,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=ee(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,c){if(c=c||{},c.animate===!1||!ue.any3d)return this.setView(i,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(i),w=this.getSize(),M=this._zoom;i=ie(i),a=a===void 0?M:a;var j=Math.max(w.x,w.y),W=j*this.getZoomScale(M,a),Q=g.distanceTo(f)||1,se=1.42,fe=se*se;function Te(lt){var Qu=lt?-1:1,Vx=lt?W:j,Fx=W*W-j*j+Qu*fe*fe*Q*Q,zx=2*Vx*fe*Q,Dd=Fx/zx,l_=Math.sqrt(Dd*Dd+1)-Dd,jx=l_<1e-9?-18:Math.log(l_);return jx}function Wt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function Et(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Cn(lt){return Wt(lt)/Et(lt)}var Xt=Te(0);function go(lt){return j*(Et(Xt)/Et(Xt+se*lt))}function Nx(lt){return j*(Et(Xt)*Cn(Xt+se*lt)-Wt(Xt))/fe}function Ox(lt){return 1-Math.pow(1-lt,1.5)}var Mx=Date.now(),o_=(Te(1)-Xt)/se,Dx=c.duration?1e3*c.duration:1e3*o_*.8;function a_(){var lt=(Date.now()-Mx)/Dx,Qu=Ox(lt)*o_;lt<=1?(this._flyToFrame=O(a_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(Nx(Qu)/Q)),M),this.getScaleZoom(j/go(Qu),M),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),a_.call(this),this},flyToBounds:function(i,a){var c=this._getBoundsCenterZoom(i,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(i){return i=H(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,H(i));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var c=ee(a.paddingTopLeft||a.padding||[0,0]),f=ee(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(i),M=this.getPixelBounds(),j=we([M.min.add(c),M.max.subtract(f)]),W=j.getSize();if(!j.contains(w)){this._enforcingBounds=!0;var Q=w.subtract(j.getCenter()),se=j.extend(w).getSize().subtract(W);g.x+=Q.x<0?-se.x:se.x,g.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(i.animate&&i.pan?this.panBy(w):(i.pan&&this._rawPanBy(w),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,i):navigator.geolocation.getCurrentPosition(a,c,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,c=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,c=i.coords.longitude,f=new te(a,c),g=f.toBounds(i.coords.accuracy*2),w=this._locateOptions;if(w.setView){var M=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(M,w.maxZoom):M)}var j={latlng:f,bounds:g,timestamp:i.timestamp};for(var W in i.coords)typeof i.coords[W]=="number"&&(j[W]=i.coords[W]);this.fire("locationfound",j)}},addHandler:function(i,a){if(!a)return this;var c=this[i]=new a(this);return this._handlers.push(c),this.options[i]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Re(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Re(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var c="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Ce("div",c,a||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),c=this.unproject(i.getTopRight());return new $e(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,c){i=H(i),c=ee(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),M=i.getNorthWest(),j=i.getSouthEast(),W=this.getSize().subtract(c),Q=we(this.project(j,f),this.project(M,f)).getSize(),se=ue.any3d?this.options.zoomSnap:1,fe=W.x/Q.x,Te=W.y/Q.y,Wt=a?Math.max(fe,Te):Math.min(fe,Te);return f=this.getScaleZoom(Wt,f),se&&(f=Math.round(f/(se/100))*(se/100),f=a?Math.ceil(f/se)*se:Math.floor(f/se)*se),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var c=this._getTopLeftPoint(i,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(i)/c.scale(a)},getScaleZoom:function(i,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(i*c.scale(a));return isNaN(f)?1/0:f},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ie(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(ee(i),a)},layerPointToLatLng:function(i){var a=ee(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(ie(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ie(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(H(i))},distance:function(i,a){return this.options.crs.distance(ie(i),ie(a))},containerPointToLayerPoint:function(i){return ee(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ee(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(ee(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(i)))},mouseEventToContainerPoint:function(i){return ds(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=ba(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ae(i,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ti(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(i.markerPane,"leaflet-zoom-hide"),ae(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,c){Xe(this._mapPane,new Z(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(i,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Xe(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[d(this._container)]=this;var a=i?De:ge;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=i.target||i.srcElement,M=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){M=!0;break}if(f&&f.listens(a,!0)&&(g&&!Va(w,i)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!M&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var c=i.type;c==="mousedown"&&Na(a),this._fireDOMEvent(i,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,c){if(i.type==="click"){var f=s({},i);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(i,a);if(c){for(var w=[],M=0;M<c.length;M++)c[M].listens(a,!0)&&w.push(c[M]);g=w.concat(g)}if(g.length){a==="contextmenu"&&at(i);var j=g[0],W={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Q=j.getLatLng&&(!j._radius||j._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(i),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?j.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<g.length;M++)if(g[M].fire(a,W,!0),W.originalEvent._stopped||g[M].options.bubblingMouseEvents===!1&&$(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Sr(this._mapPane)||new Z(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var c=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var c=this.getSize()._divideBy(2);return this.project(i,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(i,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,a,c){var f=this._getNewPixelOrigin(c,a);return we([this.project(i.getSouthWest(),a)._subtract(f),this.project(i.getNorthWest(),a)._subtract(f),this.project(i.getSouthEast(),a)._subtract(f),this.project(i.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,c){if(!c)return i;var f=this.project(i,a),g=this.getSize().divideBy(2),w=new de(f.subtract(g),f.add(g)),M=this._getBoundsOffset(w,c,a);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(f.add(M),a)},_limitOffset:function(i,a){if(!a)return i;var c=this.getPixelBounds(),f=new de(c.min.add(i),c.max.add(i));return i.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(i,a,c){var f=we(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(i.min),w=f.max.subtract(i.max),M=this._rebound(g.x,-w.x),j=this._rebound(g.y,-w.y);return new Z(M,j)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ue.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(a,Math.min(c,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var c=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var i=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var c=as,f=this._proxy.style[c];Ir(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Re(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();Ir(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(i)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(O(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ro(i,a){return new Ee(i,a)}var Yt=be.extend({options:{position:"topright"},initialize:function(i){V(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),c=this.getPosition(),f=i._controlCorners[c];return ae(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Re(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),nr=function(i){return new Yt(i)};Ee.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ce("div",a+"control-container",this._container);function f(g,w){var M=a+g+" "+a+w;i[g+w]=Ce("div",M,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Re(this._controlCorners[i]);Re(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mu=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(i,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Yt.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=Ce("div",i),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),hs(a),Oa(a);var f=this._section=Ce("section",i+"-list");c&&(this._map.on("click",this.collapse,this),ge(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ce("a",i+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ge(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){at(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ce("div",i+"-base",f),this._separator=Ce("div",i+"-separator",f),this._overlaysList=Ce("div",i+"-overlays",f),a.appendChild(f)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,c){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ut(this._baseLayersList),Ut(this._overlaysList),this._layerControlInputs=[];var i,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,i=i||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&g>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(d(i.target)),c=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(i,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(i){var a=document.createElement("label"),c=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(i.layer),ge(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+i.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=i.length-1;w>=0;w--)a=i[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,c,f=this._map.getZoom(),g=i.length-1;g>=0;g--)a=i[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ge(i,"click",at),this.expand();var a=this;setTimeout(function(){De(i,"click",at),a._preventClick=!1})}}),Du=function(i,a,c){return new Mu(i,a,c)},Cr=Yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",c=Ce("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,c,f,g){var w=Ce("a",c,f);return w.innerHTML=i,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),hs(w),ge(w,"click",er),ge(w,"click",g,this),ge(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";ze(this._zoomInButton,a),ze(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ae(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ae(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Cr,this.addControl(this.zoomControl))});var Vu=function(i){return new Cr(i)},za=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",c=Ce("div",a),f=this.options;return this._addScales(f,a+"-line",c),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),c},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,c){i.metric&&(this._mScale=Ce("div",a,c)),i.imperial&&(this._iScale=Ce("div",a,c))},_update:function(){var i=this._map,a=i.getSize().y/2,c=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/i)},_updateImperial:function(i){var a=i*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(i,a,c){i.style.width=Math.round(this.options.maxWidth*c)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),c=i/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),ja=function(i){return new za(i)},Ba='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',io=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Ba+" ":"")+"Leaflet</a>"},initialize:function(i){V(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),hs(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),i.length&&c.push(i.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new io().addTo(this)});var so=function(i){return new io(i)};Yt.Layers=Mu,Yt.Zoom=Cr,Yt.Scale=za,Yt.Attribution=io,nr.layers=Du,nr.zoom=Vu,nr.scale=ja,nr.attribution=so;var hn=be.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});hn.addTo=function(i,a){return i.addHandler(a,this),this};var Fu={Events:et},rr=ue.touch?"touchstart mousedown":"mousedown",Vn=an.extend({options:{clickTolerance:3},initialize:function(i,a,c,f){V(this,f),this._element=i,this._dragStartTarget=a||i,this._preventOutline=c},enable:function(){this._enabled||(ge(this._dragStartTarget,rr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,rr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!ls(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Vn._dragging===this&&this.finishDrag();return}if(!(Vn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Vn._dragging=this,this._preventOutline&&Na(this._element),Js(),Dn(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,c=Ou(this._element);this._startPoint=new Z(a.clientX,a.clientY),this._startPos=Sr(this._element),this._parentScale=In(c);var f=i.type==="mousedown";ge(document,f?"mousemove":"touchmove",this._onMove,this),ge(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,c=new Z(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,at(i),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Xe(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),eo(),cn();var a=this._moved&&this._moving;this._moving=!1,Vn._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ua(i,a,c){var f,g=[1,4,2,8],w,M,j,W,Q,se,fe,Te;for(w=0,se=i.length;w<se;w++)i[w]._code=U(i[w],a);for(j=0;j<4;j++){for(fe=g[j],f=[],w=0,se=i.length,M=se-1;w<se;M=w++)W=i[w],Q=i[M],W._code&fe?Q._code&fe||(Te=z(Q,W,fe,a,c),Te._code=U(Te,a),f.push(Te)):(Q._code&fe&&(Te=z(Q,W,fe,a,c),Te._code=U(Te,a),f.push(Te)),f.push(W));i=f}return i}function Ha(i,a){var c,f,g,w,M,j,W,Q,se;if(!i||i.length===0)throw new Error("latlngs not passed");Le(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var fe=ie([0,0]),Te=H(i),Wt=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());Wt<1700&&(fe=oo(i));var Et=i.length,Cn=[];for(c=0;c<Et;c++){var Xt=ie(i[c]);Cn.push(a.project(ie([Xt.lat-fe.lat,Xt.lng-fe.lng])))}for(j=W=Q=0,c=0,f=Et-1;c<Et;f=c++)g=Cn[c],w=Cn[f],M=g.y*w.x-w.y*g.x,W+=(g.x+w.x)*M,Q+=(g.y+w.y)*M,j+=M*3;j===0?se=Cn[0]:se=[W/j,Q/j];var go=a.unproject(ee(se));return ie([go.lat+fe.lat,go.lng+fe.lng])}function oo(i){for(var a=0,c=0,f=0,g=0;g<i.length;g++){var w=ie(i[g]);a+=w.lat,c+=w.lng,f++}return ie([a/f,c/f])}var ao={__proto__:null,clipPolygon:Ua,polygonCenter:Ha,centroid:oo};function bt(i,a){if(!a||!i.length)return i.slice();var c=a*a;return i=m(i,c),i=ii(i,c),i}function Wa(i,a,c){return Math.sqrt(_e(i,a,c,!0))}function zu(i,a,c){return _e(i,a,c)}function ii(i,a){var c=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(i,g,a,0,c-1);var w,M=[];for(w=0;w<c;w++)g[w]&&M.push(i[w]);return M}function u(i,a,c,f,g){var w=0,M,j,W;for(j=f+1;j<=g-1;j++)W=_e(i[j],i[f],i[g],!0),W>w&&(M=j,w=W);w>c&&(a[M]=1,u(i,a,c,f,M),u(i,a,c,M,g))}function m(i,a){for(var c=[i[0]],f=1,g=0,w=i.length;f<w;f++)ne(i[f],i[g])>a&&(c.push(i[f]),g=f);return g<w-1&&c.push(i[w-1]),c}var _;function x(i,a,c,f,g){var w=f?_:U(i,c),M=U(a,c),j,W,Q;for(_=M;;){if(!(w|M))return[i,a];if(w&M)return!1;j=w||M,W=z(i,a,j,c,g),Q=U(W,c),j===w?(i=W,w=Q):(a=W,M=Q)}}function z(i,a,c,f,g){var w=a.x-i.x,M=a.y-i.y,j=f.min,W=f.max,Q,se;return c&8?(Q=i.x+w*(W.y-i.y)/M,se=W.y):c&4?(Q=i.x+w*(j.y-i.y)/M,se=j.y):c&2?(Q=W.x,se=i.y+M*(W.x-i.x)/w):c&1&&(Q=j.x,se=i.y+M*(j.x-i.x)/w),new Z(Q,se,g)}function U(i,a){var c=0;return i.x<a.min.x?c|=1:i.x>a.max.x&&(c|=2),i.y<a.min.y?c|=4:i.y>a.max.y&&(c|=8),c}function ne(i,a){var c=a.x-i.x,f=a.y-i.y;return c*c+f*f}function _e(i,a,c,f){var g=a.x,w=a.y,M=c.x-g,j=c.y-w,W=M*M+j*j,Q;return W>0&&(Q=((i.x-g)*M+(i.y-w)*j)/W,Q>1?(g=c.x,w=c.y):Q>0&&(g+=M*Q,w+=j*Q)),M=i.x-g,j=i.y-w,f?M*M+j*j:new Z(g,w)}function Le(i){return!N(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Oe(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Le(i)}function nt(i,a){var c,f,g,w,M,j,W,Q;if(!i||i.length===0)throw new Error("latlngs not passed");Le(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var se=ie([0,0]),fe=H(i),Te=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Te<1700&&(se=oo(i));var Wt=i.length,Et=[];for(c=0;c<Wt;c++){var Cn=ie(i[c]);Et.push(a.project(ie([Cn.lat-se.lat,Cn.lng-se.lng])))}for(c=0,f=0;c<Wt-1;c++)f+=Et[c].distanceTo(Et[c+1])/2;if(f===0)Q=Et[0];else for(c=0,w=0;c<Wt-1;c++)if(M=Et[c],j=Et[c+1],g=M.distanceTo(j),w+=g,w>f){W=(w-f)/g,Q=[j.x-W*(j.x-M.x),j.y-W*(j.y-M.y)];break}var Xt=a.unproject(ee(Q));return ie([Xt.lat+se.lat,Xt.lng+se.lng])}var Sn={__proto__:null,simplify:bt,pointToSegmentDistance:Wa,closestPointOnSegment:zu,clipSegment:x,_getEdgeIntersection:z,_getBitCode:U,_sqClosestPointOnSegment:_e,isFlat:Le,_flat:Oe,polylineCenter:nt},Fn={project:function(i){return new Z(i.lng,i.lat)},unproject:function(i){return new te(i.y,i.x)},bounds:new de([-180,-90],[180,90])},Pn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,c=this.R,f=i.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),M=w*Math.sin(f),j=Math.tan(Math.PI/4-f/2)/Math.pow((1-M)/(1+M),w/2);return f=-c*Math.log(Math.max(j,1e-10)),new Z(i.lng*a*c,f)},unproject:function(i){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-i.y/c),M=Math.PI/2-2*Math.atan(w),j=0,W=.1,Q;j<15&&Math.abs(W)>1e-7;j++)Q=g*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),g/2),W=Math.PI/2-2*Math.atan(w*Q)-M,M+=W;return new te(M*a,i.x*a/c)}},ir={__proto__:null,LonLat:Fn,Mercator:Pn,SphericalMercator:ot},lo=s({},tt,{code:"EPSG:3395",projection:Pn,transformation:function(){var i=.5/(Math.PI*Pn.R);return wn(i,.5,-i,.5)}()}),uo=s({},tt,{code:"EPSG:4326",projection:Fn,transformation:wn(1/180,1,-1/180,.5)}),hx=s({},Fe,{projection:Fn,transformation:wn(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var c=a.lng-i.lng,f=a.lat-i.lat;return Math.sqrt(c*c+f*f)},infinite:!0});Fe.Earth=tt,Fe.EPSG3395=lo,Fe.EPSG3857=un,Fe.EPSG900913=Yi,Fe.EPSG4326=uo,Fe.Simple=hx;var zn=an.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[d(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[d(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=d(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return d(i)in this._layers},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},_addLayers:function(i){i=i?N(i)?i:[i]:[];for(var a=0,c=i.length;a<c;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[d(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=d(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;i=g.minZoom===void 0?i:Math.min(i,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var co=zn.extend({initialize:function(i,a){V(this,a),this._layers={};var c,f;if(i)for(c=0,f=i.length;c<f;c++)this.addLayer(i[c])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[i]&&f[i].apply(f,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var c in this._layers)i.call(a,this._layers[c]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return d(i)}}),dx=function(i,a){return new co(i,a)},Ar=co.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),co.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),co.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new $e;for(var a in this._layers){var c=this._layers[a];i.extend(c.getBounds?c.getBounds():c.getLatLng())}return i}}),fx=function(i,a){return new Ar(i,a)},ho=be.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){V(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var c=this._getIconUrl(i);if(!c){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=ee(f),w=ee(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(c.className||""),w&&(i.style.marginLeft=-w.x+"px",i.style.marginTop=-w.y+"px"),g&&(i.style.width=g.x+"px",i.style.height=g.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return ue.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function px(i){return new ho(i)}var $a=ho.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof $a.imagePath!="string"&&($a.imagePath=this._detectIconPath()),(this.options.imagePath||$a.imagePath)+ho.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ce("div","leaflet-default-icon-path",document.body),a=ti(i,"background-image")||ti(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Bg=hn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Vn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=Sr(a._icon),M=c.getPixelBounds(),j=c.getPixelOrigin(),W=we(M.min._subtract(j).add(g),M.max._subtract(j).subtract(g));if(!W.contains(w)){var Q=ee((Math.max(W.max.x,w.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,w.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,w.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,w.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(f);c.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),Xe(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=O(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,c=a._shadow,f=Sr(a._icon),g=a._map.layerPointToLatLng(f);c&&Xe(c,f),a._latlng=g,i.latlng=g,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ju=zn.extend({options:{icon:new $a,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){V(this,a),this._latlng=ie(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=ie(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=i.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(c.title=i.title),c.tagName==="IMG"&&(c.alt=i.alt||"")),ae(c,a),i.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(c,"focus",this._panOnFocus,this);var g=i.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(ae(g,a),g.alt=""),this._shadow=g,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Re(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Re(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Xe(this._icon,i),this._shadow&&Xe(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bg)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bg(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Qt(this._icon,i),this._shadow&&Qt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,c=a.iconSize?ee(a.iconSize):ee(0,0),f=a.iconAnchor?ee(a.iconAnchor):ee(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mx(i,a){return new ju(i,a)}var si=zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return V(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bu=si.extend({options:{fill:!0,radius:10},initialize:function(i,a){V(this,a),this._latlng=ie(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=ie(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return si.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,c=this._clickTolerance(),f=[i+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gx(i,a){return new Bu(i,a)}var bd=Bu.extend({initialize:function(i,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),V(this,a),this._latlng=ie(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:si.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===tt.distance){var g=Math.PI/180,w=this._mRadius/tt.R/g,M=c.project([a+w,i]),j=c.project([a-w,i]),W=M.add(j).divideBy(2),Q=c.unproject(W).lat,se=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Q*g))/(Math.cos(a*g)*Math.cos(Q*g)))/g;(isNaN(se)||se===0)&&(se=w/Math.cos(Math.PI/180*a)),this._point=W.subtract(c.getPixelOrigin()),this._radius=isNaN(se)?0:W.x-c.project([Q,i-se]).x,this._radiusY=W.y-M.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function _x(i,a,c){return new bd(i,a,c)}var kr=si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){V(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,c=null,f=_e,g,w,M=0,j=this._parts.length;M<j;M++)for(var W=this._parts[M],Q=1,se=W.length;Q<se;Q++){g=W[Q-1],w=W[Q];var fe=f(i,g,w,!0);fe<a&&(a=fe,c=f(i,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return nt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=ie(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new $e,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],c=Le(i),f=0,g=i.length;f<g;f++)c?(a[f]=ie(i[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(i[f]);return a},_project:function(){var i=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new Z(i,i);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,c){var f=i[0]instanceof te,g=i.length,w,M;if(f){for(M=[],w=0;w<g;w++)M[w]=this._map.latLngToLayerPoint(i[w]),c.extend(M[w]);a.push(M)}else for(w=0;w<g;w++)this._projectLatlngs(i[w],a,c)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,M,j,W;for(c=0,g=0,w=this._rings.length;c<w;c++)for(W=this._rings[c],f=0,M=W.length;f<M-1;f++)j=x(W[f],W[f+1],i,f,!0),j&&(a[g]=a[g]||[],a[g].push(j[0]),(j[1]!==W[f+1]||f===M-2)&&(a[g].push(j[1]),g++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,c=0,f=i.length;c<f;c++)i[c]=bt(i[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var c,f,g,w,M,j,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(c=0,w=this._parts.length;c<w;c++)for(j=this._parts[c],f=0,M=j.length,g=M-1;f<M;g=f++)if(!(!a&&f===0)&&Wa(i,j[g],j[f])<=W)return!0;return!1}});function yx(i,a){return new kr(i,a)}kr._flat=Oe;var fo=kr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ha(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=kr.prototype._convertLatLngs.call(this,i),c=a.length;return c>=2&&a[0]instanceof te&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(i){kr.prototype._setLatLngs.call(this,i),Le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,c=new Z(a,a);if(i=new de(i.min.subtract(c),i.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=Ua(this._rings[f],i,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,c,f,g,w,M,j,W,Q;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(w=0,W=this._parts.length;w<W;w++)for(c=this._parts[w],M=0,Q=c.length,j=Q-1;M<Q;j=M++)f=c[M],g=c[j],f.y>i.y!=g.y>i.y&&i.x<(g.x-f.x)*(i.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||kr.prototype._containsPoint.call(this,i,!0)}});function vx(i,a){return new fo(i,a)}var Rr=Ar.extend({initialize:function(i,a){V(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=N(i)?i:i.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(i))return this;var M=Uu(i,w);return M?(M.feature=$u(i),M.defaultOptions=M.options,this.resetStyle(M),w.onEachFeature&&w.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function Uu(i,a){var c=i.type==="Feature"?i.geometry:i,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,M=a&&a.coordsToLatLng||Nd,j,W,Q,se;if(!f&&!c)return null;switch(c.type){case"Point":return j=M(f),Ug(w,i,j,a);case"MultiPoint":for(Q=0,se=f.length;Q<se;Q++)j=M(f[Q]),g.push(Ug(w,i,j,a));return new Ar(g);case"LineString":case"MultiLineString":return W=Hu(f,c.type==="LineString"?0:1,M),new kr(W,a);case"Polygon":case"MultiPolygon":return W=Hu(f,c.type==="Polygon"?1:2,M),new fo(W,a);case"GeometryCollection":for(Q=0,se=c.geometries.length;Q<se;Q++){var fe=Uu({geometry:c.geometries[Q],type:"Feature",properties:i.properties},a);fe&&g.push(fe)}return new Ar(g);case"FeatureCollection":for(Q=0,se=c.features.length;Q<se;Q++){var Te=Uu(c.features[Q],a);Te&&g.push(Te)}return new Ar(g);default:throw new Error("Invalid GeoJSON object.")}}function Ug(i,a,c,f){return i?i(a,c):new ju(c,f&&f.markersInheritOptions&&f)}function Nd(i){return new te(i[1],i[0],i[2])}function Hu(i,a,c){for(var f=[],g=0,w=i.length,M;g<w;g++)M=a?Hu(i[g],a-1,c):(c||Nd)(i[g]),f.push(M);return f}function Od(i,a){return i=ie(i),i.alt!==void 0?[E(i.lng,a),E(i.lat,a),E(i.alt,a)]:[E(i.lng,a),E(i.lat,a)]}function Wu(i,a,c,f){for(var g=[],w=0,M=i.length;w<M;w++)g.push(a?Wu(i[w],Le(i[w])?0:a-1,c,f):Od(i[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function po(i,a){return i.feature?s({},i.feature,{geometry:a}):$u(a)}function $u(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Md={toGeoJSON:function(i){return po(this,{type:"Point",coordinates:Od(this.getLatLng(),i)})}};ju.include(Md),bd.include(Md),Bu.include(Md),kr.include({toGeoJSON:function(i){var a=!Le(this._latlngs),c=Wu(this._latlngs,a?1:0,!1,i);return po(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),fo.include({toGeoJSON:function(i){var a=!Le(this._latlngs),c=a&&!Le(this._latlngs[0]),f=Wu(this._latlngs,c?2:a?1:0,!0,i);return a||(f=[f]),po(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),co.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(i).geometry.coordinates)}),po(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(i);if(c)f.push(w.geometry);else{var M=$u(w);M.type==="FeatureCollection"?f.push.apply(f,M.features):f.push(M)}}}),c?po(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Hg(i,a){return new Rr(i,a)}var wx=Hg,qu=zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,c){this._url=i,this._bounds=H(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Re(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Tn(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=H(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:Ce("img");if(ae(a,"leaflet-image-layer"),this._zoomAnimated&&ae(a,"leaflet-zoom-animated"),this.options.className&&ae(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Ir(this._image,c,a)},_reset:function(){var i=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(i,a.min),i.style.width=c.x+"px",i.style.height=c.y+"px"},_updateOpacity:function(){Qt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Ex=function(i,a,c){return new qu(i,a,c)},Wg=qu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:Ce("video");if(ae(a,"leaflet-image-layer"),this._zoomAnimated&&ae(a,"leaflet-zoom-animated"),this.options.className&&ae(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),i){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var M=Ce("source");M.src=this._url[w],a.appendChild(M)}}});function Tx(i,a,c){return new Wg(i,a,c)}var $g=qu.extend({_initImage:function(){var i=this._image=this._url;ae(i,"leaflet-image-layer"),this._zoomAnimated&&ae(i,"leaflet-zoom-animated"),this.options.className&&ae(i,this.options.className),i.onselectstart=v,i.onmousemove=v}});function xx(i,a,c){return new $g(i,a,c)}var sr=zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof te||N(i))?(this._latlng=ie(i),V(this,a)):(V(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Qt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Qt(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Qt(this._container,0),this._removeTimeout=setTimeout(l(Re,void 0,this._container),200)):Re(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ie(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Tn(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof Ar){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=ee(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,i.add(c)):a=a.add(i).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(i,a,c,f){var g=a;return g instanceof i||(g=new i(f).setContent(a)),c&&g.setLatLng(c),g}}),zn.include({_initOverlay:function(i,a,c,f){var g=c;return g instanceof i?(V(g,f),g._source=this):(g=a&&!f?a:new i(f,this),g.setContent(c)),g}});var Gu=sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,sr.prototype.openOn.call(this,i)},onAdd:function(i){sr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof si||this._source.on("preclick",Ne))},onRemove:function(i){sr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof si||this._source.off("preclick",Ne))},getEvents:function(){var i=sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=Ce("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ce("div",i+"-content-wrapper",a);if(this._contentNode=Ce("div",i+"-content",c),hs(a),Oa(this._contentNode),ge(a,"contextmenu",Ne),this._tipContainer=Ce("div",i+"-tip-container",a),this._tip=Ce("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ce("a",i+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ge(f,"click",function(g){at(g),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var c=i.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=i.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ae(i,w)):ze(i,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(ti(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new Z(this._containerLeft,-c-this._containerBottom);g._add(Sr(this._container));var w=i.layerPointToContainerPoint(g),M=ee(this.options.autoPanPadding),j=ee(this.options.autoPanPaddingTopLeft||M),W=ee(this.options.autoPanPaddingBottomRight||M),Q=i.getSize(),se=0,fe=0;w.x+f+W.x>Q.x&&(se=w.x+f-Q.x+W.x),w.x-se-j.x<0&&(se=w.x-j.x),w.y+c+W.y>Q.y&&(fe=w.y+c-Q.y+W.y),w.y-fe-j.y<0&&(fe=w.y-j.y),(se||fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([se,fe]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ix=function(i,a){return new Gu(i,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(i,a,c){return this._initOverlay(Gu,i,a,c).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),zn.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Gu,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Ar||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){er(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Zu=sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){sr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){sr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=sr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),M=f.layerPointToContainerPoint(i),j=this.options.direction,W=g.offsetWidth,Q=g.offsetHeight,se=ee(this.options.offset),fe=this._getAnchor();j==="top"?(a=W/2,c=Q):j==="bottom"?(a=W/2,c=0):j==="center"?(a=W/2,c=Q/2):j==="right"?(a=0,c=Q/2):j==="left"?(a=W,c=Q/2):M.x<w.x?(j="right",a=0,c=Q/2):(j="left",a=W+(se.x+fe.x)*2,c=Q/2),i=i.subtract(ee(a,c,!0)).add(se).add(fe),ze(g,"leaflet-tooltip-right"),ze(g,"leaflet-tooltip-left"),ze(g,"leaflet-tooltip-top"),ze(g,"leaflet-tooltip-bottom"),ae(g,"leaflet-tooltip-"+j),Xe(g,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Qt(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Sx=function(i,a){return new Zu(i,a)};Ee.include({openTooltip:function(i,a,c){return this._initOverlay(Zu,i,a,c).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),zn.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zu,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Ar||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(ge(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ge(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,c,f;this._tooltip.options.sticky&&i.originalEvent&&(c=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var qg=ho.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Ut(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=ee(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Px(i){return new qg(i)}ho.Default=$a;var qa=zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){V(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Re(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof Z?i:new Z(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,c=-i(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=i(c,+w));isFinite(c)&&(this.options.zIndex=c+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){Qt(this._container,this.options.opacity);var i=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(i-g.loaded)/200);Qt(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(D(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===i?(this._levels[c].el.style.zIndex=a-Math.abs(i-c),this._onUpdateLevel(c)):(Re(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[i],g=this._map;return f||(f=this._levels[i]={},f.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var i,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Re(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,c,f){var g=Math.floor(i/2),w=Math.floor(a/2),M=c-1,j=new Z(+g,+w);j.z=+M;var W=this._tileCoordsToKey(j),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>f?this._retainParent(g,w,M,f):!1)},_retainChildren:function(i,a,c,f){for(var g=2*i;g<2*i+2;g++)for(var w=2*a;w<2*a+2;w++){var M=new Z(g,w);M.z=c+1;var j=this._tileCoordsToKey(M),W=this._tiles[j];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(i),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],i,a)},_setZoomTransform:function(i,a,c){var f=this._map.getZoomScale(c,i.zoom),g=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ue.any3d?Ir(i.el,g,f):Xe(i.el,g)},_resetGrid:function(){var i=this._map,a=i.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(i.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(i.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(i,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new de(g.subtract(w),g.add(w))},_update:function(i){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),g=this._pxBoundsToTileRange(f),w=g.getCenter(),M=[],j=this.options.keepBuffer,W=new de(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!W.contains(new Z(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(i,c);return}for(var fe=g.min.y;fe<=g.max.y;fe++)for(var Te=g.min.x;Te<=g.max.x;Te++){var Wt=new Z(Te,fe);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var Et=this._tiles[this._tileCoordsToKey(Wt)];Et?Et.current=!0:M.push(Wt)}}if(M.sort(function(Xt,go){return Xt.distanceTo(w)-go.distanceTo(w)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cn=document.createDocumentFragment();for(Te=0;Te<M.length;Te++)this._addTile(M[Te],Cn);this._level.el.appendChild(Cn)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(i.x<c.min.x||i.x>c.max.x)||!a.wrapLat&&(i.y<c.min.y||i.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return H(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,c=this.getTileSize(),f=i.scaleBy(c),g=f.add(c),w=a.unproject(f,i.z),M=a.unproject(g,i.z);return[w,M]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),c=new $e(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),c=new Z(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(i){var a=this._tiles[i];a&&(Re(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ae(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=v,i.onmousemove=v,ue.ielt9&&this.options.opacity<1&&Qt(i,this.options.opacity)},_addTile:function(i,a){var c=this._getTilePos(i),f=this._tileCoordsToKey(i),g=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(g),this.createTile.length<2&&O(l(this._tileReady,this,i,null,g)),Xe(g,c),this._tiles[f]={el:g,coords:i,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:i})},_tileReady:function(i,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:i});var f=this._tileCoordsToKey(i);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Qt(c.el,0),D(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ae(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new Z(this._wrapX?y(i.x,this._wrapX):i.x,this._wrapY?y(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new de(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Cx(i){return new qa(i)}var mo=qa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=V(this,a),a.detectRetina&&ue.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var c=document.createElement("img");return ge(c,"load",l(this._tileOnLoad,this,a,c)),ge(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(i),c},getTileUrl:function(i){var a={r:ue.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(i,a){ue.ielt9?setTimeout(l(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),i(c,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(i=a-i),i+f},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=v,a.onerror=v,!a.complete)){a.src=X;var c=this._tiles[i].coords;Re(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",X),qa.prototype._removeTile.call(this,i)},_tileReady:function(i,a,c){if(!(!this._map||c&&c.getAttribute("src")===X))return qa.prototype._tileReady.call(this,i,a,c)}});function Gg(i,a){return new mo(i,a)}var Zg=mo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&ue.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,mo.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),c=this._crs,f=we(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,M=(this._wmsVersion>=1.3&&this._crs===uo?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),j=mo.prototype.getTileUrl.call(this,i);return j+B(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,a){return s(this.wmsParams,i),a||this.redraw(),this}});function Ax(i,a){return new Zg(i,a)}mo.WMS=Zg,Gg.wms=Ax;var Lr=zn.extend({options:{padding:.1},initialize:function(i){V(this,i),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(i,a));ue.any3d?Ir(this._container,w,c):Xe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kg=Lr.extend({options:{tolerance:0},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ge(i,"mousemove",this._onMouseMove,this),ge(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Re(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var i=this._bounds,a=this._container,c=i.getSize(),f=ue.retina?2:1;Xe(a,i.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[d(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete i._order,delete this._layers[d(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}i.options._dashArray=c}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var c,f,g,w,M=i._parts,j=M.length,W=this._ctx;if(j){for(W.beginPath(),c=0;c<j;c++){for(f=0,g=M[c].length;f<g;f++)w=M[c][f],W[f?"lineTo":"moveTo"](w.x,w.y);a&&W.closePath()}this._fillStroke(W,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,c=this._ctx,f=Math.max(Math.round(i._radius),1),g=(Math.max(Math.round(i._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,i)}},_fillStroke:function(i,a){var c=a.options;c.fill&&(i.globalAlpha=c.fillOpacity,i.fillStyle=c.fillColor||c.color,i.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=c.opacity,i.lineWidth=c.weight,i.strokeStyle=c.color,i.lineCap=c.lineCap,i.lineJoin=c.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(ze(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(ae(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,c){this._map._fireDOMEvent(a,c||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function Qg(i){return ue.canvas?new Kg(i):null}var Ga=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kx={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=Ga("shape");ae(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=Ga("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;Re(a),i.removeInteractiveTarget(a),delete this._layers[d(i)]},_updateStyle:function(i){var a=i._stroke,c=i._fill,f=i.options,g=i._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=i._stroke=Ga("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),i._stroke=null),f.fill?(c||(c=i._fill=Ga("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),c=Math.round(i._radius),f=Math.round(i._radiusY||c);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){Tn(i._container)},_bringToBack:function(i){xn(i._container)}},Ku=ue.vml?Ga:Xi,Za=Lr.extend({_initContainer:function(){this._container=Ku("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ku("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Re(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var i=this._bounds,a=i.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,i.min),c.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Ku("path");i.options.className&&ae(a,i.options.className),i.options.interactive&&ae(a,"leaflet-interactive"),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Re(i._path),i.removeInteractiveTarget(i._path),delete this._layers[d(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,c=i.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,Us(i._parts,a))},_updateCircle:function(i){var a=i._point,c=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=i._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(i,w)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){Tn(i._path)},_bringToBack:function(i){xn(i._path)}});ue.vml&&Za.include(kx);function Yg(i){return ue.svg||ue.vml?new Za(i):null}Ee.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&Qg(i)||Yg(i)}});var Xg=fo.extend({initialize:function(i,a){fo.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=H(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Rx(i,a){return new Xg(i,a)}Za.create=Ku,Za.pointsToPath=Us,Rr.geometryToLayer=Uu,Rr.coordsToLatLng=Nd,Rr.coordsToLatLngs=Hu,Rr.latLngToCoords=Od,Rr.latLngsToCoords=Wu,Rr.getFeature=po,Rr.asFeature=$u,Ee.mergeOptions({boxZoom:!0});var Jg=hn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Re(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Dn(),Js(),this._startPoint=this._map.mouseEventToContainerPoint(i),ge(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new de(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Re(this._box),ze(this._container,"leaflet-crosshair")),cn(),eo(),De(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",Jg),Ee.mergeOptions({doubleClickZoom:!0});var e_=hn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=i.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(i.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",e_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var t_=hn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Vn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=H(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%i+a-c,w=(f+a+c)%i-a-c,M=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var a=this._map,c=a.options,f=!c.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,M=c.easeLinearity,j=g.multiplyBy(M/w),W=j.distanceTo([0,0]),Q=Math.min(c.inertiaMaxSpeed,W),se=j.multiplyBy(Q/W),fe=Q/(c.inertiaDeceleration*M),Te=se.multiplyBy(-fe/2).round();!Te.x&&!Te.y?a.fire("moveend"):(Te=a._limitOffset(Te,a.options.maxBounds),O(function(){a.panBy(Te,{duration:fe,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",t_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var n_=hn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ge(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,c=i.scrollTop||a.scrollTop,f=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*i,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[i,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,i];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=i;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-i},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],i.shiftKey&&(f=ee(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(ee(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;er(i)}}});Ee.addInitHook("addHandler","keyboard",n_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var r_=hn.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=Da(i),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),er(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),c=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,M=i._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+M):i.setZoomAround(this._lastMousePos,a+M))}});Ee.addInitHook("addHandler","scrollWheelZoom",r_);var Lx=600;Ee.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var i_=hn.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new Z(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",at),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),Lx),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){De(document,"touchend",at),De(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new Z(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var c=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",i_),Ee.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var s_=hn.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),at(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(i.touches[0]),f=a.mouseEventToContainerPoint(i.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var M=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(M,this,!0),at(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",s_),Ee.BoxZoom=Jg,Ee.DoubleClickZoom=e_,Ee.Drag=t_,Ee.Keyboard=n_,Ee.ScrollWheelZoom=r_,Ee.TapHold=i_,Ee.TouchZoom=s_,n.Bounds=de,n.Browser=ue,n.CRS=Fe,n.Canvas=Kg,n.Circle=bd,n.CircleMarker=Bu,n.Class=be,n.Control=Yt,n.DivIcon=qg,n.DivOverlay=sr,n.DomEvent=fs,n.DomUtil=Ld,n.Draggable=Vn,n.Evented=an,n.FeatureGroup=Ar,n.GeoJSON=Rr,n.GridLayer=qa,n.Handler=hn,n.Icon=ho,n.ImageOverlay=qu,n.LatLng=te,n.LatLngBounds=$e,n.Layer=zn,n.LayerGroup=co,n.LineUtil=Sn,n.Map=Ee,n.Marker=ju,n.Mixin=Fu,n.Path=si,n.Point=Z,n.PolyUtil=ao,n.Polygon=fo,n.Polyline=kr,n.Popup=Gu,n.PosAnimation=Fa,n.Projection=ir,n.Rectangle=Xg,n.Renderer=Lr,n.SVG=Za,n.SVGOverlay=$g,n.TileLayer=mo,n.Tooltip=Zu,n.Transformation=ln,n.Util=R,n.VideoOverlay=Wg,n.bind=l,n.bounds=we,n.canvas=Qg,n.circle=_x,n.circleMarker=gx,n.control=nr,n.divIcon=Px,n.extend=s,n.featureGroup=fx,n.geoJSON=Hg,n.geoJson=wx,n.gridLayer=Cx,n.icon=px,n.imageOverlay=Ex,n.latLng=ie,n.latLngBounds=H,n.layerGroup=dx,n.map=ro,n.marker=mx,n.point=ee,n.polygon=vx,n.polyline=yx,n.popup=Ix,n.rectangle=Rx,n.setOptions=V,n.stamp=d,n.svg=Yg,n.svgOverlay=xx,n.tileLayer=Gg,n.tooltip=Sx,n.transformation=wn,n.version=r,n.videoOverlay=Tx;var bx=window.L;n.noConflict=function(){return window.L=bx,this},window.L=n})})(Gp,Gp.exports);var Ta=Gp.exports;const Zp=iw(Ta);function Td(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function xd(t,e){return e==null?function(r,s){const o=q.useRef();return o.current||(o.current=t(r,s)),o}:function(r,s){const o=q.useRef();o.current||(o.current=t(r,s));const l=q.useRef(r),{instance:h}=o.current;return q.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,s]),o}}function ax(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function lx(t){return function(n){const r=zg(),s=t(Ed(n,r),r);return nx(r.map,n.attribution),jg(s.current,n.eventHandlers),ax(s.current,r),s}}function LN(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function bN(t){return function(n){const r=zg(),s=t(Ed(n,r),r);return jg(s.current,n.eventHandlers),ax(s.current,r),LN(s.current,n),s}}function NN(t,e){const n=xd(t,e),r=lx(n);return ox(r)}function ON(t,e){const n=xd(t),r=RN(n,e);return AN(r)}function MN(t,e){const n=xd(t,e),r=bN(n);return ox(r)}function DN(t,e){const n=xd(t,e),r=lx(n);return kN(r)}function VN(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Kp(){return Kp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(this,arguments)}function FN({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...y},v){const[E]=q.useState({className:s,id:o,style:h}),[k,F]=q.useState(null);q.useImperativeHandle(v,()=>(k==null?void 0:k.map)??null,[k]);const V=q.useCallback(b=>{if(b!==null&&k===null){const P=new Ta.Map(b,y);n!=null&&p!=null?P.setView(n,p):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),F(CN(P))}},[]);q.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const B=k?qo.createElement(sx,{value:k},r):l??null;return qo.createElement("div",Kp({},E,{ref:V}),B)}const zN=q.forwardRef(FN),ux=NN(function({position:e,...n},r){const s=new Ta.Marker(e,n);return Td(s,rx(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),jN=MN(function({positions:e,...n},r){const s=new Ta.Polygon(e,n);return Td(s,rx(r,{overlayContainer:s}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),cx=ON(function(e,n){const r=new Ta.Popup(e,n.overlayContainer);return Td(r,n)},function(e,n,{position:r},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,r])}),BN=DN(function({url:e,...n},r){const s=new Ta.TileLayer(e,Ed(n,r));return Td(s,r)},function(e,n,r){VN(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),UN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],HN=(t,e=3)=>{const n=[];for(let r=0;r<t.length-1;r++){const s=t[r],o=t[r+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},WN=(t,e)=>{const n=HN(t,5),r=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],y=p[0]-o,v=p[1]-l,E=Math.sqrt(y*y+v*v);if(E===0)continue;const k=y/E,F=v/E,V=Math.atan2(v,y)*(180/Math.PI);let B=0;if(V>=45&&V<=135){const P=1-Math.abs((V-90)/45);B+=100*P}if(Math.abs(V)>=135){const P=Math.abs(V),N=1-Math.abs((P-180)/45);B+=100*N}const b=Math.max(0,e-B);h.push([p[0]+k*b*r,p[1]+F*b*s])}return h},$N=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],qN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],rw=(t,e)=>{const n=e?"red":"white";return Zp.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},GN=({facility:t,onViewDetails:e})=>{var l,h;const n=q.useRef(null);q.useEffect(()=>{if(n.current){const d=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(rw(d,t.hit))}},[t.hit,t.type]);const r=d=>{switch(d){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}},s=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,o=((h=t.location)==null?void 0:h.longitude)??t.longitude??0;return T.jsx(ux,{ref:n,position:[s,o],icon:rw(r(t.type),t.hit),children:T.jsx(cx,{children:T.jsxs("div",{style:{color:"#000",minWidth:"200px"},children:[T.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),T.jsx("div",{style:{marginBottom:"8px"},children:T.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),T.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[T.jsx("strong",{children:"Type:"})," ",T.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),T.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[T.jsx("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),T.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[s.toFixed(4),", ",o.toFixed(4)]}),T.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#2563eb",onMouseOut:d=>d.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details "})]})})})},ZN=()=>{const t=$m(),[e,n]=q.useState([]),[r,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,y]=q.useState(0),[v,E]=q.useState(!0),[k,F]=q.useState(!0),[V,B]=q.useState(!0),[b,P]=q.useState(!0),[N,$]=q.useState(!0),[X,J]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!qe){console.error("Firebase not initialized");return}const O=(await di(hi(qe,Dt.FACILITIES))).docs.map(D=>({id:parseInt(D.id),...D.data()}));n(O)}catch(A){console.error("Error fetching facilities:",A)}})()},[]);const C=I=>{t(`/facility/${I}`)},S=e.filter(I=>!(r!=="all"&&I.type!==r||I.type==="refinery"&&!v||I.type==="extraction"&&!k||I.type==="storage"&&!V||o==="hit"&&!I.hit||o==="operational"&&I.hit||I.capacity<p||h&&!I.name.toLowerCase().includes(h.toLowerCase())));return T.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[T.jsxs("div",{style:{width:"320px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[T.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),T.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[S.length," of ",e.length," facilities"]})]}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[T.jsxs("div",{style:{marginBottom:"16px"},children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),T.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:I=>d(I.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:I=>I.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:I=>I.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),T.jsxs("div",{style:{marginBottom:"16px"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[T.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:I=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[T.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:I=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),T.jsxs("div",{style:{marginBottom:"16px"},children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Min. Capacity"}),T.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px",marginBottom:"8px",fontWeight:"600"},children:[p.toLocaleString()," barrels/day"]}),T.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:I=>y(Number(I.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"5px"}})]}),T.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Facility Types"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[T.jsx("input",{type:"checkbox",checked:v,onChange:I=>E(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),T.jsx("span",{style:{color:"#FF5733",fontSize:"16px",lineHeight:"1"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[T.jsx("input",{type:"checkbox",checked:k,onChange:I=>F(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),T.jsx("span",{style:{color:"#33FF57",fontSize:"16px",lineHeight:"1"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[T.jsx("input",{type:"checkbox",checked:V,onChange:I=>B(I.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),T.jsx("span",{style:{color:"#3357FF",fontSize:"16px",lineHeight:"1"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),T.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Weapon Ranges"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[T.jsx("span",{style:{color:"#10B981",fontSize:"16px"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"500km Range"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[T.jsx("span",{style:{color:"#F97316",fontSize:"16px"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1000km Range"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[T.jsx("span",{style:{color:"#EF4444",fontSize:"16px"},children:""}),T.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1500km Range"})]})]})]})]})]}),T.jsx("div",{style:{flex:1,position:"relative"},children:T.jsxs(zN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[T.jsx(BN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),$N.map(I=>{if(I.range===500&&!b||I.range===1e3&&!N||I.range===1500&&!X)return null;const A=WN(UN,I.range);return T.jsx(jN,{positions:A,pathOptions:{color:I.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}},I.range)}),qN.map(I=>{let A;return I.name==="Moscow"?A=Zp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${I.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):I.name==="Kyiv"&&I.colors&&(A=Zp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${I.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${I.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),T.jsx(ux,{position:[I.lat,I.lon],icon:A,children:T.jsx(cx,{children:T.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:I.name})})},I.name)}),S.map(I=>T.jsx(GN,{facility:I,onViewDetails:C},I.id))]})})]})},KN=()=>{var v,E;const{id:t}=$P(),e=$m(),[n,r]=q.useState(null),[s,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!qe){console.error("Firebase not initialized"),h(!1);return}const F=li(qe,Dt.FACILITIES,t),V=await oL(F);if(V.exists()){r({id:parseInt(V.id),...V.data()});const B=hi(qe,Dt.HITS),b=Fc(B,zc("facilityId","==",parseInt(t)),nL("date","desc")),N=(await di(b)).docs.map($=>({id:$.data().id,...$.data()}));o(N)}else console.error("Facility not found");h(!1)}catch(F){console.error("Error fetching facility:",F),h(!1)}})()},[t]),l)return T.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return T.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[T.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),T.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((v=n.location)==null?void 0:v.latitude)??n.latitude??0,p=((E=n.location)==null?void 0:E.longitude)??n.longitude??0,y=k=>{switch(k){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return T.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[T.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Back to Map"}),T.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),T.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),T.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:T.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[T.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),T.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("span",{style:{color:y(n.type),fontSize:"28px"},children:""}),T.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[T.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),T.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),T.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),T.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[T.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),T.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[T.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),T.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[T.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),T.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),""]})]}),T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),T.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),""]})]})]}),T.jsx("div",{style:{marginTop:"20px"},children:T.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps "})})]}),s.length>0&&T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[T.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),T.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((k,F)=>T.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-F}),T.jsxs("div",{children:[T.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(k.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),T.jsxs("div",{style:{fontSize:"13px",color:"#888"},children:["Expected repair time: ",T.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[k.expectedRepairTime," days"]})]})]})]}),k.videoLink&&T.jsx("a",{href:k.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:" Video"})]}),k.notes&&T.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:k.notes})]},k.id))})]})]})})]})},QN=()=>T.jsx(cC,{children:T.jsxs(aC,{children:[T.jsx(bc,{path:"/",element:T.jsx(ZN,{})}),T.jsx(bc,{path:"/facility/:id",element:T.jsx(KN,{})}),T.jsx(bc,{path:"/admin",element:T.jsx(SN,{})})]})}),YN=Pf.createRoot(document.getElementById("root"));YN.render(T.jsx(qo.StrictMode,{children:T.jsx(QN,{})}));
