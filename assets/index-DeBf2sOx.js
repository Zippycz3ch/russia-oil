function H1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a0={exports:{}},Dh={},l0={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),$1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),G1=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),eI=Symbol.for("react.lazy"),d_=Symbol.iterator;function tI(t){return t===null||typeof t!="object"?null:(t=d_&&t[d_]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,h0={};function ia(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=ia.prototype;function Yp(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}var Xp=Yp.prototype=new d0;Xp.constructor=Yp;c0(Xp,ia.prototype);Xp.isPureReactComponent=!0;var f_=Array.isArray,f0=Object.prototype.hasOwnProperty,Jp={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)f0.call(e,i)&&!p0.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:iu,type:t,key:o,ref:l,props:s,_owner:Jp.current}}function nI(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function em(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function iI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p_=/\/+/g;function zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iI(""+t.key):e.toString(36)}function xc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case iu:case $1:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+zd(l,0):i,f_(s)?(n="",t!=null&&(n=t.replace(p_,"$&/")+"/"),xc(s,e,n,"",function(p){return p})):s!=null&&(em(s)&&(s=nI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(p_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",f_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+zd(o,h);l+=xc(o,e,n,d,s)}else if(d=tI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+zd(o,h++),l+=xc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ec(t,e,n){if(t==null)return t;var i=[],s=0;return xc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function rI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Ic={transition:null},sI={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:Jp};function g0(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:ec,forEach:function(t,e,n){ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ec(t,function(){e++}),e},toArray:function(t){return ec(t,function(e){return e})||[]},only:function(t){if(!em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=ia;Te.Fragment=q1;Te.Profiler=Z1;Te.PureComponent=Yp;Te.StrictMode=G1;Te.Suspense=X1;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sI;Te.act=g0;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=c0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Jp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)f0.call(e,d)&&!p0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:iu,type:t.type,key:s,ref:o,props:i,_owner:l}};Te.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};Te.createElement=m0;Te.createFactory=function(t){var e=m0.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:Y1,render:t}};Te.isValidElement=em;Te.lazy=function(t){return{$$typeof:eI,_payload:{_status:-1,_result:t},_init:rI}};Te.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Ic.transition;Ic.transition={};try{t()}finally{Ic.transition=e}};Te.unstable_act=g0;Te.useCallback=function(t,e){return qt.current.useCallback(t,e)};Te.useContext=function(t){return qt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return qt.current.useEffect(t,e)};Te.useId=function(){return qt.current.useId()};Te.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return qt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Te.useRef=function(t){return qt.current.useRef(t)};Te.useState=function(t){return qt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return qt.current.useTransition()};Te.version="18.3.1";l0.exports=Te;var q=l0.exports;const Cl=o0(q),oI=H1({__proto__:null,default:Cl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI=q,lI=Symbol.for("react.element"),uI=Symbol.for("react.fragment"),cI=Object.prototype.hasOwnProperty,hI=aI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dI={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)cI.call(e,i)&&!dI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lI,type:t,key:o,ref:l,props:s,_owner:hI.current}}Dh.Fragment=uI;Dh.jsx=_0;Dh.jsxs=_0;a0.exports=Dh;var w=a0.exports,Pf={},y0={exports:{}},fn={},v0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var X=$.length;$.push(le);e:for(;0<X;){var ce=X-1>>>1,ve=$[ce];if(0<s(ve,le))$[ce]=le,$[X]=ve,X=ce;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],X=$.pop();if(X!==le){$[0]=X;e:for(var ce=0,ve=$.length,We=ve>>>1;ce<We;){var ke=2*(ce+1)-1,xe=$[ke],pe=ke+1,_t=$[pe];if(0>s(xe,X))pe<ve&&0>s(_t,xe)?($[ce]=_t,$[pe]=X,ce=pe):($[ce]=xe,$[ke]=X,ce=ke);else if(pe<ve&&0>s(_t,X))$[ce]=_t,$[pe]=X,ce=pe;else break e}}return le}function s($,le){var X=$.sortIndex-le.sortIndex;return X!==0?X:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],_=1,v=null,T=3,b=!1,F=!1,O=!1,z=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var le=n(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=$)i(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(p)}}function W($){if(O=!1,N($),!F)if(n(d)!==null)F=!0,Me(Q);else{var le=n(p);le!==null&&Ze(W,le.startTime-$)}}function Q($,le){F=!1,O&&(O=!1,k(C),C=-1),b=!0;var X=T;try{for(N(le),v=n(d);v!==null&&(!(v.expirationTime>le)||$&&!V());){var ce=v.callback;if(typeof ce=="function"){v.callback=null,T=v.priorityLevel;var ve=ce(v.expirationTime<=le);le=t.unstable_now(),typeof ve=="function"?v.callback=ve:v===n(d)&&i(d),N(le)}else i(d);v=n(d)}if(v!==null)var We=!0;else{var ke=n(p);ke!==null&&Ze(W,ke.startTime-le),We=!1}return We}finally{v=null,T=X,b=!1}}var J=!1,R=null,C=-1,S=5,M=-1;function V(){return!(t.unstable_now()-M<S)}function P(){if(R!==null){var $=t.unstable_now();M=$;var le=!0;try{le=R(!0,$)}finally{le?A():(J=!1,R=null)}}else J=!1}var A;if(typeof x=="function")A=function(){x(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Le=te.port2;te.port1.onmessage=P,A=function(){Le.postMessage(null)}}else A=function(){z(P,0)};function Me($){R=$,J||(J=!0,A())}function Ze($,le){C=z(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){F||b||(F=!0,Me(Q))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var X=T;T=le;try{return $()}finally{T=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=T;T=$;try{return le()}finally{T=X}},t.unstable_scheduleCallback=function($,le,X){var ce=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,$){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,$={id:_++,callback:le,priorityLevel:$,startTime:X,expirationTime:ve,sortIndex:-1},X>ce?($.sortIndex=X,e(p,$),n(d)===null&&$===n(p)&&(O?(k(C),C=-1):O=!0,Ze(W,X-ce))):($.sortIndex=ve,e(d,$),F||b||(F=!0,Me(Q))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var le=T;return function(){var X=T;T=le;try{return $.apply(this,arguments)}finally{T=X}}}})(w0);v0.exports=w0;var fI=v0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI=q,dn=fI;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,Pl={};function Rs(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(Pl[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,mI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m_={},g_={};function gI(t){return Af.call(g_,t)?!0:Af.call(m_,t)?!1:mI.test(t)?g_[t]=!0:(m_[t]=!0,!1)}function _I(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yI(t,e,n,i){if(e===null||typeof e>"u"||_I(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tm,nm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,i){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yI(e,n,s,i)&&(n=null),i||s===null?gI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var qi=pI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),I0=Symbol.for("react.offscreen"),__=Symbol.iterator;function Ga(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,jd;function tl(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Bd=!1;function Ud(t,e){if(!t||Bd)return"";Bd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Bd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tl(t):""}function vI(t){switch(t.tag){case 5:return tl(t.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case kf:return"Profiler";case rm:return"StrictMode";case Rf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case om:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function wI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EI(t){var e=S0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=EI(t))}function C0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=S0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function y_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P0(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Of(t,e){P0(t,e);var n=Nr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mf(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mf(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nl=Array.isArray;function bo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Df(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(nl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function A0(t,e){var n=Nr(e.value),i=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function E_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ic,R0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TI=["Webkit","ms","Moz","O"];Object.keys(hl).forEach(function(t){TI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hl[e]=hl[t]})});function b0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hl.hasOwnProperty(t)&&hl[t]?(""+e).trim():e+"px"}function L0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=b0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var xI=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(t,e){if(e){if(xI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function zf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bf=null,Lo=null,No=null;function T_(t){if(t=ou(t)){if(typeof Bf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Bh(e),Bf(t.stateNode,t.type,e))}}function N0(t){Lo?No?No.push(t):No=[t]:Lo=t}function O0(){if(Lo){var t=Lo,e=No;if(No=Lo=null,T_(t),e)for(t=0;t<e.length;t++)T_(e[t])}}function M0(t,e){return t(e)}function D0(){}var Hd=!1;function V0(t,e,n){if(Hd)return t(e,n);Hd=!0;try{return M0(t,e,n)}finally{Hd=!1,(Lo!==null||No!==null)&&(D0(),O0())}}function kl(t,e){var n=t.stateNode;if(n===null)return null;var i=Bh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Uf=!1;if(Fi)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Uf=!1}function II(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var dl=!1,Zc=null,Kc=!1,Hf=null,SI={onError:function(t){dl=!0,Zc=t}};function CI(t,e,n,i,s,o,l,h,d){dl=!1,Zc=null,II.apply(SI,arguments)}function PI(t,e,n,i,s,o,l,h,d){if(CI.apply(this,arguments),dl){if(dl){var p=Zc;dl=!1,Zc=null}else throw Error(Y(198));Kc||(Kc=!0,Hf=p)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x_(t){if(bs(t)!==t)throw Error(Y(188))}function AI(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return x_(s),t;if(o===i)return x_(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function z0(t){return t=AI(t),t!==null?j0(t):null}function j0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j0(t);if(e!==null)return e;t=t.sibling}return null}var B0=dn.unstable_scheduleCallback,I_=dn.unstable_cancelCallback,kI=dn.unstable_shouldYield,RI=dn.unstable_requestPaint,st=dn.unstable_now,bI=dn.unstable_getCurrentPriorityLevel,lm=dn.unstable_ImmediatePriority,U0=dn.unstable_UserBlockingPriority,Qc=dn.unstable_NormalPriority,LI=dn.unstable_LowPriority,H0=dn.unstable_IdlePriority,Vh=null,li=null;function NI(t){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(Vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:DI,OI=Math.log,MI=Math.LN2;function DI(t){return t>>>=0,t===0?32:31-(OI(t)/MI|0)|0}var rc=64,sc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=il(h):(o&=l,o!==0&&(i=il(o)))}else l=n&~s,l!==0?i=il(l):o!==0&&(i=il(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Un(e),s=1<<n,i|=t[n],e&=~s;return i}function VI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Un(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=VI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W0(){var t=rc;return rc<<=1,!(rc&4194240)&&(rc=64),t}function Wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function zI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Un(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Un(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var je=0;function $0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q0,cm,G0,Z0,K0,$f=!1,oc=[],vr=null,wr=null,Er=null,Rl=new Map,bl=new Map,ur=[],jI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S_(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Ka(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ou(e),e!==null&&cm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BI(t,e,n,i,s){switch(e){case"focusin":return vr=Ka(vr,t,e,n,i,s),!0;case"dragenter":return wr=Ka(wr,t,e,n,i,s),!0;case"mouseover":return Er=Ka(Er,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Rl.set(o,Ka(Rl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,bl.set(o,Ka(bl.get(o)||null,t,e,n,i,s)),!0}return!1}function Q0(t){var e=ds(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=F0(n),e!==null){t.blockedOn=e,K0(t.priority,function(){G0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);jf=i,n.target.dispatchEvent(i),jf=null}else return e=ou(n),e!==null&&cm(e),t.blockedOn=n,!1;e.shift()}return!0}function C_(t,e,n){Sc(t)&&n.delete(e)}function UI(){$f=!1,vr!==null&&Sc(vr)&&(vr=null),wr!==null&&Sc(wr)&&(wr=null),Er!==null&&Sc(Er)&&(Er=null),Rl.forEach(C_),bl.forEach(C_)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,UI)))}function Ll(t){function e(s){return Qa(s,t)}if(0<oc.length){Qa(oc[0],t);for(var n=1;n<oc.length;n++){var i=oc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vr!==null&&Qa(vr,t),wr!==null&&Qa(wr,t),Er!==null&&Qa(Er,t),Rl.forEach(e),bl.forEach(e),n=0;n<ur.length;n++)i=ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Q0(n),n.blockedOn===null&&ur.shift()}var Oo=qi.ReactCurrentBatchConfig,Xc=!0;function HI(t,e,n,i){var s=je,o=Oo.transition;Oo.transition=null;try{je=1,hm(t,e,n,i)}finally{je=s,Oo.transition=o}}function WI(t,e,n,i){var s=je,o=Oo.transition;Oo.transition=null;try{je=4,hm(t,e,n,i)}finally{je=s,Oo.transition=o}}function hm(t,e,n,i){if(Xc){var s=qf(t,e,n,i);if(s===null)ef(t,e,i,Jc,n),S_(t,i);else if(BI(s,t,e,n,i))i.stopPropagation();else if(S_(t,i),e&4&&-1<jI.indexOf(t)){for(;s!==null;){var o=ou(s);if(o!==null&&q0(o),o=qf(t,e,n,i),o===null&&ef(t,e,i,Jc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else ef(t,e,i,null,n)}}var Jc=null;function qf(t,e,n,i){if(Jc=null,t=am(i),t=ds(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function Y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bI()){case lm:return 1;case U0:return 4;case Qc:case LI:return 16;case H0:return 536870912;default:return 16}default:return 16}}var mr=null,dm=null,Cc=null;function X0(){if(Cc)return Cc;var t,e=dm,n=e.length,i,s="value"in mr?mr.value:mr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Cc=s.slice(t,1<i?1-i:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ac(){return!0}function P_(){return!1}function pn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ac:P_,this.isPropagationStopped=P_,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=pn(ra),su=Xe({},ra,{view:0,detail:0}),$I=pn(su),$d,qd,Ya,Fh=Xe({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?($d=t.screenX-Ya.screenX,qd=t.screenY-Ya.screenY):qd=$d=0,Ya=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),A_=pn(Fh),qI=Xe({},Fh,{dataTransfer:0}),GI=pn(qI),ZI=Xe({},su,{relatedTarget:0}),Gd=pn(ZI),KI=Xe({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=pn(KI),YI=Xe({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XI=pn(YI),JI=Xe({},ra,{data:0}),k_=pn(JI),eS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nS[t])?!!e[t]:!1}function pm(){return iS}var rS=Xe({},su,{key:function(t){if(t.key){var e=eS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sS=pn(rS),oS=Xe({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R_=pn(oS),aS=Xe({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),lS=pn(aS),uS=Xe({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),cS=pn(uS),hS=Xe({},Fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dS=pn(hS),fS=[9,13,27,32],mm=Fi&&"CompositionEvent"in window,fl=null;Fi&&"documentMode"in document&&(fl=document.documentMode);var pS=Fi&&"TextEvent"in window&&!fl,J0=Fi&&(!mm||fl&&8<fl&&11>=fl),b_=" ",L_=!1;function ew(t,e){switch(t){case"keyup":return fS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function mS(t,e){switch(t){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(L_=!0,b_);case"textInput":return t=e.data,t===b_&&L_?null:t;default:return null}}function gS(t,e){if(wo)return t==="compositionend"||!mm&&ew(t,e)?(t=X0(),Cc=dm=mr=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J0&&e.locale!=="ko"?null:e.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_S[t.type]:e==="textarea"}function nw(t,e,n,i){N0(i),e=eh(e,"onChange"),0<e.length&&(n=new fm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pl=null,Nl=null;function yS(t){fw(t,0)}function zh(t){var e=xo(t);if(C0(e))return t}function vS(t,e){if(t==="change")return e}var iw=!1;if(Fi){var Zd;if(Fi){var Kd="oninput"in document;if(!Kd){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),Kd=typeof O_.oninput=="function"}Zd=Kd}else Zd=!1;iw=Zd&&(!document.documentMode||9<document.documentMode)}function M_(){pl&&(pl.detachEvent("onpropertychange",rw),Nl=pl=null)}function rw(t){if(t.propertyName==="value"&&zh(Nl)){var e=[];nw(e,Nl,t,am(t)),V0(yS,e)}}function wS(t,e,n){t==="focusin"?(M_(),pl=e,Nl=n,pl.attachEvent("onpropertychange",rw)):t==="focusout"&&M_()}function ES(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zh(Nl)}function TS(t,e){if(t==="click")return zh(e)}function xS(t,e){if(t==="input"||t==="change")return zh(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:IS;function Ol(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Af.call(e,s)||!$n(t[s],e[s]))return!1}return!0}function D_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V_(t,e){var n=D_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D_(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ow(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SS(t){var e=ow(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(i!==null&&gm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=V_(n,o);var l=V_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CS=Fi&&"documentMode"in document&&11>=document.documentMode,Eo=null,Gf=null,ml=null,Zf=!1;function F_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Eo==null||Eo!==Gc(i)||(i=Eo,"selectionStart"in i&&gm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ml&&Ol(ml,i)||(ml=i,i=eh(Gf,"onSelect"),0<i.length&&(e=new fm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Eo)))}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Qd={},aw={};Fi&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function jh(t){if(Qd[t])return Qd[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aw)return Qd[t]=e[n];return t}var lw=jh("animationend"),uw=jh("animationiteration"),cw=jh("animationstart"),hw=jh("transitionend"),dw=new Map,z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){dw.set(t,e),Rs(e,[t])}for(var Yd=0;Yd<z_.length;Yd++){var Xd=z_[Yd],PS=Xd.toLowerCase(),AS=Xd[0].toUpperCase()+Xd.slice(1);Br(PS,"on"+AS)}Br(lw,"onAnimationEnd");Br(uw,"onAnimationIteration");Br(cw,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(hw,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function j_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,PI(i,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;j_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;j_(s,h,p),o=d}}}if(Kc)throw t=Hf,Kc=!1,Hf=null,t}function $e(t,e){var n=e[Jf];n===void 0&&(n=e[Jf]=new Set);var i=t+"__bubble";n.has(i)||(pw(e,t,2,!1),n.add(i))}function Jd(t,e,n){var i=0;e&&(i|=4),pw(n,t,i,e)}var uc="_reactListening"+Math.random().toString(36).slice(2);function Ml(t){if(!t[uc]){t[uc]=!0,E0.forEach(function(n){n!=="selectionchange"&&(kS.has(n)||Jd(n,!1,t),Jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uc]||(e[uc]=!0,Jd("selectionchange",!1,e))}}function pw(t,e,n,i){switch(Y0(e)){case 1:var s=HI;break;case 4:s=WI;break;default:s=hm}n=s.bind(null,e,n,t),s=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ef(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ds(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}V0(function(){var p=o,_=am(n),v=[];e:{var T=dw.get(t);if(T!==void 0){var b=fm,F=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":b=sS;break;case"focusin":F="focus",b=Gd;break;case"focusout":F="blur",b=Gd;break;case"beforeblur":case"afterblur":b=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=GI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=lS;break;case lw:case uw:case cw:b=QI;break;case hw:b=cS;break;case"scroll":b=$I;break;case"wheel":b=dS;break;case"copy":case"cut":case"paste":b=XI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=R_}var O=(e&4)!==0,z=!O&&t==="scroll",k=O?T!==null?T+"Capture":null:T;O=[];for(var x=p,N;x!==null;){N=x;var W=N.stateNode;if(N.tag===5&&W!==null&&(N=W,k!==null&&(W=kl(x,k),W!=null&&O.push(Dl(x,W,N)))),z)break;x=x.return}0<O.length&&(T=new b(T,F,null,n,_),v.push({event:T,listeners:O}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",T&&n!==jf&&(F=n.relatedTarget||n.fromElement)&&(ds(F)||F[zi]))break e;if((b||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,b?(F=n.relatedTarget||n.toElement,b=p,F=F?ds(F):null,F!==null&&(z=bs(F),F!==z||F.tag!==5&&F.tag!==6)&&(F=null)):(b=null,F=p),b!==F)){if(O=A_,W="onMouseLeave",k="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(O=R_,W="onPointerLeave",k="onPointerEnter",x="pointer"),z=b==null?T:xo(b),N=F==null?T:xo(F),T=new O(W,x+"leave",b,n,_),T.target=z,T.relatedTarget=N,W=null,ds(_)===p&&(O=new O(k,x+"enter",F,n,_),O.target=N,O.relatedTarget=z,W=O),z=W,b&&F)t:{for(O=b,k=F,x=0,N=O;N;N=ho(N))x++;for(N=0,W=k;W;W=ho(W))N++;for(;0<x-N;)O=ho(O),x--;for(;0<N-x;)k=ho(k),N--;for(;x--;){if(O===k||k!==null&&O===k.alternate)break t;O=ho(O),k=ho(k)}O=null}else O=null;b!==null&&B_(v,T,b,O,!1),F!==null&&z!==null&&B_(v,z,F,O,!0)}}e:{if(T=p?xo(p):window,b=T.nodeName&&T.nodeName.toLowerCase(),b==="select"||b==="input"&&T.type==="file")var Q=vS;else if(N_(T))if(iw)Q=xS;else{Q=ES;var J=wS}else(b=T.nodeName)&&b.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Q=TS);if(Q&&(Q=Q(t,p))){nw(v,Q,n,_);break e}J&&J(t,T,p),t==="focusout"&&(J=T._wrapperState)&&J.controlled&&T.type==="number"&&Mf(T,"number",T.value)}switch(J=p?xo(p):window,t){case"focusin":(N_(J)||J.contentEditable==="true")&&(Eo=J,Gf=p,ml=null);break;case"focusout":ml=Gf=Eo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,F_(v,n,_);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":F_(v,n,_)}var R;if(mm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else wo?ew(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(J0&&n.locale!=="ko"&&(wo||C!=="onCompositionStart"?C==="onCompositionEnd"&&wo&&(R=X0()):(mr=_,dm="value"in mr?mr.value:mr.textContent,wo=!0)),J=eh(p,C),0<J.length&&(C=new k_(C,t,null,n,_),v.push({event:C,listeners:J}),R?C.data=R:(R=tw(n),R!==null&&(C.data=R)))),(R=pS?mS(t,n):gS(t,n))&&(p=eh(p,"onBeforeInput"),0<p.length&&(_=new k_("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:p}),_.data=R))}fw(v,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eh(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=kl(t,n),o!=null&&i.unshift(Dl(t,o,s)),o=kl(t,e),o!=null&&i.push(Dl(t,o,s))),t=t.return}return i}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=kl(n,o),d!=null&&l.unshift(Dl(n,d,h))):s||(d=kl(n,o),d!=null&&l.push(Dl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var RS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function U_(t){return(typeof t=="string"?t:""+t).replace(RS,`
`).replace(bS,"")}function cc(t,e,n){if(e=U_(e),U_(t)!==e&&n)throw Error(Y(425))}function th(){}var Kf=null,Qf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,LS=typeof clearTimeout=="function"?clearTimeout:void 0,H_=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof H_<"u"?function(t){return H_.resolve(null).then(t).catch(OS)}:Xf;function OS(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ll(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ll(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),si="__reactFiber$"+sa,Vl="__reactProps$"+sa,zi="__reactContainer$"+sa,Jf="__reactEvents$"+sa,MS="__reactListeners$"+sa,DS="__reactHandles$"+sa;function ds(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zi]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W_(t);t!==null;){if(n=t[si])return n;t=W_(t)}return e}t=n,n=t.parentNode}return null}function ou(t){return t=t[si]||t[zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Bh(t){return t[Vl]||null}var ep=[],Io=-1;function Ur(t){return{current:t}}function Ge(t){0>Io||(t.current=ep[Io],ep[Io]=null,Io--)}function He(t,e){Io++,ep[Io]=t.current,t.current=e}var Or={},zt=Ur(Or),nn=Ur(!1),ws=Or;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Or;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function nh(){Ge(nn),Ge(zt)}function $_(t,e,n){if(zt.current!==Or)throw Error(Y(168));He(zt,e),He(nn,n)}function mw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Y(108,wI(t)||"Unknown",s));return Xe({},n,i)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,ws=zt.current,He(zt,t),He(nn,nn.current),!0}function q_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=mw(t,e,ws),i.__reactInternalMemoizedMergedChildContext=t,Ge(nn),Ge(zt),He(zt,t)):Ge(nn),He(nn,n)}var bi=null,Uh=!1,nf=!1;function gw(t){bi===null?bi=[t]:bi.push(t)}function VS(t){Uh=!0,gw(t)}function Hr(){if(!nf&&bi!==null){nf=!0;var t=0,e=je;try{var n=bi;for(je=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}bi=null,Uh=!1}catch(s){throw bi!==null&&(bi=bi.slice(t+1)),B0(lm,Hr),s}finally{je=e,nf=!1}}return null}var So=[],Co=0,rh=null,sh=0,xn=[],In=0,Es=null,Li=1,Ni="";function us(t,e){So[Co++]=sh,So[Co++]=rh,rh=t,sh=e}function _w(t,e,n){xn[In++]=Li,xn[In++]=Ni,xn[In++]=Es,Es=t;var i=Li;t=Ni;var s=32-Un(i)-1;i&=~(1<<s),n+=1;var o=32-Un(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Li=1<<32-Un(e)+s|n<<s|i,Ni=o+t}else Li=1<<o|n<<s|i,Ni=t}function _m(t){t.return!==null&&(us(t,1),_w(t,1,0))}function ym(t){for(;t===rh;)rh=So[--Co],So[Co]=null,sh=So[--Co],So[Co]=null;for(;t===Es;)Es=xn[--In],xn[In]=null,Ni=xn[--In],xn[In]=null,Li=xn[--In],xn[In]=null}var hn=null,un=null,Ke=!1,zn=null;function yw(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Li,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function np(t){if(Ke){var e=un;if(e){var n=e;if(!G_(t,e)){if(tp(t))throw Error(Y(418));e=Tr(n.nextSibling);var i=hn;e&&G_(t,e)?yw(i,n):(t.flags=t.flags&-4097|2,Ke=!1,hn=t)}}else{if(tp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ke=!1,hn=t}}}function Z_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function hc(t){if(t!==hn)return!1;if(!Ke)return Z_(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=un)){if(tp(t))throw vw(),Error(Y(418));for(;e;)yw(t,e),e=Tr(e.nextSibling)}if(Z_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?Tr(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=un;t;)t=Tr(t.nextSibling)}function Wo(){un=hn=null,Ke=!1}function vm(t){zn===null?zn=[t]:zn.push(t)}var FS=qi.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function dc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K_(t){var e=t._init;return e(t._payload)}function ww(t){function e(k,x){if(t){var N=k.deletions;N===null?(k.deletions=[x],k.flags|=16):N.push(x)}}function n(k,x){if(!t)return null;for(;x!==null;)e(k,x),x=x.sibling;return null}function i(k,x){for(k=new Map;x!==null;)x.key!==null?k.set(x.key,x):k.set(x.index,x),x=x.sibling;return k}function s(k,x){return k=Cr(k,x),k.index=0,k.sibling=null,k}function o(k,x,N){return k.index=N,t?(N=k.alternate,N!==null?(N=N.index,N<x?(k.flags|=2,x):N):(k.flags|=2,x)):(k.flags|=1048576,x)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,x,N,W){return x===null||x.tag!==6?(x=cf(N,k.mode,W),x.return=k,x):(x=s(x,N),x.return=k,x)}function d(k,x,N,W){var Q=N.type;return Q===vo?_(k,x,N.props.children,W,N.key):x!==null&&(x.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ar&&K_(Q)===x.type)?(W=s(x,N.props),W.ref=Xa(k,x,N),W.return=k,W):(W=Oc(N.type,N.key,N.props,null,k.mode,W),W.ref=Xa(k,x,N),W.return=k,W)}function p(k,x,N,W){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=hf(N,k.mode,W),x.return=k,x):(x=s(x,N.children||[]),x.return=k,x)}function _(k,x,N,W,Q){return x===null||x.tag!==7?(x=_s(N,k.mode,W,Q),x.return=k,x):(x=s(x,N),x.return=k,x)}function v(k,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return x=cf(""+x,k.mode,N),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return N=Oc(x.type,x.key,x.props,null,k.mode,N),N.ref=Xa(k,null,x),N.return=k,N;case yo:return x=hf(x,k.mode,N),x.return=k,x;case ar:var W=x._init;return v(k,W(x._payload),N)}if(nl(x)||Ga(x))return x=_s(x,k.mode,N,null),x.return=k,x;dc(k,x)}return null}function T(k,x,N,W){var Q=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Q!==null?null:h(k,x,""+N,W);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tc:return N.key===Q?d(k,x,N,W):null;case yo:return N.key===Q?p(k,x,N,W):null;case ar:return Q=N._init,T(k,x,Q(N._payload),W)}if(nl(N)||Ga(N))return Q!==null?null:_(k,x,N,W,null);dc(k,N)}return null}function b(k,x,N,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(N)||null,h(x,k,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case tc:return k=k.get(W.key===null?N:W.key)||null,d(x,k,W,Q);case yo:return k=k.get(W.key===null?N:W.key)||null,p(x,k,W,Q);case ar:var J=W._init;return b(k,x,N,J(W._payload),Q)}if(nl(W)||Ga(W))return k=k.get(N)||null,_(x,k,W,Q,null);dc(x,W)}return null}function F(k,x,N,W){for(var Q=null,J=null,R=x,C=x=0,S=null;R!==null&&C<N.length;C++){R.index>C?(S=R,R=null):S=R.sibling;var M=T(k,R,N[C],W);if(M===null){R===null&&(R=S);break}t&&R&&M.alternate===null&&e(k,R),x=o(M,x,C),J===null?Q=M:J.sibling=M,J=M,R=S}if(C===N.length)return n(k,R),Ke&&us(k,C),Q;if(R===null){for(;C<N.length;C++)R=v(k,N[C],W),R!==null&&(x=o(R,x,C),J===null?Q=R:J.sibling=R,J=R);return Ke&&us(k,C),Q}for(R=i(k,R);C<N.length;C++)S=b(R,k,C,N[C],W),S!==null&&(t&&S.alternate!==null&&R.delete(S.key===null?C:S.key),x=o(S,x,C),J===null?Q=S:J.sibling=S,J=S);return t&&R.forEach(function(V){return e(k,V)}),Ke&&us(k,C),Q}function O(k,x,N,W){var Q=Ga(N);if(typeof Q!="function")throw Error(Y(150));if(N=Q.call(N),N==null)throw Error(Y(151));for(var J=Q=null,R=x,C=x=0,S=null,M=N.next();R!==null&&!M.done;C++,M=N.next()){R.index>C?(S=R,R=null):S=R.sibling;var V=T(k,R,M.value,W);if(V===null){R===null&&(R=S);break}t&&R&&V.alternate===null&&e(k,R),x=o(V,x,C),J===null?Q=V:J.sibling=V,J=V,R=S}if(M.done)return n(k,R),Ke&&us(k,C),Q;if(R===null){for(;!M.done;C++,M=N.next())M=v(k,M.value,W),M!==null&&(x=o(M,x,C),J===null?Q=M:J.sibling=M,J=M);return Ke&&us(k,C),Q}for(R=i(k,R);!M.done;C++,M=N.next())M=b(R,k,C,M.value,W),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?C:M.key),x=o(M,x,C),J===null?Q=M:J.sibling=M,J=M);return t&&R.forEach(function(P){return e(k,P)}),Ke&&us(k,C),Q}function z(k,x,N,W){if(typeof N=="object"&&N!==null&&N.type===vo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case tc:e:{for(var Q=N.key,J=x;J!==null;){if(J.key===Q){if(Q=N.type,Q===vo){if(J.tag===7){n(k,J.sibling),x=s(J,N.props.children),x.return=k,k=x;break e}}else if(J.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ar&&K_(Q)===J.type){n(k,J.sibling),x=s(J,N.props),x.ref=Xa(k,J,N),x.return=k,k=x;break e}n(k,J);break}else e(k,J);J=J.sibling}N.type===vo?(x=_s(N.props.children,k.mode,W,N.key),x.return=k,k=x):(W=Oc(N.type,N.key,N.props,null,k.mode,W),W.ref=Xa(k,x,N),W.return=k,k=W)}return l(k);case yo:e:{for(J=N.key;x!==null;){if(x.key===J)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){n(k,x.sibling),x=s(x,N.children||[]),x.return=k,k=x;break e}else{n(k,x);break}else e(k,x);x=x.sibling}x=hf(N,k.mode,W),x.return=k,k=x}return l(k);case ar:return J=N._init,z(k,x,J(N._payload),W)}if(nl(N))return F(k,x,N,W);if(Ga(N))return O(k,x,N,W);dc(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,x!==null&&x.tag===6?(n(k,x.sibling),x=s(x,N),x.return=k,k=x):(n(k,x),x=cf(N,k.mode,W),x.return=k,k=x),l(k)):n(k,x)}return z}var $o=ww(!0),Ew=ww(!1),oh=Ur(null),ah=null,Po=null,wm=null;function Em(){wm=Po=ah=null}function Tm(t){var e=oh.current;Ge(oh),t._currentValue=e}function ip(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){ah=t,wm=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(wm!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(ah===null)throw Error(Y(308));Po=t,ah.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var fs=null;function xm(t){fs===null?fs=[t]:fs.push(t)}function Tw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,xm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ji(t,i)}function ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ji(t,n)}return s=i.interleaved,s===null?(e.next=e,xm(i)):(e.next=s.next,s.next=e),i.interleaved=e,ji(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}function Q_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lh(t,e,n,i){var s=t.updateQueue;lr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==l&&(h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=d))}if(o!==null){var v=s.baseState;l=0,_=p=d=null,h=o;do{var T=h.lane,b=h.eventTime;if((i&T)===T){_!==null&&(_=_.next={eventTime:b,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var F=t,O=h;switch(T=e,b=n,O.tag){case 1:if(F=O.payload,typeof F=="function"){v=F.call(b,v,T);break e}v=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=O.payload,T=typeof F=="function"?F.call(b,v,T):F,T==null)break e;v=Xe({},v,T);break e;case 2:lr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else b={eventTime:b,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(p=_=b,d=v):_=_.next=b,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(_===null&&(d=v),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);xs|=l,t.lanes=l,t.memoizedState=v}}function Y_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var au={},ui=Ur(au),Fl=Ur(au),zl=Ur(au);function ps(t){if(t===au)throw Error(Y(174));return t}function Sm(t,e){switch(He(zl,e),He(Fl,t),He(ui,au),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}Ge(ui),He(ui,e)}function qo(){Ge(ui),Ge(Fl),Ge(zl)}function Iw(t){ps(zl.current);var e=ps(ui.current),n=Vf(e,t.type);e!==n&&(He(Fl,t),He(ui,n))}function Cm(t){Fl.current===t&&(Ge(ui),Ge(Fl))}var Qe=Ur(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function Pm(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var kc=qi.ReactCurrentDispatcher,sf=qi.ReactCurrentBatchConfig,Ts=0,Ye=null,ft=null,xt=null,ch=!1,gl=!1,jl=0,zS=0;function Nt(){throw Error(Y(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$n(t[n],e[n]))return!1;return!0}function km(t,e,n,i,s,o){if(Ts=o,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kc.current=t===null||t.memoizedState===null?HS:WS,t=n(i,s),gl){o=0;do{if(gl=!1,jl=0,25<=o)throw Error(Y(301));o+=1,xt=ft=null,e.updateQueue=null,kc.current=$S,t=n(i,s)}while(gl)}if(kc.current=hh,e=ft!==null&&ft.next!==null,Ts=0,xt=ft=Ye=null,ch=!1,e)throw Error(Y(300));return t}function Rm(){var t=jl!==0;return jl=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ye.memoizedState=xt=t:xt=xt.next=t,xt}function Rn(){if(ft===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=xt===null?Ye.memoizedState:xt.next;if(e!==null)xt=e,ft=t;else{if(t===null)throw Error(Y(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},xt===null?Ye.memoizedState=xt=t:xt=xt.next=t}return xt}function Bl(t,e){return typeof e=="function"?e(t):e}function of(t){var e=Rn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=ft,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var _=p.lane;if((Ts&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var v={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=v,l=i):d=d.next=v,Ye.lanes|=_,xs|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,$n(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ye.lanes|=o,xs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function af(t){var e=Rn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);$n(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Sw(){}function Cw(t,e){var n=Ye,i=Rn(),s=e(),o=!$n(i.memoizedState,s);if(o&&(i.memoizedState=s,tn=!0),i=i.queue,bm(kw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Ul(9,Aw.bind(null,n,i,s,e),void 0,null),It===null)throw Error(Y(349));Ts&30||Pw(n,e,s)}return s}function Pw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Aw(t,e,n,i){e.value=n,e.getSnapshot=i,Rw(e)&&bw(t)}function kw(t,e,n){return n(function(){Rw(e)&&bw(t)})}function Rw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$n(t,n)}catch{return!0}}function bw(t){var e=ji(t,1);e!==null&&Hn(e,t,1,-1)}function X_(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=US.bind(null,Ye,t),[e.memoizedState,t]}function Ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Lw(){return Rn().memoizedState}function Rc(t,e,n,i){var s=ii();Ye.flags|=t,s.memoizedState=Ul(1|e,n,void 0,i===void 0?null:i)}function Hh(t,e,n,i){var s=Rn();i=i===void 0?null:i;var o=void 0;if(ft!==null){var l=ft.memoizedState;if(o=l.destroy,i!==null&&Am(i,l.deps)){s.memoizedState=Ul(e,n,o,i);return}}Ye.flags|=t,s.memoizedState=Ul(1|e,n,o,i)}function J_(t,e){return Rc(8390656,8,t,e)}function bm(t,e){return Hh(2048,8,t,e)}function Nw(t,e){return Hh(4,2,t,e)}function Ow(t,e){return Hh(4,4,t,e)}function Mw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dw(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,Mw.bind(null,e,t),n)}function Lm(){}function Vw(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Am(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Fw(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Am(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function zw(t,e,n){return Ts&21?($n(n,e)||(n=W0(),Ye.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function jS(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var i=sf.transition;sf.transition={};try{t(!1),e()}finally{je=n,sf.transition=i}}function jw(){return Rn().memoizedState}function BS(t,e,n){var i=Sr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))Uw(e,n);else if(n=Tw(t,e,n,i),n!==null){var s=$t();Hn(n,t,i,s),Hw(n,e,i)}}function US(t,e,n){var i=Sr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))Uw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,$n(h,l)){var d=e.interleaved;d===null?(s.next=s,xm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Tw(t,e,s,i),n!==null&&(s=$t(),Hn(n,t,i,s),Hw(n,e,i))}}function Bw(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function Uw(t,e){gl=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,um(t,n)}}var hh={readContext:kn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},HS={readContext:kn,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:J_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4194308,4,Mw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rc(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=BS.bind(null,Ye,t),[i.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:X_,useDebugValue:Lm,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=X_(!1),e=t[0];return t=jS.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ye,s=ii();if(Ke){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),It===null)throw Error(Y(349));Ts&30||Pw(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,J_(kw.bind(null,i,o,t),[t]),i.flags|=2048,Ul(9,Aw.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ii(),e=It.identifierPrefix;if(Ke){var n=Ni,i=Li;n=(i&~(1<<32-Un(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WS={readContext:kn,useCallback:Vw,useContext:kn,useEffect:bm,useImperativeHandle:Dw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:Fw,useReducer:of,useRef:Lw,useState:function(){return of(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=Rn();return zw(e,ft.memoizedState,t)},useTransition:function(){var t=of(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Cw,useId:jw,unstable_isNewReconciler:!1},$S={readContext:kn,useCallback:Vw,useContext:kn,useEffect:bm,useImperativeHandle:Dw,useInsertionEffect:Nw,useLayoutEffect:Ow,useMemo:Fw,useReducer:af,useRef:Lw,useState:function(){return af(Bl)},useDebugValue:Lm,useDeferredValue:function(t){var e=Rn();return ft===null?e.memoizedState=t:zw(e,ft.memoizedState,t)},useTransition:function(){var t=af(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Cw,useId:jw,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wh={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Sr(t),o=Di(i,s);o.payload=e,n!=null&&(o.callback=n),e=xr(t,o,s),e!==null&&(Hn(e,t,s,i),Ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$t(),s=Sr(t),o=Di(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=xr(t,o,s),e!==null&&(Hn(e,t,s,i),Ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),i=Sr(t),s=Di(n,i);s.tag=2,e!=null&&(s.callback=e),e=xr(t,s,i),e!==null&&(Hn(e,t,i,n),Ac(e,t,i))}};function ey(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,i)||!Ol(s,o):!0}function Ww(t,e,n){var i=!1,s=Or,o=e.contextType;return typeof o=="object"&&o!==null?o=kn(o):(s=rn(e)?ws:zt.current,i=e.contextTypes,o=(i=i!=null)?Ho(t,s):Or),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ty(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Wh.enqueueReplaceState(e,e.state,null)}function sp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Im(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=kn(o):(o=rn(e)?ws:zt.current,s.context=Ho(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wh.enqueueReplaceState(s,s.state,null),lh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",i=e;do n+=vI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qS=typeof WeakMap=="function"?WeakMap:Map;function $w(t,e,n){n=Di(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fh||(fh=!0,gp=i),op(t,e)},n}function qw(t,e,n){n=Di(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){op(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){op(t,e),typeof i!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ny(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=oC.bind(null,t,e,n),e.then(t,t))}function iy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ry(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Di(-1,1),e.tag=2,xr(n,e,1))),n.lanes|=1),t)}var GS=qi.ReactCurrentOwner,tn=!1;function Wt(t,e,n,i){e.child=t===null?Ew(e,null,n,i):$o(e,t.child,n,i)}function sy(t,e,n,i,s){n=n.render;var o=e.ref;return Mo(e,s),i=km(t,e,n,i,o,s),n=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Ke&&n&&_m(e),e.flags|=1,Wt(t,e,i,s),e.child)}function oy(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!jm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Gw(t,e,o,i,s)):(t=Oc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(l,i)&&t.ref===e.ref)return Bi(t,e,s)}return e.flags|=1,t=Cr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ol(o,i)&&t.ref===e.ref)if(tn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Bi(t,e,s)}return ap(t,e,n,i,s)}function Zw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(ko,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(ko,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,He(ko,ln),ln|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,He(ko,ln),ln|=i;return Wt(t,e,s,n),e.child}function Kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,n,i,s){var o=rn(n)?ws:zt.current;return o=Ho(e,o),Mo(e,s),n=km(t,e,n,i,o,s),i=Rm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Ke&&i&&_m(e),e.flags|=1,Wt(t,e,n,s),e.child)}function ay(t,e,n,i,s){if(rn(n)){var o=!0;ih(e)}else o=!1;if(Mo(e,s),e.stateNode===null)bc(t,e),Ww(e,n,i),sp(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=kn(p):(p=rn(n)?ws:zt.current,p=Ho(e,p));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&ty(e,l,i,p),lr=!1;var T=e.memoizedState;l.state=T,lh(e,i,l,s),d=e.memoizedState,h!==i||T!==d||nn.current||lr?(typeof _=="function"&&(rp(e,n,_,i),d=e.memoizedState),(h=lr||ey(e,n,h,i,T,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,xw(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vn(e.type,h),l.props=p,v=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=kn(d):(d=rn(n)?ws:zt.current,d=Ho(e,d));var b=n.getDerivedStateFromProps;(_=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==v||T!==d)&&ty(e,l,i,d),lr=!1,T=e.memoizedState,l.state=T,lh(e,i,l,s);var F=e.memoizedState;h!==v||T!==F||nn.current||lr?(typeof b=="function"&&(rp(e,n,b,i),F=e.memoizedState),(p=lr||ey(e,n,p,i,T,F,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=F),l.props=i,l.state=F,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return lp(t,e,n,i,o,s)}function lp(t,e,n,i,s,o){Kw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&q_(e,n,!1),Bi(t,e,o);i=e.stateNode,GS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,h,o)):Wt(t,e,h,o),e.memoizedState=i.state,s&&q_(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?$_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$_(t,e.context,!1),Sm(t,e.containerInfo)}function ly(t,e,n,i,s){return Wo(),vm(s),e.flags|=256,Wt(t,e,n,i),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var i=e.pendingProps,s=Qe.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Qe,s&1),t===null)return np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Gh(l,i,0,null),t=_s(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=cp(n),e.memoizedState=up,t):Nm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return ZS(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Cr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Cr(h,o):(o=_s(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?cp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=up,i}return o=t.child,t=o.sibling,i=Cr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Nm(t,e){return e=Gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fc(t,e,n,i){return i!==null&&vm(i),$o(e,t.child,null,n),t=Nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZS(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=lf(Error(Y(422))),fc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Gh({mode:"visible",children:i.children},s,0,null),o=_s(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&$o(e,t.child,null,l),e.child.memoizedState=cp(l),e.memoizedState=up,o);if(!(e.mode&1))return fc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=lf(o,i,void 0),fc(t,e,l,i)}if(h=(l&t.childLanes)!==0,tn||h){if(i=It,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ji(t,s),Hn(i,t,s,-1))}return zm(),i=lf(Error(Y(421))),fc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aC.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,un=Tr(s.nextSibling),hn=e,Ke=!0,zn=null,t!==null&&(xn[In++]=Li,xn[In++]=Ni,xn[In++]=Es,Li=t.id,Ni=t.overflow,Es=e),e=Nm(e,i.children),e.flags|=4096,e)}function uy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ip(t.return,e,n)}function uf(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Xw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,n),i=Qe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uy(t,n,e);else if(t.tag===19)uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(He(Qe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uf(e,!0,n,null,o);break;case"together":uf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KS(t,e,n){switch(e.tag){case 3:Qw(e),Wo();break;case 5:Iw(e);break;case 1:rn(e.type)&&ih(e);break;case 4:Sm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;He(oh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(He(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(He(Qe,Qe.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);He(Qe,Qe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Xw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Qe,Qe.current),i)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return Bi(t,e,n)}var Jw,hp,eE,tE;Jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hp=function(){};eE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ps(ui.current);var o=null;switch(n){case"input":s=Nf(t,s),i=Nf(t,i),o=[];break;case"select":s=Xe({},s,{value:void 0}),i=Xe({},i,{value:void 0}),o=[];break;case"textarea":s=Df(t,s),i=Df(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=th)}Ff(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Pl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&$e("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};tE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ja(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function QS(t,e,n){var i=e.pendingProps;switch(ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&nh(),Ot(e),null;case 3:return i=e.stateNode,qo(),Ge(nn),Ge(zt),Pm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(vp(zn),zn=null))),hp(t,e),Ot(e),null;case 5:Cm(e);var s=ps(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)eE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Ot(e),null}if(t=ps(ui.current),hc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[si]=e,i[Vl]=o,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(s=0;s<rl.length;s++)$e(rl[s],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":y_(i,o),$e("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},$e("invalid",i);break;case"textarea":w_(i,o),$e("invalid",i)}Ff(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&cc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&cc(i.textContent,h,t),s=["children",""+h]):Pl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&$e("scroll",i)}switch(n){case"input":nc(i),v_(i,o,!0);break;case"textarea":nc(i),E_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=th)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[si]=e,t[Vl]=i,Jw(t,e,!1,!1),e.stateNode=t;e:{switch(l=zf(n,i),n){case"dialog":$e("cancel",t),$e("close",t),s=i;break;case"iframe":case"object":case"embed":$e("load",t),s=i;break;case"video":case"audio":for(s=0;s<rl.length;s++)$e(rl[s],t);s=i;break;case"source":$e("error",t),s=i;break;case"img":case"image":case"link":$e("error",t),$e("load",t),s=i;break;case"details":$e("toggle",t),s=i;break;case"input":y_(t,i),s=Nf(t,i),$e("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Xe({},i,{value:void 0}),$e("invalid",t);break;case"textarea":w_(t,i),s=Df(t,i),$e("invalid",t);break;default:s=i}Ff(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?L0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&R0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Al(t,d):typeof d=="number"&&Al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&$e("scroll",t):d!=null&&im(t,o,d,l))}switch(n){case"input":nc(t),v_(t,i,!1);break;case"textarea":nc(t),E_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Nr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?bo(t,!!i.multiple,o,!1):i.defaultValue!=null&&bo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)tE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ps(zl.current),ps(ui.current),hc(e)){if(i=e.stateNode,n=e.memoizedProps,i[si]=e,(o=i.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:cc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[si]=e,e.stateNode=i}return Ot(e),null;case 13:if(Ge(Qe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&un!==null&&e.mode&1&&!(e.flags&128))vw(),Wo(),e.flags|=98560,o=!1;else if(o=hc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[si]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else zn!==null&&(vp(zn),zn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?pt===0&&(pt=3):zm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return qo(),hp(t,e),t===null&&Ml(e.stateNode.containerInfo),Ot(e),null;case 10:return Tm(e.type._context),Ot(e),null;case 17:return rn(e.type)&&nh(),Ot(e),null;case 19:if(Ge(Qe),o=e.memoizedState,o===null)return Ot(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ja(o,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=uh(t),l!==null){for(e.flags|=128,Ja(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>Zo&&(e.flags|=128,i=!0,Ja(o,!1),e.lanes=4194304)}else{if(!i)if(t=uh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ke)return Ot(e),null}else 2*st()-o.renderingStartTime>Zo&&n!==1073741824&&(e.flags|=128,i=!0,Ja(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Qe.current,He(Qe,i?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Fm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ln&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function YS(t,e){switch(ym(e),e.tag){case 1:return rn(e.type)&&nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),Ge(nn),Ge(zt),Pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cm(e),null;case 13:if(Ge(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Qe),null;case 4:return qo(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return Fm(),null;case 24:return null;default:return null}}var pc=!1,Vt=!1,XS=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function dp(t,e,n){try{n()}catch(i){nt(t,e,i)}}var cy=!1;function JS(t,e){if(Kf=Xc,t=ow(),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,_=0,v=t,T=null;t:for(;;){for(var b;v!==n||s!==0&&v.nodeType!==3||(h=l+s),v!==o||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(b=v.firstChild)!==null;)T=v,v=b;for(;;){if(v===t)break t;if(T===n&&++p===s&&(h=l),T===o&&++_===i&&(d=l),(b=v.nextSibling)!==null)break;v=T,T=v.parentNode}v=b}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qf={focusedElem:t,selectionRange:n},Xc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var O=F.memoizedProps,z=F.memoizedState,k=e.stateNode,x=k.getSnapshotBeforeUpdate(e.elementType===e.type?O:Vn(e.type,O),z);k.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(W){nt(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return F=cy,cy=!1,F}function _l(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&dp(e,n,o)}s=s.next}while(s!==i)}}function $h(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nE(t){var e=t.alternate;e!==null&&(t.alternate=null,nE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[Vl],delete e[Jf],delete e[MS],delete e[DS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iE(t){return t.tag===5||t.tag===3||t.tag===4}function hy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=th));else if(i!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}var Ct=null,Fn=!1;function sr(t,e,n){for(n=n.child;n!==null;)rE(t,e,n),n=n.sibling}function rE(t,e,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(Vh,n)}catch{}switch(n.tag){case 5:Vt||Ao(n,e);case 6:var i=Ct,s=Fn;Ct=null,sr(t,e,n),Ct=i,Fn=s,Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Fn?(t=Ct,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),Ll(t)):tf(Ct,n.stateNode));break;case 4:i=Ct,s=Fn,Ct=n.stateNode.containerInfo,Fn=!0,sr(t,e,n),Ct=i,Fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&dp(n,e,l),s=s.next}while(s!==i)}sr(t,e,n);break;case 1:if(!Vt&&(Ao(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){nt(n,e,h)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(Vt=(i=Vt)||n.memoizedState!==null,sr(t,e,n),Vt=i):sr(t,e,n);break;default:sr(t,e,n)}}function dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XS),e.forEach(function(i){var s=lC.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Ct=h.stateNode,Fn=!1;break e;case 3:Ct=h.stateNode.containerInfo,Fn=!0;break e;case 4:Ct=h.stateNode.containerInfo,Fn=!0;break e}h=h.return}if(Ct===null)throw Error(Y(160));rE(o,l,s),Ct=null,Fn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){nt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sE(e,t),e=e.sibling}function sE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),ni(t),i&4){try{_l(3,t,t.return),$h(3,t)}catch(O){nt(t,t.return,O)}try{_l(5,t,t.return)}catch(O){nt(t,t.return,O)}}break;case 1:Dn(e,t),ni(t),i&512&&n!==null&&Ao(n,n.return);break;case 5:if(Dn(e,t),ni(t),i&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(O){nt(t,t.return,O)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&P0(s,o),zf(h,l);var p=zf(h,o);for(l=0;l<d.length;l+=2){var _=d[l],v=d[l+1];_==="style"?L0(s,v):_==="dangerouslySetInnerHTML"?R0(s,v):_==="children"?Al(s,v):im(s,_,v,p)}switch(h){case"input":Of(s,o);break;case"textarea":A0(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?bo(s,!!o.multiple,b,!1):T!==!!o.multiple&&(o.defaultValue!=null?bo(s,!!o.multiple,o.defaultValue,!0):bo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Vl]=o}catch(O){nt(t,t.return,O)}}break;case 6:if(Dn(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(O){nt(t,t.return,O)}}break;case 3:if(Dn(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(O){nt(t,t.return,O)}break;case 4:Dn(e,t),ni(t);break;case 13:Dn(e,t),ni(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Dm=st())),i&4&&dy(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(p=Vt)||_,Dn(e,t),Vt=p):Dn(e,t),ni(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(oe=t,_=t.child;_!==null;){for(v=oe=_;oe!==null;){switch(T=oe,b=T.child,T.tag){case 0:case 11:case 14:case 15:_l(4,T,T.return);break;case 1:Ao(T,T.return);var F=T.stateNode;if(typeof F.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(O){nt(i,n,O)}}break;case 5:Ao(T,T.return);break;case 22:if(T.memoizedState!==null){py(v);continue}}b!==null?(b.return=T,oe=b):py(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{s=v.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=b0("display",l))}catch(O){nt(t,t.return,O)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(O){nt(t,t.return,O)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Dn(e,t),ni(t),i&4&&dy(t);break;case 21:break;default:Dn(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Al(s,""),i.flags&=-33);var o=hy(t);mp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=hy(t);pp(t,h,l);break;default:throw Error(Y(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eC(t,e,n){oe=t,oE(t)}function oE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||pc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Vt;h=pc;var p=Vt;if(pc=l,(Vt=d)&&!p)for(oe=s;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?my(s):d!==null?(d.return=l,oe=d):my(s);for(;o!==null;)oe=o,oE(o),o=o.sibling;oe=s,pc=h,Vt=p}fy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):fy(t)}}function fy(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||$h(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Vt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Y_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Y_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&Ll(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Vt||e.flags&512&&fp(e)}catch(T){nt(e,e.return,T)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function py(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function my(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$h(4,e)}catch(d){nt(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){nt(e,s,d)}}var o=e.return;try{fp(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{fp(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var tC=Math.ceil,dh=qi.ReactCurrentDispatcher,Om=qi.ReactCurrentOwner,An=qi.ReactCurrentBatchConfig,be=0,It=null,ct=null,kt=0,ln=0,ko=Ur(0),pt=0,Hl=null,xs=0,qh=0,Mm=0,yl=null,Jt=null,Dm=0,Zo=1/0,Ri=null,fh=!1,gp=null,Ir=null,mc=!1,gr=null,ph=0,vl=0,_p=null,Lc=-1,Nc=0;function $t(){return be&6?st():Lc!==-1?Lc:Lc=st()}function Sr(t){return t.mode&1?be&2&&kt!==0?kt&-kt:FS.transition!==null?(Nc===0&&(Nc=W0()),Nc):(t=je,t!==0||(t=window.event,t=t===void 0?16:Y0(t.type)),t):1}function Hn(t,e,n,i){if(50<vl)throw vl=0,_p=null,Error(Y(185));ru(t,n,i),(!(be&2)||t!==It)&&(t===It&&(!(be&2)&&(qh|=n),pt===4&&cr(t,kt)),sn(t,i),n===1&&be===0&&!(e.mode&1)&&(Zo=st()+500,Uh&&Hr()))}function sn(t,e){var n=t.callbackNode;FI(t,e);var i=Yc(t,t===It?kt:0);if(i===0)n!==null&&I_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&I_(n),e===1)t.tag===0?VS(gy.bind(null,t)):gw(gy.bind(null,t)),NS(function(){!(be&6)&&Hr()}),n=null;else{switch($0(i)){case 1:n=lm;break;case 4:n=U0;break;case 16:n=Qc;break;case 536870912:n=H0;break;default:n=Qc}n=pE(n,aE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aE(t,e){if(Lc=-1,Nc=0,be&6)throw Error(Y(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var i=Yc(t,t===It?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=mh(t,i);else{e=i;var s=be;be|=2;var o=uE();(It!==t||kt!==e)&&(Ri=null,Zo=st()+500,gs(t,e));do try{rC();break}catch(h){lE(t,h)}while(!0);Em(),dh.current=o,be=s,ct!==null?e=0:(It=null,kt=0,e=pt)}if(e!==0){if(e===2&&(s=Wf(t),s!==0&&(i=s,e=yp(t,s))),e===1)throw n=Hl,gs(t,0),cr(t,i),sn(t,st()),n;if(e===6)cr(t,i);else{if(s=t.current.alternate,!(i&30)&&!nC(s)&&(e=mh(t,i),e===2&&(o=Wf(t),o!==0&&(i=o,e=yp(t,o))),e===1))throw n=Hl,gs(t,0),cr(t,i),sn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:cs(t,Jt,Ri);break;case 3:if(cr(t,i),(i&130023424)===i&&(e=Dm+500-st(),10<e)){if(Yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xf(cs.bind(null,t,Jt,Ri),e);break}cs(t,Jt,Ri);break;case 4:if(cr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Un(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tC(i/1960))-i,10<i){t.timeoutHandle=Xf(cs.bind(null,t,Jt,Ri),i);break}cs(t,Jt,Ri);break;case 5:cs(t,Jt,Ri);break;default:throw Error(Y(329))}}}return sn(t,st()),t.callbackNode===n?aE.bind(null,t):null}function yp(t,e){var n=yl;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=mh(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&vp(e)),t}function vp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function nC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!$n(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~Mm,e&=~qh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),i=1<<n;t[n]=-1,e&=~i}}function gy(t){if(be&6)throw Error(Y(327));Do();var e=Yc(t,0);if(!(e&1))return sn(t,st()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var i=Wf(t);i!==0&&(e=i,n=yp(t,i))}if(n===1)throw n=Hl,gs(t,0),cr(t,e),sn(t,st()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Jt,Ri),sn(t,st()),null}function Vm(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Zo=st()+500,Uh&&Hr())}}function Is(t){gr!==null&&gr.tag===0&&!(be&6)&&Do();var e=be;be|=1;var n=An.transition,i=je;try{if(An.transition=null,je=1,t)return t()}finally{je=i,An.transition=n,be=e,!(be&6)&&Hr()}}function Fm(){ln=ko.current,Ge(ko)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LS(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(ym(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nh();break;case 3:qo(),Ge(nn),Ge(zt),Pm();break;case 5:Cm(i);break;case 4:qo();break;case 13:Ge(Qe);break;case 19:Ge(Qe);break;case 10:Tm(i.type._context);break;case 22:case 23:Fm()}n=n.return}if(It=t,ct=t=Cr(t.current,null),kt=ln=e,pt=0,Hl=null,Mm=qh=xs=0,Jt=yl=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}fs=null}return t}function lE(t,e){do{var n=ct;try{if(Em(),kc.current=hh,ch){for(var i=Ye.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ch=!1}if(Ts=0,xt=ft=Ye=null,gl=!1,jl=0,Om.current=null,n===null||n.return===null){pt=1,Hl=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=kt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=h,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var b=iy(l);if(b!==null){b.flags&=-257,ry(b,l,h,o,e),b.mode&1&&ny(o,p,e),e=b,d=p;var F=e.updateQueue;if(F===null){var O=new Set;O.add(d),e.updateQueue=O}else F.add(d);break e}else{if(!(e&1)){ny(o,p,e),zm();break e}d=Error(Y(426))}}else if(Ke&&h.mode&1){var z=iy(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),ry(z,l,h,o,e),vm(Go(d,h));break e}}o=d=Go(d,h),pt!==4&&(pt=2),yl===null?yl=[o]:yl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=$w(o,d,e);Q_(o,k);break e;case 1:h=d;var x=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ir===null||!Ir.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=qw(o,h,e);Q_(o,W);break e}}o=o.return}while(o!==null)}hE(n)}catch(Q){e=Q,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function uE(){var t=dh.current;return dh.current=hh,t===null?hh:t}function zm(){(pt===0||pt===3||pt===2)&&(pt=4),It===null||!(xs&268435455)&&!(qh&268435455)||cr(It,kt)}function mh(t,e){var n=be;be|=2;var i=uE();(It!==t||kt!==e)&&(Ri=null,gs(t,e));do try{iC();break}catch(s){lE(t,s)}while(!0);if(Em(),be=n,dh.current=i,ct!==null)throw Error(Y(261));return It=null,kt=0,pt}function iC(){for(;ct!==null;)cE(ct)}function rC(){for(;ct!==null&&!kI();)cE(ct)}function cE(t){var e=fE(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?hE(t):ct=e,Om.current=null}function hE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YS(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=QS(n,e,ln),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function cs(t,e,n){var i=je,s=An.transition;try{An.transition=null,je=1,sC(t,e,n,i)}finally{An.transition=s,je=i}return null}function sC(t,e,n,i){do Do();while(gr!==null);if(be&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zI(t,o),t===It&&(ct=It=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,pE(Qc,function(){return Do(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=An.transition,An.transition=null;var l=je;je=1;var h=be;be|=4,Om.current=null,JS(t,n),sE(n,t),SS(Qf),Xc=!!Kf,Qf=Kf=null,t.current=n,eC(n),RI(),be=h,je=l,An.transition=o}else t.current=n;if(mc&&(mc=!1,gr=t,ph=s),o=t.pendingLanes,o===0&&(Ir=null),NI(n.stateNode),sn(t,st()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(fh)throw fh=!1,t=gp,gp=null,t;return ph&1&&t.tag!==0&&Do(),o=t.pendingLanes,o&1?t===_p?vl++:(vl=0,_p=t):vl=0,Hr(),null}function Do(){if(gr!==null){var t=$0(ph),e=An.transition,n=je;try{if(An.transition=null,je=16>t?16:t,gr===null)var i=!1;else{if(t=gr,gr=null,ph=0,be&6)throw Error(Y(331));var s=be;for(be|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var _=oe;switch(_.tag){case 0:case 11:case 15:_l(8,_,o)}var v=_.child;if(v!==null)v.return=_,oe=v;else for(;oe!==null;){_=oe;var T=_.sibling,b=_.return;if(nE(_),_===p){oe=null;break}if(T!==null){T.return=b,oe=T;break}oe=b}}}var F=o.alternate;if(F!==null){var O=F.child;if(O!==null){F.child=null;do{var z=O.sibling;O.sibling=null,O=z}while(O!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_l(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,oe=k;break e}oe=o.return}}var x=t.current;for(oe=x;oe!==null;){l=oe;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,oe=N;else e:for(l=x;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:$h(9,h)}}catch(Q){nt(h,h.return,Q)}if(h===l){oe=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,oe=W;break e}oe=h.return}}if(be=s,Hr(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(Vh,t)}catch{}i=!0}return i}finally{je=n,An.transition=e}}return!1}function _y(t,e,n){e=Go(n,e),e=$w(t,e,1),t=xr(t,e,1),e=$t(),t!==null&&(ru(t,1,e),sn(t,e))}function nt(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ir===null||!Ir.has(i))){t=Go(n,t),t=qw(e,t,1),e=xr(e,t,1),t=$t(),e!==null&&(ru(e,1,t),sn(e,t));break}}e=e.return}}function oC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(kt&n)===n&&(pt===4||pt===3&&(kt&130023424)===kt&&500>st()-Dm?gs(t,0):Mm|=n),sn(t,e)}function dE(t,e){e===0&&(t.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var n=$t();t=ji(t,e),t!==null&&(ru(t,e,n),sn(t,n))}function aC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dE(t,n)}function lC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),dE(t,n)}var fE;fE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,KS(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ke&&e.flags&1048576&&_w(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bc(t,e),t=e.pendingProps;var s=Ho(e,zt.current);Mo(e,n),s=km(null,e,i,t,s,n);var o=Rm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(i)?(o=!0,ih(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Im(e),s.updater=Wh,e.stateNode=s,s._reactInternals=e,sp(e,i,t,n),e=lp(null,e,i,!0,o,n)):(e.tag=0,Ke&&o&&_m(e),Wt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=cC(i),t=Vn(i,t),s){case 0:e=ap(null,e,i,t,n);break e;case 1:e=ay(null,e,i,t,n);break e;case 11:e=sy(null,e,i,t,n);break e;case 14:e=oy(null,e,i,Vn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),ap(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),ay(t,e,i,s,n);case 3:e:{if(Qw(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,s=o.element,xw(t,e),lh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Go(Error(Y(423)),e),e=ly(t,e,i,n,s);break e}else if(i!==s){s=Go(Error(Y(424)),e),e=ly(t,e,i,n,s);break e}else for(un=Tr(e.stateNode.containerInfo.firstChild),hn=e,Ke=!0,zn=null,n=Ew(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),i===s){e=Bi(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return Iw(e),t===null&&np(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Yf(i,s)?l=null:o!==null&&Yf(i,o)&&(e.flags|=32),Kw(t,e),Wt(t,e,l,n),e.child;case 6:return t===null&&np(e),null;case 13:return Yw(t,e,n);case 4:return Sm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=$o(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),sy(t,e,i,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,He(oh,i._currentValue),i._currentValue=l,o!==null)if($n(o.value,l)){if(o.children===s.children&&!nn.current){e=Bi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Di(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ip(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ip(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Mo(e,n),s=kn(s),i=i(s),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,s=Vn(i,e.pendingProps),s=Vn(i.type,s),oy(t,e,i,s,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vn(i,s),bc(t,e),e.tag=1,rn(i)?(t=!0,ih(e)):t=!1,Mo(e,n),Ww(e,i,s),sp(e,i,s,n),lp(null,e,i,!0,t,n);case 19:return Xw(t,e,n);case 22:return Zw(t,e,n)}throw Error(Y(156,e.tag))};function pE(t,e){return B0(t,e)}function uC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,i){return new uC(t,e,n,i)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cC(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sm)return 11;if(t===om)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")jm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vo:return _s(n.children,s,o,e);case rm:l=8,s|=8;break;case kf:return t=Pn(12,n,e,s|2),t.elementType=kf,t.lanes=o,t;case Rf:return t=Pn(13,n,e,s),t.elementType=Rf,t.lanes=o,t;case bf:return t=Pn(19,n,e,s),t.elementType=bf,t.lanes=o,t;case I0:return Gh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:l=10;break e;case x0:l=9;break e;case sm:l=11;break e;case om:l=14;break e;case ar:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Pn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function _s(t,e,n,i){return t=Pn(7,t,i,e),t.lanes=n,t}function Gh(t,e,n,i){return t=Pn(22,t,i,e),t.elementType=I0,t.lanes=n,t.stateNode={isHidden:!1},t}function cf(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function hf(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hC(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(t,e,n,i,s,o,l,h,d){return t=new hC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(o),t}function dC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function mE(t){if(!t)return Or;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(rn(n))return mw(t,n,e)}return e}function gE(t,e,n,i,s,o,l,h,d){return t=Bm(n,i,!0,t,s,o,l,h,d),t.context=mE(null),n=t.current,i=$t(),s=Sr(n),o=Di(i,s),o.callback=e??null,xr(n,o,s),t.current.lanes=s,ru(t,s,i),sn(t,i),t}function Zh(t,e,n,i){var s=e.current,o=$t(),l=Sr(s);return n=mE(n),e.context===null?e.context=n:e.pendingContext=n,e=Di(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=xr(s,e,l),t!==null&&(Hn(t,s,l,o),Ac(t,s,l)),l}function gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Um(t,e){yy(t,e),(t=t.alternate)&&yy(t,e)}function fC(){return null}var _E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hm(t){this._internalRoot=t}Kh.prototype.render=Hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Zh(t,e,null,null)};Kh.prototype.unmount=Hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Zh(null,t,null,null)}),e[zi]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&Q0(t)}};function Wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vy(){}function pC(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=gh(l);o.call(p)}}var l=gE(e,i,t,0,null,!1,!1,"",vy);return t._reactRootContainer=l,t[zi]=l.current,Ml(t.nodeType===8?t.parentNode:t),Is(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=gh(d);h.call(p)}}var d=Bm(t,0,!1,null,null,!1,!1,"",vy);return t._reactRootContainer=d,t[zi]=d.current,Ml(t.nodeType===8?t.parentNode:t),Is(function(){Zh(e,d,n,i)}),d}function Yh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=gh(l);h.call(d)}}Zh(e,l,t,s)}else l=pC(n,e,t,s,i);return gh(l)}q0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(um(e,n|1),sn(e,st()),!(be&6)&&(Zo=st()+500,Hr()))}break;case 13:Is(function(){var i=ji(t,1);if(i!==null){var s=$t();Hn(i,t,1,s)}}),Um(t,1)}};cm=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var n=$t();Hn(e,t,134217728,n)}Um(t,134217728)}};G0=function(t){if(t.tag===13){var e=Sr(t),n=ji(t,e);if(n!==null){var i=$t();Hn(n,t,e,i)}Um(t,e)}};Z0=function(){return je};K0=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};Bf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Bh(i);if(!s)throw Error(Y(90));C0(i),Of(i,s)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};M0=Vm;D0=Is;var mC={usingClientEntryPoint:!1,Events:[ou,xo,Bh,N0,O0,Vm]},el={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gC={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z0(t),t===null?null:t.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||fC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Vh=gc.inject(gC),li=gc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(e))throw Error(Y(200));return dC(t,e,null,n)};fn.createRoot=function(t,e){if(!Wm(t))throw Error(Y(299));var n=!1,i="",s=_E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bm(t,1,!1,null,null,n,!1,i,s),t[zi]=e.current,Ml(t.nodeType===8?t.parentNode:t),new Hm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=z0(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return Is(t)};fn.hydrate=function(t,e,n){if(!Qh(e))throw Error(Y(200));return Yh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Wm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=_E;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=gE(e,null,t,1,n??null,s,!1,o,l),t[zi]=e.current,Ml(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kh(e)};fn.render=function(t,e,n){if(!Qh(e))throw Error(Y(200));return Yh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Qh(t))throw Error(Y(40));return t._reactRootContainer?(Is(function(){Yh(null,null,t,!1,function(){t._reactRootContainer=null,t[zi]=null})}),!0):!1};fn.unstable_batchedUpdates=Vm;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Qh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Yh(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(t){console.error(t)}}yE(),y0.exports=fn;var vE=y0.exports,wy=vE;Pf.createRoot=wy.createRoot,Pf.hydrateRoot=wy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wl.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const Ey="popstate";function _C(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return wp("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:EE(s)}return vC(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yC(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function wp(t,e,n,i){return n===void 0&&(n=null),Wl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oa(e):e,{state:n,key:e&&e.key||i||yC()})}function EE(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function vC(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=_r.Pop,d=null,p=_();p==null&&(p=0,l.replaceState(Wl({},l.state,{idx:p}),""));function _(){return(l.state||{idx:null}).idx}function v(){h=_r.Pop;let z=_(),k=z==null?null:z-p;p=z,d&&d({action:h,location:O.location,delta:k})}function T(z,k){h=_r.Push;let x=wp(O.location,z,k);p=_()+1;let N=Ty(x,p),W=O.createHref(x);try{l.pushState(N,"",W)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(W)}o&&d&&d({action:h,location:O.location,delta:1})}function b(z,k){h=_r.Replace;let x=wp(O.location,z,k);p=_();let N=Ty(x,p),W=O.createHref(x);l.replaceState(N,"",W),o&&d&&d({action:h,location:O.location,delta:0})}function F(z){let k=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof z=="string"?z:EE(z);return x=x.replace(/ $/,"%20"),mt(k,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,k)}let O={get action(){return h},get location(){return t(s,l)},listen(z){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ey,v),d=z,()=>{s.removeEventListener(Ey,v),d=null}},createHref(z){return e(s,z)},createURL:F,encodeLocation(z){let k=F(z);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:T,replace:b,go(z){return l.go(z)}};return O}var xy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xy||(xy={}));function wC(t,e,n){return n===void 0&&(n="/"),EC(t,e,n)}function EC(t,e,n,i){let s=typeof e=="string"?oa(e):e,o=IE(s.pathname||"/",n);if(o==null)return null;let l=TE(t);TC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=OC(o);h=bC(l[d],p)}return h}function TE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(mt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=ys([i,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),TE(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:kC(p,o.index),routesMeta:_})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of xE(o.path))s(o,l,d)}),e}function xE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=xE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function TC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const xC=/^:[\w-]+$/,IC=3,SC=2,CC=1,PC=10,AC=-2,Iy=t=>t==="*";function kC(t,e){let n=t.split("/"),i=n.length;return n.some(Iy)&&(i+=AC),e&&(i+=SC),n.filter(s=>!Iy(s)).reduce((s,o)=>s+(xC.test(o)?IC:o===""?CC:PC),i)}function RC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function bC(t,e,n){let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=LC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),T=d.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:ys([o,v.pathname]),pathnameBase:jC(ys([o,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(o=ys([o,v.pathnameBase]))}return l}function LC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=NC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,_,v)=>{let{paramName:T,isOptional:b}=_;if(T==="*"){let O=h[v]||"";l=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const F=h[v];return b&&!F?p[T]=void 0:p[T]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function NC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function OC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function IE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function MC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?oa(t):t;return{pathname:n?n.startsWith("/")?n:DC(n,e):e,search:BC(i),hash:UC(s)}}function DC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function df(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FC(t,e){let n=VC(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zC(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=oa(t):(s=Wl({},t),mt(!s.pathname||!s.pathname.includes("?"),df("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),df("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),df("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),v-=1;s.pathname=T.join("/")}h=v>=0?e[v]:"/"}let d=MC(s,h),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),jC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const SE=["post","put","patch","delete"];new Set(SE);const WC=["get",...SE];new Set(WC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$l.apply(this,arguments)}const $m=q.createContext(null),$C=q.createContext(null),Xh=q.createContext(null),Jh=q.createContext(null),Ls=q.createContext({outlet:null,matches:[],isDataRoute:!1}),CE=q.createContext(null);function ed(){return q.useContext(Jh)!=null}function PE(){return ed()||mt(!1),q.useContext(Jh).location}function AE(t){q.useContext(Xh).static||q.useLayoutEffect(t)}function lu(){let{isDataRoute:t}=q.useContext(Ls);return t?rP():qC()}function qC(){ed()||mt(!1);let t=q.useContext($m),{basename:e,future:n,navigator:i}=q.useContext(Xh),{matches:s}=q.useContext(Ls),{pathname:o}=PE(),l=JSON.stringify(FC(s,n.v7_relativeSplatPath)),h=q.useRef(!1);return AE(()=>{h.current=!0}),q.useCallback(function(p,_){if(_===void 0&&(_={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let v=zC(p,JSON.parse(l),o,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ys([e,v.pathname])),(_.replace?i.replace:i.push)(v,_.state,_)},[e,i,l,o,t])}function qm(){let{matches:t}=q.useContext(Ls),e=t[t.length-1];return e?e.params:{}}function GC(t,e){return ZC(t,e)}function ZC(t,e,n,i){ed()||mt(!1);let{navigator:s}=q.useContext(Xh),{matches:o}=q.useContext(Ls),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=PE(),_;if(e){var v;let z=typeof e=="string"?oa(e):e;d==="/"||(v=z.pathname)!=null&&v.startsWith(d)||mt(!1),_=z}else _=p;let T=_.pathname||"/",b=T;if(d!=="/"){let z=d.replace(/^\//,"").split("/");b="/"+T.replace(/^\//,"").split("/").slice(z.length).join("/")}let F=wC(t,{pathname:b}),O=JC(F&&F.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:ys([d,s.encodeLocation?s.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?d:ys([d,s.encodeLocation?s.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,n,i);return e&&O?q.createElement(Jh.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:_r.Pop}},O):O}function KC(){let t=iP(),e=HC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:s},n):null,null)}const QC=q.createElement(KC,null);class YC extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Ls.Provider,{value:this.props.routeContext},q.createElement(CE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XC(t){let{routeContext:e,match:n,children:i}=t,s=q.useContext($m);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Ls.Provider,{value:e},i)}function JC(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let _=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);_>=0||mt(!1),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<l.length;_++){let v=l[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=_),v.route.id){let{loaderData:T,errors:b}=n,F=v.route.loader&&T[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((_,v,T)=>{let b,F=!1,O=null,z=null;n&&(b=h&&v.route.id?h[v.route.id]:void 0,O=v.route.errorElement||QC,d&&(p<0&&T===0?(sP("route-fallback"),F=!0,z=null):p===T&&(F=!0,z=v.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,T+1)),x=()=>{let N;return b?N=O:F?N=z:v.route.Component?N=q.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=_,q.createElement(XC,{match:v,routeContext:{outlet:_,matches:k,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?q.createElement(YC,{location:n.location,revalidation:n.revalidation,component:O,error:b,children:x(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):x()},null)}var kE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kE||{}),RE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RE||{});function eP(t){let e=q.useContext($m);return e||mt(!1),e}function tP(t){let e=q.useContext($C);return e||mt(!1),e}function nP(t){let e=q.useContext(Ls);return e||mt(!1),e}function bE(t){let e=nP(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function iP(){var t;let e=q.useContext(CE),n=tP(),i=bE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function rP(){let{router:t}=eP(kE.UseNavigateStable),e=bE(RE.UseNavigateStable),n=q.useRef(!1);return AE(()=>{n.current=!0}),q.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$l({fromRouteId:e},o)))},[t,e])}const Sy={};function sP(t,e,n){Sy[t]||(Sy[t]=!0)}function oP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fo(t){mt(!1)}function aP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=_r.Pop,navigator:o,static:l=!1,future:h}=t;ed()&&mt(!1);let d=e.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:d,navigator:o,static:l,future:$l({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=oa(i));let{pathname:_="/",search:v="",hash:T="",state:b=null,key:F="default"}=i,O=q.useMemo(()=>{let z=IE(_,d);return z==null?null:{location:{pathname:z,search:v,hash:T,state:b,key:F},navigationType:s}},[d,_,v,T,b,F,s]);return O==null?null:q.createElement(Xh.Provider,{value:p},q.createElement(Jh.Provider,{children:n,value:O}))}function lP(t){let{children:e,location:n}=t;return GC(Ep(e),n)}new Promise(()=>{});function Ep(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(i,s)=>{if(!q.isValidElement(i))return;let o=[...e,s];if(i.type===q.Fragment){n.push.apply(n,Ep(i.props.children,o));return}i.type!==fo&&mt(!1),!i.props.index||!i.props.children||mt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ep(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uP="6";try{window.__reactRouterVersion=uP}catch{}const cP="startTransition",Cy=oI[cP];function hP(t){let{basename:e,children:n,future:i,window:s}=t,o=q.useRef();o.current==null&&(o.current=_C({window:s,v5Compat:!0}));let l=o.current,[h,d]=q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},_=q.useCallback(v=>{p&&Cy?Cy(()=>d(v)):d(v)},[d,p]);return q.useLayoutEffect(()=>l.listen(_),[l,_]),q.useEffect(()=>oP(i),[i]),q.createElement(aP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var Py;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Py||(Py={}));var Ay;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ay||(Ay={}));const dP=()=>{};var ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},NE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,b=p&63;d||(b=64,l||(T=64)),i.push(n[_],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new pP;const T=o<<2|h>>4;if(i.push(T),p!==64){const b=h<<4&240|p>>2;if(i.push(b),v!==64){const F=p<<6&192|v;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mP=function(t){const e=LE(t);return NE.encodeByteArray(e,!0)},_h=function(t){return mP(t).replace(/\./g,"")},OE=function(t){try{return NE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=()=>gP().__FIREBASE_DEFAULTS__,yP=()=>{if(typeof process>"u"||typeof ky>"u")return;const t=ky.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OE(t[1]);return e&&JSON.parse(e)},td=()=>{try{return dP()||_P()||yP()||vP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ME=t=>{var e,n;return(n=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wP=t=>{const e=ME(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},DE=()=>{var t;return(t=td())==null?void 0:t.config},VE=t=>{var e;return(e=td())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_h(JSON.stringify(n)),_h(JSON.stringify(l)),""].join(".")}const wl={};function xP(){const t={prod:[],emulator:[]};for(const e of Object.keys(wl))wl[e]?t.emulator.push(e):t.prod.push(e);return t}function IP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ry=!1;function zE(t,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||wl[t]===e||wl[t]||Ry)return;wl[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=xP().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ry=!0,l()},T}function _(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=IP(i),b=n("text"),F=document.getElementById(b)||document.createElement("span"),O=n("learnmore"),z=document.getElementById(O)||document.createElement("a"),k=n("preprendIcon"),x=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const N=T.element;h(N),_(z,O);const W=p();d(x,k),N.append(x,F,z,W),document.body.appendChild(N)}o?(F.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function CP(){var e;const t=(e=td())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RP(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bP(){return!CP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function NP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class Gi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=OP,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?MP(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Gi(s,h,i)}}function MP(t,e){return t.replace(DP,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const DP=/\{\$([^}]+)}/g;function VP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(by(o)&&by(l)){if(!Ss(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function by(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ol(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FP(t,e){const n=new zP(t,e);return n.subscribe.bind(n)}class zP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new EP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UP(t){return t===hs?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const $P={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},qP=Ie.INFO,GP={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},ZP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=GP[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=qP,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const KP=(t,e)=>e.some(n=>t instanceof n);let Ly,Ny;function QP(){return Ly||(Ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YP(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Tp=new WeakMap,BE=new WeakMap,pf=new WeakMap,Zm=new WeakMap;function XP(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function JP(t){if(Tp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Tp.set(t,e)}let xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){xp=t(xp)}function tA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(mf(this),e,...n);return BE.set(i,e.sort?e.sort():[e]),Pr(i)}:YP().includes(t)?function(...e){return t.apply(mf(this),e),Pr(jE.get(this))}:function(...e){return Pr(t.apply(mf(this),e))}}function nA(t){return typeof t=="function"?tA(t):(t instanceof IDBTransaction&&JP(t),KP(t,QP())?new Proxy(t,xp):t)}function Pr(t){if(t instanceof IDBRequest)return XP(t);if(pf.has(t))return pf.get(t);const e=nA(t);return e!==t&&(pf.set(t,e),Zm.set(e,t)),e}const mf=t=>Zm.get(t);function iA(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Pr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Pr(l.result),d.oldVersion,d.newVersion,Pr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const rA=["get","getKey","getAll","getAllKeys","count"],sA=["put","add","delete","clear"],gf=new Map;function Oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=sA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return gf.set(e,o),o}eA(t=>({...t,get:(e,n,i)=>Oy(e,n)||t.get(e,n,i),has:(e,n)=>!!Oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",My="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Gm("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",hA="@firebase/app-check-compat",dA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",mA="@firebase/database",gA="@firebase/data-connect",_A="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",TA="@firebase/messaging",xA="@firebase/messaging-compat",IA="@firebase/performance",SA="@firebase/performance-compat",CA="@firebase/remote-config",PA="@firebase/remote-config-compat",AA="@firebase/storage",kA="@firebase/storage-compat",RA="@firebase/firestore",bA="@firebase/ai",LA="@firebase/firestore-compat",NA="firebase",OA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",MA={[Ip]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[dA]:"fire-app-check",[hA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[mA]:"fire-rtdb",[gA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[TA]:"fire-fcm",[xA]:"fire-fcm-compat",[IA]:"fire-perf",[SA]:"fire-perf-compat",[CA]:"fire-rc",[PA]:"fire-rc-compat",[AA]:"fire-gcs",[kA]:"fire-gcs-compat",[RA]:"fire-fst",[LA]:"fire-fst-compat",[bA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,DA=new Map,Cp=new Map;function Dy(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ko(t){const e=t.name;if(Cp.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,t);for(const n of yh.values())Dy(n,t);for(const n of DA.values())Dy(n,t);return!0}function Km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new uu("app","Firebase",VA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=OA;function UE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Sp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=DE()),!n)throw Ar.create("no-options");const o=yh.get(s);if(o){if(Ss(n,o.options)&&Ss(i,o.config))return o;throw Ar.create("duplicate-app",{appName:s})}const l=new WP(s);for(const d of Cp.values())l.addComponent(d);const h=new FA(n,i,l);return yh.set(s,h),h}function HE(t=Sp){const e=yh.get(t);if(!e&&t===Sp&&DE())return UE();if(!e)throw Ar.create("no-app",{appName:t});return e}function kr(t,e,n){let i=MA[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(l.join(" "));return}Ko(new Cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",jA=1,ql="firebase-heartbeat-store";let _f=null;function WE(){return _f||(_f=iA(zA,jA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),_f}async function BA(t){try{const n=(await WE()).transaction(ql),i=await n.objectStore(ql).get($E(t));return await n.done,i}catch(e){if(e instanceof Gi)Ui.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function Vy(t,e){try{const i=(await WE()).transaction(ql,"readwrite");await i.objectStore(ql).put(e,$E(t)),await i.done}catch(n){if(n instanceof Gi)Ui.warn(n.message);else{const i=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(i.message)}}}function $E(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,HA=30;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Fy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>HA){const l=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fy(),{heartbeatsToSend:i,unsentEntries:s}=$A(this._heartbeatsCache.heartbeats),o=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ui.warn(n),""}}}function Fy(){return new Date().toISOString().substring(0,10)}function $A(t,e=UA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),zy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class qA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?NP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zy(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}function GA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){Ko(new Cs("platform-logger",e=>new oA(e),"PRIVATE")),Ko(new Cs("heartbeat",e=>new WA(e),"PRIVATE")),kr(Ip,My,t),kr(Ip,My,"esm2020"),kr("fire-js","")}ZA("");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,qE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function S(){}S.prototype=C.prototype,R.F=C.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(M,V,P){for(var A=Array(arguments.length-2),te=2;te<arguments.length;te++)A[te-2]=arguments[te];return C.prototype[V].apply(M,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,C,S){S||(S=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(V=0;V<16;++V)M[V]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=R.g[0],S=R.g[1],V=R.g[2];let P=R.g[3],A;A=C+(P^S&(V^P))+M[0]+3614090360&4294967295,C=S+(A<<7&4294967295|A>>>25),A=P+(V^C&(S^V))+M[1]+3905402710&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(S^P&(C^S))+M[2]+606105819&4294967295,V=P+(A<<17&4294967295|A>>>15),A=S+(C^V&(P^C))+M[3]+3250441966&4294967295,S=V+(A<<22&4294967295|A>>>10),A=C+(P^S&(V^P))+M[4]+4118548399&4294967295,C=S+(A<<7&4294967295|A>>>25),A=P+(V^C&(S^V))+M[5]+1200080426&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(S^P&(C^S))+M[6]+2821735955&4294967295,V=P+(A<<17&4294967295|A>>>15),A=S+(C^V&(P^C))+M[7]+4249261313&4294967295,S=V+(A<<22&4294967295|A>>>10),A=C+(P^S&(V^P))+M[8]+1770035416&4294967295,C=S+(A<<7&4294967295|A>>>25),A=P+(V^C&(S^V))+M[9]+2336552879&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(S^P&(C^S))+M[10]+4294925233&4294967295,V=P+(A<<17&4294967295|A>>>15),A=S+(C^V&(P^C))+M[11]+2304563134&4294967295,S=V+(A<<22&4294967295|A>>>10),A=C+(P^S&(V^P))+M[12]+1804603682&4294967295,C=S+(A<<7&4294967295|A>>>25),A=P+(V^C&(S^V))+M[13]+4254626195&4294967295,P=C+(A<<12&4294967295|A>>>20),A=V+(S^P&(C^S))+M[14]+2792965006&4294967295,V=P+(A<<17&4294967295|A>>>15),A=S+(C^V&(P^C))+M[15]+1236535329&4294967295,S=V+(A<<22&4294967295|A>>>10),A=C+(V^P&(S^V))+M[1]+4129170786&4294967295,C=S+(A<<5&4294967295|A>>>27),A=P+(S^V&(C^S))+M[6]+3225465664&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^S&(P^C))+M[11]+643717713&4294967295,V=P+(A<<14&4294967295|A>>>18),A=S+(P^C&(V^P))+M[0]+3921069994&4294967295,S=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(S^V))+M[5]+3593408605&4294967295,C=S+(A<<5&4294967295|A>>>27),A=P+(S^V&(C^S))+M[10]+38016083&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^S&(P^C))+M[15]+3634488961&4294967295,V=P+(A<<14&4294967295|A>>>18),A=S+(P^C&(V^P))+M[4]+3889429448&4294967295,S=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(S^V))+M[9]+568446438&4294967295,C=S+(A<<5&4294967295|A>>>27),A=P+(S^V&(C^S))+M[14]+3275163606&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^S&(P^C))+M[3]+4107603335&4294967295,V=P+(A<<14&4294967295|A>>>18),A=S+(P^C&(V^P))+M[8]+1163531501&4294967295,S=V+(A<<20&4294967295|A>>>12),A=C+(V^P&(S^V))+M[13]+2850285829&4294967295,C=S+(A<<5&4294967295|A>>>27),A=P+(S^V&(C^S))+M[2]+4243563512&4294967295,P=C+(A<<9&4294967295|A>>>23),A=V+(C^S&(P^C))+M[7]+1735328473&4294967295,V=P+(A<<14&4294967295|A>>>18),A=S+(P^C&(V^P))+M[12]+2368359562&4294967295,S=V+(A<<20&4294967295|A>>>12),A=C+(S^V^P)+M[5]+4294588738&4294967295,C=S+(A<<4&4294967295|A>>>28),A=P+(C^S^V)+M[8]+2272392833&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^S)+M[11]+1839030562&4294967295,V=P+(A<<16&4294967295|A>>>16),A=S+(V^P^C)+M[14]+4259657740&4294967295,S=V+(A<<23&4294967295|A>>>9),A=C+(S^V^P)+M[1]+2763975236&4294967295,C=S+(A<<4&4294967295|A>>>28),A=P+(C^S^V)+M[4]+1272893353&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^S)+M[7]+4139469664&4294967295,V=P+(A<<16&4294967295|A>>>16),A=S+(V^P^C)+M[10]+3200236656&4294967295,S=V+(A<<23&4294967295|A>>>9),A=C+(S^V^P)+M[13]+681279174&4294967295,C=S+(A<<4&4294967295|A>>>28),A=P+(C^S^V)+M[0]+3936430074&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^S)+M[3]+3572445317&4294967295,V=P+(A<<16&4294967295|A>>>16),A=S+(V^P^C)+M[6]+76029189&4294967295,S=V+(A<<23&4294967295|A>>>9),A=C+(S^V^P)+M[9]+3654602809&4294967295,C=S+(A<<4&4294967295|A>>>28),A=P+(C^S^V)+M[12]+3873151461&4294967295,P=C+(A<<11&4294967295|A>>>21),A=V+(P^C^S)+M[15]+530742520&4294967295,V=P+(A<<16&4294967295|A>>>16),A=S+(V^P^C)+M[2]+3299628645&4294967295,S=V+(A<<23&4294967295|A>>>9),A=C+(V^(S|~P))+M[0]+4096336452&4294967295,C=S+(A<<6&4294967295|A>>>26),A=P+(S^(C|~V))+M[7]+1126891415&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~S))+M[14]+2878612391&4294967295,V=P+(A<<15&4294967295|A>>>17),A=S+(P^(V|~C))+M[5]+4237533241&4294967295,S=V+(A<<21&4294967295|A>>>11),A=C+(V^(S|~P))+M[12]+1700485571&4294967295,C=S+(A<<6&4294967295|A>>>26),A=P+(S^(C|~V))+M[3]+2399980690&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~S))+M[10]+4293915773&4294967295,V=P+(A<<15&4294967295|A>>>17),A=S+(P^(V|~C))+M[1]+2240044497&4294967295,S=V+(A<<21&4294967295|A>>>11),A=C+(V^(S|~P))+M[8]+1873313359&4294967295,C=S+(A<<6&4294967295|A>>>26),A=P+(S^(C|~V))+M[15]+4264355552&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~S))+M[6]+2734768916&4294967295,V=P+(A<<15&4294967295|A>>>17),A=S+(P^(V|~C))+M[13]+1309151649&4294967295,S=V+(A<<21&4294967295|A>>>11),A=C+(V^(S|~P))+M[4]+4149444226&4294967295,C=S+(A<<6&4294967295|A>>>26),A=P+(S^(C|~V))+M[11]+3174756917&4294967295,P=C+(A<<10&4294967295|A>>>22),A=V+(C^(P|~S))+M[2]+718787259&4294967295,V=P+(A<<15&4294967295|A>>>17),A=S+(P^(V|~C))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+P&4294967295}i.prototype.v=function(R,C){C===void 0&&(C=R.length);const S=C-this.blockSize,M=this.C;let V=this.h,P=0;for(;P<C;){if(V==0)for(;P<=S;)s(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<C;)if(M[V++]=R.charCodeAt(P++),V==this.blockSize){s(this,M),V=0;break}}else for(;P<C;)if(M[V++]=R[P++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=C},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,S=0;S<4;++S)for(let M=0;M<32;M+=8)R[C++]=this.g[S]>>>M&255;return R};function o(R,C){var S=h;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=C(R)}function l(R,C){this.h=C;const S=[];let M=!0;for(let V=R.length-1;V>=0;V--){const P=R[V]|0;M&&P==C||(S[V]=P,M=!1)}this.g=S}var h={};function d(R){return-128<=R&&R<128?o(R,function(C){return new l([C|0],C<0?-1:0)}):new l([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return v;if(R<0)return z(p(-R));const C=[];let S=1;for(let M=0;R>=S;M++)C[M]=R/S|0,S*=4294967296;return new l(C,0)}function _(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return z(_(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=p(Math.pow(C,8));let M=v;for(let P=0;P<R.length;P+=8){var V=Math.min(8,R.length-P);const A=parseInt(R.substring(P,P+V),C);V<8?(V=p(Math.pow(C,V)),M=M.j(V).add(p(A))):(M=M.j(S),M=M.add(p(A)))}return M}var v=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(O(this))return-z(this).m();let R=0,C=1;for(let S=0;S<this.g.length;S++){const M=this.i(S);R+=(M>=0?M:4294967296+M)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(O(this))return"-"+z(this).toString(R);const C=p(Math.pow(R,6));var S=this;let M="";for(;;){const V=W(S,C).g;S=k(S,V.j(C));let P=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=V,F(S))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function O(R){return R.h==-1}t.l=function(R){return R=k(this,R),O(R)?-1:F(R)?0:1};function z(R){const C=R.g.length,S=[];for(let M=0;M<C;M++)S[M]=~R.g[M];return new l(S,~R.h).add(T)}t.abs=function(){return O(this)?z(this):this},t.add=function(R){const C=Math.max(this.g.length,R.g.length),S=[];let M=0;for(let V=0;V<=C;V++){let P=M+(this.i(V)&65535)+(R.i(V)&65535),A=(P>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);M=A>>>16,P&=65535,A&=65535,S[V]=A<<16|P}return new l(S,S[S.length-1]&-2147483648?-1:0)};function k(R,C){return R.add(z(C))}t.j=function(R){if(F(this)||F(R))return v;if(O(this))return O(R)?z(this).j(z(R)):z(z(this).j(R));if(O(R))return z(this.j(z(R)));if(this.l(b)<0&&R.l(b)<0)return p(this.m()*R.m());const C=this.g.length+R.g.length,S=[];for(var M=0;M<2*C;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<R.g.length;V++){const P=this.i(M)>>>16,A=this.i(M)&65535,te=R.i(V)>>>16,Le=R.i(V)&65535;S[2*M+2*V]+=A*Le,x(S,2*M+2*V),S[2*M+2*V+1]+=P*Le,x(S,2*M+2*V+1),S[2*M+2*V+1]+=A*te,x(S,2*M+2*V+1),S[2*M+2*V+2]+=P*te,x(S,2*M+2*V+2)}for(R=0;R<C;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=C;R<2*C;R++)S[R]=0;return new l(S,0)};function x(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function N(R,C){this.g=R,this.h=C}function W(R,C){if(F(C))throw Error("division by zero");if(F(R))return new N(v,v);if(O(R))return C=W(z(R),C),new N(z(C.g),z(C.h));if(O(C))return C=W(R,z(C)),new N(z(C.g),C.h);if(R.g.length>30){if(O(R)||O(C))throw Error("slowDivide_ only works with positive integers.");for(var S=T,M=C;M.l(R)<=0;)S=Q(S),M=Q(M);var V=J(S,1),P=J(M,1);for(M=J(M,2),S=J(S,2);!F(M);){var A=P.add(M);A.l(R)<=0&&(V=V.add(S),P=A),M=J(M,1),S=J(S,1)}return C=k(R,V.j(C)),new N(V,C)}for(V=v;R.l(C)>=0;){for(S=Math.max(1,Math.floor(R.m()/C.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=p(S),A=P.j(C);O(A)||A.l(R)>0;)S-=M,P=p(S),A=P.j(C);F(P)&&(P=T),V=V.add(P),R=k(R,A)}return new N(V,R)}t.B=function(R){return W(this,R).h},t.and=function(R){const C=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<C;M++)S[M]=this.i(M)&R.i(M);return new l(S,this.h&R.h)},t.or=function(R){const C=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<C;M++)S[M]=this.i(M)|R.i(M);return new l(S,this.h|R.h)},t.xor=function(R){const C=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<C;M++)S[M]=this.i(M)^R.i(M);return new l(S,this.h^R.h)};function Q(R){const C=R.g.length+1,S=[];for(let M=0;M<C;M++)S[M]=R.i(M)<<1|R.i(M-1)>>>31;return new l(S,R.h)}function J(R,C){const S=C>>5;C%=32;const M=R.g.length-S,V=[];for(let P=0;P<M;P++)V[P]=C>0?R.i(P+S)>>>C|R.i(P+S+1)<<32-C:R.i(P+S);return new l(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,qE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Rr=l}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GE,al,ZE,Mc,Pp,KE,QE,YE;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in y))break e;y=y[j]}u=u[u.length-1],I=y[u],m=m(I),m!=I&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var y=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&y.push([I,m[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){return p=d,p.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function v(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,j,U){for(var ee=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];return m.prototype[j].apply(I,ee)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function b(u){const m=u.length;if(m>0){const y=Array(m);for(let I=0;I<m;I++)y[I]=u[I];return y}return[]}function F(u,m){for(let I=1;I<arguments.length;I++){const j=arguments[I];var y=typeof j;if(y=y!="object"?y:j?Array.isArray(j)?"array":y:"null",y=="array"||y=="object"&&typeof j.length=="number"){y=u.length||0;const U=j.length||0;u.length=y+U;for(let ee=0;ee<U;ee++)u[y+ee]=j[ee]}else u.push(j)}}class O{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function z(u){l.setTimeout(()=>{throw u},0)}function k(){var u=R;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class x{constructor(){this.h=this.g=null}add(m,y){const I=N.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var N=new O(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,R=new x,C=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(S)}};function S(){for(var u;u=k();){try{u.h.call(u.g)}catch(y){z(y)}var m=N;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function te(u,m){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(te,V),te.prototype.init=function(u,m){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),Me=0;function Ze(u,m,y,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=j,this.key=++Me,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,m,y){for(const I in u)m.call(y,u[I],I,u)}function X(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function ce(u){const m={};for(const y in u)m[y]=u[y];return m}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(u,m){let y,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(y in I)u[y]=I[y];for(let U=0;U<ve.length;U++)y=ve[U],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,m,y,I,j){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const ee=pe(u,m,I,j);return ee>-1?(m=u[ee],y||(m.fa=!1)):(m=new Ze(m,this.src,U,!!I,j),m.fa=y,u.push(m)),m};function xe(u,m){const y=m.type;if(y in u.g){var I=u.g[y],j=Array.prototype.indexOf.call(I,m,void 0),U;(U=j>=0)&&Array.prototype.splice.call(I,j,1),U&&($(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function pe(u,m,y,I){for(let j=0;j<u.length;++j){const U=u[j];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==I)return j}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),mn={};function ya(u,m,y,I,j){if(Array.isArray(m)){for(let U=0;U<m.length;U++)ya(u,m[U],y,I,j);return null}return y=Kr(y),u&&u[Le]?u.J(m,y,h(I)?!!I.capture:!1,j):va(u,m,y,!1,I,j)}function va(u,m,y,I,j,U){if(!m)throw Error("Invalid event type");const ee=h(j)?!!j.capture:!!j;let ge=Vs(u);if(ge||(u[_t]=ge=new ke(u)),y=ge.add(m,y,I,ee,U),y.proxy)return y;if(I=wa(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)P||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(wu(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function wa(){function u(y){return m.call(u.src,u.listener,y)}const m=Eu;return u}function Zi(u,m,y,I,j){if(Array.isArray(m))for(var U=0;U<m.length;U++)Zi(u,m[U],y,I,j);else I=h(I)?!!I.capture:!!I,y=Kr(y),u&&u[Le]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],y=pe(m,y,I,j),y>-1&&($(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=Vs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=pe(m,y,I,j)),(y=u>-1?m[u]:null)&&Gr(y))}function Gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Le])xe(m.i,u);else{var y=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(y,I,u.capture):m.detachEvent?m.detachEvent(wu(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=Vs(m))?(xe(y,u),y.h==0&&(y.src=null,m[_t]=null)):$(u)}}}function wu(u){return u in mn?mn[u]:mn[u]="on"+u}function Eu(u,m){if(u.da)u=!0;else{m=new te(m,this);const y=u.listener,I=u.ha||u.src;u.fa&&Gr(u),u=y.call(I,m)}return u}function Vs(u){return u=u[_t],u instanceof ke?u:null}var Zr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Kr(u){return typeof u=="function"?u:(u[Zr]||(u[Zr]=function(m){return u.handleEvent(m)}),u[Zr])}function yt(){M.call(this),this.i=new ke(this),this.M=this,this.G=null}v(yt,M),yt.prototype[Le]=!0,yt.prototype.removeEventListener=function(u,m,y,I){Zi(this,u,m,y,I)};function vt(u,m){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new V(m,u);else if(m instanceof V)m.target=m.target||u;else{var j=m;m=new V(I,u),We(m,j)}j=!0;let U,ee;if(y)for(ee=y.length-1;ee>=0;ee--)U=m.g=y[ee],j=Ki(U,I,!0,m)&&j;if(U=m.g=u,j=Ki(U,I,!0,m)&&j,j=Ki(U,I,!1,m)&&j,y)for(ee=0;ee<y.length;ee++)U=m.g=y[ee],j=Ki(U,I,!1,m)&&j}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let I=0;I<y.length;I++)$(y[I]);delete u.g[m],u.h--}}this.G=null},yt.prototype.J=function(u,m,y,I){return this.i.add(String(u),m,!1,y,I)},yt.prototype.K=function(u,m,y,I){return this.i.add(String(u),m,!0,y,I)};function Ki(u,m,y,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let U=0;U<m.length;++U){const ee=m[U];if(ee&&!ee.da&&ee.capture==y){const ge=ee.listener,Oe=ee.ha||ee.src;ee.fa&&xe(u.i,ee),j=ge.call(Oe,I)!==!1&&j}}return j&&!I.defaultPrevented}function Tu(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function Ea(u){u.g=Tu(()=>{u.g=null,u.i&&(u.i=!1,Ea(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cd extends M{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(u){M.call(this),this.h=u,this.g={}}v(Qr,M);var Fs=[];function Ta(u){le(u.g,function(m,y){this.g.hasOwnProperty(y)&&Gr(m)},u),u.g={}}Qr.prototype.N=function(){Qr.Z.N.call(this),Ta(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=l.JSON.stringify,Pd=l.JSON.parse,xu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function xa(){}function Iu(){}var Qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yr(){V.call(this,"d")}v(Yr,V);function js(){V.call(this,"c")}v(js,V);var yi={},Yi=null;function Bs(){return Yi=Yi||new yt}yi.Ia="serverreachability";function Su(u){V.call(this,yi.Ia,u)}v(Su,V);function Xi(u){const m=Bs();vt(m,new Su(m))}yi.STAT_EVENT="statevent";function Ia(u,m){V.call(this,yi.STAT_EVENT,u),this.stat=m}v(Ia,V);function wt(u){const m=Bs();vt(m,new Ia(m,u))}yi.Ja="timingevent";function Cu(u,m){V.call(this,yi.Ja,u),this.size=m}v(Cu,V);function Xr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function Ad(u,m,y,I,j,U){u.info(function(){if(u.g)if(U){var ee="",ge=U.split("&");for(let Ve=0;Ve<ge.length;Ve++){var Oe=ge[Ve].split("=");if(Oe.length>1){const it=Oe[0];Oe=Oe[1];const wn=it.split("_");ee=wn.length>=2&&wn[1]=="type"?ee+(it+"="+Oe+"&"):ee+(it+"=redacted&")}}}else ee=null;else ee=U;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+y+`
`+ee})}function kd(u,m,y,I,j,U,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+y+`
`+U+" "+ee})}function Ji(u,m,y,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Rd(u,y)+(I?" "+I:"")})}function Sa(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Rd(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var y=U[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ee=1;ee<I.length;ee++)I[ee]=""}}}}return zs(U)}catch{return m}}var Us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Au;function Zt(){}v(Zt,xa),Zt.prototype.g=function(){return new XMLHttpRequest},Au=new Zt;function ae(u){return encodeURIComponent(String(u))}function ku(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function bn(u,m,y,I){this.j=u,this.i=m,this.l=y,this.S=I||1,this.V=new Qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var Pa={},es={};function Hs(u,m,y){u.M=1,u.A=Be(Bt(m)),u.u=y,u.R=!0,vi(u,null)}function vi(u,m){u.F=Date.now(),Ws(u),u.B=Bt(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),Ks(y.i,"t",I),u.C=0,y=u.j.L,u.h=new Ca,u.g=Ba(u.j,y?m:null,!u.u),u.P>0&&(u.O=new Cd(p(u.Y,u,u.g),u.P)),m=u.V,y=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(Fs[0]=j.toString()),j=Fs);for(let U=0;U<j.length;U++){const ee=ya(y,j[U],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.J?ce(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Xi(),Ad(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Yn(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const ge=Yn(this.g),Oe=this.g.ya(),Ve=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Oa(this.g)))){this.K||ge!=4||Oe==7||(Oe==8||Ve<=0?Xi(3):Xi(2)),$s(this);var m=this.g.ca();this.X=m;var y=Ru(this);if(this.o=m==200,kd(this.i,this.v,this.B,this.l,this.S,ge,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(I)){var U=I;break t}}U=null}if(u=U)Ji(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Aa(this,u);else{this.o=!1,this.m=3,wt(12),gn(this),ts(this);break e}}if(this.R){u=!0;let it;for(;!this.K&&this.C<y.length;)if(it=bd(this,y),it==es){ge==4&&(this.m=4,wt(14),u=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(it==Pa){this.m=4,wt(15),Ji(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Ji(this.i,this.l,it,null),Aa(this,it);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||y.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)Ji(this.i,this.l,y,"[Invalid Chunked Response]"),gn(this),ts(this);else if(y.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),za(ee),ee.P=!0,wt(11))}}else Ji(this.i,this.l,y,null),Aa(this,y);ge==4&&gn(this),this.o&&!this.K&&(ge==4?an(this.j,this):(this.o=!1,Ws(this)))}else Ma(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),gn(this),ts(this)}}}catch{}finally{}};function Ru(u){if(!bu(u))return u.g.la();const m=Oa(u.g);if(m==="")return"";let y="";const I=m.length,j=Yn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gn(u),ts(u),"";u.h.i=new l.TextDecoder}for(let U=0;U<I;U++)u.h.h=!0,y+=u.h.i.decode(m[U],{stream:!(j&&U==I-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function bu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bd(u,m){var y=u.C,I=m.indexOf(`
`,y);return I==-1?es:(y=Number(m.substring(y,I)),isNaN(y)?Pa:(I+=1,I+y>m.length?es:(m=m.slice(I,I+y),u.C=I+y,m)))}bn.prototype.cancel=function(){this.K=!0,gn(this)};function Ws(u){u.T=Date.now()+u.H,Lu(u,u.H)}function Lu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xr(p(u.aa,u),m)}function $s(u){u.D&&(l.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Sa(this.i,this.B),this.M!=2&&(Xi(),wt(17)),gn(this),this.m=2,ts(this)):Lu(this,this.T-u)};function ts(u){u.j.I==0||u.K||an(u.j,u)}function gn(u){$s(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ta(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Aa(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ns(y.h,u))){if(!u.L&&ns(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)eo(y),Xs(y);else break e;Fa(y),wt(18)}}else y.xa=j[1],0<y.xa-y.K&&j[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Xr(p(y.Va,y),6e3));Mu(y.h)<=1&&y.ta&&(y.ta=void 0)}else Jn(y,11)}else if((u.L||y.g==u)&&eo(y),!A(m))for(j=y.Ba.g.parse(m),m=0;m<j.length;m++){let Ve=j[m];const it=Ve[0];if(!(it<=y.K))if(y.K=it,Ve=Ve[1],y.I==2)if(Ve[0]=="c"){y.M=Ve[1],y.ba=Ve[2];const wn=Ve[3];wn!=null&&(y.ka=wn,y.j.info("VER="+y.ka));const On=Ve[4];On!=null&&(y.za=On,y.j.info("SVER="+y.za));const En=Ve[5];En!=null&&typeof En=="number"&&En>0&&(I=1.5*En,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const ei=u.g;if(ei){const io=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var U=I.h;U.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(wi(U,U.h),U.h=null))}if(I.G){const ro=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(I.wa=ro,se(I.J,I.G,ro))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var ee=u;if(I.na=ja(I,I.L?I.ba:null,I.W),ee.L){ka(I.h,ee);var ge=ee,Oe=I.O;Oe&&(ge.H=Oe),ge.D&&($s(ge),Ws(ge)),I.g=ee}else Va(I);y.i.length>0&&Xn(y)}else Ve[0]!="stop"&&Ve[0]!="close"||Jn(y,7);else y.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Jn(y,7):we(y):Ve[0]!="noop"&&y.l&&y.l.qa(Ve),y.A=0)}}Xi(4)}catch{}}var Ld=class{constructor(u,m){this.g=u,this.map=m}};function Nu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ou(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mu(u){return u.h?1:u.g?u.g.size:0}function ns(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wi(u,m){u.g?u.g.add(m):u.h=m}function ka(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Nu.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ra(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return b(u.i)}var er=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pe(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let j,U=null;I>=0?(j=u[y].substring(0,I),U=u[y].substring(I+1)):j=u[y],m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ne(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Ne?(this.l=u.l,_n(this,u.j),this.o=u.o,this.g=u.g,yn(this,u.u),this.h=u.h,is(this,rs(u.i)),this.m=u.m):u&&(m=String(u).match(er))?(this.l=!1,_n(this,m[1]||"",!0),this.o=Ei(m[2]||""),this.g=Ei(m[3]||"",!0),yn(this,m[4]),this.h=Ei(m[5]||"",!0),is(this,m[6]||"",!0),this.m=Ei(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}Ne.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Zn(m,Du,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Zn(m,Du,!0),"@"),u.push(ae(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Zn(y,y.charAt(0)=="/"?Ti:qs,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Zn(y,xi)),u.join("")},Ne.prototype.resolve=function(u){const m=Bt(this);let y=!!u.j;y?_n(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var I=u.h;if(y)yn(m,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=m.h.lastIndexOf("/");j!=-1&&(I=m.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const U=[];for(let ee=0;ee<j.length;){const ge=j[ee++];ge=="."?I&&ee==j.length&&U.push(""):ge==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&ee==j.length&&U.push("")):(U.push(ge),I=!0)}I=U.join("/")}else I=j}return y?m.h=I:y=u.i.toString()!=="",y?is(m,rs(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Bt(u){return new Ne(u)}function _n(u,m,y){u.j=y?Ei(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function yn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function is(u,m,y){m instanceof Ln?(u.i=m,ba(u.i,u.l)):(y||(m=Zn(m,et)),u.i=new Ln(m,u.l))}function se(u,m,y){u.i.set(m,y)}function Be(u){return se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ei(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Kt),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Du=/[#\/\?@]/g,qs=/[#\?:]/g,Ti=/[#\?]/g,et=/[#\?@]/g,xi=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function on(u){u.g||(u.g=new Map,u.h=0,u.i&&Pe(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Ln.prototype,t.add=function(u,m){on(this),this.i=null,u=Kn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Gs(u,m){on(u),m=Kn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function tr(u,m){return on(u),m=Kn(u,m),u.g.has(m)}t.forEach=function(u,m){on(this),this.g.forEach(function(y,I){y.forEach(function(j){u.call(m,j,I,this)},this)},this)};function Zs(u,m){on(u);let y=[];if(typeof m=="string")tr(u,m)&&(y=y.concat(u.g.get(Kn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return on(this),this.i=null,u=Kn(this,u),tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=Zs(this,u),u.length>0?String(u[0]):m):m};function Ks(u,m,y){Gs(u,m),y.length>0&&(u.i=null,u.g.set(Kn(u,m),b(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var y=m[I];const j=ae(y);y=Zs(this,y);for(let U=0;U<y.length;U++){let ee=j;y[U]!==""&&(ee+="="+ae(y[U])),u.push(ee)}}return this.i=u.join("&")};function rs(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Kn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ba(u,m){m&&!u.j&&(on(u),u.i=null,u.g.forEach(function(y,I){const j=I.toLowerCase();I!=j&&(Gs(this,I),Ks(this,j,y))},u)),u.j=m}function Qs(u,m){const y=new Jr;if(l.Image){const I=new Image;I.onload=_(vn,y,"TestLoadImage: loaded",!0,m,I),I.onerror=_(vn,y,"TestLoadImage: error",!1,m,I),I.onabort=_(vn,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=_(vn,y,"TestLoadImage: timeout",!1,m,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Vu(u,m){const y=new Jr,I=new AbortController,j=setTimeout(()=>{I.abort(),vn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(U=>{clearTimeout(j),U.ok?vn(y,"TestPingServer: ok",!0,m):vn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),vn(y,"TestPingServer: error",!1,m)})}function vn(u,m,y,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(y)}catch{}}function Nd(){this.g=new xu}function me(u){this.i=u.Sb||null,this.h=u.ab||!1}v(me,xa),me.prototype.g=function(){return new Ut(this.i,this.h)};function Ut(u,m){yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ut,yt),t=Ut.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ii(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ze(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ze(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?nr(this):Ii(this),this.readyState==3&&ze(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,nr(this))},t.Na=function(u){this.g&&(this.response=u,nr(this))},t.ga=function(){this.g&&nr(this)};function nr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ii(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ii(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ys(u){let m="";return le(u,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function ss(u,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Ys(y),typeof u=="string"?y!=null&&ae(y):se(u,m,y))}function De(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(De,yt);var La=/^https?$/i,os=["POST","PUT"];t=De.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Au.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){at(this,U);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)y.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())y.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),j=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(os,m,void 0)>=0)||I||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ee]of y)this.g.setRequestHeader(U,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){at(this,U)}};function at(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Qn(u),as(u)}function Qn(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Na(this):this.Xa())},t.Xa=function(){Na(this)};function Na(u){if(u.h&&typeof o<"u"){if(u.v&&Yn(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=U===0){let ee=String(u.D).match(er)[1]||null;!ee&&l.self&&l.self.location&&(ee=l.self.location.protocol.slice(0,-1)),I=!La.test(ee?ee.toLowerCase():"")}y=I}if(y)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var j=Yn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Qn(u)}}finally{as(u)}}}}function as(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||vt(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pd(m)}};function Oa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ma(u){const m={};u=(u.g&&Yn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(A(u[I]))continue;var y=ku(u[I]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[j]||[];m[j]=U,U.push(y)}X(m,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Da(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ls("baseRetryDelayMs",5e3,u),this.Za=ls("retryDelaySeedMs",1e4,u),this.Ta=ls("forwardChannelMaxRetries",2,u),this.va=ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Nu(u&&u.concurrentRequestLimit),this.Ba=new Nd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Da.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,I){wt(0),this.W=u,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=ja(this,null,this.W),Xn(this)};function we(u){if(Qt(u),u.I==3){var m=u.V++,y=Bt(u.J);if(se(y,"SID",u.M),se(y,"RID",m),se(y,"TYPE","terminate"),Si(u,y),m=new bn(u,u.j,m),m.M=2,m.A=Be(Bt(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.A,y=!0),y||(m.g=Ba(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ws(m)}Nn(u)}function Xs(u){u.g&&(za(u),u.g.cancel(),u.g=null)}function Qt(u){Xs(u),u.v&&(l.clearTimeout(u.v),u.v=null),eo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function Xn(u){if(!Ou(u.h)&&!u.m){u.m=!0;var m=u.Ea;Q||C(),J||(Q(),J=!0),R.add(m,u),u.D=0}}function Fu(u,m){return Mu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xr(p(u.Ea,u,m),Bu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new bn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=ce(U),We(U,this.U)):U=this.U),this.u!==null||this.R||(j.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=ju(this,j,m),y=Bt(this.J),se(y,"RID",u),se(y,"CVER",22),this.G&&se(y,"X-HTTP-Session-Id",this.G),Si(this,y),U&&(this.R?m="headers="+ae(Ys(U))+"&"+m:this.u&&ss(y,this.u,U)),wi(this.h,j),this.Ra&&se(y,"TYPE","init"),this.S?(se(y,"$req",m),se(y,"SID","null"),j.U=!0,Hs(j,y,null)):Hs(j,y,m),this.I=2}}else this.I==3&&(u?zu(this,u):this.i.length==0||Ou(this.h)||zu(this))};function zu(u,m){var y;m?y=m.l:y=u.V++;const I=Bt(u.J);se(I,"SID",u.M),se(I,"RID",y),se(I,"AID",u.K),Si(u,I),u.u&&u.o&&ss(I,u.u,u.o),y=new bn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ju(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),wi(u.h,y),Hs(y,I,m)}function Si(u,m){u.H&&le(u.H,function(y,I){se(m,I,y)}),u.l&&le({},function(y,I){se(m,I,y)})}function ju(u,m,y){y=Math.min(u.i.length,y);const I=u.l?p(u.l.Ka,u.l,u):null;e:{var j=u.i;let ge=-1;for(;;){const Oe=["count="+y];ge==-1?y>0?(ge=j[0].g,Oe.push("ofs="+ge)):ge=0:Oe.push("ofs="+ge);let Ve=!0;for(let it=0;it<y;it++){var U=j[it].g;const wn=j[it].map;if(U-=ge,U<0)ge=Math.max(0,j[it].g-100),Ve=!1;else try{U="req"+U+"_"||"";try{var ee=wn instanceof Map?wn:Object.entries(wn);for(const[On,En]of ee){let ei=En;h(En)&&(ei=zs(En)),Oe.push(U+On+"="+encodeURIComponent(ei))}}catch(On){throw Oe.push(U+"type="+encodeURIComponent("_badmap")),On}}catch{I&&I(wn)}}if(Ve){ee=Oe.join("&");break e}}ee=void 0}return u=u.i.splice(0,y),m.G=u,ee}function Va(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Q||C(),J||(Q(),J=!0),R.add(m,u),u.A=0}}function Fa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xr(p(u.Da,u),Bu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Js(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xr(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Xs(this),Js(this))};function za(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function Js(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Bt(u.na);se(m,"RID","rpc"),se(m,"SID",u.M),se(m,"AID",u.K),se(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&se(m,"TO",u.ia),se(m,"TYPE","xmlhttp"),Si(u,m),u.u&&u.o&&ss(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Be(Bt(m)),y.u=null,y.R=!0,vi(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Xs(this),Fa(this),wt(19))};function eo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function an(u,m){var y=null;if(u.g==m){eo(u),za(u),u.g=null;var I=2}else if(ns(u.h,m))y=m.G,ka(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;I=Bs(),vt(I,new Cu(I,y)),Xn(u)}else Va(u);else if(j=m.m,j==3||j==0&&m.X>0||!(I==1&&Fu(u,m)||I==2&&Fa(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),j){case 1:Jn(u,5);break;case 4:Jn(u,10);break;case 3:Jn(u,6);break;default:Jn(u,2)}}}function Bu(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function Jn(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.bb,u),I=u.Ua;const j=!I;I=new Ne(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_n(I,"https"),Be(I),j?Qs(I.toString(),y):Vu(I.toString(),y)}else wt(2);u.I=0,u.l&&u.l.pa(m),Nn(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Nn(u){if(u.I=0,u.ja=[],u.l){const m=Ra(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.oa()}}function ja(u,m,y){var I=y instanceof Ne?Bt(y):new Ne(y);if(I.g!="")m&&(I.g=m+"."+I.g),yn(I,I.u);else{var j=l.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const U=new Ne(null);I&&_n(U,I),m&&(U.g=m),j&&yn(U,j),y&&(U.h=y),I=U}return y=u.G,m=u.wa,y&&m&&se(I,y,m),se(I,"VER",u.ka),Si(u,I),I}function Ba(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new De(new me({ab:y})):new De(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function to(){}t=to.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function no(){}no.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){yt.call(this),this.g=new Da(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ir(this)}v(Lt,yt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){we(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=zs(u),u=y);m.i.push(new Ld(m.Ya++,u)),m.I==3&&Xn(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,we(this.g),delete this.g,Lt.Z.N.call(this)};function Ua(u){Yr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Ua,Yr);function Uu(){js.call(this),this.status=1}v(Uu,js);function ir(u){this.g=u}v(ir,to),ir.prototype.ra=function(){vt(this.g,"a")},ir.prototype.qa=function(u){vt(this.g,new Ua(u))},ir.prototype.pa=function(u){vt(this.g,new Uu)},ir.prototype.oa=function(){vt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,YE=function(){return new no},QE=function(){return Bs()},KE=yi,Pp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,Mc=Us,Pu.COMPLETE="complete",ZE=Pu,Iu.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",yt.prototype.listen=yt.prototype.J,al=Iu,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,GE=De}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",Uy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Gm("@firebase/firestore");function po(){return Ps.logLevel}function re(t,...e){if(Ps.logLevel<=Ie.DEBUG){const n=e.map(Qm);Ps.debug(`Firestore (${ua}): ${t}`,...n)}}function Hi(t,...e){if(Ps.logLevel<=Ie.ERROR){const n=e.map(Qm);Ps.error(`Firestore (${ua}): ${t}`,...n)}}function Qo(t,...e){if(Ps.logLevel<=Ie.WARN){const n=e.map(Qm);Ps.warn(`Firestore (${ua}): ${t}`,...n)}}function Qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,XE(t,i,n)}function XE(t,e,n){let i=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Hi(i),new Error(i)}function Fe(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||XE(e,s,i)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class QA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vi)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new JE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class XA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ek{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tk(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Se(t,e){return t<e?-1:t>e?1:0}function Ap(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return yf(s)===yf(o)?Se(s,o):yf(s)?1:-1}return Se(t.length,e.length)}const nk=55296,ik=57343;function yf(t){const e=t.charCodeAt(0);return e>=nk&&e<=ik}function Yo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="__name__";class ri{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&fe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=ri.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Se(e.length,n.length)}static compareSegments(e,n){const i=ri.isNumericId(e),s=ri.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ri.extractNumericId(e).compare(ri.extractNumericId(n)):Ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class Ue extends ri{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends ri{construct(e,n,i){return new At(e,n,i)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wy}static keyField(){return new At([Wy])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Ue.fromString(e))}static fromName(e){return new ue(Ue.fromString(e).popFirst(5))}static empty(){return new ue(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sk(t,e,n,i){if(e===!0&&i===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $y(t){if(!ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qy(t){if(ue.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nd(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!tT(t))throw new ne(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ne(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-62135596800,Zy=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Zy);return new qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gy)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zy}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:dt("string",qe._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new qe(0,0))}static max(){return new _e(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function ok(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Mr(s,ue.empty(),e)}function ak(t){return new Mr(t.readTime,t.key,Gl)}class Mr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Mr(_e.min(),ue.empty(),Gl)}static max(){return new Mr(_e.max(),ue.empty(),Gl)}}function lk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ck{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==uk)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(s=>s?Z.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(_=>{l[p]=_,++h,h===o&&i(l)},_=>s(_))}})}static doWhile(e,n){return new Z((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function hk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=-1;function rd(t){return t==null}function vh(t){return t===0&&1/t==-1/0}function dk(t){return typeof t=="number"&&Number.isInteger(t)&&!vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="";function fk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ky(e)),e=pk(t.get(n),e);return Ky(e)}function pk(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case nT:n+="";break;default:n+=o}}return n}function Ky(t){return t+nT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Pt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yy(this.data.getIterator())}getIteratorFrom(e){return new Yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new cn([])}unionWith(e){let n=new gt(At.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rT("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const mk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=mk.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="server_timestamp",oT="__type__",aT="__previous_value__",lT="__local_write_time__";function Jm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oT])==null?void 0:i.stringValue)===sT}function sd(t){const e=t.mapValue.fields[aT];return Jm(e)?sd(e):e}function Zl(t){const e=Dr(t.mapValue.fields[lT].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,i,s,o,l,h,d,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const wh="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="__type__",_k="__max__",vc={mapValue:{}},cT="__vector__",Eh="value";function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jm(t)?4:vk(t)?9007199254740991:yk(t)?10:11:fe(28295,{value:t})}function _i(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Dr(s.timestampValue),h=Dr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Vr(s.bytesValue).isEqual(Vr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return rt(s.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return rt(s.integerValue)===rt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=rt(s.doubleValue),h=rt(o.doubleValue);return l===h?vh(l)===vh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Qy(l)!==Qy(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!_i(l[d],h[d])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Ql(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function Xo(t,e){if(t===e)return 0;const n=Fr(t),i=Fr(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=rt(o.integerValue||o.doubleValue),d=rt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Xy(t.timestampValue,e.timestampValue);case 4:return Xy(Zl(t),Zl(e));case 5:return Ap(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Vr(o),d=Vr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=Se(h[p],d[p]);if(_!==0)return _}return Se(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Se(rt(o.latitude),rt(l.latitude));return h!==0?h:Se(rt(o.longitude),rt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jy(t.arrayValue,e.arrayValue);case 10:return function(o,l){var T,b,F,O;const h=o.fields||{},d=l.fields||{},p=(T=h[Eh])==null?void 0:T.arrayValue,_=(b=d[Eh])==null?void 0:b.arrayValue,v=Se(((F=p==null?void 0:p.values)==null?void 0:F.length)||0,((O=_==null?void 0:_.values)==null?void 0:O.length)||0);return v!==0?v:Jy(p,_)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===vc.mapValue&&l===vc.mapValue)return 0;if(o===vc.mapValue)return 1;if(l===vc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=Ap(d[v],_[v]);if(T!==0)return T;const b=Xo(h[d[v]],p[_[v]]);if(b!==0)return b}return Se(d.length,_.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function Xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Dr(t),i=Dr(e),s=Se(n.seconds,i.seconds);return s!==0?s:Se(n.nanos,i.nanos)}function Jy(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Xo(n[s],i[s]);if(o)return o}return Se(n.length,i.length)}function Jo(t){return kp(t)}function kp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=kp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${kp(n.fields[l])}`;return s+"}"}(t.mapValue):fe(61005,{value:t})}function Dc(t){switch(Fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sd(t);return e?16+Dc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Dc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Wr(i.fields,(o,l)=>{s+=o.length+Dc(l)}),s}(t.mapValue);default:throw fe(13486,{value:t})}}function ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rp(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function tv(t){return!!t&&"nullValue"in t}function nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function yk(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uT])==null?void 0:i.stringValue)===cT}function El(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=El(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=El(t.arrayValue.values[n]);return e}return{...t}}function vk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_k}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(n)}setAll(e){let n=At.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=El(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Wr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new en(El(this.value))}}function hT(t){const e=[];return Wr(t.fields,(n,i)=>{const s=new At([n]);if(Vc(i)){const o=hT(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ft(e,0,_e.min(),_e.min(),_e.min(),en.empty(),0)}static newFoundDocument(e,n,i,s){return new Ft(e,1,n,_e.min(),i,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,_e.min(),_e.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,_e.min(),_e.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.position=e,this.inclusive=n}}function iv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ue.comparator(ue.fromName(l.referenceValue),n.key):i=Xo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function rv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function wk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class ht extends dT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Tk(e,n,i):n==="array-contains"?new Sk(e,i):n==="in"?new Ck(e,i):n==="not-in"?new Pk(e,i):n==="array-contains-any"?new Ak(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new xk(e,i):new Ik(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends dT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qn(e,n)}matches(e){return fT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fT(t){return t.op==="and"}function pT(t){return Ek(t)&&fT(t)}function Ek(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function bp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(pT(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function mT(t,e){return t instanceof ht?function(i,s){return s instanceof ht&&i.op===s.op&&i.field.isEqual(s.field)&&_i(i.value,s.value)}(t,e):t instanceof qn?function(i,s){return s instanceof qn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&mT(l,s.filters[h]),!0):!1}(t,e):void fe(19439)}function gT(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(gT).join(" ,")+"}"}(t):"Filter"}class Tk extends ht{constructor(e,n,i){super(e,n,i),this.key=ue.fromName(i.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class xk extends ht{constructor(e,n){super(e,"in",n),this.keys=_T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ik extends ht{constructor(e,n){super(e,"not-in",n),this.keys=_T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _T(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ue.fromName(i.referenceValue))}class Sk extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Ql(n.arrayValue,this.value)}}class Ck extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class Pk extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class Ak extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function sv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new kk(t,e,n,i,s,o,l)}function tg(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jo(i)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rv(t.startAt,e.startAt)&&rv(t.endAt,e.endAt)}function Lp(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rk(t,e,n,i,s,o,l,h){return new da(t,e,n,i,s,o,l,h)}function ig(t){return new da(t)}function ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yT(t){return t.collectionGroup!==null}function Tl(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new gt(At.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yl(o,i))}),n.has(At.keyField().canonicalString())||e.Ie.push(new Yl(At.keyField(),i))}return e.Ie}function ci(t){const e=ye(t);return e.Ee||(e.Ee=bk(e,Tl(t))),e.Ee}function bk(t,e){if(t.limitType==="F")return sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Yl(s.field,o)});const n=t.endAt?new Th(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Th(t.startAt.position,t.startAt.inclusive):null;return sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Np(t,e){const n=t.filters.concat([e]);return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Op(t,e,n){return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return ng(ci(t),ci(e))&&t.limitType===e.limitType}function vT(t){return`${tg(ci(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>gT(s)).join(", ")}]`),rd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Jo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Jo(s)).join(",")),`Target(${i})`}(ci(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ue.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Tl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=iv(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Tl(i),s)||i.endAt&&!function(l,h,d){const p=iv(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Tl(i),s))}(t,e)}function Lk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wT(t){return(e,n)=>{let i=!1;for(const s of Tl(t)){const o=Nk(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Nk(t,e,n){const i=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Xo(d,p):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return iT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new Je(ue.comparator);function Wi(){return Ok}const ET=new Je(ue.comparator);function ll(...t){let e=ET;for(const n of t)e=e.insert(n.key,n);return e}function TT(t){let e=ET;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ms(){return xl()}function xT(){return xl()}function xl(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mk=new Je(ue.comparator),Dk=new gt(ue.comparator);function Ce(...t){let e=Dk;for(const n of t)e=e.add(n);return e}const Vk=new gt(Se);function Fk(){return Vk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function IT(t){return{integerValue:""+t}}function zk(t,e){return dk(e)?IT(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function jk(t,e,n){return t instanceof xh?function(s,o){const l={fields:{[oT]:{stringValue:sT},[lT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jm(o)&&(o=sd(o)),o&&(l.fields[aT]=o),{mapValue:l}}(n,e):t instanceof Xl?CT(t,e):t instanceof Jl?PT(t,e):function(s,o){const l=ST(s,o),h=av(l)+av(s.Ae);return Rp(l)&&Rp(s.Ae)?IT(h):rg(s.serializer,h)}(t,e)}function Bk(t,e,n){return t instanceof Xl?CT(t,e):t instanceof Jl?PT(t,e):n}function ST(t,e){return t instanceof Ih?function(i){return Rp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class xh extends ld{}class Xl extends ld{constructor(e){super(),this.elements=e}}function CT(t,e){const n=AT(e);for(const i of t.elements)n.some(s=>_i(s,i))||n.push(i);return{arrayValue:{values:n}}}class Jl extends ld{constructor(e){super(),this.elements=e}}function PT(t,e){let n=AT(e);for(const i of t.elements)n=n.filter(s=>!_i(s,i));return{arrayValue:{values:n}}}class Ih extends ld{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function av(t){return rt(t.integerValue||t.doubleValue)}function AT(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Uk(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Xl&&s instanceof Xl||i instanceof Jl&&s instanceof Jl?Yo(i.elements,s.elements,_i):i instanceof Ih&&s instanceof Ih?_i(i.Ae,s.Ae):i instanceof xh&&s instanceof xh}(t.transform,e.transform)}class Hk{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function kT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sg(t.key,Wn.none()):new du(t.key,t.data,Wn.none());{const n=t.data,i=en.empty();let s=new gt(At.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new $r(t.key,i,new cn(s.toArray()),Wn.none())}}function Wk(t,e,n){t instanceof du?function(s,o,l){const h=s.value.clone(),d=uv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,o,l){if(!Fc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=uv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(RT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,i){return t instanceof du?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=o.value.clone(),_=cv(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof $r?function(o,l,h,d){if(!Fc(o.precondition,l))return h;const p=cv(o.fieldTransforms,d,l),_=l.data;return _.setAll(RT(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,l,h){return Fc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function $k(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=ST(i.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(i.field,o))}return n||null}function lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Yo(i,s,(o,l)=>Uk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends ud{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends ud{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function uv(t,e,n){const i=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,Bk(l,h,n[s]))}return i}function cv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,jk(o,l,e))}return i}class sg extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qk extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Wk(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=xT();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=kT(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,i)=>lv(n,i))&&Yo(this.baseMutations,e.baseMutations,(n,i)=>lv(n,i))}}class og{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Fe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return Mk}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new og(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Ae;function Qk(t){switch(t){case G.OK:return fe(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function bT(t){if(t===void 0)return Hi("GRPC error has no .code"),G.UNKNOWN;switch(t){case ut.OK:return G.OK;case ut.CANCELLED:return G.CANCELLED;case ut.UNKNOWN:return G.UNKNOWN;case ut.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ut.INTERNAL:return G.INTERNAL;case ut.UNAVAILABLE:return G.UNAVAILABLE;case ut.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ut.NOT_FOUND:return G.NOT_FOUND;case ut.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ut.ABORTED:return G.ABORTED;case ut.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ut.DATA_LOSS:return G.DATA_LOSS;default:return fe(39323,{code:t})}}(Ae=ut||(ut={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Rr([4294967295,4294967295],0);function hv(t){const e=Yk().encode(t),n=new qE;return n.update(e),new Uint8Array(n.digest())}function dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rr([n,i],0),new Rr([s,o],0)]}class ag{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ul(`Invalid padding: ${n}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ul(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Rr.fromNumber(i)));return s.compare(Xk)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hv(e),[i,s]=dv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ag(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=hv(e),[i,s]=dv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cd(_e.min(),s,new Je(Se),Wi(),Ce())}}class fu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fu(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class LT{constructor(e,n){this.targetId=e,this.Ce=n}}class NT{constructor(e,n,i=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class fv{constructor(){this.ve=0,this.Fe=pv(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),i=Ce();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:fe(38017,{changeType:o})}}),new fu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Jk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wi(),this.Je=wc(),this.He=wc(),this.Ye=new Je(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Lp(o))if(i===0){const l=new ue(o.path);this.et(n,l,Ft.newNoDocument(l,_e.min()))}else Fe(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Vr(i).toUint8Array()}catch(d){if(d instanceof rT)return Qo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ag(l,s,o)}catch(d){return Qo(d instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Lp(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ft.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Ce();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new cd(e,n,this.Ye,this.je,i);return this.je=Wi(),this.Je=wc(),this.He=wc(),this.Ye=new Je(Se),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wc(){return new Je(ue.comparator)}function pv(){return new Je(ue.comparator)}const eR={asc:"ASCENDING",desc:"DESCENDING"},tR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nR={and:"AND",or:"OR"};class iR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mp(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function Sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rR(t,e){return Sh(t,e.toTimestamp())}function hi(t){return Fe(!!t,49232),_e.fromTimestamp(function(n){const i=Dr(n);return new qe(i.seconds,i.nanos)}(t))}function lg(t,e){return Dp(t,e).canonicalString()}function Dp(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MT(t){const e=Ue.fromString(t);return Fe(jT(e),10190,{key:e.toString()}),e}function Vp(t,e){return lg(t.databaseId,e.path)}function vf(t,e){const n=MT(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(VT(n))}function DT(t,e){return lg(t.databaseId,e)}function sR(t){const e=MT(t);return e.length===4?Ue.emptyPath():VT(e)}function Fp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VT(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mv(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function oR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:fe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(Fe(_===void 0||typeof _=="string",58123),bt.fromBase64String(_||"")):(Fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),bt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=p.code===void 0?G.UNKNOWN:bT(p.code);return new ne(_,p.message||"")}(l);n=new NT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=vf(t,i.document.name),o=hi(i.document.updateTime),l=i.document.createTime?hi(i.document.createTime):_e.min(),h=new en({mapValue:{fields:i.document.fields}}),d=Ft.newFoundDocument(s,o,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new zc(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=vf(t,i.document),o=i.readTime?hi(i.readTime):_e.min(),l=Ft.newNoDocument(s,o),h=i.removedTargetIds||[];n=new zc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=vf(t,i.document),o=i.removedTargetIds||[];n=new zc([],o,s,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new Kk(s,o),h=i.targetId;n=new LT(h,l)}}return n}function aR(t,e){let n;if(e instanceof du)n={update:mv(t,e.key,e.value)};else if(e instanceof sg)n={delete:Vp(t,e.key)};else if(e instanceof $r)n={update:mv(t,e.key,e.data),updateMask:gR(e.fieldMask)};else{if(!(e instanceof qk))return fe(16599,{Vt:e.type});n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof xh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ih)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw fe(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:rR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe(27497)}(t,e.precondition)),n}function lR(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?hi(s.updateTime):hi(o);return l.isEqual(_e.min())&&(l=hi(o)),new Hk(l,s.transformResults||[])}(n,e))):[]}function uR(t,e){return{documents:[DT(t,e.path)]}}function cR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=DT(t,s);const o=function(p){if(p.length!==0)return zT(qn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:go(T.field),direction:fR(T.dir)}}(_))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Mp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function hR(t){let e=sR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Fe(i===1,65062);const _=n.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const T=FT(v);return T instanceof qn&&pT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(T=>function(F){return new Yl(_o(F.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,rd(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(v){const T=!!v.before,b=v.values||[];return new Th(b,T)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const T=!v.before,b=v.values||[];return new Th(b,T)}(n.endAt)),Rk(e,s,l,o,h,"F",d,p)}function dR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_o(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=_o(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_o(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_o(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(_o(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(i=>FT(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function fR(t){return eR[t]}function pR(t){return tR[t]}function mR(t){return nR[t]}function go(t){return{fieldPath:t.canonicalString()}}function _o(t){return At.fromServerFormat(t.fieldPath)}function zT(t){return t instanceof ht?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(tv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(tv(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:pR(n.op),value:n.value}}}(t):t instanceof qn?function(n){const i=n.getFilters().map(s=>zT(s));return i.length===1?i[0]:{compositeFilter:{op:mR(n.op),filters:i}}}(t):fe(54877,{filter:t})}function gR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i,s,o=_e.min(),l=_e.min(),h=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.yt=e}}function yR(t){const e=hR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Cn=new wR}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Mr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new gt(Ue.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new gt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BT=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(BT,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="LruGarbageCollector",ER=1048576;function yv([t,e],[n,i]){const s=Se(t,n);return s===0?Se(e,i):s}class TR{constructor(e){this.Ir=e,this.buffer=new gt(yv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();yv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xR{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(_v,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ha(n)?re(_v,"Ignoring IndexedDB error during garbage collection: ",n):await ca(n)}await this.Vr(3e5)})}}class IR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(id.ce);const i=new TR(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(gv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),po()<=Ie.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function SR(t,e){return new IR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Il(i.mutation,s,cn.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=ll();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Wi();const l=xl(),h=function(){return xl()}();return n.forEach((d,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof $r)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Il(_.mutation,p,_.mutation.getFieldMask(),qe.now())):l.set(p.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),n.forEach((p,_)=>h.set(p,new PR(_,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=xl();let s=new Je((l,h)=>l-h),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let _=i.get(d)||cn.empty();_=h.applyToLocalView(p,_),i.set(d,_);const v=(s.get(h.batchId)||Ce()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,v=xT();_.forEach(T=>{if(!o.has(T)){const b=kT(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ue.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Z.resolve(ms());let h=Gl,d=o;return l.next(p=>Z.forEach(p,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ce())).next(_=>({batchId:h,changes:TT(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(i=>{let s=ll();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=ll();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const p=function(v,T){return new da(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((v,T)=>{l=l.insert(v,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Ft.newInvalidDocument(_)))});let h=ll();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Il(_.mutation,p,cn.empty(),qe.now()),ad(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hi(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yR(s.bundledQuery),readTime:hi(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.overlays=new Je(ue.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ms();return Z.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const s=ms(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Je((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=ms(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=ms(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=s)););return Z.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Zk(n,i));let o=this.qr.get(n);o===void 0&&(o=Ce(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new gt(Tt.$r),this.Ur=new gt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Tt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ue(new Ue([])),i=new Tt(n,e),s=new Tt(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new Ue([])),i=new Tt(n,e),s=new Tt(n,e+1);let o=Ce();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Tt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(Tt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Gk(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Tt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(Se);return n.forEach(s=>{const o=new Tt(s,0),l=new Tt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ue.isDocumentKey(o)||(o=o.child(""));const l=new Tt(new ue(o),0);let h=new gt(Se);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)},l),Z.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,s=>{const o=new Tt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Tt(n,0),s=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=function(){return new Je(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let i=Wi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ft.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Wi();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||lk(ak(_),i)<=0||(s.has(_.key)||ad(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,s){fe(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new OR(this)}getSize(e){return Z.resolve(this.size)}}class OR extends CR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.persistence=e,this.si=new Ns(n=>tg(n),ng),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=ea.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.ui={},this.overlays={},this.ci=new id(0),this.li=!1,this.li=!0,this.hi=new bR,this.referenceDelegate=e(this),this.Pi=new MR(this),this.indexManager=new vR,this.remoteDocumentCache=function(s){return new NR(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new _R(n),this.Ii=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new LR(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const s=new DR(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class DR extends ck{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const s=ue.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.pi=new Ns(i=>fk(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=SR(this,n)}static mi(e,n){return new Ch(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?Z.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dc(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ce(),s=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new hg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bP()?8:hk(jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new VR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(po()<=Ie.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(po()<=Ie.DEBUG&&re("QueryEngine","Query:",mo(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(po()<=Ie.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):Z.resolve())}ys(e,n){if(ov(n))return Z.resolve(null);let i=ci(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Op(n,null,"F"),i=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ce(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.Ds(n,h);return this.Cs(n,p,l,d.readTime)?this.ys(e,Op(n,null,"F")):this.vs(e,p,n,d)}))})))}ws(e,n,i,s){return ov(n)||s.isEqual(_e.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?Z.resolve(null):(po()<=Ie.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,l,n,ok(s,Gl)).next(h=>h))})}Ds(e,n){let i=new gt(wT(e));return n.forEach((s,o)=>{ad(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return po()<=Ie.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",zR=3e8;class jR{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Je(Se),this.xs=new Ns(o=>tg(o),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BR(t,e,n,i){return new jR(t,e,n,i)}async function HT(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ce();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:l,addedBatchIds:h}))})})}function UR(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,_){const v=p.batch,T=v.keys();let b=Z.resolve();return T.forEach(F=>{b=b.next(()=>_.getEntry(d,F)).next(O=>{const z=p.docVersions.get(F);Fe(z!==null,48541),O.version.compareTo(z)<0&&(v.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),_.addEntry(O)))})}),b.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ce();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function WT(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function HR(t,e){const n=ye(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((_,v)=>{const T=s.get(v);if(!T)return;h.push(n.Pi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(o,_.addedDocuments,v)));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(bt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):_.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(_.resumeToken,i)),s=s.insert(v,b),function(O,z,k){return O.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=zR?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(T,b,_)&&h.push(n.Pi.updateTargetData(o,b))});let d=Wi(),p=Ce();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(WR(o,l,e.documentUpdates).next(_=>{d=_.ks,p=_.qs})),!i.isEqual(_e.min())){const _=n.Pi.getLastRemoteSnapshotVersion(o).next(v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.Ms=s,o))}function WR(t,e,n){let i=Ce(),s=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Wi();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(_e.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re(dg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:l,qs:s}})}function $R(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qR(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,Z.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new yr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function zp(t,e,n){const i=ye(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!ha(l))throw l;re(dg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function vv(t,e,n){const i=ye(t);let s=_e.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const v=ye(d),T=v.xs.get(_);return T!==void 0?Z.resolve(v.Ms.get(T)):v.Pi.getTargetData(p,_)}(i,l,ci(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:_e.min(),n?o:Ce())).next(h=>(GR(i,Lk(e),h),{documents:h,Qs:o})))}function GR(t,e,n){let i=t.Os.get(e)||_e.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class wv{constructor(){this.activeTargetIds=Fk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.Mo=new wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Tv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function jp(){return Ec===null?Ec=function(){return 268435456+Math.round(2147483648*Math.random())}():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="RestConnection",QR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===wh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=jp(),h=this.zo(e,n.toUriEncodedString());re(wf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),_=aa(p);return this.Jo(e,h,d,i,_).then(v=>(re(wf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Qo(wf,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=QR[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class JR extends YR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=jp();return new Promise((h,d)=>{const p=new GE;p.setWithCredentials(!0),p.listenOnce(ZE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Mc.NO_ERROR:const v=p.getResponseJson();re(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Mc.TIMEOUT:re(Mt,`RPC '${e}' ${l} timed out`),d(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const T=p.getStatus();if(re(Mt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const F=b==null?void 0:b.error;if(F&&F.status&&F.message){const O=function(k){const x=k.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(x)>=0?x:G.UNKNOWN}(F.status);d(new ne(O,F.message))}else d(new ne(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ne(G.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{re(Mt,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(s);re(Mt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",_,i,15)})}T_(e,n,i){const s=jp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YE(),h=QE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");re(Mt,`Creating RPC '${e}' stream ${s}: ${_}`,d);const v=l.createWebChannel(_,d);this.I_(v);let T=!1,b=!1;const F=new XR({Yo:z=>{b?re(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(T||(re(Mt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),T=!0),re(Mt,`RPC '${e}' stream ${s} sending:`,z),v.send(z))},Zo:()=>v.close()}),O=(z,k,x)=>{z.listen(k,N=>{try{x(N)}catch(W){setTimeout(()=>{throw W},0)}})};return O(v,al.EventType.OPEN,()=>{b||(re(Mt,`RPC '${e}' stream ${s} transport opened.`),F.o_())}),O(v,al.EventType.CLOSE,()=>{b||(b=!0,re(Mt,`RPC '${e}' stream ${s} transport closed`),F.a_(),this.E_(v))}),O(v,al.EventType.ERROR,z=>{b||(b=!0,Qo(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,z.name,"Message:",z.message),F.a_(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),O(v,al.EventType.MESSAGE,z=>{var k;if(!b){const x=z.data[0];Fe(!!x,16349);const N=x,W=(N==null?void 0:N.error)||((k=N[0])==null?void 0:k.error);if(W){re(Mt,`RPC '${e}' stream ${s} received error:`,W);const Q=W.status;let J=function(S){const M=ut[S];if(M!==void 0)return bT(M)}(Q),R=W.message;J===void 0&&(J=G.INTERNAL,R="Unknown error status: "+Q+" with message "+W.message),b=!0,F.a_(new ne(J,R)),v.close()}else re(Mt,`RPC '${e}' stream ${s} received:`,x),F.u_(x)}}),O(h,KE.STAT_EVENT,z=>{z.stat===Pp.PROXY?re(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===Pp.NOPROXY&&re(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return new iR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="PersistentStream";class qT{constructor(e,n,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $T(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Hi(n.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ne(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(xv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(xv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e2 extends qT{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oR(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?hi(l.readTime):_e.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Fp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Lp(d)?{documents:uR(o,d)}:{query:cR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=OT(o,l.resumeToken);const p=Mp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(_e.min())>0){h.readTime=Sh(o,l.snapshotVersion.toTimestamp());const p=Mp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=dR(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.q_(n)}}class t2 extends qT{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lR(e.writeResults,e.commitTime),i=hi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>aR(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class i2 extends n2{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Dp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,Dp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hi(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class s2{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Os(this)&&(re(As,"Restarting streams for network reachability change."),await async function(d){const p=ye(d);p.Ea.add(4),await pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await dd(p)}(this))})}),this.Ra=new r2(i,s)}}async function dd(t){if(Os(t))for(const e of t.da)await e(!0)}async function pu(t){for(const e of t.da)await e(!1)}function GT(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gg(n)?mg(n):fa(n).O_()&&pg(n,e))}function fg(t,e){const n=ye(t),i=fa(n);n.Ia.delete(e),i.O_()&&ZT(n,e),n.Ia.size===0&&(i.O_()?i.L_():Os(n)&&n.Ra.set("Unknown"))}function pg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fa(t).Y_(e)}function ZT(t,e){t.Va.Ue(e),fa(t).Z_(e)}function mg(t){t.Va=new Jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.Ra.ua()}function gg(t){return Os(t)&&!fa(t).x_()&&t.Ia.size>0}function Os(t){return ye(t).Ea.size===0}function KT(t){t.Va=void 0}async function o2(t){t.Ra.set("Online")}async function a2(t){t.Ia.forEach((e,n)=>{pg(t,e)})}async function l2(t,e){KT(t),gg(t)?(t.Ra.ha(e),mg(t)):t.Ra.set("Unknown")}async function u2(t,e,n){if(t.Ra.set("Online"),e instanceof NT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){re(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ph(t,i)}else if(e instanceof zc?t.Va.Ze(e):e instanceof LT?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const i=await WT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(bt.EMPTY_BYTE_STRING,_.snapshotVersion)),ZT(o,d);const v=new yr(_.target,d,p,_.sequenceNumber);pg(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re(As,"Failed to raise snapshot:",i),await Ph(t,i)}}async function Ph(t,e,n){if(!ha(e))throw e;t.Ea.add(1),await pu(t),t.Ra.set("Offline"),n||(n=()=>WT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(As,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dd(t)})}function QT(t,e){return e().catch(n=>Ph(t,n,e))}async function fd(t){const e=ye(t),n=zr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;c2(e);)try{const s=await $R(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,h2(e,s)}catch(s){await Ph(e,s)}YT(e)&&XT(e)}function c2(t){return Os(t)&&t.Ta.length<10}function h2(t,e){t.Ta.push(e);const n=zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YT(t){return Os(t)&&!zr(t).x_()&&t.Ta.length>0}function XT(t){zr(t).start()}async function d2(t){zr(t).ra()}async function f2(t){const e=zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function p2(t,e,n){const i=t.Ta.shift(),s=og.from(i,e,n);await QT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fd(t)}async function m2(t,e){e&&zr(t).X_&&await async function(i,s){if(function(l){return Qk(l)&&l!==G.ABORTED}(s.code)){const o=i.Ta.shift();zr(i).B_(),await QT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await fd(i)}}(t,e),YT(t)&&XT(t)}async function Iv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),re(As,"RemoteStore received new credentials");const i=Os(n);n.Ea.add(3),await pu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dd(n)}async function g2(t,e){const n=ye(t);e?(n.Ea.delete(2),await dd(n)):e||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function fa(t){return t.ma||(t.ma=function(n,i,s){const o=ye(n);return o.sa(),new e2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:o2.bind(null,t),t_:a2.bind(null,t),r_:l2.bind(null,t),H_:u2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gg(t)?mg(t):t.Ra.set("Unknown")):(await t.ma.stop(),KT(t))})),t.ma}function zr(t){return t.fa||(t.fa=function(n,i,s){const o=ye(n);return o.sa(),new t2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d2.bind(null,t),r_:m2.bind(null,t),ta:f2.bind(null,t),na:p2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fd(t)):(await t.fa.stop(),t.Ta.length>0&&(re(As,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new _g(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Hi("AsyncQueue",`${e}: ${t}`),ha(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ue.comparator(n.key,i.key):(n,i)=>ue.comparator(n.key,i.key),this.keyedMap=ll(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ga=new Je(ue.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ta{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ta(e,n,Vo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class y2{constructor(){this.queries=Cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ye(n),o=s.queries;s.queries=Cv(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Cv(){return new Ns(t=>vT(t),od)}async function JT(t,e){const n=ye(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new _2,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=yg(l,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&vg(n)}async function ex(t,e){const n=ye(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function v2(t,e){const n=ye(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&vg(n)}function w2(t,e,n){const i=ye(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function vg(t){t.Ca.forEach(e=>{e.next()})}var Bp,Pv;(Pv=Bp||(Bp={})).Ma="default",Pv.Cache="cache";class tx{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.key=e}}class ix{constructor(e){this.key=e}}class E2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=wT(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Sv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const T=s.get(_),b=ad(this.query,v)?v:null,F=!!T&&this.mutatedKeys.has(T.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let z=!1;T&&b?T.data.isEqual(b.data)?F!==O&&(i.track({type:3,doc:b}),z=!0):this.su(T,b)||(i.track({type:2,doc:b}),z=!0,(d&&this.eu(b,d)>0||p&&this.eu(b,p)<0)&&(h=!0)):!T&&b?(i.track({type:0,doc:b}),z=!0):T&&!b&&(i.track({type:1,doc:T}),z=!0,(d||p)&&(h=!0)),z&&(b?(l=l.add(b),o=O?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((_,v)=>function(b,F){const O=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:z})}};return O(b)-O(F)}(_.type,v.type)||this.eu(_.doc,v.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new ta(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new ix(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new nx(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wg="SyncEngine";class T2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class x2{constructor(e){this.key=e,this.hu=!1}}class I2{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ns(h=>vT(h),od),this.Iu=new Map,this.Eu=new Set,this.du=new Je(ue.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(t,e,n=!0){const i=ux(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await rx(i,e,n,!0),s}async function C2(t,e){const n=ux(t);await rx(n,e,!0,!1)}async function rx(t,e,n,i){const s=await qR(t.localStore,ci(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await P2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&GT(t.remoteStore,s),h}async function P2(t,e,n,i,s){t.pu=(v,T,b)=>async function(O,z,k,x){let N=z.view.ru(k);N.Cs&&(N=await vv(O.localStore,z.query,!1).then(({documents:R})=>z.view.ru(R,N)));const W=x&&x.targetChanges.get(z.targetId),Q=x&&x.targetMismatches.get(z.targetId)!=null,J=z.view.applyChanges(N,O.isPrimaryClient,W,Q);return kv(O,z.targetId,J.au),J.snapshot}(t,v,T,b);const o=await vv(t.localStore,e,!0),l=new E2(e,o.Qs),h=l.ru(o.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);kv(t,n,p.au);const _=new T2(e,n,l);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function A2(t,e,n){const i=ye(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!od(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await zp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&fg(i.remoteStore,s.targetId),Up(i,s.targetId)}).catch(ca)):(Up(i,s.targetId),await zp(i.localStore,s.targetId,!0))}async function k2(t,e){const n=ye(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fg(n.remoteStore,i.targetId))}async function R2(t,e,n){const i=V2(t);try{const s=await function(l,h){const d=ye(l),p=qe.now(),_=h.reduce((b,F)=>b.add(F.key),Ce());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let F=Wi(),O=Ce();return d.Ns.getEntries(b,_).next(z=>{F=z,F.forEach((k,x)=>{x.isValidDocument()||(O=O.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,F)).next(z=>{v=z;const k=[];for(const x of h){const N=$k(x,v.get(x.key).overlayedDocument);N!=null&&k.push(new $r(x.key,N,hT(N.value.mapValue),Wn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,p,k,h)}).next(z=>{T=z;const k=z.applyToLocalDocumentSet(v,O);return d.documentOverlayCache.saveOverlays(b,z.batchId,k)})}).then(()=>({batchId:T.batchId,changes:TT(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Je(Se)),p=p.insert(h,d),l.Vu[l.currentUser.toKey()]=p}(i,s.batchId,n),await mu(i,s.changes),await fd(i.remoteStore)}catch(s){const o=yg(s,"Failed to persist write");n.reject(o)}}async function sx(t,e){const n=ye(t);try{const i=await HR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Fe(l.hu,14607):s.removedDocuments.size>0&&(Fe(l.hu,42227),l.hu=!1))}),await mu(n,i,e)}catch(i){await ca(i)}}function Av(t,e,n){const i=ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ye(l);d.onlineState=h;let p=!1;d.queries.forEach((_,v)=>{for(const T of v.Sa)T.va(h)&&(p=!0)}),p&&vg(d)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function b2(t,e,n){const i=ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Je(ue.comparator);l=l.insert(o,Ft.newNoDocument(o,_e.min()));const h=Ce().add(o),d=new cd(_e.min(),new Map,new Je(Se),l,h);await sx(i,d),i.du=i.du.remove(o),i.Au.delete(e),Eg(i)}else await zp(i.localStore,e,!1).then(()=>Up(i,e,n)).catch(ca)}async function L2(t,e){const n=ye(t),i=e.batch.batchId;try{const s=await UR(n.localStore,e);ax(n,i,null),ox(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mu(n,s)}catch(s){await ca(s)}}async function N2(t,e,n){const i=ye(t);try{const s=await function(l,h){const d=ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Fe(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,e);ax(i,e,n),ox(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mu(i,s)}catch(s){await ca(s)}}function ox(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ax(t,e,n){const i=ye(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||lx(t,i)})}function lx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Eg(t))}function kv(t,e,n){for(const i of n)i instanceof nx?(t.Ru.addReference(i.key,e),O2(t,i)):i instanceof ix?(re(wg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||lx(t,i.key)):fe(19791,{wu:i})}function O2(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(wg,"New document in limbo: "+n),t.Eu.add(i),Eg(t))}function Eg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(Ue.fromString(e)),i=t.fu.next();t.Au.set(i,new x2(n)),t.du=t.du.insert(n,i),GT(t.remoteStore,new yr(ci(ig(n.path)),i,"TargetPurposeLimboResolution",id.ce))}}async function mu(t,e,n){const i=ye(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var _;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=hg.As(d.targetId,p);o.push(v)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,p){const _=ye(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Z.forEach(p,T=>Z.forEach(T.Es,b=>_.persistence.referenceDelegate.addReference(v,T.targetId,b)).next(()=>Z.forEach(T.ds,b=>_.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))}catch(v){if(!ha(v))throw v;re(dg,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const b=_.Ms.get(T),F=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(F);_.Ms=_.Ms.insert(T,O)}}}(i.localStore,o))}async function M2(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){re(wg,"User change. New user:",e.toKey());const i=await HT(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne(G.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mu(n,i.Ls)}}function D2(t,e){const n=ye(t),i=n.Au.get(e);if(i&&i.hu)return Ce().add(i.key);{let s=Ce();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function ux(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b2.bind(null,e),e.Pu.H_=v2.bind(null,e.eventManager),e.Pu.yu=w2.bind(null,e.eventManager),e}function V2(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N2.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BR(this.persistence,new FR,e.initialUser,this.serializer)}Cu(e){return new UT(cg.mi,this.serializer)}Du(e){return new ZR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class F2 extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof Ch,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xR(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new UT(i=>Ch.mi(i,n),this.serializer)}}class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y2}()}createDatastore(e){const n=hd(e.databaseInfo.databaseId),i=function(o){return new JR(o)}(e.databaseInfo);return function(o,l,h,d){return new i2(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new s2(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return Tv.v()?new Tv:new KR}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,_){const v=new I2(s,o,l,h,d,p);return _&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ye(s);re(As,"RemoteStore shutting down."),o.Ea.add(5),await pu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hp.provider={build:()=>new Hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class z2{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re(jr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re(jr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=yg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress(),re(jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await HT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j2(t);re(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Iv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Iv(e.remoteStore,s)),t._onlineComponents=e}async function j2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(jr,"Using user provided OfflineComponentProvider");try{await Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Tf(t,new Ah)}}else re(jr,"Using default OfflineComponentProvider"),await Tf(t,new F2(void 0));return t._offlineComponents}async function hx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(jr,"Using user provided OnlineComponentProvider"),await Rv(t,t._uninitializedComponentsProvider._online)):(re(jr,"Using default OnlineComponentProvider"),await Rv(t,new Hp))),t._onlineComponents}function B2(t){return hx(t).then(e=>e.syncEngine)}async function dx(t){const e=await hx(t),n=e.eventManager;return n.onListen=S2.bind(null,e.syncEngine),n.onUnlisten=A2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k2.bind(null,e.syncEngine),n}function U2(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new cx({next:T=>{_.Nu(),l.enqueueAndForget(()=>ex(o,v));const b=T.docs.has(h);!b&&T.fromCache?p.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&d&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new tx(ig(h.path),_,{includeMetadataChanges:!0,qa:!0});return JT(o,v)}(await dx(t),t.asyncQueue,e,n,i)),i.promise}function H2(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,p){const _=new cx({next:T=>{_.Nu(),l.enqueueAndForget(()=>ex(o,v)),T.fromCache&&d.source==="server"?p.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new tx(h,_,{includeMetadataChanges:!0,qa:!0});return JT(o,v)}(await dx(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="firestore.googleapis.com",Lv=!0;class Nv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=px,this.ssl=Lv}else this.host=e.host,this.ssl=e.ssl??Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ER)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fx(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KA;switch(i.type){case"firstParty":return new JA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=bv.get(n);i&&(re("ComponentProvider","Removing Datastore"),bv.delete(n),i.terminate())}(this),Promise.resolve()}}function W2(t,e,n,i={}){var p;t=gi(t,pd);const s=aa(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(FE(`https://${h}`),zE("Firestore",!0)),o.host!==px&&o.host!==h&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!Ss(d,l)&&(t._setSettings(d),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Dt.MOCK_USER;else{_=TP(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Dt(T)}t._authCredentials=new QA(new JE(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(hu(n,ot._jsonSchema))return new ot(e,i||null,new ue(Ue.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:dt("string",ot._jsonSchemaVersion),referencePath:dt("string")};class br extends Ms{constructor(e,n,i){super(e,n,ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ue(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function oi(t,e,...n){if(t=St(t),eT("collection","path",e),t instanceof pd){const i=Ue.fromString(e,...n);return qy(i),new br(t,null,i)}{if(!(t instanceof ot||t instanceof br))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return qy(i),new br(t.firestore,null,i)}}function Sn(t,e,...n){if(t=St(t),arguments.length===1&&(e=Ym.newId()),eT("doc","path",e),t instanceof pd){const i=Ue.fromString(e,...n);return $y(i),new ot(t,null,new ue(i))}{if(!(t instanceof ot||t instanceof br))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return $y(i),new ot(t.firestore,t instanceof br?t.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="AsyncQueue";class Mv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $T(this,"async_queue_retry"),this._c=()=>{const i=Ef();i&&re(Ov,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ha(e))throw e;re(Ov,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Hi("INTERNAL UNHANDLED ERROR: ",Dv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=_g.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&fe(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pa extends pd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mv(e),this._firestoreClient=void 0,await e}}}function $2(t,e){const n=typeof t=="object"?t:HE(),i=typeof t=="string"?t:wh,s=Km(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=wP("firestore");o&&W2(s,...o)}return s}function Tg(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q2(t),t._firestoreClient}function q2(t){var i,s,o;const e=t._freezeSettings(),n=function(h,d,p,_){return new gk(h,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,fx(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new z2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(bt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:dt("string",Cn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(hu(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:dt("string",di._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fi(e.vectorValues);throw new ne(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:dt("string",fi._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^__.*__$/;class Z2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class mx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Ig{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gx(this.Ac)&&G2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hd(e)}Cc(e,n,i,s=!1){return new Ig({Ac:e,methodName:n,Dc:i,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sg(t){const e=t._freezeSettings(),n=hd(t._databaseId);return new K2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q2(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Cg("Data must be an object, but it was:",l,i);const h=_x(i,l);let d,p;if(o.merge)d=new cn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=Wp(e,v,n);if(!l.contains(T))throw new ne(G.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);vx(_,T)||_.push(T)}d=new cn(_),p=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=l.fieldTransforms;return new Z2(new en(h),d,p)}class gd extends xg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}function Y2(t,e,n,i){const s=t.Cc(1,e,n);Cg("Data must be an object, but it was:",s,i);const o=[],l=en.empty();Wr(i,(d,p)=>{const _=Pg(e,d,n);p=St(p);const v=s.yc(_);if(p instanceof gd)o.push(_);else{const T=gu(p,v);T!=null&&(o.push(_),l.set(_,T))}});const h=new cn(o);return new mx(l,h,s.fieldTransforms)}function X2(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Wp(e,i,n)],d=[s];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(Wp(e,o[T])),d.push(o[T+1]);const p=[],_=en.empty();for(let T=h.length-1;T>=0;--T)if(!vx(p,h[T])){const b=h[T];let F=d[T];F=St(F);const O=l.yc(b);if(F instanceof gd)p.push(b);else{const z=gu(F,O);z!=null&&(p.push(b),_.set(b,z))}}const v=new cn(p);return new mx(_,v,l.fieldTransforms)}function J2(t,e,n,i=!1){return gu(n,t.Cc(i?4:3,e))}function gu(t,e){if(yx(t=St(t)))return Cg("Unsupported field value:",e,t),_x(t,e);if(t instanceof xg)return function(i,s){if(!gx(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=gu(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=qe.fromDate(i);return{timestampValue:Sh(s.serializer,o)}}if(i instanceof qe){const o=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sh(s.serializer,o)}}if(i instanceof di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cn)return{bytesValue:OT(s.serializer,i._byteString)};if(i instanceof ot){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof fi)return function(l,h){return{mapValue:{fields:{[uT]:{stringValue:cT},[Eh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return rg(h.serializer,p)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${nd(i)}`)}(t,e)}function _x(t,e){const n={};return iT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(i,s)=>{const o=gu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function yx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof di||t instanceof Cn||t instanceof ot||t instanceof xg||t instanceof fi)}function Cg(t,e,n){if(!yx(n)||!tT(n)){const i=nd(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Wp(t,e,n){if((e=St(e))instanceof md)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw kh("Field path arguments must be of type string or ",t,!1,void 0,n)}const eb=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(eb)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new md(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ne(G.INVALID_ARGUMENT,h+t+d)}function vx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_d("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tb extends wx{data(){return super.data()}}function _d(t,e){return typeof e=="string"?Pg(t,e):e instanceof md?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class Ex extends Ag{}function jc(t,e,...n){let i=[];e instanceof Ag&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof kg).length,h=o.filter(d=>d instanceof yd).length;if(l>1||l>0&&h>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class yd extends Ex{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yd(e,n,i)}_apply(e){const n=this._parse(e);return Tx(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n))}_parse(e){const n=Sg(e.firestore);return function(o,l,h,d,p,_,v){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Fv(v,_);const F=[];for(const O of v)F.push(Vv(d,o,O));T={arrayValue:{values:F}}}else T=Vv(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Fv(v,_),T=J2(h,l,v,_==="in"||_==="not-in");return ht.create(p,_,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bc(t,e,n){const i=e,s=_d("where",t);return yd._create(s,i,n)}class kg extends Ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)Tx(l,d),l=Np(l,d)}(e._query,n),new Ms(e.firestore,e.converter,Np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends Ex{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(o,l)}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new da(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ib(t,e="asc"){const n=e,i=_d("orderBy",t);return Rg._create(i,n)}function Vv(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yT(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!ue.isDocumentKey(i))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ev(t,new ue(i))}if(n instanceof ot)return ev(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(n)}.`)}function Fv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tx(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rb{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Wr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[Eh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>rt(l.doubleValue));return new fi(n)}convertGeoPoint(e){return new di(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Fe(jT(i),9688,{name:e});const s=new Kl(i.get(1),i.get(3)),o=new ue(i.popFirst(5));return s.isEqual(n)||Hi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends wx{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_d("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:dt("string",vs._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class Uc extends vs{data(e={}){return super.data(e)}}class Fo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new cl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Uc(this._firestore,this._userDataWriter,i.key,i,new cl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Uc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Uc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new cl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:ob(h.type),doc:d,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ob(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){t=gi(t,ot);const e=gi(t.firestore,pa);return U2(Tg(e),t._key).then(n=>ab(e,t,n))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:dt("string",Fo._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class xx extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function ai(t){t=gi(t,Ms);const e=gi(t.firestore,pa),n=Tg(e),i=new xx(e);return nb(t._query),H2(n,t._query).then(s=>new Fo(e,i,t,s))}function Lg(t,e,n){t=gi(t,ot);const i=gi(t.firestore,pa),s=sb(t.converter,e);return Ng(i,[Q2(Sg(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wn.none())])}function eu(t,e,n,...i){t=gi(t,ot);const s=gi(t.firestore,pa),o=Sg(s);let l;return l=typeof(e=St(e))=="string"||e instanceof md?X2(o,"updateDoc",t._key,e,n,i):Y2(o,"updateDoc",t._key,e),Ng(s,[l.toMutation(t._key,Wn.exists(!0))])}function xf(t){return Ng(gi(t.firestore,pa),[new sg(t._key,Wn.none())])}function Ng(t,e){return function(i,s){const o=new Vi;return i.asyncQueue.enqueueAndForget(async()=>R2(await B2(i),s,o)),o.promise}(Tg(t),e)}function ab(t,e,n){const i=n.docs.get(e._key),s=new xx(t);return new vs(t,s,e._key,i,new cl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ua=s})(la),Ko(new Cs("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new pa(new YA(i.getProvider("auth-internal")),new ek(l,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(p.options.projectId,_)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),kr(By,Uy,e),kr(By,Uy,"esm2020")})();function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lb=Ix,Sx=new uu("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Gm("@firebase/auth");function ub(t,...e){Rh.logLevel<=Ie.WARN&&Rh.warn(`Auth (${la}): ${t}`,...e)}function Hc(t,...e){Rh.logLevel<=Ie.ERROR&&Rh.error(`Auth (${la}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,...e){throw Og(t,...e)}function pi(t,...e){return Og(t,...e)}function Cx(t,e,n){const i={...lb(),[e]:n};return new uu("auth","Firebase",i).create(e,{appName:t.name})}function Lr(t){return Cx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Sx.create(t,...e)}function de(t,e,...n){if(!t)throw Og(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function $i(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cb(){return zv()==="http:"||zv()==="https:"}function zv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cb()||AP()||"connection"in navigator)?navigator.onLine:!0}function db(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=SP()||kP()}get(){return hb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mb=new _u(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qr(t,e,n,i,s={}){return Ax(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=cu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return PP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&aa(t.emulatorConfig.host)&&(p.credentials="include"),Px.fetch()(await kx(t,t.config.apiHost,n,h),p)})}async function Ax(t,e,n){t._canInitEmulator=!1;const i={...fb,...e};try{const s=new _b(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Tc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Tc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Tc(t,"user-disabled",l);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Cx(t,_,p);Gn(t,_)}}catch(s){if(s instanceof Gi)throw s;Gn(t,"network-request-failed",{message:String(s)})}}async function vd(t,e,n,i,s={}){const o=await qr(t,e,n,i,s);return"mfaPendingCredential"in o&&Gn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kx(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Mg(t.config,s):`${t.config.apiScheme}://${s}`;return pb.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function gb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _b{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),mb.get())})}}function Tc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=pi(t,e,i);return s.customData._tokenResponse=n,s}function jv(t){return t!==void 0&&t.enterprise!==void 0}class yb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vb(t,e){return qr(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function bh(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Eb(t,e=!1){const n=St(t),i=await n.getIdToken(e),s=Dg(i);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Sl(If(s.auth_time)),issuedAtTime:Sl(If(s.iat)),expirationTime:Sl(If(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function Dg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=OE(n);return s?JSON.parse(s):(Hc("Failed to decode base64 JWT payload"),null)}catch(s){return Hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(t){const e=Dg(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Gi&&Tb(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Tb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var v;const e=t.auth,n=await t.getIdToken(),i=await tu(t,bh(e,{idToken:n}));de(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?Rx(s.providerUserInfo):[],l=Sb(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function Ib(t){const e=St(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sb(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Rx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t,e){const n=await Ax(t,{},async()=>{const i=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await kx(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&aa(t.emulatorConfig.host)&&(d.credentials="include"),Px.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pb(t,e){return qr(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Cb(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new zo;return i&&(de(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(de(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(de(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new xb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Eb(this,e)}reload(){return Ib(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await tu(this,wb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:v,emailVerified:T,isAnonymous:b,providerData:F,stsTokenManager:O}=n;de(v&&O,e,"internal-error");const z=zo.fromJSON(this.name,O);de(typeof v=="string",e,"internal-error"),or(i,e.name),or(s,e.name),de(typeof T=="boolean",e,"internal-error"),de(typeof b=="boolean",e,"internal-error"),or(o,e.name),or(l,e.name),or(h,e.name),or(d,e.name),or(p,e.name),or(_,e.name);const k=new Bn({uid:v,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:b,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:_});return F&&Array.isArray(F)&&(k.providerData=F.map(x=>({...x}))),d&&(k._redirectEventId=d),k}static async _fromIdTokenResponse(e,n,i=!1){const s=new zo;s.updateFromServerResponse(n);const o=new Bn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Lh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];de(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Rx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new zo;h.updateFromIdToken(i);const d=new Bn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;function Mi(t){$i(t instanceof Function,"Expected a class definition");let e=Uv.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bx.type="NONE";const Hv=bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Wc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Wc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bh(this.auth,{idToken:e}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new jo(Mi(Hv),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Mi(Hv);const l=Wc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let v;if(typeof _=="string"){const T=await bh(e,{idToken:_}).catch(()=>{});if(!T)break;v=await Bn._fromGetAccountInfoResponse(e,T,_)}else v=Bn._fromJSON(e,_);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new jo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new jo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vx(e))return"Blackberry";if(Fx(e))return"Webos";if(Nx(e))return"Safari";if((e.includes("chrome/")||Ox(e))&&!e.includes("edge/"))return"Chrome";if(Dx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Lx(t=jt()){return/firefox\//i.test(t)}function Nx(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ox(t=jt()){return/crios\//i.test(t)}function Mx(t=jt()){return/iemobile/i.test(t)}function Dx(t=jt()){return/android/i.test(t)}function Vx(t=jt()){return/blackberry/i.test(t)}function Fx(t=jt()){return/webos/i.test(t)}function Vg(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ab(t=jt()){var e;return Vg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kb(){return RP()&&document.documentMode===10}function zx(t=jt()){return Vg(t)||Dx(t)||Fx(t)||Vx(t)||/windows phone/i.test(t)||Mx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e=[]){let n;switch(t){case"Browser":n=Wv(jt());break;case"Worker":n=`${Wv(jt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t,e={}){return qr(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=6;class Nb{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Lb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $v(this),this.idTokenSubscription=new $v(this),this.beforeStateQueue=new Rb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bh(this,{idToken:e}),i=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=db()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Lr(this));const n=e?St(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bb(this),n=new Nb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Pb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ub(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ma(t){return St(t)}class $v{constructor(e){this.auth=e,this.observer=null,this.addObserver=FP(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mb(t){wd=t}function Bx(t){return wd.loadJS(t)}function Db(){return wd.recaptchaEnterpriseScript}function Vb(){return wd.gapiScript}function Fb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zb{constructor(){this.enterprise=new jb}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jb{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Bb="recaptcha-enterprise",Ux="NO_RECAPTCHA";class Ub{constructor(e){this.type=Bb,this.auth=ma(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{vb(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new yb(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;jv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(Ux)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zb().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&jv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Db();d.length!==0&&(d+=h),Bx(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function qv(t,e,n,i=!1,s=!1){const o=new Ub(t);let l;if(s)l=Ux;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Gv(t,e,n,i,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await qv(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await qv(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){const n=Km(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Ss(o,e??{}))return s;Gn(s,"already-initialized")}return n.initialize({options:e})}function Wb(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $b(t,e,n){const i=ma(t);de(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=Hx(e),{host:l,port:h}=qb(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},_=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){de(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),de(Ss(p,i.config.emulator)&&Ss(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,aa(l)?(FE(`${o}//${l}${d}`),zE("Auth",!0)):Gb()}function Hx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qb(t){const e=Hx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Zv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Zv(l)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function Zb(t,e){return qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(t,e){return vd(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function Yb(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Fg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new nu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gv(e,n,"signInWithPassword",Kb);case"emailLink":return Qb(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gv(e,i,"signUpPassword",Zb);case"emailLink":return Yb(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return vd(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="http://localhost";class ks extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new ks(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Bo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:Xb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(t){const e=sl(ol(t)).link,n=e?sl(ol(e)).deep_link_id:null,i=sl(ol(t)).deep_link_id;return(i?sl(ol(i)).link:null)||i||n||e||t}class zg{constructor(e){const n=sl(ol(e)),i=n.apiKey??null,s=n.oobCode??null,o=Jb(n.mode??null);de(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eL(e);try{return new zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=zg.parseLink(n);return de(i,"argument-error"),nu._fromEmailAndCode(e,i.code,i.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Wx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends yu{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return dr.credential(n,i)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends yu{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends yu{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return pr.credential(n,i)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Bn._fromIdTokenResponse(e,i,s),l=Kv(i);return new na({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Kv(i);return new na({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Gi{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Nh(e,n,i,s)}}function $x(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(t,o,e,i):o})}async function tL(t,e,n=!1){const i=await tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return na._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e,n=!1){const{auth:i}=t;if(jn(i.app))return Promise.reject(Lr(i));const s="reauthenticate";try{const o=await tu(t,$x(i,s,e,t),n);de(o.idToken,i,"internal-error");const l=Dg(o.idToken);de(l,i,"internal-error");const{sub:h}=l;return de(t.uid===h,i,"user-mismatch"),na._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Gn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t,e,n=!1){if(jn(t.app))return Promise.reject(Lr(t));const i="signIn",s=await $x(t,i,e),o=await na._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function iL(t,e){return qx(ma(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t){const e=ma(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sL(t,e,n){return jn(t.app)?Promise.reject(Lr(t)):iL(St(t),ga.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rL(t),i})}function oL(t,e,n,i){return St(t).onIdTokenChanged(e,n,i)}function aL(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function lL(t,e,n,i){return St(t).onAuthStateChanged(e,n,i)}function uL(t){return St(t).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=1e3,hL=10;class Zx extends Gx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);kb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hL):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},cL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zx.type="LOCAL";const dL=Zx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends Gx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kx.type="SESSION";const Qx=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await fL(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=jg("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return window}function mL(t){mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){return typeof mi().WorkerGlobalScope<"u"&&typeof mi().importScripts=="function"}async function gL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _L(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yL(){return Yx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebaseLocalStorageDb",vL=1,Mh="firebaseLocalStorage",Jx="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function wL(){const t=indexedDB.deleteDatabase(Xx);return new vu(t).toPromise()}function Gp(){const t=indexedDB.open(Xx,vL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Mh,{keyPath:Jx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Mh)?e(i):(i.close(),await wL(),e(await Gp()))})})}async function Qv(t,e,n){const i=Td(t,!0).put({[Jx]:e,value:n});return new vu(i).toPromise()}async function EL(t,e){const n=Td(t,!1).get(e),i=await new vu(n).toPromise();return i===void 0?null:i.value}function Yv(t,e){const n=Td(t,!0).delete(e);return new vu(n).toPromise()}const TL=800,xL=3;class e1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(yL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await gL(),!this.activeServiceWorker)return;this.sender=new pL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_L()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await Qv(e,Oh,"1"),await Yv(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>EL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Td(s,!1).getAll();return new vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e1.type="LOCAL";const IL=e1;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t,e){return e?Mi(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CL(t){return qx(t.auth,new Bg(t),t.bypassAuthState)}function PL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),nL(n,new Bg(t),t.bypassAuthState)}async function AL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),tL(n,new Bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return PL;default:Gn(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new _u(2e3,1e4);class Ro extends t1{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kL.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="pendingRedirect",$c=new Map;class bL extends t1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const i=await LL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LL(t,e){const n=ML(e),i=OL(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function NL(t,e){$c.set(t._key(),e)}function OL(t){return Mi(t._redirectPersistence)}function ML(t){return Wc(RL,t.config.apiKey,t.name)}async function DL(t,e,n=!1){if(jn(t.app))return Promise.reject(Lr(t));const i=ma(t),s=SL(i,e),l=await new bL(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=10*60*1e3;class FL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!n1(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(pi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(e))}saveEventToCache(e){this.cachedEventUids.add(Xv(e)),this.lastProcessedEventTime=Date.now()}}function Xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e={}){return qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UL=/^https?/;async function HL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jL(t);for(const n of e)try{if(WL(n))return}catch{}Gn(t,"unauthorized-domain")}function WL(t){const e=$p(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!UL.test(n))return!1;if(BL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new _u(3e4,6e4);function Jv(){const t=mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qL(t){return new Promise((e,n)=>{var s,o,l;function i(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(pi(t,"network-request-failed"))},timeout:$L.get()})}if((o=(s=mi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=mi().gapi)!=null&&l.load)i();else{const h=Fb("iframefcb");return mi()[h]=()=>{gapi.load?i():n(pi(t,"network-request-failed"))},Bx(`${Vb()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw qc=null,e})}let qc=null;function GL(t){return qc=qc||qL(t),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new _u(5e3,15e3),KL="__/auth/iframe",QL="emulator/auth/iframe",YL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JL(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,QL):`https://${t.config.authDomain}/${KL}`,i={apiKey:e.apiKey,appName:t.name,v:la},s=XL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${cu(i).slice(1)}`}async function eN(t){const e=await GL(t),n=mi().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:JL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=pi(t,"network-request-failed"),h=mi().setTimeout(()=>{o(l)},ZL.get());function d(){mi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,iN=600,rN="_blank",sN="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oN(t,e,n,i=nN,s=iN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...tN,width:i.toString(),height:s.toString(),top:o,left:l},p=jt().toLowerCase();n&&(h=Ox(p)?rN:n),Lx(p)&&(e=e||sN,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[b,F])=>`${T}${b}=${F},`,"");if(Ab(p)&&h!=="_self")return aN(e||"",h),new e0(null);const v=window.open(e||"",h,_);de(v,t,"popup-blocked");try{v.focus()}catch{}return new e0(v)}function aN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="__/auth/handler",uN="emulator/auth/handler",cN=encodeURIComponent("fac");async function t0(t,e,n,i,s,o){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:la,eventId:s};if(e instanceof Wx){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",VP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))l[_]=v}if(e instanceof yu){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(l.scopes=_.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await t._getAppCheckToken(),p=d?`#${cN}=${encodeURIComponent(d)}`:"";return`${hN(t)}?${cu(h).slice(1)}${p}`}function hN({config:t}){return t.emulator?Mg(t,uN):`https://${t.authDomain}/${lN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class dN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qx,this._completeRedirectFn=DL,this._overrideRedirectResult=NL}async _openPopup(e,n,i,s){var l;$i((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await t0(e,n,i,$p(),s);return oN(e,o,jg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await t0(e,n,i,$p(),s);return mL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):($i(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await eN(e),i=new FL(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sf,{type:Sf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Sf];o!==void 0&&n(!!o),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zx()||Nx()||Vg()}}const fN=dN;var n0="@firebase/auth",i0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gN(t){Ko(new Cs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;de(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jx(t)},p=new Ob(i,s,o,d);return Wb(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ko(new Cs("auth-internal",e=>{const n=ma(e.getProvider("auth").getImmediate());return(i=>new pN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(n0,i0,mN(t)),kr(n0,i0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=5*60,yN=VE("authIdTokenMaxAge")||_N;let r0=null;const vN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>yN)return;const s=n==null?void 0:n.token;r0!==s&&(r0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wN(t=HE()){const e=Km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Hb(t,{popupRedirectResolver:fN,persistence:[IL,dL,Qx]}),i=VE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=vN(o.toString());aL(n,l,()=>l(n.currentUser)),oL(n,h=>l(h))}}const s=ME("auth");return s&&$b(n,`http://${s}`),n}function EN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Mb({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=pi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",EN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gN("Browser");var TN="firebase",xN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(TN,xN,"app");const IN={apiKey:"AIzaSyDAfvZYwn_GmzFB1i1DLc-xCbQuDpzcTvg",authDomain:"russia-oil-tracker.firebaseapp.com",projectId:"russia-oil-tracker",storageBucket:"russia-oil-tracker.firebasestorage.app",messagingSenderId:"86599024625",appId:"1:86599024625:web:c833bd2f796bf999784e50"},i1=UE(IN),Re=$2(i1),Cf=wN(i1),tt={FACILITIES:"facilities",HITS:"hits"},SN=()=>{var V;const[t,e]=q.useState(!1),[n,i]=q.useState(""),[s,o]=q.useState(""),[l,h]=q.useState(null),[d,p]=q.useState("facilities"),[_,v]=q.useState([]),[T,b]=q.useState(!1),[F,O]=q.useState(null),[z,k]=q.useState(null),[x,N]=q.useState({date:new Date().toISOString().split("T")[0],severity:"damaged",mediaLinks:[""],expectedRepairTime:0,notes:""}),W=lu();q.useEffect(()=>{const P=lL(Cf,A=>{A?(e(!0),h(null)):e(!1)});return()=>P()},[]),q.useEffect(()=>{t&&Q()},[t]);const Q=async()=>{b(!0),O(null);try{if(!Re)throw new Error("Firebase not initialized");const P=await ai(oi(Re,tt.FACILITIES)),A=await Promise.all(P.docs.map(async te=>{var ce,ve;const Le=jc(oi(Re,tt.HITS),Bc("facilityId","==",parseInt(te.id))),Ze=(await ai(Le)).docs.map(We=>({id:parseInt(We.id),...We.data()})),$=te.data(),le=((ce=$.location)==null?void 0:ce.latitude)??$.latitude,X=((ve=$.location)==null?void 0:ve.longitude)??$.longitude;return{id:parseInt(te.id),name:$.name,type:$.type,capacity:$.capacity,gasCapacity:$.gasCapacity,latitude:le,longitude:X,status:$.status,hit:$.hit,draft:$.draft??!1,hits:Ze}}));v(A)}catch(P){console.error("Error fetching facilities:",P),O("Failed to load facilities from Firebase.")}finally{b(!1)}},J=async P=>{P.preventDefault(),h(null),b(!0);try{await sL(Cf,n,s)}catch(A){console.error("Login error:",A),A.code==="auth/invalid-credential"?h("Invalid email or password"):A.code==="auth/user-not-found"?h("No account found with this email"):A.code==="auth/wrong-password"?h("Incorrect password"):h("Login failed. Please try again.")}finally{b(!1)}},R=async()=>{try{await uL(Cf),W("/")}catch(P){console.error("Logout error:",P)}},C=async P=>{if(confirm("Are you sure you want to delete this facility?"))try{if(!Re)throw new Error("Firebase not initialized");const A=jc(oi(Re,tt.HITS),Bc("facilityId","==",P)),te=await ai(A);for(const Le of te.docs)await xf(Le.ref);await xf(Sn(Re,tt.FACILITIES,P.toString())),Q()}catch(A){console.error("Error deleting facility:",A),alert("Failed to delete facility")}},S=async(P,A)=>{var te;A.preventDefault();try{if(!Re)throw new Error("Firebase not initialized");const Ze=(await ai(oi(Re,tt.HITS))).docs.reduce((X,ce)=>{const ve=parseInt(ce.id);return ve>X?ve:X},0)+1,$={id:Ze,facilityId:P,date:x.date,severity:x.severity,mediaLinks:(te=x.mediaLinks)==null?void 0:te.filter(X=>X.trim()!==""),expectedRepairTime:x.expectedRepairTime,notes:x.notes};await Lg(Sn(Re,tt.HITS,Ze.toString()),$);const le=Sn(Re,tt.FACILITIES,P.toString());await eu(le,{hit:!0}),k(null),N({date:new Date().toISOString().split("T")[0],severity:"damaged",mediaLinks:[""],expectedRepairTime:0,notes:""}),Q()}catch(Le){console.error("Error adding hit:",Le),alert("Failed to add hit record")}},M=async(P,A)=>{if(confirm("Are you sure you want to delete this hit record?"))try{if(!Re)throw new Error("Firebase not initialized");await xf(Sn(Re,tt.HITS,A.toString()));const te=jc(oi(Re,tt.HITS),Bc("facilityId","==",P));if((await ai(te)).empty){const Me=Sn(Re,tt.FACILITIES,P.toString());await eu(Me,{hit:!1})}Q()}catch(te){console.error("Error deleting hit:",te),alert("Failed to delete hit record")}};return t?w.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#0a0a0a",color:"#fff",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"250px",backgroundColor:"#1a1a1a",borderRight:"1px solid #333",display:"flex",flexDirection:"column",flexShrink:0,overflowY:"auto"},children:[w.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Admin Panel"}),w.jsx("p",{style:{color:"#666",fontSize:"12px",marginTop:"5px"},children:"Russian Oil Tracker"}),w.jsx("button",{onClick:R,style:{width:"100%",marginTop:"15px",padding:"8px 12px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Logout"})]}),w.jsxs("nav",{style:{flex:1,padding:"20px 0"},children:[w.jsxs("button",{onClick:()=>p("facilities"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="facilities"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:""}),w.jsx("span",{children:"Facilities"})]}),w.jsxs("button",{onClick:()=>p("hits"),style:{width:"100%",padding:"15px 20px",backgroundColor:d==="hits"?"#2196F3":"transparent",color:"#fff",border:"none",textAlign:"left",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},children:[w.jsx("span",{style:{fontSize:"20px"},children:""}),w.jsx("span",{children:"Hit Records"})]})]}),w.jsx("div",{style:{padding:"20px",borderTop:"1px solid #333"},children:w.jsx("button",{onClick:()=>W("/"),style:{width:"100%",padding:"10px",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" View Map"})})]}),w.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="facilities"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Facilities Management"}),w.jsxs("p",{style:{color:"#999"},children:["Total: ",_.length," facilities"]})]}),w.jsx("button",{onClick:()=>W("/admin/facility/new"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Add Facility"})]}),T&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading facilities..."}),F&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!T&&!F&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"auto",border:"1px solid #333",maxHeight:"calc(100vh - 250px)"},children:[w.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[w.jsx("thead",{children:w.jsxs("tr",{style:{backgroundColor:"#0a0a0a"},children:[w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"ID"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Name"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Type"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Oil Capacity"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Gas Capacity"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Location"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Status"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Draft"}),w.jsx("th",{style:{padding:"15px",textAlign:"left",borderBottom:"1px solid #333"},children:"Actions"})]})}),w.jsx("tbody",{children:_.map(P=>{var A;return w.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[w.jsx("td",{style:{padding:"15px"},children:P.id}),w.jsx("td",{style:{padding:"15px"},children:P.name}),w.jsx("td",{style:{padding:"15px"},children:P.type}),w.jsx("td",{style:{padding:"15px"},children:((A=P.capacity)==null?void 0:A.toLocaleString())||0}),w.jsx("td",{style:{padding:"15px"},children:P.gasCapacity?P.gasCapacity.toLocaleString():"-"}),w.jsx("td",{style:{padding:"15px",fontSize:"12px",color:"#999"},children:P.latitude!=null&&P.longitude!=null?`${P.latitude.toFixed(4)}, ${P.longitude.toFixed(4)}`:"N/A"}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",backgroundColor:P.hit?"#f44336":"#4CAF50",color:"#fff"},children:P.status})}),w.jsx("td",{style:{padding:"15px"},children:w.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:P.draft?"#ff9800":"#4CAF50",color:"#fff"},children:P.draft?"DRAFT":"Published"})}),w.jsxs("td",{style:{padding:"15px"},children:[w.jsx("button",{onClick:()=>W(`/admin/facility/${P.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"5px",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>C(P.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},P.id)})})]}),_.length===0&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"No facilities found. Add your first facility above."})]})]}),d==="hits"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{marginBottom:"5px"},children:"Hit Records Management"}),w.jsx("p",{style:{color:"#999"},children:"View and manage all hits across facilities"})]}),w.jsx("button",{onClick:()=>W("/admin/hit/new"),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"+ Add New Hit"})]}),z===-1&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid #333"},children:[w.jsx("h3",{style:{marginTop:0,color:"#dc2626"},children:"Add New Hit Record"}),w.jsxs("form",{onSubmit:P=>{P.preventDefault();const A=parseInt(P.target.facilityId.value);S(A,P)},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Select Facility *"}),w.jsxs("select",{name:"facilityId",required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[w.jsx("option",{value:"",children:"-- Choose a facility --"}),_.map(P=>w.jsxs("option",{value:P.id,children:[P.name," (",P.type,") ",P.hits&&P.hits.length>0?`- ${P.hits.length} existing hit${P.hits.length>1?"s":""}`:""]},P.id))]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:x.date,onChange:P=>N({...x,date:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:x.severity,onChange:P=>N({...x,severity:P.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),w.jsx("input",{type:"number",value:x.expectedRepairTime,onChange:P=>N({...x,expectedRepairTime:Number(P.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(V=x.mediaLinks)==null?void 0:V.map((P,A)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:P,onChange:te=>{const Le=[...x.mediaLinks||[]];Le[A]=te.target.value,N({...x,mediaLinks:Le})},placeholder:"https://...",style:{flex:1,padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),A>0&&w.jsx("button",{type:"button",onClick:()=>{var Le;const te=(Le=x.mediaLinks)==null?void 0:Le.filter((Me,Ze)=>Ze!==A);N({...x,mediaLinks:te})},style:{padding:"10px 15px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]},A)),w.jsx("button",{type:"button",onClick:()=>N({...x,mediaLinks:[...x.mediaLinks||[],""]}),style:{padding:"8px 16px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:x.notes,onChange:P=>N({...x,notes:P.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Add Hit Record"})})]})]}),T&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading hit records..."}),F&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"#fff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:F}),!T&&!F&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{display:"grid",gap:"20px"},children:_.filter(P=>P.hits&&P.hits.length>0).map(P=>{var A;return w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #333"},children:[w.jsxs("div",{children:[w.jsx("h2",{style:{margin:0,color:"#dc2626"},children:P.name}),w.jsxs("p",{style:{margin:"5px 0 0 0",color:"#999",fontSize:"14px"},children:[P.type,"  ",P.hits.length," hit record",P.hits.length!==1?"s":""]})]}),w.jsx("button",{onClick:()=>k(z===P.id?null:P.id),style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"600"},children:z===P.id?"Cancel":"+ Add Hit"})]}),z===P.id&&w.jsxs("form",{onSubmit:te=>S(P.id,te),style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",border:"1px solid #dc2626"},children:[w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Date *"}),w.jsx("input",{type:"date",required:!0,value:x.date,onChange:te=>N({...x,date:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Severity *"}),w.jsxs("select",{value:x.severity,onChange:te=>N({...x,severity:te.target.value}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Repair Time (days)"}),w.jsx("input",{type:"number",value:x.expectedRepairTime,onChange:te=>N({...x,expectedRepairTime:Number(te.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"10px"},children:"Media Links (Videos/Photos)"}),(A=x.mediaLinks)==null?void 0:A.map((te,Le)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:te,onChange:Me=>{const Ze=[...x.mediaLinks||[]];Ze[Le]=Me.target.value,N({...x,mediaLinks:Ze})},placeholder:"https://...",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}}),Le>0&&w.jsx("button",{type:"button",onClick:()=>{var Ze;const Me=(Ze=x.mediaLinks)==null?void 0:Ze.filter(($,le)=>le!==Le);N({...x,mediaLinks:Me})},style:{padding:"8px 12px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},Le)),w.jsx("button",{type:"button",onClick:()=>N({...x,mediaLinks:[...x.mediaLinks||[],""]}),style:{padding:"6px 12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"5px"},children:"Notes"}),w.jsx("textarea",{value:x.notes,onChange:te=>N({...x,notes:te.target.value}),rows:3,placeholder:"Describe the damage...",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"4px",color:"#fff",resize:"vertical",fontFamily:"inherit"}})]}),w.jsx("div",{style:{gridColumn:"1 / -1"},children:w.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:" Save Hit Record"})})]}),P.hits&&P.hits.length>0&&w.jsx("div",{style:{display:"grid",gap:"10px"},children:P.hits.map(te=>w.jsx("div",{style:{backgroundColor:"#0a0a0a",padding:"15px",borderRadius:"4px",border:"1px solid #333"},children:w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[w.jsxs("div",{style:{flex:1},children:[w.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"10px",flexWrap:"wrap"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Hit ID"}),w.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["#",te.id]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Date"}),w.jsx("div",{style:{color:"#fff"},children:new Date(te.date).toLocaleDateString()})]}),te.severity&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Severity"}),w.jsx("div",{style:{color:"#fff",backgroundColor:te.severity==="destroyed"?"#f44336":"#FF9800",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",display:"inline-block"},children:te.severity})]}),te.expectedRepairTime&&w.jsxs("div",{children:[w.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Repair Time"}),w.jsxs("div",{style:{color:"#FF9800"},children:[te.expectedRepairTime," days"]})]})]}),te.mediaLinks&&te.mediaLinks.length>0&&w.jsxs("div",{style:{marginTop:"10px"},children:[w.jsx("div",{style:{color:"#666",fontSize:"12px",marginBottom:"5px"},children:"Media:"}),w.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:te.mediaLinks.map((Le,Me)=>w.jsxs("a",{href:Le,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"13px",padding:"4px 8px",backgroundColor:"#1a1a1a",borderRadius:"4px",border:"1px solid #2196F3"},children:[" Link ",Me+1]},Me))})]}),!te.mediaLinks&&te.videoLink&&w.jsx("div",{style:{marginTop:"10px"},children:w.jsx("a",{href:te.videoLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3",textDecoration:"none",fontSize:"14px"},children:" View Video"})}),te.notes&&w.jsxs("div",{style:{marginTop:"10px",color:"#ccc",fontSize:"14px"},children:[w.jsx("strong",{children:"Notes:"})," ",te.notes]})]}),w.jsxs("div",{style:{display:"flex",gap:"5px"},children:[w.jsx("button",{onClick:()=>W(`/admin/hit/${te.id}`),style:{padding:"5px 10px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),w.jsx("button",{onClick:()=>M(P.id,te.id),style:{padding:"5px 10px",backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]})},te.id))})]},P.id)})}),_.filter(P=>P.hits&&P.hits.length>0).length===0&&w.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[w.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),w.jsx("h3",{style:{margin:"0 0 10px 0",color:"#999"},children:"No Hit Records Yet"}),w.jsx("p",{children:'Click the "+ Add New Hit" button above to record a strike.'})]})]})]})]})]}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center"},children:w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"40px",borderRadius:"8px",width:"400px",border:"1px solid #333"},children:[w.jsx("h1",{style:{color:"#fff",marginBottom:"30px",textAlign:"center"},children:"Admin Login"}),l&&w.jsx("div",{style:{backgroundColor:"#dc2626",color:"#fff",padding:"12px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},children:l}),w.jsxs("form",{onSubmit:J,children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Email"}),w.jsx("input",{type:"email",value:n,onChange:P=>i(P.target.value),required:!0,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsxs("div",{style:{marginBottom:"30px"},children:[w.jsx("label",{style:{color:"#999",display:"block",marginBottom:"8px"},children:"Password"}),w.jsx("input",{type:"password",value:s,onChange:P=>o(P.target.value),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff"}})]}),w.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"Login"}),w.jsx("p",{style:{color:"#666",marginTop:"20px",textAlign:"center",fontSize:"12px"},children:"Contact admin to create an account"})]})]})})},CN=()=>{const{id:t}=qm(),e=lu(),[n,i]=q.useState(!1),[s,o]=q.useState(null),[l,h]=q.useState({name:"",type:"refinery",capacity:0,gasCapacity:void 0,latitude:0,longitude:0,status:"operational",hit:!1,description:"",draft:!0});q.useEffect(()=>{t&&t!=="new"&&d()},[t]);const d=async()=>{var _,v;i(!0);try{if(!Re)throw new Error("Firebase not initialized");const T=Sn(Re,tt.FACILITIES,t),b=await bg(T);if(b.exists()){const F=b.data(),O=((_=F.location)==null?void 0:_.latitude)??F.latitude,z=((v=F.location)==null?void 0:v.longitude)??F.longitude;h({id:parseInt(b.id),name:F.name,type:F.type,capacity:F.capacity,gasCapacity:F.gasCapacity,latitude:O,longitude:z,status:F.status,hit:F.hit,description:F.description||"",draft:F.draft??!1})}else o("Facility not found")}catch(T){console.error("Error fetching facility:",T),o("Failed to load facility")}finally{i(!1)}},p=async(_=!1)=>{i(!0),o(null);try{if(!Re)throw new Error("Firebase not initialized");if(!l.name||!l.type||l.capacity===void 0){o("Please fill in all required fields"),i(!1);return}let v=t;(!t||t==="new")&&(v=((await ai(oi(Re,tt.FACILITIES))).docs.reduce((z,k)=>{const x=parseInt(k.id);return x>z?x:z},0)+1).toString());const T={id:parseInt(v),name:l.name,type:l.type,capacity:l.capacity,location:{latitude:l.latitude,longitude:l.longitude},status:l.status,hit:l.hit??!1,draft:_?!1:l.draft??!0};l.gasCapacity&&(T.gasCapacity=l.gasCapacity),l.description&&(T.description=l.description);const b=Sn(Re,tt.FACILITIES,v);t&&t!=="new"?await eu(b,T):await Lg(b,T),alert(_?"Facility published successfully!":"Facility saved as draft!"),e("/admin")}catch(v){console.error("Error saving facility:",v),o("Failed to save facility")}finally{i(!1)}};return n&&t&&t!=="new"?w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}):w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"white",padding:"20px"},children:w.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[w.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsx("h1",{style:{margin:0},children:t&&t!=="new"?"Edit Facility":"Add New Facility"}),w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Back to Dashboard"})]}),s&&w.jsx("div",{style:{backgroundColor:"#f44336",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:s}),l.draft&&w.jsx("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:" This facility is in DRAFT mode and is not visible on the public map"}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Facility Name *"}),w.jsx("input",{type:"text",value:l.name,onChange:_=>h({...l,name:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Enter facility name"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Type *"}),w.jsxs("select",{value:l.type,onChange:_=>h({...l,type:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"refinery",children:"Refinery"}),w.jsx("option",{value:"extraction",children:"Extraction"}),w.jsx("option",{value:"storage",children:"Storage"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Status *"}),w.jsxs("select",{value:l.status,onChange:_=>h({...l,status:_.target.value}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},children:[w.jsx("option",{value:"operational",children:"Operational"}),w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"offline",children:"Offline"})]})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Oil Capacity (barrels/day) *"}),w.jsx("input",{type:"number",value:l.capacity,onChange:_=>h({...l,capacity:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Gas Capacity (million m/year)"}),w.jsx("input",{type:"number",value:l.gasCapacity||"",onChange:_=>h({...l,gasCapacity:_.target.value?Number(_.target.value):void 0}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"Optional"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Latitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.latitude,onChange:_=>h({...l,latitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Longitude *"}),w.jsx("input",{type:"number",step:"0.0001",value:l.longitude,onChange:_=>h({...l,longitude:Number(_.target.value)}),style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px"},placeholder:"0.0000"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999"},children:"Description"}),w.jsx("textarea",{value:l.description,onChange:_=>h({...l,description:_.target.value}),rows:4,style:{width:"100%",padding:"10px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:"Enter facility description (optional)"})]})]}),w.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[w.jsx("button",{onClick:()=>p(!1),disabled:n,style:{padding:"12px 24px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Saving...":"Save as Draft"}),w.jsx("button",{onClick:()=>p(!0),disabled:n,style:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"16px",opacity:n?.6:1},children:n?"Publishing...":"Publish"})]})]})]})})},PN=()=>{var F;const{id:t}=qm(),e=lu(),[n,i]=q.useState(!1),[s,o]=q.useState([]),[l,h]=q.useState({id:0,facilityId:0,date:new Date().toISOString().split("T")[0],severity:"damaged",mediaLinks:[""],expectedRepairTime:0,notes:""});q.useEffect(()=>{d(),t&&t!=="new"&&p(parseInt(t))},[t]);const d=async()=>{try{if(!Re)throw new Error("Firebase not initialized");const z=(await ai(oi(Re,tt.FACILITIES))).docs.map(k=>({id:parseInt(k.id),name:k.data().name,type:k.data().type}));o(z)}catch(O){console.error("Error fetching facilities:",O),alert("Failed to load facilities")}},p=async O=>{i(!0);try{if(!Re)throw new Error("Firebase not initialized");const z=Sn(Re,tt.HITS,O.toString()),k=await bg(z);if(k.exists()){const x=k.data();h({id:O,facilityId:x.facilityId,date:x.date,severity:x.severity||"damaged",mediaLinks:x.mediaLinks||(x.videoLink?[x.videoLink]:[""]),expectedRepairTime:x.expectedRepairTime,notes:x.notes})}else alert("Hit record not found"),e("/admin")}catch(z){console.error("Error fetching hit:",z),alert("Failed to load hit record")}finally{i(!1)}},_=async()=>{var O;if(!l.facilityId){alert("Please select a facility");return}if(!l.date){alert("Please enter a date");return}i(!0);try{if(!Re)throw new Error("Firebase not initialized");const z={facilityId:l.facilityId,date:l.date,severity:l.severity,mediaLinks:(O=l.mediaLinks)==null?void 0:O.filter(k=>k.trim()!==""),expectedRepairTime:l.expectedRepairTime,notes:l.notes};if(t==="new"){const N=(await ai(oi(Re,tt.HITS))).docs.reduce((Q,J)=>{const R=parseInt(J.id);return R>Q?R:Q},0)+1;await Lg(Sn(Re,tt.HITS,N.toString()),{...z,id:N});const W=Sn(Re,tt.FACILITIES,l.facilityId.toString());await eu(W,{hit:!0}),alert("Hit record created successfully!")}else{const k=Sn(Re,tt.HITS,t);await eu(k,z),alert("Hit record updated successfully!")}e("/admin")}catch(z){console.error("Error saving hit:",z),alert("Failed to save hit record")}finally{i(!1)}},v=()=>{h({...l,mediaLinks:[...l.mediaLinks||[],""]})},T=O=>{var z;h({...l,mediaLinks:(z=l.mediaLinks)==null?void 0:z.filter((k,x)=>x!==O)})},b=(O,z)=>{const k=[...l.mediaLinks||[]];k[O]=z,h({...l,mediaLinks:k})};return w.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",padding:"20px"},children:w.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[w.jsxs("div",{children:[w.jsx("h1",{style:{margin:0,marginBottom:"5px"},children:t==="new"?" Add New Hit Record":" Edit Hit Record"}),w.jsx("p",{style:{margin:0,color:"#999"},children:t==="new"?"Record a new strike on a facility":`Editing Hit #${t}`})]}),w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" Back to Admin"})]}),n&&w.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"Loading..."}),!n&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",padding:"30px",borderRadius:"8px",border:"1px solid #333"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Facility *"}),w.jsxs("select",{value:l.facilityId,onChange:O=>h({...l,facilityId:parseInt(O.target.value)}),disabled:t!=="new",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:t!=="new"?"not-allowed":"pointer"},children:[w.jsx("option",{value:0,children:"-- Select a facility --"}),s.map(O=>w.jsxs("option",{value:O.id,children:[O.name," (",O.type,")"]},O.id))]}),t!=="new"&&w.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"12px"},children:"Facility cannot be changed after creation"})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Date *"}),w.jsx("input",{type:"date",value:l.date,onChange:O=>h({...l,date:O.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),w.jsxs("div",{children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Severity *"}),w.jsxs("select",{value:l.severity,onChange:O=>h({...l,severity:O.target.value}),style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"},children:[w.jsx("option",{value:"damaged",children:"Damaged"}),w.jsx("option",{value:"destroyed",children:"Destroyed"})]})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Expected Repair Time (days)"}),w.jsx("input",{type:"number",value:l.expectedRepairTime||"",onChange:O=>h({...l,expectedRepairTime:O.target.value?Number(O.target.value):void 0}),placeholder:"e.g., 30",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Media Links (Videos/Photos)"}),(F=l.mediaLinks)==null?void 0:F.map((O,z)=>w.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[w.jsx("input",{type:"url",value:O,onChange:k=>b(z,k.target.value),placeholder:"https://...",style:{flex:1,padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px"}}),z>0&&w.jsx("button",{type:"button",onClick:()=>T(z),style:{padding:"12px 20px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Remove"})]},z)),w.jsx("button",{type:"button",onClick:v,style:{padding:"10px 20px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"+ Add Another Link"})]}),w.jsxs("div",{style:{gridColumn:"1 / -1"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#999",fontSize:"14px",fontWeight:"600"},children:"Notes"}),w.jsx("textarea",{value:l.notes,onChange:O=>h({...l,notes:O.target.value}),rows:5,placeholder:"Describe the damage, impact, and any other relevant details...",style:{width:"100%",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"4px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]})]}),w.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #333",display:"flex",gap:"15px",justifyContent:"flex-end"},children:[w.jsx("button",{onClick:()=>e("/admin"),style:{padding:"12px 24px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),w.jsx("button",{onClick:_,disabled:n,style:{padding:"12px 24px",backgroundColor:n?"#666":"#dc2626",color:"#fff",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:n?"Saving...":t==="new"?" Create Hit Record":" Save Changes"})]})]})]})})};function r1(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const AN=1;function kN(t){return Object.freeze({__version:AN,map:t})}function s1(t,e){return Object.freeze({...t,...e})}const o1=q.createContext(null),a1=o1.Provider;function Ug(){const t=q.useContext(o1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function l1(t){function e(n,i){const{instance:s,context:o}=t(n).current;return q.useImperativeHandle(i,()=>s),n.children==null?null:Cl.createElement(a1,{value:o},n.children)}return q.forwardRef(e)}function RN(t){function e(n,i){const[s,o]=q.useState(!1),{instance:l}=t(n,o).current;q.useImperativeHandle(i,()=>l),q.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?vE.createPortal(n.children,h):null}return q.forwardRef(e)}function bN(t){function e(n,i){const{instance:s}=t(n).current;return q.useImperativeHandle(i,()=>s),null}return q.forwardRef(e)}function Hg(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function xd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function LN(t,e){return function(i,s){const o=Ug(),l=t(xd(i,o),o);return r1(o.map,i.attribution),Hg(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Zp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(W1,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,E,D;return D=function(){f=!1,g&&(E.apply(c,g),g=!1)},E=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(D,a),f=!0)},E}function _(r,a,c){var f=a[1],g=a[0],E=f-g;return r===f&&c?r:((r-g)%E+E)%E+g}function v(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function b(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return b(r).split(/\s+/)}function O(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function z(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function x(r,a){return r.replace(k,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var R=0;function C(r){var a=+new Date,c=Math.max(0,16-(a-R));return R=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||J("RequestAnimationFrame")||C,M=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function V(r,a,c){if(c&&S===C)r.call(a);else return S.call(window,l(r,a))}function P(r){r&&M.call(window,r)}var A={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:_,falseFn:v,formatNum:T,trim:b,splitWords:F,setOptions:O,getParamString:z,template:x,isArray:N,indexOf:W,emptyImageUrl:Q,requestFn:S,cancelFn:M,requestAnimFrame:V,cancelAnimFrame:P};function te(){}te.extend=function(r){var a=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Le(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,D=f._initHooks.length;E<D;E++)f._initHooks[E].call(this)}},a},te.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},te.mergeOptions=function(r){return s(this.prototype.options,r),this},te.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Le(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Me={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=F(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=F(r);for(var g=arguments.length===1,E=0,D=r.length;E<D;E++)g?this._off(r[E]):this._off(r[E],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,E;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,E=f.length;g<E;g++)f[g].fn=v;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var D=this._listens(r,a,c);if(D!==!1){var B=f[D];this._firingCount&&(B.fn=v,this._events[r]=f=f.slice()),f.splice(D,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,D=g.length;E<D;E++){var B=g[E],H=B.fn;B.once&&this.off(r,H,B.ctx),H.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var E=this._events&&this._events[r];if(E&&E.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var D in this._eventParents)if(this._eventParents[D].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,E=f.length;g<E;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=F(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Me.addEventListener=Me.on,Me.removeEventListener=Me.clearAllEventListeners=Me.off,Me.addOneTimeEventListener=Me.once,Me.fireEvent=Me.fire,Me.hasEventListeners=Me.listens;var Ze=te.extend(Me);function $(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new $(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new $(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function X(r,a,c){return r instanceof $?r:N(r)?new $(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new $(r.x,r.y):new $(r,a,c)}function ce(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ce.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof $||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof $?r=X(r):r=ve(r),r instanceof ce?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>=a.x&&f.x<=c.x,D=g.y>=a.y&&f.y<=c.y;return E&&D},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>a.x&&f.x<c.x,D=g.y>a.y&&f.y<c.y;return E&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ve(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof ce?r:new ce(r,a)}function We(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}We.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof xe)f=r,g=r;else if(r instanceof We){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(pe(r)||ke(r)):this;return!a&&!c?(this._southWest=new xe(f.lat,f.lng),this._northEast=new xe(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new We(new xe(a.lat-f,a.lng-g),new xe(c.lat+f,c.lng+g))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof xe||"lat"in r?r=pe(r):r=ke(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof We?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=ke(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>=a.lat&&f.lat<=c.lat,D=g.lng>=a.lng&&f.lng<=c.lng;return E&&D},overlaps:function(r){r=ke(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>a.lat&&f.lat<c.lat,D=g.lng>a.lng&&f.lng<c.lng;return E&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=ke(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(r,a){return r instanceof We?r:new We(r,a)}function xe(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}xe.prototype={equals:function(r,a){if(!r)return!1;r=pe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return mn.distance(this,pe(r))},wrap:function(){return mn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return ke([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function pe(r,a,c){return r instanceof xe?r:N(r)&&typeof r[0]!="object"?r.length===3?new xe(r[0],r[1],r[2]):r.length===2?new xe(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new xe(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new xe(r,a,c)}var _t={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ce(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?_(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?_(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new xe(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var E=r.getSouthWest(),D=r.getNorthEast(),B=new xe(E.lat-f,E.lng-g),H=new xe(D.lat-f,D.lng-g);return new We(B,H)}},mn=s({},_t,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,E=Math.sin((a.lat-r.lat)*c/2),D=Math.sin((a.lng-r.lng)*c/2),B=E*E+Math.cos(f)*Math.cos(g)*D*D,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),ya=6378137,va={R:ya,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new $(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new xe((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=ya*Math.PI;return new ce([-r,-r],[r,r])}()};function wa(r,a,c,f){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}wa.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new $((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Zi(r,a,c,f){return new wa(r,a,c,f)}var Gr=s({},mn,{code:"EPSG:3857",projection:va,transformation:function(){var r=.5/(Math.PI*va.R);return Zi(r,.5,-r,.5)}()}),wu=s({},Gr,{code:"EPSG:900913"});function Eu(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Vs(r,a){var c="",f,g,E,D,B,H;for(f=0,E=r.length;f<E;f++){for(B=r[f],g=0,D=B.length;g<D;g++)H=B[g],c+=(g?"L":"M")+H.x+" "+H.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var Zr=document.documentElement.style,Kr="ActiveXObject"in window,yt=Kr&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Ki=Zt("webkit"),Tu=Zt("android"),Ea=Zt("android 2")||Zt("android 3"),Cd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qr=Tu&&Zt("Google")&&Cd<537&&!("AudioNode"in window),Fs=!!window.opera,Ta=!vt&&Zt("chrome"),zs=Zt("gecko")&&!Ki&&!Fs&&!Kr,Pd=!Ta&&Zt("safari"),xu=Zt("phantom"),xa="OTransition"in Zr,Iu=navigator.platform.indexOf("Win")===0,Qi=Kr&&"transition"in Zr,Yr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ea,js="MozPerspective"in Zr,yi=!window.L_DISABLE_3D&&(Qi||Yr||js)&&!xa&&!xu,Yi=typeof orientation<"u"||Zt("mobile"),Bs=Yi&&Ki,Su=Yi&&Yr,Xi=!window.PointerEvent&&window.MSPointerEvent,Ia=!!(window.PointerEvent||Xi),wt="ontouchstart"in window||!!window.TouchEvent,Cu=!window.L_NO_TOUCH&&(wt||Ia),Xr=Yi&&Fs,Jr=Yi&&zs,Ad=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,kd=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return r}(),Ji=function(){return!!document.createElement("canvas").getContext}(),Sa=!!(document.createElementNS&&Eu("svg").createSVGRect),Rd=!!Sa&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Us=!Sa&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Pu=navigator.platform.indexOf("Mac")===0,Au=navigator.platform.indexOf("Linux")===0;function Zt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ae={ie:Kr,ielt9:yt,edge:vt,webkit:Ki,android:Tu,android23:Ea,androidStock:Qr,opera:Fs,chrome:Ta,gecko:zs,safari:Pd,phantom:xu,opera12:xa,win:Iu,ie3d:Qi,webkit3d:Yr,gecko3d:js,any3d:yi,mobile:Yi,mobileWebkit:Bs,mobileWebkit3d:Su,msPointer:Xi,pointer:Ia,touch:Cu,touchNative:wt,mobileOpera:Xr,mobileGecko:Jr,retina:Ad,passiveEvents:kd,canvas:Ji,svg:Sa,vml:Us,inlineSvg:Rd,mac:Pu,linux:Au},ku=ae.msPointer?"MSPointerDown":"pointerdown",bn=ae.msPointer?"MSPointerMove":"pointermove",Ca=ae.msPointer?"MSPointerUp":"pointerup",Pa=ae.msPointer?"MSPointerCancel":"pointercancel",es={touchstart:ku,touchmove:bn,touchend:Ca,touchcancel:Pa},Hs={touchstart:Aa,touchmove:gn,touchend:gn,touchcancel:gn},vi={},Ru=!1;function bu(r,a,c){return a==="touchstart"&&ts(),Hs[a]?(c=Hs[a].bind(this,c),r.addEventListener(es[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function bd(r,a,c){if(!es[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(es[a],c,!1)}function Ws(r){vi[r.pointerId]=r}function Lu(r){vi[r.pointerId]&&(vi[r.pointerId]=r)}function $s(r){delete vi[r.pointerId]}function ts(){Ru||(document.addEventListener(ku,Ws,!0),document.addEventListener(bn,Lu,!0),document.addEventListener(Ca,$s,!0),document.addEventListener(Pa,$s,!0),Ru=!0)}function gn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in vi)a.touches.push(vi[c]);a.changedTouches=[a],r(a)}}function Aa(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&at(a),gn(r,a)}function Ld(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Nu=200;function Ou(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var D=Na(E);if(!(D.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!D.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Nu?(f++,f===2&&a(Ld(E))):f=1,c=B}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Mu(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var ns=qs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=qs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ka=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function Ra(r){return typeof r=="string"?document.getElementById(r):r}function er(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ne(r){var a=r.parentNode;a&&a.removeChild(r)}function Bt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function _n(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function yn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function is(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=Zn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function se(r,a){if(r.classList!==void 0)for(var c=F(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!is(r,a)){var E=Zn(r);Ei(r,(E?E+" ":"")+a)}}function Be(r,a){r.classList!==void 0?r.classList.remove(a):Ei(r,b((" "+Zn(r)+" ").replace(" "+a+" "," ")))}function Ei(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function Zn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Kt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Du(r,a)}function Du(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function qs(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Ti(r,a,c){var f=a||new $(0,0);r.style[ns]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function et(r,a){r._leaflet_pos=a,ae.any3d?Ti(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function xi(r){return r._leaflet_pos||new $(0,0)}var Ln,on,Gs;if("onselectstart"in document)Ln=function(){me(window,"selectstart",at)},on=function(){ze(window,"selectstart",at)};else{var tr=qs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ln=function(){if(tr){var r=document.documentElement.style;Gs=r[tr],r[tr]="none"}},on=function(){tr&&(document.documentElement.style[tr]=Gs,Gs=void 0)}}function Zs(){me(window,"dragstart",at)}function Ks(){ze(window,"dragstart",at)}var rs,Kn;function ba(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Qs(),rs=r,Kn=r.style.outlineStyle,r.style.outlineStyle="none",me(window,"keydown",Qs))}function Qs(){rs&&(rs.style.outlineStyle=Kn,rs=void 0,Kn=void 0,ze(window,"keydown",Qs))}function Vu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function vn(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Nd={__proto__:null,TRANSFORM:ns,TRANSITION:wi,TRANSITION_END:ka,get:Ra,getStyle:er,create:Pe,remove:Ne,empty:Bt,toFront:_n,toBack:yn,hasClass:is,addClass:se,removeClass:Be,setClass:Ei,getClass:Zn,setOpacity:Kt,testProp:qs,setTransform:Ti,setPosition:et,getPosition:xi,get disableTextSelection(){return Ln},get enableTextSelection(){return on},disableImageDrag:Zs,enableImageDrag:Ks,preventOutline:ba,restoreOutline:Qs,getSizedParentNode:Vu,getScale:vn};function me(r,a,c,f){if(a&&typeof a=="object")for(var g in a)Ys(r,g,a[g],c);else{a=F(a);for(var E=0,D=a.length;E<D;E++)Ys(r,a[E],c,f)}return this}var Ut="_leaflet_events";function ze(r,a,c,f){if(arguments.length===1)nr(r),delete r[Ut];else if(a&&typeof a=="object")for(var g in a)ss(r,g,a[g],c);else if(a=F(a),arguments.length===2)nr(r,function(B){return W(a,B)!==-1});else for(var E=0,D=a.length;E<D;E++)ss(r,a[E],c,f);return this}function nr(r,a){for(var c in r[Ut]){var f=c.split(/\d/)[0];(!a||a(f))&&ss(r,f,null,null,c)}}var Ii={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ys(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[Ut]&&r[Ut][g])return this;var E=function(B){return c.call(f||r,B||window.event)},D=E;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?E=bu(r,a,E):ae.touch&&a==="dblclick"?E=Ou(r,E):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Ii[a]||a,E,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(B){B=B||window.event,Ma(r,B)&&D(B)},r.addEventListener(Ii[a],E,!1)):r.addEventListener(a,D,!1):r.attachEvent("on"+a,E),r[Ut]=r[Ut]||{},r[Ut][g]=E}function ss(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var E=r[Ut]&&r[Ut][g];if(!E)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?bd(r,a,E):ae.touch&&a==="dblclick"?Mu(r,E):"removeEventListener"in r?r.removeEventListener(Ii[a]||a,E,!1):r.detachEvent("on"+a,E),r[Ut][g]=null}function De(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function La(r){return Ys(r,"wheel",De),this}function os(r){return me(r,"mousedown touchstart dblclick contextmenu",De),r._leaflet_disable_click=!0,this}function at(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Qn(r){return at(r),De(r),this}function Na(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function as(r,a){if(!a)return new $(r.clientX,r.clientY);var c=vn(a),f=c.boundingClientRect;return new $((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Yn=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oa(r){return ae.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Yn:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ma(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ls={__proto__:null,on:me,off:ze,stopPropagation:De,disableScrollPropagation:La,disableClickPropagation:os,preventDefault:at,stop:Qn,getPropagationPath:Na,getMousePosition:as,getWheelDelta:Oa,isExternalTarget:Ma,addListener:me,removeListener:ze},Da=Ze.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=xi(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),et(this._el,c),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),we=Ze.extend({options:{crs:Gr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=O(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,ka,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(pe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),E=r instanceof $?r:this.latLngToContainerPoint(r),D=E.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(D));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():ke(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var E=f.subtract(c).divideBy(2),D=this.project(r.getSouthWest(),g),B=this.project(r.getNorthEast(),g),H=this.unproject(D.add(B).divideBy(2).add(E),g);return{center:H,zoom:g}},fitBounds:function(r,a){if(r=ke(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),E=this.getSize(),D=this._zoom;r=pe(r),a=a===void 0?D:a;var B=Math.max(E.x,E.y),H=B*this.getZoomScale(D,a),K=g.distanceTo(f)||1,ie=1.42,he=ie*ie;function Ee(lt){var Ju=lt?-1:1,z1=lt?H:B,j1=H*H-B*B+Ju*he*he*K*K,B1=2*z1*he*K,Fd=j1/B1,h_=Math.sqrt(Fd*Fd+1)-Fd,U1=h_<1e-9?-18:Math.log(h_);return U1}function Ht(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function Et(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Tn(lt){return Ht(lt)/Et(lt)}var Yt=Ee(0);function co(lt){return B*(Et(Yt)/Et(Yt+ie*lt))}function M1(lt){return B*(Et(Yt)*Tn(Yt+ie*lt)-Ht(Yt))/he}function D1(lt){return 1-Math.pow(1-lt,1.5)}var V1=Date.now(),u_=(Ee(1)-Yt)/ie,F1=c.duration?1e3*c.duration:1e3*u_*.8;function c_(){var lt=(Date.now()-V1)/F1,Ju=D1(lt)*u_;lt<=1?(this._flyToFrame=V(c_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(M1(Ju)/K)),D),this.getScaleZoom(B/co(Ju),D),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),c_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=ke(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,ke(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(r),D=this.getPixelBounds(),B=ve([D.min.add(c),D.max.subtract(f)]),H=B.getSize();if(!B.contains(E)){this._enforcingBounds=!0;var K=E.subtract(B.getCenter()),ie=B.extend(E).getSize().subtract(H);g.x+=K.x<0?-ie.x:ie.x,g.y+=K.y<0?-ie.y:ie.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),E=f.subtract(g);return!E.x&&!E.y?this:(r.animate&&r.pan?this.panBy(E):(r.pan&&this._rawPanBy(E),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new xe(a,c),g=f.toBounds(r.coords.accuracy*2),E=this._locateOptions;if(E.setView){var D=this.getBoundsZoom(g);this.setView(f,E.maxZoom?Math.min(D,E.maxZoom):D)}var B={latlng:f,bounds:g,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(B[H]=r.coords[H]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ne(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new We(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=ke(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),D=r.getNorthWest(),B=r.getSouthEast(),H=this.getSize().subtract(c),K=ve(this.project(B,f),this.project(D,f)).getSize(),ie=ae.any3d?this.options.zoomSnap:1,he=H.x/K.x,Ee=H.y/K.y,Ht=a?Math.max(he,Ee):Math.min(he,Ee);return f=this.getScaleZoom(Ht,f),ie&&(f=Math.round(f/(ie/100))*(ie/100),f=a?Math.ceil(f/ie)*ie:Math.floor(f/ie)*ie),Math.max(g,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ce(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(pe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(pe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ke(r))},distance:function(r,a){return this.options.crs.distance(pe(r),pe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(r)))},mouseEventToContainerPoint:function(r){return as(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Ra(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(r,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=er(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(r.markerPane,"leaflet-zoom-hide"),se(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){et(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){et(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?ze:me;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",E=r.target||r.srcElement,D=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){D=!0;break}if(f&&f.listens(a,!0)&&(g&&!Ma(E,r)||(c.push(f),g))||E===this._container)break;E=E.parentNode}return!c.length&&!D&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ba(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var E=[],D=0;D<c.length;D++)c[D].listens(a,!0)&&E.push(c[D]);g=E.concat(g)}if(g.length){a==="contextmenu"&&at(r);var B=g[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=K?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(D=0;D<g.length;D++)if(g[D].fire(a,H,!0),H.originalEvent._stopped||g[D].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return xi(this._mapPane)||new $(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),E=new ce(f.subtract(g),f.add(g)),D=this._getBoundsOffset(E,c,a);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?r:this.unproject(f.add(D),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ce(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),E=f.max.subtract(r.max),D=this._rebound(g.x,-E.x),B=this._rebound(g.y,-E.y);return new $(D,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=ns,f=this._proxy.style[c];Ti(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Ti(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xs(r,a){return new we(r,a)}var Qt=te.extend({options:{position:"topright"},initialize:function(r){O(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return se(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Xn=function(r){return new Qt(r)};we.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(g,E){var D=a+g+" "+a+E;r[g+E]=Pe("div",D,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ne(this._controlCorners[r]);Ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){O(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Qt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),os(a),La(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),me(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Pe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),me(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){at(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bt(this._baseLayersList),Bt(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),me(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(g);var D=r.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var E=r.length-1;E>=0;E--)a=r[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,me(r,"click",at),this.expand();var a=this;setTimeout(function(){ze(r,"click",at),a._preventClick=!1})}}),zu=function(r,a,c){return new Fu(r,a,c)},Si=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var E=Pe("a",c,f);return E.innerHTML=r,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),os(E),me(E,"click",Qn),me(E,"click",g,this),me(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Be(this._zoomInButton,a),Be(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(se(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(se(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Si,this.addControl(this.zoomControl))});var ju=function(r){return new Si(r)},Va=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Fa=function(r){return new Va(r)},za='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Js=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?za+" ":"")+"Leaflet</a>"},initialize:function(r){O(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),os(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new Js().addTo(this)});var eo=function(r){return new Js(r)};Qt.Layers=Fu,Qt.Zoom=Si,Qt.Scale=Va,Qt.Attribution=Js,Xn.layers=zu,Xn.zoom=ju,Xn.scale=Fa,Xn.attribution=eo;var an=te.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(r,a){return r.addHandler(a,this),this};var Bu={Events:Me},Jn=ae.touch?"touchstart mousedown":"mousedown",Nn=Ze.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){O(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(me(this._dragStartTarget,Jn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nn._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,Jn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!is(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Nn._dragging===this&&this.finishDrag();return}if(!(Nn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Nn._dragging=this,this._preventOutline&&ba(this._element),Zs(),Ln(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Vu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=xi(this._element),this._parentScale=vn(c);var f=r.type==="mousedown";me(document,f?"mousemove":"touchmove",this._onMove,this),me(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,at(r),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),et(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Ks(),on();var a=this._moved&&this._moving;this._moving=!1,Nn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ja(r,a,c){var f,g=[1,4,2,8],E,D,B,H,K,ie,he,Ee;for(E=0,ie=r.length;E<ie;E++)r[E]._code=U(r[E],a);for(B=0;B<4;B++){for(he=g[B],f=[],E=0,ie=r.length,D=ie-1;E<ie;D=E++)H=r[E],K=r[D],H._code&he?K._code&he||(Ee=j(K,H,he,a,c),Ee._code=U(Ee,a),f.push(Ee)):(K._code&he&&(Ee=j(K,H,he,a,c),Ee._code=U(Ee,a),f.push(Ee)),f.push(H));r=f}return r}function Ba(r,a){var c,f,g,E,D,B,H,K,ie;if(!r||r.length===0)throw new Error("latlngs not passed");Oe(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var he=pe([0,0]),Ee=ke(r),Ht=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Ht<1700&&(he=to(r));var Et=r.length,Tn=[];for(c=0;c<Et;c++){var Yt=pe(r[c]);Tn.push(a.project(pe([Yt.lat-he.lat,Yt.lng-he.lng])))}for(B=H=K=0,c=0,f=Et-1;c<Et;f=c++)g=Tn[c],E=Tn[f],D=g.y*E.x-E.y*g.x,H+=(g.x+E.x)*D,K+=(g.y+E.y)*D,B+=D*3;B===0?ie=Tn[0]:ie=[H/B,K/B];var co=a.unproject(X(ie));return pe([co.lat+he.lat,co.lng+he.lng])}function to(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var E=pe(r[g]);a+=E.lat,c+=E.lng,f++}return pe([a/f,c/f])}var no={__proto__:null,clipPolygon:ja,polygonCenter:Ba,centroid:to};function Lt(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=m(r,c),r=ir(r,c),r}function Ua(r,a,c){return Math.sqrt(ge(r,a,c,!0))}function Uu(r,a,c){return ge(r,a,c)}function ir(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var E,D=[];for(E=0;E<c;E++)g[E]&&D.push(r[E]);return D}function u(r,a,c,f,g){var E=0,D,B,H;for(B=f+1;B<=g-1;B++)H=ge(r[B],r[f],r[g],!0),H>E&&(D=B,E=H);E>c&&(a[D]=1,u(r,a,c,f,D),u(r,a,c,D,g))}function m(r,a){for(var c=[r[0]],f=1,g=0,E=r.length;f<E;f++)ee(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<E-1&&c.push(r[E-1]),c}var y;function I(r,a,c,f,g){var E=f?y:U(r,c),D=U(a,c),B,H,K;for(y=D;;){if(!(E|D))return[r,a];if(E&D)return!1;B=E||D,H=j(r,a,B,c,g),K=U(H,c),B===E?(r=H,E=K):(a=H,D=K)}}function j(r,a,c,f,g){var E=a.x-r.x,D=a.y-r.y,B=f.min,H=f.max,K,ie;return c&8?(K=r.x+E*(H.y-r.y)/D,ie=H.y):c&4?(K=r.x+E*(B.y-r.y)/D,ie=B.y):c&2?(K=H.x,ie=r.y+D*(H.x-r.x)/E):c&1&&(K=B.x,ie=r.y+D*(B.x-r.x)/E),new $(K,ie,g)}function U(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function ee(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function ge(r,a,c,f){var g=a.x,E=a.y,D=c.x-g,B=c.y-E,H=D*D+B*B,K;return H>0&&(K=((r.x-g)*D+(r.y-E)*B)/H,K>1?(g=c.x,E=c.y):K>0&&(g+=D*K,E+=B*K)),D=r.x-g,B=r.y-E,f?D*D+B*B:new $(g,E)}function Oe(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Ve(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oe(r)}function it(r,a){var c,f,g,E,D,B,H,K;if(!r||r.length===0)throw new Error("latlngs not passed");Oe(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ie=pe([0,0]),he=ke(r),Ee=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());Ee<1700&&(ie=to(r));var Ht=r.length,Et=[];for(c=0;c<Ht;c++){var Tn=pe(r[c]);Et.push(a.project(pe([Tn.lat-ie.lat,Tn.lng-ie.lng])))}for(c=0,f=0;c<Ht-1;c++)f+=Et[c].distanceTo(Et[c+1])/2;if(f===0)K=Et[0];else for(c=0,E=0;c<Ht-1;c++)if(D=Et[c],B=Et[c+1],g=D.distanceTo(B),E+=g,E>f){H=(E-f)/g,K=[B.x-H*(B.x-D.x),B.y-H*(B.y-D.y)];break}var Yt=a.unproject(X(K));return pe([Yt.lat+ie.lat,Yt.lng+ie.lng])}var wn={__proto__:null,simplify:Lt,pointToSegmentDistance:Ua,closestPointOnSegment:Uu,clipSegment:I,_getEdgeIntersection:j,_getBitCode:U,_sqClosestPointOnSegment:ge,isFlat:Oe,_flat:Ve,polylineCenter:it},On={project:function(r){return new $(r.lng,r.lat)},unproject:function(r){return new xe(r.y,r.x)},bounds:new ce([-180,-90],[180,90])},En={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,E=Math.sqrt(1-g*g),D=E*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-D)/(1+D),E/2);return f=-c*Math.log(Math.max(B,1e-10)),new $(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),E=Math.exp(-r.y/c),D=Math.PI/2-2*Math.atan(E),B=0,H=.1,K;B<15&&Math.abs(H)>1e-7;B++)K=g*Math.sin(D),K=Math.pow((1-K)/(1+K),g/2),H=Math.PI/2-2*Math.atan(E*K)-D,D+=H;return new xe(D*a,r.x*a/c)}},ei={__proto__:null,LonLat:On,Mercator:En,SphericalMercator:va},io=s({},mn,{code:"EPSG:3395",projection:En,transformation:function(){var r=.5/(Math.PI*En.R);return Zi(r,.5,-r,.5)}()}),ro=s({},mn,{code:"EPSG:4326",projection:On,transformation:Zi(1/180,1,-1/180,.5)}),f1=s({},_t,{projection:On,transformation:Zi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});_t.Earth=mn,_t.EPSG3395=io,_t.EPSG3857=Gr,_t.EPSG900913=wu,_t.EPSG4326=ro,_t.Simple=f1;var Mn=Ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});we.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var so=Mn.extend({initialize:function(r,a){O(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),p1=function(r,a){return new so(r,a)},Ci=so.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),so.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),so.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new We;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),m1=function(r,a){return new Ci(r,a)},oo=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){O(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),E=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),E&&(r.style.marginLeft=-E.x+"px",r.style.marginTop=-E.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ae.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function g1(r){return new oo(r)}var Ha=oo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ha.imagePath!="string"&&(Ha.imagePath=this._detectIconPath()),(this.options.imagePath||Ha.imagePath)+oo.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var E=f.exec(c);return E&&E[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=er(r,"background-image")||er(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Wg=an.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Nn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=xi(a._icon),D=c.getPixelBounds(),B=c.getPixelOrigin(),H=ve(D.min._subtract(B).add(g),D.max._subtract(B).subtract(g));if(!H.contains(E)){var K=X((Math.max(H.max.x,E.x)-H.max.x)/(D.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(D.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(D.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(D.min.y-H.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),et(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=V(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=xi(a._icon),g=a._map.layerPointToLatLng(f);c&&et(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Hu=Mn.extend({options:{icon:new Ha,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){O(this,a),this._latlng=pe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),se(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(se(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),Ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ne(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&et(this._icon,r),this._shadow&&et(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Kt(this._icon,r),this._shadow&&Kt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _1(r,a){return new Hu(r,a)}var rr=Mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return O(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wu=rr.extend({options:{fill:!0,radius:10},initialize:function(r,a){O(this,a),this._latlng=pe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return rr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ce(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function y1(r,a){return new Wu(r,a)}var Od=Wu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),O(this,a),this._latlng=pe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new We(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:rr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===mn.distance){var g=Math.PI/180,E=this._mRadius/mn.R/g,D=c.project([a+E,r]),B=c.project([a-E,r]),H=D.add(B).divideBy(2),K=c.unproject(H).lat,ie=Math.acos((Math.cos(E*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(ie)||ie===0)&&(ie=E/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(ie)?0:H.x-c.project([K,r-ie]).x,this._radiusY=H.y-D.y}else{var he=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(he).x}this._updateBounds()}});function v1(r,a,c){return new Od(r,a,c)}var Pi=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){O(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=ge,g,E,D=0,B=this._parts.length;D<B;D++)for(var H=this._parts[D],K=1,ie=H.length;K<ie;K++){g=H[K-1],E=H[K];var he=f(r,g,E,!0);he<a&&(a=he,c=f(r,g,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return it(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=pe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new We,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Oe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=Oe(r),f=0,g=r.length;f<g;f++)c?(a[f]=pe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new $(r,r);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof xe,g=r.length,E,D;if(f){for(D=[],E=0;E<g;E++)D[E]=this._map.latLngToLayerPoint(r[E]),c.extend(D[E]);a.push(D)}else for(E=0;E<g;E++)this._projectLatlngs(r[E],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,E,D,B,H;for(c=0,g=0,E=this._rings.length;c<E;c++)for(H=this._rings[c],f=0,D=H.length;f<D-1;f++)B=I(H[f],H[f+1],r,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==H[f+1]||f===D-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Lt(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,E,D,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,E=this._parts.length;c<E;c++)for(B=this._parts[c],f=0,D=B.length,g=D-1;f<D;g=f++)if(!(!a&&f===0)&&Ua(r,B[g],B[f])<=H)return!0;return!1}});function w1(r,a){return new Pi(r,a)}Pi._flat=Ve;var ao=Pi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ba(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Pi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof xe&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Pi.prototype._setLatLngs.call(this,r),Oe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(r=new ce(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,E;f<g;f++)E=ja(this._rings[f],r,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,E,D,B,H,K;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(E=0,H=this._parts.length;E<H;E++)for(c=this._parts[E],D=0,K=c.length,B=K-1;D<K;B=D++)f=c[D],g=c[B],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Pi.prototype._containsPoint.call(this,r,!0)}});function E1(r,a){return new ao(r,a)}var Ai=Ci.extend({initialize:function(r,a){O(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=N(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(r))return this;var D=$u(r,E);return D?(D.feature=Zu(r),D.defaultOptions=D.options,this.resetStyle(D),E.onEachFeature&&E.onEachFeature(r,D),this.addLayer(D)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function $u(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],E=a&&a.pointToLayer,D=a&&a.coordsToLatLng||Md,B,H,K,ie;if(!f&&!c)return null;switch(c.type){case"Point":return B=D(f),$g(E,r,B,a);case"MultiPoint":for(K=0,ie=f.length;K<ie;K++)B=D(f[K]),g.push($g(E,r,B,a));return new Ci(g);case"LineString":case"MultiLineString":return H=qu(f,c.type==="LineString"?0:1,D),new Pi(H,a);case"Polygon":case"MultiPolygon":return H=qu(f,c.type==="Polygon"?1:2,D),new ao(H,a);case"GeometryCollection":for(K=0,ie=c.geometries.length;K<ie;K++){var he=$u({geometry:c.geometries[K],type:"Feature",properties:r.properties},a);he&&g.push(he)}return new Ci(g);case"FeatureCollection":for(K=0,ie=c.features.length;K<ie;K++){var Ee=$u(c.features[K],a);Ee&&g.push(Ee)}return new Ci(g);default:throw new Error("Invalid GeoJSON object.")}}function $g(r,a,c,f){return r?r(a,c):new Hu(c,f&&f.markersInheritOptions&&f)}function Md(r){return new xe(r[1],r[0],r[2])}function qu(r,a,c){for(var f=[],g=0,E=r.length,D;g<E;g++)D=a?qu(r[g],a-1,c):(c||Md)(r[g]),f.push(D);return f}function Dd(r,a){return r=pe(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function Gu(r,a,c,f){for(var g=[],E=0,D=r.length;E<D;E++)g.push(a?Gu(r[E],Oe(r[E])?0:a-1,c,f):Dd(r[E],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function lo(r,a){return r.feature?s({},r.feature,{geometry:a}):Zu(a)}function Zu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Vd={toGeoJSON:function(r){return lo(this,{type:"Point",coordinates:Dd(this.getLatLng(),r)})}};Hu.include(Vd),Od.include(Vd),Wu.include(Vd),Pi.include({toGeoJSON:function(r){var a=!Oe(this._latlngs),c=Gu(this._latlngs,a?1:0,!1,r);return lo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),ao.include({toGeoJSON:function(r){var a=!Oe(this._latlngs),c=a&&!Oe(this._latlngs[0]),f=Gu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),lo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),so.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),lo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(r);if(c)f.push(E.geometry);else{var D=Zu(E);D.type==="FeatureCollection"?f.push.apply(f,D.features):f.push(D)}}}),c?lo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function qg(r,a){return new Ai(r,a)}var T1=qg,Ku=Mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=ke(a),O(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&_n(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ke(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Ti(this._image,c,a)},_reset:function(){var r=this._image,a=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();et(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),x1=function(r,a,c){return new Ku(r,a,c)},Gg=Ku.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var D=Pe("source");D.src=this._url[E],a.appendChild(D)}}});function I1(r,a,c){return new Gg(r,a,c)}var Zg=Ku.extend({_initImage:function(){var r=this._image=this._url;se(r,"leaflet-image-layer"),this._zoomAnimated&&se(r,"leaflet-zoom-animated"),this.options.className&&se(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function S1(r,a,c){return new Zg(r,a,c)}var ti=Mn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof xe||N(r))?(this._latlng=pe(r),O(this,a)):(O(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Ne,void 0,this._container),200)):Ne(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=pe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_n(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ci){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?et(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});we.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Mn.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(O(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Qu=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ti.prototype.openOn.call(this,r)},onAdd:function(r){ti.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",De))},onRemove:function(r){ti.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",De))},getEvents:function(){var r=ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),os(a),La(this._contentNode),me(a,"contextmenu",De),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',me(f,"click",function(g){at(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",se(r,E)):Be(r,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();et(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(er(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(xi(this._container));var E=r.layerPointToContainerPoint(g),D=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||D),H=X(this.options.autoPanPaddingBottomRight||D),K=r.getSize(),ie=0,he=0;E.x+f+H.x>K.x&&(ie=E.x+f-K.x+H.x),E.x-ie-B.x<0&&(ie=E.x-B.x),E.y+c+H.y>K.y&&(he=E.y+c-K.y+H.y),E.y-he-B.y<0&&(he=E.y-B.y),(ie||he)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ie,he]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),C1=function(r,a){return new Qu(r,a)};we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(r,a,c){return this._initOverlay(Qu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Mn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Qu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ci||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Qn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Yu=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ti.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ti.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ti.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,E=f.latLngToContainerPoint(f.getCenter()),D=f.layerPointToContainerPoint(r),B=this.options.direction,H=g.offsetWidth,K=g.offsetHeight,ie=X(this.options.offset),he=this._getAnchor();B==="top"?(a=H/2,c=K):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=K/2):B==="right"?(a=0,c=K/2):B==="left"?(a=H,c=K/2):D.x<E.x?(B="right",a=0,c=K/2):(B="left",a=H+(ie.x+he.x)*2,c=K/2),r=r.subtract(X(a,c,!0)).add(ie).add(he),Be(g,"leaflet-tooltip-right"),Be(g,"leaflet-tooltip-left"),Be(g,"leaflet-tooltip-top"),Be(g,"leaflet-tooltip-bottom"),se(g,"leaflet-tooltip-"+B),et(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Kt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),P1=function(r,a){return new Yu(r,a)};we.include({openTooltip:function(r,a,c){return this._initOverlay(Yu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Mn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Yu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ci||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(me(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),me(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Kg=oo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Bt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function A1(r){return new Kg(r)}oo.Default=Ha;var Wa=Mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){O(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ne(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof $?r:new $(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,E;f<g;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=r(c,+E));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Kt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var E=Math.min(1,(r-g.loaded)/200);Kt(g.el,E),E<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(P(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ne(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ne(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),E=Math.floor(a/2),D=c-1,B=new $(+g,+E);B.z=+D;var H=this._tileCoordsToKey(B),K=this._tiles[H];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),D>f?this._retainParent(g,E,D,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var E=2*a;E<2*a+2;E++){var D=new $(g,E);D.z=c+1;var B=this._tileCoordsToKey(D),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<f&&this._retainChildren(g,E,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Ti(r.el,g,f):et(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new ce(g.subtract(E),g.add(E))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),E=g.getCenter(),D=[],B=this.options.keepBuffer,H=new ce(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ie=this._tiles[K].coords;(ie.z!==this._tileZoom||!H.contains(new $(ie.x,ie.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var he=g.min.y;he<=g.max.y;he++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Ht=new $(Ee,he);if(Ht.z=this._tileZoom,!!this._isValidTile(Ht)){var Et=this._tiles[this._tileCoordsToKey(Ht)];Et?Et.current=!0:D.push(Ht)}}if(D.sort(function(Yt,co){return Yt.distanceTo(E)-co.distanceTo(E)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Ee=0;Ee<D.length;Ee++)this._addTile(D[Ee],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return ke(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),E=a.unproject(f,r.z),D=a.unproject(g,r.z);return[E,D]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new We(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ne(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){se(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=v,r.onmousemove=v,ae.ielt9&&this.options.opacity<1&&Kt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&V(l(this._tileReady,this,r,null,g)),et(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),P(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(se(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new $(this._wrapX?_(r.x,this._wrapX):r.x,this._wrapY?_(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ce(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function k1(r){return new Wa(r)}var uo=Wa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=O(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return me(c,"load",l(this._tileOnLoad,this,a,c)),me(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return x(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ae.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=v,a.onerror=v,!a.complete)){a.src=Q;var c=this._tiles[r].coords;Ne(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Q),Wa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return Wa.prototype._tileReady.call(this,r,a,c)}});function Qg(r,a){return new uo(r,a)}var Yg=uo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=O(this,a);var g=a.detectRetina&&ae.retina?2:1,E=this.getTileSize();c.width=E.x*g,c.height=E.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,uo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,E=f.max,D=(this._wmsVersion>=1.3&&this._crs===ro?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),B=uo.prototype.getTileUrl.call(this,r);return B+z(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function R1(r,a){return new Yg(r,a)}uo.WMS=Yg,Qg.wms=R1;var ki=Mn.extend({options:{padding:.1},initialize:function(r){O(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),E=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ae.any3d?Ti(this._container,E,c):et(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ce(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xg=ki.extend({options:{tolerance:0},getEvents:function(){var r=ki.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");me(r,"mousemove",this._onMouseMove,this),me(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,Ne(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ae.retina?2:1;et(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,E,D=r._parts,B=D.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(f=0,g=D[c].length;f<g;f++)E=D[c][f],H[f?"lineTo":"moveTo"](E.x,E.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Be(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(se(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Jg(r){return ae.canvas?new Xg(r):null}var $a=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),b1={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ki.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=$a("shape");se(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=$a("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ne(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=$a("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=$a("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){_n(r._container)},_bringToBack:function(r){yn(r._container)}},Xu=ae.vml?$a:Eu,qa=ki.extend({_initContainer:function(){this._container=Xu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ne(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ki.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),et(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Xu("path");r.options.className&&se(a,r.options.className),r.options.interactive&&se(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ne(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Vs(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",E=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,E)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){_n(r._path)},_bringToBack:function(r){yn(r._path)}});ae.vml&&qa.include(b1);function e_(r){return ae.svg||ae.vml?new qa(r):null}we.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Jg(r)||e_(r)}});var t_=ao.extend({initialize:function(r,a){ao.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ke(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function L1(r,a){return new t_(r,a)}qa.create=Xu,qa.pointsToPath=Vs,Ai.geometryToLayer=$u,Ai.coordsToLatLng=Md,Ai.coordsToLatLngs=qu,Ai.latLngToCoords=Dd,Ai.latLngsToCoords=Gu,Ai.getFeature=lo,Ai.asFeature=Zu,we.mergeOptions({boxZoom:!0});var n_=an.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ln(),Zs(),this._startPoint=this._map.mouseEventToContainerPoint(r),me(document,{contextmenu:Qn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ce(this._point,this._startPoint),c=a.getSize();et(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ne(this._box),Be(this._container,"leaflet-crosshair")),on(),Ks(),ze(document,{contextmenu:Qn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new We(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});we.addInitHook("addHandler","boxZoom",n_),we.mergeOptions({doubleClickZoom:!0});var i_=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});we.addInitHook("addHandler","doubleClickZoom",i_),we.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var r_=an.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Nn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ke(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,E=(f+a+c)%r-a-c,D=Math.abs(g+c)<Math.abs(E+c)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,D=c.easeLinearity,B=g.multiplyBy(D/E),H=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,H),ie=B.multiplyBy(K/H),he=K/(c.inertiaDeceleration*D),Ee=ie.multiplyBy(-he/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),V(function(){a.panBy(Ee,{duration:he,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});we.addInitHook("addHandler","dragging",r_),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var s_=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),me(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Qn(r)}}});we.addInitHook("addHandler","keyboard",s_),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var o_=an.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Oa(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Qn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(g/c)*c:g,D=r._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,D&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+D):r.setZoomAround(this._lastMousePos,a+D))}});we.addInitHook("addHandler","scrollWheelZoom",o_);var N1=600;we.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var a_=an.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",at),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),N1),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ze(document,"touchend",at),ze(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});we.addInitHook("addHandler","tapHold",a_),we.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var l_=an.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),at(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var D=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(D,this,!0),at(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});we.addInitHook("addHandler","touchZoom",l_),we.BoxZoom=n_,we.DoubleClickZoom=i_,we.Drag=r_,we.Keyboard=s_,we.ScrollWheelZoom=o_,we.TapHold=a_,we.TouchZoom=l_,n.Bounds=ce,n.Browser=ae,n.CRS=_t,n.Canvas=Xg,n.Circle=Od,n.CircleMarker=Wu,n.Class=te,n.Control=Qt,n.DivIcon=Kg,n.DivOverlay=ti,n.DomEvent=ls,n.DomUtil=Nd,n.Draggable=Nn,n.Evented=Ze,n.FeatureGroup=Ci,n.GeoJSON=Ai,n.GridLayer=Wa,n.Handler=an,n.Icon=oo,n.ImageOverlay=Ku,n.LatLng=xe,n.LatLngBounds=We,n.Layer=Mn,n.LayerGroup=so,n.LineUtil=wn,n.Map=we,n.Marker=Hu,n.Mixin=Bu,n.Path=rr,n.Point=$,n.PolyUtil=no,n.Polygon=ao,n.Polyline=Pi,n.Popup=Qu,n.PosAnimation=Da,n.Projection=ei,n.Rectangle=t_,n.Renderer=ki,n.SVG=qa,n.SVGOverlay=Zg,n.TileLayer=uo,n.Tooltip=Yu,n.Transformation=wa,n.Util=A,n.VideoOverlay=Gg,n.bind=l,n.bounds=ve,n.canvas=Jg,n.circle=v1,n.circleMarker=y1,n.control=Xn,n.divIcon=A1,n.extend=s,n.featureGroup=m1,n.geoJSON=qg,n.geoJson=T1,n.gridLayer=k1,n.icon=g1,n.imageOverlay=x1,n.latLng=pe,n.latLngBounds=ke,n.layerGroup=p1,n.map=Xs,n.marker=_1,n.point=X,n.polygon=E1,n.polyline=w1,n.popup=C1,n.rectangle=L1,n.setOptions=O,n.stamp=d,n.svg=e_,n.svgOverlay=S1,n.tileLayer=Qg,n.tooltip=P1,n.transformation=Zi,n.version=i,n.videoOverlay=I1;var O1=window.L;n.noConflict=function(){return window.L=O1,this},window.L=n})})(Zp,Zp.exports);var _a=Zp.exports;const Kp=o0(_a);function Id(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Sd(t,e){return e==null?function(i,s){const o=q.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=q.useRef();o.current||(o.current=t(i,s));const l=q.useRef(i),{instance:h}=o.current;return q.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function u1(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function c1(t){return function(n){const i=Ug(),s=t(xd(n,i),i);return r1(i.map,n.attribution),Hg(s.current,n.eventHandlers),u1(s.current,i),s}}function NN(t,e){const n=q.useRef();q.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function ON(t){return function(n){const i=Ug(),s=t(xd(n,i),i);return Hg(s.current,n.eventHandlers),u1(s.current,i),NN(s.current,n),s}}function MN(t,e){const n=Sd(t,e),i=c1(n);return l1(i)}function DN(t,e){const n=Sd(t),i=LN(n,e);return RN(i)}function VN(t,e){const n=Sd(t,e),i=ON(n);return l1(i)}function FN(t,e){const n=Sd(t,e),i=c1(n);return bN(i)}function zN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Qp(){return Qp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qp.apply(this,arguments)}function jN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,..._},v){const[T]=q.useState({className:s,id:o,style:h}),[b,F]=q.useState(null);q.useImperativeHandle(v,()=>(b==null?void 0:b.map)??null,[b]);const O=q.useCallback(k=>{if(k!==null&&b===null){const x=new _a.Map(k,_);n!=null&&p!=null?x.setView(n,p):t!=null&&x.fitBounds(t,e),d!=null&&x.whenReady(d),F(kN(x))}},[]);q.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const z=b?Cl.createElement(a1,{value:b},i):l??null;return Cl.createElement("div",Qp({},T,{ref:O}),z)}const BN=q.forwardRef(jN),h1=MN(function({position:e,...n},i){const s=new _a.Marker(e,n);return Id(s,s1(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),UN=VN(function({positions:e,...n},i){const s=new _a.Polygon(e,n);return Id(s,s1(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),d1=DN(function(e,n){const i=new _a.Popup(e,n.overlayContainer);return Id(i,n)},function(e,n,{position:i},s){q.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var _;n.map.off({popupopen:h,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),HN=FN(function({url:e,...n},i){const s=new _a.TileLayer(e,xd(n,i));return Id(s,i)},function(e,n,i){zN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),WN=[[52.37,23.48],[52.35,24],[52.33,24.5],[52.35,25],[52.38,25.5],[52.4,26],[52.42,26.5],[52.43,27],[52.43,27.5],[52.42,28],[52.4,28.5],[52.38,29],[52.36,29.5],[52.35,30],[52.33,30.5],[52.25,31.15],[52.18,31.7],[52.1,32.25],[52,32.8],[51.88,33.35],[51.75,33.9],[51.6,34.45],[51.45,35],[51.28,35.55],[51.1,36.1],[50.9,36.65],[50.7,37.2],[50.5,37.75],[50.3,38.3],[50.1,38.7],[49.9,39],[49.7,39.25],[49.5,39.4],[49.3,39.5],[49.1,39.55],[48.9,39.52],[48.7,39.45],[48.5,39.35],[48.3,39.2],[48.1,39],[47.95,38.75],[47.8,38.5],[47.65,38.3],[47.5,38.15],[47.35,38.05],[47.2,38],[47.05,37.95],[46.9,37.85],[46.75,37.7],[46.6,37.5],[46.45,37.25],[46.3,37],[46.15,36.7],[46,36.4],[45.85,36.05],[45.7,35.7],[45.55,35.35],[45.4,35],[45.3,34.65],[45.25,34.3],[45.22,33.95],[45.2,33.6],[45.19,33.25],[45.18,32.9],[45.2,32.55],[45.23,32.2],[45.28,31.85],[45.35,31.5],[45.43,31.15],[45.52,30.8],[45.62,30.45],[45.73,30.15],[45.85,29.9],[45.98,29.7],[46.12,29.55],[46.25,29.45],[46.38,29.4],[46.5,29.38],[46.62,29.35],[46.73,29.3],[46.83,29.2],[46.92,29.05],[47,28.85],[47.08,28.6],[47.15,28.35],[47.22,28.1],[47.28,27.85],[47.33,27.6],[47.38,27.35],[47.42,27.1],[47.45,26.85],[47.48,26.6],[47.5,26.35],[47.52,26.1],[47.53,25.85],[47.54,25.6],[47.55,25.35],[47.58,25.1],[47.62,24.85],[47.67,24.6],[47.73,24.35],[47.8,24.15],[47.88,23.95],[47.97,23.8],[48.07,23.65],[48.17,23.5],[48.28,23.38],[48.4,23.28],[48.52,23.2],[48.65,23.15],[48.78,23.12],[48.92,23.1],[49.05,23.08],[49.18,23.05],[49.3,23],[49.42,22.95],[49.53,22.88],[49.63,22.8],[49.72,22.7],[49.8,22.58],[49.87,22.45],[49.93,22.32],[49.98,22.2],[50.03,22.1],[50.1,22.02],[50.18,21.95],[50.27,21.9],[50.37,21.87],[50.48,21.85],[50.6,21.85],[50.72,21.87],[50.85,21.92],[50.98,22],[51.12,22.1],[51.25,22.23],[51.38,22.38],[51.5,22.55],[51.62,22.75],[51.73,22.97],[51.85,23.1],[51.97,23.2],[52.1,23.28],[52.23,23.38],[52.37,23.48]],$N=(t,e=3)=>{const n=[];for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];for(let l=0;l<e;l++){const h=l/e;n.push([s[0]+(o[0]-s[0])*h,s[1]+(o[1]-s[1])*h])}}return n},qN=(t,e)=>{const n=$N(t,5),i=1/111,s=1/70,o=48.5,l=31.5,h=[];for(let d=0;d<n.length;d++){const p=n[d],_=p[0]-o,v=p[1]-l,T=Math.sqrt(_*_+v*v);if(T===0)continue;const b=_/T,F=v/T,O=Math.atan2(v,_)*(180/Math.PI);let z=0;if(O>=45&&O<=135){const x=1-Math.abs((O-90)/45);z+=100*x}if(Math.abs(O)>=135){const x=Math.abs(O),N=1-Math.abs((x-180)/45);z+=100*N}const k=Math.max(0,e-z);h.push([p[0]+b*k*i,p[1]+F*k*s])}return h},GN=[{name:"500km Range",range:500,color:"#10B981"},{name:"1000km Range",range:1e3,color:"#F97316"},{name:"1500km Range",range:1500,color:"#EF4444"}],ZN=[{name:"Kyiv",lat:50.4501,lon:30.5234,colors:{top:"#0057B7",bottom:"#FFD700"}},{name:"Moscow",lat:55.7558,lon:37.6173,color:"#DC2626",colors:void 0}],s0=(t,e)=>{const n=e?"red":"white";return Kp.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid ${n};"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},KN=({facility:t,onViewDetails:e})=>{var l,h;const n=q.useRef(null);q.useEffect(()=>{if(n.current){const d=t.type==="refinery"?"#FF5733":t.type==="extraction"?"#33FF57":t.type==="storage"?"#3357FF":"#FFC300";n.current.setIcon(s0(d,t.hit))}},[t.hit,t.type]);const i=d=>{switch(d){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}},s=((l=t.location)==null?void 0:l.latitude)??t.latitude??0,o=((h=t.location)==null?void 0:h.longitude)??t.longitude??0;return w.jsx(h1,{ref:n,position:[s,o],icon:s0(i(t.type),t.hit),children:w.jsx(d1,{children:w.jsxs("div",{style:{color:"#000",minWidth:"200px"},children:[w.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:t.name}),w.jsx("div",{style:{marginBottom:"8px"},children:w.jsx("div",{style:{display:"inline-block",padding:"3px 8px",backgroundColor:t.hit?"#dc2626":"#10b981",color:"white",borderRadius:"3px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:t.hit?"HIT":"OPERATIONAL"})}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Type:"})," ",w.jsx("span",{style:{textTransform:"capitalize"},children:t.type})]}),w.jsxs("p",{style:{margin:"5px 0",fontSize:"13px"},children:[w.jsx("strong",{children:"Capacity:"})," ",t.capacity.toLocaleString()," bbl/day"]}),w.jsxs("p",{style:{margin:"5px 0 10px 0",fontSize:"11px",color:"#666"},children:[s.toFixed(4),", ",o.toFixed(4)]}),w.jsx("button",{onClick:()=>e(t.id),style:{width:"100%",padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},onMouseOver:d=>d.currentTarget.style.backgroundColor="#2563eb",onMouseOut:d=>d.currentTarget.style.backgroundColor="#3b82f6",children:"View Full Details "})]})})})},QN=()=>{const t=lu(),[e,n]=q.useState([]),[i,s]=q.useState("all"),[o,l]=q.useState("all"),[h,d]=q.useState(""),[p,_]=q.useState(0),[v,T]=q.useState(!0),[b,F]=q.useState(!0),[O,z]=q.useState(!0),[k,x]=q.useState(!0),[N,W]=q.useState(!0),[Q,J]=q.useState(!0);q.useEffect(()=>{(async()=>{try{if(!Re){console.error("Firebase not initialized");return}const V=(await ai(oi(Re,tt.FACILITIES))).docs.map(P=>({id:parseInt(P.id),...P.data()})).filter(P=>!P.draft);n(V)}catch(M){console.error("Error fetching facilities:",M)}})()},[]);const R=S=>{t(`/facility/${S}`)},C=e.filter(S=>!(i!=="all"&&S.type!==i||S.type==="refinery"&&!v||S.type==="extraction"&&!b||S.type==="storage"&&!O||o==="hit"&&!S.hit||o==="operational"&&S.hit||S.capacity<p||h&&!S.name.toLowerCase().includes(h.toLowerCase())));return w.jsxs("div",{style:{display:"flex",width:"100%",height:"100vh",backgroundColor:"#0a0a0a",overflow:"hidden"},children:[w.jsxs("div",{style:{width:"320px",background:"linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%)",borderRight:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"2px 0 15px rgba(0, 0, 0, 0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{padding:"18px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",background:"linear-gradient(135deg, #2d3561 0%, #1f2749 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[w.jsx("h2",{style:{margin:"0 0 6px 0",fontSize:"18px",fontWeight:"700",color:"white",letterSpacing:"0.3px"},children:"Russian Oil Facilities"}),w.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"13px",fontWeight:"500"},children:[C.length," of ",e.length," facilities"]})]}),w.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px 20px"},children:[w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Search"}),w.jsx("input",{type:"text",placeholder:"Search by name...",value:h,onChange:S=>d(S.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(10, 10, 10, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="rgba(96, 165, 250, 0.5)",onBlur:S=>S.target.style.borderColor="rgba(255, 255, 255, 0.1)"})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Status"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="hit",onChange:S=>{l(o==="hit"?"all":"hit")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Hit"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:o==="all"||o==="operational",onChange:S=>{l(o==="operational"?"all":"operational")},style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Operational"})]})]})]}),w.jsxs("div",{style:{marginBottom:"16px"},children:[w.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px"},children:"Min. Capacity"}),w.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px",marginBottom:"8px",fontWeight:"600"},children:[p.toLocaleString()," barrels/day"]}),w.jsx("input",{type:"range",min:"0",max:"400000",step:"10000",value:p,onChange:S=>_(Number(S.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#6b7280",height:"5px"}})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Facility Types"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:v,onChange:S=>T(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#FF5733",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Refinery"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:b,onChange:S=>F(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#33FF57",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Extraction"})]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:S=>S.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseLeave:S=>S.currentTarget.style.background="transparent",children:[w.jsx("input",{type:"checkbox",checked:O,onChange:S=>z(S.target.checked),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#6b7280"}}),w.jsx("span",{style:{color:"#3357FF",fontSize:"16px",lineHeight:"1"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"Storage"})]})]})]}),w.jsxs("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px",marginTop:"16px"},children:[w.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"8px"},children:"Weapon Ranges"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#10B981",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"500km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#F97316",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1000km Range"})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px"},children:[w.jsx("span",{style:{color:"#EF4444",fontSize:"16px"},children:""}),w.jsx("span",{style:{fontSize:"13px",color:"#cbd5e0",fontWeight:"500"},children:"1500km Range"})]})]})]})]})]}),w.jsx("div",{style:{flex:1,position:"relative"},children:w.jsxs(BN,{center:[55,50],zoom:4.4,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a"},zoomControl:!0,children:[w.jsx(HN,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),GN.map(S=>{if(S.range===500&&!k||S.range===1e3&&!N||S.range===1500&&!Q)return null;const M=qN(WN,S.range);return w.jsx(UN,{positions:M,pathOptions:{color:S.color,fillColor:"transparent",weight:2,opacity:.9,fillOpacity:0}},S.range)}),ZN.map(S=>{let M;return S.name==="Moscow"?M=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="${S.color}" 
                                          stroke="white" 
                                          stroke-width="2"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]}):S.name==="Kyiv"&&S.colors&&(M=Kp.divIcon({className:"capital-marker",html:`<div style="
                                width: 24px; 
                                height: 24px; 
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
                            ">
                                <svg width="24" height="24" viewBox="0 0 24 24" style="display: block;">
                                    <defs>
                                        <linearGradient id="ukraineFlag" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="70%" style="stop-color:${S.colors.top};stop-opacity:1" />
                                            <stop offset="70%" style="stop-color:${S.colors.bottom};stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 Z" 
                                          fill="url(#ukraineFlag)"/>
                                </svg>
                            </div>`,iconSize:[24,24],iconAnchor:[12,12]})),w.jsx(h1,{position:[S.lat,S.lon],icon:M,children:w.jsx(d1,{children:w.jsx("div",{style:{color:"#000",fontWeight:"bold"},children:S.name})})},S.name)}),C.map(S=>w.jsx(KN,{facility:S,onViewDetails:R},S.id))]})})]})},YN=()=>{var v,T;const{id:t}=qm(),e=lu(),[n,i]=q.useState(null),[s,o]=q.useState([]),[l,h]=q.useState(!0);if(q.useEffect(()=>{(async()=>{if(t)try{if(!Re){console.error("Firebase not initialized"),h(!1);return}const F=Sn(Re,tt.FACILITIES,t),O=await bg(F);if(O.exists()){i({id:parseInt(O.id),...O.data()});const z=oi(Re,tt.HITS),k=jc(z,Bc("facilityId","==",parseInt(t)),ib("date","desc")),N=(await ai(k)).docs.map(W=>({id:W.data().id,...W.data()}));o(N)}else console.error("Facility not found");h(!1)}catch(F){console.error("Error fetching facility:",F),h(!1)}})()},[t]),l)return w.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:"Loading..."});if(!n)return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white",gap:"20px"},children:[w.jsx("div",{style:{fontSize:"18px"},children:"Facility not found"}),w.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Back to Map"})]});const d=((v=n.location)==null?void 0:v.latitude)??n.latitude??0,p=((T=n.location)==null?void 0:T.longitude)??n.longitude??0,_=b=>{switch(b){case"refinery":return"#FF5733";case"extraction":return"#33FF57";case"storage":return"#3357FF";default:return"#FFC300"}};return w.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#0a0a0a",color:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"2px solid #333",padding:"20px 40px",flexShrink:0},children:[w.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 16px",backgroundColor:"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Back to Map"}),w.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:n.name}),w.jsx("div",{style:{display:"inline-block",padding:"6px 16px",backgroundColor:n.hit?"#dc2626":"#10b981",borderRadius:"4px",fontSize:"13px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n.hit?"HIT":"OPERATIONAL"})]}),w.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:w.jsxs("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:[w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"40px"},children:[w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility Type"}),w.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("span",{style:{color:_(n.type),fontSize:"28px"},children:""}),w.jsx("span",{style:{textTransform:"capitalize"},children:n.type})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Production Capacity"}),w.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"white"},children:n.capacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"barrels per day (oil)"}),n.gasCapacity&&w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:"white",marginTop:"16px"},children:n.gasCapacity.toLocaleString()}),w.jsx("div",{style:{fontSize:"14px",color:"#888",marginTop:"4px"},children:"million cubic meters per year (gas)"})]})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"24px"},children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",fontWeight:"500"},children:"Facility ID"}),w.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#666",fontFamily:"monospace"},children:["#",n.id]})]})]}),n.description&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginBottom:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600"},children:"Description"}),w.jsx("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"#ccc"},children:n.description})]}),w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px"},children:[w.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"Location"}),w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Latitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[d.toFixed(6),""]})]}),w.jsxs("div",{children:[w.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px",fontWeight:"500"},children:"Longitude"}),w.jsxs("div",{style:{fontSize:"18px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"12px",borderRadius:"4px",border:"1px solid #333"},children:[p.toFixed(6),""]})]})]}),w.jsx("div",{style:{marginTop:"20px"},children:w.jsx("a",{href:`https://www.google.com/maps?q=${d},${p}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:"View on Google Maps "})})]}),s.length>0&&w.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",padding:"30px",marginTop:"30px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[w.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Strike Records"}),w.jsxs("div",{style:{backgroundColor:"#dc2626",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:[s.length," ",s.length===1?"HIT":"HITS"]})]}),w.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map((b,F)=>w.jsxs("div",{style:{backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"6px",padding:"20px",borderLeft:"4px solid #dc2626"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[w.jsx("div",{style:{backgroundColor:"#dc2626",color:"white",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px"},children:s.length-F}),w.jsxs("div",{children:[w.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:["Strike on ",new Date(b.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),w.jsxs("div",{style:{fontSize:"13px",color:"#888"},children:["Expected repair time: ",w.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:[b.expectedRepairTime," days"]})]})]})]}),b.videoLink&&w.jsx("a",{href:b.videoLink,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:" Video"})]}),b.notes&&w.jsx("div",{style:{padding:"12px",backgroundColor:"#1a1a1a",borderRadius:"4px",fontSize:"14px",color:"#ccc",lineHeight:"1.5"},children:b.notes})]},b.id))})]})]})})]})},XN=()=>w.jsx(hP,{children:w.jsxs(lP,{children:[w.jsx(fo,{path:"/",element:w.jsx(QN,{})}),w.jsx(fo,{path:"/facility/:id",element:w.jsx(YN,{})}),w.jsx(fo,{path:"/admin",element:w.jsx(SN,{})}),w.jsx(fo,{path:"/admin/facility/:id",element:w.jsx(CN,{})}),w.jsx(fo,{path:"/admin/hit/:id",element:w.jsx(PN,{})})]})}),JN=Pf.createRoot(document.getElementById("root"));JN.render(w.jsx(Cl.StrictMode,{children:w.jsx(XN,{})}));
